/* Generated by CIL v. 1.3.2 */
/* print_CIL_Input is true */

typedef unsigned int size_t;
typedef unsigned long id3_length_t;
typedef unsigned long id3_ucs4_t;
typedef unsigned char id3_latin1_t;
typedef unsigned short id3_utf16_t;
typedef signed char id3_utf8_t;
typedef unsigned char id3_byte_t;
enum id3_utf16_byteorder {
    ID3_UTF16_BYTEORDER_ANY = 0,
    ID3_UTF16_BYTEORDER_BE = 1,
    ID3_UTF16_BYTEORDER_LE = 2
};
enum id3_field_textencoding {
    ID3_FIELD_TEXTENCODING_ISO_8859_1 = 0,
    ID3_FIELD_TEXTENCODING_UTF_16 = 1,
    ID3_FIELD_TEXTENCODING_UTF_16BE = 2,
    ID3_FIELD_TEXTENCODING_UTF_8 = 3
};
typedef unsigned char __uint8_t;
union __anonunion___u_26 {
   unsigned int __ui ;
   unsigned short __usi ;
   unsigned char __uc ;
};
union id3_field;
enum id3_field_type {
    ID3_FIELD_TYPE_TEXTENCODING = 0,
    ID3_FIELD_TYPE_LATIN1 = 1,
    ID3_FIELD_TYPE_LATIN1FULL = 2,
    ID3_FIELD_TYPE_LATIN1LIST = 3,
    ID3_FIELD_TYPE_STRING = 4,
    ID3_FIELD_TYPE_STRINGFULL = 5,
    ID3_FIELD_TYPE_STRINGLIST = 6,
    ID3_FIELD_TYPE_LANGUAGE = 7,
    ID3_FIELD_TYPE_FRAMEID = 8,
    ID3_FIELD_TYPE_DATE = 9,
    ID3_FIELD_TYPE_INT8 = 10,
    ID3_FIELD_TYPE_INT16 = 11,
    ID3_FIELD_TYPE_INT24 = 12,
    ID3_FIELD_TYPE_INT32 = 13,
    ID3_FIELD_TYPE_INT32PLUS = 14,
    ID3_FIELD_TYPE_BINARYDATA = 15
};
struct __anonstruct_number_19 {
   enum id3_field_type type ;
   long value ;
};
struct __anonstruct_latin1_20 {
   enum id3_field_type type ;
   id3_latin1_t *ptr ;
};
struct __anonstruct_latin1list_21 {
   enum id3_field_type type ;
   unsigned int nstrings ;
   id3_latin1_t **strings ;
};
struct __anonstruct_string_22 {
   enum id3_field_type type ;
   id3_ucs4_t *ptr ;
};
struct __anonstruct_stringlist_23 {
   enum id3_field_type type ;
   unsigned int nstrings ;
   id3_ucs4_t **strings ;
};
struct __anonstruct_immediate_24 {
   enum id3_field_type type ;
   char value[9] ;
};
struct __anonstruct_binary_25 {
   enum id3_field_type type ;
   id3_byte_t *data ;
   id3_length_t length ;
};
union id3_field {
   enum id3_field_type type ;
   struct __anonstruct_number_19 number ;
   struct __anonstruct_latin1_20 latin1 ;
   struct __anonstruct_latin1list_21 latin1list ;
   struct __anonstruct_string_22 string ;
   struct __anonstruct_stringlist_23 stringlist ;
   struct __anonstruct_immediate_24 immediate ;
   struct __anonstruct_binary_25 binary ;
};
union __anonunion___u_26___0 {
   unsigned int __ui ;
   unsigned short __usi ;
   unsigned char __uc ;
};
struct id3_frametype {
   char const   *id ;
   unsigned int nfields ;
   enum id3_field_type  const  *fields ;
   int defaultflags ;
   char const   *description ;
};
struct id3_frame;
struct id3_tag {
   unsigned int refcount ;
   unsigned int version ;
   int flags ;
   int extendedflags ;
   int restrictions ;
   int options ;
   unsigned int nframes ;
   struct id3_frame **frames ;
   id3_length_t paddedsize ;
};
struct id3_frame {
   char id[5] ;
   char const   *description ;
   unsigned int refcount ;
   int flags ;
   int group_id ;
   int encryption_method ;
   id3_byte_t *encoded ;
   id3_length_t encoded_length ;
   id3_length_t decoded_length ;
   unsigned int nfields ;
   union id3_field *fields ;
};
typedef int id3_compat_func_t(struct id3_frame * , char const   * , id3_byte_t const   * ,
                              id3_length_t  );
struct id3_compat {
   char const   *id ;
   char const   *equiv ;
   id3_compat_func_t *translate ;
};
typedef unsigned char Byte;
typedef unsigned long uLong;
typedef Byte Bytef;
typedef uLong uLongf;
enum tagtype {
    TAGTYPE_NONE = 0,
    TAGTYPE_ID3V1 = 1,
    TAGTYPE_ID3V2 = 2,
    TAGTYPE_ID3V2_FOOTER = 3
};
typedef long __off_t;
typedef long long __off64_t;
struct _IO_FILE;
typedef struct _IO_FILE FILE;
typedef unsigned int wint_t;
union __anonunion___value_3 {
   wint_t __wch ;
   char __wchb[4] ;
};
struct __anonstruct___mbstate_t_2 {
   int __count ;
   union __anonunion___value_3 __value ;
};
typedef struct __anonstruct___mbstate_t_2 __mbstate_t;
struct __anonstruct__G_fpos_t_4 {
   __off_t __pos ;
   __mbstate_t __state ;
};
typedef struct __anonstruct__G_fpos_t_4 _G_fpos_t;
typedef void _IO_lock_t;
struct _IO_marker {
   struct _IO_marker *_next ;
   struct _IO_FILE *_sbuf ;
   int _pos ;
};
struct _IO_FILE {
   int _flags ;
   char *_IO_read_ptr ;
   char *_IO_read_end ;
   char *_IO_read_base ;
   char *_IO_write_base ;
   char *_IO_write_ptr ;
   char *_IO_write_end ;
   char *_IO_buf_base ;
   char *_IO_buf_end ;
   char *_IO_save_base ;
   char *_IO_backup_base ;
   char *_IO_save_end ;
   struct _IO_marker *_markers ;
   struct _IO_FILE *_chain ;
   int _fileno ;
   int _flags2 ;
   __off_t _old_offset ;
   unsigned short _cur_column ;
   signed char _vtable_offset ;
   char _shortbuf[1] ;
   _IO_lock_t *_lock ;
   __off64_t _offset ;
   void *__pad1 ;
   void *__pad2 ;
   int _mode ;
   char _unused2[(int )(15U * sizeof(int ) - 2U * sizeof(void *))] ;
};
typedef _G_fpos_t fpos_t;
enum id3_file_mode {
    ID3_FILE_MODE_READONLY = 0,
    ID3_FILE_MODE_READWRITE = 1
};
struct id3_file;
struct filetag {
   struct id3_tag *tag ;
   unsigned long location ;
   id3_length_t length ;
};
struct id3_file {
   FILE *iofile ;
   enum id3_file_mode mode ;
   char *path ;
   int flags ;
   struct id3_tag *primary ;
   unsigned int ntags ;
   struct filetag *tags ;
};
typedef unsigned long long __dev_t;
typedef unsigned int __uid_t;
typedef unsigned int __gid_t;
typedef unsigned long __ino_t;
typedef unsigned int __mode_t;
typedef unsigned int __nlink_t;
typedef int __pid_t;
typedef long __time_t;
typedef long __blksize_t;
typedef long __blkcnt_t;
typedef __uid_t uid_t;
typedef __off_t off_t;
typedef __time_t time_t;
struct __anonstruct___sigset_t_2 {
   unsigned long __val[(int )(1024U / (8U * sizeof(unsigned long )))] ;
};
typedef struct __anonstruct___sigset_t_2 __sigset_t;
typedef __sigset_t sigset_t;
struct timespec {
   __time_t tv_sec ;
   long tv_nsec ;
};
struct __sched_param {
   int __sched_priority ;
};
struct __pthread_attr_s {
   int __detachstate ;
   int __schedpolicy ;
   struct __sched_param __schedparam ;
   int __inheritsched ;
   int __scope ;
   size_t __guardsize ;
   int __stackaddr_set ;
   void *__stackaddr ;
   size_t __stacksize ;
};
typedef struct __pthread_attr_s pthread_attr_t;
typedef unsigned long pthread_t;
struct passwd {
   char *pw_name ;
   char *pw_passwd ;
   __uid_t pw_uid ;
   __gid_t pw_gid ;
   char *pw_gecos ;
   char *pw_dir ;
   char *pw_shell ;
};
typedef void (*__sighandler_t)(int  );
struct stat {
   __dev_t st_dev ;
   unsigned short __pad1 ;
   __ino_t st_ino ;
   __mode_t st_mode ;
   __nlink_t st_nlink ;
   __uid_t st_uid ;
   __gid_t st_gid ;
   __dev_t st_rdev ;
   unsigned short __pad2 ;
   __off_t st_size ;
   __blksize_t st_blksize ;
   __blkcnt_t st_blocks ;
   struct timespec st_atim ;
   struct timespec st_mtim ;
   struct timespec st_ctim ;
   unsigned long __unused4 ;
   unsigned long __unused5 ;
};
union wait;
struct __anonstruct___wait_terminated_50 {
   unsigned int __w_termsig : 7 ;
   unsigned int __w_coredump : 1 ;
   unsigned int __w_retcode : 8 ;
   unsigned int  : 16 ;
};
struct __anonstruct___wait_stopped_51 {
   unsigned int __w_stopval : 8 ;
   unsigned int __w_stopsig : 8 ;
   unsigned int  : 16 ;
};
union wait {
   int w_status ;
   struct __anonstruct___wait_terminated_50 __wait_terminated ;
   struct __anonstruct___wait_stopped_51 __wait_stopped ;
};
struct tag_stats {
   time_t start_time ;
   int songs_served ;
   unsigned int gb_served ;
   unsigned int bytes_served ;
};
typedef struct tag_stats STATS;
struct tag_config {
   int use_mdns ;
   int stop ;
   int reload ;
   char *configfile ;
   char *web_root ;
   int port ;
   int rescan_interval ;
   int always_scan ;
   int process_m3u ;
   int scan_type ;
   int compress ;
   int pid ;
   char *adminpassword ;
   char *readpassword ;
   char *mp3dir ;
   char *servername ;
   char *playlist ;
   char *runas ;
   char *dbdir ;
   char *extensions ;
   char *artfilename ;
   char *logfile ;
   STATS stats ;
};
typedef struct tag_config CONFIG;
typedef void *WSHANDLE;
struct tag_wsconfig {
   char *web_root ;
   char *id ;
   unsigned short port ;
};
typedef struct tag_wsconfig WSCONFIG;
struct tag_arglist {
   char *key ;
   char *value ;
   struct tag_arglist *next ;
};
typedef struct tag_arglist ARGLIST;
struct tag_ws_conninfo {
   WSHANDLE pwsp ;
   int threadno ;
   int error ;
   int fd ;
   int request_type ;
   char *uri ;
   char *hostname ;
   int close ;
   ARGLIST request_headers ;
   ARGLIST response_headers ;
   ARGLIST request_vars ;
};
typedef struct tag_ws_conninfo WS_CONNINFO;
struct tag_mp3file {
   char *path ;
   char *fname ;
   char *title ;
   char *artist ;
   char *album ;
   char *genre ;
   char *comment ;
   char *type ;
   char *composer ;
   char *orchestra ;
   char *conductor ;
   char *grouping ;
   char *url ;
   int bitrate ;
   int samplerate ;
   int song_length ;
   int file_size ;
   int year ;
   int track ;
   int total_tracks ;
   int disc ;
   int total_discs ;
   int time_added ;
   int time_modified ;
   int time_played ;
   int db_timestamp ;
   int bpm ;
   int got_id3 ;
   unsigned long id ;
   char *description ;
   int item_kind ;
   int data_kind ;
   char compilation ;
};
typedef struct tag_mp3file MP3FILE;
struct gzip_stream_tag {
   int bytes_in ;
   int bytes_out ;
   int in_size ;
   char *in ;
   char *out ;
};
typedef struct gzip_stream_tag GZIP_STREAM;
struct daap_block_tag {
   char tag[4] ;
   int reported_size ;
   int size ;
   int free ;
   char *value ;
   char svalue[4] ;
   struct daap_block_tag *parent ;
   struct daap_block_tag *children ;
   struct daap_block_tag *last_child ;
   struct daap_block_tag *next ;
};
typedef struct daap_block_tag DAAP_BLOCK;
typedef long __clock_t;
typedef long __suseconds_t;
typedef unsigned int __socklen_t;
union sigval {
   int sival_int ;
   void *sival_ptr ;
};
typedef union sigval sigval_t;
struct __anonstruct__kill_4 {
   __pid_t si_pid ;
   __uid_t si_uid ;
};
struct __anonstruct__timer_5 {
   int si_tid ;
   int si_overrun ;
   sigval_t si_sigval ;
};
struct __anonstruct__rt_6 {
   __pid_t si_pid ;
   __uid_t si_uid ;
   sigval_t si_sigval ;
};
struct __anonstruct__sigchld_7 {
   __pid_t si_pid ;
   __uid_t si_uid ;
   int si_status ;
   __clock_t si_utime ;
   __clock_t si_stime ;
};
struct __anonstruct__sigfault_8 {
   void *si_addr ;
};
struct __anonstruct__sigpoll_9 {
   long si_band ;
   int si_fd ;
};
union __anonunion__sifields_3 {
   int _pad[(int )(128U / sizeof(int ) - 3U)] ;
   struct __anonstruct__kill_4 _kill ;
   struct __anonstruct__timer_5 _timer ;
   struct __anonstruct__rt_6 _rt ;
   struct __anonstruct__sigchld_7 _sigchld ;
   struct __anonstruct__sigfault_8 _sigfault ;
   struct __anonstruct__sigpoll_9 _sigpoll ;
};
struct siginfo {
   int si_signo ;
   int si_errno ;
   int si_code ;
   union __anonunion__sifields_3 _sifields ;
};
typedef struct siginfo siginfo_t;
union __anonunion___sigaction_handler_21 {
   void (*sa_handler)(int  ) ;
   void (*sa_sigaction)(int  , siginfo_t * , void * ) ;
};
struct sigaction {
   union __anonunion___sigaction_handler_21 __sigaction_handler ;
   __sigset_t sa_mask ;
   int sa_flags ;
   void (*sa_restorer)(void) ;
};
typedef __socklen_t socklen_t;
typedef unsigned short uint16_t;
typedef unsigned int uint32_t;
struct timeval {
   __time_t tv_sec ;
   __suseconds_t tv_usec ;
};
typedef long __fd_mask;
struct __anonstruct_fd_set_30 {
   __fd_mask __fds_bits[(int )(1024U / (8U * sizeof(__fd_mask )))] ;
};
typedef struct __anonstruct_fd_set_30 fd_set;
typedef unsigned short sa_family_t;
struct sockaddr {
   sa_family_t sa_family ;
   char sa_data[14] ;
};
typedef uint16_t in_port_t;
typedef uint32_t in_addr_t;
struct in_addr {
   in_addr_t s_addr ;
};
struct sockaddr_in {
   sa_family_t sin_family ;
   in_port_t sin_port ;
   struct in_addr sin_addr ;
   unsigned char sin_zero[(int )(((sizeof(struct sockaddr ) - sizeof(unsigned short )) -
                                  sizeof(in_port_t )) - sizeof(struct in_addr ))] ;
};
struct hostent {
   char *h_name ;
   char **h_aliases ;
   int h_addrtype ;
   int h_length ;
   char **h_addr_list ;
};
typedef unsigned short u_port_t;
typedef int __int32_t;
typedef int __ssize_t;
typedef __ssize_t ssize_t;
struct _pthread_fastlock {
   long __status ;
   int __spinlock ;
};
struct _pthread_descr_struct;
typedef struct _pthread_descr_struct *_pthread_descr;
typedef long long __pthread_cond_align_t;
struct __anonstruct_pthread_cond_t_5 {
   struct _pthread_fastlock __c_lock ;
   _pthread_descr __c_waiting ;
   char __padding[(int )(((48U - sizeof(struct _pthread_fastlock )) - sizeof(_pthread_descr )) -
                         sizeof(__pthread_cond_align_t ))] ;
   __pthread_cond_align_t __align ;
};
typedef struct __anonstruct_pthread_cond_t_5 pthread_cond_t;
struct __anonstruct_pthread_condattr_t_6 {
   int __dummy ;
};
typedef struct __anonstruct_pthread_condattr_t_6 pthread_condattr_t;
struct __anonstruct_pthread_mutex_t_7 {
   int __m_reserved ;
   int __m_count ;
   _pthread_descr __m_owner ;
   int __m_kind ;
   struct _pthread_fastlock __m_lock ;
};
typedef struct __anonstruct_pthread_mutex_t_7 pthread_mutex_t;
struct __anonstruct_pthread_mutexattr_t_8 {
   int __mutexkind ;
};
typedef struct __anonstruct_pthread_mutexattr_t_8 pthread_mutexattr_t;
struct tm {
   int tm_sec ;
   int tm_min ;
   int tm_hour ;
   int tm_mday ;
   int tm_mon ;
   int tm_year ;
   int tm_wday ;
   int tm_yday ;
   int tm_isdst ;
   long tm_gmtoff ;
   char const   *tm_zone ;
};
typedef unsigned long reg_syntax_t;
struct re_pattern_buffer {
   unsigned char *buffer ;
   unsigned long allocated ;
   unsigned long used ;
   reg_syntax_t syntax ;
   char *fastmap ;
   char *translate ;
   size_t re_nsub ;
   unsigned int can_be_null : 1 ;
   unsigned int regs_allocated : 2 ;
   unsigned int fastmap_accurate : 1 ;
   unsigned int no_sub : 1 ;
   unsigned int not_bol : 1 ;
   unsigned int not_eol : 1 ;
   unsigned int newline_anchor : 1 ;
};
typedef struct re_pattern_buffer regex_t;
typedef int regoff_t;
struct __anonstruct_regmatch_t_18 {
   regoff_t rm_so ;
   regoff_t rm_eo ;
};
typedef struct __anonstruct_regmatch_t_18 regmatch_t;
typedef __builtin_va_list __gnuc_va_list;
typedef __gnuc_va_list va_list;
struct tag_ws_handler {
   regex_t regex ;
   void (*req_handler)(WS_CONNINFO * ) ;
   int (*auth_handler)(char * , char * ) ;
   int addheaders ;
   struct tag_ws_handler *next ;
};
typedef struct tag_ws_handler WS_HANDLER;
struct tag_ws_connlist {
   WS_CONNINFO *pwsc ;
   char *status ;
   struct tag_ws_connlist *next ;
};
typedef struct tag_ws_connlist WS_CONNLIST;
struct tag_ws_private {
   WSCONFIG wsconfig ;
   WS_HANDLER handlers ;
   WS_CONNLIST connlist ;
   int server_fd ;
   int stop ;
   int running ;
   int threadno ;
   int dispatch_threads ;
   pthread_t server_tid ;
   pthread_cond_t exit_cond ;
   pthread_mutex_t exit_mutex ;
};
typedef struct tag_ws_private WS_PRIVATE;
union __anonunion___u_35 {
   unsigned int __ui ;
   unsigned short __usi ;
   unsigned char __uc ;
};
union __anonunion___u_36 {
   unsigned int __ui ;
   unsigned short __usi ;
   unsigned char __uc ;
};
union __anonunion___u_37 {
   unsigned int __ui ;
   unsigned short __usi ;
   unsigned char __uc ;
};
struct tag_configelement {
   int config_element ;
   int required ;
   int changed ;
   int type ;
   char *name ;
   void *var ;
   void (*emit)(WS_CONNINFO * , void * , char * ) ;
};
typedef struct tag_configelement CONFIGELEMENT;
struct tag_scan_status {
   int session ;
   int thread ;
   char *what ;
   char *host ;
   struct tag_scan_status *next ;
};
typedef struct tag_scan_status SCAN_STATUS;
union __anonunion___u_53 {
   unsigned int __ui ;
   unsigned short __usi ;
   unsigned char __uc ;
};
union __anonunion___u_54 {
   unsigned int __ui ;
   unsigned short __usi ;
   unsigned char __uc ;
};
union __anonunion___u_55 {
   unsigned int __ui ;
   unsigned short __usi ;
   unsigned char __uc ;
};
typedef __mode_t mode_t;
typedef __pid_t pid_t;
struct timezone {
   int tz_minuteswest ;
   int tz_dsttime ;
};
typedef struct timezone * __restrict  __timezone_ptr_t;
typedef unsigned int uInt;
typedef void *voidpf;
struct internal_state;
struct z_stream_s {
   Bytef *next_in ;
   uInt avail_in ;
   uLong total_in ;
   Bytef *next_out ;
   uInt avail_out ;
   uLong total_out ;
   char *msg ;
   struct internal_state *state ;
   voidpf (*zalloc)(voidpf opaque , uInt items , uInt size ) ;
   void (*zfree)(voidpf opaque , voidpf address ) ;
   voidpf opaque ;
   int data_type ;
   uLong adler ;
   uLong reserved ;
};
typedef struct z_stream_s z_stream;
typedef z_stream *z_streamp;
struct internal_state {
   int dummy ;
};
union __anonunion___u_21 {
   unsigned int __ui ;
   unsigned short __usi ;
   unsigned char __uc ;
};
union __anonunion___u_22 {
   unsigned int __ui ;
   unsigned short __usi ;
   unsigned char __uc ;
};
typedef void *ENUMHANDLE;
enum __anonenum_query_type_t_21 {
    qot_empty = 0,
    qot_and = 1,
    qot_or = 2,
    qot_not = 3,
    qot_eq = 4,
    qot_ne = 5,
    qot_le = 6,
    qot_lt = 7,
    qot_ge = 8,
    qot_gt = 9,
    qot_is = 10,
    qot_begins = 11,
    qot_ends = 12,
    qot_contains = 13,
    qot_const = 14,
    qft_i32 = 15,
    qft_i64 = 16,
    qft_string = 17
};
typedef enum __anonenum_query_type_t_21 query_type_t;
struct query_field_;
typedef struct query_field_ query_field_t;
struct query_field_ {
   query_type_t type ;
   char const   *name ;
   int offset ;
};
struct query_node_;
typedef struct query_node_ query_node_t;
union __anonunion_left_22 {
   query_node_t *node ;
   query_field_t const   *field ;
   int constant ;
};
union __anonunion_right_23 {
   query_node_t *node ;
   int i32 ;
   long long i64 ;
   char *str ;
};
struct query_node_ {
   query_type_t type ;
   union __anonunion_left_22 left ;
   union __anonunion_right_23 right ;
};
struct tag_daap_items {
   int type ;
   char *tag ;
   char *description ;
};
typedef struct tag_daap_items DAAP_ITEMS;
enum __anonenum_MetaFieldName_t_24 {
    metaItemId = 0,
    metaItemName = 1,
    metaItemKind = 2,
    metaPersistentId = 3,
    metaContainerItemId = 4,
    metaParentContainerId = 5,
    firstTypeSpecificMetaId = 6,
    metaSongAlbum = 6,
    metaSongArtist = 7,
    metaSongBPM = 8,
    metaSongBitRate = 9,
    metaSongComment = 10,
    metaSongCompilation = 11,
    metaSongComposer = 12,
    metaSongDataKind = 13,
    metaSongDataURL = 14,
    metaSongDateAdded = 15,
    metaSongDateModified = 16,
    metaSongDescription = 17,
    metaSongDisabled = 18,
    metaSongDiscCount = 19,
    metaSongDiscNumber = 20,
    metaSongEqPreset = 21,
    metaSongFormat = 22,
    metaSongGenre = 23,
    metaSongGrouping = 24,
    metaSongRelativeVolume = 25,
    metaSongSampleRate = 26,
    metaSongSize = 27,
    metaSongStartTime = 28,
    metaSongStopTime = 29,
    metaSongTime = 30,
    metaSongTrackCount = 31,
    metaSongTrackNumber = 32,
    metaSongUserRating = 33,
    metaSongYear = 34
};
typedef enum __anonenum_MetaFieldName_t_24 MetaFieldName_t;
struct __anonstruct_MetaDataMap_25 {
   char const   *tag ;
   MetaFieldName_t bit ;
};
typedef struct __anonstruct_MetaDataMap_25 MetaDataMap;
typedef unsigned long long MetaField_t;
struct _browse_item;
typedef struct _browse_item browse_item;
struct _browse_item {
   char *name ;
   browse_item *next ;
};
struct __anonstruct_datum_1 {
   char *dptr ;
   int dsize ;
};
typedef struct __anonstruct_datum_1 datum;
struct __anonstruct_GDBM_FILE_2 {
   int dummy[10] ;
};
typedef struct __anonstruct_GDBM_FILE_2 *GDBM_FILE;
typedef int pthread_once_t;
struct _pthread_rwlock_t {
   struct _pthread_fastlock __rw_lock ;
   int __rw_readers ;
   _pthread_descr __rw_writer ;
   _pthread_descr __rw_read_waiting ;
   _pthread_descr __rw_write_waiting ;
   int __rw_kind ;
   int __rw_pshared ;
};
typedef struct _pthread_rwlock_t pthread_rwlock_t;
struct __anonstruct_pthread_rwlockattr_t_10 {
   int __lockkind ;
   int __pshared ;
};
typedef struct __anonstruct_pthread_rwlockattr_t_10 pthread_rwlockattr_t;
struct rbnode;
struct rbtree {
   int (*rb_cmp)(void const   * , void const   * , void const   * ) ;
   void const   *rb_config ;
   struct rbnode *rb_root ;
};
struct tag_mp3record;
typedef struct tag_mp3record MP3RECORD;
struct tag_mp3record {
   MP3FILE mp3file ;
   MP3RECORD *next ;
};
struct tag_playlistentry {
   unsigned long id ;
   struct tag_playlistentry *next ;
};
typedef struct tag_playlistentry DB_PLAYLISTENTRY;
struct tag_playlist {
   unsigned long id ;
   int songs ;
   int is_smart ;
   int found ;
   char *name ;
   int file_time ;
   struct tag_playlistentry *nodes ;
   struct tag_playlistentry *last_node ;
   struct tag_playlist *next ;
};
typedef struct tag_playlist DB_PLAYLIST;
struct tag_mp3packed {
   int version ;
   int struct_size ;
   int bitrate ;
   int samplerate ;
   int song_length ;
   int file_size ;
   int year ;
   int track ;
   int total_tracks ;
   int disc ;
   int total_discs ;
   int time_added ;
   int time_modified ;
   int time_played ;
   int db_timestamp ;
   int bpm ;
   char compilation ;
   unsigned long id ;
   int path_len ;
   int fname_len ;
   int title_len ;
   int artist_len ;
   int album_len ;
   int genre_len ;
   int comment_len ;
   int type_len ;
   int composer_len ;
   int orchestra_len ;
   int conductor_len ;
   int grouping_len ;
   int url_len ;
   char data[1] ;
};
typedef struct tag_mp3packed MP3PACKED;
union __anonunion___u_36___0 {
   unsigned int __ui ;
   unsigned short __usi ;
   unsigned char __uc ;
};
union __anonunion___u_37___0 {
   unsigned int __ui ;
   unsigned short __usi ;
   unsigned char __uc ;
};
struct dirent {
   __ino_t d_ino ;
   __off_t d_off ;
   unsigned short d_reclen ;
   unsigned char d_type ;
   char d_name[256] ;
};
struct __dirstream;
typedef struct __dirstream DIR;
struct tag_scan_frameinfo {
   int layer ;
   int bitrate ;
   int samplerate ;
   int stereo ;
   int frame_length ;
   int crc_protected ;
   int samples_per_frame ;
   int padding ;
   int xing_offset ;
   int number_of_frames ;
   int frame_offset ;
   double version ;
   int is_valid ;
};
typedef struct tag_scan_frameinfo SCAN_FRAMEINFO;
struct tag_scan_id3header {
   unsigned char id[3] ;
   unsigned char version[2] ;
   unsigned char flags ;
   unsigned char size[4] ;
} __attribute__((__packed__)) ;
typedef struct tag_scan_id3header SCAN_ID3HEADER;
struct __anonstruct_taghandler_47 {
   char *suffix ;
   int (*tags)(char *file , MP3FILE *pmp3 ) ;
   int (*files)(char *file , MP3FILE *pmp3 ) ;
};
typedef struct __anonstruct_taghandler_47 taghandler;
union __anonunion___u_48 {
   unsigned int __ui ;
   unsigned short __usi ;
   unsigned char __uc ;
};
union __anonunion___u_49 {
   unsigned int __ui ;
   unsigned short __usi ;
   unsigned char __uc ;
};
union __anonunion___u_50 {
   unsigned int __ui ;
   unsigned short __usi ;
   unsigned char __uc ;
};
union __anonunion___u_51 {
   unsigned int __ui ;
   unsigned short __usi ;
   unsigned char __uc ;
};
union __anonunion_arg1_16 {
   int ival ;
   struct tag_pl_node *plval ;
};
union __anonunion_arg2_17 {
   char *cval ;
   int ival ;
   struct tag_pl_node *plval ;
};
struct tag_pl_node {
   int op ;
   int type ;
   union __anonunion_arg1_16 arg1 ;
   union __anonunion_arg2_17 arg2 ;
};
typedef struct tag_pl_node PL_NODE;
struct tag_smart_playlist {
   char *name ;
   unsigned int id ;
   PL_NODE *root ;
   struct tag_smart_playlist *next ;
};
typedef struct tag_smart_playlist SMART_PLAYLIST;
typedef struct _IO_FILE _IO_FILE;
struct yy_buffer_state;
typedef struct yy_buffer_state *YY_BUFFER_STATE;
typedef unsigned int yy_size_t;
struct yy_buffer_state {
   FILE *yy_input_file ;
   char *yy_ch_buf ;
   char *yy_buf_pos ;
   yy_size_t yy_buf_size ;
   int yy_n_chars ;
   int yy_is_our_buffer ;
   int yy_is_interactive ;
   int yy_at_bol ;
   int yy_fill_buffer ;
   int yy_buffer_status ;
};
typedef unsigned char YY_CHAR;
typedef int yy_state_type;
union YYSTYPE {
   unsigned int ival ;
   char *cval ;
   PL_NODE *plval ;
};
typedef union YYSTYPE YYSTYPE;
union __anonunion___u_20 {
   unsigned int __ui ;
   unsigned short __usi ;
   unsigned char __uc ;
};
union __anonunion___u_21___0 {
   unsigned int __ui ;
   unsigned short __usi ;
   unsigned char __uc ;
};
union __anonunion___u_22___0 {
   unsigned int __ui ;
   unsigned short __usi ;
   unsigned char __uc ;
};
union __anonunion___u_23 {
   unsigned int __ui ;
   unsigned short __usi ;
   unsigned char __uc ;
};
union yyalloc {
   short yyss ;
   YYSTYPE yyvs ;
};
typedef signed char yysigned_char;
enum __anonenum_VISIT_13 {
    preorder = 0,
    postorder = 1,
    endorder = 2,
    leaf = 3
};
typedef enum __anonenum_VISIT_13 VISIT;
struct rblists {
   struct rbnode  const  *rootp ;
   struct rbnode  const  *nextp ;
};
enum nodecolour {
    BLACK = 0,
    RED = 1
};
struct rbnode {
   struct rbnode *left ;
   struct rbnode *right ;
   struct rbnode *up ;
   enum nodecolour colour ;
   void const   *key ;
};
typedef int mDNSBool;
typedef unsigned char mDNSu8;
typedef unsigned short mDNSu16;
typedef int int32_t;
typedef unsigned int u_int32_t;
typedef int32_t mDNSs32;
typedef u_int32_t mDNSu32;
struct mDNSInterfaceID_dummystruct {
   void *dummy ;
};
typedef struct mDNSInterfaceID_dummystruct *mDNSInterfaceID;
union __anonunion_mDNSOpaque16_10 {
   mDNSu8 b[2] ;
   mDNSu16 NotAnInteger ;
} __attribute__((__packed__)) ;
typedef union __anonunion_mDNSOpaque16_10 mDNSOpaque16;
union __anonunion_mDNSOpaque32_11 {
   mDNSu8 b[4] ;
   mDNSu32 NotAnInteger ;
} __attribute__((__packed__)) ;
typedef union __anonunion_mDNSOpaque32_11 mDNSOpaque32;
union __anonunion_mDNSOpaque128_12 {
   mDNSu8 b[16] ;
   mDNSu16 w[8] ;
   mDNSu32 l[4] ;
} __attribute__((__packed__)) ;
typedef union __anonunion_mDNSOpaque128_12 mDNSOpaque128;
typedef mDNSOpaque16 mDNSIPPort;
typedef mDNSOpaque32 mDNSv4Addr;
typedef mDNSOpaque128 mDNSv6Addr;
union __anonunion_ip_15 {
   mDNSv6Addr v6 ;
   mDNSv4Addr v4 ;
};
struct __anonstruct_mDNSAddr_14 {
   mDNSs32 type ;
   union __anonunion_ip_15 ip ;
};
typedef struct __anonstruct_mDNSAddr_14 mDNSAddr;
typedef mDNSs32 mStatus;
struct __anonstruct_domainlabel_18 {
   mDNSu8 c[64] ;
};
typedef struct __anonstruct_domainlabel_18 domainlabel;
struct __anonstruct_domainname_19 {
   mDNSu8 c[256] ;
};
typedef struct __anonstruct_domainname_19 domainname;
struct __anonstruct_UTF8str255_20 {
   mDNSu8 c[256] ;
};
typedef struct __anonstruct_UTF8str255_20 UTF8str255;
struct __anonstruct_rdataSRV_22 {
   mDNSu16 priority ;
   mDNSu16 weight ;
   mDNSIPPort port ;
   domainname target ;
} __attribute__((__packed__)) ;
typedef struct __anonstruct_rdataSRV_22 rdataSRV;
struct __anonstruct_rdataMX_23 {
   mDNSu16 preference ;
   domainname exchange ;
} __attribute__((__packed__)) ;
typedef struct __anonstruct_rdataMX_23 rdataMX;
union __anonunion_RDataBody_24 {
   mDNSu8 data[264] ;
   mDNSv4Addr ip ;
   mDNSv6Addr ipv6 ;
   domainname name ;
   UTF8str255 txt ;
   rdataSRV srv ;
   rdataMX mx ;
};
typedef union __anonunion_RDataBody_24 RDataBody;
struct __anonstruct_RData_25 {
   mDNSu16 MaxRDLength ;
   RDataBody u ;
};
typedef struct __anonstruct_RData_25 RData;
struct AuthRecord_struct;
typedef struct AuthRecord_struct AuthRecord;
struct CacheRecord_struct;
typedef struct CacheRecord_struct CacheRecord;
struct ResourceRecord_struct;
typedef struct ResourceRecord_struct ResourceRecord;
struct DNSQuestion_struct;
typedef struct DNSQuestion_struct DNSQuestion;
struct mDNS_struct;
typedef struct mDNS_struct mDNS;
struct mDNS_PlatformSupport_struct;
typedef struct mDNS_PlatformSupport_struct mDNS_PlatformSupport;
typedef void mDNSRecordCallback(mDNS *m , AuthRecord *rr , mStatus result );
typedef void mDNSRecordUpdateCallback(mDNS *m , AuthRecord *rr , RData *OldRData );
struct ResourceRecord_struct {
   mDNSu8 RecordType ;
   mDNSInterfaceID InterfaceID ;
   domainname name ;
   mDNSu16 rrtype ;
   mDNSu16 rrclass ;
   mDNSu32 rroriginalttl ;
   mDNSu16 rdlength ;
   mDNSu16 rdestimate ;
   mDNSu32 namehash ;
   mDNSu32 rdatahash ;
   mDNSu32 rdnamehash ;
   RData *rdata ;
};
struct AuthRecord_struct {
   AuthRecord *next ;
   ResourceRecord resrec ;
   AuthRecord *Additional1 ;
   AuthRecord *Additional2 ;
   AuthRecord *DependentOn ;
   AuthRecord *RRSet ;
   mDNSRecordCallback *RecordCallback ;
   void *RecordContext ;
   mDNSu8 HostTarget ;
   mDNSu8 Acknowledged ;
   mDNSu8 ProbeCount ;
   mDNSu8 AnnounceCount ;
   mDNSu8 IncludeInProbe ;
   mDNSInterfaceID ImmedAnswer ;
   mDNSInterfaceID ImmedAdditional ;
   mDNSInterfaceID SendRNow ;
   mDNSv4Addr v4Requester ;
   mDNSv6Addr v6Requester ;
   AuthRecord *NextResponse ;
   mDNSu8 const   *NR_AnswerTo ;
   AuthRecord *NR_AdditionalTo ;
   mDNSs32 ThisAPInterval ;
   mDNSs32 AnnounceUntil ;
   mDNSs32 LastAPTime ;
   mDNSs32 LastMCTime ;
   mDNSInterfaceID LastMCInterface ;
   RData *NewRData ;
   mDNSu16 newrdlength ;
   mDNSRecordUpdateCallback *UpdateCallback ;
   mDNSu32 UpdateCredits ;
   mDNSs32 NextUpdateCredit ;
   mDNSs32 UpdateBlocked ;
   RData rdatastorage ;
};
struct __anonstruct_rdatastorage_26 {
   mDNSu16 MaxRDLength ;
   mDNSu8 data[64] ;
};
struct CacheRecord_struct {
   CacheRecord *next ;
   ResourceRecord resrec ;
   CacheRecord *NextInKAList ;
   mDNSs32 TimeRcvd ;
   mDNSs32 NextRequiredQuery ;
   mDNSs32 LastUsed ;
   mDNSu32 UseCount ;
   DNSQuestion *CRActiveQuestion ;
   mDNSu32 UnansweredQueries ;
   mDNSs32 LastUnansweredTime ;
   mDNSu32 MPUnansweredQ ;
   mDNSs32 MPLastUnansweredQT ;
   mDNSu32 MPUnansweredKA ;
   mDNSBool MPExpectingKA ;
   CacheRecord *NextInCFList ;
   struct __anonstruct_rdatastorage_26 rdatastorage ;
};
struct __anonstruct_LargeCacheRecord_27 {
   CacheRecord r ;
   mDNSu8 _extradata[8128] ;
};
typedef struct __anonstruct_LargeCacheRecord_27 LargeCacheRecord;
struct NetworkInterfaceInfo_struct;
typedef struct NetworkInterfaceInfo_struct NetworkInterfaceInfo;
struct NetworkInterfaceInfo_struct {
   NetworkInterfaceInfo *next ;
   mDNSBool InterfaceActive ;
   mDNSBool IPv4Available ;
   mDNSBool IPv6Available ;
   AuthRecord RR_A ;
   AuthRecord RR_PTR ;
   AuthRecord RR_HINFO ;
   mDNSInterfaceID InterfaceID ;
   mDNSAddr ip ;
   mDNSBool Advertise ;
   mDNSBool TxAndRx ;
};
struct ExtraResourceRecord_struct;
typedef struct ExtraResourceRecord_struct ExtraResourceRecord;
struct ExtraResourceRecord_struct {
   ExtraResourceRecord *next ;
   AuthRecord r ;
};
struct ServiceRecordSet_struct;
typedef struct ServiceRecordSet_struct ServiceRecordSet;
typedef void mDNSServiceCallback(mDNS *m , ServiceRecordSet *sr , mStatus result );
struct ServiceRecordSet_struct {
   mDNSServiceCallback *ServiceCallback ;
   void *ServiceContext ;
   ExtraResourceRecord *Extras ;
   mDNSu32 NumSubTypes ;
   AuthRecord *SubTypes ;
   mDNSBool Conflict ;
   domainname Host ;
   AuthRecord RR_ADV ;
   AuthRecord RR_PTR ;
   AuthRecord RR_SRV ;
   AuthRecord RR_TXT ;
};
struct __anonstruct_DupSuppressInfo_28 {
   mDNSs32 Time ;
   mDNSInterfaceID InterfaceID ;
   mDNSs32 Type ;
};
typedef struct __anonstruct_DupSuppressInfo_28 DupSuppressInfo;
typedef void mDNSQuestionCallback(mDNS *m , DNSQuestion *question , ResourceRecord const   *answer ,
                                  mDNSBool AddRecord );
struct DNSQuestion_struct {
   DNSQuestion *next ;
   mDNSu32 qnamehash ;
   mDNSs32 LastQTime ;
   mDNSs32 ThisQInterval ;
   mDNSu32 RecentAnswers ;
   mDNSu32 CurrentAnswers ;
   mDNSu32 LargeAnswers ;
   mDNSu32 UniqueAnswers ;
   DNSQuestion *DuplicateOf ;
   DNSQuestion *NextInDQList ;
   DupSuppressInfo DupSuppress[8] ;
   mDNSInterfaceID SendQNow ;
   mDNSBool SendOnAll ;
   mDNSs32 LastQTxTime ;
   mDNSInterfaceID InterfaceID ;
   domainname qname ;
   mDNSu16 qtype ;
   mDNSu16 qclass ;
   mDNSQuestionCallback *QuestionCallback ;
   void *QuestionContext ;
};
struct __anonstruct_ServiceInfo_29 {
   domainname name ;
   mDNSInterfaceID InterfaceID ;
   mDNSAddr ip ;
   mDNSIPPort port ;
   mDNSu16 TXTlen ;
   mDNSu8 TXTinfo[2048] ;
};
typedef struct __anonstruct_ServiceInfo_29 ServiceInfo;
struct ServiceInfoQuery_struct;
typedef struct ServiceInfoQuery_struct ServiceInfoQuery;
typedef void mDNSServiceInfoQueryCallback(mDNS *m , ServiceInfoQuery *query );
struct ServiceInfoQuery_struct {
   DNSQuestion qSRV ;
   DNSQuestion qTXT ;
   DNSQuestion qAv4 ;
   DNSQuestion qAv6 ;
   mDNSu8 GotSRV ;
   mDNSu8 GotTXT ;
   mDNSu8 GotADD ;
   mDNSu32 Answers ;
   ServiceInfo *info ;
   mDNSServiceInfoQueryCallback *ServiceInfoQueryCallback ;
   void *ServiceInfoQueryContext ;
};
typedef void mDNSCallback(mDNS *m , mStatus result );
struct mDNS_struct {
   mDNS_PlatformSupport *p ;
   mDNSu32 KnownBugs ;
   mDNSBool AdvertiseLocalAddresses ;
   mStatus mDNSPlatformStatus ;
   mDNSCallback *MainCallback ;
   void *MainContext ;
   mDNSu32 mDNS_busy ;
   mDNSu32 mDNS_reentrancy ;
   mDNSu8 mDNS_shutdown ;
   mDNSu8 lock_rrcache ;
   mDNSu8 lock_Questions ;
   mDNSu8 lock_Records ;
   char MsgBuffer[80] ;
   mDNSs32 timenow ;
   mDNSs32 timenow_last ;
   mDNSs32 timenow_adjust ;
   mDNSs32 NextScheduledEvent ;
   mDNSs32 SuppressSending ;
   mDNSs32 NextCacheCheck ;
   mDNSs32 NextScheduledQuery ;
   mDNSs32 NextScheduledProbe ;
   mDNSs32 NextScheduledResponse ;
   mDNSs32 ExpectUnicastResponse ;
   mDNSs32 RandomQueryDelay ;
   mDNSBool SendDeregistrations ;
   mDNSBool SendImmediateAnswers ;
   mDNSBool SleepState ;
   DNSQuestion *Questions ;
   DNSQuestion *NewQuestions ;
   DNSQuestion *CurrentQuestion ;
   DNSQuestion *LocalOnlyQuestions ;
   DNSQuestion *NewLocalOnlyQuestions ;
   mDNSu32 rrcache_size ;
   mDNSu32 rrcache_totalused ;
   mDNSu32 rrcache_active ;
   mDNSu32 rrcache_report ;
   CacheRecord *rrcache_free ;
   CacheRecord *rrcache_hash[499] ;
   CacheRecord **rrcache_tail[499] ;
   mDNSu32 rrcache_used[499] ;
   domainlabel nicelabel ;
   domainlabel hostlabel ;
   domainname hostname ;
   UTF8str255 HIHardware ;
   UTF8str255 HISoftware ;
   AuthRecord *ResourceRecords ;
   AuthRecord *DuplicateRecords ;
   AuthRecord *LocalOnlyRecords ;
   AuthRecord *NewLocalOnlyRecords ;
   mDNSBool DiscardLocalOnlyRecords ;
   AuthRecord *CurrentRecord ;
   NetworkInterfaceInfo *HostInterfaces ;
   mDNSs32 ProbeFailTime ;
   mDNSs32 NumFailedProbes ;
   mDNSs32 SuppressProbes ;
};
enum __anonenum_mDNS_DomainType_31 {
    mDNS_DomainTypeBrowse = 0,
    mDNS_DomainTypeBrowseDefault = 1,
    mDNS_DomainTypeRegistration = 2,
    mDNS_DomainTypeRegistrationDefault = 3
};
typedef enum __anonenum_mDNS_DomainType_31 mDNS_DomainType;
struct __anonstruct_DNSMessageHeader_32 {
   mDNSOpaque16 id ;
   mDNSOpaque16 flags ;
   mDNSu16 numQuestions ;
   mDNSu16 numAnswers ;
   mDNSu16 numAuthorities ;
   mDNSu16 numAdditionals ;
} __attribute__((__packed__)) ;
typedef struct __anonstruct_DNSMessageHeader_32 DNSMessageHeader;
struct __anonstruct_DNSMessage_33 {
   DNSMessageHeader h ;
   mDNSu8 data[8940] ;
} __attribute__((__packed__)) ;
typedef struct __anonstruct_DNSMessage_33 DNSMessage;
struct mDNSprintf_format {
   unsigned int leftJustify : 1 ;
   unsigned int forceSign : 1 ;
   unsigned int zeroPad : 1 ;
   unsigned int havePrecision : 1 ;
   unsigned int hSize : 1 ;
   unsigned int lSize : 1 ;
   char altForm ;
   char sign ;
   unsigned int fieldWidth ;
   unsigned int precision ;
};
enum __anonenum_mDNS_Dereg_type_35 {
    mDNS_Dereg_normal = 0,
    mDNS_Dereg_conflict = 1,
    mDNS_Dereg_repeat = 2
};
typedef enum __anonenum_mDNS_Dereg_type_35 mDNS_Dereg_type;
typedef unsigned char __u_char;
typedef unsigned short __u_short;
typedef __u_char u_char;
typedef __u_short u_short;
struct mDNS_PlatformSupport_struct {
   long dummy[1] ;
};
struct ip_mreq {
   struct in_addr imr_multiaddr ;
   struct in_addr imr_interface ;
};
struct my_in_pktinfo {
   struct sockaddr ipi_addr ;
   int ipi_ifindex ;
   char ipi_ifname[16] ;
};
struct ifi_info {
   char ifi_name[16] ;
   u_char ifi_haddr[8] ;
   u_short ifi_hlen ;
   short ifi_flags ;
   short ifi_myflags ;
   int ifi_index ;
   struct sockaddr *ifi_addr ;
   struct sockaddr *ifi_brdaddr ;
   struct sockaddr *ifi_dstaddr ;
   struct ifi_info *ifi_next ;
};
struct PosixNetworkInterface;
typedef struct PosixNetworkInterface PosixNetworkInterface;
struct PosixNetworkInterface {
   NetworkInterfaceInfo coreIntf ;
   char const   *intfName ;
   PosixNetworkInterface *aliasIntf ;
   int index ;
   int multicastSocket ;
   int multicastSocketv6 ;
};
union __anonunion___u_58 {
   unsigned int __ui ;
   unsigned short __usi ;
   unsigned char __uc ;
};
typedef char *__caddr_t;
struct iovec {
   void *iov_base ;
   size_t iov_len ;
};
struct msghdr {
   void *msg_name ;
   socklen_t msg_namelen ;
   struct iovec *msg_iov ;
   size_t msg_iovlen ;
   void *msg_control ;
   size_t msg_controllen ;
   int msg_flags ;
};
struct cmsghdr {
   size_t cmsg_len ;
   int cmsg_level ;
   int cmsg_type ;
   unsigned char __cmsg_data[] ;
};
struct ifmap {
   unsigned long mem_start ;
   unsigned long mem_end ;
   unsigned short base_addr ;
   unsigned char irq ;
   unsigned char dma ;
   unsigned char port ;
};
union __anonunion_ifr_ifrn_13 {
   char ifrn_name[16] ;
};
union __anonunion_ifr_ifru_14 {
   struct sockaddr ifru_addr ;
   struct sockaddr ifru_dstaddr ;
   struct sockaddr ifru_broadaddr ;
   struct sockaddr ifru_netmask ;
   struct sockaddr ifru_hwaddr ;
   short ifru_flags ;
   int ifru_ivalue ;
   int ifru_mtu ;
   struct ifmap ifru_map ;
   char ifru_slave[16] ;
   char ifru_newname[16] ;
   __caddr_t ifru_data ;
};
struct ifreq {
   union __anonunion_ifr_ifrn_13 ifr_ifrn ;
   union __anonunion_ifr_ifru_14 ifr_ifru ;
};
union __anonunion_ifc_ifcu_15 {
   __caddr_t ifcu_buf ;
   struct ifreq *ifcu_req ;
};
struct ifconf {
   int ifc_len ;
   union __anonunion_ifc_ifcu_15 ifc_ifcu ;
};
struct in_pktinfo {
   int ipi_ifindex ;
   struct in_addr ipi_spec_dst ;
   struct in_addr ipi_addr ;
};
union __anonunion_control_un_32 {
   struct cmsghdr cm ;
   char control[1024] ;
};
union __anonunion___u_33 {
   unsigned int __ui ;
   unsigned short __usi ;
   unsigned char __uc ;
};
struct tag_rend_message {
   int cmd ;
   int port ;
   char name[256] ;
   char type[256] ;
};
typedef struct tag_rend_message REND_MESSAGE;
struct PosixService;
typedef struct PosixService PosixService;
struct PosixService {
   ServiceRecordSet coreServ ;
   PosixService *next ;
   int serviceID ;
};
union __anonunion___u_41 {
   unsigned int __ui ;
   unsigned short __usi ;
   unsigned char __uc ;
};
union __anonunion___u_42 {
   unsigned int __ui ;
   unsigned short __usi ;
   unsigned char __uc ;
};
#pragma merger(0,"/tmp/cil-Ii2mTiuK.i","-Wall -g -O2")
char const   id3_version[30] ;
char const   id3_copyright[52] ;
char const   id3_author[48] ;
char const   id3_build[1] ;
char const   id3_version[30]  = 
  {      (char const   )'I',      (char const   )'D',      (char const   )'3',      (char const   )' ', 
        (char const   )'T',      (char const   )'a',      (char const   )'g',      (char const   )' ', 
        (char const   )'L',      (char const   )'i',      (char const   )'b',      (char const   )'r', 
        (char const   )'a',      (char const   )'r',      (char const   )'y',      (char const   )' ', 
        (char const   )'0',      (char const   )'.',      (char const   )'1',      (char const   )'5', 
        (char const   )'.',      (char const   )'1',      (char const   )' ',      (char const   )'(', 
        (char const   )'b',      (char const   )'e',      (char const   )'t',      (char const   )'a', 
        (char const   )')',      (char const   )'\000'};
char const   id3_copyright[52]  = 
  {      (char const   )'C',      (char const   )'o',      (char const   )'p',      (char const   )'y', 
        (char const   )'r',      (char const   )'i',      (char const   )'g',      (char const   )'h', 
        (char const   )'t',      (char const   )' ',      (char const   )'(',      (char const   )'C', 
        (char const   )')',      (char const   )' ',      (char const   )'2',      (char const   )'0', 
        (char const   )'0',      (char const   )'0',      (char const   )'-',      (char const   )'2', 
        (char const   )'0',      (char const   )'0',      (char const   )'4',      (char const   )' ', 
        (char const   )'U',      (char const   )'n',      (char const   )'d',      (char const   )'e', 
        (char const   )'r',      (char const   )'b',      (char const   )'i',      (char const   )'t', 
        (char const   )' ',      (char const   )'T',      (char const   )'e',      (char const   )'c', 
        (char const   )'h',      (char const   )'n',      (char const   )'o',      (char const   )'l', 
        (char const   )'o',      (char const   )'g',      (char const   )'i',      (char const   )'e', 
        (char const   )'s',      (char const   )',',      (char const   )' ',      (char const   )'I', 
        (char const   )'n',      (char const   )'c',      (char const   )'.',      (char const   )'\000'};
char const   id3_author[48]  = 
  {      (char const   )'U',      (char const   )'n',      (char const   )'d',      (char const   )'e', 
        (char const   )'r',      (char const   )'b',      (char const   )'i',      (char const   )'t', 
        (char const   )' ',      (char const   )'T',      (char const   )'e',      (char const   )'c', 
        (char const   )'h',      (char const   )'n',      (char const   )'o',      (char const   )'l', 
        (char const   )'o',      (char const   )'g',      (char const   )'i',      (char const   )'e', 
        (char const   )'s',      (char const   )',',      (char const   )' ',      (char const   )'I', 
        (char const   )'n',      (char const   )'c',      (char const   )'.',      (char const   )' ', 
        (char const   )'<',      (char const   )'i',      (char const   )'n',      (char const   )'f', 
        (char const   )'o',      (char const   )'@',      (char const   )'u',      (char const   )'n', 
        (char const   )'d',      (char const   )'e',      (char const   )'r',      (char const   )'b', 
        (char const   )'i',      (char const   )'t',      (char const   )'.',      (char const   )'c', 
        (char const   )'o',      (char const   )'m',      (char const   )'>',      (char const   )'\000'};
char const   id3_build[1]  = {      (char const   )'\000'};
#pragma merger(0,"/tmp/cil-lXFu3oHB.i","-Wall -g -O2")
extern void *malloc(size_t __size )  __attribute__((__malloc__)) ;
id3_latin1_t *id3_ucs4_latin1duplicate(id3_ucs4_t const   *ucs4 ) ;
id3_utf16_t *id3_ucs4_utf16duplicate(id3_ucs4_t const   *ucs4 ) ;
id3_utf8_t *id3_ucs4_utf8duplicate(id3_ucs4_t const   *ucs4 ) ;
void id3_ucs4_putnumber(id3_ucs4_t *ucs4 , unsigned long number ) ;
unsigned long id3_ucs4_getnumber(id3_ucs4_t const   *ucs4 ) ;
id3_ucs4_t const   id3_ucs4_empty[1] ;
id3_length_t id3_ucs4_length(id3_ucs4_t const   *ucs4 ) ;
id3_length_t id3_ucs4_size(id3_ucs4_t const   *ucs4 ) ;
id3_length_t id3_ucs4_latin1size(id3_ucs4_t const   *ucs4 ) ;
id3_length_t id3_ucs4_utf16size(id3_ucs4_t const   *ucs4 ) ;
id3_length_t id3_ucs4_utf8size(id3_ucs4_t const   *ucs4 ) ;
void id3_ucs4_copy(id3_ucs4_t *dest , id3_ucs4_t const   *src ) ;
id3_ucs4_t *id3_ucs4_duplicate(id3_ucs4_t const   *src ) ;
void id3_latin1_encode(id3_latin1_t *latin1 , id3_ucs4_t const   *ucs4 ) ;
void id3_utf16_encode(id3_utf16_t *utf16 , id3_ucs4_t const   *ucs4 ) ;
void id3_utf8_encode(id3_utf8_t *utf8 , id3_ucs4_t const   *ucs4 ) ;
id3_ucs4_t const   id3_ucs4_empty[1]  = {      (id3_ucs4_t const   )0UL};
id3_length_t id3_ucs4_length(id3_ucs4_t const   *ucs4 ) 
{ id3_ucs4_t const   *ptr ;

  {
  ptr = ucs4;
  while ((*ptr)) {
    ptr ++;
  }
  return ((unsigned long )(ptr - ucs4));
}
}
id3_length_t id3_ucs4_size(id3_ucs4_t const   *ucs4 ) 
{ id3_length_t tmp ;

  {
  tmp = id3_ucs4_length(ucs4);
  return (tmp + 1UL);
}
}
id3_length_t id3_ucs4_latin1size(id3_ucs4_t const   *ucs4 ) 
{ id3_length_t tmp ;

  {
  tmp = id3_ucs4_size(ucs4);
  return (tmp);
}
}
id3_length_t id3_ucs4_utf16size(id3_ucs4_t const   *ucs4 ) 
{ id3_length_t size ;

  {
  size = 0UL;
  while ((*ucs4)) {
    size ++;
    if ((*ucs4) >= 65536UL) {
      if ((*ucs4) <= 1114111UL) {
        size ++;
      } else {
        goto _L;
      }
    } else {
      _L: ;
    }
    ucs4 ++;
  }
  return (size + 1UL);
}
}
id3_length_t id3_ucs4_utf8size(id3_ucs4_t const   *ucs4 ) 
{ id3_length_t size ;

  {
  size = 0UL;
  while ((*ucs4)) {
    if ((*ucs4) <= 127UL) {
      size ++;
    } else {
      if ((*ucs4) <= 2047UL) {
        size += 2UL;
      } else {
        if ((*ucs4) <= 65535UL) {
          size += 3UL;
        } else {
          if ((*ucs4) <= 2097151UL) {
            size += 4UL;
          } else {
            if ((*ucs4) <= 67108863UL) {
              size += 5UL;
            } else {
              if ((*ucs4) <= 2147483647UL) {
                size += 6UL;
              } else {
                size += 2UL;
              }
            }
          }
        }
      }
    }
    ucs4 ++;
  }
  return (size + 1UL);
}
}
id3_latin1_t *id3_ucs4_latin1duplicate(id3_ucs4_t const   *ucs4 ) 
{ id3_latin1_t *latin1 ;
  id3_length_t tmp ;

  {
  tmp = id3_ucs4_latin1size(ucs4);
  latin1 = (id3_latin1_t *)malloc((unsigned int )(tmp * (unsigned long )sizeof((*latin1))));
  if (latin1) {
    id3_latin1_encode(latin1, ucs4);
  }
  return (latin1);
}
}
id3_utf16_t *id3_ucs4_utf16duplicate(id3_ucs4_t const   *ucs4 ) 
{ id3_utf16_t *utf16 ;
  id3_length_t tmp ;

  {
  tmp = id3_ucs4_utf16size(ucs4);
  utf16 = (id3_utf16_t *)malloc((unsigned int )(tmp * (unsigned long )sizeof((*utf16))));
  if (utf16) {
    id3_utf16_encode(utf16, ucs4);
  }
  return (utf16);
}
}
id3_utf8_t *id3_ucs4_utf8duplicate(id3_ucs4_t const   *ucs4 ) 
{ id3_utf8_t *utf8 ;
  id3_length_t tmp ;

  {
  tmp = id3_ucs4_utf8size(ucs4);
  utf8 = (id3_utf8_t *)malloc((unsigned int )(tmp * (unsigned long )sizeof((*utf8))));
  if (utf8) {
    id3_utf8_encode(utf8, ucs4);
  }
  return (utf8);
}
}
void id3_ucs4_copy(id3_ucs4_t *dest , id3_ucs4_t const   *src ) 
{ id3_ucs4_t *tmp ;
  id3_ucs4_t const   *tmp___0 ;

  {
  while (1) {
    tmp = dest;
    dest ++;
    tmp___0 = src;
    src ++;
    (*tmp) = (*tmp___0);
    if (! (*tmp)) {
      break;
    }
  }
  return;
}
}
id3_ucs4_t *id3_ucs4_duplicate(id3_ucs4_t const   *src ) 
{ id3_ucs4_t *ucs4 ;
  id3_length_t tmp ;

  {
  tmp = id3_ucs4_size(src);
  ucs4 = (id3_ucs4_t *)malloc((unsigned int )(tmp * (unsigned long )sizeof((*ucs4))));
  if (ucs4) {
    id3_ucs4_copy(ucs4, src);
  }
  return (ucs4);
}
}
void id3_ucs4_putnumber(id3_ucs4_t *ucs4 , unsigned long number ) 
{ int digits[10] ;
  int *digit ;
  int *tmp ;
  id3_ucs4_t *tmp___0 ;

  {
  digit = digits;
  while (1) {
    tmp = digit;
    digit ++;
    (*tmp) = (int )(number % 10UL);
    number /= 10UL;
    if (! number) {
      break;
    }
  }
  while ((unsigned int )digit != (unsigned int )(digits)) {
    tmp___0 = ucs4;
    ucs4 ++;
    digit --;
    (*tmp___0) = (unsigned long )(48 + (*digit));
  }
  (*ucs4) = 0UL;
  return;
}
}
unsigned long id3_ucs4_getnumber(id3_ucs4_t const   *ucs4 ) 
{ unsigned long number ;
  id3_ucs4_t const   *tmp ;

  {
  number = 0UL;
  while (1) {
    if ((*ucs4) >= 48UL) {
      if (! ((*ucs4) <= 57UL)) {
        goto _L;
      }
    } else {
      _L: 
      break;
    }
    tmp = ucs4;
    ucs4 ++;
    number = 10UL * number + ((*tmp) - 48UL);
  }
  return (number);
}
}
#pragma merger(0,"/tmp/cil-QpLXtb8j.i","-Wall -g -O2")
extern void free(void *__ptr ) ;
id3_ucs4_t *id3_latin1_ucs4duplicate(id3_latin1_t const   *latin1 ) ;
id3_length_t id3_latin1_length(id3_latin1_t const   *latin1 ) ;
id3_length_t id3_latin1_size(id3_latin1_t const   *latin1 ) ;
void id3_latin1_copy(id3_latin1_t *dest , id3_latin1_t const   *src ) ;
id3_latin1_t *id3_latin1_duplicate(id3_latin1_t const   *src ) ;
id3_length_t id3_latin1_decodechar(id3_latin1_t const   *latin1 , id3_ucs4_t *ucs4 ) ;
id3_length_t id3_latin1_encodechar(id3_latin1_t *latin1 , id3_ucs4_t ucs4 ) ;
void id3_latin1_decode(id3_latin1_t const   *latin1 , id3_ucs4_t *ucs4 ) ;
id3_length_t id3_latin1_put(id3_byte_t **ptr , id3_latin1_t latin1 ) ;
id3_latin1_t id3_latin1_get(id3_byte_t const   **ptr ) ;
id3_length_t id3_latin1_serialize(id3_byte_t **ptr , id3_ucs4_t const   *ucs4 , int terminate ) ;
id3_ucs4_t *id3_latin1_deserialize(id3_byte_t const   **ptr , id3_length_t length ) ;
id3_length_t id3_latin1_length(id3_latin1_t const   *latin1 ) 
{ id3_latin1_t const   *ptr ;

  {
  ptr = latin1;
  while ((*ptr)) {
    ptr ++;
  }
  return ((unsigned long )(ptr - latin1));
}
}
id3_length_t id3_latin1_size(id3_latin1_t const   *latin1 ) 
{ id3_length_t tmp ;

  {
  tmp = id3_latin1_length(latin1);
  return (tmp + 1UL);
}
}
void id3_latin1_copy(id3_latin1_t *dest , id3_latin1_t const   *src ) 
{ id3_latin1_t *tmp ;
  id3_latin1_t const   *tmp___0 ;

  {
  while (1) {
    tmp = dest;
    dest ++;
    tmp___0 = src;
    src ++;
    (*tmp) = (*tmp___0);
    if (! (*tmp)) {
      break;
    }
  }
  return;
}
}
id3_latin1_t *id3_latin1_duplicate(id3_latin1_t const   *src ) 
{ id3_latin1_t *latin1 ;
  id3_length_t tmp ;

  {
  tmp = id3_latin1_size(src);
  latin1 = (id3_latin1_t *)malloc((unsigned int )(tmp * (unsigned long )sizeof((*latin1))));
  if (latin1) {
    id3_latin1_copy(latin1, src);
  }
  return (latin1);
}
}
id3_ucs4_t *id3_latin1_ucs4duplicate(id3_latin1_t const   *latin1 ) 
{ id3_ucs4_t *ucs4 ;
  id3_length_t tmp ;

  {
  tmp = id3_latin1_length(latin1);
  ucs4 = (id3_ucs4_t *)malloc((unsigned int )((tmp + 1UL) * (unsigned long )sizeof((*ucs4))));
  if (ucs4) {
    id3_latin1_decode(latin1, ucs4);
  }
  return (ucs4);
}
}
id3_length_t id3_latin1_decodechar(id3_latin1_t const   *latin1 , id3_ucs4_t *ucs4 ) 
{ 

  {
  (*ucs4) = (unsigned long )(*latin1);
  return (1UL);
}
}
id3_length_t id3_latin1_encodechar(id3_latin1_t *latin1 , id3_ucs4_t ucs4 ) 
{ 

  {
  (*latin1) = (unsigned char )ucs4;
  if (ucs4 > 255UL) {
    (*latin1) = (unsigned char)183;
  }
  return (1UL);
}
}
void id3_latin1_decode(id3_latin1_t const   *latin1 , id3_ucs4_t *ucs4 ) 
{ id3_length_t tmp ;
  id3_ucs4_t *tmp___0 ;

  {
  while (1) {
    tmp = id3_latin1_decodechar(latin1, ucs4);
    latin1 += tmp;
    tmp___0 = ucs4;
    ucs4 ++;
    if (! (*tmp___0)) {
      break;
    }
  }
  return;
}
}
void id3_latin1_encode(id3_latin1_t *latin1 , id3_ucs4_t const   *ucs4 ) 
{ id3_length_t tmp ;
  id3_ucs4_t const   *tmp___0 ;

  {
  while (1) {
    tmp = id3_latin1_encodechar(latin1, (*ucs4));
    latin1 += tmp;
    tmp___0 = ucs4;
    ucs4 ++;
    if (! (*tmp___0)) {
      break;
    }
  }
  return;
}
}
id3_length_t id3_latin1_put(id3_byte_t **ptr , id3_latin1_t latin1 ) 
{ id3_byte_t *tmp ;

  {
  if (ptr) {
    tmp = (*ptr);
    (*ptr) ++;
    (*tmp) = latin1;
  }
  return (1UL);
}
}
id3_latin1_t id3_latin1_get(id3_byte_t const   **ptr ) 
{ id3_byte_t const   *tmp ;

  {
  tmp = (*ptr);
  (*ptr) ++;
  return ((*tmp));
}
}
id3_length_t id3_latin1_serialize(id3_byte_t **ptr , id3_ucs4_t const   *ucs4 , int terminate ) 
{ id3_length_t size ;
  id3_latin1_t latin1[1] ;
  id3_latin1_t *out ;
  id3_ucs4_t const   *tmp ;
  int tmp___0 ;
  id3_latin1_t *tmp___1 ;
  id3_length_t tmp___2 ;
  id3_length_t tmp___3 ;

  {
  size = 0UL;
  while ((*ucs4)) {
    tmp = ucs4;
    ucs4 ++;
    out = latin1;
    tmp___0 = (int )id3_latin1_encodechar(out, (*tmp));
    switch (tmp___0) {
    case 1: 
    tmp___1 = out;
    out ++;
    tmp___2 = id3_latin1_put(ptr, (*tmp___1));
    size += tmp___2;
    case 0: ;
    break;
    }
  }
  if (terminate) {
    tmp___3 = id3_latin1_put(ptr, (unsigned char)0);
    size += tmp___3;
  }
  return (size);
}
}
id3_ucs4_t *id3_latin1_deserialize(id3_byte_t const   **ptr , id3_length_t length ) 
{ id3_byte_t const   *end ;
  id3_latin1_t *latin1ptr ;
  id3_latin1_t *latin1 ;
  id3_ucs4_t *ucs4 ;
  id3_length_t tmp ;

  {
  end = (*ptr) + length;
  latin1 = (id3_latin1_t *)malloc((unsigned int )((length + 1UL) * (unsigned long )sizeof((*latin1))));
  if ((unsigned int )latin1 == (unsigned int )((id3_latin1_t *)0)) {
    return ((id3_ucs4_t *)0);
  }
  latin1ptr = latin1;
  while (1) {
    if (end - (*ptr) > 0) {
      (*latin1ptr) = id3_latin1_get(ptr);
      if (! (*latin1ptr)) {
        goto _L;
      }
    } else {
      _L: 
      break;
    }
    latin1ptr ++;
  }
  (*latin1ptr) = (unsigned char)0;
  tmp = id3_latin1_length((id3_latin1_t const   *)latin1);
  ucs4 = (id3_ucs4_t *)malloc((unsigned int )((tmp + 1UL) * (unsigned long )sizeof((*ucs4))));
  if (ucs4) {
    id3_latin1_decode((id3_latin1_t const   *)latin1, ucs4);
  }
  free((void *)latin1);
  return (ucs4);
}
}
#pragma merger(0,"/tmp/cil-qqO9xM5D.i","-Wall -g -O2")
id3_ucs4_t *id3_utf16_ucs4duplicate(id3_utf16_t const   *utf16 ) ;
id3_length_t id3_utf16_length(id3_utf16_t const   *utf16 ) ;
id3_length_t id3_utf16_size(id3_utf16_t const   *utf16 ) ;
id3_length_t id3_utf16_decodechar(id3_utf16_t const   *utf16 , id3_ucs4_t *ucs4 ) ;
id3_length_t id3_utf16_encodechar(id3_utf16_t *utf16 , id3_ucs4_t ucs4 ) ;
void id3_utf16_decode(id3_utf16_t const   *utf16 , id3_ucs4_t *ucs4 ) ;
id3_length_t id3_utf16_put(id3_byte_t **ptr , id3_utf16_t utf16 , enum id3_utf16_byteorder byteorder ) ;
id3_utf16_t id3_utf16_get(id3_byte_t const   **ptr , enum id3_utf16_byteorder byteorder ) ;
id3_length_t id3_utf16_serialize(id3_byte_t **ptr , id3_ucs4_t const   *ucs4 , enum id3_utf16_byteorder byteorder ,
                                 int terminate ) ;
id3_ucs4_t *id3_utf16_deserialize(id3_byte_t const   **ptr , id3_length_t length ,
                                  enum id3_utf16_byteorder byteorder ) ;
id3_length_t id3_utf16_length(id3_utf16_t const   *utf16 ) 
{ id3_length_t length ;

  {
  length = 0UL;
  while ((*utf16)) {
    if ((int const   )(*(utf16 + 0)) < 55296) {
      goto _L___2;
    } else {
      if ((int const   )(*(utf16 + 0)) > 57343) {
        _L___2: 
        length ++;
      } else {
        if ((int const   )(*(utf16 + 0)) >= 55296) {
          if ((int const   )(*(utf16 + 0)) <= 56319) {
            if ((int const   )(*(utf16 + 1)) >= 56320) {
              if ((int const   )(*(utf16 + 1)) <= 57343) {
                length ++;
                utf16 ++;
              } else {
                goto _L___1;
              }
            } else {
              goto _L___1;
            }
          } else {
            goto _L___1;
          }
        } else {
          _L___1: ;
        }
      }
    }
    utf16 ++;
  }
  return (length);
}
}
id3_length_t id3_utf16_size(id3_utf16_t const   *utf16 ) 
{ id3_utf16_t const   *ptr ;

  {
  ptr = utf16;
  while ((*ptr)) {
    ptr ++;
  }
  return ((unsigned long )((ptr - utf16) + 1));
}
}
id3_ucs4_t *id3_utf16_ucs4duplicate(id3_utf16_t const   *utf16 ) 
{ id3_ucs4_t *ucs4 ;
  id3_length_t tmp ;

  {
  tmp = id3_utf16_length(utf16);
  ucs4 = (id3_ucs4_t *)malloc((unsigned int )((tmp + 1UL) * (unsigned long )sizeof((*ucs4))));
  if (ucs4) {
    id3_utf16_decode(utf16, ucs4);
  }
  return (ucs4);
}
}
id3_length_t id3_utf16_decodechar(id3_utf16_t const   *utf16 , id3_ucs4_t *ucs4 ) 
{ id3_utf16_t const   *start ;

  {
  start = utf16;
  while (1) {
    if ((int const   )(*(utf16 + 0)) < 55296) {
      goto _L___2;
    } else {
      if ((int const   )(*(utf16 + 0)) > 57343) {
        _L___2: 
        (*ucs4) = (unsigned long )(*(utf16 + 0));
        return ((unsigned long )((utf16 - start) + 1));
      } else {
        if ((int const   )(*(utf16 + 0)) >= 55296) {
          if ((int const   )(*(utf16 + 0)) <= 56319) {
            if ((int const   )(*(utf16 + 1)) >= 56320) {
              if ((int const   )(*(utf16 + 1)) <= 57343) {
                (*ucs4) = (unsigned long )(((((long )(*(utf16 + 0)) & 1023L) << 10) |
                                            (((long )(*(utf16 + 1)) & 1023L) << 0)) +
                                           65536L);
                return ((unsigned long )((utf16 - start) + 2));
              } else {
                goto _L___1;
              }
            } else {
              goto _L___1;
            }
          } else {
            goto _L___1;
          }
        } else {
          _L___1: ;
        }
      }
    }
    utf16 ++;
  }
  return (0UL);
}
}
id3_length_t id3_utf16_encodechar(id3_utf16_t *utf16 , id3_ucs4_t ucs4 ) 
{ id3_length_t tmp ;

  {
  if (ucs4 < 65536UL) {
    (*(utf16 + 0)) = (unsigned short )ucs4;
    return (1UL);
  } else {
    if (ucs4 < 1114112UL) {
      ucs4 -= 65536UL;
      (*(utf16 + 0)) = (unsigned short )(((ucs4 >> 10) & 1023UL) | 55296UL);
      (*(utf16 + 1)) = (unsigned short )(((ucs4 >> 0) & 1023UL) | 56320UL);
      return (2UL);
    }
  }
  tmp = id3_utf16_encodechar(utf16, 183UL);
  return (tmp);
}
}
void id3_utf16_decode(id3_utf16_t const   *utf16 , id3_ucs4_t *ucs4 ) 
{ id3_length_t tmp ;
  id3_ucs4_t *tmp___0 ;

  {
  while (1) {
    tmp = id3_utf16_decodechar(utf16, ucs4);
    utf16 += tmp;
    tmp___0 = ucs4;
    ucs4 ++;
    if (! (*tmp___0)) {
      break;
    }
  }
  return;
}
}
void id3_utf16_encode(id3_utf16_t *utf16 , id3_ucs4_t const   *ucs4 ) 
{ id3_length_t tmp ;
  id3_ucs4_t const   *tmp___0 ;

  {
  while (1) {
    tmp = id3_utf16_encodechar(utf16, (*ucs4));
    utf16 += tmp;
    tmp___0 = ucs4;
    ucs4 ++;
    if (! (*tmp___0)) {
      break;
    }
  }
  return;
}
}
id3_length_t id3_utf16_put(id3_byte_t **ptr , id3_utf16_t utf16 , enum id3_utf16_byteorder byteorder ) 
{ 

  {
  if (ptr) {
    switch ((int )byteorder) {
    default: ;
    case 1: 
    (*((*ptr) + 0)) = (unsigned char )(((int )utf16 >> 8) & 255);
    (*((*ptr) + 1)) = (unsigned char )(((int )utf16 >> 0) & 255);
    break;
    case 2: 
    (*((*ptr) + 0)) = (unsigned char )(((int )utf16 >> 0) & 255);
    (*((*ptr) + 1)) = (unsigned char )(((int )utf16 >> 8) & 255);
    break;
    }
    (*ptr) += 2;
  }
  return (2UL);
}
}
id3_utf16_t id3_utf16_get(id3_byte_t const   **ptr , enum id3_utf16_byteorder byteorder ) 
{ id3_utf16_t utf16 ;

  {
  switch ((int )byteorder) {
  default: ;
  case 1: 
  utf16 = (unsigned short )(((int const   )(*((*ptr) + 0)) << 8) | ((int const   )(*((*ptr) +
                                                                                     1)) <<
                                                                    0));
  break;
  case 2: 
  utf16 = (unsigned short )(((int const   )(*((*ptr) + 0)) << 0) | ((int const   )(*((*ptr) +
                                                                                     1)) <<
                                                                    8));
  break;
  }
  (*ptr) += 2;
  return (utf16);
}
}
id3_length_t id3_utf16_serialize(id3_byte_t **ptr , id3_ucs4_t const   *ucs4 , enum id3_utf16_byteorder byteorder ,
                                 int terminate ) 
{ id3_length_t size ;
  id3_utf16_t utf16[2] ;
  id3_utf16_t *out ;
  id3_length_t tmp ;
  id3_ucs4_t const   *tmp___0 ;
  int tmp___1 ;
  id3_utf16_t *tmp___2 ;
  id3_length_t tmp___3 ;
  id3_utf16_t *tmp___4 ;
  id3_length_t tmp___5 ;
  id3_length_t tmp___6 ;

  {
  size = 0UL;
  if ((int )byteorder == 0) {
    tmp = id3_utf16_put(ptr, (unsigned short)65279, byteorder);
    size += tmp;
  }
  while ((*ucs4)) {
    tmp___0 = ucs4;
    ucs4 ++;
    out = utf16;
    tmp___1 = (int )id3_utf16_encodechar(out, (*tmp___0));
    switch (tmp___1) {
    case 2: 
    tmp___2 = out;
    out ++;
    tmp___3 = id3_utf16_put(ptr, (*tmp___2), byteorder);
    size += tmp___3;
    case 1: 
    tmp___4 = out;
    out ++;
    tmp___5 = id3_utf16_put(ptr, (*tmp___4), byteorder);
    size += tmp___5;
    case 0: ;
    break;
    }
  }
  if (terminate) {
    tmp___6 = id3_utf16_put(ptr, (unsigned short)0, byteorder);
    size += tmp___6;
  }
  return (size);
}
}
id3_ucs4_t *id3_utf16_deserialize(id3_byte_t const   **ptr , id3_length_t length ,
                                  enum id3_utf16_byteorder byteorder ) 
{ id3_byte_t const   *end ;
  id3_utf16_t *utf16ptr ;
  id3_utf16_t *utf16 ;
  id3_ucs4_t *ucs4 ;
  id3_length_t tmp ;

  {
  end = (*ptr) + (length & 4294967294UL);
  utf16 = (id3_utf16_t *)malloc((unsigned int )((length / 2UL + 1UL) * (unsigned long )sizeof((*utf16))));
  if ((unsigned int )utf16 == (unsigned int )((id3_utf16_t *)0)) {
    return ((id3_ucs4_t *)0);
  }
  if ((int )byteorder == 0) {
    if (end - (*ptr) > 0) {
      switch ((int )(((int const   )(*((*ptr) + 0)) << 8) | ((int const   )(*((*ptr) +
                                                                              1)) <<
                                                             0))) {
      case 65279: 
      byteorder = (enum id3_utf16_byteorder )1;
      (*ptr) += 2;
      break;
      case 65534: 
      byteorder = (enum id3_utf16_byteorder )2;
      (*ptr) += 2;
      break;
      }
    } else {
      goto _L;
    }
  } else {
    _L: ;
  }
  utf16ptr = utf16;
  while (1) {
    if (end - (*ptr) > 0) {
      (*utf16ptr) = id3_utf16_get(ptr, byteorder);
      if (! (*utf16ptr)) {
        goto _L___0;
      }
    } else {
      _L___0: 
      break;
    }
    utf16ptr ++;
  }
  (*utf16ptr) = (unsigned short)0;
  tmp = id3_utf16_length((id3_utf16_t const   *)utf16);
  ucs4 = (id3_ucs4_t *)malloc((unsigned int )((tmp + 1UL) * (unsigned long )sizeof((*ucs4))));
  if (ucs4) {
    id3_utf16_decode((id3_utf16_t const   *)utf16, ucs4);
  }
  free((void *)utf16);
  return (ucs4);
}
}
#pragma merger(0,"/tmp/cil-fcoZ6naK.i","-Wall -g -O2")
id3_ucs4_t *id3_utf8_ucs4duplicate(id3_utf8_t const   *utf8 ) ;
id3_length_t id3_utf8_length(id3_utf8_t const   *utf8 ) ;
id3_length_t id3_utf8_size(id3_utf8_t const   *utf8 ) ;
id3_length_t id3_utf8_decodechar(id3_utf8_t const   *utf8 , id3_ucs4_t *ucs4 ) ;
id3_length_t id3_utf8_encodechar(id3_utf8_t *utf8 , id3_ucs4_t ucs4 ) ;
void id3_utf8_decode(id3_utf8_t const   *utf8 , id3_ucs4_t *ucs4 ) ;
id3_length_t id3_utf8_put(id3_byte_t **ptr , id3_utf8_t utf8 ) ;
id3_utf8_t id3_utf8_get(id3_byte_t const   **ptr ) ;
id3_length_t id3_utf8_serialize(id3_byte_t **ptr , id3_ucs4_t const   *ucs4 , int terminate ) ;
id3_ucs4_t *id3_utf8_deserialize(id3_byte_t const   **ptr , id3_length_t length ) ;
id3_length_t id3_utf8_length(id3_utf8_t const   *utf8 ) 
{ id3_length_t length ;

  {
  length = 0UL;
  while ((*utf8)) {
    if (((int const   )(*(utf8 + 0)) & 128) == 0) {
      length ++;
    } else {
      if (((int const   )(*(utf8 + 0)) & 224) == 192) {
        if (((int const   )(*(utf8 + 1)) & 192) == 128) {
          if (((long )(*(utf8 + 0)) & 31L) << 6 >= 128L) {
            length ++;
            utf8 ++;
          }
        } else {
          goto _L___13;
        }
      } else {
        _L___13: 
        if (((int const   )(*(utf8 + 0)) & 240) == 224) {
          if (((int const   )(*(utf8 + 1)) & 192) == 128) {
            if (((int const   )(*(utf8 + 2)) & 192) == 128) {
              if (((((long )(*(utf8 + 0)) & 15L) << 12) | (((long )(*(utf8 + 1)) &
                                                            63L) << 6)) >= 2048L) {
                length ++;
                utf8 += 2;
              }
            } else {
              goto _L___12;
            }
          } else {
            goto _L___12;
          }
        } else {
          _L___12: 
          if (((int const   )(*(utf8 + 0)) & 248) == 240) {
            if (((int const   )(*(utf8 + 1)) & 192) == 128) {
              if (((int const   )(*(utf8 + 2)) & 192) == 128) {
                if (((int const   )(*(utf8 + 3)) & 192) == 128) {
                  if (((((long )(*(utf8 + 0)) & 7L) << 18) | (((long )(*(utf8 + 1)) &
                                                               63L) << 12)) >= 65536L) {
                    length ++;
                    utf8 += 3;
                  }
                } else {
                  goto _L___10;
                }
              } else {
                goto _L___10;
              }
            } else {
              goto _L___10;
            }
          } else {
            _L___10: 
            if (((int const   )(*(utf8 + 0)) & 252) == 248) {
              if (((int const   )(*(utf8 + 1)) & 192) == 128) {
                if (((int const   )(*(utf8 + 2)) & 192) == 128) {
                  if (((int const   )(*(utf8 + 3)) & 192) == 128) {
                    if (((int const   )(*(utf8 + 4)) & 192) == 128) {
                      if (((((long )(*(utf8 + 0)) & 3L) << 24) | (((long )(*(utf8 +
                                                                             0)) &
                                                                   63L) << 18)) >=
                          2097152L) {
                        length ++;
                        utf8 += 4;
                      }
                    } else {
                      goto _L___7;
                    }
                  } else {
                    goto _L___7;
                  }
                } else {
                  goto _L___7;
                }
              } else {
                goto _L___7;
              }
            } else {
              _L___7: 
              if (((int const   )(*(utf8 + 0)) & 254) == 252) {
                if (((int const   )(*(utf8 + 1)) & 192) == 128) {
                  if (((int const   )(*(utf8 + 2)) & 192) == 128) {
                    if (((int const   )(*(utf8 + 3)) & 192) == 128) {
                      if (((int const   )(*(utf8 + 4)) & 192) == 128) {
                        if (((int const   )(*(utf8 + 5)) & 192) == 128) {
                          if (((((long )(*(utf8 + 0)) & 1L) << 30) | (((long )(*(utf8 +
                                                                                 0)) &
                                                                       63L) << 24)) >=
                              67108864L) {
                            length ++;
                            utf8 += 5;
                          }
                        } else {
                          goto _L___3;
                        }
                      } else {
                        goto _L___3;
                      }
                    } else {
                      goto _L___3;
                    }
                  } else {
                    goto _L___3;
                  }
                } else {
                  goto _L___3;
                }
              } else {
                _L___3: ;
              }
            }
          }
        }
      }
    }
    utf8 ++;
  }
  return (length);
}
}
id3_length_t id3_utf8_size(id3_utf8_t const   *utf8 ) 
{ id3_utf8_t const   *ptr ;

  {
  ptr = utf8;
  while ((*ptr)) {
    ptr ++;
  }
  return ((unsigned long )((ptr - utf8) + 1));
}
}
id3_ucs4_t *id3_utf8_ucs4duplicate(id3_utf8_t const   *utf8 ) 
{ id3_ucs4_t *ucs4 ;
  id3_length_t tmp ;

  {
  tmp = id3_utf8_length(utf8);
  ucs4 = (id3_ucs4_t *)malloc((unsigned int )((tmp + 1UL) * (unsigned long )sizeof((*ucs4))));
  if (ucs4) {
    id3_utf8_decode(utf8, ucs4);
  }
  return (ucs4);
}
}
id3_length_t id3_utf8_decodechar(id3_utf8_t const   *utf8 , id3_ucs4_t *ucs4 ) 
{ id3_utf8_t const   *start ;

  {
  start = utf8;
  while (1) {
    if (((int const   )(*(utf8 + 0)) & 128) == 0) {
      (*ucs4) = (unsigned long )(*(utf8 + 0));
      return ((unsigned long )((utf8 - start) + 1));
    } else {
      if (((int const   )(*(utf8 + 0)) & 224) == 192) {
        if (((int const   )(*(utf8 + 1)) & 192) == 128) {
          (*ucs4) = (unsigned long )((((long )(*(utf8 + 0)) & 31L) << 6) | (((long )(*(utf8 +
                                                                                       1)) &
                                                                             63L) <<
                                                                            0));
          if ((*ucs4) >= 128UL) {
            return ((unsigned long )((utf8 - start) + 2));
          }
        } else {
          goto _L___13;
        }
      } else {
        _L___13: 
        if (((int const   )(*(utf8 + 0)) & 240) == 224) {
          if (((int const   )(*(utf8 + 1)) & 192) == 128) {
            if (((int const   )(*(utf8 + 2)) & 192) == 128) {
              (*ucs4) = (unsigned long )(((((long )(*(utf8 + 0)) & 15L) << 12) | (((long )(*(utf8 +
                                                                                             1)) &
                                                                                   63L) <<
                                                                                  6)) |
                                         (((long )(*(utf8 + 2)) & 63L) << 0));
              if ((*ucs4) >= 2048UL) {
                return ((unsigned long )((utf8 - start) + 3));
              }
            } else {
              goto _L___12;
            }
          } else {
            goto _L___12;
          }
        } else {
          _L___12: 
          if (((int const   )(*(utf8 + 0)) & 248) == 240) {
            if (((int const   )(*(utf8 + 1)) & 192) == 128) {
              if (((int const   )(*(utf8 + 2)) & 192) == 128) {
                if (((int const   )(*(utf8 + 3)) & 192) == 128) {
                  (*ucs4) = (unsigned long )((((((long )(*(utf8 + 0)) & 7L) << 18) |
                                               (((long )(*(utf8 + 1)) & 63L) << 12)) |
                                              (((long )(*(utf8 + 2)) & 63L) << 6)) |
                                             (((long )(*(utf8 + 3)) & 63L) << 0));
                  if ((*ucs4) >= 65536UL) {
                    return ((unsigned long )((utf8 - start) + 4));
                  }
                } else {
                  goto _L___10;
                }
              } else {
                goto _L___10;
              }
            } else {
              goto _L___10;
            }
          } else {
            _L___10: 
            if (((int const   )(*(utf8 + 0)) & 252) == 248) {
              if (((int const   )(*(utf8 + 1)) & 192) == 128) {
                if (((int const   )(*(utf8 + 2)) & 192) == 128) {
                  if (((int const   )(*(utf8 + 3)) & 192) == 128) {
                    if (((int const   )(*(utf8 + 4)) & 192) == 128) {
                      (*ucs4) = (unsigned long )(((((((long )(*(utf8 + 0)) & 3L) <<
                                                     24) | (((long )(*(utf8 + 1)) &
                                                             63L) << 18)) | (((long )(*(utf8 +
                                                                                        2)) &
                                                                              63L) <<
                                                                             12)) |
                                                  (((long )(*(utf8 + 3)) & 63L) <<
                                                   6)) | (((long )(*(utf8 + 4)) &
                                                           63L) << 0));
                      if ((*ucs4) >= 2097152UL) {
                        return ((unsigned long )((utf8 - start) + 5));
                      }
                    } else {
                      goto _L___7;
                    }
                  } else {
                    goto _L___7;
                  }
                } else {
                  goto _L___7;
                }
              } else {
                goto _L___7;
              }
            } else {
              _L___7: 
              if (((int const   )(*(utf8 + 0)) & 254) == 252) {
                if (((int const   )(*(utf8 + 1)) & 192) == 128) {
                  if (((int const   )(*(utf8 + 2)) & 192) == 128) {
                    if (((int const   )(*(utf8 + 3)) & 192) == 128) {
                      if (((int const   )(*(utf8 + 4)) & 192) == 128) {
                        if (((int const   )(*(utf8 + 5)) & 192) == 128) {
                          (*ucs4) = (unsigned long )((((((((long )(*(utf8 + 0)) &
                                                           1L) << 30) | (((long )(*(utf8 +
                                                                                    1)) &
                                                                          63L) <<
                                                                         24)) | (((long )(*(utf8 +
                                                                                            2)) &
                                                                                  63L) <<
                                                                                 18)) |
                                                       (((long )(*(utf8 + 3)) & 63L) <<
                                                        12)) | (((long )(*(utf8 +
                                                                           4)) & 63L) <<
                                                                6)) | (((long )(*(utf8 +
                                                                                  5)) &
                                                                        63L) << 0));
                          if ((*ucs4) >= 67108864UL) {
                            return ((unsigned long )((utf8 - start) + 6));
                          }
                        } else {
                          goto _L___3;
                        }
                      } else {
                        goto _L___3;
                      }
                    } else {
                      goto _L___3;
                    }
                  } else {
                    goto _L___3;
                  }
                } else {
                  goto _L___3;
                }
              } else {
                _L___3: ;
              }
            }
          }
        }
      }
    }
    utf8 ++;
  }
  return (0UL);
}
}
id3_length_t id3_utf8_encodechar(id3_utf8_t *utf8 , id3_ucs4_t ucs4 ) 
{ id3_length_t tmp ;

  {
  if (ucs4 <= 127UL) {
    (*(utf8 + 0)) = (signed char )ucs4;
    return (1UL);
  } else {
    if (ucs4 <= 2047UL) {
      (*(utf8 + 0)) = (signed char )(192UL | ((ucs4 >> 6) & 31UL));
      (*(utf8 + 1)) = (signed char )(128UL | ((ucs4 >> 0) & 63UL));
      return (2UL);
    } else {
      if (ucs4 <= 65535UL) {
        (*(utf8 + 0)) = (signed char )(224UL | ((ucs4 >> 12) & 15UL));
        (*(utf8 + 1)) = (signed char )(128UL | ((ucs4 >> 6) & 63UL));
        (*(utf8 + 2)) = (signed char )(128UL | ((ucs4 >> 0) & 63UL));
        return (3UL);
      } else {
        if (ucs4 <= 2097151UL) {
          (*(utf8 + 0)) = (signed char )(240UL | ((ucs4 >> 18) & 7UL));
          (*(utf8 + 1)) = (signed char )(128UL | ((ucs4 >> 12) & 63UL));
          (*(utf8 + 2)) = (signed char )(128UL | ((ucs4 >> 6) & 63UL));
          (*(utf8 + 3)) = (signed char )(128UL | ((ucs4 >> 0) & 63UL));
          return (4UL);
        } else {
          if (ucs4 <= 67108863UL) {
            (*(utf8 + 0)) = (signed char )(248UL | ((ucs4 >> 24) & 3UL));
            (*(utf8 + 1)) = (signed char )(128UL | ((ucs4 >> 18) & 63UL));
            (*(utf8 + 2)) = (signed char )(128UL | ((ucs4 >> 12) & 63UL));
            (*(utf8 + 3)) = (signed char )(128UL | ((ucs4 >> 6) & 63UL));
            (*(utf8 + 4)) = (signed char )(128UL | ((ucs4 >> 0) & 63UL));
            return (5UL);
          } else {
            if (ucs4 <= 2147483647UL) {
              (*(utf8 + 0)) = (signed char )(252UL | ((ucs4 >> 30) & 1UL));
              (*(utf8 + 1)) = (signed char )(128UL | ((ucs4 >> 24) & 63UL));
              (*(utf8 + 2)) = (signed char )(128UL | ((ucs4 >> 18) & 63UL));
              (*(utf8 + 3)) = (signed char )(128UL | ((ucs4 >> 12) & 63UL));
              (*(utf8 + 4)) = (signed char )(128UL | ((ucs4 >> 6) & 63UL));
              (*(utf8 + 5)) = (signed char )(128UL | ((ucs4 >> 0) & 63UL));
              return (6UL);
            }
          }
        }
      }
    }
  }
  tmp = id3_utf8_encodechar(utf8, 183UL);
  return (tmp);
}
}
void id3_utf8_decode(id3_utf8_t const   *utf8 , id3_ucs4_t *ucs4 ) 
{ id3_length_t tmp ;
  id3_ucs4_t *tmp___0 ;

  {
  while (1) {
    tmp = id3_utf8_decodechar(utf8, ucs4);
    utf8 += tmp;
    tmp___0 = ucs4;
    ucs4 ++;
    if (! (*tmp___0)) {
      break;
    }
  }
  return;
}
}
void id3_utf8_encode(id3_utf8_t *utf8 , id3_ucs4_t const   *ucs4 ) 
{ id3_length_t tmp ;
  id3_ucs4_t const   *tmp___0 ;

  {
  while (1) {
    tmp = id3_utf8_encodechar(utf8, (*ucs4));
    utf8 += tmp;
    tmp___0 = ucs4;
    ucs4 ++;
    if (! (*tmp___0)) {
      break;
    }
  }
  return;
}
}
id3_length_t id3_utf8_put(id3_byte_t **ptr , id3_utf8_t utf8 ) 
{ id3_byte_t *tmp ;

  {
  if (ptr) {
    tmp = (*ptr);
    (*ptr) ++;
    (*tmp) = (unsigned char )utf8;
  }
  return (1UL);
}
}
id3_utf8_t id3_utf8_get(id3_byte_t const   **ptr ) 
{ id3_byte_t const   *tmp ;

  {
  tmp = (*ptr);
  (*ptr) ++;
  return ((signed char )(*tmp));
}
}
id3_length_t id3_utf8_serialize(id3_byte_t **ptr , id3_ucs4_t const   *ucs4 , int terminate ) 
{ id3_length_t size ;
  id3_utf8_t utf8[6] ;
  id3_utf8_t *out ;
  id3_ucs4_t const   *tmp ;
  int tmp___0 ;
  id3_utf8_t *tmp___1 ;
  id3_length_t tmp___2 ;
  id3_utf8_t *tmp___3 ;
  id3_length_t tmp___4 ;
  id3_utf8_t *tmp___5 ;
  id3_length_t tmp___6 ;
  id3_utf8_t *tmp___7 ;
  id3_length_t tmp___8 ;
  id3_utf8_t *tmp___9 ;
  id3_length_t tmp___10 ;
  id3_utf8_t *tmp___11 ;
  id3_length_t tmp___12 ;
  id3_length_t tmp___13 ;

  {
  size = 0UL;
  while ((*ucs4)) {
    tmp = ucs4;
    ucs4 ++;
    out = utf8;
    tmp___0 = (int )id3_utf8_encodechar(out, (*tmp));
    switch (tmp___0) {
    case 6: 
    tmp___1 = out;
    out ++;
    tmp___2 = id3_utf8_put(ptr, (*tmp___1));
    size += tmp___2;
    case 5: 
    tmp___3 = out;
    out ++;
    tmp___4 = id3_utf8_put(ptr, (*tmp___3));
    size += tmp___4;
    case 4: 
    tmp___5 = out;
    out ++;
    tmp___6 = id3_utf8_put(ptr, (*tmp___5));
    size += tmp___6;
    case 3: 
    tmp___7 = out;
    out ++;
    tmp___8 = id3_utf8_put(ptr, (*tmp___7));
    size += tmp___8;
    case 2: 
    tmp___9 = out;
    out ++;
    tmp___10 = id3_utf8_put(ptr, (*tmp___9));
    size += tmp___10;
    case 1: 
    tmp___11 = out;
    out ++;
    tmp___12 = id3_utf8_put(ptr, (*tmp___11));
    size += tmp___12;
    case 0: ;
    break;
    }
  }
  if (terminate) {
    tmp___13 = id3_utf8_put(ptr, (signed char)0);
    size += tmp___13;
  }
  return (size);
}
}
id3_ucs4_t *id3_utf8_deserialize(id3_byte_t const   **ptr , id3_length_t length ) 
{ id3_byte_t const   *end ;
  id3_utf8_t *utf8ptr ;
  id3_utf8_t *utf8 ;
  id3_ucs4_t *ucs4 ;
  id3_length_t tmp ;

  {
  end = (*ptr) + length;
  utf8 = (id3_utf8_t *)malloc((unsigned int )((length + 1UL) * (unsigned long )sizeof((*utf8))));
  if ((unsigned int )utf8 == (unsigned int )((id3_utf8_t *)0)) {
    return ((id3_ucs4_t *)0);
  }
  utf8ptr = utf8;
  while (1) {
    if (end - (*ptr) > 0) {
      (*utf8ptr) = id3_utf8_get(ptr);
      if (! (*utf8ptr)) {
        goto _L;
      }
    } else {
      _L: 
      break;
    }
    utf8ptr ++;
  }
  (*utf8ptr) = (signed char)0;
  tmp = id3_utf8_length((id3_utf8_t const   *)utf8);
  ucs4 = (id3_ucs4_t *)malloc((unsigned int )((tmp + 1UL) * (unsigned long )sizeof((*ucs4))));
  if (ucs4) {
    id3_utf8_decode((id3_utf8_t const   *)utf8, ucs4);
  }
  free((void *)utf8);
  return (ucs4);
}
}
#pragma merger(0,"/tmp/cil-t1gaaLHr.i","-Wall -g -O2")
extern  __attribute__((__noreturn__)) void __assert_fail(char const   *__assertion ,
                                                         char const   *__file , unsigned int __line ,
                                                         char const   *__function ) ;
extern void *memcpy(void * __restrict  __dest , void const   * __restrict  __src ,
                    size_t __n ) ;
extern void *memchr(void const   *__s , int __c , size_t __n )  __attribute__((__pure__)) ;
long id3_parse_int(id3_byte_t const   **ptr , unsigned int bytes ) ;
unsigned long id3_parse_uint(id3_byte_t const   **ptr , unsigned int bytes ) ;
unsigned long id3_parse_syncsafe(id3_byte_t const   **ptr , unsigned int bytes ) ;
void id3_parse_immediate(id3_byte_t const   **ptr , unsigned int bytes , char *value ) ;
id3_latin1_t *id3_parse_latin1(id3_byte_t const   **ptr , id3_length_t length , int full ) ;
id3_ucs4_t *id3_parse_string(id3_byte_t const   **ptr , id3_length_t length , enum id3_field_textencoding encoding ,
                             int full ) ;
id3_byte_t *id3_parse_binary(id3_byte_t const   **ptr , id3_length_t length ) ;
long id3_parse_int(id3_byte_t const   **ptr , unsigned int bytes ) 
{ long value ;
  id3_byte_t const   *tmp ;
  id3_byte_t const   *tmp___0 ;
  id3_byte_t const   *tmp___1 ;
  id3_byte_t const   *tmp___2 ;

  {
  value = 0L;
  if (bytes >= 1U) {
    if (! (bytes <= 4U)) {
      goto _L;
    }
  } else {
    _L: 
    __assert_fail("bytes >= 1 && bytes <= 4", "parse.c", 45U, "id3_parse_int");
  }
  if ((int const   )(*((*ptr))) & 128) {
    value = (long )(~ 0);
  }
  switch ((int )bytes) {
  case 4: 
  tmp = (*ptr);
  (*ptr) ++;
  value = (value << 8) | (long )(*tmp);
  case 3: 
  tmp___0 = (*ptr);
  (*ptr) ++;
  value = (value << 8) | (long )(*tmp___0);
  case 2: 
  tmp___1 = (*ptr);
  (*ptr) ++;
  value = (value << 8) | (long )(*tmp___1);
  case 1: 
  tmp___2 = (*ptr);
  (*ptr) ++;
  value = (value << 8) | (long )(*tmp___2);
  }
  return (value);
}
}
unsigned long id3_parse_uint(id3_byte_t const   **ptr , unsigned int bytes ) 
{ unsigned long value ;
  id3_byte_t const   *tmp ;
  id3_byte_t const   *tmp___0 ;
  id3_byte_t const   *tmp___1 ;
  id3_byte_t const   *tmp___2 ;

  {
  value = 0UL;
  if (bytes >= 1U) {
    if (! (bytes <= 4U)) {
      goto _L;
    }
  } else {
    _L: 
    __assert_fail("bytes >= 1 && bytes <= 4", "parse.c", 64U, "id3_parse_uint");
  }
  switch ((int )bytes) {
  case 4: 
  tmp = (*ptr);
  (*ptr) ++;
  value = (value << 8) | (unsigned long )(*tmp);
  case 3: 
  tmp___0 = (*ptr);
  (*ptr) ++;
  value = (value << 8) | (unsigned long )(*tmp___0);
  case 2: 
  tmp___1 = (*ptr);
  (*ptr) ++;
  value = (value << 8) | (unsigned long )(*tmp___1);
  case 1: 
  tmp___2 = (*ptr);
  (*ptr) ++;
  value = (value << 8) | (unsigned long )(*tmp___2);
  }
  return (value);
}
}
unsigned long id3_parse_syncsafe(id3_byte_t const   **ptr , unsigned int bytes ) 
{ unsigned long value ;
  id3_byte_t const   *tmp ;
  id3_byte_t const   *tmp___0 ;
  id3_byte_t const   *tmp___1 ;
  id3_byte_t const   *tmp___2 ;
  id3_byte_t const   *tmp___3 ;

  {
  value = 0UL;
  if (bytes == 4U) {
    goto _L;
  } else {
    if (bytes == 5U) {
      _L: ;
    } else {
      __assert_fail("bytes == 4 || bytes == 5", "parse.c", 80U, "id3_parse_syncsafe");
    }
  }
  switch ((int )bytes) {
  case 5: 
  tmp = (*ptr);
  (*ptr) ++;
  value = (value << 4) | (unsigned long )((int const   )(*tmp) & 15);
  case 4: 
  tmp___0 = (*ptr);
  (*ptr) ++;
  value = (value << 7) | (unsigned long )((int const   )(*tmp___0) & 127);
  tmp___1 = (*ptr);
  (*ptr) ++;
  value = (value << 7) | (unsigned long )((int const   )(*tmp___1) & 127);
  tmp___2 = (*ptr);
  (*ptr) ++;
  value = (value << 7) | (unsigned long )((int const   )(*tmp___2) & 127);
  tmp___3 = (*ptr);
  (*ptr) ++;
  value = (value << 7) | (unsigned long )((int const   )(*tmp___3) & 127);
  }
  return (value);
}
}
void id3_parse_immediate(id3_byte_t const   **ptr , unsigned int bytes , char *value ) 
{ char *tmp ;
  id3_byte_t const   *tmp___0 ;
  char *tmp___1 ;
  id3_byte_t const   *tmp___2 ;
  char *tmp___3 ;
  id3_byte_t const   *tmp___4 ;
  char *tmp___5 ;
  id3_byte_t const   *tmp___6 ;
  char *tmp___7 ;
  id3_byte_t const   *tmp___8 ;
  char *tmp___9 ;
  id3_byte_t const   *tmp___10 ;
  char *tmp___11 ;
  id3_byte_t const   *tmp___12 ;
  char *tmp___13 ;
  id3_byte_t const   *tmp___14 ;

  {
  if (! value) {
    __assert_fail("value", "parse.c", 96U, "id3_parse_immediate");
  }
  if (bytes == 8U) {
    goto _L___0;
  } else {
    if (bytes == 4U) {
      _L___0: 
      goto _L;
    } else {
      if (bytes == 3U) {
        _L: ;
      } else {
        __assert_fail("bytes == 8 || bytes == 4 || bytes == 3", "parse.c", 97U, "id3_parse_immediate");
      }
    }
  }
  switch ((int )bytes) {
  case 8: 
  tmp = value;
  value ++;
  tmp___0 = (*ptr);
  (*ptr) ++;
  (*tmp) = (char )(*tmp___0);
  tmp___1 = value;
  value ++;
  tmp___2 = (*ptr);
  (*ptr) ++;
  (*tmp___1) = (char )(*tmp___2);
  tmp___3 = value;
  value ++;
  tmp___4 = (*ptr);
  (*ptr) ++;
  (*tmp___3) = (char )(*tmp___4);
  tmp___5 = value;
  value ++;
  tmp___6 = (*ptr);
  (*ptr) ++;
  (*tmp___5) = (char )(*tmp___6);
  case 4: 
  tmp___7 = value;
  value ++;
  tmp___8 = (*ptr);
  (*ptr) ++;
  (*tmp___7) = (char )(*tmp___8);
  case 3: 
  tmp___9 = value;
  value ++;
  tmp___10 = (*ptr);
  (*ptr) ++;
  (*tmp___9) = (char )(*tmp___10);
  tmp___11 = value;
  value ++;
  tmp___12 = (*ptr);
  (*ptr) ++;
  (*tmp___11) = (char )(*tmp___12);
  tmp___13 = value;
  value ++;
  tmp___14 = (*ptr);
  (*ptr) ++;
  (*tmp___13) = (char )(*tmp___14);
  }
  (*value) = (char)0;
  return;
}
}
id3_latin1_t *id3_parse_latin1(id3_byte_t const   **ptr , id3_length_t length , int full ) 
{ id3_byte_t const   *end ;
  int terminated ;
  id3_latin1_t *latin1 ;
  id3_latin1_t *check ;

  {
  terminated = 0;
  end = (id3_byte_t const   *)memchr((void const   *)(*ptr), 0, (unsigned int )length);
  if ((unsigned int )end == (unsigned int )((id3_byte_t const   *)0)) {
    end = (*ptr) + length;
  } else {
    length = (unsigned long )(end - (*ptr));
    terminated = 1;
  }
  latin1 = (id3_latin1_t *)malloc((unsigned int )(length + 1UL));
  if (latin1) {
    memcpy((void * __restrict  )latin1, (void const   * __restrict  )(*ptr), (unsigned int )length);
    (*(latin1 + length)) = (unsigned char)0;
    if (! full) {
      check = latin1;
      while ((*check)) {
        if ((int )(*check) == 10) {
          (*check) = (unsigned char )' ';
        }
        check ++;
      }
    }
  }
  (*ptr) += length + (unsigned long )terminated;
  return (latin1);
}
}
id3_ucs4_t *id3_parse_string(id3_byte_t const   **ptr , id3_length_t length , enum id3_field_textencoding encoding ,
                             int full ) 
{ id3_ucs4_t *ucs4 ;
  enum id3_utf16_byteorder byteorder ;
  id3_ucs4_t *check ;

  {
  ucs4 = (id3_ucs4_t *)0;
  byteorder = (enum id3_utf16_byteorder )0;
  switch ((int )encoding) {
  case 0: 
  ucs4 = id3_latin1_deserialize(ptr, length);
  break;
  case 2: 
  byteorder = (enum id3_utf16_byteorder )1;
  case 1: 
  ucs4 = id3_utf16_deserialize(ptr, length, byteorder);
  break;
  case 3: 
  ucs4 = id3_utf8_deserialize(ptr, length);
  break;
  }
  if (ucs4) {
    if (! full) {
      check = ucs4;
      while ((*check)) {
        if ((*check) == 10UL) {
          (*check) = (unsigned long )' ';
        }
        check ++;
      }
    } else {
      goto _L;
    }
  } else {
    _L: ;
  }
  return (ucs4);
}
}
id3_byte_t *id3_parse_binary(id3_byte_t const   **ptr , id3_length_t length ) 
{ id3_byte_t *data ;
  id3_byte_t *tmp ;

  {
  if (length == 0UL) {
    tmp = (id3_byte_t *)malloc(1U);
    return (tmp);
  }
  data = (id3_byte_t *)malloc((unsigned int )length);
  if (data) {
    memcpy((void * __restrict  )data, (void const   * __restrict  )(*ptr), (unsigned int )length);
  }
  (*ptr) += length;
  return (data);
}
}
#pragma merger(0,"/tmp/cil-wFT2Zz8H.i","-Wall -g -O2")
extern void *memset(void *__s , int __c , size_t __n ) ;
extern int __builtin_constant_p() ;
id3_length_t id3_render_immediate(id3_byte_t **ptr , char const   *value , unsigned int bytes ) ;
id3_length_t id3_render_syncsafe(id3_byte_t **ptr , unsigned long num , unsigned int bytes ) ;
id3_length_t id3_render_int(id3_byte_t **ptr , long num , unsigned int bytes ) ;
id3_length_t id3_render_binary(id3_byte_t **ptr , id3_byte_t const   *data , id3_length_t length ) ;
id3_length_t id3_render_latin1(id3_byte_t **ptr , id3_latin1_t const   *latin1 , int terminate ) ;
id3_length_t id3_render_string(id3_byte_t **ptr , id3_ucs4_t const   *ucs4 , enum id3_field_textencoding encoding ,
                               int terminate ) ;
id3_length_t id3_render_padding(id3_byte_t **ptr , id3_byte_t value , id3_length_t length ) ;
id3_length_t id3_render_paddedstring(id3_byte_t **ptr , id3_ucs4_t const   *ucs4 ,
                                     id3_length_t length ) ;
id3_length_t id3_render_immediate(id3_byte_t **ptr , char const   *value , unsigned int bytes ) 
{ id3_byte_t *tmp ;
  char const   *tmp___0 ;
  id3_byte_t *tmp___1 ;
  char const   *tmp___2 ;
  id3_byte_t *tmp___3 ;
  char const   *tmp___4 ;
  id3_byte_t *tmp___5 ;
  char const   *tmp___6 ;
  id3_byte_t *tmp___7 ;
  char const   *tmp___8 ;
  id3_byte_t *tmp___9 ;
  char const   *tmp___10 ;
  id3_byte_t *tmp___11 ;
  char const   *tmp___12 ;
  id3_byte_t *tmp___13 ;
  char const   *tmp___14 ;

  {
  if (! value) {
    __assert_fail("value", "render.c", 45U, "id3_render_immediate");
  }
  if (bytes == 8U) {
    goto _L___0;
  } else {
    if (bytes == 4U) {
      _L___0: 
      goto _L;
    } else {
      if (bytes == 3U) {
        _L: ;
      } else {
        __assert_fail("bytes == 8 || bytes == 4 || bytes == 3", "render.c", 46U, "id3_render_immediate");
      }
    }
  }
  if (ptr) {
    switch ((int )bytes) {
    case 8: 
    tmp = (*ptr);
    (*ptr) ++;
    tmp___0 = value;
    value ++;
    (*tmp) = (unsigned char )(*tmp___0);
    tmp___1 = (*ptr);
    (*ptr) ++;
    tmp___2 = value;
    value ++;
    (*tmp___1) = (unsigned char )(*tmp___2);
    tmp___3 = (*ptr);
    (*ptr) ++;
    tmp___4 = value;
    value ++;
    (*tmp___3) = (unsigned char )(*tmp___4);
    tmp___5 = (*ptr);
    (*ptr) ++;
    tmp___6 = value;
    value ++;
    (*tmp___5) = (unsigned char )(*tmp___6);
    case 4: 
    tmp___7 = (*ptr);
    (*ptr) ++;
    tmp___8 = value;
    value ++;
    (*tmp___7) = (unsigned char )(*tmp___8);
    case 3: 
    tmp___9 = (*ptr);
    (*ptr) ++;
    tmp___10 = value;
    value ++;
    (*tmp___9) = (unsigned char )(*tmp___10);
    tmp___11 = (*ptr);
    (*ptr) ++;
    tmp___12 = value;
    value ++;
    (*tmp___11) = (unsigned char )(*tmp___12);
    tmp___13 = (*ptr);
    (*ptr) ++;
    tmp___14 = value;
    value ++;
    (*tmp___13) = (unsigned char )(*tmp___14);
    }
  }
  return ((unsigned long )bytes);
}
}
id3_length_t id3_render_syncsafe(id3_byte_t **ptr , unsigned long num , unsigned int bytes ) 
{ id3_byte_t *tmp ;
  id3_byte_t *tmp___0 ;
  id3_byte_t *tmp___1 ;
  id3_byte_t *tmp___2 ;
  id3_byte_t *tmp___3 ;

  {
  if (bytes == 4U) {
    goto _L;
  } else {
    if (bytes == 5U) {
      _L: ;
    } else {
      __assert_fail("bytes == 4 || bytes == 5", "render.c", 67U, "id3_render_syncsafe");
    }
  }
  if (ptr) {
    switch ((int )bytes) {
    case 5: 
    tmp = (*ptr);
    (*ptr) ++;
    (*tmp) = (unsigned char )((num >> 28) & 15UL);
    case 4: 
    tmp___0 = (*ptr);
    (*ptr) ++;
    (*tmp___0) = (unsigned char )((num >> 21) & 127UL);
    tmp___1 = (*ptr);
    (*ptr) ++;
    (*tmp___1) = (unsigned char )((num >> 14) & 127UL);
    tmp___2 = (*ptr);
    (*ptr) ++;
    (*tmp___2) = (unsigned char )((num >> 7) & 127UL);
    tmp___3 = (*ptr);
    (*ptr) ++;
    (*tmp___3) = (unsigned char )((num >> 0) & 127UL);
    }
  }
  return ((unsigned long )bytes);
}
}
id3_length_t id3_render_int(id3_byte_t **ptr , long num , unsigned int bytes ) 
{ id3_byte_t *tmp ;
  id3_byte_t *tmp___0 ;
  id3_byte_t *tmp___1 ;
  id3_byte_t *tmp___2 ;

  {
  if (bytes >= 1U) {
    if (! (bytes <= 4U)) {
      goto _L;
    }
  } else {
    _L: 
    __assert_fail("bytes >= 1 && bytes <= 4", "render.c", 85U, "id3_render_int");
  }
  if (ptr) {
    switch ((int )bytes) {
    case 4: 
    tmp = (*ptr);
    (*ptr) ++;
    (*tmp) = (unsigned char )(num >> 24);
    case 3: 
    tmp___0 = (*ptr);
    (*ptr) ++;
    (*tmp___0) = (unsigned char )(num >> 16);
    case 2: 
    tmp___1 = (*ptr);
    (*ptr) ++;
    (*tmp___1) = (unsigned char )(num >> 8);
    case 1: 
    tmp___2 = (*ptr);
    (*ptr) ++;
    (*tmp___2) = (unsigned char )(num >> 0);
    }
  }
  return ((unsigned long )bytes);
}
}
id3_length_t id3_render_binary(id3_byte_t **ptr , id3_byte_t const   *data , id3_length_t length ) 
{ 

  {
  if ((unsigned int )data == (unsigned int )((id3_byte_t const   *)0)) {
    return (0UL);
  }
  if (ptr) {
    memcpy((void * __restrict  )(*ptr), (void const   * __restrict  )data, (unsigned int )length);
    (*ptr) += length;
  }
  return (length);
}
}
id3_length_t id3_render_latin1(id3_byte_t **ptr , id3_latin1_t const   *latin1 , int terminate ) 
{ id3_length_t size ;

  {
  if ((unsigned int )latin1 == (unsigned int )((id3_latin1_t const   *)0)) {
    latin1 = (id3_latin1_t const   *)"";
  }
  size = id3_latin1_size(latin1);
  if (! terminate) {
    size --;
  }
  if (ptr) {
    memcpy((void * __restrict  )(*ptr), (void const   * __restrict  )latin1, (unsigned int )size);
    (*ptr) += size;
  }
  return (size);
}
}
id3_length_t id3_render_string(id3_byte_t **ptr , id3_ucs4_t const   *ucs4 , enum id3_field_textencoding encoding ,
                               int terminate ) 
{ enum id3_utf16_byteorder byteorder ;
  id3_length_t tmp ;
  id3_length_t tmp___0 ;
  id3_length_t tmp___1 ;

  {
  byteorder = (enum id3_utf16_byteorder )0;
  if ((unsigned int )ucs4 == (unsigned int )((id3_ucs4_t const   *)0)) {
    ucs4 = id3_ucs4_empty;
  }
  switch ((int )encoding) {
  case 0: 
  tmp = id3_latin1_serialize(ptr, ucs4, terminate);
  return (tmp);
  case 2: 
  byteorder = (enum id3_utf16_byteorder )1;
  case 1: 
  tmp___0 = id3_utf16_serialize(ptr, ucs4, byteorder, terminate);
  return (tmp___0);
  case 3: 
  tmp___1 = id3_utf8_serialize(ptr, ucs4, terminate);
  return (tmp___1);
  }
  return (0UL);
}
}
id3_length_t id3_render_padding(id3_byte_t **ptr , id3_byte_t value , id3_length_t length ) 
{ void *__s ;
  int tmp ;
  void *__s___0 ;
  union __anonunion___u_26 *__u ;
  __uint8_t __c ;
  void *__s___1 ;
  int tmp___0 ;

  {
  if (ptr) {
    tmp___0 = __builtin_constant_p(length);
    if (tmp___0) {
      if (length <= 16UL) {
        if (length == 1UL) {
          __s___1 = (void *)(*ptr);
          (*((__uint8_t *)__s___1)) = value;
        } else {
          __s___0 = (void *)(*ptr);
          __u = (union __anonunion___u_26 *)__s___0;
          __c = value;
          switch ((int )((unsigned int )length)) {
          case 15: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          __u = (union __anonunion___u_26 *)((void *)__u + 4);
          case 11: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          __u = (union __anonunion___u_26 *)((void *)__u + 4);
          case 7: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          __u = (union __anonunion___u_26 *)((void *)__u + 4);
          case 3: 
          __u->__usi = (unsigned short )((int )((unsigned short )__c) * 257);
          __u = (union __anonunion___u_26 *)((void *)__u + 2);
          __u->__uc = __c;
          break;
          case 14: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          __u = (union __anonunion___u_26 *)((void *)__u + 4);
          case 10: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          __u = (union __anonunion___u_26 *)((void *)__u + 4);
          case 6: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          __u = (union __anonunion___u_26 *)((void *)__u + 4);
          case 2: 
          __u->__usi = (unsigned short )((int )((unsigned short )__c) * 257);
          break;
          case 13: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          __u = (union __anonunion___u_26 *)((void *)__u + 4);
          case 9: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          __u = (union __anonunion___u_26 *)((void *)__u + 4);
          case 5: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          __u = (union __anonunion___u_26 *)((void *)__u + 4);
          case 1: 
          __u->__uc = __c;
          break;
          case 16: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          __u = (union __anonunion___u_26 *)((void *)__u + 4);
          case 12: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          __u = (union __anonunion___u_26 *)((void *)__u + 4);
          case 8: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          __u = (union __anonunion___u_26 *)((void *)__u + 4);
          case 4: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          case 0: ;
          break;
          }
        }
      } else {
        goto _L___0;
      }
    } else {
      _L___0: 
      tmp = __builtin_constant_p(value);
      if (tmp) {
        if ((int )value == 0) {
          __s = (void *)(*ptr);
          __builtin_memset(__s, '\000', (int )length);
        } else {
          goto _L;
        }
      } else {
        _L: 
        memset((void *)(*ptr), (int )value, (unsigned int )length);
      }
    }
    (*ptr) += length;
  }
  return (length);
}
}
id3_length_t id3_render_paddedstring(id3_byte_t **ptr , id3_ucs4_t const   *ucs4 ,
                                     id3_length_t length ) 
{ id3_ucs4_t padded[31] ;
  id3_ucs4_t *data ;
  id3_ucs4_t *end ;
  id3_ucs4_t *tmp ;
  id3_ucs4_t const   *tmp___0 ;
  id3_ucs4_t *tmp___1 ;
  id3_length_t tmp___2 ;

  {
  if (! (length <= 30UL)) {
    __assert_fail("length <= 30", "render.c", 180U, "id3_render_paddedstring");
  }
  data = padded;
  end = data + length;
  if (ucs4) {
    while (1) {
      if ((*ucs4)) {
        if (! (end - data > 0)) {
          goto _L;
        }
      } else {
        _L: 
        break;
      }
      tmp = data;
      data ++;
      tmp___0 = ucs4;
      ucs4 ++;
      (*tmp) = (*tmp___0);
      if ((*(data + -1)) == 10UL) {
        (*(data + -1)) = (unsigned long )' ';
      }
    }
  }
  while (end - data > 0) {
    tmp___1 = data;
    data ++;
    (*tmp___1) = (unsigned long )' ';
  }
  (*data) = 0UL;
  tmp___2 = id3_latin1_serialize(ptr, (id3_ucs4_t const   *)(padded), 0);
  return (tmp___2);
}
}
#pragma merger(0,"/tmp/cil-WtfzPkxp.i","-Wall -g -O2")
extern void *realloc(void *__ptr , size_t __size )  __attribute__((__malloc__)) ;
extern char *strcpy(char * __restrict  __dest , char const   * __restrict  __src ) ;
extern size_t strlen(char const   *__s )  __attribute__((__pure__)) ;
enum id3_field_type id3_field_type(union id3_field  const  *field ) ;
int id3_field_setint(union id3_field *field , long number ) ;
int id3_field_settextencoding(union id3_field *field , enum id3_field_textencoding encoding ) ;
int id3_field_setstrings(union id3_field *field , unsigned int length , id3_ucs4_t **ptrs ) ;
int id3_field_addstring(union id3_field *field , id3_ucs4_t const   *string ) ;
int id3_field_setlanguage(union id3_field *field , char const   *language ) ;
int id3_field_setlatin1(union id3_field *field , id3_latin1_t const   *latin1 ) ;
int id3_field_setfulllatin1(union id3_field *field , id3_latin1_t const   *latin1 ) ;
int id3_field_setstring(union id3_field *field , id3_ucs4_t const   *string ) ;
int id3_field_setfullstring(union id3_field *field , id3_ucs4_t const   *string ) ;
int id3_field_setframeid(union id3_field *field , char const   *id ) ;
int id3_field_setbinarydata(union id3_field *field , id3_byte_t const   *data , id3_length_t length ) ;
long id3_field_getint(union id3_field  const  *field ) ;
enum id3_field_textencoding id3_field_gettextencoding(union id3_field  const  *field ) ;
id3_latin1_t const   *id3_field_getlatin1(union id3_field  const  *field ) ;
id3_latin1_t const   *id3_field_getfulllatin1(union id3_field  const  *field ) ;
id3_ucs4_t const   *id3_field_getstring(union id3_field  const  *field ) ;
id3_ucs4_t const   *id3_field_getfullstring(union id3_field  const  *field ) ;
unsigned int id3_field_getnstrings(union id3_field  const  *field ) ;
id3_ucs4_t const   *id3_field_getstrings(union id3_field  const  *field , unsigned int index___0 ) ;
char const   *id3_field_getframeid(union id3_field  const  *field ) ;
id3_byte_t const   *id3_field_getbinarydata(union id3_field  const  *field , id3_length_t *length ) ;
void id3_field_init(union id3_field *field , enum id3_field_type type ) ;
void id3_field_finish(union id3_field *field ) ;
int id3_field_parse(union id3_field *field , id3_byte_t const   **ptr , id3_length_t length ,
                    enum id3_field_textencoding *encoding ) ;
id3_length_t id3_field_render(union id3_field  const  *field , id3_byte_t **ptr ,
                              enum id3_field_textencoding *encoding , int terminate ) ;
int id3_frame_validid(char const   *id ) ;
void id3_field_init(union id3_field *field , enum id3_field_type type ) 
{ void *__s ;
  void *__s___0 ;
  union __anonunion___u_26___0 *__u ;
  __uint8_t __c ;
  void *__s___1 ;
  int tmp ;

  {
  if (! field) {
    __assert_fail("field", "field.c", 49U, "id3_field_init");
  }
  field->type = type;
  switch ((int )field->type) {
  case 0: ;
  case 10: ;
  case 11: ;
  case 12: ;
  case 13: 
  field->number.value = 0L;
  break;
  case 1: ;
  case 2: 
  field->latin1.ptr = (id3_latin1_t *)0;
  break;
  case 3: 
  field->latin1list.nstrings = 0U;
  field->latin1list.strings = (id3_latin1_t **)0;
  case 4: ;
  case 5: 
  field->string.ptr = (id3_ucs4_t *)0;
  break;
  case 6: 
  field->stringlist.nstrings = 0U;
  field->stringlist.strings = (id3_ucs4_t **)0;
  break;
  case 7: 
  strcpy((char * __restrict  )(field->immediate.value), (char const   * __restrict  )"XXX");
  break;
  case 8: 
  strcpy((char * __restrict  )(field->immediate.value), (char const   * __restrict  )"XXXX");
  break;
  case 9: 
  tmp = __builtin_constant_p(sizeof(field->immediate.value));
  if (tmp) {
    if (sizeof(field->immediate.value) <= 16U) {
      if (sizeof(field->immediate.value) == 1U) {
        __s___1 = (void *)(field->immediate.value);
        (*((__uint8_t *)__s___1)) = (unsigned char)0;
      } else {
        __s___0 = (void *)(field->immediate.value);
        __u = (union __anonunion___u_26___0 *)__s___0;
        __c = (unsigned char)0;
        switch ((int )sizeof(field->immediate.value)) {
        case 15: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_26___0 *)((void *)__u + 4);
        case 11: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_26___0 *)((void *)__u + 4);
        case 7: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_26___0 *)((void *)__u + 4);
        case 3: 
        __u->__usi = (unsigned short )((int )((unsigned short )__c) * 257);
        __u = (union __anonunion___u_26___0 *)((void *)__u + 2);
        __u->__uc = __c;
        break;
        case 14: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_26___0 *)((void *)__u + 4);
        case 10: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_26___0 *)((void *)__u + 4);
        case 6: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_26___0 *)((void *)__u + 4);
        case 2: 
        __u->__usi = (unsigned short )((int )((unsigned short )__c) * 257);
        break;
        case 13: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_26___0 *)((void *)__u + 4);
        case 9: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_26___0 *)((void *)__u + 4);
        case 5: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_26___0 *)((void *)__u + 4);
        case 1: 
        __u->__uc = __c;
        break;
        case 16: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_26___0 *)((void *)__u + 4);
        case 12: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_26___0 *)((void *)__u + 4);
        case 8: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_26___0 *)((void *)__u + 4);
        case 4: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        case 0: ;
        break;
        }
      }
    } else {
      goto _L;
    }
  } else {
    _L: 
    __s = (void *)(field->immediate.value);
    __builtin_memset(__s, '\000', (int )sizeof(field->immediate.value));
  }
  break;
  case 14: ;
  case 15: 
  field->binary.data = (id3_byte_t *)0;
  field->binary.length = 0UL;
  break;
  }
  return;
}
}
void id3_field_finish(union id3_field *field ) 
{ unsigned int i ;

  {
  if (! field) {
    __assert_fail("field", "field.c", 107U, "id3_field_finish");
  }
  switch ((int )field->type) {
  case 0: ;
  case 10: ;
  case 11: ;
  case 12: ;
  case 13: ;
  case 7: ;
  case 8: ;
  case 9: ;
  break;
  case 1: ;
  case 2: ;
  if (field->latin1.ptr) {
    free((void *)field->latin1.ptr);
  }
  break;
  case 3: 
  i = 0U;
  while (i < field->latin1list.nstrings) {
    free((void *)(*(field->latin1list.strings + i)));
    i ++;
  }
  if (field->latin1list.strings) {
    free((void *)field->latin1list.strings);
  }
  break;
  case 4: ;
  case 5: ;
  if (field->string.ptr) {
    free((void *)field->string.ptr);
  }
  break;
  case 6: 
  i = 0U;
  while (i < field->stringlist.nstrings) {
    free((void *)(*(field->stringlist.strings + i)));
    i ++;
  }
  if (field->stringlist.strings) {
    free((void *)field->stringlist.strings);
  }
  break;
  case 14: ;
  case 15: ;
  if (field->binary.data) {
    free((void *)field->binary.data);
  }
  break;
  }
  id3_field_init(field, field->type);
  return;
}
}
enum id3_field_type id3_field_type(union id3_field  const  *field ) 
{ 

  {
  if (! field) {
    __assert_fail("field", "field.c", 164U, "id3_field_type");
  }
  return (field->type);
}
}
int id3_field_parse(union id3_field *field , id3_byte_t const   **ptr , id3_length_t length ,
                    enum id3_field_textencoding *encoding ) 
{ id3_latin1_t *latin1 ;
  id3_byte_t const   *end ;
  id3_latin1_t *latin1___0 ;
  id3_latin1_t **strings ;
  unsigned int tmp ;
  id3_ucs4_t *ucs4 ;
  id3_byte_t const   *end___0 ;
  id3_ucs4_t *ucs4___0 ;
  id3_ucs4_t **strings___0 ;
  unsigned int tmp___0 ;
  id3_byte_t *data ;

  {
  if (! field) {
    __assert_fail("field", "field.c", 176U, "id3_field_parse");
  }
  id3_field_finish(field);
  switch ((int )field->type) {
  case 13: ;
  if (length < 4UL) {
    goto fail;
  }
  field->number.value = (long )id3_parse_uint(ptr, 4U);
  break;
  case 12: ;
  if (length < 3UL) {
    goto fail;
  }
  field->number.value = (long )id3_parse_uint(ptr, 3U);
  break;
  case 11: ;
  if (length < 2UL) {
    goto fail;
  }
  field->number.value = (long )id3_parse_uint(ptr, 2U);
  break;
  case 10: ;
  case 0: ;
  if (length < 1UL) {
    goto fail;
  }
  field->number.value = (long )id3_parse_uint(ptr, 1U);
  if ((int )field->type == 0) {
    (*encoding) = (enum id3_field_textencoding )field->number.value;
  }
  break;
  case 7: ;
  if (length < 3UL) {
    goto fail;
  }
  id3_parse_immediate(ptr, 3U, field->immediate.value);
  break;
  case 8: ;
  if (length < 4UL) {
    goto fail;
  }
  id3_parse_immediate(ptr, 4U, field->immediate.value);
  break;
  case 9: ;
  if (length < 8UL) {
    goto fail;
  }
  id3_parse_immediate(ptr, 8U, field->immediate.value);
  break;
  case 1: ;
  case 2: 
  latin1 = id3_parse_latin1(ptr, length, (int )field->type == 2);
  if ((unsigned int )latin1 == (unsigned int )((id3_latin1_t *)0)) {
    goto fail;
  }
  field->latin1.ptr = latin1;
  break;
  case 3: 
  end = (*ptr) + length;
  while (end - (*ptr) > 0) {
    latin1___0 = id3_parse_latin1(ptr, (unsigned long )(end - (*ptr)), 0);
    if ((unsigned int )latin1___0 == (unsigned int )((id3_latin1_t *)0)) {
      goto fail;
    }
    strings = (id3_latin1_t **)realloc((void *)field->latin1list.strings, (field->latin1list.nstrings +
                                                                           1U) * sizeof((*strings)));
    if ((unsigned int )strings == (unsigned int )((id3_latin1_t **)0)) {
      free((void *)latin1___0);
      goto fail;
    }
    field->latin1list.strings = strings;
    tmp = field->latin1list.nstrings;
    field->latin1list.nstrings ++;
    (*(field->latin1list.strings + tmp)) = latin1___0;
  }
  break;
  case 4: ;
  case 5: 
  ucs4 = id3_parse_string(ptr, length, (*encoding), (int )field->type == 5);
  if ((unsigned int )ucs4 == (unsigned int )((id3_ucs4_t *)0)) {
    goto fail;
  }
  field->string.ptr = ucs4;
  break;
  case 6: 
  end___0 = (*ptr) + length;
  while (end___0 - (*ptr) > 0) {
    ucs4___0 = id3_parse_string(ptr, (unsigned long )(end___0 - (*ptr)), (*encoding),
                                0);
    if ((unsigned int )ucs4___0 == (unsigned int )((id3_ucs4_t *)0)) {
      goto fail;
    }
    strings___0 = (id3_ucs4_t **)realloc((void *)field->stringlist.strings, (field->stringlist.nstrings +
                                                                             1U) *
                                                                            sizeof((*strings___0)));
    if ((unsigned int )strings___0 == (unsigned int )((id3_ucs4_t **)0)) {
      free((void *)ucs4___0);
      goto fail;
    }
    field->stringlist.strings = strings___0;
    tmp___0 = field->stringlist.nstrings;
    field->stringlist.nstrings ++;
    (*(field->stringlist.strings + tmp___0)) = ucs4___0;
  }
  break;
  case 14: ;
  case 15: 
  data = id3_parse_binary(ptr, length);
  if ((unsigned int )data == (unsigned int )((id3_byte_t *)0)) {
    goto fail;
  }
  field->binary.data = data;
  field->binary.length = length;
  break;
  }
  return (0);
  fail: 
  return (-1);
}
}
id3_length_t id3_field_render(union id3_field  const  *field , id3_byte_t **ptr ,
                              enum id3_field_textencoding *encoding , int terminate ) 
{ id3_length_t size ;
  unsigned int i ;
  id3_length_t tmp ;
  id3_length_t tmp___0 ;
  id3_length_t tmp___1 ;
  id3_length_t tmp___2 ;
  id3_length_t tmp___3 ;
  int tmp___4 ;
  id3_length_t tmp___5 ;
  id3_length_t tmp___6 ;
  int tmp___7 ;
  id3_length_t tmp___8 ;
  id3_length_t tmp___9 ;
  id3_length_t tmp___10 ;
  id3_length_t tmp___11 ;
  id3_length_t tmp___12 ;

  {
  if (field) {
    if (! encoding) {
      goto _L;
    }
  } else {
    _L: 
    __assert_fail("field && encoding", "field.c", 344U, "id3_field_render");
  }
  switch ((int )field->type) {
  case 13: 
  tmp = id3_render_int(ptr, field->number.value, 4U);
  return (tmp);
  case 12: 
  tmp___0 = id3_render_int(ptr, field->number.value, 3U);
  return (tmp___0);
  case 11: 
  tmp___1 = id3_render_int(ptr, field->number.value, 2U);
  return (tmp___1);
  case 0: 
  (*encoding) = (enum id3_field_textencoding )field->number.value;
  case 10: 
  tmp___2 = id3_render_int(ptr, field->number.value, 1U);
  return (tmp___2);
  case 1: ;
  case 2: 
  tmp___3 = id3_render_latin1(ptr, (id3_latin1_t const   *)field->latin1.ptr, terminate);
  return (tmp___3);
  case 3: 
  size = 0UL;
  i = 0U;
  while (i < field->latin1list.nstrings) {
    if (i < field->latin1list.nstrings - 1U) {
      goto _L___0;
    } else {
      if (terminate) {
        _L___0: 
        tmp___4 = 1;
      } else {
        tmp___4 = 0;
      }
    }
    tmp___5 = id3_render_latin1(ptr, (id3_latin1_t const   *)(*(field->latin1list.strings +
                                                                i)), tmp___4);
    size += tmp___5;
    i ++;
  }
  return (size);
  case 4: ;
  case 5: 
  tmp___6 = id3_render_string(ptr, (id3_ucs4_t const   *)field->string.ptr, (*encoding),
                              terminate);
  return (tmp___6);
  case 6: 
  size = 0UL;
  i = 0U;
  while (i < field->stringlist.nstrings) {
    if (i < field->stringlist.nstrings - 1U) {
      goto _L___1;
    } else {
      if (terminate) {
        _L___1: 
        tmp___7 = 1;
      } else {
        tmp___7 = 0;
      }
    }
    tmp___8 = id3_render_string(ptr, (id3_ucs4_t const   *)(*(field->stringlist.strings +
                                                              i)), (*encoding), tmp___7);
    size += tmp___8;
    i ++;
  }
  return (size);
  case 7: 
  tmp___9 = id3_render_immediate(ptr, (char const   *)(field->immediate.value), 3U);
  return (tmp___9);
  case 8: 
  tmp___10 = id3_render_immediate(ptr, (char const   *)(field->immediate.value), 4U);
  return (tmp___10);
  case 9: 
  tmp___11 = id3_render_immediate(ptr, (char const   *)(field->immediate.value), 8U);
  return (tmp___11);
  case 14: ;
  case 15: 
  tmp___12 = id3_render_binary(ptr, (id3_byte_t const   *)field->binary.data, field->binary.length);
  return (tmp___12);
  }
  return (0UL);
}
}
int id3_field_setint(union id3_field *field , long number ) 
{ 

  {
  if (! field) {
    __assert_fail("field", "field.c", 410U, "id3_field_setint");
  }
  switch ((int )field->type) {
  case 10: ;
  if (number > 127L) {
    goto _L;
  } else {
    if (number < -128L) {
      _L: 
      return (-1);
    }
  }
  break;
  case 11: ;
  if (number > 32767L) {
    goto _L___0;
  } else {
    if (number < -32768L) {
      _L___0: 
      return (-1);
    }
  }
  break;
  case 12: ;
  if (number > 8388607L) {
    goto _L___1;
  } else {
    if (number < -8388608L) {
      _L___1: 
      return (-1);
    }
  }
  break;
  case 13: ;
  if (number > 2147483647L) {
    goto _L___2;
  } else {
    if ((unsigned long )number < 2147483648UL) {
      _L___2: 
      return (-1);
    }
  }
  break;
  default: ;
  return (-1);
  }
  id3_field_finish(field);
  field->number.value = number;
  return (0);
}
}
int id3_field_settextencoding(union id3_field *field , enum id3_field_textencoding encoding ) 
{ 

  {
  if (! field) {
    __assert_fail("field", "field.c", 451U, "id3_field_settextencoding");
  }
  if ((int )field->type != 0) {
    return (-1);
  }
  id3_field_finish(field);
  field->number.value = (long )encoding;
  return (0);
}
}
static int set_latin1(union id3_field *field , id3_latin1_t const   *latin1 ) 
{ id3_latin1_t *data ;

  {
  if ((unsigned int )latin1 == (unsigned int )((id3_latin1_t const   *)0)) {
    goto _L;
  } else {
    if ((int const   )(*latin1) == 0) {
      _L: 
      data = (id3_latin1_t *)0;
    } else {
      data = id3_latin1_duplicate(latin1);
      if ((unsigned int )data == (unsigned int )((id3_latin1_t *)0)) {
        return (-1);
      }
    }
  }
  field->latin1.ptr = data;
  return (0);
}
}
int id3_field_setlatin1(union id3_field *field , id3_latin1_t const   *latin1 ) 
{ id3_latin1_t const   *ptr ;
  int tmp ;

  {
  if (! field) {
    __assert_fail("field", "field.c", 487U, "id3_field_setlatin1");
  }
  if ((int )field->type != 1) {
    return (-1);
  }
  id3_field_finish(field);
  if (latin1) {
    ptr = latin1;
    while ((*ptr)) {
      if ((int const   )(*ptr) == 10) {
        return (-1);
      }
      ptr ++;
    }
  }
  tmp = set_latin1(field, latin1);
  return (tmp);
}
}
int id3_field_setfulllatin1(union id3_field *field , id3_latin1_t const   *latin1 ) 
{ int tmp ;

  {
  if (! field) {
    __assert_fail("field", "field.c", 512U, "id3_field_setfulllatin1");
  }
  if ((int )field->type != 2) {
    return (-1);
  }
  id3_field_finish(field);
  tmp = set_latin1(field, latin1);
  return (tmp);
}
}
static int set_string(union id3_field *field , id3_ucs4_t const   *string ) 
{ id3_ucs4_t *data ;

  {
  if ((unsigned int )string == (unsigned int )((id3_ucs4_t const   *)0)) {
    goto _L;
  } else {
    if ((*string) == 0UL) {
      _L: 
      data = (id3_ucs4_t *)0;
    } else {
      data = id3_ucs4_duplicate(string);
      if ((unsigned int )data == (unsigned int )((id3_ucs4_t *)0)) {
        return (-1);
      }
    }
  }
  field->string.ptr = data;
  return (0);
}
}
int id3_field_setstring(union id3_field *field , id3_ucs4_t const   *string ) 
{ id3_ucs4_t const   *ptr ;
  int tmp ;

  {
  if (! field) {
    __assert_fail("field", "field.c", 546U, "id3_field_setstring");
  }
  if ((int )field->type != 4) {
    return (-1);
  }
  id3_field_finish(field);
  if (string) {
    ptr = string;
    while ((*ptr)) {
      if ((*ptr) == 10UL) {
        return (-1);
      }
      ptr ++;
    }
  }
  tmp = set_string(field, string);
  return (tmp);
}
}
int id3_field_setfullstring(union id3_field *field , id3_ucs4_t const   *string ) 
{ int tmp ;

  {
  if (! field) {
    __assert_fail("field", "field.c", 571U, "id3_field_setfullstring");
  }
  if ((int )field->type != 5) {
    return (-1);
  }
  id3_field_finish(field);
  tmp = set_string(field, string);
  return (tmp);
}
}
int id3_field_setstrings(union id3_field *field , unsigned int length , id3_ucs4_t **ptrs ) 
{ id3_ucs4_t **strings ;
  unsigned int i ;
  unsigned int tmp ;

  {
  if (! field) {
    __assert_fail("field", "field.c", 591U, "id3_field_setstrings");
  }
  if ((int )field->type != 6) {
    return (-1);
  }
  id3_field_finish(field);
  if (length == 0U) {
    return (0);
  }
  strings = (id3_ucs4_t **)malloc(length * sizeof((*strings)));
  if ((unsigned int )strings == (unsigned int )((id3_ucs4_t **)0)) {
    return (-1);
  }
  i = 0U;
  while (i < length) {
    (*(strings + i)) = id3_ucs4_duplicate((id3_ucs4_t const   *)(*(ptrs + i)));
    if ((unsigned int )(*(strings + i)) == (unsigned int )((id3_ucs4_t *)0)) {
      while (1) {
        tmp = i;
        i --;
        if (! tmp) {
          break;
        }
        free((void *)(*(strings + i)));
      }
      free((void *)strings);
      return (-1);
    }
    i ++;
  }
  field->stringlist.strings = strings;
  field->stringlist.nstrings = length;
  return (0);
}
}
int id3_field_addstring(union id3_field *field , id3_ucs4_t const   *string ) 
{ id3_ucs4_t *new ;
  id3_ucs4_t **strings ;
  unsigned int tmp ;

  {
  if (! field) {
    __assert_fail("field", "field.c", 630U, "id3_field_addstring");
  }
  if ((int )field->type != 6) {
    return (-1);
  }
  if ((unsigned int )string == (unsigned int )((id3_ucs4_t const   *)0)) {
    string = id3_ucs4_empty;
  }
  new = id3_ucs4_duplicate(string);
  if ((unsigned int )new == (unsigned int )((id3_ucs4_t *)0)) {
    return (-1);
  }
  strings = (id3_ucs4_t **)realloc((void *)field->stringlist.strings, (field->stringlist.nstrings +
                                                                       1U) * sizeof((*strings)));
  if ((unsigned int )strings == (unsigned int )((id3_ucs4_t **)0)) {
    free((void *)new);
    return (-1);
  }
  field->stringlist.strings = strings;
  tmp = field->stringlist.nstrings;
  field->stringlist.nstrings ++;
  (*(field->stringlist.strings + tmp)) = new;
  return (0);
}
}
int id3_field_setlanguage(union id3_field *field , char const   *language ) 
{ size_t tmp ;

  {
  if (! field) {
    __assert_fail("field", "field.c", 661U, "id3_field_setlanguage");
  }
  if ((int )field->type != 7) {
    return (-1);
  }
  id3_field_finish(field);
  if (language) {
    tmp = strlen(language);
    if (tmp != 3U) {
      return (-1);
    }
    strcpy((char * __restrict  )(field->immediate.value), (char const   * __restrict  )language);
  }
  return (0);
}
}
int id3_field_setframeid(union id3_field *field , char const   *id ) 
{ int tmp ;

  {
  if (! field) {
    __assert_fail("field", "field.c", 684U, "id3_field_setframeid");
  }
  if ((int )field->type != 8) {
    goto _L;
  } else {
    tmp = id3_frame_validid(id);
    if (! tmp) {
      _L: 
      return (-1);
    }
  }
  id3_field_finish(field);
  field->immediate.value[0] = (char )(*(id + 0));
  field->immediate.value[1] = (char )(*(id + 1));
  field->immediate.value[2] = (char )(*(id + 2));
  field->immediate.value[3] = (char )(*(id + 3));
  field->immediate.value[4] = (char)0;
  return (0);
}
}
int id3_field_setbinarydata(union id3_field *field , id3_byte_t const   *data , id3_length_t length ) 
{ id3_byte_t *mem ;

  {
  if (! field) {
    __assert_fail("field", "field.c", 710U, "id3_field_setbinarydata");
  }
  if ((int )field->type != 15) {
    return (-1);
  }
  id3_field_finish(field);
  if (length == 0UL) {
    mem = (id3_byte_t *)0;
  } else {
    mem = (id3_byte_t *)malloc((unsigned int )length);
    if ((unsigned int )mem == (unsigned int )((id3_byte_t *)0)) {
      return (-1);
    }
    if (! data) {
      __assert_fail("data", "field.c", 724U, "id3_field_setbinarydata");
    }
    memcpy((void * __restrict  )mem, (void const   * __restrict  )data, (unsigned int )length);
  }
  field->binary.data = mem;
  field->binary.length = length;
  return (0);
}
}
long id3_field_getint(union id3_field  const  *field ) 
{ 

  {
  if (! field) {
    __assert_fail("field", "field.c", 741U, "id3_field_getint");
  }
  if ((int )field->type != 10) {
    if ((int )field->type != 11) {
      if ((int )field->type != 12) {
        if ((int )field->type != 13) {
          return (-1L);
        } else {
          goto _L___1;
        }
      } else {
        goto _L___1;
      }
    } else {
      goto _L___1;
    }
  } else {
    _L___1: ;
  }
  return (field->number.value);
}
}
enum id3_field_textencoding id3_field_gettextencoding(union id3_field  const  *field ) 
{ 

  {
  if (! field) {
    __assert_fail("field", "field.c", 759U, "id3_field_gettextencoding");
  }
  if ((int )field->type != 0) {
    return ((enum id3_field_textencoding )-1);
  }
  return ((enum id3_field_textencoding )field->number.value);
}
}
id3_latin1_t const   *id3_field_getlatin1(union id3_field  const  *field ) 
{ id3_latin1_t const   *tmp ;

  {
  if (! field) {
    __assert_fail("field", "field.c", 773U, "id3_field_getlatin1");
  }
  if ((int )field->type != 1) {
    return ((id3_latin1_t const   *)0);
  }
  if (field->latin1.ptr) {
    tmp = (id3_latin1_t const   *)field->latin1.ptr;
  } else {
    tmp = (id3_latin1_t const   *)"";
  }
  return (tmp);
}
}
id3_latin1_t const   *id3_field_getfulllatin1(union id3_field  const  *field ) 
{ id3_latin1_t const   *tmp ;

  {
  if (! field) {
    __assert_fail("field", "field.c", 787U, "id3_field_getfulllatin1");
  }
  if ((int )field->type != 2) {
    return ((id3_latin1_t const   *)0);
  }
  if (field->latin1.ptr) {
    tmp = (id3_latin1_t const   *)field->latin1.ptr;
  } else {
    tmp = (id3_latin1_t const   *)"";
  }
  return (tmp);
}
}
id3_ucs4_t const   *id3_field_getstring(union id3_field  const  *field ) 
{ id3_ucs4_t const   *tmp ;

  {
  if (! field) {
    __assert_fail("field", "field.c", 801U, "id3_field_getstring");
  }
  if ((int )field->type != 4) {
    return ((id3_ucs4_t const   *)0);
  }
  if (field->string.ptr) {
    tmp = (id3_ucs4_t const   *)field->string.ptr;
  } else {
    tmp = id3_ucs4_empty;
  }
  return (tmp);
}
}
id3_ucs4_t const   *id3_field_getfullstring(union id3_field  const  *field ) 
{ id3_ucs4_t const   *tmp ;

  {
  if (! field) {
    __assert_fail("field", "field.c", 815U, "id3_field_getfullstring");
  }
  if ((int )field->type != 5) {
    return ((id3_ucs4_t const   *)0);
  }
  if (field->string.ptr) {
    tmp = (id3_ucs4_t const   *)field->string.ptr;
  } else {
    tmp = id3_ucs4_empty;
  }
  return (tmp);
}
}
unsigned int id3_field_getnstrings(union id3_field  const  *field ) 
{ 

  {
  if (! field) {
    __assert_fail("field", "field.c", 829U, "id3_field_getnstrings");
  }
  if ((int )field->type != 6) {
    return (0U);
  }
  return (field->stringlist.nstrings);
}
}
id3_ucs4_t const   *id3_field_getstrings(union id3_field  const  *field , unsigned int index___0 ) 
{ id3_ucs4_t const   *string ;
  id3_ucs4_t const   *tmp ;

  {
  if (! field) {
    __assert_fail("field", "field.c", 846U, "id3_field_getstrings");
  }
  if ((int )field->type != 6) {
    goto _L;
  } else {
    if (index___0 >= field->stringlist.nstrings) {
      _L: 
      return ((id3_ucs4_t const   *)0);
    }
  }
  string = (id3_ucs4_t const   *)(*(field->stringlist.strings + index___0));
  if (string) {
    tmp = string;
  } else {
    tmp = id3_ucs4_empty;
  }
  return (tmp);
}
}
char const   *id3_field_getframeid(union id3_field  const  *field ) 
{ 

  {
  if (! field) {
    __assert_fail("field", "field.c", 863U, "id3_field_getframeid");
  }
  if ((int )field->type != 8) {
    return ((char const   *)0);
  }
  return ((char const   *)(field->immediate.value));
}
}
static id3_byte_t const   empty  ;
id3_byte_t const   *id3_field_getbinarydata(union id3_field  const  *field , id3_length_t *length ) 
{ id3_byte_t const   *tmp ;

  {
  if (field) {
    if (! length) {
      goto _L;
    }
  } else {
    _L: 
    __assert_fail("field && length", "field.c", 880U, "id3_field_getbinarydata");
  }
  if ((int )field->type != 15) {
    return ((id3_byte_t const   *)0);
  }
  if (field->binary.length == 0UL) {
    goto _L___0;
  } else {
    if (field->binary.data) {
      _L___0: ;
    } else {
      __assert_fail("field->binary.length == 0 || field->binary.data", "field.c",
                    885U, "id3_field_getbinarydata");
    }
  }
  (*length) = field->binary.length;
  if (field->binary.data) {
    tmp = (id3_byte_t const   *)field->binary.data;
  } else {
    tmp = & empty;
  }
  return (tmp);
}
}
#pragma merger(0,"/tmp/cil-BgGNSf2B.i","-Wall -g -O2")
extern int memcmp(void const   *__s1 , void const   *__s2 , size_t __n )  __attribute__((__pure__)) ;
extern int strcmp(char const   *__s1 , char const   *__s2 )  __attribute__((__pure__)) ;
extern int strncmp(char const   *__s1 , char const   *__s2 , size_t __n )  __attribute__((__pure__)) ;
struct id3_frametype  const  id3_frametype_text ;
struct id3_frametype  const  id3_frametype_url ;
struct id3_frametype  const  id3_frametype_experimental ;
struct id3_frametype  const  id3_frametype_unknown ;
struct id3_frametype  const  id3_frametype_obsolete ;
__inline struct id3_frametype  const  *id3_frametype_lookup(char const   *str , unsigned int len ) ;
static enum id3_field_type  const  fields_UFID[2]  = {      (enum id3_field_type  const  )1,      (enum id3_field_type  const  )15};
static enum id3_field_type  const  fields_TXXX[3]  = {      (enum id3_field_type  const  )0,      (enum id3_field_type  const  )4,      (enum id3_field_type  const  )4};
static enum id3_field_type  const  fields_WXXX[3]  = {      (enum id3_field_type  const  )0,      (enum id3_field_type  const  )4,      (enum id3_field_type  const  )1};
static enum id3_field_type  const  fields_MCDI[1]  = {      (enum id3_field_type  const  )15};
static enum id3_field_type  const  fields_ETCO[2]  = {      (enum id3_field_type  const  )10,      (enum id3_field_type  const  )15};
static enum id3_field_type  const  fields_MLLT[6]  = {      (enum id3_field_type  const  )11,      (enum id3_field_type  const  )12,      (enum id3_field_type  const  )12,      (enum id3_field_type  const  )10, 
        (enum id3_field_type  const  )10,      (enum id3_field_type  const  )15};
static enum id3_field_type  const  fields_SYTC[2]  = {      (enum id3_field_type  const  )10,      (enum id3_field_type  const  )15};
static enum id3_field_type  const  fields_USLT[4]  = {      (enum id3_field_type  const  )0,      (enum id3_field_type  const  )7,      (enum id3_field_type  const  )4,      (enum id3_field_type  const  )5};
static enum id3_field_type  const  fields_SYLT[6]  = {      (enum id3_field_type  const  )0,      (enum id3_field_type  const  )7,      (enum id3_field_type  const  )10,      (enum id3_field_type  const  )10, 
        (enum id3_field_type  const  )4,      (enum id3_field_type  const  )15};
static enum id3_field_type  const  fields_COMM[4]  = {      (enum id3_field_type  const  )0,      (enum id3_field_type  const  )7,      (enum id3_field_type  const  )4,      (enum id3_field_type  const  )5};
static enum id3_field_type  const  fields_RVA2[2]  = {      (enum id3_field_type  const  )1,      (enum id3_field_type  const  )15};
static enum id3_field_type  const  fields_EQU2[3]  = {      (enum id3_field_type  const  )10,      (enum id3_field_type  const  )1,      (enum id3_field_type  const  )15};
static enum id3_field_type  const  fields_RVRB[10]  = 
  {      (enum id3_field_type  const  )11,      (enum id3_field_type  const  )11,      (enum id3_field_type  const  )10,      (enum id3_field_type  const  )10, 
        (enum id3_field_type  const  )10,      (enum id3_field_type  const  )10,      (enum id3_field_type  const  )10,      (enum id3_field_type  const  )10, 
        (enum id3_field_type  const  )10,      (enum id3_field_type  const  )10};
static enum id3_field_type  const  fields_APIC[5]  = {      (enum id3_field_type  const  )0,      (enum id3_field_type  const  )1,      (enum id3_field_type  const  )10,      (enum id3_field_type  const  )4, 
        (enum id3_field_type  const  )15};
static enum id3_field_type  const  fields_GEOB[5]  = {      (enum id3_field_type  const  )0,      (enum id3_field_type  const  )1,      (enum id3_field_type  const  )4,      (enum id3_field_type  const  )4, 
        (enum id3_field_type  const  )15};
static enum id3_field_type  const  fields_PCNT[1]  = {      (enum id3_field_type  const  )14};
static enum id3_field_type  const  fields_POPM[3]  = {      (enum id3_field_type  const  )1,      (enum id3_field_type  const  )10,      (enum id3_field_type  const  )14};
static enum id3_field_type  const  fields_RBUF[3]  = {      (enum id3_field_type  const  )12,      (enum id3_field_type  const  )10,      (enum id3_field_type  const  )13};
static enum id3_field_type  const  fields_AENC[4]  = {      (enum id3_field_type  const  )1,      (enum id3_field_type  const  )11,      (enum id3_field_type  const  )11,      (enum id3_field_type  const  )15};
static enum id3_field_type  const  fields_LINK[3]  = {      (enum id3_field_type  const  )8,      (enum id3_field_type  const  )1,      (enum id3_field_type  const  )3};
static enum id3_field_type  const  fields_POSS[2]  = {      (enum id3_field_type  const  )10,      (enum id3_field_type  const  )15};
static enum id3_field_type  const  fields_USER[3]  = {      (enum id3_field_type  const  )0,      (enum id3_field_type  const  )7,      (enum id3_field_type  const  )4};
static enum id3_field_type  const  fields_OWNE[4]  = {      (enum id3_field_type  const  )0,      (enum id3_field_type  const  )1,      (enum id3_field_type  const  )9,      (enum id3_field_type  const  )4};
static enum id3_field_type  const  fields_COMR[9]  = 
  {      (enum id3_field_type  const  )0,      (enum id3_field_type  const  )1,      (enum id3_field_type  const  )9,      (enum id3_field_type  const  )1, 
        (enum id3_field_type  const  )10,      (enum id3_field_type  const  )4,      (enum id3_field_type  const  )4,      (enum id3_field_type  const  )1, 
        (enum id3_field_type  const  )15};
static enum id3_field_type  const  fields_ENCR[3]  = {      (enum id3_field_type  const  )1,      (enum id3_field_type  const  )10,      (enum id3_field_type  const  )15};
static enum id3_field_type  const  fields_GRID[3]  = {      (enum id3_field_type  const  )1,      (enum id3_field_type  const  )10,      (enum id3_field_type  const  )15};
static enum id3_field_type  const  fields_PRIV[2]  = {      (enum id3_field_type  const  )1,      (enum id3_field_type  const  )15};
static enum id3_field_type  const  fields_SIGN[2]  = {      (enum id3_field_type  const  )10,      (enum id3_field_type  const  )15};
static enum id3_field_type  const  fields_SEEK[1]  = {      (enum id3_field_type  const  )13};
static enum id3_field_type  const  fields_ASPI[5]  = {      (enum id3_field_type  const  )13,      (enum id3_field_type  const  )13,      (enum id3_field_type  const  )11,      (enum id3_field_type  const  )10, 
        (enum id3_field_type  const  )15};
static enum id3_field_type  const  fields_text[2]  = {      (enum id3_field_type  const  )0,      (enum id3_field_type  const  )6};
static enum id3_field_type  const  fields_url[1]  = {      (enum id3_field_type  const  )1};
static enum id3_field_type  const  fields_unknown[1]  = {      (enum id3_field_type  const  )15};
static enum id3_field_type  const  fields_ZOBS[2]  = {      (enum id3_field_type  const  )8,      (enum id3_field_type  const  )15};
struct id3_frametype  const  id3_frametype_text  =    {(char const   *)0, sizeof(fields_text) / sizeof(fields_text[0]), fields_text,
    0, "Unknown text information frame"};
struct id3_frametype  const  id3_frametype_url  =    {(char const   *)0, sizeof(fields_url) / sizeof(fields_url[0]), fields_url, 0,
    "Unknown URL link frame"};
struct id3_frametype  const  id3_frametype_experimental  =    {(char const   *)0, sizeof(fields_unknown) / sizeof(fields_unknown[0]), fields_unknown,
    0, "Experimental frame"};
struct id3_frametype  const  id3_frametype_unknown  =    {(char const   *)0, sizeof(fields_unknown) / sizeof(fields_unknown[0]), fields_unknown,
    0, "Unknown frame"};
struct id3_frametype  const  id3_frametype_obsolete  =    {(char const   *)0, sizeof(fields_unknown) / sizeof(fields_unknown[0]), fields_unknown,
    24576, "Obsolete frame"};
__inline static unsigned int hash(char const   *str , unsigned int len ) ;
static unsigned char const   asso_values[257]  = 
  {      (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156, 
        (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156, 
        (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156, 
        (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156, 
        (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156, 
        (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156, 
        (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156, 
        (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156, 
        (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156, 
        (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156, 
        (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156, 
        (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156, 
        (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )43,      (unsigned char const   )4, 
        (unsigned char const   )47,      (unsigned char const   )49,      (unsigned char const   )156,      (unsigned char const   )156, 
        (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156, 
        (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156, 
        (unsigned char const   )156,      (unsigned char const   )31,      (unsigned char const   )53,      (unsigned char const   )3, 
        (unsigned char const   )15,      (unsigned char const   )3,      (unsigned char const   )24,      (unsigned char const   )25, 
        (unsigned char const   )10,      (unsigned char const   )52,      (unsigned char const   )69,      (unsigned char const   )34, 
        (unsigned char const   )23,      (unsigned char const   )30,      (unsigned char const   )1,      (unsigned char const   )5, 
        (unsigned char const   )10,      (unsigned char const   )62,      (unsigned char const   )20,      (unsigned char const   )0, 
        (unsigned char const   )28,      (unsigned char const   )28,      (unsigned char const   )22,      (unsigned char const   )19, 
        (unsigned char const   )47,      (unsigned char const   )3,      (unsigned char const   )10,      (unsigned char const   )156, 
        (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156, 
        (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156, 
        (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156, 
        (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156, 
        (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156, 
        (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156, 
        (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156, 
        (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156, 
        (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156, 
        (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156, 
        (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156, 
        (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156, 
        (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156, 
        (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156, 
        (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156, 
        (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156, 
        (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156, 
        (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156, 
        (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156, 
        (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156, 
        (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156, 
        (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156, 
        (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156, 
        (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156, 
        (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156, 
        (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156, 
        (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156, 
        (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156, 
        (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156, 
        (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156, 
        (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156, 
        (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156, 
        (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156, 
        (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156, 
        (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156, 
        (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156, 
        (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156, 
        (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156, 
        (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156, 
        (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156, 
        (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156,      (unsigned char const   )156, 
        (unsigned char const   )156};
__inline static unsigned int hash(char const   *str , unsigned int len ) 
{ 

  {
  return ((unsigned int )((((int const   )asso_values[(int )((unsigned char )(*(str +
                                                                                3))) +
                                                      1] + (int const   )asso_values[(unsigned char )(*(str +
                                                                                                        2))]) +
                           (int const   )asso_values[(unsigned char )(*(str + 1))]) +
                          (int const   )asso_values[(unsigned char )(*(str + 0))]));
}
}
static struct id3_frametype  const  wordlist[84]  = 
  {      {"ENCR", sizeof(fields_ENCR) / sizeof(fields_ENCR[0]), fields_ENCR, 0, "Encryption method registration"}, 
        {"POPM",
      sizeof(fields_POPM) / sizeof(fields_POPM[0]), fields_POPM, 0, "Popularimeter"}, 
        {"WCOM",
      sizeof(fields_url) / sizeof(fields_url[0]), fields_url, 0, "Commercial information"}, 
        {"SEEK",
      sizeof(fields_SEEK) / sizeof(fields_SEEK[0]), fields_SEEK, 8192, "Seek frame"}, 
        {"USER",
      sizeof(fields_USER) / sizeof(fields_USER[0]), fields_USER, 0, "Terms of use"}, 
        {"GEOB",
      sizeof(fields_GEOB) / sizeof(fields_GEOB[0]), fields_GEOB, 0, "General encapsulated object"}, 
        {"TCOM",
      sizeof(fields_text) / sizeof(fields_text[0]), fields_text, 0, "Composer"}, 
        {"COMR", sizeof(fields_COMR) / sizeof(fields_COMR[0]), fields_COMR, 0, "Commercial frame"}, 
        {"COMM",
      sizeof(fields_COMM) / sizeof(fields_COMM[0]), fields_COMM, 0, "Comments"}, 
        {"TCON", sizeof(fields_text) / sizeof(fields_text[0]), fields_text, 0, "Content type"}, 
        {"PCNT",
      sizeof(fields_PCNT) / sizeof(fields_PCNT[0]), fields_PCNT, 0, "Play counter"}, 
        {"POSS",
      sizeof(fields_POSS) / sizeof(fields_POSS[0]), fields_POSS, 8192, "Position synchronisation frame"}, 
        {"ETCO",
      sizeof(fields_ETCO) / sizeof(fields_ETCO[0]), fields_ETCO, 8192, "Event timing codes"}, 
        {"TPE2",
      sizeof(fields_text) / sizeof(fields_text[0]), fields_text, 0, "Band/orchestra/accompaniment"}, 
        {"SYTC",
      sizeof(fields_SYTC) / sizeof(fields_SYTC[0]), fields_SYTC, 8192, "Synchronised tempo codes"}, 
        {"TENC",
      sizeof(fields_text) / sizeof(fields_text[0]), fields_text, 8192, "Encoded by"}, 
        {"TDOR",
      sizeof(fields_text) / sizeof(fields_text[0]), fields_text, 0, "Original release time"}, 
        {"OWNE",
      sizeof(fields_OWNE) / sizeof(fields_OWNE[0]), fields_OWNE, 0, "Ownership frame"}, 
        {"AENC",
      sizeof(fields_AENC) / sizeof(fields_AENC[0]), fields_AENC, 8192, "Audio encryption"}, 
        {"TDEN",
      sizeof(fields_text) / sizeof(fields_text[0]), fields_text, 0, "Encoding time"}, 
        {"TSSE",
      sizeof(fields_text) / sizeof(fields_text[0]), fields_text, 0, "Software/hardware and settings used for encoding"}, 
        {"TRSN",
      sizeof(fields_text) / sizeof(fields_text[0]), fields_text, 0, "Internet radio station name"}, 
        {"SYLT",
      sizeof(fields_SYLT) / sizeof(fields_SYLT[0]), fields_SYLT, 8192, "Synchronised lyric/text"}, 
        {"WOAR",
      sizeof(fields_url) / sizeof(fields_url[0]), fields_url, 0, "Official artist/performer webpage"}, 
        {"TSST",
      sizeof(fields_text) / sizeof(fields_text[0]), fields_text, 0, "Set subtitle"}, 
        {"TOWN",
      sizeof(fields_text) / sizeof(fields_text[0]), fields_text, 0, "File owner/licensee"}, 
        {"TRSO",
      sizeof(fields_text) / sizeof(fields_text[0]), fields_text, 0, "Internet radio station owner"}, 
        {"TLEN",
      sizeof(fields_text) / sizeof(fields_text[0]), fields_text, 8192, "Length"}, 
        {"WPUB", sizeof(fields_url) / sizeof(fields_url[0]), fields_url, 0, "Publishers official webpage"}, 
        {"TSOT",
      sizeof(fields_text) / sizeof(fields_text[0]), fields_text, 0, "Title sort order"}, 
        {"TOFN",
      sizeof(fields_text) / sizeof(fields_text[0]), fields_text, 0, "Original filename"}, 
        {"TSRC",
      sizeof(fields_text) / sizeof(fields_text[0]), fields_text, 0, "ISRC (international standard recording code)"}, 
        {"TMED",
      sizeof(fields_text) / sizeof(fields_text[0]), fields_text, 0, "Media type"}, 
        {"RVRB",
      sizeof(fields_RVRB) / sizeof(fields_RVRB[0]), fields_RVRB, 0, "Reverb"}, 
        {"TOLY", sizeof(fields_text) / sizeof(fields_text[0]), fields_text, 0, "Original lyricist(s)/text writer(s)"}, 
        {"TOPE",
      sizeof(fields_text) / sizeof(fields_text[0]), fields_text, 0, "Original artist(s)/performer(s)"}, 
        {"TPRO",
      sizeof(fields_text) / sizeof(fields_text[0]), fields_text, 0, "Produced notice"}, 
        {"TPUB",
      sizeof(fields_text) / sizeof(fields_text[0]), fields_text, 0, "Publisher"}, 
        {"WPAY", sizeof(fields_url) / sizeof(fields_url[0]), fields_url, 0, "Payment"}, 
        {"TPOS",
      sizeof(fields_text) / sizeof(fields_text[0]), fields_text, 0, "Part of a set"}, 
        {"WORS",
      sizeof(fields_url) / sizeof(fields_url[0]), fields_url, 0, "Official Internet radio station homepage"}, 
        {"TMOO",
      sizeof(fields_text) / sizeof(fields_text[0]), fields_text, 0, "Mood"}, 
        {"TRCK", sizeof(fields_text) / sizeof(fields_text[0]), fields_text, 0, "Track number/position in set"}, 
        {"TKEY",
      sizeof(fields_text) / sizeof(fields_text[0]), fields_text, 0, "Initial key"}, 
        {"TDLY",
      sizeof(fields_text) / sizeof(fields_text[0]), fields_text, 0, "Playlist delay"}, 
        {"RVA2",
      sizeof(fields_RVA2) / sizeof(fields_RVA2[0]), fields_RVA2, 8192, "Relative volume adjustment (2)"}, 
        {"TDRC",
      sizeof(fields_text) / sizeof(fields_text[0]), fields_text, 0, "Recording time"}, 
        {"USLT",
      sizeof(fields_USLT) / sizeof(fields_USLT[0]), fields_USLT, 0, "Unsynchronised lyric/text transcription"}, 
        {"WOAF",
      sizeof(fields_url) / sizeof(fields_url[0]), fields_url, 0, "Official audio file webpage"}, 
        {"TDTG",
      sizeof(fields_text) / sizeof(fields_text[0]), fields_text, 0, "Tagging time"}, 
        {"SIGN",
      sizeof(fields_SIGN) / sizeof(fields_SIGN[0]), fields_SIGN, 0, "Signature frame"}, 
        {"WOAS",
      sizeof(fields_url) / sizeof(fields_url[0]), fields_url, 0, "Official audio source webpage"}, 
        {"TPE1",
      sizeof(fields_text) / sizeof(fields_text[0]), fields_text, 0, "Lead performer(s)/soloist(s)"}, 
        {"TALB",
      sizeof(fields_text) / sizeof(fields_text[0]), fields_text, 0, "Album/movie/show title"}, 
        {"TSOA",
      sizeof(fields_text) / sizeof(fields_text[0]), fields_text, 0, "Album sort order"}, 
        {"TLAN",
      sizeof(fields_text) / sizeof(fields_text[0]), fields_text, 0, "Language(s)"}, 
        {"TPE3",
      sizeof(fields_text) / sizeof(fields_text[0]), fields_text, 0, "Conductor/performer refinement"}, 
        {"WCOP",
      sizeof(fields_url) / sizeof(fields_url[0]), fields_url, 0, "Copyright/legal information"}, 
        {"TPE4",
      sizeof(fields_text) / sizeof(fields_text[0]), fields_text, 0, "Interpreted, remixed, or otherwise modified by"}, 
        {"TMCL",
      sizeof(fields_text) / sizeof(fields_text[0]), fields_text, 0, "Musician credits list"}, 
        {"TBPM",
      sizeof(fields_text) / sizeof(fields_text[0]), fields_text, 0, "BPM (beats per minute)"}, 
        {"TDRL",
      sizeof(fields_text) / sizeof(fields_text[0]), fields_text, 0, "Release time"}, 
        {"TOAL",
      sizeof(fields_text) / sizeof(fields_text[0]), fields_text, 0, "Original album/movie/show title"}, 
        {"TSOP",
      sizeof(fields_text) / sizeof(fields_text[0]), fields_text, 0, "Performer sort order"}, 
        {"ZOBS",
      sizeof(fields_ZOBS) / sizeof(fields_ZOBS[0]), fields_ZOBS, 24576, "Obsolete frame"}, 
        {"EQU2",
      sizeof(fields_EQU2) / sizeof(fields_EQU2[0]), fields_EQU2, 8192, "Equalisation (2)"}, 
        {"TCOP",
      sizeof(fields_text) / sizeof(fields_text[0]), fields_text, 0, "Copyright message"}, 
        {"LINK",
      sizeof(fields_LINK) / sizeof(fields_LINK[0]), fields_LINK, 0, "Linked information"}, 
        {"GRID",
      sizeof(fields_GRID) / sizeof(fields_GRID[0]), fields_GRID, 0, "Group identification registration"}, 
        {"PRIV",
      sizeof(fields_PRIV) / sizeof(fields_PRIV[0]), fields_PRIV, 0, "Private frame"}, 
        {"TFLT",
      sizeof(fields_text) / sizeof(fields_text[0]), fields_text, 0, "File type"}, 
        {"MLLT", sizeof(fields_MLLT) / sizeof(fields_MLLT[0]), fields_MLLT, 8192, "MPEG location lookup table"}, 
        {"TEXT",
      sizeof(fields_text) / sizeof(fields_text[0]), fields_text, 0, "Lyricist/text writer"}, 
        {"UFID",
      sizeof(fields_UFID) / sizeof(fields_UFID[0]), fields_UFID, 0, "Unique file identifier"}, 
        {"APIC",
      sizeof(fields_APIC) / sizeof(fields_APIC[0]), fields_APIC, 0, "Attached picture"}, 
        {"ASPI",
      sizeof(fields_ASPI) / sizeof(fields_ASPI[0]), fields_ASPI, 8192, "Audio seek point index"}, 
        {"TIT2",
      sizeof(fields_text) / sizeof(fields_text[0]), fields_text, 0, "Title/songname/content description"}, 
        {"WXXX",
      sizeof(fields_WXXX) / sizeof(fields_WXXX[0]), fields_WXXX, 0, "User defined URL link frame"}, 
        {"MCDI",
      sizeof(fields_MCDI) / sizeof(fields_MCDI[0]), fields_MCDI, 0, "Music CD identifier"}, 
        {"TIPL",
      sizeof(fields_text) / sizeof(fields_text[0]), fields_text, 0, "Involved people list"}, 
        {"TXXX",
      sizeof(fields_TXXX) / sizeof(fields_TXXX[0]), fields_TXXX, 0, "User defined text information frame"}, 
        {"RBUF",
      sizeof(fields_RBUF) / sizeof(fields_RBUF[0]), fields_RBUF, 0, "Recommended buffer size"}, 
        {"TIT1",
      sizeof(fields_text) / sizeof(fields_text[0]), fields_text, 0, "Content group description"}, 
        {"TIT3",
      sizeof(fields_text) / sizeof(fields_text[0]), fields_text, 0, "Subtitle/description refinement"}};
static short const   lookup[156]  = 
  {      (short const   )-1,      (short const   )-1,      (short const   )-1,      (short const   )-1, 
        (short const   )-1,      (short const   )-1,      (short const   )-1,      (short const   )0, 
        (short const   )-1,      (short const   )-1,      (short const   )-1,      (short const   )-1, 
        (short const   )-1,      (short const   )-1,      (short const   )-1,      (short const   )-1, 
        (short const   )-1,      (short const   )-1,      (short const   )-1,      (short const   )-1, 
        (short const   )-1,      (short const   )-1,      (short const   )-1,      (short const   )-1, 
        (short const   )-1,      (short const   )-1,      (short const   )1,      (short const   )-1, 
        (short const   )2,      (short const   )3,      (short const   )-1,      (short const   )4, 
        (short const   )-1,      (short const   )-1,      (short const   )-1,      (short const   )-1, 
        (short const   )5,      (short const   )6,      (short const   )7,      (short const   )8, 
        (short const   )-1,      (short const   )9,      (short const   )10,      (short const   )11, 
        (short const   )12,      (short const   )13,      (short const   )14,      (short const   )15, 
        (short const   )16,      (short const   )17,      (short const   )18,      (short const   )19, 
        (short const   )20,      (short const   )21,      (short const   )22,      (short const   )23, 
        (short const   )24,      (short const   )25,      (short const   )26,      (short const   )27, 
        (short const   )28,      (short const   )29,      (short const   )30,      (short const   )31, 
        (short const   )32,      (short const   )33,      (short const   )34,      (short const   )35, 
        (short const   )36,      (short const   )37,      (short const   )38,      (short const   )39, 
        (short const   )40,      (short const   )41,      (short const   )42,      (short const   )43, 
        (short const   )44,      (short const   )45,      (short const   )46,      (short const   )47, 
        (short const   )48,      (short const   )49,      (short const   )50,      (short const   )51, 
        (short const   )52,      (short const   )53,      (short const   )54,      (short const   )55, 
        (short const   )56,      (short const   )57,      (short const   )58,      (short const   )59, 
        (short const   )60,      (short const   )61,      (short const   )62,      (short const   )63, 
        (short const   )64,      (short const   )65,      (short const   )66,      (short const   )67, 
        (short const   )68,      (short const   )69,      (short const   )-1,      (short const   )70, 
        (short const   )71,      (short const   )-1,      (short const   )72,      (short const   )73, 
        (short const   )74,      (short const   )-1,      (short const   )75,      (short const   )-1, 
        (short const   )76,      (short const   )-1,      (short const   )-1,      (short const   )-1, 
        (short const   )77,      (short const   )78,      (short const   )-1,      (short const   )-1, 
        (short const   )79,      (short const   )-1,      (short const   )-1,      (short const   )-1, 
        (short const   )-1,      (short const   )80,      (short const   )81,      (short const   )-1, 
        (short const   )-1,      (short const   )-1,      (short const   )-1,      (short const   )-1, 
        (short const   )-1,      (short const   )-1,      (short const   )-1,      (short const   )-1, 
        (short const   )-1,      (short const   )-1,      (short const   )-1,      (short const   )-1, 
        (short const   )-1,      (short const   )-1,      (short const   )-1,      (short const   )-1, 
        (short const   )-1,      (short const   )-1,      (short const   )-1,      (short const   )-1, 
        (short const   )-1,      (short const   )-1,      (short const   )-1,      (short const   )82, 
        (short const   )-1,      (short const   )-1,      (short const   )-1,      (short const   )83};
__inline struct id3_frametype  const  *id3_frametype_lookup(char const   *str , unsigned int len ) 
{ register int key ;
  int tmp ;
  register int index___0 ;
  register char const   *s ;
  int tmp___65 ;
  size_t __s1_len___0 ;
  size_t __s2_len___0 ;
  int tmp___96 ;
  size_t tmp___97 ;
  register int __result___85 ;
  unsigned char const   *__s2___14 ;
  register int __result___86 ;
  int tmp___112 ;
  register int __result___93 ;
  unsigned char const   *__s1___30 ;
  register int __result___94 ;
  int tmp___119 ;
  int tmp___120 ;
  int tmp___121 ;
  int tmp___122 ;
  int tmp___123 ;
  int tmp___124 ;
  int tmp___125 ;
  int tmp___126 ;
  size_t tmp___127 ;
  int tmp___128 ;
  size_t tmp___129 ;

  {
  if (len <= 4U) {
    if (len >= 4U) {
      tmp = (int )hash(str, len);
      key = tmp;
      if (key <= 155) {
        if (key >= 0) {
          index___0 = (int )lookup[key];
          if (index___0 >= 0) {
            s = wordlist[index___0].id;
            if ((int const   )(*str) == (int const   )(*s)) {
              tmp___125 = __builtin_constant_p(len - 1U);
              if (tmp___125) {
                tmp___126 = __builtin_constant_p(str + 1);
                if (tmp___126) {
                  tmp___127 = strlen(str + 1);
                  if (tmp___127 < len - 1U) {
                    goto _L___352;
                  } else {
                    goto _L___354;
                  }
                } else {
                  _L___354: 
                  tmp___128 = __builtin_constant_p(s + 1);
                  if (tmp___128) {
                    tmp___129 = strlen(s + 1);
                    if (tmp___129 < len - 1U) {
                      _L___352: 
                      tmp___122 = __builtin_constant_p(str + 1);
                      if (tmp___122) {
                        tmp___123 = __builtin_constant_p(s + 1);
                        if (tmp___123) {
                          __s1_len___0 = strlen(str + 1);
                          __s2_len___0 = strlen(s + 1);
                          if (! ((unsigned int )((void const   *)((str + 1) + 1)) -
                                 (unsigned int )((void const   *)(str + 1)) == 1U)) {
                            goto _L___348;
                          } else {
                            if (__s1_len___0 >= 4U) {
                              _L___348: 
                              if (! ((unsigned int )((void const   *)((s + 1) + 1)) -
                                     (unsigned int )((void const   *)(s + 1)) == 1U)) {
                                goto _L___347;
                              } else {
                                if (__s2_len___0 >= 4U) {
                                  _L___347: 
                                  tmp___124 = 1;
                                } else {
                                  goto _L___346;
                                }
                              }
                            } else {
                              _L___346: 
                              tmp___124 = 0;
                            }
                          }
                          if (tmp___124) {
                            if (__s1_len___0 < __s2_len___0) {
                              tmp___97 = __s1_len___0;
                            } else {
                              tmp___97 = __s2_len___0;
                            }
                            tmp___96 = memcmp((void const   *)(str + 1), (void const   *)(s +
                                                                                          1),
                                              tmp___97 + 1U);
                          } else {
                            goto _L___350;
                          }
                        } else {
                          goto _L___350;
                        }
                      } else {
                        _L___350: 
                        tmp___121 = __builtin_constant_p(str + 1);
                        if (tmp___121) {
                          if ((unsigned int )((void const   *)((str + 1) + 1)) - (unsigned int )((void const   *)(str +
                                                                                                                  1)) ==
                              1U) {
                            __s1_len___0 = strlen(str + 1);
                            if (__s1_len___0 < 4U) {
                              tmp___112 = __builtin_constant_p(s + 1);
                              if (tmp___112) {
                                if ((unsigned int )((void const   *)((s + 1) + 1)) -
                                    (unsigned int )((void const   *)(s + 1)) == 1U) {
                                  __result___85 = (int )((int const   )(*((unsigned char const   *)(str +
                                                                                                    1) +
                                                                          0)) - (int const   )(*((unsigned char const   *)(s +
                                                                                                                           1) +
                                                                                                 0)));
                                  if (__s1_len___0 > 0U) {
                                    if (__result___85 == 0) {
                                      __result___85 = (int )((int const   )(*((unsigned char const   *)(str +
                                                                                                        1) +
                                                                              1)) -
                                                             (int const   )(*((unsigned char const   *)(s +
                                                                                                        1) +
                                                                              1)));
                                      if (__s1_len___0 > 1U) {
                                        if (__result___85 == 0) {
                                          __result___85 = (int )((int const   )(*((unsigned char const   *)(str +
                                                                                                            1) +
                                                                                  2)) -
                                                                 (int const   )(*((unsigned char const   *)(s +
                                                                                                            1) +
                                                                                  2)));
                                          if (__s1_len___0 > 2U) {
                                            if (__result___85 == 0) {
                                              __result___85 = (int )((int const   )(*((unsigned char const   *)(str +
                                                                                                                1) +
                                                                                      3)) -
                                                                     (int const   )(*((unsigned char const   *)(s +
                                                                                                                1) +
                                                                                      3)));
                                            } else {
                                              goto _L___309;
                                            }
                                          } else {
                                            _L___309: ;
                                          }
                                        } else {
                                          goto _L___310;
                                        }
                                      } else {
                                        _L___310: ;
                                      }
                                    } else {
                                      goto _L___311;
                                    }
                                  } else {
                                    _L___311: ;
                                  }
                                  tmp___96 = __result___85;
                                } else {
                                  goto _L___315;
                                }
                              } else {
                                _L___315: 
                                __s2___14 = (unsigned char const   *)(s + 1);
                                __result___86 = (int )((int const   )(*((unsigned char const   *)(str +
                                                                                                  1) +
                                                                        0)) - (int const   )(*(__s2___14 +
                                                                                               0)));
                                if (__s1_len___0 > 0U) {
                                  if (__result___86 == 0) {
                                    __result___86 = (int )((int const   )(*((unsigned char const   *)(str +
                                                                                                      1) +
                                                                            1)) -
                                                           (int const   )(*(__s2___14 +
                                                                            1)));
                                    if (__s1_len___0 > 1U) {
                                      if (__result___86 == 0) {
                                        __result___86 = (int )((int const   )(*((unsigned char const   *)(str +
                                                                                                          1) +
                                                                                2)) -
                                                               (int const   )(*(__s2___14 +
                                                                                2)));
                                        if (__s1_len___0 > 2U) {
                                          if (__result___86 == 0) {
                                            __result___86 = (int )((int const   )(*((unsigned char const   *)(str +
                                                                                                              1) +
                                                                                    3)) -
                                                                   (int const   )(*(__s2___14 +
                                                                                    3)));
                                          } else {
                                            goto _L___312;
                                          }
                                        } else {
                                          _L___312: ;
                                        }
                                      } else {
                                        goto _L___313;
                                      }
                                    } else {
                                      _L___313: ;
                                    }
                                  } else {
                                    goto _L___314;
                                  }
                                } else {
                                  _L___314: ;
                                }
                                tmp___96 = __result___86;
                              }
                            } else {
                              goto _L___345;
                            }
                          } else {
                            goto _L___345;
                          }
                        } else {
                          _L___345: 
                          tmp___120 = __builtin_constant_p(s + 1);
                          if (tmp___120) {
                            if ((unsigned int )((void const   *)((s + 1) + 1)) - (unsigned int )((void const   *)(s +
                                                                                                                  1)) ==
                                1U) {
                              __s2_len___0 = strlen(s + 1);
                              if (__s2_len___0 < 4U) {
                                tmp___119 = __builtin_constant_p(str + 1);
                                if (tmp___119) {
                                  if ((unsigned int )((void const   *)((str + 1) +
                                                                       1)) - (unsigned int )((void const   *)(str +
                                                                                                              1)) ==
                                      1U) {
                                    __result___93 = (int )((int const   )(*((unsigned char const   *)(str +
                                                                                                      1) +
                                                                            0)) -
                                                           (int const   )(*((unsigned char const   *)(s +
                                                                                                      1) +
                                                                            0)));
                                    if (__s2_len___0 > 0U) {
                                      if (__result___93 == 0) {
                                        __result___93 = (int )((int const   )(*((unsigned char const   *)(str +
                                                                                                          1) +
                                                                                1)) -
                                                               (int const   )(*((unsigned char const   *)(s +
                                                                                                          1) +
                                                                                1)));
                                        if (__s2_len___0 > 1U) {
                                          if (__result___93 == 0) {
                                            __result___93 = (int )((int const   )(*((unsigned char const   *)(str +
                                                                                                              1) +
                                                                                    2)) -
                                                                   (int const   )(*((unsigned char const   *)(s +
                                                                                                              1) +
                                                                                    2)));
                                            if (__s2_len___0 > 2U) {
                                              if (__result___93 == 0) {
                                                __result___93 = (int )((int const   )(*((unsigned char const   *)(str +
                                                                                                                  1) +
                                                                                        3)) -
                                                                       (int const   )(*((unsigned char const   *)(s +
                                                                                                                  1) +
                                                                                        3)));
                                              } else {
                                                goto _L___335;
                                              }
                                            } else {
                                              _L___335: ;
                                            }
                                          } else {
                                            goto _L___336;
                                          }
                                        } else {
                                          _L___336: ;
                                        }
                                      } else {
                                        goto _L___337;
                                      }
                                    } else {
                                      _L___337: ;
                                    }
                                    tmp___96 = __result___93;
                                  } else {
                                    goto _L___341;
                                  }
                                } else {
                                  _L___341: 
                                  __s1___30 = (unsigned char const   *)(str + 1);
                                  __result___94 = (int )((int const   )(*(__s1___30 +
                                                                          0)) - (int const   )(*((unsigned char const   *)(s +
                                                                                                                           1) +
                                                                                                 0)));
                                  if (__s2_len___0 > 0U) {
                                    if (__result___94 == 0) {
                                      __result___94 = (int )((int const   )(*(__s1___30 +
                                                                              1)) -
                                                             (int const   )(*((unsigned char const   *)(s +
                                                                                                        1) +
                                                                              1)));
                                      if (__s2_len___0 > 1U) {
                                        if (__result___94 == 0) {
                                          __result___94 = (int )((int const   )(*(__s1___30 +
                                                                                  2)) -
                                                                 (int const   )(*((unsigned char const   *)(s +
                                                                                                            1) +
                                                                                  2)));
                                          if (__s2_len___0 > 2U) {
                                            if (__result___94 == 0) {
                                              __result___94 = (int )((int const   )(*(__s1___30 +
                                                                                      3)) -
                                                                     (int const   )(*((unsigned char const   *)(s +
                                                                                                                1) +
                                                                                      3)));
                                            } else {
                                              goto _L___338;
                                            }
                                          } else {
                                            _L___338: ;
                                          }
                                        } else {
                                          goto _L___339;
                                        }
                                      } else {
                                        _L___339: ;
                                      }
                                    } else {
                                      goto _L___340;
                                    }
                                  } else {
                                    _L___340: ;
                                  }
                                  tmp___96 = __result___94;
                                }
                              } else {
                                goto _L___343;
                              }
                            } else {
                              goto _L___343;
                            }
                          } else {
                            _L___343: 
                            tmp___96 = strcmp(str + 1, s + 1);
                          }
                        }
                      }
                      tmp___65 = tmp___96;
                    } else {
                      goto _L___353;
                    }
                  } else {
                    _L___353: 
                    goto _L___351;
                  }
                }
              } else {
                _L___351: 
                tmp___65 = strncmp(str + 1, s + 1, len - 1U);
              }
              if (tmp___65) {
                goto _L___356;
              } else {
                if ((int const   )(*(s + len)) == 0) {
                  return (& wordlist[index___0]);
                } else {
                  goto _L___356;
                }
              }
            } else {
              _L___356: ;
            }
          }
        } else {
          goto _L___357;
        }
      } else {
        _L___357: ;
      }
    } else {
      goto _L___358;
    }
  } else {
    _L___358: ;
  }
  return ((struct id3_frametype  const  *)0);
}
}
#pragma merger(0,"/tmp/cil-fw3cXuWx.i","-Wall -g -O2")
int id3_tag_attachframe(struct id3_tag *tag , struct id3_frame *frame ) ;
struct id3_frame *id3_tag_findframe(struct id3_tag  const  *tag , char const   *id ,
                                    unsigned int index___0 ) ;
struct id3_frame *id3_frame_new(char const   *id ) ;
void id3_frame_delete(struct id3_frame *frame ) ;
__inline struct id3_compat  const  *id3_compat_lookup(char const   *str , unsigned int len ) ;
int id3_compat_fixup(struct id3_tag *tag ) ;
static int translate_TCON(struct id3_frame *frame , char const   *oldid , id3_byte_t const   *data ,
                          id3_length_t length ) ;
__inline static unsigned int hash___0(char const   *str , unsigned int len ) ;
static unsigned char const   asso_values___0[257]  = 
  {      (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128, 
        (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128, 
        (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128, 
        (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128, 
        (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128, 
        (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128, 
        (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128, 
        (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128, 
        (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128, 
        (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128, 
        (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128, 
        (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128, 
        (unsigned char const   )128,      (unsigned char const   )64,      (unsigned char const   )58,      (unsigned char const   )20, 
        (unsigned char const   )15,      (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128, 
        (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128, 
        (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128, 
        (unsigned char const   )128,      (unsigned char const   )10,      (unsigned char const   )18,      (unsigned char const   )3, 
        (unsigned char const   )6,      (unsigned char const   )1,      (unsigned char const   )47,      (unsigned char const   )0, 
        (unsigned char const   )128,      (unsigned char const   )42,      (unsigned char const   )62,      (unsigned char const   )30, 
        (unsigned char const   )31,      (unsigned char const   )0,      (unsigned char const   )19,      (unsigned char const   )52, 
        (unsigned char const   )10,      (unsigned char const   )24,      (unsigned char const   )8,      (unsigned char const   )30, 
        (unsigned char const   )5,      (unsigned char const   )3,      (unsigned char const   )30,      (unsigned char const   )8, 
        (unsigned char const   )25,      (unsigned char const   )47,      (unsigned char const   )3,      (unsigned char const   )128, 
        (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128, 
        (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128, 
        (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128, 
        (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128, 
        (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128, 
        (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128, 
        (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128, 
        (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128, 
        (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128, 
        (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128, 
        (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128, 
        (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128, 
        (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128, 
        (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128, 
        (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128, 
        (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128, 
        (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128, 
        (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128, 
        (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128, 
        (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128, 
        (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128, 
        (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128, 
        (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128, 
        (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128, 
        (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128, 
        (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128, 
        (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128, 
        (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128, 
        (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128, 
        (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128, 
        (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128, 
        (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128, 
        (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128, 
        (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128, 
        (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128, 
        (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128, 
        (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128, 
        (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128, 
        (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128, 
        (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128, 
        (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128,      (unsigned char const   )128, 
        (unsigned char const   )128};
__inline static unsigned int hash___0(char const   *str , unsigned int len ) 
{ register int hval ;

  {
  hval = 0;
  switch ((int )len) {
  default: 
  hval += (int )asso_values___0[(unsigned char )(*(str + 3))];
  case 3: 
  hval += (int )asso_values___0[(unsigned char )(*(str + 2))];
  case 2: 
  hval += (int )asso_values___0[(int )((unsigned char )(*(str + 1))) + 1];
  case 1: 
  hval += (int )asso_values___0[(unsigned char )(*(str + 0))];
  break;
  }
  return ((unsigned int )hval);
}
}
static struct id3_compat  const  wordlist___0[73]  = 
  {      {"TLE", "TLEN", (id3_compat_func_t *)0}, 
        {"ETC", "ETCO", (id3_compat_func_t *)0}, 
        {"ULT", "USLT", (id3_compat_func_t *)0}, 
        {"TYE", (char const   *)0, (id3_compat_func_t *)0}, 
        {"TFT", "TFLT", (id3_compat_func_t *)0}, 
        {"TCM", "TCOM", (id3_compat_func_t *)0}, 
        {"EQU", (char const   *)0, (id3_compat_func_t *)0}, 
        {"COM", "COMM", (id3_compat_func_t *)0}, 
        {"WCM", "WCOM", (id3_compat_func_t *)0}, 
        {"TLA", "TLAN", (id3_compat_func_t *)0}, 
        {"TDA", (char const   *)0, (id3_compat_func_t *)0}, 
        {"TYER", (char const   *)0, (id3_compat_func_t *)0}, 
        {"TBP", "TBPM", (id3_compat_func_t *)0}, 
        {"TCR", "TCOP", (id3_compat_func_t *)0}, 
        {"TOT", "TOAL", (id3_compat_func_t *)0}, 
        {"TDAT", (char const   *)0, (id3_compat_func_t *)0}, 
        {"EQUA", (char const   *)0, (id3_compat_func_t *)0}, 
        {"TOR", "TDOR", (id3_compat_func_t *)0}, 
        {"WCP", "WCOP", (id3_compat_func_t *)0}, 
        {"TOA", "TOPE", (id3_compat_func_t *)0}, 
        {"RVA", (char const   *)0, (id3_compat_func_t *)0}, 
        {"TT3", "TIT3", (id3_compat_func_t *)0}, 
        {"TMT", "TMED", (id3_compat_func_t *)0}, 
        {"POP", "POPM", (id3_compat_func_t *)0}, 
        {"MLL", "MLLT", (id3_compat_func_t *)0}, 
        {"RVAD", (char const   *)0, (id3_compat_func_t *)0}, 
        {"CRM", (char const   *)0, (id3_compat_func_t *)0}, 
        {"WAR", "WOAR", (id3_compat_func_t *)0}, 
        {"SLT", "SYLT", (id3_compat_func_t *)0}, 
        {"STC", "SYTC", (id3_compat_func_t *)0}, 
        {"TKE", "TKEY", (id3_compat_func_t *)0}, 
        {"TRC", "TSRC", (id3_compat_func_t *)0}, 
        {"TPA", "TPOS", (id3_compat_func_t *)0}, 
        {"TSS", "TSSE", (id3_compat_func_t *)0}, 
        {"TRD", (char const   *)0, (id3_compat_func_t *)0}, 
        {"CRA", "AENC", (id3_compat_func_t *)0}, 
        {"TP4", "TPE4", (id3_compat_func_t *)0}, 
        {"UFI", "UFID", (id3_compat_func_t *)0}, 
        {"TOL", "TOLY", (id3_compat_func_t *)0}, 
        {"TPB", "TPUB", (id3_compat_func_t *)0}, 
        {"MCI", "MCDI", (id3_compat_func_t *)0}, 
        {"TP3", "TPE3", (id3_compat_func_t *)0}, 
        {"WPB", "WPUB", (id3_compat_func_t *)0}, 
        {"TRDA", (char const   *)0, (id3_compat_func_t *)0}, 
        {"TSI", (char const   *)0, (id3_compat_func_t *)0}, 
        {"TDY", "TDLY", (id3_compat_func_t *)0}, 
        {"TAL", "TALB", (id3_compat_func_t *)0}, 
        {"TSIZ", (char const   *)0, (id3_compat_func_t *)0}, 
        {"WAS", "WOAS", (id3_compat_func_t *)0}, 
        {"TXT", "TEXT", (id3_compat_func_t *)0}, 
        {"CNT", "PCNT", (id3_compat_func_t *)0}, 
        {"TOF", "TOFN", (id3_compat_func_t *)0}, 
        {"TCO", "TCON", & translate_TCON}, 
        {"TRK", "TRCK", (id3_compat_func_t *)0}, 
        {"TT2", "TIT2", (id3_compat_func_t *)0}, 
        {"TIM", (char const   *)0, (id3_compat_func_t *)0}, 
        {"TIME", (char const   *)0, (id3_compat_func_t *)0}, 
        {"TORY", "TDOR", (id3_compat_func_t *)0}, 
        {"TEN", "TENC", (id3_compat_func_t *)0}, 
        {"TT1", "TIT1", (id3_compat_func_t *)0}, 
        {"WAF", "WOAF", (id3_compat_func_t *)0}, 
        {"PIC", "APIC", (id3_compat_func_t *)0}, 
        {"TXX", "TXXX", (id3_compat_func_t *)0}, 
        {"WXX", "WXXX", (id3_compat_func_t *)0}, 
        {"TCON", "TCON", & translate_TCON}, 
        {"REV", "RVRB", (id3_compat_func_t *)0}, 
        {"TP2", "TPE2", (id3_compat_func_t *)0}, 
        {"TP1", "TPE1", (id3_compat_func_t *)0}, 
        {"BUF", "RBUF", (id3_compat_func_t *)0}, 
        {"IPL", "TIPL", (id3_compat_func_t *)0}, 
        {"GEO", "GEOB", (id3_compat_func_t *)0}, 
        {"LNK", "LINK", (id3_compat_func_t *)0}, 
        {"IPLS", "TIPL", (id3_compat_func_t *)0}};
static short const   lookup___0[128]  = 
  {      (short const   )-1,      (short const   )-1,      (short const   )-1,      (short const   )-1, 
        (short const   )-1,      (short const   )-1,      (short const   )0,      (short const   )1, 
        (short const   )2,      (short const   )3,      (short const   )4,      (short const   )5, 
        (short const   )6,      (short const   )7,      (short const   )8,      (short const   )9, 
        (short const   )10,      (short const   )11,      (short const   )12,      (short const   )13, 
        (short const   )14,      (short const   )15,      (short const   )16,      (short const   )17, 
        (short const   )18,      (short const   )19,      (short const   )20,      (short const   )-1, 
        (short const   )21,      (short const   )22,      (short const   )23,      (short const   )24, 
        (short const   )25,      (short const   )26,      (short const   )27,      (short const   )28, 
        (short const   )29,      (short const   )30,      (short const   )31,      (short const   )32, 
        (short const   )33,      (short const   )34,      (short const   )-1,      (short const   )35, 
        (short const   )36,      (short const   )37,      (short const   )38,      (short const   )39, 
        (short const   )40,      (short const   )41,      (short const   )42,      (short const   )43, 
        (short const   )44,      (short const   )45,      (short const   )46,      (short const   )47, 
        (short const   )48,      (short const   )49,      (short const   )-1,      (short const   )-1, 
        (short const   )50,      (short const   )-1,      (short const   )51,      (short const   )52, 
        (short const   )-1,      (short const   )53,      (short const   )54,      (short const   )55, 
        (short const   )56,      (short const   )-1,      (short const   )57,      (short const   )58, 
        (short const   )59,      (short const   )60,      (short const   )-1,      (short const   )61, 
        (short const   )-1,      (short const   )62,      (short const   )-1,      (short const   )-1, 
        (short const   )63,      (short const   )-1,      (short const   )64,      (short const   )-1, 
        (short const   )-1,      (short const   )65,      (short const   )-1,      (short const   )66, 
        (short const   )-1,      (short const   )-1,      (short const   )-1,      (short const   )-1, 
        (short const   )-1,      (short const   )67,      (short const   )-1,      (short const   )68, 
        (short const   )-1,      (short const   )69,      (short const   )-1,      (short const   )70, 
        (short const   )-1,      (short const   )-1,      (short const   )-1,      (short const   )-1, 
        (short const   )-1,      (short const   )-1,      (short const   )-1,      (short const   )-1, 
        (short const   )-1,      (short const   )-1,      (short const   )-1,      (short const   )-1, 
        (short const   )-1,      (short const   )71,      (short const   )-1,      (short const   )-1, 
        (short const   )-1,      (short const   )-1,      (short const   )-1,      (short const   )-1, 
        (short const   )-1,      (short const   )-1,      (short const   )-1,      (short const   )-1, 
        (short const   )-1,      (short const   )-1,      (short const   )-1,      (short const   )72};
__inline struct id3_compat  const  *id3_compat_lookup(char const   *str , unsigned int len ) 
{ register int key ;
  int tmp ;
  register int index___0 ;
  register char const   *s ;
  int tmp___65 ;
  size_t __s1_len___0 ;
  size_t __s2_len___0 ;
  int tmp___96 ;
  size_t tmp___97 ;
  register int __result___85 ;
  unsigned char const   *__s2___14 ;
  register int __result___86 ;
  int tmp___112 ;
  register int __result___93 ;
  unsigned char const   *__s1___30 ;
  register int __result___94 ;
  int tmp___119 ;
  int tmp___120 ;
  int tmp___121 ;
  int tmp___122 ;
  int tmp___123 ;
  int tmp___124 ;
  int tmp___125 ;
  int tmp___126 ;
  size_t tmp___127 ;
  int tmp___128 ;
  size_t tmp___129 ;

  {
  if (len <= 4U) {
    if (len >= 3U) {
      tmp = (int )hash___0(str, len);
      key = tmp;
      if (key <= 127) {
        if (key >= 0) {
          index___0 = (int )lookup___0[key];
          if (index___0 >= 0) {
            s = wordlist___0[index___0].id;
            if ((int const   )(*str) == (int const   )(*s)) {
              tmp___125 = __builtin_constant_p(len - 1U);
              if (tmp___125) {
                tmp___126 = __builtin_constant_p(str + 1);
                if (tmp___126) {
                  tmp___127 = strlen(str + 1);
                  if (tmp___127 < len - 1U) {
                    goto _L___352;
                  } else {
                    goto _L___354;
                  }
                } else {
                  _L___354: 
                  tmp___128 = __builtin_constant_p(s + 1);
                  if (tmp___128) {
                    tmp___129 = strlen(s + 1);
                    if (tmp___129 < len - 1U) {
                      _L___352: 
                      tmp___122 = __builtin_constant_p(str + 1);
                      if (tmp___122) {
                        tmp___123 = __builtin_constant_p(s + 1);
                        if (tmp___123) {
                          __s1_len___0 = strlen(str + 1);
                          __s2_len___0 = strlen(s + 1);
                          if (! ((unsigned int )((void const   *)((str + 1) + 1)) -
                                 (unsigned int )((void const   *)(str + 1)) == 1U)) {
                            goto _L___348;
                          } else {
                            if (__s1_len___0 >= 4U) {
                              _L___348: 
                              if (! ((unsigned int )((void const   *)((s + 1) + 1)) -
                                     (unsigned int )((void const   *)(s + 1)) == 1U)) {
                                goto _L___347;
                              } else {
                                if (__s2_len___0 >= 4U) {
                                  _L___347: 
                                  tmp___124 = 1;
                                } else {
                                  goto _L___346;
                                }
                              }
                            } else {
                              _L___346: 
                              tmp___124 = 0;
                            }
                          }
                          if (tmp___124) {
                            if (__s1_len___0 < __s2_len___0) {
                              tmp___97 = __s1_len___0;
                            } else {
                              tmp___97 = __s2_len___0;
                            }
                            tmp___96 = memcmp((void const   *)(str + 1), (void const   *)(s +
                                                                                          1),
                                              tmp___97 + 1U);
                          } else {
                            goto _L___350;
                          }
                        } else {
                          goto _L___350;
                        }
                      } else {
                        _L___350: 
                        tmp___121 = __builtin_constant_p(str + 1);
                        if (tmp___121) {
                          if ((unsigned int )((void const   *)((str + 1) + 1)) - (unsigned int )((void const   *)(str +
                                                                                                                  1)) ==
                              1U) {
                            __s1_len___0 = strlen(str + 1);
                            if (__s1_len___0 < 4U) {
                              tmp___112 = __builtin_constant_p(s + 1);
                              if (tmp___112) {
                                if ((unsigned int )((void const   *)((s + 1) + 1)) -
                                    (unsigned int )((void const   *)(s + 1)) == 1U) {
                                  __result___85 = (int )((int const   )(*((unsigned char const   *)(str +
                                                                                                    1) +
                                                                          0)) - (int const   )(*((unsigned char const   *)(s +
                                                                                                                           1) +
                                                                                                 0)));
                                  if (__s1_len___0 > 0U) {
                                    if (__result___85 == 0) {
                                      __result___85 = (int )((int const   )(*((unsigned char const   *)(str +
                                                                                                        1) +
                                                                              1)) -
                                                             (int const   )(*((unsigned char const   *)(s +
                                                                                                        1) +
                                                                              1)));
                                      if (__s1_len___0 > 1U) {
                                        if (__result___85 == 0) {
                                          __result___85 = (int )((int const   )(*((unsigned char const   *)(str +
                                                                                                            1) +
                                                                                  2)) -
                                                                 (int const   )(*((unsigned char const   *)(s +
                                                                                                            1) +
                                                                                  2)));
                                          if (__s1_len___0 > 2U) {
                                            if (__result___85 == 0) {
                                              __result___85 = (int )((int const   )(*((unsigned char const   *)(str +
                                                                                                                1) +
                                                                                      3)) -
                                                                     (int const   )(*((unsigned char const   *)(s +
                                                                                                                1) +
                                                                                      3)));
                                            } else {
                                              goto _L___309;
                                            }
                                          } else {
                                            _L___309: ;
                                          }
                                        } else {
                                          goto _L___310;
                                        }
                                      } else {
                                        _L___310: ;
                                      }
                                    } else {
                                      goto _L___311;
                                    }
                                  } else {
                                    _L___311: ;
                                  }
                                  tmp___96 = __result___85;
                                } else {
                                  goto _L___315;
                                }
                              } else {
                                _L___315: 
                                __s2___14 = (unsigned char const   *)(s + 1);
                                __result___86 = (int )((int const   )(*((unsigned char const   *)(str +
                                                                                                  1) +
                                                                        0)) - (int const   )(*(__s2___14 +
                                                                                               0)));
                                if (__s1_len___0 > 0U) {
                                  if (__result___86 == 0) {
                                    __result___86 = (int )((int const   )(*((unsigned char const   *)(str +
                                                                                                      1) +
                                                                            1)) -
                                                           (int const   )(*(__s2___14 +
                                                                            1)));
                                    if (__s1_len___0 > 1U) {
                                      if (__result___86 == 0) {
                                        __result___86 = (int )((int const   )(*((unsigned char const   *)(str +
                                                                                                          1) +
                                                                                2)) -
                                                               (int const   )(*(__s2___14 +
                                                                                2)));
                                        if (__s1_len___0 > 2U) {
                                          if (__result___86 == 0) {
                                            __result___86 = (int )((int const   )(*((unsigned char const   *)(str +
                                                                                                              1) +
                                                                                    3)) -
                                                                   (int const   )(*(__s2___14 +
                                                                                    3)));
                                          } else {
                                            goto _L___312;
                                          }
                                        } else {
                                          _L___312: ;
                                        }
                                      } else {
                                        goto _L___313;
                                      }
                                    } else {
                                      _L___313: ;
                                    }
                                  } else {
                                    goto _L___314;
                                  }
                                } else {
                                  _L___314: ;
                                }
                                tmp___96 = __result___86;
                              }
                            } else {
                              goto _L___345;
                            }
                          } else {
                            goto _L___345;
                          }
                        } else {
                          _L___345: 
                          tmp___120 = __builtin_constant_p(s + 1);
                          if (tmp___120) {
                            if ((unsigned int )((void const   *)((s + 1) + 1)) - (unsigned int )((void const   *)(s +
                                                                                                                  1)) ==
                                1U) {
                              __s2_len___0 = strlen(s + 1);
                              if (__s2_len___0 < 4U) {
                                tmp___119 = __builtin_constant_p(str + 1);
                                if (tmp___119) {
                                  if ((unsigned int )((void const   *)((str + 1) +
                                                                       1)) - (unsigned int )((void const   *)(str +
                                                                                                              1)) ==
                                      1U) {
                                    __result___93 = (int )((int const   )(*((unsigned char const   *)(str +
                                                                                                      1) +
                                                                            0)) -
                                                           (int const   )(*((unsigned char const   *)(s +
                                                                                                      1) +
                                                                            0)));
                                    if (__s2_len___0 > 0U) {
                                      if (__result___93 == 0) {
                                        __result___93 = (int )((int const   )(*((unsigned char const   *)(str +
                                                                                                          1) +
                                                                                1)) -
                                                               (int const   )(*((unsigned char const   *)(s +
                                                                                                          1) +
                                                                                1)));
                                        if (__s2_len___0 > 1U) {
                                          if (__result___93 == 0) {
                                            __result___93 = (int )((int const   )(*((unsigned char const   *)(str +
                                                                                                              1) +
                                                                                    2)) -
                                                                   (int const   )(*((unsigned char const   *)(s +
                                                                                                              1) +
                                                                                    2)));
                                            if (__s2_len___0 > 2U) {
                                              if (__result___93 == 0) {
                                                __result___93 = (int )((int const   )(*((unsigned char const   *)(str +
                                                                                                                  1) +
                                                                                        3)) -
                                                                       (int const   )(*((unsigned char const   *)(s +
                                                                                                                  1) +
                                                                                        3)));
                                              } else {
                                                goto _L___335;
                                              }
                                            } else {
                                              _L___335: ;
                                            }
                                          } else {
                                            goto _L___336;
                                          }
                                        } else {
                                          _L___336: ;
                                        }
                                      } else {
                                        goto _L___337;
                                      }
                                    } else {
                                      _L___337: ;
                                    }
                                    tmp___96 = __result___93;
                                  } else {
                                    goto _L___341;
                                  }
                                } else {
                                  _L___341: 
                                  __s1___30 = (unsigned char const   *)(str + 1);
                                  __result___94 = (int )((int const   )(*(__s1___30 +
                                                                          0)) - (int const   )(*((unsigned char const   *)(s +
                                                                                                                           1) +
                                                                                                 0)));
                                  if (__s2_len___0 > 0U) {
                                    if (__result___94 == 0) {
                                      __result___94 = (int )((int const   )(*(__s1___30 +
                                                                              1)) -
                                                             (int const   )(*((unsigned char const   *)(s +
                                                                                                        1) +
                                                                              1)));
                                      if (__s2_len___0 > 1U) {
                                        if (__result___94 == 0) {
                                          __result___94 = (int )((int const   )(*(__s1___30 +
                                                                                  2)) -
                                                                 (int const   )(*((unsigned char const   *)(s +
                                                                                                            1) +
                                                                                  2)));
                                          if (__s2_len___0 > 2U) {
                                            if (__result___94 == 0) {
                                              __result___94 = (int )((int const   )(*(__s1___30 +
                                                                                      3)) -
                                                                     (int const   )(*((unsigned char const   *)(s +
                                                                                                                1) +
                                                                                      3)));
                                            } else {
                                              goto _L___338;
                                            }
                                          } else {
                                            _L___338: ;
                                          }
                                        } else {
                                          goto _L___339;
                                        }
                                      } else {
                                        _L___339: ;
                                      }
                                    } else {
                                      goto _L___340;
                                    }
                                  } else {
                                    _L___340: ;
                                  }
                                  tmp___96 = __result___94;
                                }
                              } else {
                                goto _L___343;
                              }
                            } else {
                              goto _L___343;
                            }
                          } else {
                            _L___343: 
                            tmp___96 = strcmp(str + 1, s + 1);
                          }
                        }
                      }
                      tmp___65 = tmp___96;
                    } else {
                      goto _L___353;
                    }
                  } else {
                    _L___353: 
                    goto _L___351;
                  }
                }
              } else {
                _L___351: 
                tmp___65 = strncmp(str + 1, s + 1, len - 1U);
              }
              if (tmp___65) {
                goto _L___356;
              } else {
                if ((int const   )(*(s + len)) == 0) {
                  return (& wordlist___0[index___0]);
                } else {
                  goto _L___356;
                }
              }
            } else {
              _L___356: ;
            }
          }
        } else {
          goto _L___357;
        }
      } else {
        _L___357: ;
      }
    } else {
      goto _L___358;
    }
  } else {
    _L___358: ;
  }
  return ((struct id3_compat  const  *)0);
}
}
static int translate_TCON(struct id3_frame *frame , char const   *oldid , id3_byte_t const   *data ,
                          id3_length_t length ) 
{ id3_byte_t const   *end ;
  enum id3_field_textencoding encoding ;
  id3_ucs4_t *string ;
  id3_ucs4_t *ptr ;
  id3_ucs4_t *endptr ;
  int result ;
  int tmp ;
  id3_ucs4_t *tmp___0 ;
  int tmp___1 ;
  int tmp___2 ;

  {
  string = (id3_ucs4_t *)0;
  result = 0;
  if (! (frame->nfields == 2U)) {
    __assert_fail("frame->nfields == 2", "compat.gperf", 147U, "translate_TCON");
  }
  encoding = (enum id3_field_textencoding )0;
  end = data + length;
  tmp = id3_field_parse(frame->fields + 0, & data, (unsigned long )(end - data), & encoding);
  if (tmp == -1) {
    goto fail;
  }
  string = id3_parse_string(& data, (unsigned long )(end - data), encoding, 0);
  if ((unsigned int )string == (unsigned int )((id3_ucs4_t *)0)) {
    goto fail;
  }
  ptr = string;
  while ((*ptr) == 40UL) {
    ptr ++;
    if ((*ptr) == 40UL) {
      break;
    }
    endptr = ptr;
    while (1) {
      if ((*endptr)) {
        if (! ((*endptr) != 41UL)) {
          goto _L;
        }
      } else {
        _L: 
        break;
      }
      endptr ++;
    }
    if ((*endptr)) {
      tmp___0 = endptr;
      endptr ++;
      (*tmp___0) = 0UL;
    }
    tmp___1 = id3_field_addstring(frame->fields + 1, (id3_ucs4_t const   *)ptr);
    if (tmp___1 == -1) {
      goto fail;
    }
    ptr = endptr;
  }
  if ((*ptr)) {
    tmp___2 = id3_field_addstring(frame->fields + 1, (id3_ucs4_t const   *)ptr);
    if (tmp___2 == -1) {
      goto fail;
    } else {
      goto _L___0;
    }
  } else {
    _L___0: ;
  }
  if (0) {
    fail: 
    result = -1;
  }
  if (string) {
    free((void *)string);
  }
  return (result);
}
}
int id3_compat_fixup(struct id3_tag *tag ) 
{ struct id3_frame *frame ;
  unsigned int index___0 ;
  id3_ucs4_t timestamp[17] ;
  int result ;
  char const   *id ;
  id3_byte_t const   *data ;
  id3_byte_t const   *end ;
  id3_length_t length ;
  enum id3_field_textencoding encoding ;
  id3_ucs4_t *string ;
  size_t __s1_len ;
  size_t __s2_len ;
  int tmp___20 ;
  size_t tmp___21 ;
  register int __result___37 ;
  unsigned char const   *__s2___6 ;
  register int __result___38 ;
  register int __result___45 ;
  unsigned char const   *__s1___14 ;
  register int __result___46 ;
  int tmp___36 ;
  int tmp___37 ;
  int tmp___38 ;
  int tmp___39 ;
  size_t __s1_len___0 ;
  size_t __s2_len___0 ;
  int tmp___61 ;
  size_t tmp___62 ;
  register int __result___85 ;
  unsigned char const   *__s2___14 ;
  register int __result___86 ;
  register int __result___93 ;
  unsigned char const   *__s1___30 ;
  register int __result___94 ;
  int tmp___77 ;
  int tmp___78 ;
  int tmp___79 ;
  int tmp___80 ;
  size_t __s1_len___1 ;
  size_t __s2_len___1 ;
  int tmp___102 ;
  size_t tmp___103 ;
  register int __result___133 ;
  unsigned char const   *__s2___22 ;
  register int __result___134 ;
  register int __result___141 ;
  unsigned char const   *__s1___46 ;
  register int __result___142 ;
  int tmp___118 ;
  int tmp___119 ;
  int tmp___120 ;
  int tmp___121 ;
  size_t __s1_len___2 ;
  size_t __s2_len___2 ;
  int tmp___143 ;
  size_t tmp___144 ;
  register int __result___181 ;
  unsigned char const   *__s2___30 ;
  register int __result___182 ;
  register int __result___189 ;
  unsigned char const   *__s1___62 ;
  register int __result___190 ;
  int tmp___159 ;
  int tmp___160 ;
  int tmp___161 ;
  int tmp___162 ;
  size_t __s1_len___3 ;
  size_t __s2_len___3 ;
  int tmp___184 ;
  size_t tmp___185 ;
  register int __result___229 ;
  unsigned char const   *__s2___38 ;
  register int __result___230 ;
  register int __result___237 ;
  unsigned char const   *__s1___78 ;
  register int __result___238 ;
  int tmp___200 ;
  int tmp___201 ;
  int tmp___202 ;
  int tmp___203 ;
  size_t __s1_len___4 ;
  size_t __s2_len___4 ;
  int tmp___225 ;
  size_t tmp___226 ;
  register int __result___277 ;
  unsigned char const   *__s2___46 ;
  register int __result___278 ;
  register int __result___285 ;
  unsigned char const   *__s1___94 ;
  register int __result___286 ;
  int tmp___241 ;
  int tmp___242 ;
  int tmp___243 ;
  int tmp___244 ;
  id3_length_t tmp___245 ;
  size_t __s1_len___5 ;
  size_t __s2_len___5 ;
  int tmp___267 ;
  size_t tmp___268 ;
  register int __result___325 ;
  unsigned char const   *__s2___54 ;
  register int __result___326 ;
  register int __result___333 ;
  unsigned char const   *__s1___110 ;
  register int __result___334 ;
  int tmp___283 ;
  int tmp___284 ;
  int tmp___285 ;
  int tmp___286 ;
  size_t __s1_len___6 ;
  size_t __s2_len___6 ;
  int tmp___308 ;
  size_t tmp___309 ;
  register int __result___373 ;
  unsigned char const   *__s2___62 ;
  register int __result___374 ;
  register int __result___381 ;
  unsigned char const   *__s1___126 ;
  register int __result___382 ;
  int tmp___324 ;
  int tmp___325 ;
  int tmp___326 ;
  int tmp___327 ;
  size_t __s1_len___7 ;
  size_t __s2_len___7 ;
  int tmp___349 ;
  size_t tmp___350 ;
  register int __result___421 ;
  unsigned char const   *__s2___70 ;
  register int __result___422 ;
  register int __result___429 ;
  unsigned char const   *__s1___142 ;
  register int __result___430 ;
  int tmp___365 ;
  int tmp___366 ;
  int tmp___367 ;
  int tmp___368 ;
  size_t __s1_len___8 ;
  size_t __s2_len___8 ;
  int tmp___390 ;
  size_t tmp___391 ;
  register int __result___469 ;
  unsigned char const   *__s2___78 ;
  register int __result___470 ;
  register int __result___477 ;
  unsigned char const   *__s1___158 ;
  register int __result___478 ;
  int tmp___406 ;
  int tmp___407 ;
  int tmp___408 ;
  int tmp___409 ;
  unsigned int tmp___410 ;
  id3_ucs4_t *strings ;
  int tmp___411 ;
  int tmp___412 ;
  int tmp___413 ;

  {
  timestamp[0] = 0UL;
  timestamp[1] = 0UL;
  timestamp[2] = 0UL;
  timestamp[3] = 0UL;
  timestamp[4] = 0UL;
  timestamp[5] = 0UL;
  timestamp[6] = 0UL;
  timestamp[7] = 0UL;
  timestamp[8] = 0UL;
  timestamp[9] = 0UL;
  timestamp[10] = 0UL;
  timestamp[11] = 0UL;
  timestamp[12] = 0UL;
  timestamp[13] = 0UL;
  timestamp[14] = 0UL;
  timestamp[15] = 0UL;
  timestamp[16] = 0UL;
  result = 0;
  index___0 = 0U;
  while (1) {
    tmp___410 = index___0;
    index___0 ++;
    frame = id3_tag_findframe((struct id3_tag  const  *)tag, "ZOBS", tmp___410);
    if (! frame) {
      break;
    }
    id = id3_field_getframeid((union id3_field  const  *)(frame->fields + 0));
    if (! id) {
      __assert_fail("id", "compat.gperf", 222U, "id3_compat_fixup");
    }
    tmp___38 = __builtin_constant_p(id);
    if (tmp___38) {
      __s1_len = strlen(id);
      __s2_len = strlen("TYER");
      if (! ((unsigned int )((void const   *)(id + 1)) - (unsigned int )((void const   *)id) ==
             1U)) {
        goto _L___164;
      } else {
        if (__s1_len >= 4U) {
          _L___164: 
          if (! ((unsigned int )((void const   *)("TYER" + 1)) - (unsigned int )((void const   *)"TYER") ==
                 1U)) {
            goto _L___163;
          } else {
            if (__s2_len >= 4U) {
              _L___163: 
              tmp___39 = 1;
            } else {
              goto _L___162;
            }
          }
        } else {
          _L___162: 
          tmp___39 = 0;
        }
      }
      if (tmp___39) {
        if (__s1_len < __s2_len) {
          tmp___21 = __s1_len;
        } else {
          tmp___21 = __s2_len;
        }
        tmp___20 = memcmp((void const   *)id, (void const   *)"TYER", tmp___21 + 1U);
      } else {
        goto _L___166;
      }
    } else {
      _L___166: 
      tmp___37 = __builtin_constant_p(id);
      if (tmp___37) {
        if ((unsigned int )((void const   *)(id + 1)) - (unsigned int )((void const   *)id) ==
            1U) {
          __s1_len = strlen(id);
          if (__s1_len < 4U) {
            if ((unsigned int )((void const   *)("TYER" + 1)) - (unsigned int )((void const   *)"TYER") ==
                1U) {
              __result___37 = (int )((int const   )(*((unsigned char const   *)id +
                                                      0)) - (int const   )(*((unsigned char const   *)"TYER" +
                                                                             0)));
              if (__s1_len > 0U) {
                if (__result___37 == 0) {
                  __result___37 = (int )((int const   )(*((unsigned char const   *)id +
                                                          1)) - (int const   )(*((unsigned char const   *)"TYER" +
                                                                                 1)));
                  if (__s1_len > 1U) {
                    if (__result___37 == 0) {
                      __result___37 = (int )((int const   )(*((unsigned char const   *)id +
                                                              2)) - (int const   )(*((unsigned char const   *)"TYER" +
                                                                                     2)));
                      if (__s1_len > 2U) {
                        if (__result___37 == 0) {
                          __result___37 = (int )((int const   )(*((unsigned char const   *)id +
                                                                  3)) - (int const   )(*((unsigned char const   *)"TYER" +
                                                                                         3)));
                        } else {
                          goto _L___127;
                        }
                      } else {
                        _L___127: ;
                      }
                    } else {
                      goto _L___128;
                    }
                  } else {
                    _L___128: ;
                  }
                } else {
                  goto _L___129;
                }
              } else {
                _L___129: ;
              }
              tmp___20 = __result___37;
            } else {
              __s2___6 = (unsigned char const   *)"TYER";
              __result___38 = (int )((int const   )(*((unsigned char const   *)id +
                                                      0)) - (int const   )(*(__s2___6 +
                                                                             0)));
              if (__s1_len > 0U) {
                if (__result___38 == 0) {
                  __result___38 = (int )((int const   )(*((unsigned char const   *)id +
                                                          1)) - (int const   )(*(__s2___6 +
                                                                                 1)));
                  if (__s1_len > 1U) {
                    if (__result___38 == 0) {
                      __result___38 = (int )((int const   )(*((unsigned char const   *)id +
                                                              2)) - (int const   )(*(__s2___6 +
                                                                                     2)));
                      if (__s1_len > 2U) {
                        if (__result___38 == 0) {
                          __result___38 = (int )((int const   )(*((unsigned char const   *)id +
                                                                  3)) - (int const   )(*(__s2___6 +
                                                                                         3)));
                        } else {
                          goto _L___130;
                        }
                      } else {
                        _L___130: ;
                      }
                    } else {
                      goto _L___131;
                    }
                  } else {
                    _L___131: ;
                  }
                } else {
                  goto _L___132;
                }
              } else {
                _L___132: ;
              }
              tmp___20 = __result___38;
            }
          } else {
            goto _L___161;
          }
        } else {
          goto _L___161;
        }
      } else {
        _L___161: 
        if ((unsigned int )((void const   *)("TYER" + 1)) - (unsigned int )((void const   *)"TYER") ==
            1U) {
          __s2_len = strlen("TYER");
          if (__s2_len < 4U) {
            tmp___36 = __builtin_constant_p(id);
            if (tmp___36) {
              if ((unsigned int )((void const   *)(id + 1)) - (unsigned int )((void const   *)id) ==
                  1U) {
                __result___45 = (int )((int const   )(*((unsigned char const   *)id +
                                                        0)) - (int const   )(*((unsigned char const   *)"TYER" +
                                                                               0)));
                if (__s2_len > 0U) {
                  if (__result___45 == 0) {
                    __result___45 = (int )((int const   )(*((unsigned char const   *)id +
                                                            1)) - (int const   )(*((unsigned char const   *)"TYER" +
                                                                                   1)));
                    if (__s2_len > 1U) {
                      if (__result___45 == 0) {
                        __result___45 = (int )((int const   )(*((unsigned char const   *)id +
                                                                2)) - (int const   )(*((unsigned char const   *)"TYER" +
                                                                                       2)));
                        if (__s2_len > 2U) {
                          if (__result___45 == 0) {
                            __result___45 = (int )((int const   )(*((unsigned char const   *)id +
                                                                    3)) - (int const   )(*((unsigned char const   *)"TYER" +
                                                                                           3)));
                          } else {
                            goto _L___152;
                          }
                        } else {
                          _L___152: ;
                        }
                      } else {
                        goto _L___153;
                      }
                    } else {
                      _L___153: ;
                    }
                  } else {
                    goto _L___154;
                  }
                } else {
                  _L___154: ;
                }
                tmp___20 = __result___45;
              } else {
                goto _L___158;
              }
            } else {
              _L___158: 
              __s1___14 = (unsigned char const   *)id;
              __result___46 = (int )((int const   )(*(__s1___14 + 0)) - (int const   )(*((unsigned char const   *)"TYER" +
                                                                                         0)));
              if (__s2_len > 0U) {
                if (__result___46 == 0) {
                  __result___46 = (int )((int const   )(*(__s1___14 + 1)) - (int const   )(*((unsigned char const   *)"TYER" +
                                                                                             1)));
                  if (__s2_len > 1U) {
                    if (__result___46 == 0) {
                      __result___46 = (int )((int const   )(*(__s1___14 + 2)) - (int const   )(*((unsigned char const   *)"TYER" +
                                                                                                 2)));
                      if (__s2_len > 2U) {
                        if (__result___46 == 0) {
                          __result___46 = (int )((int const   )(*(__s1___14 + 3)) -
                                                 (int const   )(*((unsigned char const   *)"TYER" +
                                                                  3)));
                        } else {
                          goto _L___155;
                        }
                      } else {
                        _L___155: ;
                      }
                    } else {
                      goto _L___156;
                    }
                  } else {
                    _L___156: ;
                  }
                } else {
                  goto _L___157;
                }
              } else {
                _L___157: ;
              }
              tmp___20 = __result___46;
            }
          } else {
            goto _L___159;
          }
        } else {
          _L___159: 
          tmp___20 = strcmp(id, "TYER");
        }
      }
    }
    if (tmp___20 != 0) {
      tmp___79 = __builtin_constant_p(id);
      if (tmp___79) {
        __s1_len___0 = strlen(id);
        __s2_len___0 = strlen("YTYE");
        if (! ((unsigned int )((void const   *)(id + 1)) - (unsigned int )((void const   *)id) ==
               1U)) {
          goto _L___332;
        } else {
          if (__s1_len___0 >= 4U) {
            _L___332: 
            if (! ((unsigned int )((void const   *)("YTYE" + 1)) - (unsigned int )((void const   *)"YTYE") ==
                   1U)) {
              goto _L___331;
            } else {
              if (__s2_len___0 >= 4U) {
                _L___331: 
                tmp___80 = 1;
              } else {
                goto _L___330;
              }
            }
          } else {
            _L___330: 
            tmp___80 = 0;
          }
        }
        if (tmp___80) {
          if (__s1_len___0 < __s2_len___0) {
            tmp___62 = __s1_len___0;
          } else {
            tmp___62 = __s2_len___0;
          }
          tmp___61 = memcmp((void const   *)id, (void const   *)"YTYE", tmp___62 +
                                                                        1U);
        } else {
          goto _L___334;
        }
      } else {
        _L___334: 
        tmp___78 = __builtin_constant_p(id);
        if (tmp___78) {
          if ((unsigned int )((void const   *)(id + 1)) - (unsigned int )((void const   *)id) ==
              1U) {
            __s1_len___0 = strlen(id);
            if (__s1_len___0 < 4U) {
              if ((unsigned int )((void const   *)("YTYE" + 1)) - (unsigned int )((void const   *)"YTYE") ==
                  1U) {
                __result___85 = (int )((int const   )(*((unsigned char const   *)id +
                                                        0)) - (int const   )(*((unsigned char const   *)"YTYE" +
                                                                               0)));
                if (__s1_len___0 > 0U) {
                  if (__result___85 == 0) {
                    __result___85 = (int )((int const   )(*((unsigned char const   *)id +
                                                            1)) - (int const   )(*((unsigned char const   *)"YTYE" +
                                                                                   1)));
                    if (__s1_len___0 > 1U) {
                      if (__result___85 == 0) {
                        __result___85 = (int )((int const   )(*((unsigned char const   *)id +
                                                                2)) - (int const   )(*((unsigned char const   *)"YTYE" +
                                                                                       2)));
                        if (__s1_len___0 > 2U) {
                          if (__result___85 == 0) {
                            __result___85 = (int )((int const   )(*((unsigned char const   *)id +
                                                                    3)) - (int const   )(*((unsigned char const   *)"YTYE" +
                                                                                           3)));
                          } else {
                            goto _L___295;
                          }
                        } else {
                          _L___295: ;
                        }
                      } else {
                        goto _L___296;
                      }
                    } else {
                      _L___296: ;
                    }
                  } else {
                    goto _L___297;
                  }
                } else {
                  _L___297: ;
                }
                tmp___61 = __result___85;
              } else {
                __s2___14 = (unsigned char const   *)"YTYE";
                __result___86 = (int )((int const   )(*((unsigned char const   *)id +
                                                        0)) - (int const   )(*(__s2___14 +
                                                                               0)));
                if (__s1_len___0 > 0U) {
                  if (__result___86 == 0) {
                    __result___86 = (int )((int const   )(*((unsigned char const   *)id +
                                                            1)) - (int const   )(*(__s2___14 +
                                                                                   1)));
                    if (__s1_len___0 > 1U) {
                      if (__result___86 == 0) {
                        __result___86 = (int )((int const   )(*((unsigned char const   *)id +
                                                                2)) - (int const   )(*(__s2___14 +
                                                                                       2)));
                        if (__s1_len___0 > 2U) {
                          if (__result___86 == 0) {
                            __result___86 = (int )((int const   )(*((unsigned char const   *)id +
                                                                    3)) - (int const   )(*(__s2___14 +
                                                                                           3)));
                          } else {
                            goto _L___298;
                          }
                        } else {
                          _L___298: ;
                        }
                      } else {
                        goto _L___299;
                      }
                    } else {
                      _L___299: ;
                    }
                  } else {
                    goto _L___300;
                  }
                } else {
                  _L___300: ;
                }
                tmp___61 = __result___86;
              }
            } else {
              goto _L___329;
            }
          } else {
            goto _L___329;
          }
        } else {
          _L___329: 
          if ((unsigned int )((void const   *)("YTYE" + 1)) - (unsigned int )((void const   *)"YTYE") ==
              1U) {
            __s2_len___0 = strlen("YTYE");
            if (__s2_len___0 < 4U) {
              tmp___77 = __builtin_constant_p(id);
              if (tmp___77) {
                if ((unsigned int )((void const   *)(id + 1)) - (unsigned int )((void const   *)id) ==
                    1U) {
                  __result___93 = (int )((int const   )(*((unsigned char const   *)id +
                                                          0)) - (int const   )(*((unsigned char const   *)"YTYE" +
                                                                                 0)));
                  if (__s2_len___0 > 0U) {
                    if (__result___93 == 0) {
                      __result___93 = (int )((int const   )(*((unsigned char const   *)id +
                                                              1)) - (int const   )(*((unsigned char const   *)"YTYE" +
                                                                                     1)));
                      if (__s2_len___0 > 1U) {
                        if (__result___93 == 0) {
                          __result___93 = (int )((int const   )(*((unsigned char const   *)id +
                                                                  2)) - (int const   )(*((unsigned char const   *)"YTYE" +
                                                                                         2)));
                          if (__s2_len___0 > 2U) {
                            if (__result___93 == 0) {
                              __result___93 = (int )((int const   )(*((unsigned char const   *)id +
                                                                      3)) - (int const   )(*((unsigned char const   *)"YTYE" +
                                                                                             3)));
                            } else {
                              goto _L___320;
                            }
                          } else {
                            _L___320: ;
                          }
                        } else {
                          goto _L___321;
                        }
                      } else {
                        _L___321: ;
                      }
                    } else {
                      goto _L___322;
                    }
                  } else {
                    _L___322: ;
                  }
                  tmp___61 = __result___93;
                } else {
                  goto _L___326;
                }
              } else {
                _L___326: 
                __s1___30 = (unsigned char const   *)id;
                __result___94 = (int )((int const   )(*(__s1___30 + 0)) - (int const   )(*((unsigned char const   *)"YTYE" +
                                                                                           0)));
                if (__s2_len___0 > 0U) {
                  if (__result___94 == 0) {
                    __result___94 = (int )((int const   )(*(__s1___30 + 1)) - (int const   )(*((unsigned char const   *)"YTYE" +
                                                                                               1)));
                    if (__s2_len___0 > 1U) {
                      if (__result___94 == 0) {
                        __result___94 = (int )((int const   )(*(__s1___30 + 2)) -
                                               (int const   )(*((unsigned char const   *)"YTYE" +
                                                                2)));
                        if (__s2_len___0 > 2U) {
                          if (__result___94 == 0) {
                            __result___94 = (int )((int const   )(*(__s1___30 + 3)) -
                                                   (int const   )(*((unsigned char const   *)"YTYE" +
                                                                    3)));
                          } else {
                            goto _L___323;
                          }
                        } else {
                          _L___323: ;
                        }
                      } else {
                        goto _L___324;
                      }
                    } else {
                      _L___324: ;
                    }
                  } else {
                    goto _L___325;
                  }
                } else {
                  _L___325: ;
                }
                tmp___61 = __result___94;
              }
            } else {
              goto _L___327;
            }
          } else {
            _L___327: 
            tmp___61 = strcmp(id, "YTYE");
          }
        }
      }
      if (tmp___61 != 0) {
        tmp___120 = __builtin_constant_p(id);
        if (tmp___120) {
          __s1_len___1 = strlen(id);
          __s2_len___1 = strlen("TDAT");
          if (! ((unsigned int )((void const   *)(id + 1)) - (unsigned int )((void const   *)id) ==
                 1U)) {
            goto _L___500;
          } else {
            if (__s1_len___1 >= 4U) {
              _L___500: 
              if (! ((unsigned int )((void const   *)("TDAT" + 1)) - (unsigned int )((void const   *)"TDAT") ==
                     1U)) {
                goto _L___499;
              } else {
                if (__s2_len___1 >= 4U) {
                  _L___499: 
                  tmp___121 = 1;
                } else {
                  goto _L___498;
                }
              }
            } else {
              _L___498: 
              tmp___121 = 0;
            }
          }
          if (tmp___121) {
            if (__s1_len___1 < __s2_len___1) {
              tmp___103 = __s1_len___1;
            } else {
              tmp___103 = __s2_len___1;
            }
            tmp___102 = memcmp((void const   *)id, (void const   *)"TDAT", tmp___103 +
                                                                           1U);
          } else {
            goto _L___502;
          }
        } else {
          _L___502: 
          tmp___119 = __builtin_constant_p(id);
          if (tmp___119) {
            if ((unsigned int )((void const   *)(id + 1)) - (unsigned int )((void const   *)id) ==
                1U) {
              __s1_len___1 = strlen(id);
              if (__s1_len___1 < 4U) {
                if ((unsigned int )((void const   *)("TDAT" + 1)) - (unsigned int )((void const   *)"TDAT") ==
                    1U) {
                  __result___133 = (int )((int const   )(*((unsigned char const   *)id +
                                                           0)) - (int const   )(*((unsigned char const   *)"TDAT" +
                                                                                  0)));
                  if (__s1_len___1 > 0U) {
                    if (__result___133 == 0) {
                      __result___133 = (int )((int const   )(*((unsigned char const   *)id +
                                                               1)) - (int const   )(*((unsigned char const   *)"TDAT" +
                                                                                      1)));
                      if (__s1_len___1 > 1U) {
                        if (__result___133 == 0) {
                          __result___133 = (int )((int const   )(*((unsigned char const   *)id +
                                                                   2)) - (int const   )(*((unsigned char const   *)"TDAT" +
                                                                                          2)));
                          if (__s1_len___1 > 2U) {
                            if (__result___133 == 0) {
                              __result___133 = (int )((int const   )(*((unsigned char const   *)id +
                                                                       3)) - (int const   )(*((unsigned char const   *)"TDAT" +
                                                                                              3)));
                            } else {
                              goto _L___463;
                            }
                          } else {
                            _L___463: ;
                          }
                        } else {
                          goto _L___464;
                        }
                      } else {
                        _L___464: ;
                      }
                    } else {
                      goto _L___465;
                    }
                  } else {
                    _L___465: ;
                  }
                  tmp___102 = __result___133;
                } else {
                  __s2___22 = (unsigned char const   *)"TDAT";
                  __result___134 = (int )((int const   )(*((unsigned char const   *)id +
                                                           0)) - (int const   )(*(__s2___22 +
                                                                                  0)));
                  if (__s1_len___1 > 0U) {
                    if (__result___134 == 0) {
                      __result___134 = (int )((int const   )(*((unsigned char const   *)id +
                                                               1)) - (int const   )(*(__s2___22 +
                                                                                      1)));
                      if (__s1_len___1 > 1U) {
                        if (__result___134 == 0) {
                          __result___134 = (int )((int const   )(*((unsigned char const   *)id +
                                                                   2)) - (int const   )(*(__s2___22 +
                                                                                          2)));
                          if (__s1_len___1 > 2U) {
                            if (__result___134 == 0) {
                              __result___134 = (int )((int const   )(*((unsigned char const   *)id +
                                                                       3)) - (int const   )(*(__s2___22 +
                                                                                              3)));
                            } else {
                              goto _L___466;
                            }
                          } else {
                            _L___466: ;
                          }
                        } else {
                          goto _L___467;
                        }
                      } else {
                        _L___467: ;
                      }
                    } else {
                      goto _L___468;
                    }
                  } else {
                    _L___468: ;
                  }
                  tmp___102 = __result___134;
                }
              } else {
                goto _L___497;
              }
            } else {
              goto _L___497;
            }
          } else {
            _L___497: 
            if ((unsigned int )((void const   *)("TDAT" + 1)) - (unsigned int )((void const   *)"TDAT") ==
                1U) {
              __s2_len___1 = strlen("TDAT");
              if (__s2_len___1 < 4U) {
                tmp___118 = __builtin_constant_p(id);
                if (tmp___118) {
                  if ((unsigned int )((void const   *)(id + 1)) - (unsigned int )((void const   *)id) ==
                      1U) {
                    __result___141 = (int )((int const   )(*((unsigned char const   *)id +
                                                             0)) - (int const   )(*((unsigned char const   *)"TDAT" +
                                                                                    0)));
                    if (__s2_len___1 > 0U) {
                      if (__result___141 == 0) {
                        __result___141 = (int )((int const   )(*((unsigned char const   *)id +
                                                                 1)) - (int const   )(*((unsigned char const   *)"TDAT" +
                                                                                        1)));
                        if (__s2_len___1 > 1U) {
                          if (__result___141 == 0) {
                            __result___141 = (int )((int const   )(*((unsigned char const   *)id +
                                                                     2)) - (int const   )(*((unsigned char const   *)"TDAT" +
                                                                                            2)));
                            if (__s2_len___1 > 2U) {
                              if (__result___141 == 0) {
                                __result___141 = (int )((int const   )(*((unsigned char const   *)id +
                                                                         3)) - (int const   )(*((unsigned char const   *)"TDAT" +
                                                                                                3)));
                              } else {
                                goto _L___488;
                              }
                            } else {
                              _L___488: ;
                            }
                          } else {
                            goto _L___489;
                          }
                        } else {
                          _L___489: ;
                        }
                      } else {
                        goto _L___490;
                      }
                    } else {
                      _L___490: ;
                    }
                    tmp___102 = __result___141;
                  } else {
                    goto _L___494;
                  }
                } else {
                  _L___494: 
                  __s1___46 = (unsigned char const   *)id;
                  __result___142 = (int )((int const   )(*(__s1___46 + 0)) - (int const   )(*((unsigned char const   *)"TDAT" +
                                                                                              0)));
                  if (__s2_len___1 > 0U) {
                    if (__result___142 == 0) {
                      __result___142 = (int )((int const   )(*(__s1___46 + 1)) - (int const   )(*((unsigned char const   *)"TDAT" +
                                                                                                  1)));
                      if (__s2_len___1 > 1U) {
                        if (__result___142 == 0) {
                          __result___142 = (int )((int const   )(*(__s1___46 + 2)) -
                                                  (int const   )(*((unsigned char const   *)"TDAT" +
                                                                   2)));
                          if (__s2_len___1 > 2U) {
                            if (__result___142 == 0) {
                              __result___142 = (int )((int const   )(*(__s1___46 +
                                                                       3)) - (int const   )(*((unsigned char const   *)"TDAT" +
                                                                                              3)));
                            } else {
                              goto _L___491;
                            }
                          } else {
                            _L___491: ;
                          }
                        } else {
                          goto _L___492;
                        }
                      } else {
                        _L___492: ;
                      }
                    } else {
                      goto _L___493;
                    }
                  } else {
                    _L___493: ;
                  }
                  tmp___102 = __result___142;
                }
              } else {
                goto _L___495;
              }
            } else {
              _L___495: 
              tmp___102 = strcmp(id, "TDAT");
            }
          }
        }
        if (tmp___102 != 0) {
          tmp___161 = __builtin_constant_p(id);
          if (tmp___161) {
            __s1_len___2 = strlen(id);
            __s2_len___2 = strlen("YTDA");
            if (! ((unsigned int )((void const   *)(id + 1)) - (unsigned int )((void const   *)id) ==
                   1U)) {
              goto _L___668;
            } else {
              if (__s1_len___2 >= 4U) {
                _L___668: 
                if (! ((unsigned int )((void const   *)("YTDA" + 1)) - (unsigned int )((void const   *)"YTDA") ==
                       1U)) {
                  goto _L___667;
                } else {
                  if (__s2_len___2 >= 4U) {
                    _L___667: 
                    tmp___162 = 1;
                  } else {
                    goto _L___666;
                  }
                }
              } else {
                _L___666: 
                tmp___162 = 0;
              }
            }
            if (tmp___162) {
              if (__s1_len___2 < __s2_len___2) {
                tmp___144 = __s1_len___2;
              } else {
                tmp___144 = __s2_len___2;
              }
              tmp___143 = memcmp((void const   *)id, (void const   *)"YTDA", tmp___144 +
                                                                             1U);
            } else {
              goto _L___670;
            }
          } else {
            _L___670: 
            tmp___160 = __builtin_constant_p(id);
            if (tmp___160) {
              if ((unsigned int )((void const   *)(id + 1)) - (unsigned int )((void const   *)id) ==
                  1U) {
                __s1_len___2 = strlen(id);
                if (__s1_len___2 < 4U) {
                  if ((unsigned int )((void const   *)("YTDA" + 1)) - (unsigned int )((void const   *)"YTDA") ==
                      1U) {
                    __result___181 = (int )((int const   )(*((unsigned char const   *)id +
                                                             0)) - (int const   )(*((unsigned char const   *)"YTDA" +
                                                                                    0)));
                    if (__s1_len___2 > 0U) {
                      if (__result___181 == 0) {
                        __result___181 = (int )((int const   )(*((unsigned char const   *)id +
                                                                 1)) - (int const   )(*((unsigned char const   *)"YTDA" +
                                                                                        1)));
                        if (__s1_len___2 > 1U) {
                          if (__result___181 == 0) {
                            __result___181 = (int )((int const   )(*((unsigned char const   *)id +
                                                                     2)) - (int const   )(*((unsigned char const   *)"YTDA" +
                                                                                            2)));
                            if (__s1_len___2 > 2U) {
                              if (__result___181 == 0) {
                                __result___181 = (int )((int const   )(*((unsigned char const   *)id +
                                                                         3)) - (int const   )(*((unsigned char const   *)"YTDA" +
                                                                                                3)));
                              } else {
                                goto _L___631;
                              }
                            } else {
                              _L___631: ;
                            }
                          } else {
                            goto _L___632;
                          }
                        } else {
                          _L___632: ;
                        }
                      } else {
                        goto _L___633;
                      }
                    } else {
                      _L___633: ;
                    }
                    tmp___143 = __result___181;
                  } else {
                    __s2___30 = (unsigned char const   *)"YTDA";
                    __result___182 = (int )((int const   )(*((unsigned char const   *)id +
                                                             0)) - (int const   )(*(__s2___30 +
                                                                                    0)));
                    if (__s1_len___2 > 0U) {
                      if (__result___182 == 0) {
                        __result___182 = (int )((int const   )(*((unsigned char const   *)id +
                                                                 1)) - (int const   )(*(__s2___30 +
                                                                                        1)));
                        if (__s1_len___2 > 1U) {
                          if (__result___182 == 0) {
                            __result___182 = (int )((int const   )(*((unsigned char const   *)id +
                                                                     2)) - (int const   )(*(__s2___30 +
                                                                                            2)));
                            if (__s1_len___2 > 2U) {
                              if (__result___182 == 0) {
                                __result___182 = (int )((int const   )(*((unsigned char const   *)id +
                                                                         3)) - (int const   )(*(__s2___30 +
                                                                                                3)));
                              } else {
                                goto _L___634;
                              }
                            } else {
                              _L___634: ;
                            }
                          } else {
                            goto _L___635;
                          }
                        } else {
                          _L___635: ;
                        }
                      } else {
                        goto _L___636;
                      }
                    } else {
                      _L___636: ;
                    }
                    tmp___143 = __result___182;
                  }
                } else {
                  goto _L___665;
                }
              } else {
                goto _L___665;
              }
            } else {
              _L___665: 
              if ((unsigned int )((void const   *)("YTDA" + 1)) - (unsigned int )((void const   *)"YTDA") ==
                  1U) {
                __s2_len___2 = strlen("YTDA");
                if (__s2_len___2 < 4U) {
                  tmp___159 = __builtin_constant_p(id);
                  if (tmp___159) {
                    if ((unsigned int )((void const   *)(id + 1)) - (unsigned int )((void const   *)id) ==
                        1U) {
                      __result___189 = (int )((int const   )(*((unsigned char const   *)id +
                                                               0)) - (int const   )(*((unsigned char const   *)"YTDA" +
                                                                                      0)));
                      if (__s2_len___2 > 0U) {
                        if (__result___189 == 0) {
                          __result___189 = (int )((int const   )(*((unsigned char const   *)id +
                                                                   1)) - (int const   )(*((unsigned char const   *)"YTDA" +
                                                                                          1)));
                          if (__s2_len___2 > 1U) {
                            if (__result___189 == 0) {
                              __result___189 = (int )((int const   )(*((unsigned char const   *)id +
                                                                       2)) - (int const   )(*((unsigned char const   *)"YTDA" +
                                                                                              2)));
                              if (__s2_len___2 > 2U) {
                                if (__result___189 == 0) {
                                  __result___189 = (int )((int const   )(*((unsigned char const   *)id +
                                                                           3)) - (int const   )(*((unsigned char const   *)"YTDA" +
                                                                                                  3)));
                                } else {
                                  goto _L___656;
                                }
                              } else {
                                _L___656: ;
                              }
                            } else {
                              goto _L___657;
                            }
                          } else {
                            _L___657: ;
                          }
                        } else {
                          goto _L___658;
                        }
                      } else {
                        _L___658: ;
                      }
                      tmp___143 = __result___189;
                    } else {
                      goto _L___662;
                    }
                  } else {
                    _L___662: 
                    __s1___62 = (unsigned char const   *)id;
                    __result___190 = (int )((int const   )(*(__s1___62 + 0)) - (int const   )(*((unsigned char const   *)"YTDA" +
                                                                                                0)));
                    if (__s2_len___2 > 0U) {
                      if (__result___190 == 0) {
                        __result___190 = (int )((int const   )(*(__s1___62 + 1)) -
                                                (int const   )(*((unsigned char const   *)"YTDA" +
                                                                 1)));
                        if (__s2_len___2 > 1U) {
                          if (__result___190 == 0) {
                            __result___190 = (int )((int const   )(*(__s1___62 + 2)) -
                                                    (int const   )(*((unsigned char const   *)"YTDA" +
                                                                     2)));
                            if (__s2_len___2 > 2U) {
                              if (__result___190 == 0) {
                                __result___190 = (int )((int const   )(*(__s1___62 +
                                                                         3)) - (int const   )(*((unsigned char const   *)"YTDA" +
                                                                                                3)));
                              } else {
                                goto _L___659;
                              }
                            } else {
                              _L___659: ;
                            }
                          } else {
                            goto _L___660;
                          }
                        } else {
                          _L___660: ;
                        }
                      } else {
                        goto _L___661;
                      }
                    } else {
                      _L___661: ;
                    }
                    tmp___143 = __result___190;
                  }
                } else {
                  goto _L___663;
                }
              } else {
                _L___663: 
                tmp___143 = strcmp(id, "YTDA");
              }
            }
          }
          if (tmp___143 != 0) {
            tmp___202 = __builtin_constant_p(id);
            if (tmp___202) {
              __s1_len___3 = strlen(id);
              __s2_len___3 = strlen("TIME");
              if (! ((unsigned int )((void const   *)(id + 1)) - (unsigned int )((void const   *)id) ==
                     1U)) {
                goto _L___836;
              } else {
                if (__s1_len___3 >= 4U) {
                  _L___836: 
                  if (! ((unsigned int )((void const   *)("TIME" + 1)) - (unsigned int )((void const   *)"TIME") ==
                         1U)) {
                    goto _L___835;
                  } else {
                    if (__s2_len___3 >= 4U) {
                      _L___835: 
                      tmp___203 = 1;
                    } else {
                      goto _L___834;
                    }
                  }
                } else {
                  _L___834: 
                  tmp___203 = 0;
                }
              }
              if (tmp___203) {
                if (__s1_len___3 < __s2_len___3) {
                  tmp___185 = __s1_len___3;
                } else {
                  tmp___185 = __s2_len___3;
                }
                tmp___184 = memcmp((void const   *)id, (void const   *)"TIME", tmp___185 +
                                                                               1U);
              } else {
                goto _L___838;
              }
            } else {
              _L___838: 
              tmp___201 = __builtin_constant_p(id);
              if (tmp___201) {
                if ((unsigned int )((void const   *)(id + 1)) - (unsigned int )((void const   *)id) ==
                    1U) {
                  __s1_len___3 = strlen(id);
                  if (__s1_len___3 < 4U) {
                    if ((unsigned int )((void const   *)("TIME" + 1)) - (unsigned int )((void const   *)"TIME") ==
                        1U) {
                      __result___229 = (int )((int const   )(*((unsigned char const   *)id +
                                                               0)) - (int const   )(*((unsigned char const   *)"TIME" +
                                                                                      0)));
                      if (__s1_len___3 > 0U) {
                        if (__result___229 == 0) {
                          __result___229 = (int )((int const   )(*((unsigned char const   *)id +
                                                                   1)) - (int const   )(*((unsigned char const   *)"TIME" +
                                                                                          1)));
                          if (__s1_len___3 > 1U) {
                            if (__result___229 == 0) {
                              __result___229 = (int )((int const   )(*((unsigned char const   *)id +
                                                                       2)) - (int const   )(*((unsigned char const   *)"TIME" +
                                                                                              2)));
                              if (__s1_len___3 > 2U) {
                                if (__result___229 == 0) {
                                  __result___229 = (int )((int const   )(*((unsigned char const   *)id +
                                                                           3)) - (int const   )(*((unsigned char const   *)"TIME" +
                                                                                                  3)));
                                } else {
                                  goto _L___799;
                                }
                              } else {
                                _L___799: ;
                              }
                            } else {
                              goto _L___800;
                            }
                          } else {
                            _L___800: ;
                          }
                        } else {
                          goto _L___801;
                        }
                      } else {
                        _L___801: ;
                      }
                      tmp___184 = __result___229;
                    } else {
                      __s2___38 = (unsigned char const   *)"TIME";
                      __result___230 = (int )((int const   )(*((unsigned char const   *)id +
                                                               0)) - (int const   )(*(__s2___38 +
                                                                                      0)));
                      if (__s1_len___3 > 0U) {
                        if (__result___230 == 0) {
                          __result___230 = (int )((int const   )(*((unsigned char const   *)id +
                                                                   1)) - (int const   )(*(__s2___38 +
                                                                                          1)));
                          if (__s1_len___3 > 1U) {
                            if (__result___230 == 0) {
                              __result___230 = (int )((int const   )(*((unsigned char const   *)id +
                                                                       2)) - (int const   )(*(__s2___38 +
                                                                                              2)));
                              if (__s1_len___3 > 2U) {
                                if (__result___230 == 0) {
                                  __result___230 = (int )((int const   )(*((unsigned char const   *)id +
                                                                           3)) - (int const   )(*(__s2___38 +
                                                                                                  3)));
                                } else {
                                  goto _L___802;
                                }
                              } else {
                                _L___802: ;
                              }
                            } else {
                              goto _L___803;
                            }
                          } else {
                            _L___803: ;
                          }
                        } else {
                          goto _L___804;
                        }
                      } else {
                        _L___804: ;
                      }
                      tmp___184 = __result___230;
                    }
                  } else {
                    goto _L___833;
                  }
                } else {
                  goto _L___833;
                }
              } else {
                _L___833: 
                if ((unsigned int )((void const   *)("TIME" + 1)) - (unsigned int )((void const   *)"TIME") ==
                    1U) {
                  __s2_len___3 = strlen("TIME");
                  if (__s2_len___3 < 4U) {
                    tmp___200 = __builtin_constant_p(id);
                    if (tmp___200) {
                      if ((unsigned int )((void const   *)(id + 1)) - (unsigned int )((void const   *)id) ==
                          1U) {
                        __result___237 = (int )((int const   )(*((unsigned char const   *)id +
                                                                 0)) - (int const   )(*((unsigned char const   *)"TIME" +
                                                                                        0)));
                        if (__s2_len___3 > 0U) {
                          if (__result___237 == 0) {
                            __result___237 = (int )((int const   )(*((unsigned char const   *)id +
                                                                     1)) - (int const   )(*((unsigned char const   *)"TIME" +
                                                                                            1)));
                            if (__s2_len___3 > 1U) {
                              if (__result___237 == 0) {
                                __result___237 = (int )((int const   )(*((unsigned char const   *)id +
                                                                         2)) - (int const   )(*((unsigned char const   *)"TIME" +
                                                                                                2)));
                                if (__s2_len___3 > 2U) {
                                  if (__result___237 == 0) {
                                    __result___237 = (int )((int const   )(*((unsigned char const   *)id +
                                                                             3)) -
                                                            (int const   )(*((unsigned char const   *)"TIME" +
                                                                             3)));
                                  } else {
                                    goto _L___824;
                                  }
                                } else {
                                  _L___824: ;
                                }
                              } else {
                                goto _L___825;
                              }
                            } else {
                              _L___825: ;
                            }
                          } else {
                            goto _L___826;
                          }
                        } else {
                          _L___826: ;
                        }
                        tmp___184 = __result___237;
                      } else {
                        goto _L___830;
                      }
                    } else {
                      _L___830: 
                      __s1___78 = (unsigned char const   *)id;
                      __result___238 = (int )((int const   )(*(__s1___78 + 0)) - (int const   )(*((unsigned char const   *)"TIME" +
                                                                                                  0)));
                      if (__s2_len___3 > 0U) {
                        if (__result___238 == 0) {
                          __result___238 = (int )((int const   )(*(__s1___78 + 1)) -
                                                  (int const   )(*((unsigned char const   *)"TIME" +
                                                                   1)));
                          if (__s2_len___3 > 1U) {
                            if (__result___238 == 0) {
                              __result___238 = (int )((int const   )(*(__s1___78 +
                                                                       2)) - (int const   )(*((unsigned char const   *)"TIME" +
                                                                                              2)));
                              if (__s2_len___3 > 2U) {
                                if (__result___238 == 0) {
                                  __result___238 = (int )((int const   )(*(__s1___78 +
                                                                           3)) - (int const   )(*((unsigned char const   *)"TIME" +
                                                                                                  3)));
                                } else {
                                  goto _L___827;
                                }
                              } else {
                                _L___827: ;
                              }
                            } else {
                              goto _L___828;
                            }
                          } else {
                            _L___828: ;
                          }
                        } else {
                          goto _L___829;
                        }
                      } else {
                        _L___829: ;
                      }
                      tmp___184 = __result___238;
                    }
                  } else {
                    goto _L___831;
                  }
                } else {
                  _L___831: 
                  tmp___184 = strcmp(id, "TIME");
                }
              }
            }
            if (tmp___184 != 0) {
              tmp___243 = __builtin_constant_p(id);
              if (tmp___243) {
                __s1_len___4 = strlen(id);
                __s2_len___4 = strlen("YTIM");
                if (! ((unsigned int )((void const   *)(id + 1)) - (unsigned int )((void const   *)id) ==
                       1U)) {
                  goto _L___1004;
                } else {
                  if (__s1_len___4 >= 4U) {
                    _L___1004: 
                    if (! ((unsigned int )((void const   *)("YTIM" + 1)) - (unsigned int )((void const   *)"YTIM") ==
                           1U)) {
                      goto _L___1003;
                    } else {
                      if (__s2_len___4 >= 4U) {
                        _L___1003: 
                        tmp___244 = 1;
                      } else {
                        goto _L___1002;
                      }
                    }
                  } else {
                    _L___1002: 
                    tmp___244 = 0;
                  }
                }
                if (tmp___244) {
                  if (__s1_len___4 < __s2_len___4) {
                    tmp___226 = __s1_len___4;
                  } else {
                    tmp___226 = __s2_len___4;
                  }
                  tmp___225 = memcmp((void const   *)id, (void const   *)"YTIM", tmp___226 +
                                                                                 1U);
                } else {
                  goto _L___1006;
                }
              } else {
                _L___1006: 
                tmp___242 = __builtin_constant_p(id);
                if (tmp___242) {
                  if ((unsigned int )((void const   *)(id + 1)) - (unsigned int )((void const   *)id) ==
                      1U) {
                    __s1_len___4 = strlen(id);
                    if (__s1_len___4 < 4U) {
                      if ((unsigned int )((void const   *)("YTIM" + 1)) - (unsigned int )((void const   *)"YTIM") ==
                          1U) {
                        __result___277 = (int )((int const   )(*((unsigned char const   *)id +
                                                                 0)) - (int const   )(*((unsigned char const   *)"YTIM" +
                                                                                        0)));
                        if (__s1_len___4 > 0U) {
                          if (__result___277 == 0) {
                            __result___277 = (int )((int const   )(*((unsigned char const   *)id +
                                                                     1)) - (int const   )(*((unsigned char const   *)"YTIM" +
                                                                                            1)));
                            if (__s1_len___4 > 1U) {
                              if (__result___277 == 0) {
                                __result___277 = (int )((int const   )(*((unsigned char const   *)id +
                                                                         2)) - (int const   )(*((unsigned char const   *)"YTIM" +
                                                                                                2)));
                                if (__s1_len___4 > 2U) {
                                  if (__result___277 == 0) {
                                    __result___277 = (int )((int const   )(*((unsigned char const   *)id +
                                                                             3)) -
                                                            (int const   )(*((unsigned char const   *)"YTIM" +
                                                                             3)));
                                  } else {
                                    goto _L___967;
                                  }
                                } else {
                                  _L___967: ;
                                }
                              } else {
                                goto _L___968;
                              }
                            } else {
                              _L___968: ;
                            }
                          } else {
                            goto _L___969;
                          }
                        } else {
                          _L___969: ;
                        }
                        tmp___225 = __result___277;
                      } else {
                        __s2___46 = (unsigned char const   *)"YTIM";
                        __result___278 = (int )((int const   )(*((unsigned char const   *)id +
                                                                 0)) - (int const   )(*(__s2___46 +
                                                                                        0)));
                        if (__s1_len___4 > 0U) {
                          if (__result___278 == 0) {
                            __result___278 = (int )((int const   )(*((unsigned char const   *)id +
                                                                     1)) - (int const   )(*(__s2___46 +
                                                                                            1)));
                            if (__s1_len___4 > 1U) {
                              if (__result___278 == 0) {
                                __result___278 = (int )((int const   )(*((unsigned char const   *)id +
                                                                         2)) - (int const   )(*(__s2___46 +
                                                                                                2)));
                                if (__s1_len___4 > 2U) {
                                  if (__result___278 == 0) {
                                    __result___278 = (int )((int const   )(*((unsigned char const   *)id +
                                                                             3)) -
                                                            (int const   )(*(__s2___46 +
                                                                             3)));
                                  } else {
                                    goto _L___970;
                                  }
                                } else {
                                  _L___970: ;
                                }
                              } else {
                                goto _L___971;
                              }
                            } else {
                              _L___971: ;
                            }
                          } else {
                            goto _L___972;
                          }
                        } else {
                          _L___972: ;
                        }
                        tmp___225 = __result___278;
                      }
                    } else {
                      goto _L___1001;
                    }
                  } else {
                    goto _L___1001;
                  }
                } else {
                  _L___1001: 
                  if ((unsigned int )((void const   *)("YTIM" + 1)) - (unsigned int )((void const   *)"YTIM") ==
                      1U) {
                    __s2_len___4 = strlen("YTIM");
                    if (__s2_len___4 < 4U) {
                      tmp___241 = __builtin_constant_p(id);
                      if (tmp___241) {
                        if ((unsigned int )((void const   *)(id + 1)) - (unsigned int )((void const   *)id) ==
                            1U) {
                          __result___285 = (int )((int const   )(*((unsigned char const   *)id +
                                                                   0)) - (int const   )(*((unsigned char const   *)"YTIM" +
                                                                                          0)));
                          if (__s2_len___4 > 0U) {
                            if (__result___285 == 0) {
                              __result___285 = (int )((int const   )(*((unsigned char const   *)id +
                                                                       1)) - (int const   )(*((unsigned char const   *)"YTIM" +
                                                                                              1)));
                              if (__s2_len___4 > 1U) {
                                if (__result___285 == 0) {
                                  __result___285 = (int )((int const   )(*((unsigned char const   *)id +
                                                                           2)) - (int const   )(*((unsigned char const   *)"YTIM" +
                                                                                                  2)));
                                  if (__s2_len___4 > 2U) {
                                    if (__result___285 == 0) {
                                      __result___285 = (int )((int const   )(*((unsigned char const   *)id +
                                                                               3)) -
                                                              (int const   )(*((unsigned char const   *)"YTIM" +
                                                                               3)));
                                    } else {
                                      goto _L___992;
                                    }
                                  } else {
                                    _L___992: ;
                                  }
                                } else {
                                  goto _L___993;
                                }
                              } else {
                                _L___993: ;
                              }
                            } else {
                              goto _L___994;
                            }
                          } else {
                            _L___994: ;
                          }
                          tmp___225 = __result___285;
                        } else {
                          goto _L___998;
                        }
                      } else {
                        _L___998: 
                        __s1___94 = (unsigned char const   *)id;
                        __result___286 = (int )((int const   )(*(__s1___94 + 0)) -
                                                (int const   )(*((unsigned char const   *)"YTIM" +
                                                                 0)));
                        if (__s2_len___4 > 0U) {
                          if (__result___286 == 0) {
                            __result___286 = (int )((int const   )(*(__s1___94 + 1)) -
                                                    (int const   )(*((unsigned char const   *)"YTIM" +
                                                                     1)));
                            if (__s2_len___4 > 1U) {
                              if (__result___286 == 0) {
                                __result___286 = (int )((int const   )(*(__s1___94 +
                                                                         2)) - (int const   )(*((unsigned char const   *)"YTIM" +
                                                                                                2)));
                                if (__s2_len___4 > 2U) {
                                  if (__result___286 == 0) {
                                    __result___286 = (int )((int const   )(*(__s1___94 +
                                                                             3)) -
                                                            (int const   )(*((unsigned char const   *)"YTIM" +
                                                                             3)));
                                  } else {
                                    goto _L___995;
                                  }
                                } else {
                                  _L___995: ;
                                }
                              } else {
                                goto _L___996;
                              }
                            } else {
                              _L___996: ;
                            }
                          } else {
                            goto _L___997;
                          }
                        } else {
                          _L___997: ;
                        }
                        tmp___225 = __result___286;
                      }
                    } else {
                      goto _L___999;
                    }
                  } else {
                    _L___999: 
                    tmp___225 = strcmp(id, "YTIM");
                  }
                }
              }
              if (tmp___225 != 0) {
                continue;
              } else {
                goto _L___1011;
              }
            } else {
              goto _L___1011;
            }
          } else {
            goto _L___1011;
          }
        } else {
          goto _L___1011;
        }
      } else {
        goto _L___1011;
      }
    } else {
      _L___1011: ;
    }
    data = id3_field_getbinarydata((union id3_field  const  *)(frame->fields + 1),
                                   & length);
    if (! data) {
      __assert_fail("data", "compat.gperf", 230U, "id3_compat_fixup");
    }
    if (length < 1UL) {
      continue;
    }
    end = data + length;
    encoding = (enum id3_field_textencoding )id3_parse_uint(& data, 1U);
    string = id3_parse_string(& data, (unsigned long )(end - data), encoding, 0);
    tmp___245 = id3_ucs4_length((id3_ucs4_t const   *)string);
    if (tmp___245 < 4UL) {
      free((void *)string);
      continue;
    }
    tmp___367 = __builtin_constant_p(id);
    if (tmp___367) {
      __s1_len___7 = strlen(id);
      __s2_len___7 = strlen("TYER");
      if (! ((unsigned int )((void const   *)(id + 1)) - (unsigned int )((void const   *)id) ==
             1U)) {
        goto _L___1514;
      } else {
        if (__s1_len___7 >= 4U) {
          _L___1514: 
          if (! ((unsigned int )((void const   *)("TYER" + 1)) - (unsigned int )((void const   *)"TYER") ==
                 1U)) {
            goto _L___1513;
          } else {
            if (__s2_len___7 >= 4U) {
              _L___1513: 
              tmp___368 = 1;
            } else {
              goto _L___1512;
            }
          }
        } else {
          _L___1512: 
          tmp___368 = 0;
        }
      }
      if (tmp___368) {
        if (__s1_len___7 < __s2_len___7) {
          tmp___350 = __s1_len___7;
        } else {
          tmp___350 = __s2_len___7;
        }
        tmp___349 = memcmp((void const   *)id, (void const   *)"TYER", tmp___350 +
                                                                       1U);
      } else {
        goto _L___1516;
      }
    } else {
      _L___1516: 
      tmp___366 = __builtin_constant_p(id);
      if (tmp___366) {
        if ((unsigned int )((void const   *)(id + 1)) - (unsigned int )((void const   *)id) ==
            1U) {
          __s1_len___7 = strlen(id);
          if (__s1_len___7 < 4U) {
            if ((unsigned int )((void const   *)("TYER" + 1)) - (unsigned int )((void const   *)"TYER") ==
                1U) {
              __result___421 = (int )((int const   )(*((unsigned char const   *)id +
                                                       0)) - (int const   )(*((unsigned char const   *)"TYER" +
                                                                              0)));
              if (__s1_len___7 > 0U) {
                if (__result___421 == 0) {
                  __result___421 = (int )((int const   )(*((unsigned char const   *)id +
                                                           1)) - (int const   )(*((unsigned char const   *)"TYER" +
                                                                                  1)));
                  if (__s1_len___7 > 1U) {
                    if (__result___421 == 0) {
                      __result___421 = (int )((int const   )(*((unsigned char const   *)id +
                                                               2)) - (int const   )(*((unsigned char const   *)"TYER" +
                                                                                      2)));
                      if (__s1_len___7 > 2U) {
                        if (__result___421 == 0) {
                          __result___421 = (int )((int const   )(*((unsigned char const   *)id +
                                                                   3)) - (int const   )(*((unsigned char const   *)"TYER" +
                                                                                          3)));
                        } else {
                          goto _L___1477;
                        }
                      } else {
                        _L___1477: ;
                      }
                    } else {
                      goto _L___1478;
                    }
                  } else {
                    _L___1478: ;
                  }
                } else {
                  goto _L___1479;
                }
              } else {
                _L___1479: ;
              }
              tmp___349 = __result___421;
            } else {
              __s2___70 = (unsigned char const   *)"TYER";
              __result___422 = (int )((int const   )(*((unsigned char const   *)id +
                                                       0)) - (int const   )(*(__s2___70 +
                                                                              0)));
              if (__s1_len___7 > 0U) {
                if (__result___422 == 0) {
                  __result___422 = (int )((int const   )(*((unsigned char const   *)id +
                                                           1)) - (int const   )(*(__s2___70 +
                                                                                  1)));
                  if (__s1_len___7 > 1U) {
                    if (__result___422 == 0) {
                      __result___422 = (int )((int const   )(*((unsigned char const   *)id +
                                                               2)) - (int const   )(*(__s2___70 +
                                                                                      2)));
                      if (__s1_len___7 > 2U) {
                        if (__result___422 == 0) {
                          __result___422 = (int )((int const   )(*((unsigned char const   *)id +
                                                                   3)) - (int const   )(*(__s2___70 +
                                                                                          3)));
                        } else {
                          goto _L___1480;
                        }
                      } else {
                        _L___1480: ;
                      }
                    } else {
                      goto _L___1481;
                    }
                  } else {
                    _L___1481: ;
                  }
                } else {
                  goto _L___1482;
                }
              } else {
                _L___1482: ;
              }
              tmp___349 = __result___422;
            }
          } else {
            goto _L___1511;
          }
        } else {
          goto _L___1511;
        }
      } else {
        _L___1511: 
        if ((unsigned int )((void const   *)("TYER" + 1)) - (unsigned int )((void const   *)"TYER") ==
            1U) {
          __s2_len___7 = strlen("TYER");
          if (__s2_len___7 < 4U) {
            tmp___365 = __builtin_constant_p(id);
            if (tmp___365) {
              if ((unsigned int )((void const   *)(id + 1)) - (unsigned int )((void const   *)id) ==
                  1U) {
                __result___429 = (int )((int const   )(*((unsigned char const   *)id +
                                                         0)) - (int const   )(*((unsigned char const   *)"TYER" +
                                                                                0)));
                if (__s2_len___7 > 0U) {
                  if (__result___429 == 0) {
                    __result___429 = (int )((int const   )(*((unsigned char const   *)id +
                                                             1)) - (int const   )(*((unsigned char const   *)"TYER" +
                                                                                    1)));
                    if (__s2_len___7 > 1U) {
                      if (__result___429 == 0) {
                        __result___429 = (int )((int const   )(*((unsigned char const   *)id +
                                                                 2)) - (int const   )(*((unsigned char const   *)"TYER" +
                                                                                        2)));
                        if (__s2_len___7 > 2U) {
                          if (__result___429 == 0) {
                            __result___429 = (int )((int const   )(*((unsigned char const   *)id +
                                                                     3)) - (int const   )(*((unsigned char const   *)"TYER" +
                                                                                            3)));
                          } else {
                            goto _L___1502;
                          }
                        } else {
                          _L___1502: ;
                        }
                      } else {
                        goto _L___1503;
                      }
                    } else {
                      _L___1503: ;
                    }
                  } else {
                    goto _L___1504;
                  }
                } else {
                  _L___1504: ;
                }
                tmp___349 = __result___429;
              } else {
                goto _L___1508;
              }
            } else {
              _L___1508: 
              __s1___142 = (unsigned char const   *)id;
              __result___430 = (int )((int const   )(*(__s1___142 + 0)) - (int const   )(*((unsigned char const   *)"TYER" +
                                                                                           0)));
              if (__s2_len___7 > 0U) {
                if (__result___430 == 0) {
                  __result___430 = (int )((int const   )(*(__s1___142 + 1)) - (int const   )(*((unsigned char const   *)"TYER" +
                                                                                               1)));
                  if (__s2_len___7 > 1U) {
                    if (__result___430 == 0) {
                      __result___430 = (int )((int const   )(*(__s1___142 + 2)) -
                                              (int const   )(*((unsigned char const   *)"TYER" +
                                                               2)));
                      if (__s2_len___7 > 2U) {
                        if (__result___430 == 0) {
                          __result___430 = (int )((int const   )(*(__s1___142 + 3)) -
                                                  (int const   )(*((unsigned char const   *)"TYER" +
                                                                   3)));
                        } else {
                          goto _L___1505;
                        }
                      } else {
                        _L___1505: ;
                      }
                    } else {
                      goto _L___1506;
                    }
                  } else {
                    _L___1506: ;
                  }
                } else {
                  goto _L___1507;
                }
              } else {
                _L___1507: ;
              }
              tmp___349 = __result___430;
            }
          } else {
            goto _L___1509;
          }
        } else {
          _L___1509: 
          tmp___349 = strcmp(id, "TYER");
        }
      }
    }
    if (tmp___349 == 0) {
      goto _L___1685;
    } else {
      tmp___408 = __builtin_constant_p(id);
      if (tmp___408) {
        __s1_len___8 = strlen(id);
        __s2_len___8 = strlen("YTYE");
        if (! ((unsigned int )((void const   *)(id + 1)) - (unsigned int )((void const   *)id) ==
               1U)) {
          goto _L___1682;
        } else {
          if (__s1_len___8 >= 4U) {
            _L___1682: 
            if (! ((unsigned int )((void const   *)("YTYE" + 1)) - (unsigned int )((void const   *)"YTYE") ==
                   1U)) {
              goto _L___1681;
            } else {
              if (__s2_len___8 >= 4U) {
                _L___1681: 
                tmp___409 = 1;
              } else {
                goto _L___1680;
              }
            }
          } else {
            _L___1680: 
            tmp___409 = 0;
          }
        }
        if (tmp___409) {
          if (__s1_len___8 < __s2_len___8) {
            tmp___391 = __s1_len___8;
          } else {
            tmp___391 = __s2_len___8;
          }
          tmp___390 = memcmp((void const   *)id, (void const   *)"YTYE", tmp___391 +
                                                                         1U);
        } else {
          goto _L___1684;
        }
      } else {
        _L___1684: 
        tmp___407 = __builtin_constant_p(id);
        if (tmp___407) {
          if ((unsigned int )((void const   *)(id + 1)) - (unsigned int )((void const   *)id) ==
              1U) {
            __s1_len___8 = strlen(id);
            if (__s1_len___8 < 4U) {
              if ((unsigned int )((void const   *)("YTYE" + 1)) - (unsigned int )((void const   *)"YTYE") ==
                  1U) {
                __result___469 = (int )((int const   )(*((unsigned char const   *)id +
                                                         0)) - (int const   )(*((unsigned char const   *)"YTYE" +
                                                                                0)));
                if (__s1_len___8 > 0U) {
                  if (__result___469 == 0) {
                    __result___469 = (int )((int const   )(*((unsigned char const   *)id +
                                                             1)) - (int const   )(*((unsigned char const   *)"YTYE" +
                                                                                    1)));
                    if (__s1_len___8 > 1U) {
                      if (__result___469 == 0) {
                        __result___469 = (int )((int const   )(*((unsigned char const   *)id +
                                                                 2)) - (int const   )(*((unsigned char const   *)"YTYE" +
                                                                                        2)));
                        if (__s1_len___8 > 2U) {
                          if (__result___469 == 0) {
                            __result___469 = (int )((int const   )(*((unsigned char const   *)id +
                                                                     3)) - (int const   )(*((unsigned char const   *)"YTYE" +
                                                                                            3)));
                          } else {
                            goto _L___1645;
                          }
                        } else {
                          _L___1645: ;
                        }
                      } else {
                        goto _L___1646;
                      }
                    } else {
                      _L___1646: ;
                    }
                  } else {
                    goto _L___1647;
                  }
                } else {
                  _L___1647: ;
                }
                tmp___390 = __result___469;
              } else {
                __s2___78 = (unsigned char const   *)"YTYE";
                __result___470 = (int )((int const   )(*((unsigned char const   *)id +
                                                         0)) - (int const   )(*(__s2___78 +
                                                                                0)));
                if (__s1_len___8 > 0U) {
                  if (__result___470 == 0) {
                    __result___470 = (int )((int const   )(*((unsigned char const   *)id +
                                                             1)) - (int const   )(*(__s2___78 +
                                                                                    1)));
                    if (__s1_len___8 > 1U) {
                      if (__result___470 == 0) {
                        __result___470 = (int )((int const   )(*((unsigned char const   *)id +
                                                                 2)) - (int const   )(*(__s2___78 +
                                                                                        2)));
                        if (__s1_len___8 > 2U) {
                          if (__result___470 == 0) {
                            __result___470 = (int )((int const   )(*((unsigned char const   *)id +
                                                                     3)) - (int const   )(*(__s2___78 +
                                                                                            3)));
                          } else {
                            goto _L___1648;
                          }
                        } else {
                          _L___1648: ;
                        }
                      } else {
                        goto _L___1649;
                      }
                    } else {
                      _L___1649: ;
                    }
                  } else {
                    goto _L___1650;
                  }
                } else {
                  _L___1650: ;
                }
                tmp___390 = __result___470;
              }
            } else {
              goto _L___1679;
            }
          } else {
            goto _L___1679;
          }
        } else {
          _L___1679: 
          if ((unsigned int )((void const   *)("YTYE" + 1)) - (unsigned int )((void const   *)"YTYE") ==
              1U) {
            __s2_len___8 = strlen("YTYE");
            if (__s2_len___8 < 4U) {
              tmp___406 = __builtin_constant_p(id);
              if (tmp___406) {
                if ((unsigned int )((void const   *)(id + 1)) - (unsigned int )((void const   *)id) ==
                    1U) {
                  __result___477 = (int )((int const   )(*((unsigned char const   *)id +
                                                           0)) - (int const   )(*((unsigned char const   *)"YTYE" +
                                                                                  0)));
                  if (__s2_len___8 > 0U) {
                    if (__result___477 == 0) {
                      __result___477 = (int )((int const   )(*((unsigned char const   *)id +
                                                               1)) - (int const   )(*((unsigned char const   *)"YTYE" +
                                                                                      1)));
                      if (__s2_len___8 > 1U) {
                        if (__result___477 == 0) {
                          __result___477 = (int )((int const   )(*((unsigned char const   *)id +
                                                                   2)) - (int const   )(*((unsigned char const   *)"YTYE" +
                                                                                          2)));
                          if (__s2_len___8 > 2U) {
                            if (__result___477 == 0) {
                              __result___477 = (int )((int const   )(*((unsigned char const   *)id +
                                                                       3)) - (int const   )(*((unsigned char const   *)"YTYE" +
                                                                                              3)));
                            } else {
                              goto _L___1670;
                            }
                          } else {
                            _L___1670: ;
                          }
                        } else {
                          goto _L___1671;
                        }
                      } else {
                        _L___1671: ;
                      }
                    } else {
                      goto _L___1672;
                    }
                  } else {
                    _L___1672: ;
                  }
                  tmp___390 = __result___477;
                } else {
                  goto _L___1676;
                }
              } else {
                _L___1676: 
                __s1___158 = (unsigned char const   *)id;
                __result___478 = (int )((int const   )(*(__s1___158 + 0)) - (int const   )(*((unsigned char const   *)"YTYE" +
                                                                                             0)));
                if (__s2_len___8 > 0U) {
                  if (__result___478 == 0) {
                    __result___478 = (int )((int const   )(*(__s1___158 + 1)) - (int const   )(*((unsigned char const   *)"YTYE" +
                                                                                                 1)));
                    if (__s2_len___8 > 1U) {
                      if (__result___478 == 0) {
                        __result___478 = (int )((int const   )(*(__s1___158 + 2)) -
                                                (int const   )(*((unsigned char const   *)"YTYE" +
                                                                 2)));
                        if (__s2_len___8 > 2U) {
                          if (__result___478 == 0) {
                            __result___478 = (int )((int const   )(*(__s1___158 +
                                                                     3)) - (int const   )(*((unsigned char const   *)"YTYE" +
                                                                                            3)));
                          } else {
                            goto _L___1673;
                          }
                        } else {
                          _L___1673: ;
                        }
                      } else {
                        goto _L___1674;
                      }
                    } else {
                      _L___1674: ;
                    }
                  } else {
                    goto _L___1675;
                  }
                } else {
                  _L___1675: ;
                }
                tmp___390 = __result___478;
              }
            } else {
              goto _L___1677;
            }
          } else {
            _L___1677: 
            tmp___390 = strcmp(id, "YTYE");
          }
        }
      }
      if (tmp___390 == 0) {
        _L___1685: 
        timestamp[0] = (*(string + 0));
        timestamp[1] = (*(string + 1));
        timestamp[2] = (*(string + 2));
        timestamp[3] = (*(string + 3));
      } else {
        tmp___285 = __builtin_constant_p(id);
        if (tmp___285) {
          __s1_len___5 = strlen(id);
          __s2_len___5 = strlen("TDAT");
          if (! ((unsigned int )((void const   *)(id + 1)) - (unsigned int )((void const   *)id) ==
                 1U)) {
            goto _L___1177;
          } else {
            if (__s1_len___5 >= 4U) {
              _L___1177: 
              if (! ((unsigned int )((void const   *)("TDAT" + 1)) - (unsigned int )((void const   *)"TDAT") ==
                     1U)) {
                goto _L___1176;
              } else {
                if (__s2_len___5 >= 4U) {
                  _L___1176: 
                  tmp___286 = 1;
                } else {
                  goto _L___1175;
                }
              }
            } else {
              _L___1175: 
              tmp___286 = 0;
            }
          }
          if (tmp___286) {
            if (__s1_len___5 < __s2_len___5) {
              tmp___268 = __s1_len___5;
            } else {
              tmp___268 = __s2_len___5;
            }
            tmp___267 = memcmp((void const   *)id, (void const   *)"TDAT", tmp___268 +
                                                                           1U);
          } else {
            goto _L___1179;
          }
        } else {
          _L___1179: 
          tmp___284 = __builtin_constant_p(id);
          if (tmp___284) {
            if ((unsigned int )((void const   *)(id + 1)) - (unsigned int )((void const   *)id) ==
                1U) {
              __s1_len___5 = strlen(id);
              if (__s1_len___5 < 4U) {
                if ((unsigned int )((void const   *)("TDAT" + 1)) - (unsigned int )((void const   *)"TDAT") ==
                    1U) {
                  __result___325 = (int )((int const   )(*((unsigned char const   *)id +
                                                           0)) - (int const   )(*((unsigned char const   *)"TDAT" +
                                                                                  0)));
                  if (__s1_len___5 > 0U) {
                    if (__result___325 == 0) {
                      __result___325 = (int )((int const   )(*((unsigned char const   *)id +
                                                               1)) - (int const   )(*((unsigned char const   *)"TDAT" +
                                                                                      1)));
                      if (__s1_len___5 > 1U) {
                        if (__result___325 == 0) {
                          __result___325 = (int )((int const   )(*((unsigned char const   *)id +
                                                                   2)) - (int const   )(*((unsigned char const   *)"TDAT" +
                                                                                          2)));
                          if (__s1_len___5 > 2U) {
                            if (__result___325 == 0) {
                              __result___325 = (int )((int const   )(*((unsigned char const   *)id +
                                                                       3)) - (int const   )(*((unsigned char const   *)"TDAT" +
                                                                                              3)));
                            } else {
                              goto _L___1140;
                            }
                          } else {
                            _L___1140: ;
                          }
                        } else {
                          goto _L___1141;
                        }
                      } else {
                        _L___1141: ;
                      }
                    } else {
                      goto _L___1142;
                    }
                  } else {
                    _L___1142: ;
                  }
                  tmp___267 = __result___325;
                } else {
                  __s2___54 = (unsigned char const   *)"TDAT";
                  __result___326 = (int )((int const   )(*((unsigned char const   *)id +
                                                           0)) - (int const   )(*(__s2___54 +
                                                                                  0)));
                  if (__s1_len___5 > 0U) {
                    if (__result___326 == 0) {
                      __result___326 = (int )((int const   )(*((unsigned char const   *)id +
                                                               1)) - (int const   )(*(__s2___54 +
                                                                                      1)));
                      if (__s1_len___5 > 1U) {
                        if (__result___326 == 0) {
                          __result___326 = (int )((int const   )(*((unsigned char const   *)id +
                                                                   2)) - (int const   )(*(__s2___54 +
                                                                                          2)));
                          if (__s1_len___5 > 2U) {
                            if (__result___326 == 0) {
                              __result___326 = (int )((int const   )(*((unsigned char const   *)id +
                                                                       3)) - (int const   )(*(__s2___54 +
                                                                                              3)));
                            } else {
                              goto _L___1143;
                            }
                          } else {
                            _L___1143: ;
                          }
                        } else {
                          goto _L___1144;
                        }
                      } else {
                        _L___1144: ;
                      }
                    } else {
                      goto _L___1145;
                    }
                  } else {
                    _L___1145: ;
                  }
                  tmp___267 = __result___326;
                }
              } else {
                goto _L___1174;
              }
            } else {
              goto _L___1174;
            }
          } else {
            _L___1174: 
            if ((unsigned int )((void const   *)("TDAT" + 1)) - (unsigned int )((void const   *)"TDAT") ==
                1U) {
              __s2_len___5 = strlen("TDAT");
              if (__s2_len___5 < 4U) {
                tmp___283 = __builtin_constant_p(id);
                if (tmp___283) {
                  if ((unsigned int )((void const   *)(id + 1)) - (unsigned int )((void const   *)id) ==
                      1U) {
                    __result___333 = (int )((int const   )(*((unsigned char const   *)id +
                                                             0)) - (int const   )(*((unsigned char const   *)"TDAT" +
                                                                                    0)));
                    if (__s2_len___5 > 0U) {
                      if (__result___333 == 0) {
                        __result___333 = (int )((int const   )(*((unsigned char const   *)id +
                                                                 1)) - (int const   )(*((unsigned char const   *)"TDAT" +
                                                                                        1)));
                        if (__s2_len___5 > 1U) {
                          if (__result___333 == 0) {
                            __result___333 = (int )((int const   )(*((unsigned char const   *)id +
                                                                     2)) - (int const   )(*((unsigned char const   *)"TDAT" +
                                                                                            2)));
                            if (__s2_len___5 > 2U) {
                              if (__result___333 == 0) {
                                __result___333 = (int )((int const   )(*((unsigned char const   *)id +
                                                                         3)) - (int const   )(*((unsigned char const   *)"TDAT" +
                                                                                                3)));
                              } else {
                                goto _L___1165;
                              }
                            } else {
                              _L___1165: ;
                            }
                          } else {
                            goto _L___1166;
                          }
                        } else {
                          _L___1166: ;
                        }
                      } else {
                        goto _L___1167;
                      }
                    } else {
                      _L___1167: ;
                    }
                    tmp___267 = __result___333;
                  } else {
                    goto _L___1171;
                  }
                } else {
                  _L___1171: 
                  __s1___110 = (unsigned char const   *)id;
                  __result___334 = (int )((int const   )(*(__s1___110 + 0)) - (int const   )(*((unsigned char const   *)"TDAT" +
                                                                                               0)));
                  if (__s2_len___5 > 0U) {
                    if (__result___334 == 0) {
                      __result___334 = (int )((int const   )(*(__s1___110 + 1)) -
                                              (int const   )(*((unsigned char const   *)"TDAT" +
                                                               1)));
                      if (__s2_len___5 > 1U) {
                        if (__result___334 == 0) {
                          __result___334 = (int )((int const   )(*(__s1___110 + 2)) -
                                                  (int const   )(*((unsigned char const   *)"TDAT" +
                                                                   2)));
                          if (__s2_len___5 > 2U) {
                            if (__result___334 == 0) {
                              __result___334 = (int )((int const   )(*(__s1___110 +
                                                                       3)) - (int const   )(*((unsigned char const   *)"TDAT" +
                                                                                              3)));
                            } else {
                              goto _L___1168;
                            }
                          } else {
                            _L___1168: ;
                          }
                        } else {
                          goto _L___1169;
                        }
                      } else {
                        _L___1169: ;
                      }
                    } else {
                      goto _L___1170;
                    }
                  } else {
                    _L___1170: ;
                  }
                  tmp___267 = __result___334;
                }
              } else {
                goto _L___1172;
              }
            } else {
              _L___1172: 
              tmp___267 = strcmp(id, "TDAT");
            }
          }
        }
        if (tmp___267 == 0) {
          goto _L___1348;
        } else {
          tmp___326 = __builtin_constant_p(id);
          if (tmp___326) {
            __s1_len___6 = strlen(id);
            __s2_len___6 = strlen("YTDA");
            if (! ((unsigned int )((void const   *)(id + 1)) - (unsigned int )((void const   *)id) ==
                   1U)) {
              goto _L___1345;
            } else {
              if (__s1_len___6 >= 4U) {
                _L___1345: 
                if (! ((unsigned int )((void const   *)("YTDA" + 1)) - (unsigned int )((void const   *)"YTDA") ==
                       1U)) {
                  goto _L___1344;
                } else {
                  if (__s2_len___6 >= 4U) {
                    _L___1344: 
                    tmp___327 = 1;
                  } else {
                    goto _L___1343;
                  }
                }
              } else {
                _L___1343: 
                tmp___327 = 0;
              }
            }
            if (tmp___327) {
              if (__s1_len___6 < __s2_len___6) {
                tmp___309 = __s1_len___6;
              } else {
                tmp___309 = __s2_len___6;
              }
              tmp___308 = memcmp((void const   *)id, (void const   *)"YTDA", tmp___309 +
                                                                             1U);
            } else {
              goto _L___1347;
            }
          } else {
            _L___1347: 
            tmp___325 = __builtin_constant_p(id);
            if (tmp___325) {
              if ((unsigned int )((void const   *)(id + 1)) - (unsigned int )((void const   *)id) ==
                  1U) {
                __s1_len___6 = strlen(id);
                if (__s1_len___6 < 4U) {
                  if ((unsigned int )((void const   *)("YTDA" + 1)) - (unsigned int )((void const   *)"YTDA") ==
                      1U) {
                    __result___373 = (int )((int const   )(*((unsigned char const   *)id +
                                                             0)) - (int const   )(*((unsigned char const   *)"YTDA" +
                                                                                    0)));
                    if (__s1_len___6 > 0U) {
                      if (__result___373 == 0) {
                        __result___373 = (int )((int const   )(*((unsigned char const   *)id +
                                                                 1)) - (int const   )(*((unsigned char const   *)"YTDA" +
                                                                                        1)));
                        if (__s1_len___6 > 1U) {
                          if (__result___373 == 0) {
                            __result___373 = (int )((int const   )(*((unsigned char const   *)id +
                                                                     2)) - (int const   )(*((unsigned char const   *)"YTDA" +
                                                                                            2)));
                            if (__s1_len___6 > 2U) {
                              if (__result___373 == 0) {
                                __result___373 = (int )((int const   )(*((unsigned char const   *)id +
                                                                         3)) - (int const   )(*((unsigned char const   *)"YTDA" +
                                                                                                3)));
                              } else {
                                goto _L___1308;
                              }
                            } else {
                              _L___1308: ;
                            }
                          } else {
                            goto _L___1309;
                          }
                        } else {
                          _L___1309: ;
                        }
                      } else {
                        goto _L___1310;
                      }
                    } else {
                      _L___1310: ;
                    }
                    tmp___308 = __result___373;
                  } else {
                    __s2___62 = (unsigned char const   *)"YTDA";
                    __result___374 = (int )((int const   )(*((unsigned char const   *)id +
                                                             0)) - (int const   )(*(__s2___62 +
                                                                                    0)));
                    if (__s1_len___6 > 0U) {
                      if (__result___374 == 0) {
                        __result___374 = (int )((int const   )(*((unsigned char const   *)id +
                                                                 1)) - (int const   )(*(__s2___62 +
                                                                                        1)));
                        if (__s1_len___6 > 1U) {
                          if (__result___374 == 0) {
                            __result___374 = (int )((int const   )(*((unsigned char const   *)id +
                                                                     2)) - (int const   )(*(__s2___62 +
                                                                                            2)));
                            if (__s1_len___6 > 2U) {
                              if (__result___374 == 0) {
                                __result___374 = (int )((int const   )(*((unsigned char const   *)id +
                                                                         3)) - (int const   )(*(__s2___62 +
                                                                                                3)));
                              } else {
                                goto _L___1311;
                              }
                            } else {
                              _L___1311: ;
                            }
                          } else {
                            goto _L___1312;
                          }
                        } else {
                          _L___1312: ;
                        }
                      } else {
                        goto _L___1313;
                      }
                    } else {
                      _L___1313: ;
                    }
                    tmp___308 = __result___374;
                  }
                } else {
                  goto _L___1342;
                }
              } else {
                goto _L___1342;
              }
            } else {
              _L___1342: 
              if ((unsigned int )((void const   *)("YTDA" + 1)) - (unsigned int )((void const   *)"YTDA") ==
                  1U) {
                __s2_len___6 = strlen("YTDA");
                if (__s2_len___6 < 4U) {
                  tmp___324 = __builtin_constant_p(id);
                  if (tmp___324) {
                    if ((unsigned int )((void const   *)(id + 1)) - (unsigned int )((void const   *)id) ==
                        1U) {
                      __result___381 = (int )((int const   )(*((unsigned char const   *)id +
                                                               0)) - (int const   )(*((unsigned char const   *)"YTDA" +
                                                                                      0)));
                      if (__s2_len___6 > 0U) {
                        if (__result___381 == 0) {
                          __result___381 = (int )((int const   )(*((unsigned char const   *)id +
                                                                   1)) - (int const   )(*((unsigned char const   *)"YTDA" +
                                                                                          1)));
                          if (__s2_len___6 > 1U) {
                            if (__result___381 == 0) {
                              __result___381 = (int )((int const   )(*((unsigned char const   *)id +
                                                                       2)) - (int const   )(*((unsigned char const   *)"YTDA" +
                                                                                              2)));
                              if (__s2_len___6 > 2U) {
                                if (__result___381 == 0) {
                                  __result___381 = (int )((int const   )(*((unsigned char const   *)id +
                                                                           3)) - (int const   )(*((unsigned char const   *)"YTDA" +
                                                                                                  3)));
                                } else {
                                  goto _L___1333;
                                }
                              } else {
                                _L___1333: ;
                              }
                            } else {
                              goto _L___1334;
                            }
                          } else {
                            _L___1334: ;
                          }
                        } else {
                          goto _L___1335;
                        }
                      } else {
                        _L___1335: ;
                      }
                      tmp___308 = __result___381;
                    } else {
                      goto _L___1339;
                    }
                  } else {
                    _L___1339: 
                    __s1___126 = (unsigned char const   *)id;
                    __result___382 = (int )((int const   )(*(__s1___126 + 0)) - (int const   )(*((unsigned char const   *)"YTDA" +
                                                                                                 0)));
                    if (__s2_len___6 > 0U) {
                      if (__result___382 == 0) {
                        __result___382 = (int )((int const   )(*(__s1___126 + 1)) -
                                                (int const   )(*((unsigned char const   *)"YTDA" +
                                                                 1)));
                        if (__s2_len___6 > 1U) {
                          if (__result___382 == 0) {
                            __result___382 = (int )((int const   )(*(__s1___126 +
                                                                     2)) - (int const   )(*((unsigned char const   *)"YTDA" +
                                                                                            2)));
                            if (__s2_len___6 > 2U) {
                              if (__result___382 == 0) {
                                __result___382 = (int )((int const   )(*(__s1___126 +
                                                                         3)) - (int const   )(*((unsigned char const   *)"YTDA" +
                                                                                                3)));
                              } else {
                                goto _L___1336;
                              }
                            } else {
                              _L___1336: ;
                            }
                          } else {
                            goto _L___1337;
                          }
                        } else {
                          _L___1337: ;
                        }
                      } else {
                        goto _L___1338;
                      }
                    } else {
                      _L___1338: ;
                    }
                    tmp___308 = __result___382;
                  }
                } else {
                  goto _L___1340;
                }
              } else {
                _L___1340: 
                tmp___308 = strcmp(id, "YTDA");
              }
            }
          }
          if (tmp___308 == 0) {
            _L___1348: 
            timestamp[4] = (unsigned long )'-';
            timestamp[5] = (*(string + 2));
            timestamp[6] = (*(string + 3));
            timestamp[7] = (unsigned long )'-';
            timestamp[8] = (*(string + 0));
            timestamp[9] = (*(string + 1));
          } else {
            timestamp[10] = (unsigned long )'T';
            timestamp[11] = (*(string + 0));
            timestamp[12] = (*(string + 1));
            timestamp[13] = (unsigned long )':';
            timestamp[14] = (*(string + 2));
            timestamp[15] = (*(string + 3));
          }
        }
      }
    }
    free((void *)string);
  }
  if (timestamp[0]) {
    frame = id3_frame_new("TDRC");
    if ((unsigned int )frame == (unsigned int )((struct id3_frame *)0)) {
      goto fail;
    }
    strings = timestamp;
    tmp___411 = id3_field_settextencoding(frame->fields + 0, (enum id3_field_textencoding )0);
    if (tmp___411 == -1) {
      goto _L___1687;
    } else {
      tmp___412 = id3_field_setstrings(frame->fields + 1, 1U, & strings);
      if (tmp___412 == -1) {
        _L___1687: 
        goto _L___1686;
      } else {
        tmp___413 = id3_tag_attachframe(tag, frame);
        if (tmp___413 == -1) {
          _L___1686: 
          id3_frame_delete(frame);
          goto fail;
        }
      }
    }
  }
  if (0) {
    fail: 
    result = -1;
  }
  return (result);
}
}
#pragma merger(0,"/tmp/cil-QRi6qy3Z.i","-Wall -g -O2")
id3_ucs4_t const   *id3_genre_index(unsigned int index ) ;
id3_ucs4_t const   *id3_genre_name(id3_ucs4_t const   *string ) ;
int id3_genre_number(id3_ucs4_t const   *string ) ;
static id3_ucs4_t const   genre_BLUES[6]  = {      (id3_ucs4_t const   )((unsigned long )'B'),      (id3_ucs4_t const   )((unsigned long )'l'),      (id3_ucs4_t const   )((unsigned long )'u'),      (id3_ucs4_t const   )((unsigned long )'e'), 
        (id3_ucs4_t const   )((unsigned long )'s'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_CLASSIC_ROCK[13]  = 
  {      (id3_ucs4_t const   )((unsigned long )'C'),      (id3_ucs4_t const   )((unsigned long )'l'),      (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )((unsigned long )'s'), 
        (id3_ucs4_t const   )((unsigned long )'s'),      (id3_ucs4_t const   )((unsigned long )'i'),      (id3_ucs4_t const   )((unsigned long )'c'),      (id3_ucs4_t const   )((unsigned long )' '), 
        (id3_ucs4_t const   )((unsigned long )'R'),      (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'c'),      (id3_ucs4_t const   )((unsigned long )'k'), 
        (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_COUNTRY[8]  = 
  {      (id3_ucs4_t const   )((unsigned long )'C'),      (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'u'),      (id3_ucs4_t const   )((unsigned long )'n'), 
        (id3_ucs4_t const   )((unsigned long )'t'),      (id3_ucs4_t const   )((unsigned long )'r'),      (id3_ucs4_t const   )((unsigned long )'y'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_DANCE[6]  = {      (id3_ucs4_t const   )((unsigned long )'D'),      (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )((unsigned long )'n'),      (id3_ucs4_t const   )((unsigned long )'c'), 
        (id3_ucs4_t const   )((unsigned long )'e'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_DISCO[6]  = {      (id3_ucs4_t const   )((unsigned long )'D'),      (id3_ucs4_t const   )((unsigned long )'i'),      (id3_ucs4_t const   )((unsigned long )'s'),      (id3_ucs4_t const   )((unsigned long )'c'), 
        (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_FUNK[5]  = {      (id3_ucs4_t const   )((unsigned long )'F'),      (id3_ucs4_t const   )((unsigned long )'u'),      (id3_ucs4_t const   )((unsigned long )'n'),      (id3_ucs4_t const   )((unsigned long )'k'), 
        (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_GRUNGE[7]  = {      (id3_ucs4_t const   )((unsigned long )'G'),      (id3_ucs4_t const   )((unsigned long )'r'),      (id3_ucs4_t const   )((unsigned long )'u'),      (id3_ucs4_t const   )((unsigned long )'n'), 
        (id3_ucs4_t const   )((unsigned long )'g'),      (id3_ucs4_t const   )((unsigned long )'e'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_HIP_HOP[8]  = 
  {      (id3_ucs4_t const   )((unsigned long )'H'),      (id3_ucs4_t const   )((unsigned long )'i'),      (id3_ucs4_t const   )((unsigned long )'p'),      (id3_ucs4_t const   )((unsigned long )'-'), 
        (id3_ucs4_t const   )((unsigned long )'H'),      (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'p'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_JAZZ[5]  = {      (id3_ucs4_t const   )((unsigned long )'J'),      (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )((unsigned long )'z'),      (id3_ucs4_t const   )((unsigned long )'z'), 
        (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_METAL[6]  = {      (id3_ucs4_t const   )((unsigned long )'M'),      (id3_ucs4_t const   )((unsigned long )'e'),      (id3_ucs4_t const   )((unsigned long )'t'),      (id3_ucs4_t const   )((unsigned long )'a'), 
        (id3_ucs4_t const   )((unsigned long )'l'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_NEW_AGE[8]  = 
  {      (id3_ucs4_t const   )((unsigned long )'N'),      (id3_ucs4_t const   )((unsigned long )'e'),      (id3_ucs4_t const   )((unsigned long )'w'),      (id3_ucs4_t const   )((unsigned long )' '), 
        (id3_ucs4_t const   )((unsigned long )'A'),      (id3_ucs4_t const   )((unsigned long )'g'),      (id3_ucs4_t const   )((unsigned long )'e'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_OLDIES[7]  = {      (id3_ucs4_t const   )((unsigned long )'O'),      (id3_ucs4_t const   )((unsigned long )'l'),      (id3_ucs4_t const   )((unsigned long )'d'),      (id3_ucs4_t const   )((unsigned long )'i'), 
        (id3_ucs4_t const   )((unsigned long )'e'),      (id3_ucs4_t const   )((unsigned long )'s'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_OTHER[6]  = {      (id3_ucs4_t const   )((unsigned long )'O'),      (id3_ucs4_t const   )((unsigned long )'t'),      (id3_ucs4_t const   )((unsigned long )'h'),      (id3_ucs4_t const   )((unsigned long )'e'), 
        (id3_ucs4_t const   )((unsigned long )'r'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_POP[4]  = {      (id3_ucs4_t const   )((unsigned long )'P'),      (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'p'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_R_B[4]  = {      (id3_ucs4_t const   )((unsigned long )'R'),      (id3_ucs4_t const   )((unsigned long )'&'),      (id3_ucs4_t const   )((unsigned long )'B'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_RAP[4]  = {      (id3_ucs4_t const   )((unsigned long )'R'),      (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )((unsigned long )'p'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_REGGAE[7]  = {      (id3_ucs4_t const   )((unsigned long )'R'),      (id3_ucs4_t const   )((unsigned long )'e'),      (id3_ucs4_t const   )((unsigned long )'g'),      (id3_ucs4_t const   )((unsigned long )'g'), 
        (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )((unsigned long )'e'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_ROCK[5]  = {      (id3_ucs4_t const   )((unsigned long )'R'),      (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'c'),      (id3_ucs4_t const   )((unsigned long )'k'), 
        (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_TECHNO[7]  = {      (id3_ucs4_t const   )((unsigned long )'T'),      (id3_ucs4_t const   )((unsigned long )'e'),      (id3_ucs4_t const   )((unsigned long )'c'),      (id3_ucs4_t const   )((unsigned long )'h'), 
        (id3_ucs4_t const   )((unsigned long )'n'),      (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_INDUSTRIAL[11]  = 
  {      (id3_ucs4_t const   )((unsigned long )'I'),      (id3_ucs4_t const   )((unsigned long )'n'),      (id3_ucs4_t const   )((unsigned long )'d'),      (id3_ucs4_t const   )((unsigned long )'u'), 
        (id3_ucs4_t const   )((unsigned long )'s'),      (id3_ucs4_t const   )((unsigned long )'t'),      (id3_ucs4_t const   )((unsigned long )'r'),      (id3_ucs4_t const   )((unsigned long )'i'), 
        (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )((unsigned long )'l'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_ALTERNATIVE[12]  = 
  {      (id3_ucs4_t const   )((unsigned long )'A'),      (id3_ucs4_t const   )((unsigned long )'l'),      (id3_ucs4_t const   )((unsigned long )'t'),      (id3_ucs4_t const   )((unsigned long )'e'), 
        (id3_ucs4_t const   )((unsigned long )'r'),      (id3_ucs4_t const   )((unsigned long )'n'),      (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )((unsigned long )'t'), 
        (id3_ucs4_t const   )((unsigned long )'i'),      (id3_ucs4_t const   )((unsigned long )'v'),      (id3_ucs4_t const   )((unsigned long )'e'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_SKA[4]  = {      (id3_ucs4_t const   )((unsigned long )'S'),      (id3_ucs4_t const   )((unsigned long )'k'),      (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_DEATH_METAL[12]  = 
  {      (id3_ucs4_t const   )((unsigned long )'D'),      (id3_ucs4_t const   )((unsigned long )'e'),      (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )((unsigned long )'t'), 
        (id3_ucs4_t const   )((unsigned long )'h'),      (id3_ucs4_t const   )((unsigned long )' '),      (id3_ucs4_t const   )((unsigned long )'M'),      (id3_ucs4_t const   )((unsigned long )'e'), 
        (id3_ucs4_t const   )((unsigned long )'t'),      (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )((unsigned long )'l'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_PRANKS[7]  = {      (id3_ucs4_t const   )((unsigned long )'P'),      (id3_ucs4_t const   )((unsigned long )'r'),      (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )((unsigned long )'n'), 
        (id3_ucs4_t const   )((unsigned long )'k'),      (id3_ucs4_t const   )((unsigned long )'s'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_SOUNDTRACK[11]  = 
  {      (id3_ucs4_t const   )((unsigned long )'S'),      (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'u'),      (id3_ucs4_t const   )((unsigned long )'n'), 
        (id3_ucs4_t const   )((unsigned long )'d'),      (id3_ucs4_t const   )((unsigned long )'t'),      (id3_ucs4_t const   )((unsigned long )'r'),      (id3_ucs4_t const   )((unsigned long )'a'), 
        (id3_ucs4_t const   )((unsigned long )'c'),      (id3_ucs4_t const   )((unsigned long )'k'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_EURO_TECHNO[12]  = 
  {      (id3_ucs4_t const   )((unsigned long )'E'),      (id3_ucs4_t const   )((unsigned long )'u'),      (id3_ucs4_t const   )((unsigned long )'r'),      (id3_ucs4_t const   )((unsigned long )'o'), 
        (id3_ucs4_t const   )((unsigned long )'-'),      (id3_ucs4_t const   )((unsigned long )'T'),      (id3_ucs4_t const   )((unsigned long )'e'),      (id3_ucs4_t const   )((unsigned long )'c'), 
        (id3_ucs4_t const   )((unsigned long )'h'),      (id3_ucs4_t const   )((unsigned long )'n'),      (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_AMBIENT[8]  = 
  {      (id3_ucs4_t const   )((unsigned long )'A'),      (id3_ucs4_t const   )((unsigned long )'m'),      (id3_ucs4_t const   )((unsigned long )'b'),      (id3_ucs4_t const   )((unsigned long )'i'), 
        (id3_ucs4_t const   )((unsigned long )'e'),      (id3_ucs4_t const   )((unsigned long )'n'),      (id3_ucs4_t const   )((unsigned long )'t'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_TRIP_HOP[9]  = 
  {      (id3_ucs4_t const   )((unsigned long )'T'),      (id3_ucs4_t const   )((unsigned long )'r'),      (id3_ucs4_t const   )((unsigned long )'i'),      (id3_ucs4_t const   )((unsigned long )'p'), 
        (id3_ucs4_t const   )((unsigned long )'-'),      (id3_ucs4_t const   )((unsigned long )'H'),      (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'p'), 
        (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_VOCAL[6]  = {      (id3_ucs4_t const   )((unsigned long )'V'),      (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'c'),      (id3_ucs4_t const   )((unsigned long )'a'), 
        (id3_ucs4_t const   )((unsigned long )'l'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_JAZZ_FUNK[10]  = 
  {      (id3_ucs4_t const   )((unsigned long )'J'),      (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )((unsigned long )'z'),      (id3_ucs4_t const   )((unsigned long )'z'), 
        (id3_ucs4_t const   )((unsigned long )'+'),      (id3_ucs4_t const   )((unsigned long )'F'),      (id3_ucs4_t const   )((unsigned long )'u'),      (id3_ucs4_t const   )((unsigned long )'n'), 
        (id3_ucs4_t const   )((unsigned long )'k'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_FUSION[7]  = {      (id3_ucs4_t const   )((unsigned long )'F'),      (id3_ucs4_t const   )((unsigned long )'u'),      (id3_ucs4_t const   )((unsigned long )'s'),      (id3_ucs4_t const   )((unsigned long )'i'), 
        (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'n'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_TRANCE[7]  = {      (id3_ucs4_t const   )((unsigned long )'T'),      (id3_ucs4_t const   )((unsigned long )'r'),      (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )((unsigned long )'n'), 
        (id3_ucs4_t const   )((unsigned long )'c'),      (id3_ucs4_t const   )((unsigned long )'e'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_CLASSICAL[10]  = 
  {      (id3_ucs4_t const   )((unsigned long )'C'),      (id3_ucs4_t const   )((unsigned long )'l'),      (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )((unsigned long )'s'), 
        (id3_ucs4_t const   )((unsigned long )'s'),      (id3_ucs4_t const   )((unsigned long )'i'),      (id3_ucs4_t const   )((unsigned long )'c'),      (id3_ucs4_t const   )((unsigned long )'a'), 
        (id3_ucs4_t const   )((unsigned long )'l'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_INSTRUMENTAL[13]  = 
  {      (id3_ucs4_t const   )((unsigned long )'I'),      (id3_ucs4_t const   )((unsigned long )'n'),      (id3_ucs4_t const   )((unsigned long )'s'),      (id3_ucs4_t const   )((unsigned long )'t'), 
        (id3_ucs4_t const   )((unsigned long )'r'),      (id3_ucs4_t const   )((unsigned long )'u'),      (id3_ucs4_t const   )((unsigned long )'m'),      (id3_ucs4_t const   )((unsigned long )'e'), 
        (id3_ucs4_t const   )((unsigned long )'n'),      (id3_ucs4_t const   )((unsigned long )'t'),      (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )((unsigned long )'l'), 
        (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_ACID[5]  = {      (id3_ucs4_t const   )((unsigned long )'A'),      (id3_ucs4_t const   )((unsigned long )'c'),      (id3_ucs4_t const   )((unsigned long )'i'),      (id3_ucs4_t const   )((unsigned long )'d'), 
        (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_HOUSE[6]  = {      (id3_ucs4_t const   )((unsigned long )'H'),      (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'u'),      (id3_ucs4_t const   )((unsigned long )'s'), 
        (id3_ucs4_t const   )((unsigned long )'e'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_GAME[5]  = {      (id3_ucs4_t const   )((unsigned long )'G'),      (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )((unsigned long )'m'),      (id3_ucs4_t const   )((unsigned long )'e'), 
        (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_SOUND_CLIP[11]  = 
  {      (id3_ucs4_t const   )((unsigned long )'S'),      (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'u'),      (id3_ucs4_t const   )((unsigned long )'n'), 
        (id3_ucs4_t const   )((unsigned long )'d'),      (id3_ucs4_t const   )((unsigned long )' '),      (id3_ucs4_t const   )((unsigned long )'C'),      (id3_ucs4_t const   )((unsigned long )'l'), 
        (id3_ucs4_t const   )((unsigned long )'i'),      (id3_ucs4_t const   )((unsigned long )'p'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_GOSPEL[7]  = {      (id3_ucs4_t const   )((unsigned long )'G'),      (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'s'),      (id3_ucs4_t const   )((unsigned long )'p'), 
        (id3_ucs4_t const   )((unsigned long )'e'),      (id3_ucs4_t const   )((unsigned long )'l'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_NOISE[6]  = {      (id3_ucs4_t const   )((unsigned long )'N'),      (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'i'),      (id3_ucs4_t const   )((unsigned long )'s'), 
        (id3_ucs4_t const   )((unsigned long )'e'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_ALTERNROCK[11]  = 
  {      (id3_ucs4_t const   )((unsigned long )'A'),      (id3_ucs4_t const   )((unsigned long )'l'),      (id3_ucs4_t const   )((unsigned long )'t'),      (id3_ucs4_t const   )((unsigned long )'e'), 
        (id3_ucs4_t const   )((unsigned long )'r'),      (id3_ucs4_t const   )((unsigned long )'n'),      (id3_ucs4_t const   )((unsigned long )'R'),      (id3_ucs4_t const   )((unsigned long )'o'), 
        (id3_ucs4_t const   )((unsigned long )'c'),      (id3_ucs4_t const   )((unsigned long )'k'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_BASS[5]  = {      (id3_ucs4_t const   )((unsigned long )'B'),      (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )((unsigned long )'s'),      (id3_ucs4_t const   )((unsigned long )'s'), 
        (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_SOUL[5]  = {      (id3_ucs4_t const   )((unsigned long )'S'),      (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'u'),      (id3_ucs4_t const   )((unsigned long )'l'), 
        (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_PUNK[5]  = {      (id3_ucs4_t const   )((unsigned long )'P'),      (id3_ucs4_t const   )((unsigned long )'u'),      (id3_ucs4_t const   )((unsigned long )'n'),      (id3_ucs4_t const   )((unsigned long )'k'), 
        (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_SPACE[6]  = {      (id3_ucs4_t const   )((unsigned long )'S'),      (id3_ucs4_t const   )((unsigned long )'p'),      (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )((unsigned long )'c'), 
        (id3_ucs4_t const   )((unsigned long )'e'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_MEDITATIVE[11]  = 
  {      (id3_ucs4_t const   )((unsigned long )'M'),      (id3_ucs4_t const   )((unsigned long )'e'),      (id3_ucs4_t const   )((unsigned long )'d'),      (id3_ucs4_t const   )((unsigned long )'i'), 
        (id3_ucs4_t const   )((unsigned long )'t'),      (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )((unsigned long )'t'),      (id3_ucs4_t const   )((unsigned long )'i'), 
        (id3_ucs4_t const   )((unsigned long )'v'),      (id3_ucs4_t const   )((unsigned long )'e'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_INSTRUMENTAL_POP[17]  = 
  {      (id3_ucs4_t const   )((unsigned long )'I'),      (id3_ucs4_t const   )((unsigned long )'n'),      (id3_ucs4_t const   )((unsigned long )'s'),      (id3_ucs4_t const   )((unsigned long )'t'), 
        (id3_ucs4_t const   )((unsigned long )'r'),      (id3_ucs4_t const   )((unsigned long )'u'),      (id3_ucs4_t const   )((unsigned long )'m'),      (id3_ucs4_t const   )((unsigned long )'e'), 
        (id3_ucs4_t const   )((unsigned long )'n'),      (id3_ucs4_t const   )((unsigned long )'t'),      (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )((unsigned long )'l'), 
        (id3_ucs4_t const   )((unsigned long )' '),      (id3_ucs4_t const   )((unsigned long )'P'),      (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'p'), 
        (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_INSTRUMENTAL_ROCK[18]  = 
  {      (id3_ucs4_t const   )((unsigned long )'I'),      (id3_ucs4_t const   )((unsigned long )'n'),      (id3_ucs4_t const   )((unsigned long )'s'),      (id3_ucs4_t const   )((unsigned long )'t'), 
        (id3_ucs4_t const   )((unsigned long )'r'),      (id3_ucs4_t const   )((unsigned long )'u'),      (id3_ucs4_t const   )((unsigned long )'m'),      (id3_ucs4_t const   )((unsigned long )'e'), 
        (id3_ucs4_t const   )((unsigned long )'n'),      (id3_ucs4_t const   )((unsigned long )'t'),      (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )((unsigned long )'l'), 
        (id3_ucs4_t const   )((unsigned long )' '),      (id3_ucs4_t const   )((unsigned long )'R'),      (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'c'), 
        (id3_ucs4_t const   )((unsigned long )'k'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_ETHNIC[7]  = {      (id3_ucs4_t const   )((unsigned long )'E'),      (id3_ucs4_t const   )((unsigned long )'t'),      (id3_ucs4_t const   )((unsigned long )'h'),      (id3_ucs4_t const   )((unsigned long )'n'), 
        (id3_ucs4_t const   )((unsigned long )'i'),      (id3_ucs4_t const   )((unsigned long )'c'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_GOTHIC[7]  = {      (id3_ucs4_t const   )((unsigned long )'G'),      (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'t'),      (id3_ucs4_t const   )((unsigned long )'h'), 
        (id3_ucs4_t const   )((unsigned long )'i'),      (id3_ucs4_t const   )((unsigned long )'c'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_DARKWAVE[9]  = 
  {      (id3_ucs4_t const   )((unsigned long )'D'),      (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )((unsigned long )'r'),      (id3_ucs4_t const   )((unsigned long )'k'), 
        (id3_ucs4_t const   )((unsigned long )'w'),      (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )((unsigned long )'v'),      (id3_ucs4_t const   )((unsigned long )'e'), 
        (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_TECHNO_INDUSTRIAL[18]  = 
  {      (id3_ucs4_t const   )((unsigned long )'T'),      (id3_ucs4_t const   )((unsigned long )'e'),      (id3_ucs4_t const   )((unsigned long )'c'),      (id3_ucs4_t const   )((unsigned long )'h'), 
        (id3_ucs4_t const   )((unsigned long )'n'),      (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'-'),      (id3_ucs4_t const   )((unsigned long )'I'), 
        (id3_ucs4_t const   )((unsigned long )'n'),      (id3_ucs4_t const   )((unsigned long )'d'),      (id3_ucs4_t const   )((unsigned long )'u'),      (id3_ucs4_t const   )((unsigned long )'s'), 
        (id3_ucs4_t const   )((unsigned long )'t'),      (id3_ucs4_t const   )((unsigned long )'r'),      (id3_ucs4_t const   )((unsigned long )'i'),      (id3_ucs4_t const   )((unsigned long )'a'), 
        (id3_ucs4_t const   )((unsigned long )'l'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_ELECTRONIC[11]  = 
  {      (id3_ucs4_t const   )((unsigned long )'E'),      (id3_ucs4_t const   )((unsigned long )'l'),      (id3_ucs4_t const   )((unsigned long )'e'),      (id3_ucs4_t const   )((unsigned long )'c'), 
        (id3_ucs4_t const   )((unsigned long )'t'),      (id3_ucs4_t const   )((unsigned long )'r'),      (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'n'), 
        (id3_ucs4_t const   )((unsigned long )'i'),      (id3_ucs4_t const   )((unsigned long )'c'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_POP_FOLK[9]  = 
  {      (id3_ucs4_t const   )((unsigned long )'P'),      (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'p'),      (id3_ucs4_t const   )((unsigned long )'-'), 
        (id3_ucs4_t const   )((unsigned long )'F'),      (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'l'),      (id3_ucs4_t const   )((unsigned long )'k'), 
        (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_EURODANCE[10]  = 
  {      (id3_ucs4_t const   )((unsigned long )'E'),      (id3_ucs4_t const   )((unsigned long )'u'),      (id3_ucs4_t const   )((unsigned long )'r'),      (id3_ucs4_t const   )((unsigned long )'o'), 
        (id3_ucs4_t const   )((unsigned long )'d'),      (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )((unsigned long )'n'),      (id3_ucs4_t const   )((unsigned long )'c'), 
        (id3_ucs4_t const   )((unsigned long )'e'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_DREAM[6]  = {      (id3_ucs4_t const   )((unsigned long )'D'),      (id3_ucs4_t const   )((unsigned long )'r'),      (id3_ucs4_t const   )((unsigned long )'e'),      (id3_ucs4_t const   )((unsigned long )'a'), 
        (id3_ucs4_t const   )((unsigned long )'m'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_SOUTHERN_ROCK[14]  = 
  {      (id3_ucs4_t const   )((unsigned long )'S'),      (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'u'),      (id3_ucs4_t const   )((unsigned long )'t'), 
        (id3_ucs4_t const   )((unsigned long )'h'),      (id3_ucs4_t const   )((unsigned long )'e'),      (id3_ucs4_t const   )((unsigned long )'r'),      (id3_ucs4_t const   )((unsigned long )'n'), 
        (id3_ucs4_t const   )((unsigned long )' '),      (id3_ucs4_t const   )((unsigned long )'R'),      (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'c'), 
        (id3_ucs4_t const   )((unsigned long )'k'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_COMEDY[7]  = {      (id3_ucs4_t const   )((unsigned long )'C'),      (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'m'),      (id3_ucs4_t const   )((unsigned long )'e'), 
        (id3_ucs4_t const   )((unsigned long )'d'),      (id3_ucs4_t const   )((unsigned long )'y'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_CULT[5]  = {      (id3_ucs4_t const   )((unsigned long )'C'),      (id3_ucs4_t const   )((unsigned long )'u'),      (id3_ucs4_t const   )((unsigned long )'l'),      (id3_ucs4_t const   )((unsigned long )'t'), 
        (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_GANGSTA[8]  = 
  {      (id3_ucs4_t const   )((unsigned long )'G'),      (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )((unsigned long )'n'),      (id3_ucs4_t const   )((unsigned long )'g'), 
        (id3_ucs4_t const   )((unsigned long )'s'),      (id3_ucs4_t const   )((unsigned long )'t'),      (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_TOP_40[7]  = {      (id3_ucs4_t const   )((unsigned long )'T'),      (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'p'),      (id3_ucs4_t const   )((unsigned long )' '), 
        (id3_ucs4_t const   )((unsigned long )'4'),      (id3_ucs4_t const   )((unsigned long )'0'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_CHRISTIAN_RAP[14]  = 
  {      (id3_ucs4_t const   )((unsigned long )'C'),      (id3_ucs4_t const   )((unsigned long )'h'),      (id3_ucs4_t const   )((unsigned long )'r'),      (id3_ucs4_t const   )((unsigned long )'i'), 
        (id3_ucs4_t const   )((unsigned long )'s'),      (id3_ucs4_t const   )((unsigned long )'t'),      (id3_ucs4_t const   )((unsigned long )'i'),      (id3_ucs4_t const   )((unsigned long )'a'), 
        (id3_ucs4_t const   )((unsigned long )'n'),      (id3_ucs4_t const   )((unsigned long )' '),      (id3_ucs4_t const   )((unsigned long )'R'),      (id3_ucs4_t const   )((unsigned long )'a'), 
        (id3_ucs4_t const   )((unsigned long )'p'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_POP_FUNK[9]  = 
  {      (id3_ucs4_t const   )((unsigned long )'P'),      (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'p'),      (id3_ucs4_t const   )((unsigned long )'/'), 
        (id3_ucs4_t const   )((unsigned long )'F'),      (id3_ucs4_t const   )((unsigned long )'u'),      (id3_ucs4_t const   )((unsigned long )'n'),      (id3_ucs4_t const   )((unsigned long )'k'), 
        (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_JUNGLE[7]  = {      (id3_ucs4_t const   )((unsigned long )'J'),      (id3_ucs4_t const   )((unsigned long )'u'),      (id3_ucs4_t const   )((unsigned long )'n'),      (id3_ucs4_t const   )((unsigned long )'g'), 
        (id3_ucs4_t const   )((unsigned long )'l'),      (id3_ucs4_t const   )((unsigned long )'e'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_NATIVE_AMERICAN[16]  = 
  {      (id3_ucs4_t const   )((unsigned long )'N'),      (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )((unsigned long )'t'),      (id3_ucs4_t const   )((unsigned long )'i'), 
        (id3_ucs4_t const   )((unsigned long )'v'),      (id3_ucs4_t const   )((unsigned long )'e'),      (id3_ucs4_t const   )((unsigned long )' '),      (id3_ucs4_t const   )((unsigned long )'A'), 
        (id3_ucs4_t const   )((unsigned long )'m'),      (id3_ucs4_t const   )((unsigned long )'e'),      (id3_ucs4_t const   )((unsigned long )'r'),      (id3_ucs4_t const   )((unsigned long )'i'), 
        (id3_ucs4_t const   )((unsigned long )'c'),      (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )((unsigned long )'n'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_CABARET[8]  = 
  {      (id3_ucs4_t const   )((unsigned long )'C'),      (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )((unsigned long )'b'),      (id3_ucs4_t const   )((unsigned long )'a'), 
        (id3_ucs4_t const   )((unsigned long )'r'),      (id3_ucs4_t const   )((unsigned long )'e'),      (id3_ucs4_t const   )((unsigned long )'t'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_NEW_WAVE[9]  = 
  {      (id3_ucs4_t const   )((unsigned long )'N'),      (id3_ucs4_t const   )((unsigned long )'e'),      (id3_ucs4_t const   )((unsigned long )'w'),      (id3_ucs4_t const   )((unsigned long )' '), 
        (id3_ucs4_t const   )((unsigned long )'W'),      (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )((unsigned long )'v'),      (id3_ucs4_t const   )((unsigned long )'e'), 
        (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_PSYCHEDELIC[12]  = 
  {      (id3_ucs4_t const   )((unsigned long )'P'),      (id3_ucs4_t const   )((unsigned long )'s'),      (id3_ucs4_t const   )((unsigned long )'y'),      (id3_ucs4_t const   )((unsigned long )'c'), 
        (id3_ucs4_t const   )((unsigned long )'h'),      (id3_ucs4_t const   )((unsigned long )'e'),      (id3_ucs4_t const   )((unsigned long )'d'),      (id3_ucs4_t const   )((unsigned long )'e'), 
        (id3_ucs4_t const   )((unsigned long )'l'),      (id3_ucs4_t const   )((unsigned long )'i'),      (id3_ucs4_t const   )((unsigned long )'c'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_RAVE[5]  = {      (id3_ucs4_t const   )((unsigned long )'R'),      (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )((unsigned long )'v'),      (id3_ucs4_t const   )((unsigned long )'e'), 
        (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_SHOWTUNES[10]  = 
  {      (id3_ucs4_t const   )((unsigned long )'S'),      (id3_ucs4_t const   )((unsigned long )'h'),      (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'w'), 
        (id3_ucs4_t const   )((unsigned long )'t'),      (id3_ucs4_t const   )((unsigned long )'u'),      (id3_ucs4_t const   )((unsigned long )'n'),      (id3_ucs4_t const   )((unsigned long )'e'), 
        (id3_ucs4_t const   )((unsigned long )'s'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_TRAILER[8]  = 
  {      (id3_ucs4_t const   )((unsigned long )'T'),      (id3_ucs4_t const   )((unsigned long )'r'),      (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )((unsigned long )'i'), 
        (id3_ucs4_t const   )((unsigned long )'l'),      (id3_ucs4_t const   )((unsigned long )'e'),      (id3_ucs4_t const   )((unsigned long )'r'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_LO_FI[6]  = {      (id3_ucs4_t const   )((unsigned long )'L'),      (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'-'),      (id3_ucs4_t const   )((unsigned long )'F'), 
        (id3_ucs4_t const   )((unsigned long )'i'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_TRIBAL[7]  = {      (id3_ucs4_t const   )((unsigned long )'T'),      (id3_ucs4_t const   )((unsigned long )'r'),      (id3_ucs4_t const   )((unsigned long )'i'),      (id3_ucs4_t const   )((unsigned long )'b'), 
        (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )((unsigned long )'l'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_ACID_PUNK[10]  = 
  {      (id3_ucs4_t const   )((unsigned long )'A'),      (id3_ucs4_t const   )((unsigned long )'c'),      (id3_ucs4_t const   )((unsigned long )'i'),      (id3_ucs4_t const   )((unsigned long )'d'), 
        (id3_ucs4_t const   )((unsigned long )' '),      (id3_ucs4_t const   )((unsigned long )'P'),      (id3_ucs4_t const   )((unsigned long )'u'),      (id3_ucs4_t const   )((unsigned long )'n'), 
        (id3_ucs4_t const   )((unsigned long )'k'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_ACID_JAZZ[10]  = 
  {      (id3_ucs4_t const   )((unsigned long )'A'),      (id3_ucs4_t const   )((unsigned long )'c'),      (id3_ucs4_t const   )((unsigned long )'i'),      (id3_ucs4_t const   )((unsigned long )'d'), 
        (id3_ucs4_t const   )((unsigned long )' '),      (id3_ucs4_t const   )((unsigned long )'J'),      (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )((unsigned long )'z'), 
        (id3_ucs4_t const   )((unsigned long )'z'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_POLKA[6]  = {      (id3_ucs4_t const   )((unsigned long )'P'),      (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'l'),      (id3_ucs4_t const   )((unsigned long )'k'), 
        (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_RETRO[6]  = {      (id3_ucs4_t const   )((unsigned long )'R'),      (id3_ucs4_t const   )((unsigned long )'e'),      (id3_ucs4_t const   )((unsigned long )'t'),      (id3_ucs4_t const   )((unsigned long )'r'), 
        (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_MUSICAL[8]  = 
  {      (id3_ucs4_t const   )((unsigned long )'M'),      (id3_ucs4_t const   )((unsigned long )'u'),      (id3_ucs4_t const   )((unsigned long )'s'),      (id3_ucs4_t const   )((unsigned long )'i'), 
        (id3_ucs4_t const   )((unsigned long )'c'),      (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )((unsigned long )'l'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_ROCK___ROLL[12]  = 
  {      (id3_ucs4_t const   )((unsigned long )'R'),      (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'c'),      (id3_ucs4_t const   )((unsigned long )'k'), 
        (id3_ucs4_t const   )((unsigned long )' '),      (id3_ucs4_t const   )((unsigned long )'&'),      (id3_ucs4_t const   )((unsigned long )' '),      (id3_ucs4_t const   )((unsigned long )'R'), 
        (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'l'),      (id3_ucs4_t const   )((unsigned long )'l'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_HARD_ROCK[10]  = 
  {      (id3_ucs4_t const   )((unsigned long )'H'),      (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )((unsigned long )'r'),      (id3_ucs4_t const   )((unsigned long )'d'), 
        (id3_ucs4_t const   )((unsigned long )' '),      (id3_ucs4_t const   )((unsigned long )'R'),      (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'c'), 
        (id3_ucs4_t const   )((unsigned long )'k'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_FOLK[5]  = {      (id3_ucs4_t const   )((unsigned long )'F'),      (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'l'),      (id3_ucs4_t const   )((unsigned long )'k'), 
        (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_FOLK_ROCK[10]  = 
  {      (id3_ucs4_t const   )((unsigned long )'F'),      (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'l'),      (id3_ucs4_t const   )((unsigned long )'k'), 
        (id3_ucs4_t const   )((unsigned long )'/'),      (id3_ucs4_t const   )((unsigned long )'R'),      (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'c'), 
        (id3_ucs4_t const   )((unsigned long )'k'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_NATIONAL_FOLK[14]  = 
  {      (id3_ucs4_t const   )((unsigned long )'N'),      (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )((unsigned long )'t'),      (id3_ucs4_t const   )((unsigned long )'i'), 
        (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'n'),      (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )((unsigned long )'l'), 
        (id3_ucs4_t const   )((unsigned long )' '),      (id3_ucs4_t const   )((unsigned long )'F'),      (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'l'), 
        (id3_ucs4_t const   )((unsigned long )'k'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_SWING[6]  = {      (id3_ucs4_t const   )((unsigned long )'S'),      (id3_ucs4_t const   )((unsigned long )'w'),      (id3_ucs4_t const   )((unsigned long )'i'),      (id3_ucs4_t const   )((unsigned long )'n'), 
        (id3_ucs4_t const   )((unsigned long )'g'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_FAST_FUSION[12]  = 
  {      (id3_ucs4_t const   )((unsigned long )'F'),      (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )((unsigned long )'s'),      (id3_ucs4_t const   )((unsigned long )'t'), 
        (id3_ucs4_t const   )((unsigned long )'-'),      (id3_ucs4_t const   )((unsigned long )'F'),      (id3_ucs4_t const   )((unsigned long )'u'),      (id3_ucs4_t const   )((unsigned long )'s'), 
        (id3_ucs4_t const   )((unsigned long )'i'),      (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'n'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_BEBOB[6]  = {      (id3_ucs4_t const   )((unsigned long )'B'),      (id3_ucs4_t const   )((unsigned long )'e'),      (id3_ucs4_t const   )((unsigned long )'b'),      (id3_ucs4_t const   )((unsigned long )'o'), 
        (id3_ucs4_t const   )((unsigned long )'b'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_LATIN[6]  = {      (id3_ucs4_t const   )((unsigned long )'L'),      (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )((unsigned long )'t'),      (id3_ucs4_t const   )((unsigned long )'i'), 
        (id3_ucs4_t const   )((unsigned long )'n'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_REVIVAL[8]  = 
  {      (id3_ucs4_t const   )((unsigned long )'R'),      (id3_ucs4_t const   )((unsigned long )'e'),      (id3_ucs4_t const   )((unsigned long )'v'),      (id3_ucs4_t const   )((unsigned long )'i'), 
        (id3_ucs4_t const   )((unsigned long )'v'),      (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )((unsigned long )'l'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_CELTIC[7]  = {      (id3_ucs4_t const   )((unsigned long )'C'),      (id3_ucs4_t const   )((unsigned long )'e'),      (id3_ucs4_t const   )((unsigned long )'l'),      (id3_ucs4_t const   )((unsigned long )'t'), 
        (id3_ucs4_t const   )((unsigned long )'i'),      (id3_ucs4_t const   )((unsigned long )'c'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_BLUEGRASS[10]  = 
  {      (id3_ucs4_t const   )((unsigned long )'B'),      (id3_ucs4_t const   )((unsigned long )'l'),      (id3_ucs4_t const   )((unsigned long )'u'),      (id3_ucs4_t const   )((unsigned long )'e'), 
        (id3_ucs4_t const   )((unsigned long )'g'),      (id3_ucs4_t const   )((unsigned long )'r'),      (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )((unsigned long )'s'), 
        (id3_ucs4_t const   )((unsigned long )'s'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_AVANTGARDE[11]  = 
  {      (id3_ucs4_t const   )((unsigned long )'A'),      (id3_ucs4_t const   )((unsigned long )'v'),      (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )((unsigned long )'n'), 
        (id3_ucs4_t const   )((unsigned long )'t'),      (id3_ucs4_t const   )((unsigned long )'g'),      (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )((unsigned long )'r'), 
        (id3_ucs4_t const   )((unsigned long )'d'),      (id3_ucs4_t const   )((unsigned long )'e'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_GOTHIC_ROCK[12]  = 
  {      (id3_ucs4_t const   )((unsigned long )'G'),      (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'t'),      (id3_ucs4_t const   )((unsigned long )'h'), 
        (id3_ucs4_t const   )((unsigned long )'i'),      (id3_ucs4_t const   )((unsigned long )'c'),      (id3_ucs4_t const   )((unsigned long )' '),      (id3_ucs4_t const   )((unsigned long )'R'), 
        (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'c'),      (id3_ucs4_t const   )((unsigned long )'k'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_PROGRESSIVE_ROCK[17]  = 
  {      (id3_ucs4_t const   )((unsigned long )'P'),      (id3_ucs4_t const   )((unsigned long )'r'),      (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'g'), 
        (id3_ucs4_t const   )((unsigned long )'r'),      (id3_ucs4_t const   )((unsigned long )'e'),      (id3_ucs4_t const   )((unsigned long )'s'),      (id3_ucs4_t const   )((unsigned long )'s'), 
        (id3_ucs4_t const   )((unsigned long )'i'),      (id3_ucs4_t const   )((unsigned long )'v'),      (id3_ucs4_t const   )((unsigned long )'e'),      (id3_ucs4_t const   )((unsigned long )' '), 
        (id3_ucs4_t const   )((unsigned long )'R'),      (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'c'),      (id3_ucs4_t const   )((unsigned long )'k'), 
        (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_PSYCHEDELIC_ROCK[17]  = 
  {      (id3_ucs4_t const   )((unsigned long )'P'),      (id3_ucs4_t const   )((unsigned long )'s'),      (id3_ucs4_t const   )((unsigned long )'y'),      (id3_ucs4_t const   )((unsigned long )'c'), 
        (id3_ucs4_t const   )((unsigned long )'h'),      (id3_ucs4_t const   )((unsigned long )'e'),      (id3_ucs4_t const   )((unsigned long )'d'),      (id3_ucs4_t const   )((unsigned long )'e'), 
        (id3_ucs4_t const   )((unsigned long )'l'),      (id3_ucs4_t const   )((unsigned long )'i'),      (id3_ucs4_t const   )((unsigned long )'c'),      (id3_ucs4_t const   )((unsigned long )' '), 
        (id3_ucs4_t const   )((unsigned long )'R'),      (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'c'),      (id3_ucs4_t const   )((unsigned long )'k'), 
        (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_SYMPHONIC_ROCK[15]  = 
  {      (id3_ucs4_t const   )((unsigned long )'S'),      (id3_ucs4_t const   )((unsigned long )'y'),      (id3_ucs4_t const   )((unsigned long )'m'),      (id3_ucs4_t const   )((unsigned long )'p'), 
        (id3_ucs4_t const   )((unsigned long )'h'),      (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'n'),      (id3_ucs4_t const   )((unsigned long )'i'), 
        (id3_ucs4_t const   )((unsigned long )'c'),      (id3_ucs4_t const   )((unsigned long )' '),      (id3_ucs4_t const   )((unsigned long )'R'),      (id3_ucs4_t const   )((unsigned long )'o'), 
        (id3_ucs4_t const   )((unsigned long )'c'),      (id3_ucs4_t const   )((unsigned long )'k'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_SLOW_ROCK[10]  = 
  {      (id3_ucs4_t const   )((unsigned long )'S'),      (id3_ucs4_t const   )((unsigned long )'l'),      (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'w'), 
        (id3_ucs4_t const   )((unsigned long )' '),      (id3_ucs4_t const   )((unsigned long )'R'),      (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'c'), 
        (id3_ucs4_t const   )((unsigned long )'k'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_BIG_BAND[9]  = 
  {      (id3_ucs4_t const   )((unsigned long )'B'),      (id3_ucs4_t const   )((unsigned long )'i'),      (id3_ucs4_t const   )((unsigned long )'g'),      (id3_ucs4_t const   )((unsigned long )' '), 
        (id3_ucs4_t const   )((unsigned long )'B'),      (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )((unsigned long )'n'),      (id3_ucs4_t const   )((unsigned long )'d'), 
        (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_CHORUS[7]  = {      (id3_ucs4_t const   )((unsigned long )'C'),      (id3_ucs4_t const   )((unsigned long )'h'),      (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'r'), 
        (id3_ucs4_t const   )((unsigned long )'u'),      (id3_ucs4_t const   )((unsigned long )'s'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_EASY_LISTENING[15]  = 
  {      (id3_ucs4_t const   )((unsigned long )'E'),      (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )((unsigned long )'s'),      (id3_ucs4_t const   )((unsigned long )'y'), 
        (id3_ucs4_t const   )((unsigned long )' '),      (id3_ucs4_t const   )((unsigned long )'L'),      (id3_ucs4_t const   )((unsigned long )'i'),      (id3_ucs4_t const   )((unsigned long )'s'), 
        (id3_ucs4_t const   )((unsigned long )'t'),      (id3_ucs4_t const   )((unsigned long )'e'),      (id3_ucs4_t const   )((unsigned long )'n'),      (id3_ucs4_t const   )((unsigned long )'i'), 
        (id3_ucs4_t const   )((unsigned long )'n'),      (id3_ucs4_t const   )((unsigned long )'g'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_ACOUSTIC[9]  = 
  {      (id3_ucs4_t const   )((unsigned long )'A'),      (id3_ucs4_t const   )((unsigned long )'c'),      (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'u'), 
        (id3_ucs4_t const   )((unsigned long )'s'),      (id3_ucs4_t const   )((unsigned long )'t'),      (id3_ucs4_t const   )((unsigned long )'i'),      (id3_ucs4_t const   )((unsigned long )'c'), 
        (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_HUMOUR[7]  = {      (id3_ucs4_t const   )((unsigned long )'H'),      (id3_ucs4_t const   )((unsigned long )'u'),      (id3_ucs4_t const   )((unsigned long )'m'),      (id3_ucs4_t const   )((unsigned long )'o'), 
        (id3_ucs4_t const   )((unsigned long )'u'),      (id3_ucs4_t const   )((unsigned long )'r'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_SPEECH[7]  = {      (id3_ucs4_t const   )((unsigned long )'S'),      (id3_ucs4_t const   )((unsigned long )'p'),      (id3_ucs4_t const   )((unsigned long )'e'),      (id3_ucs4_t const   )((unsigned long )'e'), 
        (id3_ucs4_t const   )((unsigned long )'c'),      (id3_ucs4_t const   )((unsigned long )'h'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_CHANSON[8]  = 
  {      (id3_ucs4_t const   )((unsigned long )'C'),      (id3_ucs4_t const   )((unsigned long )'h'),      (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )((unsigned long )'n'), 
        (id3_ucs4_t const   )((unsigned long )'s'),      (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'n'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_OPERA[6]  = {      (id3_ucs4_t const   )((unsigned long )'O'),      (id3_ucs4_t const   )((unsigned long )'p'),      (id3_ucs4_t const   )((unsigned long )'e'),      (id3_ucs4_t const   )((unsigned long )'r'), 
        (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_CHAMBER_MUSIC[14]  = 
  {      (id3_ucs4_t const   )((unsigned long )'C'),      (id3_ucs4_t const   )((unsigned long )'h'),      (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )((unsigned long )'m'), 
        (id3_ucs4_t const   )((unsigned long )'b'),      (id3_ucs4_t const   )((unsigned long )'e'),      (id3_ucs4_t const   )((unsigned long )'r'),      (id3_ucs4_t const   )((unsigned long )' '), 
        (id3_ucs4_t const   )((unsigned long )'M'),      (id3_ucs4_t const   )((unsigned long )'u'),      (id3_ucs4_t const   )((unsigned long )'s'),      (id3_ucs4_t const   )((unsigned long )'i'), 
        (id3_ucs4_t const   )((unsigned long )'c'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_SONATA[7]  = {      (id3_ucs4_t const   )((unsigned long )'S'),      (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'n'),      (id3_ucs4_t const   )((unsigned long )'a'), 
        (id3_ucs4_t const   )((unsigned long )'t'),      (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_SYMPHONY[9]  = 
  {      (id3_ucs4_t const   )((unsigned long )'S'),      (id3_ucs4_t const   )((unsigned long )'y'),      (id3_ucs4_t const   )((unsigned long )'m'),      (id3_ucs4_t const   )((unsigned long )'p'), 
        (id3_ucs4_t const   )((unsigned long )'h'),      (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'n'),      (id3_ucs4_t const   )((unsigned long )'y'), 
        (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_BOOTY_BASS[11]  = 
  {      (id3_ucs4_t const   )((unsigned long )'B'),      (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'t'), 
        (id3_ucs4_t const   )((unsigned long )'y'),      (id3_ucs4_t const   )((unsigned long )' '),      (id3_ucs4_t const   )((unsigned long )'B'),      (id3_ucs4_t const   )((unsigned long )'a'), 
        (id3_ucs4_t const   )((unsigned long )'s'),      (id3_ucs4_t const   )((unsigned long )'s'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_PRIMUS[7]  = {      (id3_ucs4_t const   )((unsigned long )'P'),      (id3_ucs4_t const   )((unsigned long )'r'),      (id3_ucs4_t const   )((unsigned long )'i'),      (id3_ucs4_t const   )((unsigned long )'m'), 
        (id3_ucs4_t const   )((unsigned long )'u'),      (id3_ucs4_t const   )((unsigned long )'s'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_PORN_GROOVE[12]  = 
  {      (id3_ucs4_t const   )((unsigned long )'P'),      (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'r'),      (id3_ucs4_t const   )((unsigned long )'n'), 
        (id3_ucs4_t const   )((unsigned long )' '),      (id3_ucs4_t const   )((unsigned long )'G'),      (id3_ucs4_t const   )((unsigned long )'r'),      (id3_ucs4_t const   )((unsigned long )'o'), 
        (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'v'),      (id3_ucs4_t const   )((unsigned long )'e'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_SATIRE[7]  = {      (id3_ucs4_t const   )((unsigned long )'S'),      (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )((unsigned long )'t'),      (id3_ucs4_t const   )((unsigned long )'i'), 
        (id3_ucs4_t const   )((unsigned long )'r'),      (id3_ucs4_t const   )((unsigned long )'e'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_SLOW_JAM[9]  = 
  {      (id3_ucs4_t const   )((unsigned long )'S'),      (id3_ucs4_t const   )((unsigned long )'l'),      (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'w'), 
        (id3_ucs4_t const   )((unsigned long )' '),      (id3_ucs4_t const   )((unsigned long )'J'),      (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )((unsigned long )'m'), 
        (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_CLUB[5]  = {      (id3_ucs4_t const   )((unsigned long )'C'),      (id3_ucs4_t const   )((unsigned long )'l'),      (id3_ucs4_t const   )((unsigned long )'u'),      (id3_ucs4_t const   )((unsigned long )'b'), 
        (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_TANGO[6]  = {      (id3_ucs4_t const   )((unsigned long )'T'),      (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )((unsigned long )'n'),      (id3_ucs4_t const   )((unsigned long )'g'), 
        (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_SAMBA[6]  = {      (id3_ucs4_t const   )((unsigned long )'S'),      (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )((unsigned long )'m'),      (id3_ucs4_t const   )((unsigned long )'b'), 
        (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_FOLKLORE[9]  = 
  {      (id3_ucs4_t const   )((unsigned long )'F'),      (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'l'),      (id3_ucs4_t const   )((unsigned long )'k'), 
        (id3_ucs4_t const   )((unsigned long )'l'),      (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'r'),      (id3_ucs4_t const   )((unsigned long )'e'), 
        (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_BALLAD[7]  = {      (id3_ucs4_t const   )((unsigned long )'B'),      (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )((unsigned long )'l'),      (id3_ucs4_t const   )((unsigned long )'l'), 
        (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )((unsigned long )'d'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_POWER_BALLAD[13]  = 
  {      (id3_ucs4_t const   )((unsigned long )'P'),      (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'w'),      (id3_ucs4_t const   )((unsigned long )'e'), 
        (id3_ucs4_t const   )((unsigned long )'r'),      (id3_ucs4_t const   )((unsigned long )' '),      (id3_ucs4_t const   )((unsigned long )'B'),      (id3_ucs4_t const   )((unsigned long )'a'), 
        (id3_ucs4_t const   )((unsigned long )'l'),      (id3_ucs4_t const   )((unsigned long )'l'),      (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )((unsigned long )'d'), 
        (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_RHYTHMIC_SOUL[14]  = 
  {      (id3_ucs4_t const   )((unsigned long )'R'),      (id3_ucs4_t const   )((unsigned long )'h'),      (id3_ucs4_t const   )((unsigned long )'y'),      (id3_ucs4_t const   )((unsigned long )'t'), 
        (id3_ucs4_t const   )((unsigned long )'h'),      (id3_ucs4_t const   )((unsigned long )'m'),      (id3_ucs4_t const   )((unsigned long )'i'),      (id3_ucs4_t const   )((unsigned long )'c'), 
        (id3_ucs4_t const   )((unsigned long )' '),      (id3_ucs4_t const   )((unsigned long )'S'),      (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'u'), 
        (id3_ucs4_t const   )((unsigned long )'l'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_FREESTYLE[10]  = 
  {      (id3_ucs4_t const   )((unsigned long )'F'),      (id3_ucs4_t const   )((unsigned long )'r'),      (id3_ucs4_t const   )((unsigned long )'e'),      (id3_ucs4_t const   )((unsigned long )'e'), 
        (id3_ucs4_t const   )((unsigned long )'s'),      (id3_ucs4_t const   )((unsigned long )'t'),      (id3_ucs4_t const   )((unsigned long )'y'),      (id3_ucs4_t const   )((unsigned long )'l'), 
        (id3_ucs4_t const   )((unsigned long )'e'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_DUET[5]  = {      (id3_ucs4_t const   )((unsigned long )'D'),      (id3_ucs4_t const   )((unsigned long )'u'),      (id3_ucs4_t const   )((unsigned long )'e'),      (id3_ucs4_t const   )((unsigned long )'t'), 
        (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_PUNK_ROCK[10]  = 
  {      (id3_ucs4_t const   )((unsigned long )'P'),      (id3_ucs4_t const   )((unsigned long )'u'),      (id3_ucs4_t const   )((unsigned long )'n'),      (id3_ucs4_t const   )((unsigned long )'k'), 
        (id3_ucs4_t const   )((unsigned long )' '),      (id3_ucs4_t const   )((unsigned long )'R'),      (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'c'), 
        (id3_ucs4_t const   )((unsigned long )'k'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_DRUM_SOLO[10]  = 
  {      (id3_ucs4_t const   )((unsigned long )'D'),      (id3_ucs4_t const   )((unsigned long )'r'),      (id3_ucs4_t const   )((unsigned long )'u'),      (id3_ucs4_t const   )((unsigned long )'m'), 
        (id3_ucs4_t const   )((unsigned long )' '),      (id3_ucs4_t const   )((unsigned long )'S'),      (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'l'), 
        (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_A_CAPPELLA[11]  = 
  {      (id3_ucs4_t const   )((unsigned long )'A'),      (id3_ucs4_t const   )((unsigned long )' '),      (id3_ucs4_t const   )((unsigned long )'C'),      (id3_ucs4_t const   )((unsigned long )'a'), 
        (id3_ucs4_t const   )((unsigned long )'p'),      (id3_ucs4_t const   )((unsigned long )'p'),      (id3_ucs4_t const   )((unsigned long )'e'),      (id3_ucs4_t const   )((unsigned long )'l'), 
        (id3_ucs4_t const   )((unsigned long )'l'),      (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_EURO_HOUSE[11]  = 
  {      (id3_ucs4_t const   )((unsigned long )'E'),      (id3_ucs4_t const   )((unsigned long )'u'),      (id3_ucs4_t const   )((unsigned long )'r'),      (id3_ucs4_t const   )((unsigned long )'o'), 
        (id3_ucs4_t const   )((unsigned long )'-'),      (id3_ucs4_t const   )((unsigned long )'H'),      (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'u'), 
        (id3_ucs4_t const   )((unsigned long )'s'),      (id3_ucs4_t const   )((unsigned long )'e'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_DANCE_HALL[11]  = 
  {      (id3_ucs4_t const   )((unsigned long )'D'),      (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )((unsigned long )'n'),      (id3_ucs4_t const   )((unsigned long )'c'), 
        (id3_ucs4_t const   )((unsigned long )'e'),      (id3_ucs4_t const   )((unsigned long )' '),      (id3_ucs4_t const   )((unsigned long )'H'),      (id3_ucs4_t const   )((unsigned long )'a'), 
        (id3_ucs4_t const   )((unsigned long )'l'),      (id3_ucs4_t const   )((unsigned long )'l'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_GOA[4]  = {      (id3_ucs4_t const   )((unsigned long )'G'),      (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_DRUM___BASS[12]  = 
  {      (id3_ucs4_t const   )((unsigned long )'D'),      (id3_ucs4_t const   )((unsigned long )'r'),      (id3_ucs4_t const   )((unsigned long )'u'),      (id3_ucs4_t const   )((unsigned long )'m'), 
        (id3_ucs4_t const   )((unsigned long )' '),      (id3_ucs4_t const   )((unsigned long )'&'),      (id3_ucs4_t const   )((unsigned long )' '),      (id3_ucs4_t const   )((unsigned long )'B'), 
        (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )((unsigned long )'s'),      (id3_ucs4_t const   )((unsigned long )'s'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_CLUB_HOUSE[11]  = 
  {      (id3_ucs4_t const   )((unsigned long )'C'),      (id3_ucs4_t const   )((unsigned long )'l'),      (id3_ucs4_t const   )((unsigned long )'u'),      (id3_ucs4_t const   )((unsigned long )'b'), 
        (id3_ucs4_t const   )((unsigned long )'-'),      (id3_ucs4_t const   )((unsigned long )'H'),      (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'u'), 
        (id3_ucs4_t const   )((unsigned long )'s'),      (id3_ucs4_t const   )((unsigned long )'e'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_HARDCORE[9]  = 
  {      (id3_ucs4_t const   )((unsigned long )'H'),      (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )((unsigned long )'r'),      (id3_ucs4_t const   )((unsigned long )'d'), 
        (id3_ucs4_t const   )((unsigned long )'c'),      (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'r'),      (id3_ucs4_t const   )((unsigned long )'e'), 
        (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_TERROR[7]  = {      (id3_ucs4_t const   )((unsigned long )'T'),      (id3_ucs4_t const   )((unsigned long )'e'),      (id3_ucs4_t const   )((unsigned long )'r'),      (id3_ucs4_t const   )((unsigned long )'r'), 
        (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'r'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_INDIE[6]  = {      (id3_ucs4_t const   )((unsigned long )'I'),      (id3_ucs4_t const   )((unsigned long )'n'),      (id3_ucs4_t const   )((unsigned long )'d'),      (id3_ucs4_t const   )((unsigned long )'i'), 
        (id3_ucs4_t const   )((unsigned long )'e'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_BRITPOP[8]  = 
  {      (id3_ucs4_t const   )((unsigned long )'B'),      (id3_ucs4_t const   )((unsigned long )'r'),      (id3_ucs4_t const   )((unsigned long )'i'),      (id3_ucs4_t const   )((unsigned long )'t'), 
        (id3_ucs4_t const   )((unsigned long )'P'),      (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'p'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_NEGERPUNK[10]  = 
  {      (id3_ucs4_t const   )((unsigned long )'N'),      (id3_ucs4_t const   )((unsigned long )'e'),      (id3_ucs4_t const   )((unsigned long )'g'),      (id3_ucs4_t const   )((unsigned long )'e'), 
        (id3_ucs4_t const   )((unsigned long )'r'),      (id3_ucs4_t const   )((unsigned long )'p'),      (id3_ucs4_t const   )((unsigned long )'u'),      (id3_ucs4_t const   )((unsigned long )'n'), 
        (id3_ucs4_t const   )((unsigned long )'k'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_POLSK_PUNK[11]  = 
  {      (id3_ucs4_t const   )((unsigned long )'P'),      (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'l'),      (id3_ucs4_t const   )((unsigned long )'s'), 
        (id3_ucs4_t const   )((unsigned long )'k'),      (id3_ucs4_t const   )((unsigned long )' '),      (id3_ucs4_t const   )((unsigned long )'P'),      (id3_ucs4_t const   )((unsigned long )'u'), 
        (id3_ucs4_t const   )((unsigned long )'n'),      (id3_ucs4_t const   )((unsigned long )'k'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_BEAT[5]  = {      (id3_ucs4_t const   )((unsigned long )'B'),      (id3_ucs4_t const   )((unsigned long )'e'),      (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )((unsigned long )'t'), 
        (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_CHRISTIAN_GANGSTA_RAP[22]  = 
  {      (id3_ucs4_t const   )((unsigned long )'C'),      (id3_ucs4_t const   )((unsigned long )'h'),      (id3_ucs4_t const   )((unsigned long )'r'),      (id3_ucs4_t const   )((unsigned long )'i'), 
        (id3_ucs4_t const   )((unsigned long )'s'),      (id3_ucs4_t const   )((unsigned long )'t'),      (id3_ucs4_t const   )((unsigned long )'i'),      (id3_ucs4_t const   )((unsigned long )'a'), 
        (id3_ucs4_t const   )((unsigned long )'n'),      (id3_ucs4_t const   )((unsigned long )' '),      (id3_ucs4_t const   )((unsigned long )'G'),      (id3_ucs4_t const   )((unsigned long )'a'), 
        (id3_ucs4_t const   )((unsigned long )'n'),      (id3_ucs4_t const   )((unsigned long )'g'),      (id3_ucs4_t const   )((unsigned long )'s'),      (id3_ucs4_t const   )((unsigned long )'t'), 
        (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )((unsigned long )' '),      (id3_ucs4_t const   )((unsigned long )'R'),      (id3_ucs4_t const   )((unsigned long )'a'), 
        (id3_ucs4_t const   )((unsigned long )'p'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_HEAVY_METAL[12]  = 
  {      (id3_ucs4_t const   )((unsigned long )'H'),      (id3_ucs4_t const   )((unsigned long )'e'),      (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )((unsigned long )'v'), 
        (id3_ucs4_t const   )((unsigned long )'y'),      (id3_ucs4_t const   )((unsigned long )' '),      (id3_ucs4_t const   )((unsigned long )'M'),      (id3_ucs4_t const   )((unsigned long )'e'), 
        (id3_ucs4_t const   )((unsigned long )'t'),      (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )((unsigned long )'l'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_BLACK_METAL[12]  = 
  {      (id3_ucs4_t const   )((unsigned long )'B'),      (id3_ucs4_t const   )((unsigned long )'l'),      (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )((unsigned long )'c'), 
        (id3_ucs4_t const   )((unsigned long )'k'),      (id3_ucs4_t const   )((unsigned long )' '),      (id3_ucs4_t const   )((unsigned long )'M'),      (id3_ucs4_t const   )((unsigned long )'e'), 
        (id3_ucs4_t const   )((unsigned long )'t'),      (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )((unsigned long )'l'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_CROSSOVER[10]  = 
  {      (id3_ucs4_t const   )((unsigned long )'C'),      (id3_ucs4_t const   )((unsigned long )'r'),      (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'s'), 
        (id3_ucs4_t const   )((unsigned long )'s'),      (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'v'),      (id3_ucs4_t const   )((unsigned long )'e'), 
        (id3_ucs4_t const   )((unsigned long )'r'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_CONTEMPORARY_CHRISTIAN[23]  = 
  {      (id3_ucs4_t const   )((unsigned long )'C'),      (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'n'),      (id3_ucs4_t const   )((unsigned long )'t'), 
        (id3_ucs4_t const   )((unsigned long )'e'),      (id3_ucs4_t const   )((unsigned long )'m'),      (id3_ucs4_t const   )((unsigned long )'p'),      (id3_ucs4_t const   )((unsigned long )'o'), 
        (id3_ucs4_t const   )((unsigned long )'r'),      (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )((unsigned long )'r'),      (id3_ucs4_t const   )((unsigned long )'y'), 
        (id3_ucs4_t const   )((unsigned long )' '),      (id3_ucs4_t const   )((unsigned long )'C'),      (id3_ucs4_t const   )((unsigned long )'h'),      (id3_ucs4_t const   )((unsigned long )'r'), 
        (id3_ucs4_t const   )((unsigned long )'i'),      (id3_ucs4_t const   )((unsigned long )'s'),      (id3_ucs4_t const   )((unsigned long )'t'),      (id3_ucs4_t const   )((unsigned long )'i'), 
        (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )((unsigned long )'n'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_CHRISTIAN_ROCK[15]  = 
  {      (id3_ucs4_t const   )((unsigned long )'C'),      (id3_ucs4_t const   )((unsigned long )'h'),      (id3_ucs4_t const   )((unsigned long )'r'),      (id3_ucs4_t const   )((unsigned long )'i'), 
        (id3_ucs4_t const   )((unsigned long )'s'),      (id3_ucs4_t const   )((unsigned long )'t'),      (id3_ucs4_t const   )((unsigned long )'i'),      (id3_ucs4_t const   )((unsigned long )'a'), 
        (id3_ucs4_t const   )((unsigned long )'n'),      (id3_ucs4_t const   )((unsigned long )' '),      (id3_ucs4_t const   )((unsigned long )'R'),      (id3_ucs4_t const   )((unsigned long )'o'), 
        (id3_ucs4_t const   )((unsigned long )'c'),      (id3_ucs4_t const   )((unsigned long )'k'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_MERENGUE[9]  = 
  {      (id3_ucs4_t const   )((unsigned long )'M'),      (id3_ucs4_t const   )((unsigned long )'e'),      (id3_ucs4_t const   )((unsigned long )'r'),      (id3_ucs4_t const   )((unsigned long )'e'), 
        (id3_ucs4_t const   )((unsigned long )'n'),      (id3_ucs4_t const   )((unsigned long )'g'),      (id3_ucs4_t const   )((unsigned long )'u'),      (id3_ucs4_t const   )((unsigned long )'e'), 
        (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_SALSA[6]  = {      (id3_ucs4_t const   )((unsigned long )'S'),      (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )((unsigned long )'l'),      (id3_ucs4_t const   )((unsigned long )'s'), 
        (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_THRASH_METAL[13]  = 
  {      (id3_ucs4_t const   )((unsigned long )'T'),      (id3_ucs4_t const   )((unsigned long )'h'),      (id3_ucs4_t const   )((unsigned long )'r'),      (id3_ucs4_t const   )((unsigned long )'a'), 
        (id3_ucs4_t const   )((unsigned long )'s'),      (id3_ucs4_t const   )((unsigned long )'h'),      (id3_ucs4_t const   )((unsigned long )' '),      (id3_ucs4_t const   )((unsigned long )'M'), 
        (id3_ucs4_t const   )((unsigned long )'e'),      (id3_ucs4_t const   )((unsigned long )'t'),      (id3_ucs4_t const   )((unsigned long )'a'),      (id3_ucs4_t const   )((unsigned long )'l'), 
        (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_ANIME[6]  = {      (id3_ucs4_t const   )((unsigned long )'A'),      (id3_ucs4_t const   )((unsigned long )'n'),      (id3_ucs4_t const   )((unsigned long )'i'),      (id3_ucs4_t const   )((unsigned long )'m'), 
        (id3_ucs4_t const   )((unsigned long )'e'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_JPOP[5]  = {      (id3_ucs4_t const   )((unsigned long )'J'),      (id3_ucs4_t const   )((unsigned long )'P'),      (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'p'), 
        (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_SYNTHPOP[9]  = 
  {      (id3_ucs4_t const   )((unsigned long )'S'),      (id3_ucs4_t const   )((unsigned long )'y'),      (id3_ucs4_t const   )((unsigned long )'n'),      (id3_ucs4_t const   )((unsigned long )'t'), 
        (id3_ucs4_t const   )((unsigned long )'h'),      (id3_ucs4_t const   )((unsigned long )'p'),      (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'p'), 
        (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   * const  genre_table[148]  = 
  {      (id3_ucs4_t const   * const  )(genre_BLUES),      (id3_ucs4_t const   * const  )(genre_CLASSIC_ROCK),      (id3_ucs4_t const   * const  )(genre_COUNTRY),      (id3_ucs4_t const   * const  )(genre_DANCE), 
        (id3_ucs4_t const   * const  )(genre_DISCO),      (id3_ucs4_t const   * const  )(genre_FUNK),      (id3_ucs4_t const   * const  )(genre_GRUNGE),      (id3_ucs4_t const   * const  )(genre_HIP_HOP), 
        (id3_ucs4_t const   * const  )(genre_JAZZ),      (id3_ucs4_t const   * const  )(genre_METAL),      (id3_ucs4_t const   * const  )(genre_NEW_AGE),      (id3_ucs4_t const   * const  )(genre_OLDIES), 
        (id3_ucs4_t const   * const  )(genre_OTHER),      (id3_ucs4_t const   * const  )(genre_POP),      (id3_ucs4_t const   * const  )(genre_R_B),      (id3_ucs4_t const   * const  )(genre_RAP), 
        (id3_ucs4_t const   * const  )(genre_REGGAE),      (id3_ucs4_t const   * const  )(genre_ROCK),      (id3_ucs4_t const   * const  )(genre_TECHNO),      (id3_ucs4_t const   * const  )(genre_INDUSTRIAL), 
        (id3_ucs4_t const   * const  )(genre_ALTERNATIVE),      (id3_ucs4_t const   * const  )(genre_SKA),      (id3_ucs4_t const   * const  )(genre_DEATH_METAL),      (id3_ucs4_t const   * const  )(genre_PRANKS), 
        (id3_ucs4_t const   * const  )(genre_SOUNDTRACK),      (id3_ucs4_t const   * const  )(genre_EURO_TECHNO),      (id3_ucs4_t const   * const  )(genre_AMBIENT),      (id3_ucs4_t const   * const  )(genre_TRIP_HOP), 
        (id3_ucs4_t const   * const  )(genre_VOCAL),      (id3_ucs4_t const   * const  )(genre_JAZZ_FUNK),      (id3_ucs4_t const   * const  )(genre_FUSION),      (id3_ucs4_t const   * const  )(genre_TRANCE), 
        (id3_ucs4_t const   * const  )(genre_CLASSICAL),      (id3_ucs4_t const   * const  )(genre_INSTRUMENTAL),      (id3_ucs4_t const   * const  )(genre_ACID),      (id3_ucs4_t const   * const  )(genre_HOUSE), 
        (id3_ucs4_t const   * const  )(genre_GAME),      (id3_ucs4_t const   * const  )(genre_SOUND_CLIP),      (id3_ucs4_t const   * const  )(genre_GOSPEL),      (id3_ucs4_t const   * const  )(genre_NOISE), 
        (id3_ucs4_t const   * const  )(genre_ALTERNROCK),      (id3_ucs4_t const   * const  )(genre_BASS),      (id3_ucs4_t const   * const  )(genre_SOUL),      (id3_ucs4_t const   * const  )(genre_PUNK), 
        (id3_ucs4_t const   * const  )(genre_SPACE),      (id3_ucs4_t const   * const  )(genre_MEDITATIVE),      (id3_ucs4_t const   * const  )(genre_INSTRUMENTAL_POP),      (id3_ucs4_t const   * const  )(genre_INSTRUMENTAL_ROCK), 
        (id3_ucs4_t const   * const  )(genre_ETHNIC),      (id3_ucs4_t const   * const  )(genre_GOTHIC),      (id3_ucs4_t const   * const  )(genre_DARKWAVE),      (id3_ucs4_t const   * const  )(genre_TECHNO_INDUSTRIAL), 
        (id3_ucs4_t const   * const  )(genre_ELECTRONIC),      (id3_ucs4_t const   * const  )(genre_POP_FOLK),      (id3_ucs4_t const   * const  )(genre_EURODANCE),      (id3_ucs4_t const   * const  )(genre_DREAM), 
        (id3_ucs4_t const   * const  )(genre_SOUTHERN_ROCK),      (id3_ucs4_t const   * const  )(genre_COMEDY),      (id3_ucs4_t const   * const  )(genre_CULT),      (id3_ucs4_t const   * const  )(genre_GANGSTA), 
        (id3_ucs4_t const   * const  )(genre_TOP_40),      (id3_ucs4_t const   * const  )(genre_CHRISTIAN_RAP),      (id3_ucs4_t const   * const  )(genre_POP_FUNK),      (id3_ucs4_t const   * const  )(genre_JUNGLE), 
        (id3_ucs4_t const   * const  )(genre_NATIVE_AMERICAN),      (id3_ucs4_t const   * const  )(genre_CABARET),      (id3_ucs4_t const   * const  )(genre_NEW_WAVE),      (id3_ucs4_t const   * const  )(genre_PSYCHEDELIC), 
        (id3_ucs4_t const   * const  )(genre_RAVE),      (id3_ucs4_t const   * const  )(genre_SHOWTUNES),      (id3_ucs4_t const   * const  )(genre_TRAILER),      (id3_ucs4_t const   * const  )(genre_LO_FI), 
        (id3_ucs4_t const   * const  )(genre_TRIBAL),      (id3_ucs4_t const   * const  )(genre_ACID_PUNK),      (id3_ucs4_t const   * const  )(genre_ACID_JAZZ),      (id3_ucs4_t const   * const  )(genre_POLKA), 
        (id3_ucs4_t const   * const  )(genre_RETRO),      (id3_ucs4_t const   * const  )(genre_MUSICAL),      (id3_ucs4_t const   * const  )(genre_ROCK___ROLL),      (id3_ucs4_t const   * const  )(genre_HARD_ROCK), 
        (id3_ucs4_t const   * const  )(genre_FOLK),      (id3_ucs4_t const   * const  )(genre_FOLK_ROCK),      (id3_ucs4_t const   * const  )(genre_NATIONAL_FOLK),      (id3_ucs4_t const   * const  )(genre_SWING), 
        (id3_ucs4_t const   * const  )(genre_FAST_FUSION),      (id3_ucs4_t const   * const  )(genre_BEBOB),      (id3_ucs4_t const   * const  )(genre_LATIN),      (id3_ucs4_t const   * const  )(genre_REVIVAL), 
        (id3_ucs4_t const   * const  )(genre_CELTIC),      (id3_ucs4_t const   * const  )(genre_BLUEGRASS),      (id3_ucs4_t const   * const  )(genre_AVANTGARDE),      (id3_ucs4_t const   * const  )(genre_GOTHIC_ROCK), 
        (id3_ucs4_t const   * const  )(genre_PROGRESSIVE_ROCK),      (id3_ucs4_t const   * const  )(genre_PSYCHEDELIC_ROCK),      (id3_ucs4_t const   * const  )(genre_SYMPHONIC_ROCK),      (id3_ucs4_t const   * const  )(genre_SLOW_ROCK), 
        (id3_ucs4_t const   * const  )(genre_BIG_BAND),      (id3_ucs4_t const   * const  )(genre_CHORUS),      (id3_ucs4_t const   * const  )(genre_EASY_LISTENING),      (id3_ucs4_t const   * const  )(genre_ACOUSTIC), 
        (id3_ucs4_t const   * const  )(genre_HUMOUR),      (id3_ucs4_t const   * const  )(genre_SPEECH),      (id3_ucs4_t const   * const  )(genre_CHANSON),      (id3_ucs4_t const   * const  )(genre_OPERA), 
        (id3_ucs4_t const   * const  )(genre_CHAMBER_MUSIC),      (id3_ucs4_t const   * const  )(genre_SONATA),      (id3_ucs4_t const   * const  )(genre_SYMPHONY),      (id3_ucs4_t const   * const  )(genre_BOOTY_BASS), 
        (id3_ucs4_t const   * const  )(genre_PRIMUS),      (id3_ucs4_t const   * const  )(genre_PORN_GROOVE),      (id3_ucs4_t const   * const  )(genre_SATIRE),      (id3_ucs4_t const   * const  )(genre_SLOW_JAM), 
        (id3_ucs4_t const   * const  )(genre_CLUB),      (id3_ucs4_t const   * const  )(genre_TANGO),      (id3_ucs4_t const   * const  )(genre_SAMBA),      (id3_ucs4_t const   * const  )(genre_FOLKLORE), 
        (id3_ucs4_t const   * const  )(genre_BALLAD),      (id3_ucs4_t const   * const  )(genre_POWER_BALLAD),      (id3_ucs4_t const   * const  )(genre_RHYTHMIC_SOUL),      (id3_ucs4_t const   * const  )(genre_FREESTYLE), 
        (id3_ucs4_t const   * const  )(genre_DUET),      (id3_ucs4_t const   * const  )(genre_PUNK_ROCK),      (id3_ucs4_t const   * const  )(genre_DRUM_SOLO),      (id3_ucs4_t const   * const  )(genre_A_CAPPELLA), 
        (id3_ucs4_t const   * const  )(genre_EURO_HOUSE),      (id3_ucs4_t const   * const  )(genre_DANCE_HALL),      (id3_ucs4_t const   * const  )(genre_GOA),      (id3_ucs4_t const   * const  )(genre_DRUM___BASS), 
        (id3_ucs4_t const   * const  )(genre_CLUB_HOUSE),      (id3_ucs4_t const   * const  )(genre_HARDCORE),      (id3_ucs4_t const   * const  )(genre_TERROR),      (id3_ucs4_t const   * const  )(genre_INDIE), 
        (id3_ucs4_t const   * const  )(genre_BRITPOP),      (id3_ucs4_t const   * const  )(genre_NEGERPUNK),      (id3_ucs4_t const   * const  )(genre_POLSK_PUNK),      (id3_ucs4_t const   * const  )(genre_BEAT), 
        (id3_ucs4_t const   * const  )(genre_CHRISTIAN_GANGSTA_RAP),      (id3_ucs4_t const   * const  )(genre_HEAVY_METAL),      (id3_ucs4_t const   * const  )(genre_BLACK_METAL),      (id3_ucs4_t const   * const  )(genre_CROSSOVER), 
        (id3_ucs4_t const   * const  )(genre_CONTEMPORARY_CHRISTIAN),      (id3_ucs4_t const   * const  )(genre_CHRISTIAN_ROCK),      (id3_ucs4_t const   * const  )(genre_MERENGUE),      (id3_ucs4_t const   * const  )(genre_SALSA), 
        (id3_ucs4_t const   * const  )(genre_THRASH_METAL),      (id3_ucs4_t const   * const  )(genre_ANIME),      (id3_ucs4_t const   * const  )(genre_JPOP),      (id3_ucs4_t const   * const  )(genre_SYNTHPOP)};
id3_ucs4_t const   *id3_genre_index(unsigned int index ) 
{ id3_ucs4_t const   *tmp ;

  {
  if (index < sizeof(genre_table) / sizeof(genre_table[0])) {
    tmp = (id3_ucs4_t const   *)genre_table[index];
  } else {
    tmp = (id3_ucs4_t const   *)((id3_ucs4_t const   * const  )0);
  }
  return (tmp);
}
}
static id3_ucs4_t const   genre_remix[6]  = {      (id3_ucs4_t const   )((unsigned long )'R'),      (id3_ucs4_t const   )((unsigned long )'e'),      (id3_ucs4_t const   )((unsigned long )'m'),      (id3_ucs4_t const   )((unsigned long )'i'), 
        (id3_ucs4_t const   )((unsigned long )'x'),      (id3_ucs4_t const   )0UL};
static id3_ucs4_t const   genre_cover[6]  = {      (id3_ucs4_t const   )((unsigned long )'C'),      (id3_ucs4_t const   )((unsigned long )'o'),      (id3_ucs4_t const   )((unsigned long )'v'),      (id3_ucs4_t const   )((unsigned long )'e'), 
        (id3_ucs4_t const   )((unsigned long )'r'),      (id3_ucs4_t const   )0UL};
id3_ucs4_t const   *id3_genre_name(id3_ucs4_t const   *string ) 
{ id3_ucs4_t const   *ptr ;
  unsigned long number ;
  id3_ucs4_t const   *tmp ;

  {
  if ((unsigned int )string == (unsigned int )((id3_ucs4_t const   *)0)) {
    goto _L;
  } else {
    if ((*string) == 0UL) {
      _L: 
      return (id3_ucs4_empty);
    }
  }
  if ((*(string + 0)) == 82UL) {
    if ((*(string + 1)) == 88UL) {
      if ((*(string + 2)) == 0UL) {
        return (genre_remix);
      } else {
        goto _L___1;
      }
    } else {
      goto _L___1;
    }
  } else {
    _L___1: ;
  }
  if ((*(string + 0)) == 67UL) {
    if ((*(string + 1)) == 82UL) {
      if ((*(string + 2)) == 0UL) {
        return (genre_cover);
      } else {
        goto _L___3;
      }
    } else {
      goto _L___3;
    }
  } else {
    _L___3: ;
  }
  ptr = string;
  while ((*ptr)) {
    if ((*ptr) < 48UL) {
      goto _L___4;
    } else {
      if ((*ptr) > 57UL) {
        _L___4: 
        return (string);
      }
    }
    ptr ++;
  }
  number = id3_ucs4_getnumber(string);
  if (number < (unsigned long )(sizeof(genre_table) / sizeof(genre_table[0]))) {
    tmp = (id3_ucs4_t const   *)genre_table[number];
  } else {
    tmp = (id3_ucs4_t const   *)((id3_ucs4_t const   * const  )string);
  }
  return (tmp);
}
}
static id3_ucs4_t translate(id3_ucs4_t ch ) 
{ 

  {
  if (ch) {
    if (ch >= 65UL) {
      if (ch <= 90UL) {
        ch += 32UL;
      } else {
        goto _L;
      }
    } else {
      _L: ;
    }
    if (ch < 97UL) {
      goto _L___0;
    } else {
      if (ch > 122UL) {
        _L___0: 
        ch = 183UL;
      }
    }
  }
  return (ch);
}
}
static int compare___0(id3_ucs4_t const   *str1 , id3_ucs4_t const   *str2 ) 
{ id3_ucs4_t c1 ;
  id3_ucs4_t c2 ;
  id3_ucs4_t const   *tmp ;
  id3_ucs4_t const   *tmp___0 ;

  {
  if ((unsigned int )str1 == (unsigned int )str2) {
    return (1);
  }
  while (1) {
    while (1) {
      tmp = str1;
      str1 ++;
      c1 = translate((*tmp));
      if (! (c1 == 183UL)) {
        break;
      }
    }
    while (1) {
      tmp___0 = str2;
      str2 ++;
      c2 = translate((*tmp___0));
      if (! (c2 == 183UL)) {
        break;
      }
    }
    if (c1) {
      if (! (c1 == c2)) {
        goto _L;
      }
    } else {
      _L: 
      break;
    }
  }
  return (c1 == c2);
}
}
int id3_genre_number(id3_ucs4_t const   *string ) 
{ id3_ucs4_t const   *ptr ;
  int i ;
  unsigned long number ;
  unsigned long tmp ;
  int tmp___0 ;

  {
  if ((unsigned int )string == (unsigned int )((id3_ucs4_t const   *)0)) {
    goto _L;
  } else {
    if ((*string) == 0UL) {
      _L: 
      return (-1);
    }
  }
  ptr = string;
  while ((*ptr)) {
    if ((*ptr) < 48UL) {
      goto _L___0;
    } else {
      if ((*ptr) > 57UL) {
        _L___0: 
        break;
      }
    }
    ptr ++;
  }
  if ((*ptr) == 0UL) {
    number = id3_ucs4_getnumber(string);
    if (number <= 255UL) {
      tmp = number;
    } else {
      tmp = 4294967295UL;
    }
    return ((int )tmp);
  }
  i = 0;
  while ((unsigned int )i < sizeof(genre_table) / sizeof(genre_table[0])) {
    tmp___0 = compare___0(string, (id3_ucs4_t const   *)genre_table[i]);
    if (tmp___0) {
      return (i);
    }
    i ++;
  }
  return (-1);
}
}
#pragma merger(0,"/tmp/cil-bbwE7cq3.i","-Wall -g -O2")
union id3_field *id3_frame_field(struct id3_frame  const  *frame , unsigned int index___0 ) ;
void id3_frame_addref(struct id3_frame *frame ) ;
void id3_frame_delref(struct id3_frame *frame ) ;
struct id3_frame *id3_frame_parse(id3_byte_t const   **ptr , id3_length_t length ,
                                  unsigned int version ) ;
id3_length_t id3_frame_render(struct id3_frame  const  *frame , id3_byte_t **ptr ,
                              int options ) ;
id3_length_t id3_util_unsynchronise(id3_byte_t *data , id3_length_t length ) ;
id3_length_t id3_util_deunsynchronise(id3_byte_t *data , id3_length_t length ) ;
id3_byte_t *id3_util_compress(id3_byte_t const   *data , id3_length_t length , id3_length_t *newlength ) ;
id3_byte_t *id3_util_decompress(id3_byte_t const   *data , id3_length_t length , id3_length_t newlength ) ;
static int valid_idchar(char c ) 
{ int tmp ;

  {
  if ((int )c >= 65) {
    if ((int )c <= 90) {
      goto _L;
    } else {
      goto _L___1;
    }
  } else {
    _L___1: 
    if ((int )c >= 48) {
      if ((int )c <= 57) {
        _L: 
        tmp = 1;
      } else {
        goto _L___0;
      }
    } else {
      _L___0: 
      tmp = 0;
    }
  }
  return (tmp);
}
}
int id3_frame_validid(char const   *id ) 
{ int tmp ;
  int tmp___0 ;
  int tmp___1 ;
  int tmp___2 ;
  int tmp___3 ;

  {
  if (id) {
    tmp = valid_idchar((char )(*(id + 0)));
    if (tmp) {
      tmp___0 = valid_idchar((char )(*(id + 1)));
      if (tmp___0) {
        tmp___1 = valid_idchar((char )(*(id + 2)));
        if (tmp___1) {
          tmp___2 = valid_idchar((char )(*(id + 3)));
          if (tmp___2) {
            tmp___3 = 1;
          } else {
            goto _L___2;
          }
        } else {
          goto _L___2;
        }
      } else {
        goto _L___2;
      }
    } else {
      goto _L___2;
    }
  } else {
    _L___2: 
    tmp___3 = 0;
  }
  return (tmp___3);
}
}
struct id3_frame *id3_frame_new(char const   *id ) 
{ struct id3_frametype  const  *frametype ;
  struct id3_frame *frame ;
  unsigned int i ;
  int tmp ;
  struct id3_compat  const  *tmp___0 ;

  {
  tmp = id3_frame_validid(id);
  if (! tmp) {
    return ((struct id3_frame *)0);
  }
  frametype = id3_frametype_lookup(id, 4U);
  if ((unsigned int )frametype == (unsigned int )((struct id3_frametype  const  *)0)) {
    switch ((int )(*(id + 0))) {
    case 84: 
    frametype = & id3_frametype_text;
    break;
    case 87: 
    frametype = & id3_frametype_url;
    break;
    case 88: ;
    case 89: ;
    case 90: 
    frametype = & id3_frametype_experimental;
    break;
    default: 
    frametype = & id3_frametype_unknown;
    tmp___0 = id3_compat_lookup(id, 4U);
    if (tmp___0) {
      frametype = & id3_frametype_obsolete;
    }
    break;
    }
  }
  frame = (struct id3_frame *)malloc(sizeof((*frame)) + frametype->nfields * sizeof((*(frame->fields))));
  if (frame) {
    frame->id[0] = (char )(*(id + 0));
    frame->id[1] = (char )(*(id + 1));
    frame->id[2] = (char )(*(id + 2));
    frame->id[3] = (char )(*(id + 3));
    frame->id[4] = (char)0;
    frame->description = frametype->description;
    frame->refcount = 0U;
    frame->flags = frametype->defaultflags;
    frame->group_id = 0;
    frame->encryption_method = 0;
    frame->encoded = (id3_byte_t *)0;
    frame->encoded_length = 0UL;
    frame->decoded_length = 0UL;
    frame->nfields = frametype->nfields;
    frame->fields = (union id3_field *)(frame + 1);
    i = 0U;
    while (i < frame->nfields) {
      id3_field_init(frame->fields + i, (enum id3_field_type )(*(frametype->fields +
                                                                 i)));
      i ++;
    }
  }
  return (frame);
}
}
void id3_frame_delete(struct id3_frame *frame ) 
{ unsigned int i ;

  {
  if (! frame) {
    __assert_fail("frame", "frame.c", 129U, "id3_frame_delete");
  }
  if (frame->refcount == 0U) {
    i = 0U;
    while (i < frame->nfields) {
      id3_field_finish(frame->fields + i);
      i ++;
    }
    if (frame->encoded) {
      free((void *)frame->encoded);
    }
    free((void *)frame);
  }
  return;
}
}
void id3_frame_addref(struct id3_frame *frame ) 
{ 

  {
  if (! frame) {
    __assert_fail("frame", "frame.c", 150U, "id3_frame_addref");
  }
  frame->refcount = frame->refcount + 1U;
  return;
}
}
void id3_frame_delref(struct id3_frame *frame ) 
{ 

  {
  if (frame) {
    if (! (frame->refcount > 0U)) {
      goto _L;
    }
  } else {
    _L: 
    __assert_fail("frame && frame->refcount > 0", "frame.c", 161U, "id3_frame_delref");
  }
  frame->refcount = frame->refcount - 1U;
  return;
}
}
union id3_field *id3_frame_field(struct id3_frame  const  *frame , unsigned int index___0 ) 
{ union id3_field *tmp ;

  {
  if (! frame) {
    __assert_fail("frame", "frame.c", 173U, "id3_frame_field");
  }
  if (index___0 < frame->nfields) {
    tmp = frame->fields + index___0;
  } else {
    tmp = (union id3_field *)0;
  }
  return (tmp);
}
}
static struct id3_frame *obsolete(char const   *id , id3_byte_t const   *data , id3_length_t length ) 
{ struct id3_frame *frame ;
  int tmp ;
  int tmp___0 ;

  {
  frame = id3_frame_new("ZOBS");
  if (frame) {
    tmp = id3_field_setframeid(frame->fields + 0, id);
    if (tmp == -1) {
      goto _L;
    } else {
      tmp___0 = id3_field_setbinarydata(frame->fields + 1, data, length);
      if (tmp___0 == -1) {
        _L: 
        goto fail;
      }
    }
  }
  if (0) {
    fail: 
    if (frame) {
      id3_frame_delete(frame);
      frame = (struct id3_frame *)0;
    }
  }
  return (frame);
}
}
static struct id3_frame *unparseable(char const   *id , id3_byte_t const   **ptr ,
                                     id3_length_t length , int flags , int group_id ,
                                     int encryption_method , id3_length_t decoded_length ) 
{ struct id3_frame *frame ;
  id3_byte_t *mem ;
  id3_length_t tmp ;

  {
  frame = (struct id3_frame *)0;
  if (length) {
    tmp = length;
  } else {
    tmp = 1UL;
  }
  mem = (id3_byte_t *)malloc((unsigned int )tmp);
  if ((unsigned int )mem == (unsigned int )((id3_byte_t *)0)) {
    goto fail;
  }
  frame = id3_frame_new(id);
  if ((unsigned int )frame == (unsigned int )((struct id3_frame *)0)) {
    free((void *)mem);
  } else {
    memcpy((void * __restrict  )mem, (void const   * __restrict  )(*ptr), (unsigned int )length);
    frame->flags = flags;
    frame->group_id = group_id;
    frame->encryption_method = encryption_method;
    frame->encoded = mem;
    frame->encoded_length = length;
    frame->decoded_length = decoded_length;
  }
  if (0) {
    fail: ;
  }
  (*ptr) += length;
  return (frame);
}
}
static int parse_data(struct id3_frame *frame , id3_byte_t const   *data , id3_length_t length ) 
{ enum id3_field_textencoding encoding ;
  id3_byte_t const   *end ;
  unsigned int i ;
  int tmp ;

  {
  encoding = (enum id3_field_textencoding )0;
  end = data + length;
  i = 0U;
  while (i < frame->nfields) {
    tmp = id3_field_parse(frame->fields + i, & data, (unsigned long )(end - data),
                          & encoding);
    if (tmp == -1) {
      return (-1);
    }
    i ++;
  }
  return (0);
}
}
struct id3_frame *id3_frame_parse(id3_byte_t const   **ptr , id3_length_t length ,
                                  unsigned int version ) 
{ struct id3_frame *frame ;
  id3_byte_t const   *id ;
  id3_byte_t const   *end ;
  id3_byte_t const   *data ;
  id3_length_t size ;
  id3_length_t decoded_length ;
  int flags ;
  int group_id ;
  int encryption_method ;
  struct id3_compat  const  *compat ;
  id3_byte_t *mem ;
  char xid[4] ;
  id3_length_t tmp ;
  id3_byte_t *decomp ;
  int tmp___0 ;
  int tmp___1 ;

  {
  frame = (struct id3_frame *)0;
  decoded_length = 0UL;
  flags = 0;
  group_id = 0;
  encryption_method = 0;
  compat = (struct id3_compat  const  *)0;
  mem = (id3_byte_t *)0;
  id = (*ptr);
  end = (*ptr) + length;
  if (((version >> 8) & 255U) < 4U) {
    switch ((int )((version >> 8) & 255U)) {
    case 2: ;
    if (length < 6UL) {
      goto fail;
    }
    compat = id3_compat_lookup((char const   *)id, 3U);
    (*ptr) += 3;
    size = id3_parse_uint(ptr, 3U);
    if (size > (unsigned long )(end - (*ptr))) {
      goto fail;
    }
    end = (*ptr) + size;
    break;
    case 3: ;
    if (length < 10UL) {
      goto fail;
    }
    compat = id3_compat_lookup((char const   *)id, 4U);
    (*ptr) += 4;
    size = id3_parse_uint(ptr, 4U);
    flags = (int )id3_parse_uint(ptr, 2U);
    if (size > (unsigned long )(end - (*ptr))) {
      goto fail;
    }
    end = (*ptr) + size;
    if (flags & 31) {
      frame = unparseable((char const   *)id, ptr, (unsigned long )(end - (*ptr)),
                          0, 0, 0, 0UL);
      goto done;
    }
    flags = (((flags >> 1) & 65280) | ((flags >> 4) & 12)) | ((flags << 1) & 64);
    if (flags & 8) {
      if (end - (*ptr) < 4) {
        goto fail;
      }
      decoded_length = id3_parse_uint(ptr, 4U);
    }
    if (flags & 4) {
      if (end - (*ptr) < 1) {
        goto fail;
      }
      encryption_method = (int )id3_parse_uint(ptr, 1U);
    }
    if (flags & 64) {
      if (end - (*ptr) < 1) {
        goto fail;
      }
      group_id = (int )id3_parse_uint(ptr, 1U);
    }
    break;
    default: ;
    goto fail;
    }
    if (compat) {
      if (compat->equiv) {
        id = (id3_byte_t const   *)compat->equiv;
      } else {
        goto _L;
      }
    } else {
      _L: 
      if (((version >> 8) & 255U) == 2U) {
        xid[0] = (char )'Y';
        xid[1] = (char )(*(id + 0));
        xid[2] = (char )(*(id + 1));
        xid[3] = (char )(*(id + 2));
        id = (id3_byte_t const   *)(xid);
        flags |= 24576;
      }
    }
  } else {
    if (length < 10UL) {
      goto fail;
    }
    (*ptr) += 4;
    size = id3_parse_syncsafe(ptr, 4U);
    flags = (int )id3_parse_uint(ptr, 2U);
    if (size > (unsigned long )(end - (*ptr))) {
      goto fail;
    }
    end = (*ptr) + size;
    if (flags & 176) {
      frame = unparseable((char const   *)id, ptr, (unsigned long )(end - (*ptr)),
                          flags, 0, 0, 0UL);
      goto done;
    }
    if (flags & 64) {
      if (end - (*ptr) < 1) {
        goto fail;
      }
      group_id = (int )id3_parse_uint(ptr, 1U);
    }
    if (flags & 8) {
      if (! (flags & 1)) {
        goto fail;
      } else {
        goto _L___0;
      }
    } else {
      _L___0: ;
    }
    if (flags & 4) {
      if (end - (*ptr) < 1) {
        goto fail;
      }
      encryption_method = (int )id3_parse_uint(ptr, 1U);
    }
    if (flags & 1) {
      if (end - (*ptr) < 4) {
        goto fail;
      }
      decoded_length = id3_parse_syncsafe(ptr, 4U);
    }
  }
  data = (*ptr);
  (*ptr) = end;
  if (flags & 2) {
    if (end - data > 0) {
      mem = (id3_byte_t *)malloc((unsigned int )(end - data));
      if ((unsigned int )mem == (unsigned int )((id3_byte_t *)0)) {
        goto fail;
      }
      memcpy((void * __restrict  )mem, (void const   * __restrict  )data, (unsigned int )(end -
                                                                                          data));
      tmp = id3_util_deunsynchronise(mem, (unsigned long )(end - data));
      end = (id3_byte_t const   *)(mem + tmp);
      data = (id3_byte_t const   *)mem;
    } else {
      goto _L___1;
    }
  } else {
    _L___1: ;
  }
  if (flags & 4) {
    frame = unparseable((char const   *)id, & data, (unsigned long )(end - data),
                        flags, group_id, encryption_method, decoded_length);
    goto done;
  }
  if (flags & 8) {
    decomp = id3_util_decompress(data, (unsigned long )(end - data), decoded_length);
    if ((unsigned int )decomp == (unsigned int )((id3_byte_t *)0)) {
      goto fail;
    }
    if (mem) {
      free((void *)mem);
    }
    mem = decomp;
    data = (id3_byte_t const   *)mem;
    end = data + decoded_length;
  }
  if (compat) {
    if (! compat->equiv) {
      frame = obsolete((char const   *)id, data, (unsigned long )(end - data));
      goto done;
    } else {
      goto _L___2;
    }
  } else {
    _L___2: ;
  }
  frame = id3_frame_new((char const   *)id);
  if (frame) {
    frame->flags = flags;
    frame->group_id = group_id;
    if (compat) {
      if (compat->translate) {
        tmp___0 = ((*(compat->translate)))(frame, compat->id, data, (unsigned long )(end -
                                                                                     data));
        if (tmp___0 == -1) {
          goto fail;
        }
      } else {
        goto _L___3;
      }
    } else {
      _L___3: 
      tmp___1 = parse_data(frame, data, (unsigned long )(end - data));
      if (tmp___1 == -1) {
        goto fail;
      }
    }
  }
  if (0) {
    fail: 
    if (frame) {
      id3_frame_delete(frame);
      frame = (struct id3_frame *)0;
    }
  }
  done: 
  if (mem) {
    free((void *)mem);
  }
  return (frame);
}
}
static id3_length_t render_data(id3_byte_t **ptr , union id3_field *fields , unsigned int length ) 
{ id3_length_t size ;
  enum id3_field_textencoding encoding ;
  unsigned int i ;
  id3_length_t tmp ;

  {
  size = 0UL;
  encoding = (enum id3_field_textencoding )0;
  i = 0U;
  while (i < length) {
    tmp = id3_field_render((union id3_field  const  *)(fields + i), ptr, & encoding,
                           i < length - 1U);
    size += tmp;
    i ++;
  }
  return (size);
}
}
id3_length_t id3_frame_render(struct id3_frame  const  *frame , id3_byte_t **ptr ,
                              int options ) 
{ id3_length_t size ;
  id3_length_t decoded_length ;
  id3_length_t datalen ;
  id3_byte_t *size_ptr ;
  id3_byte_t *flags_ptr ;
  id3_byte_t *data ;
  int flags ;
  id3_length_t tmp ;
  id3_length_t tmp___0 ;
  id3_length_t tmp___1 ;
  id3_length_t tmp___2 ;
  id3_length_t tmp___3 ;
  id3_length_t tmp___4 ;
  id3_length_t tmp___5 ;
  id3_byte_t *comp ;
  id3_length_t complen ;
  id3_length_t newlen ;

  {
  size = 0UL;
  size_ptr = (id3_byte_t *)0;
  flags_ptr = (id3_byte_t *)0;
  data = (id3_byte_t *)0;
  if (! frame) {
    __assert_fail("frame", "frame.c", 511U, "id3_frame_render");
  }
  if (frame->flags & 16384) {
    goto _L;
  } else {
    if (options & 32) {
      if (frame->flags & 8192) {
        _L: 
        return (0UL);
      } else {
        goto _L___0;
      }
    } else {
      _L___0: ;
    }
  }
  decoded_length = render_data((id3_byte_t **)0, frame->fields, frame->nfields);
  if (decoded_length == 0UL) {
    if ((unsigned int )frame->encoded == (unsigned int )((id3_byte_t *)0)) {
      return (0UL);
    } else {
      goto _L___1;
    }
  } else {
    _L___1: ;
  }
  tmp = id3_render_immediate(ptr, (char const   *)(frame->id), 4U);
  size += tmp;
  if (ptr) {
    size_ptr = (*ptr);
  }
  tmp___0 = id3_render_syncsafe(ptr, 0UL, 4U);
  size += tmp___0;
  if (ptr) {
    flags_ptr = (*ptr);
  }
  flags = frame->flags;
  tmp___1 = id3_render_int(ptr, (long )flags, 2U);
  size += tmp___1;
  if (flags & 176) {
    tmp___2 = id3_render_binary(ptr, (id3_byte_t const   *)frame->encoded, frame->encoded_length);
    size += tmp___2;
    if (size_ptr) {
      id3_render_syncsafe(& size_ptr, size - 10UL, 4U);
    }
    return (size);
  }
  flags &= 28751;
  flags &= -3;
  if (options & 1) {
    flags |= 2;
  }
  if (! (flags & 4)) {
    flags &= -9;
    if (options & 2) {
      flags |= 9;
    }
  }
  if (flags & 64) {
    tmp___3 = id3_render_int(ptr, (long )frame->group_id, 1U);
    size += tmp___3;
  }
  if (flags & 4) {
    tmp___4 = id3_render_int(ptr, (long )frame->encryption_method, 1U);
    size += tmp___4;
  }
  if (flags & 1) {
    if (flags & 4) {
      decoded_length = frame->decoded_length;
    }
    tmp___5 = id3_render_syncsafe(ptr, decoded_length, 4U);
    size += tmp___5;
  }
  if (ptr) {
    data = (*ptr);
  }
  if (flags & 4) {
    datalen = id3_render_binary(ptr, (id3_byte_t const   *)frame->encoded, frame->encoded_length);
  } else {
    if ((unsigned int )ptr == (unsigned int )((id3_byte_t **)0)) {
      datalen = decoded_length;
    } else {
      datalen = render_data(ptr, frame->fields, frame->nfields);
      if (flags & 8) {
        comp = id3_util_compress((id3_byte_t const   *)data, datalen, & complen);
        if ((unsigned int )comp == (unsigned int )((id3_byte_t *)0)) {
          flags &= -9;
        } else {
          (*ptr) = data;
          datalen = id3_render_binary(ptr, (id3_byte_t const   *)comp, complen);
          free((void *)comp);
        }
      }
    }
  }
  if (flags & 2) {
    if ((unsigned int )data == (unsigned int )((id3_byte_t *)0)) {
      datalen *= 2UL;
    } else {
      newlen = id3_util_unsynchronise(data, datalen);
      if (newlen == datalen) {
        flags &= -3;
      } else {
        (*ptr) += newlen - datalen;
        datalen = newlen;
      }
    }
  }
  size += datalen;
  if (size_ptr) {
    id3_render_syncsafe(& size_ptr, size - 10UL, 4U);
  }
  if (flags_ptr) {
    id3_render_int(& flags_ptr, (long )flags, 2U);
  }
  return (size);
}
}
#pragma merger(0,"/tmp/cil-2VjLsCLs.i","-Wall -g -O2")
unsigned long id3_crc_compute(id3_byte_t const   *data , id3_length_t length ) ;
static unsigned long const   crc_table[256]  = 
  {      (unsigned long const   )0L,      (unsigned long const   )1996959894L,      (unsigned long const   )3993919788UL,      (unsigned long const   )2567524794UL, 
        (unsigned long const   )124634137L,      (unsigned long const   )1886057615L,      (unsigned long const   )3915621685UL,      (unsigned long const   )2657392035UL, 
        (unsigned long const   )249268274L,      (unsigned long const   )2044508324L,      (unsigned long const   )3772115230UL,      (unsigned long const   )2547177864UL, 
        (unsigned long const   )162941995L,      (unsigned long const   )2125561021L,      (unsigned long const   )3887607047UL,      (unsigned long const   )2428444049UL, 
        (unsigned long const   )498536548L,      (unsigned long const   )1789927666L,      (unsigned long const   )4089016648UL,      (unsigned long const   )2227061214UL, 
        (unsigned long const   )450548861L,      (unsigned long const   )1843258603L,      (unsigned long const   )4107580753UL,      (unsigned long const   )2211677639UL, 
        (unsigned long const   )325883990L,      (unsigned long const   )1684777152L,      (unsigned long const   )4251122042UL,      (unsigned long const   )2321926636UL, 
        (unsigned long const   )335633487L,      (unsigned long const   )1661365465L,      (unsigned long const   )4195302755UL,      (unsigned long const   )2366115317UL, 
        (unsigned long const   )997073096L,      (unsigned long const   )1281953886L,      (unsigned long const   )3579855332UL,      (unsigned long const   )2724688242UL, 
        (unsigned long const   )1006888145L,      (unsigned long const   )1258607687L,      (unsigned long const   )3524101629UL,      (unsigned long const   )2768942443UL, 
        (unsigned long const   )901097722L,      (unsigned long const   )1119000684L,      (unsigned long const   )3686517206UL,      (unsigned long const   )2898065728UL, 
        (unsigned long const   )853044451L,      (unsigned long const   )1172266101L,      (unsigned long const   )3705015759UL,      (unsigned long const   )2882616665UL, 
        (unsigned long const   )651767980L,      (unsigned long const   )1373503546L,      (unsigned long const   )3369554304UL,      (unsigned long const   )3218104598UL, 
        (unsigned long const   )565507253L,      (unsigned long const   )1454621731L,      (unsigned long const   )3485111705UL,      (unsigned long const   )3099436303UL, 
        (unsigned long const   )671266974L,      (unsigned long const   )1594198024L,      (unsigned long const   )3322730930UL,      (unsigned long const   )2970347812UL, 
        (unsigned long const   )795835527L,      (unsigned long const   )1483230225L,      (unsigned long const   )3244367275UL,      (unsigned long const   )3060149565UL, 
        (unsigned long const   )1994146192L,      (unsigned long const   )31158534L,      (unsigned long const   )2563907772UL,      (unsigned long const   )4023717930UL, 
        (unsigned long const   )1907459465L,      (unsigned long const   )112637215L,      (unsigned long const   )2680153253UL,      (unsigned long const   )3904427059UL, 
        (unsigned long const   )2013776290L,      (unsigned long const   )251722036L,      (unsigned long const   )2517215374UL,      (unsigned long const   )3775830040UL, 
        (unsigned long const   )2137656763L,      (unsigned long const   )141376813L,      (unsigned long const   )2439277719UL,      (unsigned long const   )3865271297UL, 
        (unsigned long const   )1802195444L,      (unsigned long const   )476864866L,      (unsigned long const   )2238001368UL,      (unsigned long const   )4066508878UL, 
        (unsigned long const   )1812370925L,      (unsigned long const   )453092731L,      (unsigned long const   )2181625025UL,      (unsigned long const   )4111451223UL, 
        (unsigned long const   )1706088902L,      (unsigned long const   )314042704L,      (unsigned long const   )2344532202UL,      (unsigned long const   )4240017532UL, 
        (unsigned long const   )1658658271L,      (unsigned long const   )366619977L,      (unsigned long const   )2362670323UL,      (unsigned long const   )4224994405UL, 
        (unsigned long const   )1303535960L,      (unsigned long const   )984961486L,      (unsigned long const   )2747007092UL,      (unsigned long const   )3569037538UL, 
        (unsigned long const   )1256170817L,      (unsigned long const   )1037604311L,      (unsigned long const   )2765210733UL,      (unsigned long const   )3554079995UL, 
        (unsigned long const   )1131014506L,      (unsigned long const   )879679996L,      (unsigned long const   )2909243462UL,      (unsigned long const   )3663771856UL, 
        (unsigned long const   )1141124467L,      (unsigned long const   )855842277L,      (unsigned long const   )2852801631UL,      (unsigned long const   )3708648649UL, 
        (unsigned long const   )1342533948L,      (unsigned long const   )654459306L,      (unsigned long const   )3188396048UL,      (unsigned long const   )3373015174UL, 
        (unsigned long const   )1466479909L,      (unsigned long const   )544179635L,      (unsigned long const   )3110523913UL,      (unsigned long const   )3462522015UL, 
        (unsigned long const   )1591671054L,      (unsigned long const   )702138776L,      (unsigned long const   )2966460450UL,      (unsigned long const   )3352799412UL, 
        (unsigned long const   )1504918807L,      (unsigned long const   )783551873L,      (unsigned long const   )3082640443UL,      (unsigned long const   )3233442989UL, 
        (unsigned long const   )3988292384UL,      (unsigned long const   )2596254646UL,      (unsigned long const   )62317068L,      (unsigned long const   )1957810842L, 
        (unsigned long const   )3939845945UL,      (unsigned long const   )2647816111UL,      (unsigned long const   )81470997L,      (unsigned long const   )1943803523L, 
        (unsigned long const   )3814918930UL,      (unsigned long const   )2489596804UL,      (unsigned long const   )225274430L,      (unsigned long const   )2053790376L, 
        (unsigned long const   )3826175755UL,      (unsigned long const   )2466906013UL,      (unsigned long const   )167816743L,      (unsigned long const   )2097651377L, 
        (unsigned long const   )4027552580UL,      (unsigned long const   )2265490386UL,      (unsigned long const   )503444072L,      (unsigned long const   )1762050814L, 
        (unsigned long const   )4150417245UL,      (unsigned long const   )2154129355UL,      (unsigned long const   )426522225L,      (unsigned long const   )1852507879L, 
        (unsigned long const   )4275313526UL,      (unsigned long const   )2312317920UL,      (unsigned long const   )282753626L,      (unsigned long const   )1742555852L, 
        (unsigned long const   )4189708143UL,      (unsigned long const   )2394877945UL,      (unsigned long const   )397917763L,      (unsigned long const   )1622183637L, 
        (unsigned long const   )3604390888UL,      (unsigned long const   )2714866558UL,      (unsigned long const   )953729732L,      (unsigned long const   )1340076626L, 
        (unsigned long const   )3518719985UL,      (unsigned long const   )2797360999UL,      (unsigned long const   )1068828381L,      (unsigned long const   )1219638859L, 
        (unsigned long const   )3624741850UL,      (unsigned long const   )2936675148UL,      (unsigned long const   )906185462L,      (unsigned long const   )1090812512L, 
        (unsigned long const   )3747672003UL,      (unsigned long const   )2825379669UL,      (unsigned long const   )829329135L,      (unsigned long const   )1181335161L, 
        (unsigned long const   )3412177804UL,      (unsigned long const   )3160834842UL,      (unsigned long const   )628085408L,      (unsigned long const   )1382605366L, 
        (unsigned long const   )3423369109UL,      (unsigned long const   )3138078467UL,      (unsigned long const   )570562233L,      (unsigned long const   )1426400815L, 
        (unsigned long const   )3317316542UL,      (unsigned long const   )2998733608UL,      (unsigned long const   )733239954L,      (unsigned long const   )1555261956L, 
        (unsigned long const   )3268935591UL,      (unsigned long const   )3050360625UL,      (unsigned long const   )752459403L,      (unsigned long const   )1541320221L, 
        (unsigned long const   )2607071920UL,      (unsigned long const   )3965973030UL,      (unsigned long const   )1969922972L,      (unsigned long const   )40735498L, 
        (unsigned long const   )2617837225UL,      (unsigned long const   )3943577151UL,      (unsigned long const   )1913087877L,      (unsigned long const   )83908371L, 
        (unsigned long const   )2512341634UL,      (unsigned long const   )3803740692UL,      (unsigned long const   )2075208622L,      (unsigned long const   )213261112L, 
        (unsigned long const   )2463272603UL,      (unsigned long const   )3855990285UL,      (unsigned long const   )2094854071L,      (unsigned long const   )198958881L, 
        (unsigned long const   )2262029012UL,      (unsigned long const   )4057260610UL,      (unsigned long const   )1759359992L,      (unsigned long const   )534414190L, 
        (unsigned long const   )2176718541UL,      (unsigned long const   )4139329115UL,      (unsigned long const   )1873836001L,      (unsigned long const   )414664567L, 
        (unsigned long const   )2282248934UL,      (unsigned long const   )4279200368UL,      (unsigned long const   )1711684554L,      (unsigned long const   )285281116L, 
        (unsigned long const   )2405801727UL,      (unsigned long const   )4167216745UL,      (unsigned long const   )1634467795L,      (unsigned long const   )376229701L, 
        (unsigned long const   )2685067896UL,      (unsigned long const   )3608007406UL,      (unsigned long const   )1308918612L,      (unsigned long const   )956543938L, 
        (unsigned long const   )2808555105UL,      (unsigned long const   )3495958263UL,      (unsigned long const   )1231636301L,      (unsigned long const   )1047427035L, 
        (unsigned long const   )2932959818UL,      (unsigned long const   )3654703836UL,      (unsigned long const   )1088359270L,      (unsigned long const   )936918000L, 
        (unsigned long const   )2847714899UL,      (unsigned long const   )3736837829UL,      (unsigned long const   )1202900863L,      (unsigned long const   )817233897L, 
        (unsigned long const   )3183342108UL,      (unsigned long const   )3401237130UL,      (unsigned long const   )1404277552L,      (unsigned long const   )615818150L, 
        (unsigned long const   )3134207493UL,      (unsigned long const   )3453421203UL,      (unsigned long const   )1423857449L,      (unsigned long const   )601450431L, 
        (unsigned long const   )3009837614UL,      (unsigned long const   )3294710456UL,      (unsigned long const   )1567103746L,      (unsigned long const   )711928724L, 
        (unsigned long const   )3020668471UL,      (unsigned long const   )3272380065UL,      (unsigned long const   )1510334235L,      (unsigned long const   )755167117L};
unsigned long id3_crc_compute(id3_byte_t const   *data , id3_length_t length ) 
{ register unsigned long crc ;
  id3_byte_t const   *tmp ;
  id3_byte_t const   *tmp___0 ;
  id3_byte_t const   *tmp___1 ;
  id3_byte_t const   *tmp___2 ;
  id3_byte_t const   *tmp___3 ;
  id3_byte_t const   *tmp___4 ;
  id3_byte_t const   *tmp___5 ;
  id3_byte_t const   *tmp___6 ;
  id3_byte_t const   *tmp___7 ;
  id3_byte_t const   *tmp___8 ;
  id3_byte_t const   *tmp___9 ;
  id3_byte_t const   *tmp___10 ;
  id3_byte_t const   *tmp___11 ;
  id3_byte_t const   *tmp___12 ;
  id3_byte_t const   *tmp___13 ;

  {
  crc = 4294967295UL;
  while (length >= 8UL) {
    tmp = data;
    data ++;
    crc = (unsigned long )(crc_table[(crc ^ (unsigned long )(*tmp)) & 255UL] ^ (unsigned long const   )(crc >>
                                                                                                        8));
    tmp___0 = data;
    data ++;
    crc = (unsigned long )(crc_table[(crc ^ (unsigned long )(*tmp___0)) & 255UL] ^
                           (unsigned long const   )(crc >> 8));
    tmp___1 = data;
    data ++;
    crc = (unsigned long )(crc_table[(crc ^ (unsigned long )(*tmp___1)) & 255UL] ^
                           (unsigned long const   )(crc >> 8));
    tmp___2 = data;
    data ++;
    crc = (unsigned long )(crc_table[(crc ^ (unsigned long )(*tmp___2)) & 255UL] ^
                           (unsigned long const   )(crc >> 8));
    tmp___3 = data;
    data ++;
    crc = (unsigned long )(crc_table[(crc ^ (unsigned long )(*tmp___3)) & 255UL] ^
                           (unsigned long const   )(crc >> 8));
    tmp___4 = data;
    data ++;
    crc = (unsigned long )(crc_table[(crc ^ (unsigned long )(*tmp___4)) & 255UL] ^
                           (unsigned long const   )(crc >> 8));
    tmp___5 = data;
    data ++;
    crc = (unsigned long )(crc_table[(crc ^ (unsigned long )(*tmp___5)) & 255UL] ^
                           (unsigned long const   )(crc >> 8));
    tmp___6 = data;
    data ++;
    crc = (unsigned long )(crc_table[(crc ^ (unsigned long )(*tmp___6)) & 255UL] ^
                           (unsigned long const   )(crc >> 8));
    length -= 8UL;
  }
  switch ((int )length) {
  case 7: 
  tmp___7 = data;
  data ++;
  crc = (unsigned long )(crc_table[(crc ^ (unsigned long )(*tmp___7)) & 255UL] ^ (unsigned long const   )(crc >>
                                                                                                          8));
  case 6: 
  tmp___8 = data;
  data ++;
  crc = (unsigned long )(crc_table[(crc ^ (unsigned long )(*tmp___8)) & 255UL] ^ (unsigned long const   )(crc >>
                                                                                                          8));
  case 5: 
  tmp___9 = data;
  data ++;
  crc = (unsigned long )(crc_table[(crc ^ (unsigned long )(*tmp___9)) & 255UL] ^ (unsigned long const   )(crc >>
                                                                                                          8));
  case 4: 
  tmp___10 = data;
  data ++;
  crc = (unsigned long )(crc_table[(crc ^ (unsigned long )(*tmp___10)) & 255UL] ^
                         (unsigned long const   )(crc >> 8));
  case 3: 
  tmp___11 = data;
  data ++;
  crc = (unsigned long )(crc_table[(crc ^ (unsigned long )(*tmp___11)) & 255UL] ^
                         (unsigned long const   )(crc >> 8));
  case 2: 
  tmp___12 = data;
  data ++;
  crc = (unsigned long )(crc_table[(crc ^ (unsigned long )(*tmp___12)) & 255UL] ^
                         (unsigned long const   )(crc >> 8));
  case 1: 
  tmp___13 = data;
  data ++;
  crc = (unsigned long )(crc_table[(crc ^ (unsigned long )(*tmp___13)) & 255UL] ^
                         (unsigned long const   )(crc >> 8));
  case 0: ;
  break;
  }
  return (crc ^ 4294967295UL);
}
}
#pragma merger(0,"/tmp/cil-XK8D5FlL.i","-Wall -g -O2")
extern int compress2(Bytef *dest , uLongf *destLen , Bytef const   *source , uLong sourceLen ,
                     int level ) ;
extern int uncompress(Bytef *dest , uLongf *destLen , Bytef const   *source , uLong sourceLen ) ;
id3_length_t id3_util_unsynchronise(id3_byte_t *data , id3_length_t length ) 
{ id3_length_t bytes ;
  id3_length_t count ;
  id3_byte_t *end ;
  id3_byte_t const   *ptr ;

  {
  bytes = 0UL;
  end = data + length;
  if (length == 0UL) {
    return (0UL);
  }
  ptr = (id3_byte_t const   *)data;
  while ((unsigned int )ptr < (unsigned int )(end - 1)) {
    if ((int const   )(*(ptr + 0)) == 255) {
      if ((int const   )(*(ptr + 1)) == 0) {
        goto _L___0;
      } else {
        if (((int const   )(*(ptr + 1)) & 224) == 224) {
          _L___0: 
          bytes ++;
        } else {
          goto _L;
        }
      }
    } else {
      _L: ;
    }
    ptr ++;
  }
  if (bytes) {
    ptr = (id3_byte_t const   *)end;
    end += bytes;
    end --;
    ptr --;
    (*end) = (*ptr);
    count = bytes;
    while (count) {
      if ((int const   )(*(ptr + -1)) == 255) {
        if ((int const   )(*(ptr + 0)) == 0) {
          goto _L___2;
        } else {
          if (((int const   )(*(ptr + 0)) & 224) == 224) {
            _L___2: 
            end --;
            (*end) = (unsigned char)0;
            count --;
          } else {
            goto _L___1;
          }
        }
      } else {
        _L___1: ;
      }
      end --;
      ptr --;
      (*end) = (*ptr);
    }
  }
  return (length + bytes);
}
}
id3_length_t id3_util_deunsynchronise(id3_byte_t *data , id3_length_t length ) 
{ id3_byte_t const   *old ;
  id3_byte_t const   *end ;
  id3_byte_t *new ;
  id3_byte_t *tmp ;
  id3_byte_t *tmp___0 ;

  {
  end = (id3_byte_t const   *)(data + length);
  if (length == 0UL) {
    return (0UL);
  }
  new = data;
  old = (id3_byte_t const   *)new;
  while ((unsigned int )old < (unsigned int )(end - 1)) {
    tmp = new;
    new ++;
    (*tmp) = (*old);
    if ((int const   )(*(old + 0)) == 255) {
      if ((int const   )(*(old + 1)) == 0) {
        old ++;
      } else {
        goto _L;
      }
    } else {
      _L: ;
    }
    old ++;
  }
  tmp___0 = new;
  new ++;
  (*tmp___0) = (*old);
  return ((unsigned long )(new - data));
}
}
id3_byte_t *id3_util_compress(id3_byte_t const   *data , id3_length_t length , id3_length_t *newlength ) 
{ id3_byte_t *compressed ;
  id3_byte_t *resized ;
  id3_length_t tmp ;
  int tmp___0 ;

  {
  (*newlength) = length + 12UL;
  (*newlength) += (*newlength) / 1000UL;
  compressed = (id3_byte_t *)malloc((unsigned int )(*newlength));
  if (compressed) {
    tmp___0 = compress2(compressed, newlength, data, length, 9);
    if (tmp___0 != 0) {
      goto _L;
    } else {
      if ((*newlength) >= length) {
        _L: 
        free((void *)compressed);
        compressed = (id3_byte_t *)0;
      } else {
        if ((*newlength)) {
          tmp = (*newlength);
        } else {
          tmp = 1UL;
        }
        resized = (id3_byte_t *)realloc((void *)compressed, (unsigned int )tmp);
        if (resized) {
          compressed = resized;
        }
      }
    }
  }
  return (compressed);
}
}
id3_byte_t *id3_util_decompress(id3_byte_t const   *data , id3_length_t length , id3_length_t newlength ) 
{ id3_byte_t *decompressed ;
  id3_length_t tmp ;
  id3_length_t size ;
  int tmp___0 ;

  {
  if (newlength) {
    tmp = newlength;
  } else {
    tmp = 1UL;
  }
  decompressed = (id3_byte_t *)malloc((unsigned int )tmp);
  if (decompressed) {
    size = newlength;
    tmp___0 = uncompress(decompressed, & size, data, length);
    if (tmp___0 != 0) {
      goto _L;
    } else {
      if (size != newlength) {
        _L: 
        free((void *)decompressed);
        decompressed = (id3_byte_t *)0;
      }
    }
  }
  return (decompressed);
}
}
#pragma merger(0,"/tmp/cil-HHtFqHvC.i","-Wall -g -O2")
struct id3_tag *id3_tag_new(void) ;
void id3_tag_delete(struct id3_tag *tag ) ;
unsigned int id3_tag_version(struct id3_tag  const  *tag ) ;
int id3_tag_options(struct id3_tag *tag , int mask , int values ) ;
void id3_tag_setlength(struct id3_tag *tag , id3_length_t length ) ;
void id3_tag_clearframes(struct id3_tag *tag ) ;
int id3_tag_detachframe(struct id3_tag *tag , struct id3_frame *frame ) ;
long id3_tag_query(id3_byte_t const   *data , id3_length_t length ) ;
struct id3_tag *id3_tag_parse(id3_byte_t const   *data , id3_length_t length ) ;
id3_length_t id3_tag_render(struct id3_tag  const  *tag , id3_byte_t *buffer___0 ) ;
void id3_tag_addref(struct id3_tag *tag ) ;
void id3_tag_delref(struct id3_tag *tag ) ;
struct id3_tag *id3_tag_new(void) 
{ struct id3_tag *tag ;

  {
  tag = (struct id3_tag *)malloc(sizeof((*tag)));
  if (tag) {
    tag->refcount = 0U;
    tag->version = 1024U;
    tag->flags = 0;
    tag->extendedflags = 0;
    tag->restrictions = 0;
    tag->options = 6;
    tag->nframes = 0U;
    tag->frames = (struct id3_frame **)0;
    tag->paddedsize = 0UL;
  }
  return (tag);
}
}
void id3_tag_delete(struct id3_tag *tag ) 
{ 

  {
  if (! tag) {
    __assert_fail("tag", "tag.c", 79U, "id3_tag_delete");
  }
  if (tag->refcount == 0U) {
    id3_tag_clearframes(tag);
    if (tag->frames) {
      free((void *)tag->frames);
    }
    free((void *)tag);
  }
  return;
}
}
void id3_tag_addref(struct id3_tag *tag ) 
{ 

  {
  if (! tag) {
    __assert_fail("tag", "tag.c", 97U, "id3_tag_addref");
  }
  tag->refcount = tag->refcount + 1U;
  return;
}
}
void id3_tag_delref(struct id3_tag *tag ) 
{ 

  {
  if (tag) {
    if (! (tag->refcount > 0U)) {
      goto _L;
    }
  } else {
    _L: 
    __assert_fail("tag && tag->refcount > 0", "tag.c", 108U, "id3_tag_delref");
  }
  tag->refcount = tag->refcount - 1U;
  return;
}
}
unsigned int id3_tag_version(struct id3_tag  const  *tag ) 
{ 

  {
  if (! tag) {
    __assert_fail("tag", "tag.c", 119U, "id3_tag_version");
  }
  return (tag->version);
}
}
int id3_tag_options(struct id3_tag *tag , int mask , int values ) 
{ 

  {
  if (! tag) {
    __assert_fail("tag", "tag.c", 130U, "id3_tag_options");
  }
  if (mask) {
    tag->options = (tag->options & ~ mask) | (values & mask);
  }
  return (tag->options);
}
}
void id3_tag_setlength(struct id3_tag *tag , id3_length_t length ) 
{ 

  {
  if (! tag) {
    __assert_fail("tag", "tag.c", 144U, "id3_tag_setlength");
  }
  tag->paddedsize = length;
  return;
}
}
void id3_tag_clearframes(struct id3_tag *tag ) 
{ unsigned int i ;

  {
  if (! tag) {
    __assert_fail("tag", "tag.c", 157U, "id3_tag_clearframes");
  }
  i = 0U;
  while (i < tag->nframes) {
    id3_frame_delref((*(tag->frames + i)));
    id3_frame_delete((*(tag->frames + i)));
    i ++;
  }
  tag->nframes = 0U;
  return;
}
}
int id3_tag_attachframe(struct id3_tag *tag , struct id3_frame *frame ) 
{ struct id3_frame **frames ;
  unsigned int tmp ;

  {
  if (tag) {
    if (! frame) {
      goto _L;
    }
  } else {
    _L: 
    __assert_fail("tag && frame", "tag.c", 175U, "id3_tag_attachframe");
  }
  frames = (struct id3_frame **)realloc((void *)tag->frames, (tag->nframes + 1U) *
                                                             sizeof((*frames)));
  if ((unsigned int )frames == (unsigned int )((struct id3_frame **)0)) {
    return (-1);
  }
  tag->frames = frames;
  tmp = tag->nframes;
  tag->nframes = tag->nframes + 1U;
  (*(tag->frames + tmp)) = frame;
  id3_frame_addref(frame);
  return (0);
}
}
int id3_tag_detachframe(struct id3_tag *tag , struct id3_frame *frame ) 
{ unsigned int i ;
  unsigned int tmp ;

  {
  if (tag) {
    if (! frame) {
      goto _L;
    }
  } else {
    _L: 
    __assert_fail("tag && frame", "tag.c", 197U, "id3_tag_detachframe");
  }
  i = 0U;
  while (i < tag->nframes) {
    if ((unsigned int )(*(tag->frames + i)) == (unsigned int )frame) {
      break;
    }
    i ++;
  }
  if (i == tag->nframes) {
    return (-1);
  }
  tag->nframes = tag->nframes - 1U;
  while (1) {
    tmp = i;
    i ++;
    if (! (tmp < tag->nframes)) {
      break;
    }
    (*(tag->frames + (i - 1U))) = (*(tag->frames + i));
  }
  id3_frame_delref(frame);
  return (0);
}
}
struct id3_frame *id3_tag_findframe(struct id3_tag  const  *tag , char const   *id ,
                                    unsigned int index___0 ) 
{ unsigned int len ;
  unsigned int i ;
  struct id3_frame *tmp ;
  struct id3_compat  const  *compat ;
  int tmp___65 ;
  size_t __s1_len___0 ;
  size_t __s2_len___0 ;
  int tmp___96 ;
  size_t tmp___97 ;
  register int __result___85 ;
  unsigned char const   *__s2___14 ;
  register int __result___86 ;
  int tmp___112 ;
  register int __result___93 ;
  unsigned char const   *__s1___30 ;
  register int __result___94 ;
  int tmp___119 ;
  int tmp___120 ;
  int tmp___121 ;
  int tmp___122 ;
  int tmp___123 ;
  int tmp___124 ;
  int tmp___125 ;
  int tmp___126 ;
  size_t tmp___127 ;
  int tmp___128 ;
  size_t tmp___129 ;
  unsigned int tmp___130 ;

  {
  if (! tag) {
    __assert_fail("tag", "tag.c", 225U, "id3_tag_findframe");
  }
  if ((unsigned int )id == (unsigned int )((char const   *)0)) {
    goto _L;
  } else {
    if ((int const   )(*id) == 0) {
      _L: 
      if (index___0 < tag->nframes) {
        tmp = (*(tag->frames + index___0));
      } else {
        tmp = (struct id3_frame *)0;
      }
      return (tmp);
    }
  }
  len = strlen(id);
  if (len == 4U) {
    compat = id3_compat_lookup(id, len);
    if (compat) {
      if (compat->equiv) {
        if (! compat->translate) {
          id = compat->equiv;
          len = strlen(id);
        } else {
          goto _L___1;
        }
      } else {
        goto _L___1;
      }
    } else {
      _L___1: ;
    }
  }
  i = 0U;
  while (i < tag->nframes) {
    tmp___125 = __builtin_constant_p(len);
    if (tmp___125) {
      tmp___126 = __builtin_constant_p(((*(tag->frames + i)))->id);
      if (tmp___126) {
        tmp___127 = strlen((char const   *)(((*(tag->frames + i)))->id));
        if (tmp___127 < len) {
          goto _L___355;
        } else {
          goto _L___357;
        }
      } else {
        _L___357: 
        tmp___128 = __builtin_constant_p(id);
        if (tmp___128) {
          tmp___129 = strlen(id);
          if (tmp___129 < len) {
            _L___355: 
            tmp___122 = __builtin_constant_p(((*(tag->frames + i)))->id);
            if (tmp___122) {
              tmp___123 = __builtin_constant_p(id);
              if (tmp___123) {
                __s1_len___0 = strlen((char const   *)(((*(tag->frames + i)))->id));
                __s2_len___0 = strlen(id);
                if (! ((unsigned int )((void const   *)(((*(tag->frames + i)))->id +
                                                        1)) - (unsigned int )((void const   *)(((*(tag->frames +
                                                                                                   i)))->id)) ==
                       1U)) {
                  goto _L___351;
                } else {
                  if (__s1_len___0 >= 4U) {
                    _L___351: 
                    if (! ((unsigned int )((void const   *)(id + 1)) - (unsigned int )((void const   *)id) ==
                           1U)) {
                      goto _L___350;
                    } else {
                      if (__s2_len___0 >= 4U) {
                        _L___350: 
                        tmp___124 = 1;
                      } else {
                        goto _L___349;
                      }
                    }
                  } else {
                    _L___349: 
                    tmp___124 = 0;
                  }
                }
                if (tmp___124) {
                  if (__s1_len___0 < __s2_len___0) {
                    tmp___97 = __s1_len___0;
                  } else {
                    tmp___97 = __s2_len___0;
                  }
                  tmp___96 = memcmp((void const   *)((char const   *)(((*(tag->frames +
                                                                          i)))->id)),
                                    (void const   *)id, tmp___97 + 1U);
                } else {
                  goto _L___353;
                }
              } else {
                goto _L___353;
              }
            } else {
              _L___353: 
              tmp___121 = __builtin_constant_p(((*(tag->frames + i)))->id);
              if (tmp___121) {
                if ((unsigned int )((void const   *)(((*(tag->frames + i)))->id +
                                                     1)) - (unsigned int )((void const   *)(((*(tag->frames +
                                                                                                i)))->id)) ==
                    1U) {
                  __s1_len___0 = strlen((char const   *)(((*(tag->frames + i)))->id));
                  if (__s1_len___0 < 4U) {
                    tmp___112 = __builtin_constant_p(id);
                    if (tmp___112) {
                      if ((unsigned int )((void const   *)(id + 1)) - (unsigned int )((void const   *)id) ==
                          1U) {
                        __result___85 = (int )((int const   )(*((unsigned char const   *)((char const   *)(((*(tag->frames +
                                                                                                               i)))->id)) +
                                                                0)) - (int const   )(*((unsigned char const   *)id +
                                                                                       0)));
                        if (__s1_len___0 > 0U) {
                          if (__result___85 == 0) {
                            __result___85 = (int )((int const   )(*((unsigned char const   *)((char const   *)(((*(tag->frames +
                                                                                                                   i)))->id)) +
                                                                    1)) - (int const   )(*((unsigned char const   *)id +
                                                                                           1)));
                            if (__s1_len___0 > 1U) {
                              if (__result___85 == 0) {
                                __result___85 = (int )((int const   )(*((unsigned char const   *)((char const   *)(((*(tag->frames +
                                                                                                                       i)))->id)) +
                                                                        2)) - (int const   )(*((unsigned char const   *)id +
                                                                                               2)));
                                if (__s1_len___0 > 2U) {
                                  if (__result___85 == 0) {
                                    __result___85 = (int )((int const   )(*((unsigned char const   *)((char const   *)(((*(tag->frames +
                                                                                                                           i)))->id)) +
                                                                            3)) -
                                                           (int const   )(*((unsigned char const   *)id +
                                                                            3)));
                                  } else {
                                    goto _L___312;
                                  }
                                } else {
                                  _L___312: ;
                                }
                              } else {
                                goto _L___313;
                              }
                            } else {
                              _L___313: ;
                            }
                          } else {
                            goto _L___314;
                          }
                        } else {
                          _L___314: ;
                        }
                        tmp___96 = __result___85;
                      } else {
                        goto _L___318;
                      }
                    } else {
                      _L___318: 
                      __s2___14 = (unsigned char const   *)id;
                      __result___86 = (int )((int const   )(*((unsigned char const   *)((char const   *)(((*(tag->frames +
                                                                                                             i)))->id)) +
                                                              0)) - (int const   )(*(__s2___14 +
                                                                                     0)));
                      if (__s1_len___0 > 0U) {
                        if (__result___86 == 0) {
                          __result___86 = (int )((int const   )(*((unsigned char const   *)((char const   *)(((*(tag->frames +
                                                                                                                 i)))->id)) +
                                                                  1)) - (int const   )(*(__s2___14 +
                                                                                         1)));
                          if (__s1_len___0 > 1U) {
                            if (__result___86 == 0) {
                              __result___86 = (int )((int const   )(*((unsigned char const   *)((char const   *)(((*(tag->frames +
                                                                                                                     i)))->id)) +
                                                                      2)) - (int const   )(*(__s2___14 +
                                                                                             2)));
                              if (__s1_len___0 > 2U) {
                                if (__result___86 == 0) {
                                  __result___86 = (int )((int const   )(*((unsigned char const   *)((char const   *)(((*(tag->frames +
                                                                                                                         i)))->id)) +
                                                                          3)) - (int const   )(*(__s2___14 +
                                                                                                 3)));
                                } else {
                                  goto _L___315;
                                }
                              } else {
                                _L___315: ;
                              }
                            } else {
                              goto _L___316;
                            }
                          } else {
                            _L___316: ;
                          }
                        } else {
                          goto _L___317;
                        }
                      } else {
                        _L___317: ;
                      }
                      tmp___96 = __result___86;
                    }
                  } else {
                    goto _L___348;
                  }
                } else {
                  goto _L___348;
                }
              } else {
                _L___348: 
                tmp___120 = __builtin_constant_p(id);
                if (tmp___120) {
                  if ((unsigned int )((void const   *)(id + 1)) - (unsigned int )((void const   *)id) ==
                      1U) {
                    __s2_len___0 = strlen(id);
                    if (__s2_len___0 < 4U) {
                      tmp___119 = __builtin_constant_p(((*(tag->frames + i)))->id);
                      if (tmp___119) {
                        if ((unsigned int )((void const   *)(((*(tag->frames + i)))->id +
                                                             1)) - (unsigned int )((void const   *)(((*(tag->frames +
                                                                                                        i)))->id)) ==
                            1U) {
                          __result___93 = (int )((int const   )(*((unsigned char const   *)((char const   *)(((*(tag->frames +
                                                                                                                 i)))->id)) +
                                                                  0)) - (int const   )(*((unsigned char const   *)id +
                                                                                         0)));
                          if (__s2_len___0 > 0U) {
                            if (__result___93 == 0) {
                              __result___93 = (int )((int const   )(*((unsigned char const   *)((char const   *)(((*(tag->frames +
                                                                                                                     i)))->id)) +
                                                                      1)) - (int const   )(*((unsigned char const   *)id +
                                                                                             1)));
                              if (__s2_len___0 > 1U) {
                                if (__result___93 == 0) {
                                  __result___93 = (int )((int const   )(*((unsigned char const   *)((char const   *)(((*(tag->frames +
                                                                                                                         i)))->id)) +
                                                                          2)) - (int const   )(*((unsigned char const   *)id +
                                                                                                 2)));
                                  if (__s2_len___0 > 2U) {
                                    if (__result___93 == 0) {
                                      __result___93 = (int )((int const   )(*((unsigned char const   *)((char const   *)(((*(tag->frames +
                                                                                                                             i)))->id)) +
                                                                              3)) -
                                                             (int const   )(*((unsigned char const   *)id +
                                                                              3)));
                                    } else {
                                      goto _L___338;
                                    }
                                  } else {
                                    _L___338: ;
                                  }
                                } else {
                                  goto _L___339;
                                }
                              } else {
                                _L___339: ;
                              }
                            } else {
                              goto _L___340;
                            }
                          } else {
                            _L___340: ;
                          }
                          tmp___96 = __result___93;
                        } else {
                          goto _L___344;
                        }
                      } else {
                        _L___344: 
                        __s1___30 = (unsigned char const   *)((char const   *)(((*(tag->frames +
                                                                                   i)))->id));
                        __result___94 = (int )((int const   )(*(__s1___30 + 0)) -
                                               (int const   )(*((unsigned char const   *)id +
                                                                0)));
                        if (__s2_len___0 > 0U) {
                          if (__result___94 == 0) {
                            __result___94 = (int )((int const   )(*(__s1___30 + 1)) -
                                                   (int const   )(*((unsigned char const   *)id +
                                                                    1)));
                            if (__s2_len___0 > 1U) {
                              if (__result___94 == 0) {
                                __result___94 = (int )((int const   )(*(__s1___30 +
                                                                        2)) - (int const   )(*((unsigned char const   *)id +
                                                                                               2)));
                                if (__s2_len___0 > 2U) {
                                  if (__result___94 == 0) {
                                    __result___94 = (int )((int const   )(*(__s1___30 +
                                                                            3)) -
                                                           (int const   )(*((unsigned char const   *)id +
                                                                            3)));
                                  } else {
                                    goto _L___341;
                                  }
                                } else {
                                  _L___341: ;
                                }
                              } else {
                                goto _L___342;
                              }
                            } else {
                              _L___342: ;
                            }
                          } else {
                            goto _L___343;
                          }
                        } else {
                          _L___343: ;
                        }
                        tmp___96 = __result___94;
                      }
                    } else {
                      goto _L___346;
                    }
                  } else {
                    goto _L___346;
                  }
                } else {
                  _L___346: 
                  tmp___96 = strcmp((char const   *)(((*(tag->frames + i)))->id),
                                    id);
                }
              }
            }
            tmp___65 = tmp___96;
          } else {
            goto _L___356;
          }
        } else {
          _L___356: 
          goto _L___354;
        }
      }
    } else {
      _L___354: 
      tmp___65 = strncmp((char const   *)(((*(tag->frames + i)))->id), id, len);
    }
    if (tmp___65 == 0) {
      tmp___130 = index___0;
      index___0 --;
      if (tmp___130 == 0U) {
        return ((*(tag->frames + i)));
      } else {
        goto _L___358;
      }
    } else {
      _L___358: ;
    }
    i ++;
  }
  return ((struct id3_frame *)0);
}
}
static enum tagtype tagtype(id3_byte_t const   *data , id3_length_t length ) 
{ int tmp ;

  {
  if (length >= 3UL) {
    if ((int const   )(*(data + 0)) == 84) {
      if ((int const   )(*(data + 1)) == 65) {
        if ((int const   )(*(data + 2)) == 71) {
          return ((enum tagtype )1);
        } else {
          goto _L___1;
        }
      } else {
        goto _L___1;
      }
    } else {
      goto _L___1;
    }
  } else {
    _L___1: ;
  }
  if (length >= 10UL) {
    if ((int const   )(*(data + 0)) == 73) {
      if ((int const   )(*(data + 1)) == 68) {
        if ((int const   )(*(data + 2)) == 51) {
          goto _L___9;
        } else {
          goto _L___13;
        }
      } else {
        goto _L___13;
      }
    } else {
      _L___13: 
      if ((int const   )(*(data + 0)) == 51) {
        if ((int const   )(*(data + 1)) == 68) {
          if ((int const   )(*(data + 2)) == 73) {
            _L___9: 
            if ((int const   )(*(data + 3)) < 255) {
              if ((int const   )(*(data + 4)) < 255) {
                if ((int const   )(*(data + 6)) < 128) {
                  if ((int const   )(*(data + 7)) < 128) {
                    if ((int const   )(*(data + 8)) < 128) {
                      if ((int const   )(*(data + 9)) < 128) {
                        if ((int const   )(*(data + 0)) == 73) {
                          tmp = 2;
                        } else {
                          tmp = 3;
                        }
                        return ((enum tagtype )tmp);
                      } else {
                        goto _L___8;
                      }
                    } else {
                      goto _L___8;
                    }
                  } else {
                    goto _L___8;
                  }
                } else {
                  goto _L___8;
                }
              } else {
                goto _L___8;
              }
            } else {
              goto _L___8;
            }
          } else {
            goto _L___11;
          }
        } else {
          goto _L___11;
        }
      } else {
        _L___11: 
        goto _L___8;
      }
    }
  } else {
    _L___8: ;
  }
  return ((enum tagtype )0);
}
}
static void parse_header(id3_byte_t const   **ptr , unsigned int *version , int *flags ,
                         id3_length_t *size ) 
{ 

  {
  (*ptr) += 3;
  (*version) = (unsigned int )id3_parse_uint(ptr, 2U);
  (*flags) = (int )id3_parse_uint(ptr, 1U);
  (*size) = id3_parse_syncsafe(ptr, 4U);
  return;
}
}
long id3_tag_query(id3_byte_t const   *data , id3_length_t length ) 
{ unsigned int version ;
  int flags ;
  id3_length_t size ;
  int tmp ;

  {
  if (! data) {
    __assert_fail("data", "tag.c", 295U, "id3_tag_query");
  }
  tmp = (int )tagtype(data, length);
  switch (tmp) {
  case 1: ;
  return (128L);
  case 2: 
  parse_header(& data, & version, & flags, & size);
  if (flags & 16) {
    size += 10UL;
  }
  return ((long )(10UL + size));
  case 3: 
  parse_header(& data, & version, & flags, & size);
  return ((long )(- size - 10UL));
  case 0: ;
  break;
  }
  return (0L);
}
}
static void trim(char *str ) 
{ char *ptr ;
  size_t tmp ;

  {
  tmp = strlen((char const   *)str);
  ptr = str + tmp;
  while (1) {
    if ((unsigned int )ptr > (unsigned int )str) {
      if (! ((int )(*(ptr + -1)) == 32)) {
        goto _L;
      }
    } else {
      _L: 
      break;
    }
    ptr --;
  }
  (*ptr) = (char)0;
  return;
}
}
static int v1_attachstr(struct id3_tag *tag , char const   *id , char *text , unsigned long number ) 
{ struct id3_frame *frame ;
  id3_ucs4_t ucs4[31] ;
  int tmp ;
  int tmp___0 ;
  int tmp___1 ;
  int tmp___2 ;
  id3_ucs4_t *ptr ;
  int tmp___3 ;
  size_t __s1_len ;
  size_t __s2_len ;
  int tmp___25 ;
  size_t tmp___26 ;
  register int __result___37 ;
  unsigned char const   *__s2___6 ;
  register int __result___38 ;
  register int __result___45 ;
  unsigned char const   *__s1___14 ;
  register int __result___46 ;
  int tmp___41 ;
  int tmp___42 ;
  int tmp___43 ;
  int tmp___44 ;
  int tmp___45 ;

  {
  if (text) {
    trim(text);
    if ((int )(*text) == 0) {
      return (0);
    }
  }
  frame = id3_frame_new(id);
  if ((unsigned int )frame == (unsigned int )((struct id3_frame *)0)) {
    return (-1);
  }
  tmp = id3_field_settextencoding(frame->fields + 0, (enum id3_field_textencoding )0);
  if (tmp == -1) {
    goto fail;
  }
  if (text) {
    id3_latin1_decode((id3_latin1_t const   *)text, ucs4);
  } else {
    id3_ucs4_putnumber(ucs4, number);
  }
  tmp___43 = __builtin_constant_p(id);
  if (tmp___43) {
    __s1_len = strlen(id);
    __s2_len = strlen("COMM");
    if (! ((unsigned int )((void const   *)(id + 1)) - (unsigned int )((void const   *)id) ==
           1U)) {
      goto _L___166;
    } else {
      if (__s1_len >= 4U) {
        _L___166: 
        if (! ((unsigned int )((void const   *)("COMM" + 1)) - (unsigned int )((void const   *)"COMM") ==
               1U)) {
          goto _L___165;
        } else {
          if (__s2_len >= 4U) {
            _L___165: 
            tmp___44 = 1;
          } else {
            goto _L___164;
          }
        }
      } else {
        _L___164: 
        tmp___44 = 0;
      }
    }
    if (tmp___44) {
      if (__s1_len < __s2_len) {
        tmp___26 = __s1_len;
      } else {
        tmp___26 = __s2_len;
      }
      tmp___25 = memcmp((void const   *)id, (void const   *)"COMM", tmp___26 + 1U);
    } else {
      goto _L___168;
    }
  } else {
    _L___168: 
    tmp___42 = __builtin_constant_p(id);
    if (tmp___42) {
      if ((unsigned int )((void const   *)(id + 1)) - (unsigned int )((void const   *)id) ==
          1U) {
        __s1_len = strlen(id);
        if (__s1_len < 4U) {
          if ((unsigned int )((void const   *)("COMM" + 1)) - (unsigned int )((void const   *)"COMM") ==
              1U) {
            __result___37 = (int )((int const   )(*((unsigned char const   *)id +
                                                    0)) - (int const   )(*((unsigned char const   *)"COMM" +
                                                                           0)));
            if (__s1_len > 0U) {
              if (__result___37 == 0) {
                __result___37 = (int )((int const   )(*((unsigned char const   *)id +
                                                        1)) - (int const   )(*((unsigned char const   *)"COMM" +
                                                                               1)));
                if (__s1_len > 1U) {
                  if (__result___37 == 0) {
                    __result___37 = (int )((int const   )(*((unsigned char const   *)id +
                                                            2)) - (int const   )(*((unsigned char const   *)"COMM" +
                                                                                   2)));
                    if (__s1_len > 2U) {
                      if (__result___37 == 0) {
                        __result___37 = (int )((int const   )(*((unsigned char const   *)id +
                                                                3)) - (int const   )(*((unsigned char const   *)"COMM" +
                                                                                       3)));
                      } else {
                        goto _L___129;
                      }
                    } else {
                      _L___129: ;
                    }
                  } else {
                    goto _L___130;
                  }
                } else {
                  _L___130: ;
                }
              } else {
                goto _L___131;
              }
            } else {
              _L___131: ;
            }
            tmp___25 = __result___37;
          } else {
            __s2___6 = (unsigned char const   *)"COMM";
            __result___38 = (int )((int const   )(*((unsigned char const   *)id +
                                                    0)) - (int const   )(*(__s2___6 +
                                                                           0)));
            if (__s1_len > 0U) {
              if (__result___38 == 0) {
                __result___38 = (int )((int const   )(*((unsigned char const   *)id +
                                                        1)) - (int const   )(*(__s2___6 +
                                                                               1)));
                if (__s1_len > 1U) {
                  if (__result___38 == 0) {
                    __result___38 = (int )((int const   )(*((unsigned char const   *)id +
                                                            2)) - (int const   )(*(__s2___6 +
                                                                                   2)));
                    if (__s1_len > 2U) {
                      if (__result___38 == 0) {
                        __result___38 = (int )((int const   )(*((unsigned char const   *)id +
                                                                3)) - (int const   )(*(__s2___6 +
                                                                                       3)));
                      } else {
                        goto _L___132;
                      }
                    } else {
                      _L___132: ;
                    }
                  } else {
                    goto _L___133;
                  }
                } else {
                  _L___133: ;
                }
              } else {
                goto _L___134;
              }
            } else {
              _L___134: ;
            }
            tmp___25 = __result___38;
          }
        } else {
          goto _L___163;
        }
      } else {
        goto _L___163;
      }
    } else {
      _L___163: 
      if ((unsigned int )((void const   *)("COMM" + 1)) - (unsigned int )((void const   *)"COMM") ==
          1U) {
        __s2_len = strlen("COMM");
        if (__s2_len < 4U) {
          tmp___41 = __builtin_constant_p(id);
          if (tmp___41) {
            if ((unsigned int )((void const   *)(id + 1)) - (unsigned int )((void const   *)id) ==
                1U) {
              __result___45 = (int )((int const   )(*((unsigned char const   *)id +
                                                      0)) - (int const   )(*((unsigned char const   *)"COMM" +
                                                                             0)));
              if (__s2_len > 0U) {
                if (__result___45 == 0) {
                  __result___45 = (int )((int const   )(*((unsigned char const   *)id +
                                                          1)) - (int const   )(*((unsigned char const   *)"COMM" +
                                                                                 1)));
                  if (__s2_len > 1U) {
                    if (__result___45 == 0) {
                      __result___45 = (int )((int const   )(*((unsigned char const   *)id +
                                                              2)) - (int const   )(*((unsigned char const   *)"COMM" +
                                                                                     2)));
                      if (__s2_len > 2U) {
                        if (__result___45 == 0) {
                          __result___45 = (int )((int const   )(*((unsigned char const   *)id +
                                                                  3)) - (int const   )(*((unsigned char const   *)"COMM" +
                                                                                         3)));
                        } else {
                          goto _L___154;
                        }
                      } else {
                        _L___154: ;
                      }
                    } else {
                      goto _L___155;
                    }
                  } else {
                    _L___155: ;
                  }
                } else {
                  goto _L___156;
                }
              } else {
                _L___156: ;
              }
              tmp___25 = __result___45;
            } else {
              goto _L___160;
            }
          } else {
            _L___160: 
            __s1___14 = (unsigned char const   *)id;
            __result___46 = (int )((int const   )(*(__s1___14 + 0)) - (int const   )(*((unsigned char const   *)"COMM" +
                                                                                       0)));
            if (__s2_len > 0U) {
              if (__result___46 == 0) {
                __result___46 = (int )((int const   )(*(__s1___14 + 1)) - (int const   )(*((unsigned char const   *)"COMM" +
                                                                                           1)));
                if (__s2_len > 1U) {
                  if (__result___46 == 0) {
                    __result___46 = (int )((int const   )(*(__s1___14 + 2)) - (int const   )(*((unsigned char const   *)"COMM" +
                                                                                               2)));
                    if (__s2_len > 2U) {
                      if (__result___46 == 0) {
                        __result___46 = (int )((int const   )(*(__s1___14 + 3)) -
                                               (int const   )(*((unsigned char const   *)"COMM" +
                                                                3)));
                      } else {
                        goto _L___157;
                      }
                    } else {
                      _L___157: ;
                    }
                  } else {
                    goto _L___158;
                  }
                } else {
                  _L___158: ;
                }
              } else {
                goto _L___159;
              }
            } else {
              _L___159: ;
            }
            tmp___25 = __result___46;
          }
        } else {
          goto _L___161;
        }
      } else {
        _L___161: 
        tmp___25 = strcmp(id, "COMM");
      }
    }
  }
  if (tmp___25 == 0) {
    tmp___0 = id3_field_setlanguage(frame->fields + 1, "XXX");
    if (tmp___0 == -1) {
      goto _L___0;
    } else {
      tmp___1 = id3_field_setstring(frame->fields + 2, id3_ucs4_empty);
      if (tmp___1 == -1) {
        _L___0: 
        goto _L;
      } else {
        tmp___2 = id3_field_setfullstring(frame->fields + 3, (id3_ucs4_t const   *)(ucs4));
        if (tmp___2 == -1) {
          _L: 
          goto fail;
        }
      }
    }
  } else {
    ptr = ucs4;
    tmp___3 = id3_field_setstrings(frame->fields + 1, 1U, & ptr);
    if (tmp___3 == -1) {
      goto fail;
    }
  }
  tmp___45 = id3_tag_attachframe(tag, frame);
  if (tmp___45 == -1) {
    goto fail;
  }
  return (0);
  fail: 
  id3_frame_delete(frame);
  return (-1);
}
}
static struct id3_tag *v1_parse(id3_byte_t const   *data ) 
{ struct id3_tag *tag ;
  char title[31] ;
  char artist[31] ;
  char album[31] ;
  char year[5] ;
  char comment[31] ;
  unsigned int genre ;
  unsigned int track ;
  int tmp ;
  int tmp___0 ;
  int tmp___1 ;
  int tmp___2 ;
  int tmp___3 ;
  int tmp___4 ;
  int tmp___5 ;

  {
  tag = id3_tag_new();
  if (tag) {
    tag->version = 256U;
    tag->options = tag->options | 256;
    tag->options = tag->options & -3;
    tag->restrictions = 56;
    comment[30] = (char)0;
    year[4] = comment[30];
    album[30] = year[4];
    artist[30] = album[30];
    title[30] = artist[30];
    memcpy((void * __restrict  )(title), (void const   * __restrict  )(data + 3),
           30U);
    memcpy((void * __restrict  )(artist), (void const   * __restrict  )(data + 33),
           30U);
    memcpy((void * __restrict  )(album), (void const   * __restrict  )(data + 63),
           30U);
    memcpy((void * __restrict  )(year), (void const   * __restrict  )(data + 93),
           4U);
    memcpy((void * __restrict  )(comment), (void const   * __restrict  )(data + 97),
           30U);
    genre = (unsigned int )(*(data + 127));
    track = 0U;
    if ((int )comment[28] == 0) {
      if ((int )comment[29] != 0) {
        track = (unsigned int )comment[29];
        tag->version = 257U;
      } else {
        goto _L;
      }
    } else {
      _L: ;
    }
    tmp = v1_attachstr(tag, "TIT2", title, 0UL);
    if (tmp == -1) {
      goto _L___7;
    } else {
      tmp___0 = v1_attachstr(tag, "TPE1", artist, 0UL);
      if (tmp___0 == -1) {
        _L___7: 
        goto _L___6;
      } else {
        tmp___1 = v1_attachstr(tag, "TALB", album, 0UL);
        if (tmp___1 == -1) {
          _L___6: 
          goto _L___5;
        } else {
          tmp___2 = v1_attachstr(tag, "TDRC", year, 0UL);
          if (tmp___2 == -1) {
            _L___5: 
            goto _L___3;
          } else {
            if (track) {
              tmp___3 = v1_attachstr(tag, "TRCK", (char *)0, (unsigned long )track);
              if (tmp___3 == -1) {
                _L___3: 
                goto _L___1;
              } else {
                goto _L___4;
              }
            } else {
              _L___4: 
              if (genre < 255U) {
                tmp___4 = v1_attachstr(tag, "TCON", (char *)0, (unsigned long )genre);
                if (tmp___4 == -1) {
                  _L___1: 
                  goto _L___0;
                } else {
                  goto _L___2;
                }
              } else {
                _L___2: 
                tmp___5 = v1_attachstr(tag, "COMM", comment, 0UL);
                if (tmp___5 == -1) {
                  _L___0: 
                  id3_tag_delete(tag);
                  tag = (struct id3_tag *)0;
                }
              }
            }
          }
        }
      }
    }
  }
  return (tag);
}
}
static struct id3_tag *v2_parse(id3_byte_t const   *ptr ) 
{ struct id3_tag *tag ;
  id3_byte_t *mem ;
  id3_byte_t const   *end ;
  id3_length_t size ;
  id3_byte_t const   *ehptr ;
  id3_byte_t const   *ehend ;
  id3_length_t ehsize ;
  int ehflags ;
  id3_length_t padsize ;
  unsigned long crc ;
  unsigned long tmp ;
  id3_byte_t const   *ehptr___0 ;
  id3_byte_t const   *ehend___0 ;
  id3_length_t ehsize___0 ;
  unsigned int bytes ;
  id3_byte_t const   *flagsptr ;
  id3_byte_t const   *dataptr ;
  unsigned int datalen ;
  int ehflags___0 ;
  unsigned int tmp___0 ;
  unsigned long crc___0 ;
  unsigned long tmp___1 ;
  struct id3_frame *frame ;
  int tmp___2 ;
  int tmp___3 ;

  {
  mem = (id3_byte_t *)0;
  tag = id3_tag_new();
  if (tag) {
    parse_header(& ptr, & tag->version, & tag->flags, & size);
    tag->paddedsize = 10UL + size;
    if (tag->flags & 128) {
      if (((tag->version >> 8) & 255U) < 4U) {
        mem = (id3_byte_t *)malloc((unsigned int )size);
        if ((unsigned int )mem == (unsigned int )((id3_byte_t *)0)) {
          goto fail;
        }
        memcpy((void * __restrict  )mem, (void const   * __restrict  )ptr, (unsigned int )size);
        size = id3_util_deunsynchronise(mem, size);
        ptr = (id3_byte_t const   *)mem;
      } else {
        goto _L;
      }
    } else {
      _L: ;
    }
    end = ptr + size;
    if (tag->flags & 64) {
      switch ((int )((tag->version >> 8) & 255U)) {
      case 2: ;
      goto fail;
      case 3: ;
      if (end - ptr < 4) {
        goto fail;
      }
      ehsize = id3_parse_uint(& ptr, 4U);
      if (ehsize > (unsigned long )(end - ptr)) {
        goto fail;
      }
      ehptr = ptr;
      ehend = ptr + ehsize;
      ptr = ehend;
      if (ehend - ehptr >= 6) {
        ehflags = (int )id3_parse_uint(& ehptr, 2U);
        padsize = id3_parse_uint(& ehptr, 4U);
        if (padsize > (unsigned long )(end - ptr)) {
          goto fail;
        }
        end -= padsize;
        if (ehflags & 32768) {
          if (ehend - ehptr < 4) {
            goto fail;
          }
          crc = id3_parse_uint(& ehptr, 4U);
          tmp = id3_crc_compute(ptr, (unsigned long )(end - ptr));
          if (crc != tmp) {
            goto fail;
          }
          tag->extendedflags = tag->extendedflags | 32;
        }
      }
      break;
      case 4: ;
      if (end - ptr < 4) {
        goto fail;
      }
      ehptr___0 = ptr;
      ehsize___0 = id3_parse_syncsafe(& ptr, 4U);
      if (ehsize___0 < 6UL) {
        goto _L___0;
      } else {
        if (ehsize___0 > (unsigned long )(end - ehptr___0)) {
          _L___0: 
          goto fail;
        }
      }
      ehend___0 = ehptr___0 + ehsize___0;
      bytes = (unsigned int )id3_parse_uint(& ptr, 1U);
      if (bytes < 1U) {
        goto _L___1;
      } else {
        if (bytes > (unsigned int )(ehend___0 - ptr)) {
          _L___1: 
          goto fail;
        }
      }
      ehptr___0 = ptr + bytes;
      flagsptr = ptr;
      dataptr = ehptr___0;
      while (1) {
        tmp___0 = bytes;
        bytes --;
        if (! tmp___0) {
          break;
        }
        ehflags___0 = (int )id3_parse_uint(& flagsptr, 1U);
        while (ehflags___0) {
          if (ehflags___0 & 128) {
            if ((unsigned int )dataptr == (unsigned int )ehend___0) {
              goto fail;
            }
            datalen = (unsigned int )id3_parse_uint(& dataptr, 1U);
            if (datalen > 127U) {
              goto _L___2;
            } else {
              if (datalen > (unsigned int )(ehend___0 - dataptr)) {
                _L___2: 
                goto fail;
              }
            }
            dataptr += datalen;
          }
          ehflags___0 = (ehflags___0 << 1) & 255;
        }
      }
      tag->extendedflags = (int )id3_parse_uint(& ptr, 1U);
      ptr = ehend___0;
      if (tag->extendedflags & 64) {
        bytes = (unsigned int )id3_parse_uint(& ehptr___0, 1U);
        ehptr___0 += bytes;
      }
      if (tag->extendedflags & 32) {
        bytes = (unsigned int )id3_parse_uint(& ehptr___0, 1U);
        if (bytes < 5U) {
          goto fail;
        }
        crc___0 = id3_parse_syncsafe(& ehptr___0, 5U);
        ehptr___0 += bytes - 5U;
        tmp___1 = id3_crc_compute(ptr, (unsigned long )(end - ptr));
        if (crc___0 != tmp___1) {
          goto fail;
        }
      }
      if (tag->extendedflags & 16) {
        bytes = (unsigned int )id3_parse_uint(& ehptr___0, 1U);
        if (bytes < 1U) {
          goto fail;
        }
        tag->restrictions = (int )id3_parse_uint(& ehptr___0, 1U);
        ehptr___0 += bytes - 1U;
      }
      break;
      }
    }
    while ((unsigned int )ptr < (unsigned int )end) {
      if ((int const   )(*ptr) == 0) {
        break;
      }
      frame = id3_frame_parse(& ptr, (unsigned long )(end - ptr), tag->version);
      if ((unsigned int )frame == (unsigned int )((struct id3_frame *)0)) {
        goto _L___3;
      } else {
        tmp___2 = id3_tag_attachframe(tag, frame);
        if (tmp___2 == -1) {
          _L___3: 
          goto fail;
        }
      }
    }
    if (((tag->version >> 8) & 255U) < 4U) {
      tmp___3 = id3_compat_fixup(tag);
      if (tmp___3 == -1) {
        goto fail;
      } else {
        goto _L___4;
      }
    } else {
      _L___4: ;
    }
  }
  if (0) {
    fail: 
    id3_tag_delete(tag);
    tag = (struct id3_tag *)0;
  }
  if (mem) {
    free((void *)mem);
  }
  return (tag);
}
}
struct id3_tag *id3_tag_parse(id3_byte_t const   *data , id3_length_t length ) 
{ id3_byte_t const   *ptr ;
  unsigned int version ;
  int flags ;
  id3_length_t size ;
  int tmp ;
  struct id3_tag *tmp___1 ;
  struct id3_tag *tmp___3 ;

  {
  if (! data) {
    __assert_fail("data", "tag.c", 640U, "id3_tag_parse");
  }
  tmp = (int )tagtype(data, length);
  switch (tmp) {
  case 1: ;
  if (length < 128UL) {
    tmp___1 = (struct id3_tag *)0;
  } else {
    tmp___1 = v1_parse(data);
  }
  return (tmp___1);
  case 2: ;
  break;
  case 3: ;
  case 0: ;
  return ((struct id3_tag *)0);
  }
  ptr = data;
  parse_header(& ptr, & version, & flags, & size);
  switch ((int )((version >> 8) & 255U)) {
  case 4: ;
  if (flags & 16) {
    size += 10UL;
  }
  case 2: ;
  case 3: ;
  if (length < 10UL + size) {
    tmp___3 = (struct id3_tag *)0;
  } else {
    tmp___3 = v2_parse(data);
  }
  return (tmp___3);
  }
  return ((struct id3_tag *)0);
}
}
static void v1_renderstr(struct id3_tag  const  *tag , char const   *frameid , id3_byte_t **buffer___0 ,
                         id3_length_t length ) 
{ struct id3_frame *frame ;
  id3_ucs4_t const   *string ;
  size_t __s1_len ;
  size_t __s2_len ;
  int tmp___20 ;
  size_t tmp___21 ;
  register int __result___37 ;
  unsigned char const   *__s2___6 ;
  register int __result___38 ;
  register int __result___45 ;
  unsigned char const   *__s1___14 ;
  register int __result___46 ;
  int tmp___36 ;
  int tmp___37 ;
  int tmp___38 ;
  int tmp___39 ;

  {
  frame = id3_tag_findframe(tag, frameid, 0U);
  if ((unsigned int )frame == (unsigned int )((struct id3_frame *)0)) {
    string = id3_ucs4_empty;
  } else {
    tmp___38 = __builtin_constant_p(frameid);
    if (tmp___38) {
      __s1_len = strlen(frameid);
      __s2_len = strlen("COMM");
      if (! ((unsigned int )((void const   *)(frameid + 1)) - (unsigned int )((void const   *)frameid) ==
             1U)) {
        goto _L___164;
      } else {
        if (__s1_len >= 4U) {
          _L___164: 
          if (! ((unsigned int )((void const   *)("COMM" + 1)) - (unsigned int )((void const   *)"COMM") ==
                 1U)) {
            goto _L___163;
          } else {
            if (__s2_len >= 4U) {
              _L___163: 
              tmp___39 = 1;
            } else {
              goto _L___162;
            }
          }
        } else {
          _L___162: 
          tmp___39 = 0;
        }
      }
      if (tmp___39) {
        if (__s1_len < __s2_len) {
          tmp___21 = __s1_len;
        } else {
          tmp___21 = __s2_len;
        }
        tmp___20 = memcmp((void const   *)frameid, (void const   *)"COMM", tmp___21 +
                                                                           1U);
      } else {
        goto _L___166;
      }
    } else {
      _L___166: 
      tmp___37 = __builtin_constant_p(frameid);
      if (tmp___37) {
        if ((unsigned int )((void const   *)(frameid + 1)) - (unsigned int )((void const   *)frameid) ==
            1U) {
          __s1_len = strlen(frameid);
          if (__s1_len < 4U) {
            if ((unsigned int )((void const   *)("COMM" + 1)) - (unsigned int )((void const   *)"COMM") ==
                1U) {
              __result___37 = (int )((int const   )(*((unsigned char const   *)frameid +
                                                      0)) - (int const   )(*((unsigned char const   *)"COMM" +
                                                                             0)));
              if (__s1_len > 0U) {
                if (__result___37 == 0) {
                  __result___37 = (int )((int const   )(*((unsigned char const   *)frameid +
                                                          1)) - (int const   )(*((unsigned char const   *)"COMM" +
                                                                                 1)));
                  if (__s1_len > 1U) {
                    if (__result___37 == 0) {
                      __result___37 = (int )((int const   )(*((unsigned char const   *)frameid +
                                                              2)) - (int const   )(*((unsigned char const   *)"COMM" +
                                                                                     2)));
                      if (__s1_len > 2U) {
                        if (__result___37 == 0) {
                          __result___37 = (int )((int const   )(*((unsigned char const   *)frameid +
                                                                  3)) - (int const   )(*((unsigned char const   *)"COMM" +
                                                                                         3)));
                        } else {
                          goto _L___127;
                        }
                      } else {
                        _L___127: ;
                      }
                    } else {
                      goto _L___128;
                    }
                  } else {
                    _L___128: ;
                  }
                } else {
                  goto _L___129;
                }
              } else {
                _L___129: ;
              }
              tmp___20 = __result___37;
            } else {
              __s2___6 = (unsigned char const   *)"COMM";
              __result___38 = (int )((int const   )(*((unsigned char const   *)frameid +
                                                      0)) - (int const   )(*(__s2___6 +
                                                                             0)));
              if (__s1_len > 0U) {
                if (__result___38 == 0) {
                  __result___38 = (int )((int const   )(*((unsigned char const   *)frameid +
                                                          1)) - (int const   )(*(__s2___6 +
                                                                                 1)));
                  if (__s1_len > 1U) {
                    if (__result___38 == 0) {
                      __result___38 = (int )((int const   )(*((unsigned char const   *)frameid +
                                                              2)) - (int const   )(*(__s2___6 +
                                                                                     2)));
                      if (__s1_len > 2U) {
                        if (__result___38 == 0) {
                          __result___38 = (int )((int const   )(*((unsigned char const   *)frameid +
                                                                  3)) - (int const   )(*(__s2___6 +
                                                                                         3)));
                        } else {
                          goto _L___130;
                        }
                      } else {
                        _L___130: ;
                      }
                    } else {
                      goto _L___131;
                    }
                  } else {
                    _L___131: ;
                  }
                } else {
                  goto _L___132;
                }
              } else {
                _L___132: ;
              }
              tmp___20 = __result___38;
            }
          } else {
            goto _L___161;
          }
        } else {
          goto _L___161;
        }
      } else {
        _L___161: 
        if ((unsigned int )((void const   *)("COMM" + 1)) - (unsigned int )((void const   *)"COMM") ==
            1U) {
          __s2_len = strlen("COMM");
          if (__s2_len < 4U) {
            tmp___36 = __builtin_constant_p(frameid);
            if (tmp___36) {
              if ((unsigned int )((void const   *)(frameid + 1)) - (unsigned int )((void const   *)frameid) ==
                  1U) {
                __result___45 = (int )((int const   )(*((unsigned char const   *)frameid +
                                                        0)) - (int const   )(*((unsigned char const   *)"COMM" +
                                                                               0)));
                if (__s2_len > 0U) {
                  if (__result___45 == 0) {
                    __result___45 = (int )((int const   )(*((unsigned char const   *)frameid +
                                                            1)) - (int const   )(*((unsigned char const   *)"COMM" +
                                                                                   1)));
                    if (__s2_len > 1U) {
                      if (__result___45 == 0) {
                        __result___45 = (int )((int const   )(*((unsigned char const   *)frameid +
                                                                2)) - (int const   )(*((unsigned char const   *)"COMM" +
                                                                                       2)));
                        if (__s2_len > 2U) {
                          if (__result___45 == 0) {
                            __result___45 = (int )((int const   )(*((unsigned char const   *)frameid +
                                                                    3)) - (int const   )(*((unsigned char const   *)"COMM" +
                                                                                           3)));
                          } else {
                            goto _L___152;
                          }
                        } else {
                          _L___152: ;
                        }
                      } else {
                        goto _L___153;
                      }
                    } else {
                      _L___153: ;
                    }
                  } else {
                    goto _L___154;
                  }
                } else {
                  _L___154: ;
                }
                tmp___20 = __result___45;
              } else {
                goto _L___158;
              }
            } else {
              _L___158: 
              __s1___14 = (unsigned char const   *)frameid;
              __result___46 = (int )((int const   )(*(__s1___14 + 0)) - (int const   )(*((unsigned char const   *)"COMM" +
                                                                                         0)));
              if (__s2_len > 0U) {
                if (__result___46 == 0) {
                  __result___46 = (int )((int const   )(*(__s1___14 + 1)) - (int const   )(*((unsigned char const   *)"COMM" +
                                                                                             1)));
                  if (__s2_len > 1U) {
                    if (__result___46 == 0) {
                      __result___46 = (int )((int const   )(*(__s1___14 + 2)) - (int const   )(*((unsigned char const   *)"COMM" +
                                                                                                 2)));
                      if (__s2_len > 2U) {
                        if (__result___46 == 0) {
                          __result___46 = (int )((int const   )(*(__s1___14 + 3)) -
                                                 (int const   )(*((unsigned char const   *)"COMM" +
                                                                  3)));
                        } else {
                          goto _L___155;
                        }
                      } else {
                        _L___155: ;
                      }
                    } else {
                      goto _L___156;
                    }
                  } else {
                    _L___156: ;
                  }
                } else {
                  goto _L___157;
                }
              } else {
                _L___157: ;
              }
              tmp___20 = __result___46;
            }
          } else {
            goto _L___159;
          }
        } else {
          _L___159: 
          tmp___20 = strcmp(frameid, "COMM");
        }
      }
    }
    if (tmp___20 == 0) {
      string = id3_field_getfullstring((union id3_field  const  *)(frame->fields +
                                                                   3));
    } else {
      string = id3_field_getstrings((union id3_field  const  *)(frame->fields + 1),
                                    0U);
    }
  }
  id3_render_paddedstring(buffer___0, string, length);
  return;
}
}
static id3_length_t v1_render(struct id3_tag  const  *tag , id3_byte_t *buffer___0 ) 
{ id3_byte_t data[128] ;
  id3_byte_t *ptr ;
  struct id3_frame *frame ;
  unsigned int i ;
  int genre ;
  unsigned int track ;
  id3_ucs4_t const   *tmp ;
  unsigned int nstrings ;
  id3_ucs4_t const   *tmp___0 ;

  {
  genre = -1;
  ptr = data;
  id3_render_immediate(& ptr, "TAG", 3U);
  v1_renderstr(tag, "TIT2", & ptr, 30UL);
  v1_renderstr(tag, "TPE1", & ptr, 30UL);
  v1_renderstr(tag, "TALB", & ptr, 30UL);
  v1_renderstr(tag, "TDRC", & ptr, 4UL);
  v1_renderstr(tag, "COMM", & ptr, 30UL);
  frame = id3_tag_findframe(tag, "TRCK", 0U);
  if (frame) {
    tmp = id3_field_getstrings((union id3_field  const  *)(frame->fields + 1), 0U);
    track = (unsigned int )id3_ucs4_getnumber(tmp);
    if (track > 0U) {
      if (track <= 255U) {
        (*(ptr + -2)) = (unsigned char)0;
        (*(ptr + -1)) = (unsigned char )track;
      } else {
        goto _L;
      }
    } else {
      _L: ;
    }
  }
  frame = id3_tag_findframe(tag, "TCON", 0U);
  if (frame) {
    nstrings = id3_field_getnstrings((union id3_field  const  *)(frame->fields + 1));
    i = 0U;
    while (i < nstrings) {
      tmp___0 = id3_field_getstrings((union id3_field  const  *)(frame->fields + 1),
                                     i);
      genre = id3_genre_number(tmp___0);
      if (genre != -1) {
        break;
      }
      i ++;
    }
    if (i == nstrings) {
      if (nstrings > 0U) {
        genre = 12;
      } else {
        goto _L___0;
      }
    } else {
      _L___0: ;
    }
  }
  id3_render_int(& ptr, (long )genre, 1U);
  if (genre == -1) {
    i = 3U;
    while (i < 127U) {
      if ((int )data[i] != 32) {
        break;
      }
      i ++;
    }
    if (i == 127U) {
      return (0UL);
    }
  }
  if (buffer___0) {
    memcpy((void * __restrict  )buffer___0, (void const   * __restrict  )(data), 128U);
  }
  return (128UL);
}
}
id3_length_t id3_tag_render(struct id3_tag  const  *tag , id3_byte_t *buffer___0 ) 
{ id3_length_t size ;
  id3_byte_t **ptr ;
  id3_byte_t *header_ptr ;
  id3_byte_t *tagsize_ptr ;
  id3_byte_t *crc_ptr ;
  id3_byte_t *frames_ptr ;
  int flags ;
  int extendedflags ;
  unsigned int i ;
  id3_length_t tmp ;
  id3_length_t tmp___0 ;
  id3_length_t tmp___1 ;
  id3_length_t tmp___2 ;
  id3_length_t tmp___3 ;
  id3_length_t tmp___4 ;
  id3_length_t ehsize ;
  id3_byte_t *ehsize_ptr ;
  id3_length_t tmp___5 ;
  id3_length_t tmp___6 ;
  id3_length_t tmp___7 ;
  id3_length_t tmp___8 ;
  id3_length_t tmp___9 ;
  id3_length_t tmp___10 ;
  id3_length_t tmp___11 ;
  id3_length_t tmp___12 ;
  id3_length_t tmp___13 ;
  id3_length_t tmp___14 ;
  id3_length_t tmp___15 ;
  unsigned long tmp___16 ;
  id3_length_t tmp___17 ;
  id3_length_t tmp___18 ;

  {
  size = 0UL;
  header_ptr = (id3_byte_t *)0;
  tagsize_ptr = (id3_byte_t *)0;
  crc_ptr = (id3_byte_t *)0;
  frames_ptr = (id3_byte_t *)0;
  if (! tag) {
    __assert_fail("tag", "tag.c", 776U, "id3_tag_render");
  }
  if (tag->options & 256) {
    tmp = v1_render(tag, buffer___0);
    return (tmp);
  }
  i = 0U;
  while (i < tag->nframes) {
    tmp___0 = id3_frame_render((struct id3_frame  const  *)(*(tag->frames + i)), (id3_byte_t **)0,
                               0);
    if (tmp___0 > 0UL) {
      break;
    }
    i ++;
  }
  if (i == tag->nframes) {
    return (0UL);
  }
  if (buffer___0) {
    ptr = & buffer___0;
  } else {
    ptr = (id3_byte_t **)0;
  }
  flags = tag->flags & 240;
  extendedflags = tag->extendedflags & 112;
  extendedflags &= -33;
  if (tag->options & 4) {
    extendedflags |= 32;
  }
  extendedflags &= -17;
  if (tag->restrictions) {
    extendedflags |= 16;
  }
  flags &= -129;
  if (tag->options & 1) {
    flags |= 128;
  }
  flags &= -65;
  if (extendedflags) {
    flags |= 64;
  }
  flags &= -17;
  if (tag->options & 16) {
    flags |= 16;
  }
  if (ptr) {
    header_ptr = (*ptr);
  }
  tmp___1 = id3_render_immediate(ptr, "ID3", 3U);
  size += tmp___1;
  tmp___2 = id3_render_int(ptr, 1024L, 2U);
  size += tmp___2;
  tmp___3 = id3_render_int(ptr, (long )flags, 1U);
  size += tmp___3;
  if (ptr) {
    tagsize_ptr = (*ptr);
  }
  tmp___4 = id3_render_syncsafe(ptr, 0UL, 4U);
  size += tmp___4;
  if (flags & 64) {
    ehsize = 0UL;
    ehsize_ptr = (id3_byte_t *)0;
    if (ptr) {
      ehsize_ptr = (*ptr);
    }
    tmp___5 = id3_render_syncsafe(ptr, 0UL, 4U);
    ehsize += tmp___5;
    tmp___6 = id3_render_int(ptr, 1L, 1U);
    ehsize += tmp___6;
    tmp___7 = id3_render_int(ptr, (long )extendedflags, 1U);
    ehsize += tmp___7;
    if (extendedflags & 64) {
      tmp___8 = id3_render_int(ptr, 0L, 1U);
      ehsize += tmp___8;
    }
    if (extendedflags & 32) {
      tmp___9 = id3_render_int(ptr, 5L, 1U);
      ehsize += tmp___9;
      if (ptr) {
        crc_ptr = (*ptr);
      }
      tmp___10 = id3_render_syncsafe(ptr, 0UL, 5U);
      ehsize += tmp___10;
    }
    if (extendedflags & 16) {
      tmp___11 = id3_render_int(ptr, 1L, 1U);
      ehsize += tmp___11;
      tmp___12 = id3_render_int(ptr, (long )tag->restrictions, 1U);
      ehsize += tmp___12;
    }
    if (ehsize_ptr) {
      id3_render_syncsafe(& ehsize_ptr, ehsize, 4U);
    }
    size += ehsize;
  }
  if (ptr) {
    frames_ptr = (*ptr);
  }
  i = 0U;
  while (i < tag->nframes) {
    tmp___13 = id3_frame_render((struct id3_frame  const  *)(*(tag->frames + i)),
                                ptr, tag->options);
    size += tmp___13;
    i ++;
  }
  if (! (flags & 16)) {
    if (size < tag->paddedsize) {
      tmp___14 = id3_render_padding(ptr, (unsigned char)0, tag->paddedsize - size);
      size += tmp___14;
    } else {
      if (tag->options & 1) {
        if ((unsigned int )ptr == (unsigned int )((id3_byte_t **)0)) {
          size ++;
        } else {
          if ((int )(*((*ptr) + -1)) == 255) {
            tmp___15 = id3_render_padding(ptr, (unsigned char)0, 1UL);
            size += tmp___15;
          }
        }
      }
    }
  }
  if (tagsize_ptr) {
    id3_render_syncsafe(& tagsize_ptr, size - 10UL, 4U);
  }
  if (crc_ptr) {
    tmp___16 = id3_crc_compute((id3_byte_t const   *)frames_ptr, (unsigned long )((*ptr) -
                                                                                  frames_ptr));
    id3_render_syncsafe(& crc_ptr, tmp___16, 5U);
  }
  if (flags & 16) {
    tmp___17 = id3_render_immediate(ptr, "3DI", 3U);
    size += tmp___17;
    tmp___18 = id3_render_binary(ptr, (id3_byte_t const   *)(header_ptr + 3), 7UL);
    size += tmp___18;
  }
  return (size);
}
}
#pragma merger(0,"/tmp/cil-y0pegixP.i","-Wall -g -O2")
extern int fclose(FILE *__stream ) ;
extern int fflush(FILE *__stream ) ;
extern FILE *fopen(char const   * __restrict  __filename , char const   * __restrict  __modes ) ;
extern FILE *fdopen(int __fd , char const   *__modes ) ;
extern size_t fread(void * __restrict  __ptr , size_t __size , size_t __n , FILE * __restrict  __stream ) ;
extern size_t fwrite(void const   * __restrict  __ptr , size_t __size , size_t __n ,
                     FILE * __restrict  __s ) ;
extern int fseek(FILE *__stream , long __off , int __whence ) ;
extern long ftell(FILE *__stream ) ;
extern void rewind(FILE *__stream ) ;
extern int fgetpos(FILE * __restrict  __stream , fpos_t * __restrict  __pos ) ;
extern int fsetpos(FILE *__stream , fpos_t const   *__pos ) ;
extern void clearerr(FILE *__stream ) ;
extern int fileno(FILE *__stream ) ;
extern void *calloc(size_t __nmemb , size_t __size )  __attribute__((__malloc__)) ;
extern void qsort(void *__base , size_t __nmemb , size_t __size , int (*__compar)(void const   * ,
                                                                                  void const   * ) ) ;
extern char *__strdup(char const   *__string )  __attribute__((__malloc__)) ;
extern int close(int __fd ) ;
extern int dup(int __fd ) ;
extern int dup2(int __fd , int __fd2 ) ;
extern int ftruncate(int __fd , __off_t __length ) ;
struct id3_file *id3_file_open(char const   *path , enum id3_file_mode mode ) ;
struct id3_file *id3_file_fdopen(int fd , enum id3_file_mode mode ) ;
int id3_file_close(struct id3_file *file ) ;
struct id3_tag *id3_file_tag(struct id3_file  const  *file ) ;
int id3_file_update(struct id3_file *file ) ;
static long query_tag(FILE *iofile ) 
{ fpos_t save_position ;
  id3_byte_t query[10] ;
  long size ;
  int tmp ;
  id3_length_t tmp___0 ;
  int tmp___1 ;

  {
  tmp = fgetpos((FILE * __restrict  )iofile, (fpos_t * __restrict  )(& save_position));
  if (tmp == -1) {
    return (0L);
  }
  tmp___0 = (id3_length_t )fread((void * __restrict  )(query), 1U, sizeof(query),
                                 (FILE * __restrict  )iofile);
  size = id3_tag_query((id3_byte_t const   *)(query), tmp___0);
  tmp___1 = fsetpos(iofile, (fpos_t const   *)(& save_position));
  if (tmp___1 == -1) {
    return (0L);
  }
  return (size);
}
}
static struct id3_tag *read_tag(FILE *iofile , id3_length_t size ) 
{ id3_byte_t *data ;
  struct id3_tag *tag ;
  size_t tmp ;

  {
  tag = (struct id3_tag *)0;
  data = (id3_byte_t *)malloc((unsigned int )size);
  if (data) {
    tmp = fread((void * __restrict  )data, (unsigned int )size, 1U, (FILE * __restrict  )iofile);
    if (tmp == 1U) {
      tag = id3_tag_parse((id3_byte_t const   *)data, size);
    }
    free((void *)data);
  }
  return (tag);
}
}
static int update_primary(struct id3_tag *tag , struct id3_tag  const  *new ) 
{ unsigned int i ;
  struct id3_frame *frame ;
  int tmp ;
  unsigned int tmp___0 ;

  {
  if (new) {
    if (! (new->extendedflags & 64)) {
      id3_tag_clearframes(tag);
    }
    i = 0U;
    while (1) {
      tmp___0 = i;
      i ++;
      frame = id3_tag_findframe(new, (char const   *)0, tmp___0);
      if (! frame) {
        break;
      }
      tmp = id3_tag_attachframe(tag, frame);
      if (tmp == -1) {
        return (-1);
      }
    }
  }
  return (0);
}
}
static int tag_compare(void const   *a , void const   *b ) 
{ struct filetag  const  *tag1 ;
  struct filetag  const  *tag2 ;

  {
  tag1 = (struct filetag  const  *)a;
  tag2 = (struct filetag  const  *)b;
  if (tag1->location < tag2->location) {
    return (-1);
  } else {
    if (tag1->location > tag2->location) {
      return (1);
    }
  }
  return (0);
}
}
static int add_filetag(struct id3_file *file , struct filetag  const  *filetag ) 
{ struct filetag *tags ;
  unsigned int tmp ;

  {
  tags = (struct filetag *)realloc((void *)file->tags, (file->ntags + 1U) * sizeof((*tags)));
  if ((unsigned int )tags == (unsigned int )((struct filetag *)0)) {
    return (-1);
  }
  file->tags = tags;
  tmp = file->ntags;
  file->ntags ++;
  (*(file->tags + tmp)) = (*filetag);
  if (file->ntags > 1U) {
    qsort((void *)file->tags, file->ntags, sizeof((*(file->tags + 0))), & tag_compare);
  }
  return (0);
}
}
static void del_filetag(struct id3_file *file , unsigned int index___0 ) 
{ 

  {
  if (! (index___0 < file->ntags)) {
    __assert_fail("index < file->ntags", "file.c", 183U, "del_filetag");
  }
  while (index___0 < file->ntags - 1U) {
    (*(file->tags + index___0)) = (*(file->tags + (index___0 + 1U)));
    index___0 ++;
  }
  file->ntags --;
  return;
}
}
static struct id3_tag *add_tag(struct id3_file *file , id3_length_t length ) 
{ long location ;
  unsigned int i ;
  struct filetag filetag ;
  struct id3_tag *tag ;
  unsigned long begin1 ;
  unsigned long end1 ;
  unsigned long begin2 ;
  unsigned long end2 ;
  int tmp ;
  int tmp___0 ;

  {
  location = ftell(file->iofile);
  if (location == -1L) {
    return ((struct id3_tag *)0);
  }
  begin1 = (unsigned long )location;
  end1 = begin1 + length;
  i = 0U;
  while (i < file->ntags) {
    begin2 = (file->tags + i)->location;
    end2 = begin2 + (file->tags + i)->length;
    if (begin1 == begin2) {
      if (end1 == end2) {
        return ((file->tags + i)->tag);
      } else {
        goto _L;
      }
    } else {
      _L: ;
    }
    if (begin1 < end2) {
      if (end1 > begin2) {
        return ((struct id3_tag *)0);
      } else {
        goto _L___0;
      }
    } else {
      _L___0: ;
    }
    i ++;
  }
  tag = read_tag(file->iofile, length);
  filetag.tag = tag;
  filetag.location = (unsigned long )location;
  filetag.length = length;
  tmp = add_filetag(file, (struct filetag  const  *)(& filetag));
  if (tmp == -1) {
    goto _L___1;
  } else {
    tmp___0 = update_primary(file->primary, (struct id3_tag  const  *)tag);
    if (tmp___0 == -1) {
      _L___1: 
      if (tag) {
        id3_tag_delete(tag);
      }
      return ((struct id3_tag *)0);
    }
  }
  if (tag) {
    id3_tag_addref(tag);
  }
  return (tag);
}
}
static int search_tags(struct id3_file *file ) 
{ fpos_t save_position ;
  long size ;
  int tmp ;
  int tmp___0 ;
  struct id3_tag  const  *tag ;
  unsigned int tmp___1 ;
  int tmp___2 ;
  struct id3_tag  const  *tag___0 ;
  struct id3_frame  const  *frame ;
  long seek ;
  union id3_field  const  *tmp___3 ;
  int tmp___4 ;
  int tmp___6 ;
  int tmp___7 ;
  int tmp___8 ;
  int tmp___9 ;

  {
  tmp = fgetpos((FILE * __restrict  )file->iofile, (fpos_t * __restrict  )(& save_position));
  if (tmp == -1) {
    goto _L;
  } else {
    tmp___0 = fsetpos(file->iofile, (fpos_t const   *)(& save_position));
    if (tmp___0 == -1) {
      _L: 
      return (-1);
    }
  }
  tmp___2 = fseek(file->iofile, -128L, 2);
  if (tmp___2 == 0) {
    size = query_tag(file->iofile);
    if (size > 0L) {
      tag = add_tag(file, (unsigned long )size);
      if (tag) {
        tmp___1 = id3_tag_version(tag);
        if (((tmp___1 >> 8) & 255U) == 1U) {
          file->flags |= 1;
        } else {
          goto _L___0;
        }
      } else {
        _L___0: ;
      }
    }
  }
  rewind(file->iofile);
  size = query_tag(file->iofile);
  if (size > 0L) {
    tag___0 = add_tag(file, (unsigned long )size);
    while (1) {
      if (tag___0) {
        frame = id3_tag_findframe(tag___0, "SEEK", 0U);
        if (! frame) {
          goto _L___2;
        }
      } else {
        _L___2: 
        break;
      }
      tmp___3 = id3_frame_field(frame, 0U);
      seek = id3_field_getint(tmp___3);
      if (seek < 0L) {
        goto _L___1;
      } else {
        tmp___4 = fseek(file->iofile, seek, 1);
        if (tmp___4 == -1) {
          _L___1: 
          break;
        }
      }
      size = query_tag(file->iofile);
      if (size > 0L) {
        tag___0 = add_tag(file, (unsigned long )size);
      } else {
        tag___0 = (struct id3_tag  const  *)0;
      }
    }
  }
  if (file->flags & 1) {
    tmp___7 = -128;
  } else {
    tmp___7 = 0;
  }
  tmp___8 = fseek(file->iofile, (long )(tmp___7 + -10), 2);
  if (tmp___8 == 0) {
    size = query_tag(file->iofile);
    if (size < 0L) {
      tmp___6 = fseek(file->iofile, size, 1);
      if (tmp___6 == 0) {
        size = query_tag(file->iofile);
        if (size > 0L) {
          add_tag(file, (unsigned long )size);
        }
      } else {
        goto _L___3;
      }
    } else {
      _L___3: ;
    }
  }
  clearerr(file->iofile);
  tmp___9 = fsetpos(file->iofile, (fpos_t const   *)(& save_position));
  if (tmp___9 == -1) {
    return (-1);
  }
  if (file->ntags > 0U) {
    if (! (file->flags & 1)) {
      goto _L___4;
    } else {
      goto _L___6;
    }
  } else {
    _L___6: 
    if (file->ntags > 1U) {
      if (file->flags & 1) {
        _L___4: 
        if ((file->tags + 0)->location == 0UL) {
          id3_tag_setlength(file->primary, (file->tags + 0)->length);
        } else {
          id3_tag_options(file->primary, 16, ~ 0);
        }
      } else {
        goto _L___5;
      }
    } else {
      _L___5: ;
    }
  }
  return (0);
}
}
static void finish_file(struct id3_file *file ) 
{ unsigned int i ;
  struct id3_tag *tag ;

  {
  if (file->path) {
    free((void *)file->path);
  }
  if (file->primary) {
    id3_tag_delref(file->primary);
    id3_tag_delete(file->primary);
  }
  i = 0U;
  while (i < file->ntags) {
    tag = (file->tags + i)->tag;
    if (tag) {
      id3_tag_delref(tag);
      id3_tag_delete(tag);
    }
    i ++;
  }
  if (file->tags) {
    free((void *)file->tags);
  }
  free((void *)file);
  return;
}
}
static struct id3_file *new_file(FILE *iofile , enum id3_file_mode mode , char const   *path ) 
{ struct id3_file *file ;
  size_t __len___6 ;
  size_t tmp___36 ;
  char *__retval___6 ;
  char *tmp___37 ;
  int tmp___39 ;
  int tmp___40 ;
  int tmp___41 ;

  {
  file = (struct id3_file *)malloc(sizeof((*file)));
  if ((unsigned int )file == (unsigned int )((struct id3_file *)0)) {
    goto fail;
  }
  file->iofile = iofile;
  file->mode = mode;
  if (path) {
    tmp___39 = __builtin_constant_p(path);
    if (tmp___39) {
      if ((unsigned int )((void const   *)(path + 1)) - (unsigned int )((void const   *)path) ==
          1U) {
        if ((int const   )(*(path + 0)) == 0) {
          file->path = (char *)calloc(1U, 1U);
        } else {
          tmp___36 = strlen(path);
          __len___6 = tmp___36 + 1U;
          tmp___37 = (char *)malloc(__len___6);
          __retval___6 = tmp___37;
          if ((unsigned int )__retval___6 != (unsigned int )((void *)0)) {
            __retval___6 = (char *)memcpy((void * __restrict  )__retval___6, (void const   * __restrict  )path,
                                          __len___6);
          }
          file->path = __retval___6;
        }
      } else {
        goto _L___0;
      }
    } else {
      _L___0: 
      file->path = __strdup(path);
    }
  } else {
    file->path = (char *)0;
  }
  file->flags = 0;
  file->ntags = 0U;
  file->tags = (struct filetag *)0;
  file->primary = id3_tag_new();
  if ((unsigned int )file->primary == (unsigned int )((struct id3_tag *)0)) {
    goto fail;
  }
  id3_tag_addref(file->primary);
  tmp___40 = search_tags(file);
  if (tmp___40 == -1) {
    goto fail;
  }
  if (file->flags & 1) {
    tmp___41 = ~ 0;
  } else {
    tmp___41 = 0;
  }
  id3_tag_options(file->primary, 256, tmp___41);
  if (0) {
    fail: 
    if (file) {
      finish_file(file);
      file = (struct id3_file *)0;
    }
  }
  return (file);
}
}
struct id3_file *id3_file_open(char const   *path , enum id3_file_mode mode ) 
{ FILE *iofile ;
  struct id3_file *file ;
  char const   *tmp ;

  {
  if (! path) {
    __assert_fail("path", "file.c", 433U, "id3_file_open");
  }
  if ((int )mode == 1) {
    tmp = "r+b";
  } else {
    tmp = "rb";
  }
  iofile = fopen((char const   * __restrict  )path, (char const   * __restrict  )tmp);
  if ((unsigned int )iofile == (unsigned int )((FILE *)0)) {
    return ((struct id3_file *)0);
  }
  file = new_file(iofile, mode, path);
  if ((unsigned int )file == (unsigned int )((struct id3_file *)0)) {
    fclose(iofile);
  }
  return (file);
}
}
struct id3_file *id3_file_fdopen(int fd , enum id3_file_mode mode ) 
{ FILE *iofile ;
  struct id3_file *file ;
  char const   *tmp ;
  int save_fd ;

  {
  if ((int )mode == 1) {
    tmp = "r+b";
  } else {
    tmp = "rb";
  }
  iofile = fdopen(fd, tmp);
  if ((unsigned int )iofile == (unsigned int )((FILE *)0)) {
    return ((struct id3_file *)0);
  }
  file = new_file(iofile, mode, (char const   *)0);
  if ((unsigned int )file == (unsigned int )((struct id3_file *)0)) {
    save_fd = dup(fd);
    fclose(iofile);
    dup2(save_fd, fd);
    close(save_fd);
  }
  return (file);
}
}
int id3_file_close(struct id3_file *file ) 
{ int result ;
  int tmp ;

  {
  result = 0;
  if (! file) {
    __assert_fail("file", "file.c", 488U, "id3_file_close");
  }
  tmp = fclose(file->iofile);
  if (tmp == -1) {
    result = -1;
  }
  finish_file(file);
  return (result);
}
}
struct id3_tag *id3_file_tag(struct id3_file  const  *file ) 
{ 

  {
  if (! file) {
    __assert_fail("file", "file.c", 504U, "id3_file_tag");
  }
  return (file->primary);
}
}
static int v1_write(struct id3_file *file , id3_byte_t const   *data , id3_length_t length ) 
{ long location ;
  int tmp ;
  int tmp___0 ;
  size_t tmp___1 ;
  int tmp___2 ;
  struct filetag filetag ;
  int tmp___3 ;
  long length___0 ;
  int tmp___4 ;
  int tmp___5 ;
  int tmp___6 ;

  {
  if (! data) {
    goto _L;
  } else {
    if (length == 128UL) {
      _L: ;
    } else {
      __assert_fail("!data || length == 128", "file.c", 517U, "v1_write");
    }
  }
  if (data) {
    if (file->flags & 1) {
      tmp = -128;
    } else {
      tmp = 0;
    }
    tmp___0 = fseek(file->iofile, (long )tmp, 2);
    if (tmp___0 == -1) {
      goto _L___2;
    } else {
      location = ftell(file->iofile);
      if (location == -1L) {
        _L___2: 
        goto _L___1;
      } else {
        tmp___1 = fwrite((void const   * __restrict  )data, 128U, 1U, (FILE * __restrict  )file->iofile);
        if (tmp___1 != 1U) {
          _L___1: 
          goto _L___0;
        } else {
          tmp___2 = fflush(file->iofile);
          if (tmp___2 == -1) {
            _L___0: 
            return (-1);
          }
        }
      }
    }
    if (! (file->flags & 1)) {
      filetag.tag = (struct id3_tag *)0;
      filetag.location = (unsigned long )location;
      filetag.length = 128UL;
      tmp___3 = add_filetag(file, (struct filetag  const  *)(& filetag));
      if (tmp___3 == -1) {
        return (-1);
      }
      file->flags |= 1;
    }
  } else {
    if (file->flags & 1) {
      tmp___4 = fseek(file->iofile, 0L, 2);
      if (tmp___4 == -1) {
        return (-1);
      }
      length___0 = ftell(file->iofile);
      if (length___0 == -1L) {
        goto _L___3;
      } else {
        if (length___0 >= 0L) {
          if (length___0 < 128L) {
            _L___3: 
            return (-1);
          } else {
            goto _L___4;
          }
        } else {
          _L___4: ;
        }
      }
      tmp___5 = fileno(file->iofile);
      tmp___6 = ftruncate(tmp___5, length___0 - 128L);
      if (tmp___6 == -1) {
        return (-1);
      }
      del_filetag(file, file->ntags - 1U);
      file->flags &= -2;
    }
  }
  return (0);
}
}
static int v2_write(struct id3_file *file , id3_byte_t const   *data , id3_length_t length ) 
{ int tmp ;
  size_t tmp___0 ;
  int tmp___1 ;

  {
  if (! data) {
    goto _L;
  } else {
    if (length > 0UL) {
      _L: ;
    } else {
      __assert_fail("!data || length > 0", "file.c", 578U, "v2_write");
    }
  }
  if (data) {
    if (file->ntags == 1U) {
      if (! (file->flags & 1)) {
        goto _L___4;
      } else {
        goto _L___6;
      }
    } else {
      _L___6: 
      if (file->ntags == 2U) {
        if (file->flags & 1) {
          _L___4: 
          if ((file->tags + 0)->length == length) {
            tmp = fseek(file->iofile, (long )(file->tags + 0)->location, 0);
            if (tmp == -1) {
              goto _L___1;
            } else {
              tmp___0 = fwrite((void const   * __restrict  )data, (unsigned int )length,
                               1U, (FILE * __restrict  )file->iofile);
              if (tmp___0 != 1U) {
                _L___1: 
                goto _L___0;
              } else {
                tmp___1 = fflush(file->iofile);
                if (tmp___1 == -1) {
                  _L___0: 
                  return (-1);
                }
              }
            }
            goto done;
          } else {
            goto _L___3;
          }
        } else {
          goto _L___5;
        }
      } else {
        _L___5: 
        goto _L___3;
      }
    }
  } else {
    _L___3: ;
  }
  done: 
  return (0);
}
}
int id3_file_update(struct id3_file *file ) 
{ int options ;
  int result ;
  id3_length_t v1size ;
  id3_length_t v2size ;
  id3_byte_t id3v1_data[128] ;
  id3_byte_t *id3v1 ;
  id3_byte_t *id3v2 ;
  int tmp ;
  int tmp___0 ;

  {
  result = 0;
  v1size = 0UL;
  v2size = 0UL;
  id3v1 = (id3_byte_t *)0;
  id3v2 = (id3_byte_t *)0;
  if (! file) {
    __assert_fail("file", "file.c", 612U, "id3_file_update");
  }
  if ((int )file->mode != 1) {
    return (-1);
  }
  options = id3_tag_options(file->primary, 0, 0);
  if (options & 256) {
    v1size = id3_tag_render((struct id3_tag  const  *)file->primary, (id3_byte_t *)0);
    if (v1size) {
      if (! (v1size == (unsigned long )sizeof(id3v1_data))) {
        __assert_fail("v1size == sizeof(id3v1_data)", "file.c", 624U, "id3_file_update");
      }
      v1size = id3_tag_render((struct id3_tag  const  *)file->primary, id3v1_data);
      if (v1size) {
        if (! (v1size == (unsigned long )sizeof(id3v1_data))) {
          __assert_fail("v1size == sizeof(id3v1_data)", "file.c", 628U, "id3_file_update");
        }
        id3v1 = id3v1_data;
      }
    }
  }
  id3_tag_options(file->primary, 256, 0);
  v2size = id3_tag_render((struct id3_tag  const  *)file->primary, (id3_byte_t *)0);
  if (v2size) {
    id3v2 = (id3_byte_t *)malloc((unsigned int )v2size);
    if ((unsigned int )id3v2 == (unsigned int )((id3_byte_t *)0)) {
      goto fail;
    }
    v2size = id3_tag_render((struct id3_tag  const  *)file->primary, id3v2);
    if (v2size == 0UL) {
      free((void *)id3v2);
      id3v2 = (id3_byte_t *)0;
    }
  }
  tmp = v2_write(file, (id3_byte_t const   *)id3v2, v2size);
  if (tmp == -1) {
    goto _L;
  } else {
    tmp___0 = v1_write(file, (id3_byte_t const   *)id3v1, v1size);
    if (tmp___0 == -1) {
      _L: 
      goto fail;
    }
  }
  rewind(file->iofile);
  if (0) {
    fail: 
    result = -1;
  }
  if (id3v2) {
    free((void *)id3v2);
  }
  id3_tag_options(file->primary, ~ 0, options);
  return (result);
}
}
#pragma merger(0,"/tmp/cil-lWnpHzC7.i","-g -g -O2")
extern int *__errno_location(void)  __attribute__((__const__)) ;
extern int open(char const   *__file , int __oflag  , ...) ;
extern int initgroups(char const   *__user , __gid_t __group ) ;
extern time_t time(time_t *__timer ) ;
extern int pthread_create(pthread_t * __restrict  __threadp , pthread_attr_t const   * __restrict  __attr ,
                          void *(*__start_routine)(void * ) , void * __restrict  __arg ) ;
extern int pthread_join(pthread_t __th , void **__thread_return ) ;
extern int pthread_kill(pthread_t __threadid , int __signo ) ;
extern struct passwd *getpwuid(__uid_t __uid ) ;
extern struct passwd *getpwnam(char const   *__name ) ;
extern __off_t lseek(int __fd , __off_t __offset , int __whence ) ;
extern unsigned int sleep(unsigned int __seconds ) ;
extern int chdir(char const   *__path ) ;
extern __pid_t getpid(void) ;
extern int setpgrp(void) ;
extern __uid_t getuid(void) ;
extern int setuid(__uid_t __uid ) ;
extern int setgid(__gid_t __gid ) ;
extern __pid_t fork(void) ;
extern char *optarg ;
extern int getopt(int ___argc , char * const  *___argv , char const   *__shortopts ) ;
int copyfile(int fromfd , int tofd ) ;
int r_close(int fildes ) ;
int r_open2(char const   *path , int oflag ) ;
extern __sighandler_t signal(int __sig , void (*__handler)(int  ) ) ;
extern int sigemptyset(sigset_t *__set ) ;
extern int sigaddset(sigset_t *__set , int __signo ) ;
extern int sigprocmask(int __how , sigset_t const   * __restrict  __set , sigset_t * __restrict  __oset ) ;
extern int sigwait(sigset_t const   * __restrict  __set , int * __restrict  __sig ) ;
extern struct _IO_FILE *stderr ;
extern int fprintf(FILE * __restrict  __stream , char const   * __restrict  __format 
                   , ...) ;
extern int printf(char const   * __restrict  __format  , ...) ;
extern long __strtol_internal(char const   * __restrict  __nptr , char ** __restrict  __endptr ,
                              int __base , int __group ) ;
extern long long __strtoll_internal(char const   * __restrict  __nptr , char ** __restrict  __endptr ,
                                    int __base , int __group ) ;
__inline static long strtol__extinline(char const   * __restrict  __nptr , char ** __restrict  __endptr ,
                                       int __base ) 
{ long tmp ;

  {
  tmp = __strtol_internal(__nptr, __endptr, __base, 0);
  return (tmp);
}
}
__inline static long long strtoll__extinline(char const   * __restrict  __nptr , char ** __restrict  __endptr ,
                                             int __base ) 
{ long long tmp ;

  {
  tmp = __strtoll_internal(__nptr, __endptr, __base, 0);
  return (tmp);
}
}
__inline static int atoi__extinline(char const   *__nptr ) 
{ int tmp ;

  {
  tmp = (int )strtol__extinline((char const   * __restrict  )__nptr, (char ** __restrict  )((char **)((void *)0)),
                                10);
  return (tmp);
}
}
__inline static long atol__extinline(char const   *__nptr ) 
{ long tmp ;

  {
  tmp = strtol__extinline((char const   * __restrict  )__nptr, (char ** __restrict  )((char **)((void *)0)),
                          10);
  return (tmp);
}
}
__inline static long long atoll__extinline(char const   *__nptr ) 
{ long long tmp ;

  {
  tmp = strtoll__extinline((char const   * __restrict  )__nptr, (char ** __restrict  )((char **)((void *)0)),
                           10);
  return (tmp);
}
}
extern  __attribute__((__noreturn__)) void exit(int __status ) ;
extern char *strerror(int __errnum ) ;
extern int strcasecmp(char const   *__s1 , char const   *__s2 )  __attribute__((__pure__)) ;
extern int strncasecmp(char const   *__s1 , char const   *__s2 , size_t __n )  __attribute__((__pure__)) ;
extern __mode_t umask(__mode_t __mask ) ;
extern int __fxstat(int __ver , int __fildes , struct stat *__stat_buf ) ;
__inline static int fstat__extinline(int __fd , struct stat *__statbuf ) 
{ int tmp ;

  {
  tmp = __fxstat(3, __fd, __statbuf);
  return (tmp);
}
}
extern __pid_t wait(union wait *__stat_loc ) ;
CONFIG config  ;
int drop_privs(char *user ) ;
WSHANDLE ws_start(WSCONFIG *config___0 ) ;
int ws_registerhandler(WSHANDLE ws , char *regex , void (*handler)(WS_CONNINFO * ) ,
                       int (*auth)(char * , char * ) , int addheaders ) ;
int ws_returnerror(WS_CONNINFO *pwsc , int error , char *description ) ;
int ws_addresponseheader(WS_CONNINFO *pwsc , char *header , char *fmt  , ...) ;
int ws_writefd(WS_CONNINFO *pwsc , char *fmt  , ...) ;
char *ws_getvar(WS_CONNINFO *pwsc , char *var ) ;
char *ws_getrequestheader(WS_CONNINFO *pwsc , char *header ) ;
int ws_testrequestheader(WS_CONNINFO *pwsc , char *header , char *value ) ;
void ws_emitheaders(WS_CONNINFO *pwsc ) ;
int config_read(char *file ) ;
int config_auth(char *user , char *password ) ;
void config_handler(WS_CONNINFO *pwsc ) ;
void config_set_status(WS_CONNINFO *pwsc , int session , char *fmt  , ...) ;
int config_get_session_count(void) ;
void config_close(void) ;
int scan_init(char *path ) ;
int db_open(char *parameters , int reload ) ;
int db_init(void) ;
int db_deinit(void) ;
int db_version(void) ;
MP3FILE *db_find(unsigned long id ) ;
void db_dispose(MP3FILE *pmp3 ) ;
int db_get_song_count(void) ;
GZIP_STREAM *gzip_alloc(void) ;
int gzip_compress(GZIP_STREAM *gz ) ;
int gzip_close(GZIP_STREAM *gz , int fd ) ;
int daap_serialize(DAAP_BLOCK *root , int fd , GZIP_STREAM *gz ) ;
void daap_free(DAAP_BLOCK *root ) ;
DAAP_BLOCK *daap_response_server_info(char *name , char *client_version ) ;
DAAP_BLOCK *daap_response_content_codes(void) ;
DAAP_BLOCK *daap_response_login(char *hostname ) ;
DAAP_BLOCK *daap_response_update(int fd , int clientver ) ;
DAAP_BLOCK *daap_response_songlist(char *metaStr , char *query ) ;
DAAP_BLOCK *daap_response_playlists(char *name ) ;
DAAP_BLOCK *daap_response_dbinfo(char *name ) ;
DAAP_BLOCK *daap_response_playlist_items(unsigned int playlist , char *metaStr , char *query ) ;
void daap_handle_index(DAAP_BLOCK *block , char const   *index___0 ) ;
DAAP_BLOCK *daap_response_browse(char const   *name , char const   *filter ) ;
int err_debuglevel ;
void err_log(int level , unsigned int cat , char *fmt  , ...) ;
void err_setdest(char *app , int destination ) ;
extern int err_setdebugmask(char *list ) ;
int pl_error ;
void pl_dump(void) ;
int pl_load(char *file ) ;
int da_get_image_fd(char *filename ) ;
int da_attach_image(int img_fd , int out_fd , int mp3_fd , int offset ) ;
off_t da_aac_attach_image(int img_fd , int out_fd , int aac_fd , int offset ) ;
int rend_init(char *user ) ;
int rend_stop(void) ;
int rend_register(char *name , char *type , int port ) ;
static int daemon_start(void) ;
static void usage(char *program ) ;
static void *signal_handler(void *arg ) ;
static int start_signal_handler(pthread_t *handler_tid ) ;
static void daap_handler(WS_CONNINFO *pwsc ) ;
static int daap_auth(char *username , char *password ) ;
static int daap_auth(char *username , char *password ) 
{ size_t tmp ;
  int tmp___0 ;
  int tmp___1 ;

  {
  if ((unsigned int )password == (unsigned int )((void *)0)) {
    if ((unsigned int )config.readpassword == (unsigned int )((void *)0)) {
      goto _L___0;
    } else {
      tmp = strlen((char const   *)config.readpassword);
      if (tmp == 0U) {
        _L___0: /* CIL Label */ 
        return (1);
      } else {
        goto _L;
      }
    }
  } else {
    _L: /* CIL Label */ ;
  }
  if ((unsigned int )password == (unsigned int )((void *)0)) {
    return (0);
  }
  tmp___0 = strcasecmp((char const   *)password, (char const   *)config.readpassword);
  if (tmp___0) {
    tmp___1 = 0;
  } else {
    tmp___1 = 1;
  }
  return (tmp___1);
}
}
static void daap_handler(WS_CONNINFO *pwsc ) 
{ int close___0 ;
  DAAP_BLOCK *root ;
  int clientrev ;
  char *uri ;
  unsigned long db_index ;
  unsigned long playlist_index ;
  unsigned long item ;
  char *first ;
  char *last ;
  char *index___0 ;
  int streaming ;
  int compress___0 ;
  int start_time ;
  int end_time ;
  int bytes_written ;
  MP3FILE *pmp3 ;
  int file_fd ;
  int session_id ;
  int img_fd ;
  struct stat sb ;
  long img_size ;
  off_t offset ;
  off_t real_len ;
  off_t file_len ;
  int bytes_copied ;
  GZIP_STREAM *gz ;
  char const   *tmp ;
  char *tmp___0 ;
  char *tmp___1 ;
  int tmp___2 ;
  char const   *tmp___3 ;
  char *tmp___4 ;
  char *tmp___5 ;
  size_t __len___2 ;
  size_t tmp___22 ;
  char *__retval___2 ;
  char *tmp___23 ;
  int tmp___25 ;
  char *tmp___26 ;
  char *tmp___27 ;
  char *tmp___28 ;
  char *tmp___29 ;
  char const   *tmp___30 ;
  int tmp___31 ;
  int tmp___32 ;
  int tmp___33 ;
  int tmp___34 ;
  int tmp___35 ;
  int tmp___81 ;
  size_t __s1_len___0 ;
  size_t __s2_len___0 ;
  int tmp___103 ;
  size_t tmp___104 ;
  register int __result___85 ;
  unsigned char const   *__s2___14 ;
  register int __result___86 ;
  register int __result___93 ;
  unsigned char const   *__s1___30 ;
  register int __result___94 ;
  int tmp___119 ;
  int tmp___120 ;
  int tmp___121 ;
  int tmp___122 ;
  int tmp___123 ;
  size_t tmp___124 ;
  size_t tmp___125 ;
  size_t __s1_len___1 ;
  size_t __s2_len___1 ;
  int tmp___147 ;
  size_t tmp___148 ;
  register int __result___133 ;
  unsigned char const   *__s2___22 ;
  register int __result___134 ;
  register int __result___141 ;
  unsigned char const   *__s1___46 ;
  register int __result___142 ;
  int tmp___163 ;
  int tmp___164 ;
  int tmp___165 ;
  int tmp___166 ;
  int tmp___167 ;
  int tmp___168 ;
  int tmp___169 ;
  int tmp___170 ;
  int tmp___171 ;
  int tmp___172 ;
  int tmp___173 ;
  char *tmp___174 ;
  long tmp___175 ;
  char *tmp___176 ;
  int *tmp___177 ;
  int *tmp___178 ;
  char *tmp___179 ;
  int tmp___180 ;
  int tmp___181 ;
  int tmp___182 ;
  int tmp___183 ;
  int *tmp___184 ;
  char *tmp___185 ;

  {
  item = 0UL;
  index___0 = (char *)0;
  streaming = 0;
  compress___0 = 0;
  session_id = 0;
  offset = (off_t )0;
  bytes_copied = 0;
  close___0 = pwsc->close;
  pwsc->close = 1;
  root = (DAAP_BLOCK *)((void *)0);
  ws_addresponseheader(pwsc, (char *)"Accept-Ranges", (char *)"bytes");
  ws_addresponseheader(pwsc, (char *)"DAAP-Server", (char *)"mt-daapd/%s", "0.2.4");
  ws_addresponseheader(pwsc, (char *)"Content-Type", (char *)"application/x-dmap-tagged");
  tmp___0 = ws_getvar(pwsc, (char *)"session-id");
  if (tmp___0) {
    tmp = ws_getvar(pwsc, (char *)"session-id");
    session_id = atoi__extinline(tmp);
  }
  tmp___171 = strcasecmp((char const   *)pwsc->uri, "/server-info");
  if (tmp___171) {
    tmp___170 = strcasecmp((char const   *)pwsc->uri, "/content-codes");
    if (tmp___170) {
      tmp___169 = strcasecmp((char const   *)pwsc->uri, "/login");
      if (tmp___169) {
        tmp___168 = strcasecmp((char const   *)pwsc->uri, "/update");
        if (tmp___168) {
          tmp___167 = strcasecmp((char const   *)pwsc->uri, "/logout");
          if (tmp___167) {
            tmp___165 = __builtin_constant_p(pwsc->uri);
            if (tmp___165) {
              __s1_len___1 = strlen((char const   *)pwsc->uri);
              __s2_len___1 = strlen("/databases");
              if (! ((unsigned int )((void const   *)(pwsc->uri + 1)) - (unsigned int )((void const   *)pwsc->uri) ==
                     1U)) {
                goto _L___507;
              } else {
                if (__s1_len___1 >= 4U) {
                  _L___507: /* CIL Label */ 
                  if (! ((unsigned int )((void const   *)("/databases" + 1)) - (unsigned int )((void const   *)"/databases") ==
                         1U)) {
                    goto _L___506;
                  } else {
                    if (__s2_len___1 >= 4U) {
                      _L___506: /* CIL Label */ 
                      tmp___166 = 1;
                    } else {
                      goto _L___505;
                    }
                  }
                } else {
                  _L___505: /* CIL Label */ 
                  tmp___166 = 0;
                }
              }
              if (tmp___166) {
                if (__s1_len___1 < __s2_len___1) {
                  tmp___148 = __s1_len___1;
                } else {
                  tmp___148 = __s2_len___1;
                }
                tmp___147 = memcmp((void const   *)((char const   *)pwsc->uri), (void const   *)"/databases",
                                   tmp___148 + 1U);
              } else {
                goto _L___509;
              }
            } else {
              _L___509: /* CIL Label */ 
              tmp___164 = __builtin_constant_p(pwsc->uri);
              if (tmp___164) {
                if ((unsigned int )((void const   *)(pwsc->uri + 1)) - (unsigned int )((void const   *)pwsc->uri) ==
                    1U) {
                  __s1_len___1 = strlen((char const   *)pwsc->uri);
                  if (__s1_len___1 < 4U) {
                    if ((unsigned int )((void const   *)("/databases" + 1)) - (unsigned int )((void const   *)"/databases") ==
                        1U) {
                      __result___133 = (int )((int const   )(*((unsigned char const   *)((char const   *)pwsc->uri) +
                                                               0)) - (int const   )(*((unsigned char const   *)"/databases" +
                                                                                      0)));
                      if (__s1_len___1 > 0U) {
                        if (__result___133 == 0) {
                          __result___133 = (int )((int const   )(*((unsigned char const   *)((char const   *)pwsc->uri) +
                                                                   1)) - (int const   )(*((unsigned char const   *)"/databases" +
                                                                                          1)));
                          if (__s1_len___1 > 1U) {
                            if (__result___133 == 0) {
                              __result___133 = (int )((int const   )(*((unsigned char const   *)((char const   *)pwsc->uri) +
                                                                       2)) - (int const   )(*((unsigned char const   *)"/databases" +
                                                                                              2)));
                              if (__s1_len___1 > 2U) {
                                if (__result___133 == 0) {
                                  __result___133 = (int )((int const   )(*((unsigned char const   *)((char const   *)pwsc->uri) +
                                                                           3)) - (int const   )(*((unsigned char const   *)"/databases" +
                                                                                                  3)));
                                } else {
                                  goto _L___470;
                                }
                              } else {
                                _L___470: /* CIL Label */ ;
                              }
                            } else {
                              goto _L___471;
                            }
                          } else {
                            _L___471: /* CIL Label */ ;
                          }
                        } else {
                          goto _L___472;
                        }
                      } else {
                        _L___472: /* CIL Label */ ;
                      }
                      tmp___147 = __result___133;
                    } else {
                      __s2___22 = (unsigned char const   *)"/databases";
                      __result___134 = (int )((int const   )(*((unsigned char const   *)((char const   *)pwsc->uri) +
                                                               0)) - (int const   )(*(__s2___22 +
                                                                                      0)));
                      if (__s1_len___1 > 0U) {
                        if (__result___134 == 0) {
                          __result___134 = (int )((int const   )(*((unsigned char const   *)((char const   *)pwsc->uri) +
                                                                   1)) - (int const   )(*(__s2___22 +
                                                                                          1)));
                          if (__s1_len___1 > 1U) {
                            if (__result___134 == 0) {
                              __result___134 = (int )((int const   )(*((unsigned char const   *)((char const   *)pwsc->uri) +
                                                                       2)) - (int const   )(*(__s2___22 +
                                                                                              2)));
                              if (__s1_len___1 > 2U) {
                                if (__result___134 == 0) {
                                  __result___134 = (int )((int const   )(*((unsigned char const   *)((char const   *)pwsc->uri) +
                                                                           3)) - (int const   )(*(__s2___22 +
                                                                                                  3)));
                                } else {
                                  goto _L___473;
                                }
                              } else {
                                _L___473: /* CIL Label */ ;
                              }
                            } else {
                              goto _L___474;
                            }
                          } else {
                            _L___474: /* CIL Label */ ;
                          }
                        } else {
                          goto _L___475;
                        }
                      } else {
                        _L___475: /* CIL Label */ ;
                      }
                      tmp___147 = __result___134;
                    }
                  } else {
                    goto _L___504;
                  }
                } else {
                  goto _L___504;
                }
              } else {
                _L___504: /* CIL Label */ 
                if ((unsigned int )((void const   *)("/databases" + 1)) - (unsigned int )((void const   *)"/databases") ==
                    1U) {
                  __s2_len___1 = strlen("/databases");
                  if (__s2_len___1 < 4U) {
                    tmp___163 = __builtin_constant_p(pwsc->uri);
                    if (tmp___163) {
                      if ((unsigned int )((void const   *)(pwsc->uri + 1)) - (unsigned int )((void const   *)pwsc->uri) ==
                          1U) {
                        __result___141 = (int )((int const   )(*((unsigned char const   *)((char const   *)pwsc->uri) +
                                                                 0)) - (int const   )(*((unsigned char const   *)"/databases" +
                                                                                        0)));
                        if (__s2_len___1 > 0U) {
                          if (__result___141 == 0) {
                            __result___141 = (int )((int const   )(*((unsigned char const   *)((char const   *)pwsc->uri) +
                                                                     1)) - (int const   )(*((unsigned char const   *)"/databases" +
                                                                                            1)));
                            if (__s2_len___1 > 1U) {
                              if (__result___141 == 0) {
                                __result___141 = (int )((int const   )(*((unsigned char const   *)((char const   *)pwsc->uri) +
                                                                         2)) - (int const   )(*((unsigned char const   *)"/databases" +
                                                                                                2)));
                                if (__s2_len___1 > 2U) {
                                  if (__result___141 == 0) {
                                    __result___141 = (int )((int const   )(*((unsigned char const   *)((char const   *)pwsc->uri) +
                                                                             3)) -
                                                            (int const   )(*((unsigned char const   *)"/databases" +
                                                                             3)));
                                  } else {
                                    goto _L___495;
                                  }
                                } else {
                                  _L___495: /* CIL Label */ ;
                                }
                              } else {
                                goto _L___496;
                              }
                            } else {
                              _L___496: /* CIL Label */ ;
                            }
                          } else {
                            goto _L___497;
                          }
                        } else {
                          _L___497: /* CIL Label */ ;
                        }
                        tmp___147 = __result___141;
                      } else {
                        goto _L___501;
                      }
                    } else {
                      _L___501: /* CIL Label */ 
                      __s1___46 = (unsigned char const   *)((char const   *)pwsc->uri);
                      __result___142 = (int )((int const   )(*(__s1___46 + 0)) - (int const   )(*((unsigned char const   *)"/databases" +
                                                                                                  0)));
                      if (__s2_len___1 > 0U) {
                        if (__result___142 == 0) {
                          __result___142 = (int )((int const   )(*(__s1___46 + 1)) -
                                                  (int const   )(*((unsigned char const   *)"/databases" +
                                                                   1)));
                          if (__s2_len___1 > 1U) {
                            if (__result___142 == 0) {
                              __result___142 = (int )((int const   )(*(__s1___46 +
                                                                       2)) - (int const   )(*((unsigned char const   *)"/databases" +
                                                                                              2)));
                              if (__s2_len___1 > 2U) {
                                if (__result___142 == 0) {
                                  __result___142 = (int )((int const   )(*(__s1___46 +
                                                                           3)) - (int const   )(*((unsigned char const   *)"/databases" +
                                                                                                  3)));
                                } else {
                                  goto _L___498;
                                }
                              } else {
                                _L___498: /* CIL Label */ ;
                              }
                            } else {
                              goto _L___499;
                            }
                          } else {
                            _L___499: /* CIL Label */ ;
                          }
                        } else {
                          goto _L___500;
                        }
                      } else {
                        _L___500: /* CIL Label */ ;
                      }
                      tmp___147 = __result___142;
                    }
                  } else {
                    goto _L___502;
                  }
                } else {
                  _L___502: /* CIL Label */ 
                  tmp___147 = strcmp((char const   *)pwsc->uri, "/databases");
                }
              }
            }
            if (tmp___147 == 0) {
              config_set_status(pwsc, session_id, (char *)"Sending database info");
              root = daap_response_dbinfo(config.servername);
              index___0 = ws_getvar(pwsc, (char *)"index");
              if ((unsigned int )((char *)0) != (unsigned int )index___0) {
                daap_handle_index(root, (char const   *)index___0);
              }
            } else {
              tmp___123 = __builtin_constant_p(pwsc->uri);
              if (tmp___123) {
                tmp___124 = strlen((char const   *)pwsc->uri);
                if (tmp___124 < 11U) {
                  goto _L___340;
                } else {
                  goto _L___341;
                }
              } else {
                _L___341: /* CIL Label */ 
                tmp___125 = strlen("/databases/");
                if (tmp___125 < 11U) {
                  _L___340: /* CIL Label */ 
                  tmp___121 = __builtin_constant_p(pwsc->uri);
                  if (tmp___121) {
                    __s1_len___0 = strlen((char const   *)pwsc->uri);
                    __s2_len___0 = strlen("/databases/");
                    if (! ((unsigned int )((void const   *)(pwsc->uri + 1)) - (unsigned int )((void const   *)pwsc->uri) ==
                           1U)) {
                      goto _L___337;
                    } else {
                      if (__s1_len___0 >= 4U) {
                        _L___337: /* CIL Label */ 
                        if (! ((unsigned int )((void const   *)("/databases/" + 1)) -
                               (unsigned int )((void const   *)"/databases/") == 1U)) {
                          goto _L___336;
                        } else {
                          if (__s2_len___0 >= 4U) {
                            _L___336: /* CIL Label */ 
                            tmp___122 = 1;
                          } else {
                            goto _L___335;
                          }
                        }
                      } else {
                        _L___335: /* CIL Label */ 
                        tmp___122 = 0;
                      }
                    }
                    if (tmp___122) {
                      if (__s1_len___0 < __s2_len___0) {
                        tmp___104 = __s1_len___0;
                      } else {
                        tmp___104 = __s2_len___0;
                      }
                      tmp___103 = memcmp((void const   *)((char const   *)pwsc->uri),
                                         (void const   *)"/databases/", tmp___104 +
                                                                        1U);
                    } else {
                      goto _L___339;
                    }
                  } else {
                    _L___339: /* CIL Label */ 
                    tmp___120 = __builtin_constant_p(pwsc->uri);
                    if (tmp___120) {
                      if ((unsigned int )((void const   *)(pwsc->uri + 1)) - (unsigned int )((void const   *)pwsc->uri) ==
                          1U) {
                        __s1_len___0 = strlen((char const   *)pwsc->uri);
                        if (__s1_len___0 < 4U) {
                          if ((unsigned int )((void const   *)("/databases/" + 1)) -
                              (unsigned int )((void const   *)"/databases/") == 1U) {
                            __result___85 = (int )((int const   )(*((unsigned char const   *)((char const   *)pwsc->uri) +
                                                                    0)) - (int const   )(*((unsigned char const   *)"/databases/" +
                                                                                           0)));
                            if (__s1_len___0 > 0U) {
                              if (__result___85 == 0) {
                                __result___85 = (int )((int const   )(*((unsigned char const   *)((char const   *)pwsc->uri) +
                                                                        1)) - (int const   )(*((unsigned char const   *)"/databases/" +
                                                                                               1)));
                                if (__s1_len___0 > 1U) {
                                  if (__result___85 == 0) {
                                    __result___85 = (int )((int const   )(*((unsigned char const   *)((char const   *)pwsc->uri) +
                                                                            2)) -
                                                           (int const   )(*((unsigned char const   *)"/databases/" +
                                                                            2)));
                                    if (__s1_len___0 > 2U) {
                                      if (__result___85 == 0) {
                                        __result___85 = (int )((int const   )(*((unsigned char const   *)((char const   *)pwsc->uri) +
                                                                                3)) -
                                                               (int const   )(*((unsigned char const   *)"/databases/" +
                                                                                3)));
                                      } else {
                                        goto _L___300;
                                      }
                                    } else {
                                      _L___300: /* CIL Label */ ;
                                    }
                                  } else {
                                    goto _L___301;
                                  }
                                } else {
                                  _L___301: /* CIL Label */ ;
                                }
                              } else {
                                goto _L___302;
                              }
                            } else {
                              _L___302: /* CIL Label */ ;
                            }
                            tmp___103 = __result___85;
                          } else {
                            __s2___14 = (unsigned char const   *)"/databases/";
                            __result___86 = (int )((int const   )(*((unsigned char const   *)((char const   *)pwsc->uri) +
                                                                    0)) - (int const   )(*(__s2___14 +
                                                                                           0)));
                            if (__s1_len___0 > 0U) {
                              if (__result___86 == 0) {
                                __result___86 = (int )((int const   )(*((unsigned char const   *)((char const   *)pwsc->uri) +
                                                                        1)) - (int const   )(*(__s2___14 +
                                                                                               1)));
                                if (__s1_len___0 > 1U) {
                                  if (__result___86 == 0) {
                                    __result___86 = (int )((int const   )(*((unsigned char const   *)((char const   *)pwsc->uri) +
                                                                            2)) -
                                                           (int const   )(*(__s2___14 +
                                                                            2)));
                                    if (__s1_len___0 > 2U) {
                                      if (__result___86 == 0) {
                                        __result___86 = (int )((int const   )(*((unsigned char const   *)((char const   *)pwsc->uri) +
                                                                                3)) -
                                                               (int const   )(*(__s2___14 +
                                                                                3)));
                                      } else {
                                        goto _L___303;
                                      }
                                    } else {
                                      _L___303: /* CIL Label */ ;
                                    }
                                  } else {
                                    goto _L___304;
                                  }
                                } else {
                                  _L___304: /* CIL Label */ ;
                                }
                              } else {
                                goto _L___305;
                              }
                            } else {
                              _L___305: /* CIL Label */ ;
                            }
                            tmp___103 = __result___86;
                          }
                        } else {
                          goto _L___334;
                        }
                      } else {
                        goto _L___334;
                      }
                    } else {
                      _L___334: /* CIL Label */ 
                      if ((unsigned int )((void const   *)("/databases/" + 1)) - (unsigned int )((void const   *)"/databases/") ==
                          1U) {
                        __s2_len___0 = strlen("/databases/");
                        if (__s2_len___0 < 4U) {
                          tmp___119 = __builtin_constant_p(pwsc->uri);
                          if (tmp___119) {
                            if ((unsigned int )((void const   *)(pwsc->uri + 1)) -
                                (unsigned int )((void const   *)pwsc->uri) == 1U) {
                              __result___93 = (int )((int const   )(*((unsigned char const   *)((char const   *)pwsc->uri) +
                                                                      0)) - (int const   )(*((unsigned char const   *)"/databases/" +
                                                                                             0)));
                              if (__s2_len___0 > 0U) {
                                if (__result___93 == 0) {
                                  __result___93 = (int )((int const   )(*((unsigned char const   *)((char const   *)pwsc->uri) +
                                                                          1)) - (int const   )(*((unsigned char const   *)"/databases/" +
                                                                                                 1)));
                                  if (__s2_len___0 > 1U) {
                                    if (__result___93 == 0) {
                                      __result___93 = (int )((int const   )(*((unsigned char const   *)((char const   *)pwsc->uri) +
                                                                              2)) -
                                                             (int const   )(*((unsigned char const   *)"/databases/" +
                                                                              2)));
                                      if (__s2_len___0 > 2U) {
                                        if (__result___93 == 0) {
                                          __result___93 = (int )((int const   )(*((unsigned char const   *)((char const   *)pwsc->uri) +
                                                                                  3)) -
                                                                 (int const   )(*((unsigned char const   *)"/databases/" +
                                                                                  3)));
                                        } else {
                                          goto _L___325;
                                        }
                                      } else {
                                        _L___325: /* CIL Label */ ;
                                      }
                                    } else {
                                      goto _L___326;
                                    }
                                  } else {
                                    _L___326: /* CIL Label */ ;
                                  }
                                } else {
                                  goto _L___327;
                                }
                              } else {
                                _L___327: /* CIL Label */ ;
                              }
                              tmp___103 = __result___93;
                            } else {
                              goto _L___331;
                            }
                          } else {
                            _L___331: /* CIL Label */ 
                            __s1___30 = (unsigned char const   *)((char const   *)pwsc->uri);
                            __result___94 = (int )((int const   )(*(__s1___30 + 0)) -
                                                   (int const   )(*((unsigned char const   *)"/databases/" +
                                                                    0)));
                            if (__s2_len___0 > 0U) {
                              if (__result___94 == 0) {
                                __result___94 = (int )((int const   )(*(__s1___30 +
                                                                        1)) - (int const   )(*((unsigned char const   *)"/databases/" +
                                                                                               1)));
                                if (__s2_len___0 > 1U) {
                                  if (__result___94 == 0) {
                                    __result___94 = (int )((int const   )(*(__s1___30 +
                                                                            2)) -
                                                           (int const   )(*((unsigned char const   *)"/databases/" +
                                                                            2)));
                                    if (__s2_len___0 > 2U) {
                                      if (__result___94 == 0) {
                                        __result___94 = (int )((int const   )(*(__s1___30 +
                                                                                3)) -
                                                               (int const   )(*((unsigned char const   *)"/databases/" +
                                                                                3)));
                                      } else {
                                        goto _L___328;
                                      }
                                    } else {
                                      _L___328: /* CIL Label */ ;
                                    }
                                  } else {
                                    goto _L___329;
                                  }
                                } else {
                                  _L___329: /* CIL Label */ ;
                                }
                              } else {
                                goto _L___330;
                              }
                            } else {
                              _L___330: /* CIL Label */ ;
                            }
                            tmp___103 = __result___94;
                          }
                        } else {
                          goto _L___332;
                        }
                      } else {
                        _L___332: /* CIL Label */ 
                        tmp___103 = strcmp((char const   *)pwsc->uri, "/databases/");
                      }
                    }
                  }
                  tmp___81 = tmp___103;
                } else {
                  tmp___81 = strncmp((char const   *)pwsc->uri, "/databases/", 11U);
                }
              }
              if (tmp___81 == 0) {
                tmp___25 = __builtin_constant_p(pwsc->uri);
                if (tmp___25) {
                  if ((unsigned int )((void const   *)(pwsc->uri + 1)) - (unsigned int )((void const   *)pwsc->uri) ==
                      1U) {
                    if ((int const   )(*((char const   *)pwsc->uri + 0)) == 0) {
                      uri = (char *)calloc(1U, 1U);
                    } else {
                      tmp___22 = strlen((char const   *)pwsc->uri);
                      __len___2 = tmp___22 + 1U;
                      tmp___23 = (char *)malloc(__len___2);
                      __retval___2 = tmp___23;
                      if ((unsigned int )__retval___2 != (unsigned int )((void *)0)) {
                        __retval___2 = (char *)memcpy((void * __restrict  )__retval___2,
                                                      (void const   * __restrict  )pwsc->uri,
                                                      __len___2);
                      }
                      uri = __retval___2;
                    }
                  } else {
                    goto _L___0;
                  }
                } else {
                  _L___0: /* CIL Label */ 
                  uri = __strdup((char const   *)pwsc->uri);
                }
                first = uri + 11;
                last = first;
                while (1) {
                  if ((*last)) {
                    if (! ((int )(*last) != 47)) {
                      goto _L___1;
                    }
                  } else {
                    _L___1: /* CIL Label */ 
                    break;
                  }
                  last ++;
                }
                if ((*last)) {
                  (*last) = (char )'\000';
                  db_index = (unsigned long )atoll__extinline((char const   *)first);
                  last ++;
                  tmp___35 = strncasecmp((char const   *)last, "items/", 6U);
                  if (tmp___35 == 0) {
                    first = last + 6;
                    while (1) {
                      if ((*last)) {
                        if (! ((int )(*last) != 46)) {
                          goto _L___2;
                        }
                      } else {
                        _L___2: /* CIL Label */ 
                        break;
                      }
                      last ++;
                    }
                    if ((int )(*last) == 46) {
                      (*last) = (char )'\000';
                      item = (unsigned long )atoll__extinline((char const   *)first);
                      streaming = 1;
                      err_log(9, 514U, (char *)"Streaming request for id %lu\n", item);
                    }
                    free((void *)uri);
                  } else {
                    tmp___34 = strncasecmp((char const   *)last, "items", 5U);
                    if (tmp___34 == 0) {
                      free((void *)uri);
                      tmp___26 = ws_getvar(pwsc, (char *)"query");
                      tmp___27 = ws_getvar(pwsc, (char *)"meta");
                      root = daap_response_songlist(tmp___27, tmp___26);
                      config_set_status(pwsc, session_id, (char *)"Sending songlist");
                    } else {
                      tmp___33 = strncasecmp((char const   *)last, "containers/",
                                             11U);
                      if (tmp___33 == 0) {
                        first = last + 11;
                        last = first;
                        while (1) {
                          if ((*last)) {
                            if (! ((int )(*last) != 47)) {
                              goto _L___3;
                            }
                          } else {
                            _L___3: /* CIL Label */ 
                            break;
                          }
                          last ++;
                        }
                        if ((*last)) {
                          (*last) = (char )'\000';
                          playlist_index = (unsigned long )atoll__extinline((char const   *)first);
                          tmp___28 = ws_getvar(pwsc, (char *)"query");
                          tmp___29 = ws_getvar(pwsc, (char *)"meta");
                          root = daap_response_playlist_items((unsigned int )playlist_index,
                                                              tmp___29, tmp___28);
                        }
                        free((void *)uri);
                        config_set_status(pwsc, session_id, (char *)"Sending playlist info");
                      } else {
                        tmp___32 = strncasecmp((char const   *)last, "containers",
                                               10U);
                        if (tmp___32 == 0) {
                          free((void *)uri);
                          root = daap_response_playlists(config.servername);
                          config_set_status(pwsc, session_id, (char *)"Sending playlist info");
                        } else {
                          tmp___31 = strncasecmp((char const   *)last, "browse/",
                                                 7U);
                          if (tmp___31 == 0) {
                            config_set_status(pwsc, session_id, (char *)"Compiling browse info");
                            tmp___30 = ws_getvar(pwsc, (char *)"filter");
                            root = daap_response_browse((char const   *)(last + 7),
                                                        tmp___30);
                            config_set_status(pwsc, session_id, (char *)"Sending browse info");
                            free((void *)uri);
                          }
                        }
                      }
                    }
                  }
                }
                index___0 = ws_getvar(pwsc, (char *)"index");
                if ((unsigned int )((char *)0) != (unsigned int )index___0) {
                  daap_handle_index(root, (char const   *)index___0);
                }
              }
            }
          } else {
            config_set_status(pwsc, session_id, (char *)((void *)0));
            ws_returnerror(pwsc, 204, (char *)"Logout Successful");
            return;
          }
        } else {
          tmp___4 = ws_getvar(pwsc, (char *)"delta");
          if (tmp___4) {
            tmp___3 = ws_getvar(pwsc, (char *)"delta");
            clientrev = atoi__extinline(tmp___3);
            config_set_status(pwsc, session_id, (char *)"Waiting for DB updates");
          } else {
            tmp___2 = db_version();
            clientrev = tmp___2 - 1;
            config_set_status(pwsc, session_id, (char *)"Sending database");
          }
          root = daap_response_update(pwsc->fd, clientrev);
          tmp___5 = ws_getvar(pwsc, (char *)"delta");
          if (tmp___5) {
            if ((unsigned int )root == (unsigned int )((void *)0)) {
              err_log(1, 2U, (char *)"Client %s disconnected\n", pwsc->hostname);
              config_set_status(pwsc, session_id, (char *)((void *)0));
              pwsc->close = 1;
              return;
            } else {
              goto _L;
            }
          } else {
            _L: /* CIL Label */ ;
          }
        }
      } else {
        config_set_status(pwsc, session_id, (char *)"Logging in");
        root = daap_response_login(pwsc->hostname);
      }
    } else {
      config_set_status(pwsc, session_id, (char *)"Sending content codes");
      root = daap_response_content_codes();
    }
  } else {
    config_set_status(pwsc, session_id, (char *)"Sending server info");
    tmp___1 = ws_getrequestheader(pwsc, (char *)"Client-DAAP-Version");
    root = daap_response_server_info(config.servername, tmp___1);
  }
  if (! root) {
    if (! streaming) {
      err_log(9, 514U, (char *)"Bad request -- root=%x, streaming=%d\n", root, streaming);
      ws_returnerror(pwsc, 400, (char *)"Invalid Request");
      config_set_status(pwsc, session_id, (char *)((void *)0));
      return;
    } else {
      goto _L___510;
    }
  } else {
    _L___510: /* CIL Label */ ;
  }
  pwsc->close = close___0;
  if (! streaming) {
    err_log(9, 2U, (char *)"Satisfying request\n");
    if (config.compress) {
      tmp___172 = ws_testrequestheader(pwsc, (char *)"Accept-Encoding", (char *)"gzip");
      if (tmp___172) {
        if (root->reported_size >= 1000) {
          compress___0 = 1;
        } else {
          goto _L___512;
        }
      } else {
        goto _L___512;
      }
    } else {
      _L___512: /* CIL Label */ ;
    }
    err_log(9, 514U, (char *)"Serializing\n");
    start_time = (int )time((time_t *)((void *)0));
    if (compress___0) {
      err_log(9, 514U, (char *)"Using compression: %s\n", pwsc->uri);
      gz = gzip_alloc();
      daap_serialize(root, pwsc->fd, gz);
      gzip_compress(gz);
      bytes_written = gz->bytes_out;
      ws_writefd(pwsc, (char *)"HTTP/1.1 200 OK\r\n");
      ws_addresponseheader(pwsc, (char *)"Content-Length", (char *)"%d", bytes_written);
      ws_addresponseheader(pwsc, (char *)"Content-Encoding", (char *)"gzip");
      err_log(9, 2U, (char *)"Emitting headers\n");
      ws_emitheaders(pwsc);
      tmp___173 = gzip_close(gz, pwsc->fd);
      if (tmp___173 != bytes_written) {
        err_log(1, 514U, (char *)"Error compressing data\n");
      }
      err_log(9, 514U, (char *)"Compression ratio: %f\n", (double )bytes_written /
                                                          (8.0 + (double )root->reported_size));
    } else {
      bytes_written = root->reported_size + 8;
      ws_addresponseheader(pwsc, (char *)"Content-Length", (char *)"%d", bytes_written);
      ws_writefd(pwsc, (char *)"HTTP/1.1 200 OK\r\n");
      err_log(9, 2U, (char *)"Emitting headers\n");
      ws_emitheaders(pwsc);
      daap_serialize(root, pwsc->fd, (GZIP_STREAM *)((void *)0));
    }
    end_time = (int )time((time_t *)((void *)0));
    err_log(9, 514U, (char *)"Sent %d bytes in %d seconds\n", bytes_written, end_time -
                                                                             start_time);
    err_log(9, 514U, (char *)"Done, freeing\n");
    daap_free(root);
  } else {
    pwsc->close = 1;
    tmp___176 = ws_getrequestheader(pwsc, (char *)"range");
    if (tmp___176) {
      tmp___174 = ws_getrequestheader(pwsc, (char *)"range");
      tmp___175 = atol__extinline((char const   *)(tmp___174 + 6));
      offset = tmp___175;
    }
    pmp3 = db_find(item);
    if (! pmp3) {
      err_log(1, 518U, (char *)"Could not find requested item %lu\n", item);
      ws_returnerror(pwsc, 404, (char *)"File Not Found");
    } else {
      file_fd = r_open2((char const   *)pmp3->path, 0);
      if (file_fd == -1) {
        tmp___177 = __errno_location();
        pwsc->error = (*tmp___177);
        tmp___178 = __errno_location();
        tmp___179 = strerror((*tmp___178));
        err_log(2, 2U, (char *)"Thread %d: Error opening %s: %s\n", pwsc->threadno,
                pmp3->path, tmp___179);
        ws_returnerror(pwsc, 404, (char *)"Not found");
        config_set_status(pwsc, session_id, (char *)((void *)0));
        db_dispose(pmp3);
        free((void *)pmp3);
      } else {
        real_len = lseek(file_fd, 0L, 2);
        lseek(file_fd, 0L, 0);
        if (config.artfilename) {
          img_fd = da_get_image_fd(pmp3->path);
          if (img_fd != -1) {
            fstat__extinline(img_fd, & sb);
            img_size = sb.st_size;
            tmp___181 = strncasecmp((char const   *)pmp3->type, "mp3", 4U);
            if (! (tmp___181 == 0)) {
              tmp___180 = strncasecmp((char const   *)pmp3->type, "m4a", 4U);
              if (tmp___180 == 0) {
                real_len += img_size + 24L;
                if (offset > img_size + 24L) {
                  offset -= img_size + 24L;
                }
              }
            }
          } else {
            goto _L___513;
          }
        } else {
          _L___513: /* CIL Label */ ;
        }
        file_len = real_len - offset;
        err_log(9, 2U, (char *)"Thread %d: Length of file (remaining) is %ld\n", pwsc->threadno,
                file_len);
        if (pmp3->type) {
          ws_addresponseheader(pwsc, (char *)"Content-Type", (char *)"audio/%s", pmp3->type);
        }
        ws_addresponseheader(pwsc, (char *)"Content-Length", (char *)"%ld", file_len);
        ws_addresponseheader(pwsc, (char *)"Connection", (char *)"Close");
        if (! offset) {
          ws_writefd(pwsc, (char *)"HTTP/1.1 200 OK\r\n");
        } else {
          ws_addresponseheader(pwsc, (char *)"Content-Range", (char *)"bytes %ld-%ld/%ld",
                               offset, real_len, real_len + 1L);
          ws_writefd(pwsc, (char *)"HTTP/1.1 206 Partial Content\r\n");
        }
        ws_emitheaders(pwsc);
        config_set_status(pwsc, session_id, (char *)"Streaming file \'%s\'", pmp3->fname);
        err_log(1, 2U, (char *)"Session %d: Streaming file \'%s\' to %s (offset %d)\n",
                session_id, pmp3->fname, pwsc->hostname, offset);
        if (! offset) {
          config.stats.songs_served ++;
        }
        if (config.artfilename) {
          if (! offset) {
            img_fd = da_get_image_fd(pmp3->path);
            if (img_fd != -1) {
              tmp___183 = strncasecmp((char const   *)pmp3->type, "mp3", 4U);
              if (tmp___183 == 0) {
                err_log(5, 258U, (char *)"Dynamic add artwork to %s (fd %d)\n", pmp3->fname,
                        img_fd);
                da_attach_image(img_fd, pwsc->fd, file_fd, (int )offset);
              } else {
                tmp___182 = strncasecmp((char const   *)pmp3->type, "m4a", 4U);
                if (tmp___182 == 0) {
                  err_log(5, 258U, (char *)"Dynamic add artwork to %s (fd %d)\n",
                          pmp3->fname, img_fd);
                  da_aac_attach_image(img_fd, pwsc->fd, file_fd, (int )offset);
                }
              }
            } else {
              goto _L___515;
            }
          } else {
            goto _L___515;
          }
        } else {
          _L___515: /* CIL Label */ 
          if (offset) {
            err_log(5, 2U, (char *)"Seeking to offset %ld\n", offset);
            lseek(file_fd, offset, 0);
          }
        }
        bytes_copied = copyfile(file_fd, pwsc->fd);
        if (bytes_copied == -1) {
          tmp___184 = __errno_location();
          tmp___185 = strerror((*tmp___184));
          err_log(5, 2U, (char *)"Error copying file to remote... %s\n", tmp___185);
        } else {
          err_log(5, 2U, (char *)"Finished streaming file to remote: %d bytes\n",
                  bytes_copied);
        }
        config_set_status(pwsc, session_id, (char *)((void *)0));
        r_close(file_fd);
        db_dispose(pmp3);
        free((void *)pmp3);
      }
    }
  }
  err_log(9, 514U, (char *)"Finished serving DAAP response\n");
  return;
}
}
static int daemon_start(void) 
{ int childpid ;
  int fd ;
  int *tmp ;

  {
  signal(22, (void (*)(int  ))1);
  signal(21, (void (*)(int  ))1);
  signal(20, (void (*)(int  ))1);
  childpid = fork();
  if (childpid < 0) {
    fprintf((FILE * __restrict  )stderr, (char const   * __restrict  )"Can\'t fork!\n");
    return (-1);
  } else {
    if (childpid > 0) {
      exit(0);
    }
  }
  setpgrp();
  fd = open("/dev/null", 2, 0);
  if (fd != -1) {
    dup2(fd, 0);
    dup2(fd, 1);
    dup2(fd, 2);
    if (fd > 2) {
      close(fd);
    }
  }
  tmp = __errno_location();
  (*tmp) = 0;
  chdir("/");
  umask(0U);
  return (0);
}
}
static void usage(char *program ) 
{ 

  {
  printf((char const   * __restrict  )"Usage: %s [options]\n\n", program);
  printf((char const   * __restrict  )"Options:\n");
  printf((char const   * __restrict  )"  -d <number>    Debuglevel (0-9)\n");
  printf((char const   * __restrict  )"  -D <mod,mod..> Debug modules\n");
  printf((char const   * __restrict  )"  -m             Disable mDNS\n");
  printf((char const   * __restrict  )"  -c <file>      Use configfile specified\n");
  printf((char const   * __restrict  )"  -p             Parse playlist file\n");
  printf((char const   * __restrict  )"  -f             Run in foreground\n");
  printf((char const   * __restrict  )"  -y             Yes, go ahead and run as non-root user\n");
  printf((char const   * __restrict  )"\n\n");
  printf((char const   * __restrict  )"Valid debug modules:\n");
  printf((char const   * __restrict  )" config,webserver,database,scan,query,index,browse\n");
  printf((char const   * __restrict  )" playlist,art,daap,main,rend,misc\n");
  printf((char const   * __restrict  )"\n\n");
  return;
}
}
int drop_privs(char *user ) 
{ int err ;
  struct passwd *pw ;
  uid_t tmp ;
  int tmp___0 ;
  int *tmp___1 ;
  int *tmp___2 ;
  int tmp___3 ;
  int tmp___4 ;
  int tmp___5 ;
  int *tmp___6 ;
  int *tmp___7 ;
  __uid_t tmp___8 ;

  {
  pw = (struct passwd *)((void *)0);
  tmp___8 = getuid();
  if (tmp___8 == 0U) {
    tmp___0 = atoi__extinline((char const   *)user);
    if (tmp___0) {
      tmp = (uid_t )atoi__extinline((char const   *)user);
      pw = getpwuid(tmp);
    } else {
      pw = getpwnam((char const   *)config.runas);
    }
    if (pw) {
      tmp___3 = initgroups((char const   *)user, pw->pw_gid);
      if (tmp___3 != 0) {
        goto _L___0;
      } else {
        tmp___4 = setgid(pw->pw_gid);
        if (tmp___4 != 0) {
          _L___0: /* CIL Label */ 
          goto _L;
        } else {
          tmp___5 = setuid(pw->pw_uid);
          if (tmp___5 != 0) {
            _L: /* CIL Label */ 
            tmp___1 = __errno_location();
            err = (*tmp___1);
            fprintf((FILE * __restrict  )stderr, (char const   * __restrict  )"Couldn\'t change to %s, gid=%d, uid=%d\n",
                    user, pw->pw_gid, pw->pw_uid);
            tmp___2 = __errno_location();
            (*tmp___2) = err;
            return (-1);
          }
        }
      }
    } else {
      tmp___6 = __errno_location();
      err = (*tmp___6);
      fprintf((FILE * __restrict  )stderr, (char const   * __restrict  )"Couldn\'t lookup user %s\n",
              user);
      tmp___7 = __errno_location();
      (*tmp___7) = err;
      return (-1);
    }
  }
  return (0);
}
}
static void *signal_handler(void *arg ) 
{ sigset_t intmask ;
  int sig ;
  int status ;
  __pid_t tmp ;
  int tmp___0 ;
  int tmp___1 ;
  int tmp___2 ;
  int tmp___3 ;
  int tmp___4 ;

  {
  config.stop = 0;
  config.reload = 0;
  config.pid = getpid();
  err_log(2, 1024U, (char *)"Signal handler started\n");
  while (! config.stop) {
    tmp___0 = sigemptyset(& intmask);
    if (tmp___0 == -1) {
      goto _L___2;
    } else {
      tmp___1 = sigaddset(& intmask, 17);
      if (tmp___1 == -1) {
        _L___2: /* CIL Label */ 
        goto _L___1;
      } else {
        tmp___2 = sigaddset(& intmask, 2);
        if (tmp___2 == -1) {
          _L___1: /* CIL Label */ 
          goto _L___0;
        } else {
          tmp___3 = sigaddset(& intmask, 1);
          if (tmp___3 == -1) {
            _L___0: /* CIL Label */ 
            goto _L;
          } else {
            tmp___4 = sigwait((sigset_t const   * __restrict  )(& intmask), (int * __restrict  )(& sig));
            if (tmp___4 == -1) {
              _L: /* CIL Label */ 
              err_log(0, 1024U, (char *)"Error waiting for signals.  Aborting\n");
            } else {
              switch (sig) {
              case 17: 
              err_log(1, 1024U, (char *)"Got CLD signal.  Reaping\n");
              while (1) {
                tmp = wait((union wait *)(& status));
                if (! tmp) {
                  break;
                }
              }
              break;
              case 2: 
              err_log(1, 1024U, (char *)"Got INT signal. Notifying daap server.\n");
              config.stop = 1;
              return ((void *)0);
              break;
              case 1: 
              err_log(1, 1024U, (char *)"Got HUP signal. Notifying daap server.\n");
              config.reload = 1;
              break;
              default: 
              err_log(1, 1024U, (char *)"What am I doing here?\n");
              break;
              }
            }
          }
        }
      }
    }
  }
  return ((void *)0);
}
}
static int start_signal_handler(pthread_t *handler_tid ) 
{ int error ;
  sigset_t set ;
  int tmp ;
  int tmp___0 ;
  int tmp___1 ;
  int tmp___2 ;
  int tmp___3 ;
  int *tmp___4 ;

  {
  tmp = sigemptyset(& set);
  if (tmp == -1) {
    goto _L___2;
  } else {
    tmp___0 = sigaddset(& set, 2);
    if (tmp___0 == -1) {
      _L___2: /* CIL Label */ 
      goto _L___1;
    } else {
      tmp___1 = sigaddset(& set, 1);
      if (tmp___1 == -1) {
        _L___1: /* CIL Label */ 
        goto _L___0;
      } else {
        tmp___2 = sigaddset(& set, 17);
        if (tmp___2 == -1) {
          _L___0: /* CIL Label */ 
          goto _L;
        } else {
          tmp___3 = sigprocmask(0, (sigset_t const   * __restrict  )(& set), (sigset_t * __restrict  )((void *)0));
          if (tmp___3 == -1) {
            _L: /* CIL Label */ 
            err_log(1, 1024U, (char *)"Error setting signal set\n");
            return (-1);
          }
        }
      }
    }
  }
  error = pthread_create((pthread_t * __restrict  )handler_tid, (pthread_attr_t const   * __restrict  )((void *)0),
                         & signal_handler, (void * __restrict  )((void *)0));
  if (error) {
    tmp___4 = __errno_location();
    (*tmp___4) = error;
    err_log(1, 1024U, (char *)"Error creating signal_handler thread\n");
    return (-1);
  }
  return (0);
}
}
int main(int argc , char **argv ) 
{ int option ;
  char *configfile ;
  WSCONFIG ws_config ;
  WSHANDLE server ;
  int parseonly ;
  int foreground ;
  int reload ;
  int start_time ;
  int end_time ;
  int rescan_counter ;
  int old_song_count ;
  int force_non_root ;
  pthread_t signal_tid ;
  int pid_fd ;
  FILE *pid_fp ;
  int tmp ;
  __uid_t tmp___0 ;
  int tmp___1 ;
  int *tmp___2 ;
  char *tmp___3 ;
  int tmp___4 ;
  int *tmp___5 ;
  char *tmp___6 ;
  int *tmp___7 ;
  char *tmp___8 ;
  int *tmp___9 ;
  char *tmp___10 ;
  int tmp___11 ;
  int *tmp___12 ;
  char *tmp___13 ;
  int tmp___14 ;
  int *tmp___15 ;
  char *tmp___16 ;
  int tmp___17 ;
  int *tmp___18 ;
  char *tmp___19 ;
  int tmp___20 ;
  int *tmp___21 ;
  char *tmp___22 ;
  int tmp___23 ;
  int *tmp___24 ;
  char *tmp___25 ;
  int tmp___26 ;
  int tmp___27 ;
  int tmp___28 ;
  time_t tmp___29 ;
  int tmp___30 ;
  int tmp___31 ;

  {
  configfile = (char *)"/etc/mt-daapd.conf";
  parseonly = 0;
  foreground = 0;
  reload = 0;
  rescan_counter = 0;
  force_non_root = 0;
  pid_fp = (FILE *)((void *)0);
  config.use_mdns = 1;
  err_debuglevel = 1;
  while (1) {
    option = getopt(argc, (char * const  *)argv, "D:d:c:mpfry");
    if (! (option != -1)) {
      break;
    }
    switch (option) {
    case 100: 
    err_debuglevel = atoi__extinline((char const   *)optarg);
    break;
    case 68: 
    tmp = err_setdebugmask(optarg);
    if (tmp) {
      usage((*(argv + 0)));
      exit(1);
    }
    break;
    case 102: 
    foreground = 1;
    break;
    case 99: 
    configfile = optarg;
    break;
    case 109: 
    config.use_mdns = 0;
    break;
    case 112: 
    parseonly = 1;
    foreground = 1;
    break;
    case 114: 
    reload = 1;
    break;
    case 121: 
    force_non_root = 1;
    break;
    default: 
    usage((*(argv + 0)));
    exit(1);
    break;
    }
  }
  tmp___0 = getuid();
  if (tmp___0) {
    if (! force_non_root) {
      fprintf((FILE * __restrict  )stderr, (char const   * __restrict  )"You are not root.  This is almost certainly wrong.  If you are\nsure you want to do this, use the -y command-line switch\n");
      exit(1);
    } else {
      goto _L;
    }
  } else {
    _L: /* CIL Label */ ;
  }
  start_time = (int )time((time_t *)((void *)0));
  config.stats.start_time = (long )start_time;
  tmp___1 = config_read(configfile);
  if (tmp___1) {
    fprintf((FILE * __restrict  )stderr, (char const   * __restrict  )"Error reading config file (%s)\n",
            configfile);
    exit(1);
  }
  if (! foreground) {
    if (config.logfile) {
      err_setdest(config.logfile, 2);
    } else {
      err_setdest((char *)"mt-daapd", 1);
    }
  }
  if (config.use_mdns) {
    if (! parseonly) {
      err_log(1, 1024U, (char *)"Starting rendezvous daemon\n");
      tmp___4 = rend_init(config.runas);
      if (tmp___4) {
        tmp___2 = __errno_location();
        tmp___3 = strerror((*tmp___2));
        err_log(0, 3072U, (char *)"Error in rend_init: %s\n", tmp___3);
      }
    } else {
      goto _L___0;
    }
  } else {
    _L___0: /* CIL Label */ ;
  }
  if (! foreground) {
    if (! force_non_root) {
      pid_fd = open("/var/run/mt-daapd.pid", 577, 420);
      if (-1 == pid_fd) {
        tmp___5 = __errno_location();
        tmp___6 = strerror((*tmp___5));
        err_log(0, 1024U, (char *)"Error opening pidfile (%s): %s\n", "/var/run/mt-daapd.pid",
                tmp___6);
      }
      pid_fp = fdopen(pid_fd, "w");
      if ((unsigned int )((FILE *)0) == (unsigned int )pid_fp) {
        tmp___7 = __errno_location();
        tmp___8 = strerror((*tmp___7));
        err_log(0, 1024U, (char *)"fdopen: %s\n", tmp___8);
      }
      daemon_start();
      config.pid = 0;
    } else {
      goto _L___1;
    }
  } else {
    _L___1: /* CIL Label */ ;
  }
  tmp___11 = db_open(config.dbdir, reload);
  if (tmp___11) {
    tmp___9 = __errno_location();
    tmp___10 = strerror((*tmp___9));
    err_log(0, 1028U, (char *)"Error in db_open: %s\n", tmp___10);
  }
  tmp___14 = drop_privs(config.runas);
  if (tmp___14) {
    tmp___12 = __errno_location();
    tmp___13 = strerror((*tmp___12));
    err_log(0, 1024U, (char *)"Error in drop_privs: %s\n", tmp___13);
  }
  err_log(1, 1024U, (char *)"Starting signal handler\n");
  tmp___17 = start_signal_handler(& signal_tid);
  if (tmp___17) {
    tmp___15 = __errno_location();
    tmp___16 = strerror((*tmp___15));
    err_log(0, 1024U, (char *)"Error starting signal handler %s\n", tmp___16);
  }
  if (pid_fp) {
    while (! config.pid) {
      sleep(1U);
    }
    fprintf((FILE * __restrict  )pid_fp, (char const   * __restrict  )"%d\n", config.pid);
    fclose(pid_fp);
  }
  err_log(1, 1152U, (char *)"Loading playlists\n");
  if (config.playlist) {
    pl_load(config.playlist);
  }
  if (parseonly) {
    if (! pl_error) {
      fprintf((FILE * __restrict  )stderr, (char const   * __restrict  )"Parsed successfully.\n");
      pl_dump();
    }
    exit(0);
  }
  err_log(1, 1028U, (char *)"Initializing database\n");
  tmp___20 = db_init();
  if (tmp___20) {
    tmp___18 = __errno_location();
    tmp___19 = strerror((*tmp___18));
    err_log(0, 1028U, (char *)"Error in db_init: %s\n", tmp___19);
  }
  err_log(1, 1032U, (char *)"Starting mp3 scan\n");
  tmp___23 = scan_init(config.mp3dir);
  if (tmp___23) {
    tmp___21 = __errno_location();
    tmp___22 = strerror((*tmp___21));
    err_log(0, 1032U, (char *)"Error scanning MP3 files: %s\n", tmp___22);
  }
  ws_config.web_root = config.web_root;
  ws_config.port = (unsigned short )config.port;
  err_log(1, 1026U, (char *)"Starting web server from %s on port %d\n", config.web_root,
          config.port);
  server = ws_start(& ws_config);
  if (! server) {
    tmp___24 = __errno_location();
    tmp___25 = strerror((*tmp___24));
    err_log(0, 1026U, (char *)"Error staring web server: %s\n", tmp___25);
  }
  ws_registerhandler(server, (char *)"^.*$", & config_handler, & config_auth, 1);
  ws_registerhandler(server, (char *)"^/server-info$", & daap_handler, (int (*)(char * ,
                                                                                char * ))((void *)0),
                     0);
  ws_registerhandler(server, (char *)"^/content-codes$", & daap_handler, (int (*)(char * ,
                                                                                  char * ))((void *)0),
                     0);
  ws_registerhandler(server, (char *)"^/login$", & daap_handler, & daap_auth, 0);
  ws_registerhandler(server, (char *)"^/update$", & daap_handler, & daap_auth, 0);
  ws_registerhandler(server, (char *)"^/databases$", & daap_handler, & daap_auth,
                     0);
  ws_registerhandler(server, (char *)"^/logout$", & daap_handler, (int (*)(char * ,
                                                                           char * ))((void *)0),
                     0);
  ws_registerhandler(server, (char *)"^/databases/.*", & daap_handler, (int (*)(char * ,
                                                                                char * ))((void *)0),
                     0);
  if (config.use_mdns) {
    err_log(1, 3072U, (char *)"Registering rendezvous names\n");
    rend_register(config.servername, (char *)"_daap._tcp", config.port);
    rend_register(config.servername, (char *)"_http._tcp", config.port);
  }
  end_time = (int )time((time_t *)((void *)0));
  tmp___26 = db_get_song_count();
  err_log(1, 1024U, (char *)"Scanned %d songs in  %d seconds\n", tmp___26, end_time -
                                                                           start_time);
  config.stop = 0;
  while (! config.stop) {
    if (config.rescan_interval) {
      if (rescan_counter > config.rescan_interval) {
        if (config.always_scan) {
          goto _L___2;
        } else {
          tmp___27 = config_get_session_count();
          if (tmp___27) {
            _L___2: /* CIL Label */ 
            config.reload = 1;
          } else {
            err_log(9, 1036U, (char *)"Skipped bground scan... no users\n");
          }
        }
        rescan_counter = 0;
      } else {
        goto _L___3;
      }
    } else {
      _L___3: /* CIL Label */ ;
    }
    if (config.reload) {
      old_song_count = db_get_song_count();
      start_time = (int )time((time_t *)((void *)0));
      err_log(1, 1036U, (char *)"Rescanning database\n");
      tmp___28 = scan_init(config.mp3dir);
      if (tmp___28) {
        err_log(1, 1036U, (char *)"Error rescanning... exiting\n");
        config.stop = 1;
      }
      config.reload = 0;
      tmp___29 = time((time_t *)((void *)0));
      tmp___30 = db_get_song_count();
      err_log(5, 1036U, (char *)"Scanned %d songs (was %d) in %d seconds\n", tmp___30,
              old_song_count, tmp___29 - (time_t )start_time);
    }
    sleep(2U);
    rescan_counter += 2;
  }
  err_log(1, 1024U, (char *)"Stopping gracefully\n");
  if (config.use_mdns) {
    err_log(1, 3072U, (char *)"Stopping rendezvous daemon\n");
    rend_stop();
  }
  err_log(1, 1024U, (char *)"Stopping signal handler\n");
  tmp___31 = pthread_kill(signal_tid, 2);
  if (! tmp___31) {
    pthread_join(signal_tid, (void **)((void *)0));
  }
  config_close();
  err_log(1, 1028U, (char *)"Closing database\n");
  db_deinit();
  err_log(1, 1024U, (char *)"Done!\n");
  err_setdest((char *)((void *)0), 0);
  return (0);
}
}
#pragma merger(0,"/tmp/cil-8TqbLVsj.i","-g -g -O2")
extern int sigaction(int __sig , struct sigaction  const  * __restrict  __act , struct sigaction * __restrict  __oact ) ;
extern char *strncpy(char * __restrict  __dest , char const   * __restrict  __src ,
                     size_t __n ) ;
extern int select(int __nfds , fd_set * __restrict  __readfds , fd_set * __restrict  __writefds ,
                  fd_set * __restrict  __exceptfds , struct timeval * __restrict  __timeout ) ;
extern int socket(int __domain , int __type , int __protocol ) ;
extern int bind(int __fd , struct sockaddr  const  *__addr , socklen_t __len ) ;
extern int connect(int __fd , struct sockaddr  const  *__addr , socklen_t __len ) ;
extern int setsockopt(int __fd , int __level , int __optname , void const   *__optval ,
                      socklen_t __optlen ) ;
extern int listen(int __fd , int __n ) ;
extern int accept(int __fd , struct sockaddr * __restrict  __addr , socklen_t * __restrict  __addr_len ) ;
extern in_addr_t inet_addr(char const   *__cp ) ;
extern char *inet_ntoa(struct in_addr __in ) ;
extern struct hostent *gethostbyname(char const   *__name ) ;
int u_open(u_port_t port ) ;
int u_accept(int fd , char *hostn , int hostnsize ) ;
int u_connect(u_port_t port , char *hostn ) ;
static int u_ignore_sigpipe(void) 
{ struct sigaction act ;
  int tmp ;
  int tmp___0 ;

  {
  tmp = sigaction(13, (struct sigaction  const  * __restrict  )((struct sigaction *)((void *)0)),
                  (struct sigaction * __restrict  )(& act));
  if (tmp == -1) {
    return (-1);
  }
  if ((unsigned int )act.__sigaction_handler.sa_handler == (unsigned int )((void (*)(int  ))0)) {
    act.__sigaction_handler.sa_handler = (void (*)(int  ))1;
    tmp___0 = sigaction(13, (struct sigaction  const  * __restrict  )(& act), (struct sigaction * __restrict  )((struct sigaction *)((void *)0)));
    if (tmp___0 == -1) {
      return (-1);
    }
  }
  return (0);
}
}
int u_open(u_port_t port ) 
{ int error ;
  struct sockaddr_in server ;
  int sock ;
  int true ;
  int tmp ;
  int *tmp___0 ;
  int tmp___1 ;
  int *tmp___2 ;
  int *tmp___3 ;
  int tmp___4 ;
  register unsigned int __v ;
  register unsigned int __x ;
  int tmp___5 ;
  register unsigned short __v___0 ;
  register unsigned short __x___0 ;
  int tmp___6 ;
  int *tmp___7 ;
  int tmp___8 ;
  int *tmp___9 ;
  int *tmp___10 ;
  int tmp___11 ;
  int tmp___12 ;

  {
  true = 1;
  tmp = u_ignore_sigpipe();
  if (tmp == -1) {
    goto _L;
  } else {
    sock = socket(2, 1, 0);
    if (sock == -1) {
      _L: /* CIL Label */ 
      return (-1);
    }
  }
  tmp___4 = setsockopt(sock, 1, 2, (void const   *)((char *)(& true)), sizeof(true));
  if (tmp___4 == -1) {
    tmp___0 = __errno_location();
    error = (*tmp___0);
    while (1) {
      tmp___1 = close(sock);
      if (tmp___1 == -1) {
        tmp___2 = __errno_location();
        if (! ((*tmp___2) == 4)) {
          goto _L___0;
        }
      } else {
        _L___0: /* CIL Label */ 
        break;
      }
    }
    tmp___3 = __errno_location();
    (*tmp___3) = error;
    return (-1);
  }
  server.sin_family = (unsigned short)2;
  __x = 0U;
  tmp___5 = __builtin_constant_p(__x);
  if (tmp___5) {
    __v = ((((__x & 4278190080U) >> 24) | ((__x & 16711680U) >> 8)) | ((__x & 65280U) <<
                                                                       8)) | ((__x &
                                                                               255U) <<
                                                                              24);
  } else {
    __asm__  ("rorw $8, %w0;"
              "rorl $16, %0;"
              "rorw $8, %w0": "=r" (__v): "0" (__x): "cc");
  }
  server.sin_addr.s_addr = __v;
  __x___0 = (unsigned short )((short )port);
  tmp___6 = __builtin_constant_p(__x___0);
  if (tmp___6) {
    __v___0 = (unsigned short )((((int )__x___0 >> 8) & 255) | (((int )__x___0 & 255) <<
                                                                8));
  } else {
    __asm__  ("rorw $8, %w0": "=r" (__v___0): "0" (__x___0): "cc");
  }
  server.sin_port = __v___0;
  tmp___11 = bind(sock, (struct sockaddr  const  *)((struct sockaddr *)(& server)),
                  sizeof(server));
  if (tmp___11 == -1) {
    goto _L___2;
  } else {
    tmp___12 = listen(sock, 50);
    if (tmp___12 == -1) {
      _L___2: /* CIL Label */ 
      tmp___7 = __errno_location();
      error = (*tmp___7);
      while (1) {
        tmp___8 = close(sock);
        if (tmp___8 == -1) {
          tmp___9 = __errno_location();
          if (! ((*tmp___9) == 4)) {
            goto _L___1;
          }
        } else {
          _L___1: /* CIL Label */ 
          break;
        }
      }
      tmp___10 = __errno_location();
      (*tmp___10) = error;
      return (-1);
    }
  }
  return (sock);
}
}
int u_accept(int fd , char *hostn , int hostnsize ) 
{ int len ;
  struct sockaddr_in netclient ;
  int retval ;
  int *tmp ;
  char const   * __restrict  tmp___0 ;
  char const   * __restrict  tmp___1 ;
  void const   * __restrict  tmp___2 ;
  char const   *tmp___3 ;
  size_t tmp___4 ;
  char *tmp___5 ;
  int tmp___6 ;
  int tmp___7 ;

  {
  len = (int )sizeof(struct sockaddr );
  while (1) {
    retval = accept(fd, (struct sockaddr * __restrict  )((struct sockaddr *)(& netclient)),
                    (socklen_t * __restrict  )(& len));
    if (retval == -1) {
      tmp = __errno_location();
      if (! ((*tmp) == 4)) {
        goto _L;
      }
    } else {
      _L: /* CIL Label */ 
      break;
    }
  }
  if (retval == -1) {
    goto _L___1;
  } else {
    if ((unsigned int )hostn == (unsigned int )((void *)0)) {
      _L___1: /* CIL Label */ 
      goto _L___0;
    } else {
      if (hostnsize <= 0) {
        _L___0: /* CIL Label */ 
        return (retval);
      }
    }
  }
  tmp___5 = inet_ntoa(netclient.sin_addr);
  tmp___6 = __builtin_constant_p(tmp___5);
  if (tmp___6) {
    tmp___7 = __builtin_constant_p(hostnsize);
    if (tmp___7) {
      tmp___3 = inet_ntoa(netclient.sin_addr);
      tmp___4 = strlen(tmp___3);
      if (tmp___4 + 1U >= (unsigned int )hostnsize) {
        tmp___2 = (void const   * __restrict  )inet_ntoa(netclient.sin_addr);
        memcpy((void * __restrict  )hostn, tmp___2, (unsigned int )hostnsize);
      } else {
        tmp___1 = inet_ntoa(netclient.sin_addr);
        strncpy((char * __restrict  )hostn, tmp___1, (unsigned int )hostnsize);
      }
    } else {
      goto _L___2;
    }
  } else {
    _L___2: /* CIL Label */ 
    tmp___0 = inet_ntoa(netclient.sin_addr);
    strncpy((char * __restrict  )hostn, tmp___0, (unsigned int )hostnsize);
  }
  return (retval);
}
}
int u_connect(u_port_t port , char *hostn ) 
{ int error ;
  int retval ;
  struct sockaddr_in server ;
  int sock ;
  fd_set sockset ;
  struct hostent *phe ;
  int *tmp ;
  in_addr_t tmp___0 ;
  register unsigned short __v ;
  register unsigned short __x ;
  int tmp___1 ;
  int tmp___2 ;
  int __d0 ;
  int __d1 ;
  int __d0___0 ;
  int __d1___0 ;
  int *tmp___3 ;
  int *tmp___4 ;
  int *tmp___5 ;
  int *tmp___6 ;
  int tmp___7 ;
  int *tmp___8 ;
  int *tmp___9 ;

  {
  tmp___0 = inet_addr((char const   *)hostn);
  if (tmp___0 == 4294967295U) {
    phe = gethostbyname((char const   *)hostn);
    if ((unsigned int )phe == (unsigned int )((void *)0)) {
      tmp = __errno_location();
      (*tmp) = 22;
      return (-1);
    }
    memcpy((void * __restrict  )((char *)(& server.sin_addr)), (void const   * __restrict  )(*(phe->h_addr_list +
                                                                                               0)),
           sizeof(struct in_addr ));
  } else {
    server.sin_addr.s_addr = inet_addr((char const   *)hostn);
  }
  __x = (unsigned short )((short )port);
  tmp___1 = __builtin_constant_p(__x);
  if (tmp___1) {
    __v = (unsigned short )((((int )__x >> 8) & 255) | (((int )__x & 255) << 8));
  } else {
    __asm__  ("rorw $8, %w0": "=r" (__v): "0" (__x): "cc");
  }
  server.sin_port = __v;
  server.sin_family = (unsigned short)2;
  tmp___2 = u_ignore_sigpipe();
  if (tmp___2 == -1) {
    goto _L;
  } else {
    sock = socket(2, 1, 0);
    if (sock == -1) {
      _L: /* CIL Label */ 
      return (-1);
    }
  }
  retval = connect(sock, (struct sockaddr  const  *)((struct sockaddr *)(& server)),
                   sizeof(server));
  if (retval == -1) {
    tmp___4 = __errno_location();
    if ((*tmp___4) == 4) {
      goto _L___2;
    } else {
      tmp___5 = __errno_location();
      if ((*tmp___5) == 114) {
        _L___2: /* CIL Label */ 
        while (1) {
          __asm__  volatile   ("cld; rep; stosl": "=c" (__d0), "=D" (__d1): "a" (0),
                               "0" (sizeof(fd_set ) / sizeof(__fd_mask )), "1" (& sockset.__fds_bits[0]): "memory");
          break;
        }
        __asm__  volatile   ("btsl %1,%0": "=m" (sockset.__fds_bits[(unsigned int )sock /
                                                                    (8U * sizeof(__fd_mask ))]): "r" ((unsigned int )sock %
                                                                                                      (8U *
                                                                                                       sizeof(__fd_mask ))): "cc",
                             "memory");
        while (1) {
          retval = select(sock + 1, (fd_set * __restrict  )((void *)0), (fd_set * __restrict  )(& sockset),
                          (fd_set * __restrict  )((void *)0), (struct timeval * __restrict  )((void *)0));
          if (retval == -1) {
            tmp___3 = __errno_location();
            if (! ((*tmp___3) == 4)) {
              goto _L___0;
            }
          } else {
            _L___0: /* CIL Label */ 
            break;
          }
          while (1) {
            __asm__  volatile   ("cld; rep; stosl": "=c" (__d0___0), "=D" (__d1___0): "a" (0),
                                 "0" (sizeof(fd_set ) / sizeof(__fd_mask )), "1" (& sockset.__fds_bits[0]): "memory");
            break;
          }
          __asm__  volatile   ("btsl %1,%0": "=m" (sockset.__fds_bits[(unsigned int )sock /
                                                                      (8U * sizeof(__fd_mask ))]): "r" ((unsigned int )sock %
                                                                                                        (8U *
                                                                                                         sizeof(__fd_mask ))): "cc",
                               "memory");
        }
      } else {
        goto _L___1;
      }
    }
  } else {
    _L___1: /* CIL Label */ ;
  }
  if (retval == -1) {
    tmp___6 = __errno_location();
    error = (*tmp___6);
    while (1) {
      tmp___7 = close(sock);
      if (tmp___7 == -1) {
        tmp___8 = __errno_location();
        if (! ((*tmp___8) == 4)) {
          goto _L___3;
        }
      } else {
        _L___3: /* CIL Label */ 
        break;
      }
    }
    tmp___9 = __errno_location();
    (*tmp___9) = error;
    return (-1);
  }
  return (sock);
}
}
#pragma merger(0,"/tmp/cil-ALVDny5Q.i","-g -g -O2")
extern __int32_t const   **__ctype_tolower_loc(void)  __attribute__((__const__)) ;
__inline static int tolower__extinline(int __c ) 
{ __int32_t tmp___0 ;
  __int32_t const   **tmp___1 ;

  {
  if (__c >= -128) {
    if (__c < 256) {
      tmp___1 = __ctype_tolower_loc();
      tmp___0 = (*((*tmp___1) + __c));
    } else {
      goto _L;
    }
  } else {
    _L: /* CIL Label */ 
    tmp___0 = __c;
  }
  return (tmp___0);
}
}
extern struct tm *gmtime_r(time_t const   * __restrict  __timer , struct tm * __restrict  __tp ) ;
extern  __attribute__((__noreturn__)) void pthread_exit(void *__retval ) ;
extern int pthread_detach(pthread_t __th ) ;
extern int pthread_mutex_init(pthread_mutex_t * __restrict  __mutex , pthread_mutexattr_t const   * __restrict  __mutex_attr ) ;
extern int pthread_mutex_lock(pthread_mutex_t *__mutex ) ;
extern int pthread_mutex_unlock(pthread_mutex_t *__mutex ) ;
extern int pthread_cond_init(pthread_cond_t * __restrict  __cond , pthread_condattr_t const   * __restrict  __cond_attr ) ;
extern int pthread_cond_signal(pthread_cond_t *__cond ) ;
extern int pthread_cond_wait(pthread_cond_t * __restrict  __cond , pthread_mutex_t * __restrict  __mutex ) ;
extern int regcomp(regex_t * __restrict  __preg , char const   * __restrict  __pattern ,
                   int __cflags ) ;
extern int regexec(regex_t const   * __restrict  __preg , char const   * __restrict  __string ,
                   size_t __nmatch , regmatch_t * __restrict  __pmatch , int __eflags ) ;
extern void regfree(regex_t *__preg ) ;
ssize_t r_write(int fd , void *buf , size_t size ) ;
int readline(int fd , char *buf , int nbytes ) ;
int readlinetimed(int fd , char *buf , int nbytes , double seconds ) ;
ssize_t readtimed(int fd , void *buf , size_t nbyte , double seconds ) ;
extern int ( /* format attribute */  snprintf)(char * __restrict  __s , size_t __maxlen ,
                                               char const   * __restrict  __format 
                                               , ...) ;
extern int ( /* format attribute */  vsnprintf)(char * __restrict  __s , size_t __maxlen ,
                                                char const   * __restrict  __format ,
                                                __gnuc_va_list __arg ) ;
extern char *realpath(char const   * __restrict  __name , char * __restrict  __resolved ) ;
extern char *strchr(char const   *__s , int __c )  __attribute__((__pure__)) ;
extern char *strstr(char const   *__haystack , char const   *__needle )  __attribute__((__pure__)) ;
extern void *__rawmemchr(void const   *__s , int __c ) ;
extern char *__strsep_g(char **__stringp , char const   *__delim ) ;
__inline static char *__strsep_1c__extinline(char **__s , char __reject ) 
{ register char *__retval ;
  char *tmp ;
  int tmp___4 ;

  {
  __retval = (*__s);
  if ((unsigned int )__retval != (unsigned int )((void *)0)) {
    tmp___4 = __builtin_constant_p(__reject);
    if (tmp___4) {
      if ((int )__reject == 0) {
        (*__s) = (char *)__rawmemchr((void const   *)__retval, (int )__reject);
      } else {
        goto _L;
      }
    } else {
      _L: /* CIL Label */ 
      (*__s) = strchr((char const   *)__retval, (int )__reject);
    }
    if ((unsigned int )(*__s) != (unsigned int )((void *)0)) {
      tmp = (*__s);
      (*__s) ++;
      (*tmp) = (char )'\000';
    } else {
      goto _L___0;
    }
  } else {
    _L___0: /* CIL Label */ ;
  }
  return (__retval);
}
}
__inline static char *__strsep_2c__extinline(char **__s , char __reject1 , char __reject2 ) 
{ register char *__retval ;
  register char *__cp ;
  char *tmp ;

  {
  __retval = (*__s);
  if ((unsigned int )__retval != (unsigned int )((void *)0)) {
    __cp = __retval;
    while (1) {
      if ((int )(*__cp) == 0) {
        __cp = (char *)((void *)0);
        break;
      }
      if ((int )(*__cp) == (int )__reject1) {
        goto _L;
      } else {
        if ((int )(*__cp) == (int )__reject2) {
          _L: /* CIL Label */ 
          tmp = __cp;
          __cp ++;
          (*tmp) = (char )'\000';
          break;
        }
      }
      __cp ++;
    }
    (*__s) = __cp;
  }
  return (__retval);
}
}
__inline static char *__strsep_3c__extinline(char **__s , char __reject1 , char __reject2 ,
                                             char __reject3 ) 
{ register char *__retval ;
  register char *__cp ;
  char *tmp ;

  {
  __retval = (*__s);
  if ((unsigned int )__retval != (unsigned int )((void *)0)) {
    __cp = __retval;
    while (1) {
      if ((int )(*__cp) == 0) {
        __cp = (char *)((void *)0);
        break;
      }
      if ((int )(*__cp) == (int )__reject1) {
        goto _L___0;
      } else {
        if ((int )(*__cp) == (int )__reject2) {
          _L___0: /* CIL Label */ 
          goto _L;
        } else {
          if ((int )(*__cp) == (int )__reject3) {
            _L: /* CIL Label */ 
            tmp = __cp;
            __cp ++;
            (*tmp) = (char )'\000';
            break;
          }
        }
      }
      __cp ++;
    }
    (*__s) = __cp;
  }
  return (__retval);
}
}
extern int shutdown(int __fd , int __how ) ;
extern int ws_stop(WSHANDLE ws ) ;
void ws_close(WS_CONNINFO *pwsc ) ;
void *ws_mainthread(void *arg ) ;
void *ws_dispatcher(void *arg ) ;
int ws_lock_unsafe(void) ;
int ws_unlock_unsafe(void) ;
void ws_defaulthandler(WS_PRIVATE *pwsp , WS_CONNINFO *pwsc ) ;
int ws_addarg(ARGLIST *root , char *key , char *fmt  , ...) ;
void ws_freearglist(ARGLIST *root ) ;
char *ws_urldecode(char *string , int space_as_plus ) ;
int ws_getheaders(WS_CONNINFO *pwsc ) ;
int ws_getpostvars(WS_CONNINFO *pwsc ) ;
int ws_getgetvars(WS_CONNINFO *pwsc , char *string ) ;
char *ws_getarg(ARGLIST *root , char *key ) ;
int ws_testarg(ARGLIST *root , char *key , char *value ) ;
int ws_findhandler(WS_PRIVATE *pwsp , WS_CONNINFO *pwsc , void (**preq)(WS_CONNINFO * ) ,
                   int (**pauth)(char * , char * ) , int *addheaders ) ;
int ws_decodepassword(char *header , char **username , char **password ) ;
static void ws_add_dispatch_thread(WS_PRIVATE *pwsp , WS_CONNINFO *pwsc ) ;
static void ws_remove_dispatch_thread(WS_PRIVATE *pwsp , WS_CONNINFO *pwsc ) ;
static int ws_encoding_hack(WS_CONNINFO *pwsc ) ;
struct __anonstruct_pthread_mutex_t_7 ws_unsafe  =    {0, 0, (_pthread_descr )0, 0, {0L, 0}};
char *ws_dow[7]  = {      (char *)"Sun",      (char *)"Mon",      (char *)"Tue",      (char *)"Wed", 
        (char *)"Thu",      (char *)"Fri",      (char *)"Sat"};
char *ws_moy[12]  = 
  {      (char *)"Jan",      (char *)"Feb",      (char *)"Mar",      (char *)"Apr", 
        (char *)"May",      (char *)"Jun",      (char *)"Jul",      (char *)"Aug", 
        (char *)"Sep",      (char *)"Oct",      (char *)"Nov",      (char *)"Dec"};
int ws_lock_unsafe(void) 
{ int err ;
  int retval ;
  int *tmp ;

  {
  retval = 0;
  err_log(10, 2U, (char *)"Entering ws_lock_unsafe\n");
  err = pthread_mutex_lock(& ws_unsafe);
  if (err) {
    tmp = __errno_location();
    (*tmp) = err;
    retval = -1;
  }
  err_log(10, 2U, (char *)"Exiting ws_lock_unsafe with retval of %d\n", retval);
  return (retval);
}
}
int ws_unlock_unsafe(void) 
{ int err ;
  int retval ;
  int *tmp ;

  {
  retval = 0;
  err_log(10, 2U, (char *)"Entering ws_unlock_unsafe\n");
  err = pthread_mutex_unlock(& ws_unsafe);
  if (err) {
    tmp = __errno_location();
    (*tmp) = err;
    retval = -1;
  }
  err_log(10, 2U, (char *)"Exiting ws_unlock_unsafe with a retval of %d\n", retval);
  return (retval);
}
}
WSHANDLE ws_start(WSCONFIG *config___0 ) 
{ int err ;
  WS_PRIVATE *pwsp ;
  int *tmp ;
  char *tmp___0 ;
  int *tmp___2 ;
  int *tmp___3 ;
  char *tmp___4 ;
  int *tmp___5 ;
  int *tmp___6 ;
  char *tmp___7 ;
  int *tmp___8 ;
  int *tmp___9 ;
  char *tmp___10 ;
  int *tmp___11 ;
  char *tmp___12 ;
  int *tmp___13 ;

  {
  err_log(10, 2U, (char *)"Entering ws_start\n");
  pwsp = (WS_PRIVATE *)malloc(sizeof(WS_PRIVATE ));
  if ((unsigned int )pwsp == (unsigned int )((void *)0)) {
    tmp = __errno_location();
    tmp___0 = strerror((*tmp));
    err_log(10, 2U, (char *)"Malloc error: %s\n", tmp___0);
    return ((void *)0);
  }
  memcpy((void * __restrict  )(& pwsp->wsconfig), (void const   * __restrict  )config___0,
         sizeof(WS_PRIVATE ));
  pwsp->connlist.next = (struct tag_ws_connlist *)((void *)0);
  pwsp->running = 0;
  pwsp->threadno = 0;
  pwsp->stop = 0;
  pwsp->dispatch_threads = 0;
  pwsp->handlers.next = (struct tag_ws_handler *)((void *)0);
  err = pthread_cond_init((pthread_cond_t * __restrict  )(& pwsp->exit_cond), (pthread_condattr_t const   * __restrict  )((void *)0));
  if (err) {
    tmp___2 = __errno_location();
    (*tmp___2) = err;
    tmp___3 = __errno_location();
    tmp___4 = strerror((*tmp___3));
    err_log(1, 2U, (char *)"Error in pthread_cond_init: %s\n", tmp___4);
    return ((void *)0);
  }
  err = pthread_mutex_init((pthread_mutex_t * __restrict  )(& pwsp->exit_mutex), (pthread_mutexattr_t const   * __restrict  )((void *)0));
  if (err) {
    tmp___5 = __errno_location();
    (*tmp___5) = err;
    tmp___6 = __errno_location();
    tmp___7 = strerror((*tmp___6));
    err_log(1, 2U, (char *)"Error in pthread_mutex_init: %s\n", tmp___7);
    return ((void *)0);
  }
  err_log(5, 2U, (char *)"Preparing to listen on port %d\n", pwsp->wsconfig.port);
  pwsp->server_fd = u_open(pwsp->wsconfig.port);
  if (pwsp->server_fd == -1) {
    tmp___8 = __errno_location();
    err = (*tmp___8);
    tmp___9 = __errno_location();
    tmp___10 = strerror((*tmp___9));
    err_log(1, 2U, (char *)"Could not open port: %s\n", tmp___10);
    tmp___11 = __errno_location();
    (*tmp___11) = err;
    return ((void *)0);
  }
  err_log(5, 2U, (char *)"Starting server thread\n");
  err = pthread_create((pthread_t * __restrict  )(& pwsp->server_tid), (pthread_attr_t const   * __restrict  )((void *)0),
                       & ws_mainthread, (void * __restrict  )((void *)pwsp));
  if (err) {
    tmp___12 = strerror(err);
    err_log(1, 2U, (char *)"Could not spawn thread: %s\n", tmp___12);
    r_close(pwsp->server_fd);
    tmp___13 = __errno_location();
    (*tmp___13) = err;
    return ((void *)0);
  }
  pwsp->running = 1;
  err_log(10, 2U, (char *)"Exiting ws_start\n");
  return ((void *)pwsp);
}
}
static void ws_remove_dispatch_thread(WS_PRIVATE *pwsp , WS_CONNINFO *pwsc ) 
{ WS_CONNLIST *pHead ;
  WS_CONNLIST *pTail ;
  int tmp ;

  {
  err_log(10, 2U, (char *)"Entering ws_remove_dispatch_thread\n");
  tmp = pthread_mutex_lock(& pwsp->exit_mutex);
  if (tmp) {
    err_log(0, 2U, (char *)"Cannot lock condition mutex\n");
  }
  pTail = & pwsp->connlist;
  pHead = pwsp->connlist.next;
  while (1) {
    if (pHead) {
      if (! ((unsigned int )pHead->pwsc != (unsigned int )pwsc)) {
        goto _L;
      }
    } else {
      _L: /* CIL Label */ 
      break;
    }
    pTail = pHead;
    pHead = pHead->next;
  }
  if (pHead) {
    pwsp->dispatch_threads --;
    err_log(9, 2U, (char *)"With thread %d exiting, %d are still running\n", pwsc->threadno,
            pwsp->dispatch_threads);
    pTail->next = pHead->next;
    if (pHead->status) {
      free((void *)pHead->status);
    }
    free((void *)pHead);
    pthread_cond_signal(& pwsp->exit_cond);
  }
  pthread_mutex_unlock(& pwsp->exit_mutex);
  err_log(10, 2U, (char *)"Exiting ws_remote_dispatch_thread\n");
  return;
}
}
static void ws_add_dispatch_thread(WS_PRIVATE *pwsp , WS_CONNINFO *pwsc ) 
{ WS_CONNLIST *pNew ;
  size_t __len___2 ;
  size_t tmp___15 ;
  char *__retval___2 ;
  char *tmp___16 ;
  int *tmp___18 ;
  char *tmp___19 ;
  int tmp___20 ;

  {
  err_log(10, 2U, (char *)"Entering ws_add_dispatch_thread\n");
  pNew = (WS_CONNLIST *)malloc(sizeof(WS_CONNLIST ));
  pNew->next = (struct tag_ws_connlist *)((void *)0);
  pNew->pwsc = pwsc;
  if ((unsigned int )((void const   *)("Initializing" + 1)) - (unsigned int )((void const   *)"Initializing") ==
      1U) {
    if ((int const   )(*("Initializing" + 0)) == 0) {
      pNew->status = (char *)calloc(1U, 1U);
    } else {
      tmp___15 = strlen("Initializing");
      __len___2 = tmp___15 + 1U;
      tmp___16 = (char *)malloc(__len___2);
      __retval___2 = tmp___16;
      if ((unsigned int )__retval___2 != (unsigned int )((void *)0)) {
        __retval___2 = (char *)memcpy((void * __restrict  )__retval___2, (void const   * __restrict  )"Initializing",
                                      __len___2);
      }
      pNew->status = __retval___2;
    }
  } else {
    pNew->status = __strdup("Initializing");
  }
  if (! pNew) {
    tmp___18 = __errno_location();
    tmp___19 = strerror((*tmp___18));
    err_log(0, 2U, (char *)"Malloc: %s\n", tmp___19);
  }
  tmp___20 = pthread_mutex_lock(& pwsp->exit_mutex);
  if (tmp___20) {
    err_log(0, 2U, (char *)"Cannot lock condition mutex\n");
  }
  pwsp->dispatch_threads ++;
  pNew->next = pwsp->connlist.next;
  pwsp->connlist.next = pNew;
  pthread_mutex_unlock(& pwsp->exit_mutex);
  err_log(10, 2U, (char *)"Exiting ws_add_dispatch_thread\n");
  return;
}
}
extern int ws_stop(WSHANDLE ws ) 
{ WS_PRIVATE *pwsp ;
  WS_HANDLER *current ;
  WS_CONNLIST *pcl ;
  void *result ;
  int tmp ;

  {
  pwsp = (WS_PRIVATE *)ws;
  err_log(9, 2U, (char *)"Entering ws_stop: %d threads\n", pwsp->dispatch_threads);
  while (pwsp->handlers.next) {
    current = pwsp->handlers.next;
    pwsp->handlers.next = current->next;
    regfree(& current->regex);
    free((void *)current);
  }
  pwsp->stop = 1;
  pwsp->running = 0;
  err_log(9, 2U, (char *)"ws_stop: closing the server fd\n");
  shutdown(pwsp->server_fd, 2);
  r_close(pwsp->server_fd);
  pthread_join(pwsp->server_tid, & result);
  tmp = pthread_mutex_lock(& pwsp->exit_mutex);
  if (tmp) {
    err_log(0, 2U, (char *)"Cannot lock condition mutex\n");
  }
  pcl = pwsp->connlist.next;
  while (pcl) {
    if ((pcl->pwsc)->fd) {
      shutdown((pcl->pwsc)->fd, 2);
      r_close((pcl->pwsc)->fd);
    }
    pcl = pcl->next;
  }
  while (pwsp->dispatch_threads) {
    err_log(9, 2U, (char *)"ws_stop: I still see %d threads\n", pwsp->dispatch_threads);
    pthread_cond_wait((pthread_cond_t * __restrict  )(& pwsp->exit_cond), (pthread_mutex_t * __restrict  )(& pwsp->exit_mutex));
  }
  pthread_mutex_unlock(& pwsp->exit_mutex);
  free((void *)pwsp);
  err_log(10, 2U, (char *)"Exiting ws_stop\n");
  return (0);
}
}
void *ws_mainthread(void *arg ) 
{ int fd ;
  int err ;
  WS_PRIVATE *pwsp ;
  WS_CONNINFO *pwsc ;
  pthread_t tid ;
  char hostname[256] ;
  int *tmp___0 ;
  char *tmp___1 ;
  void *__s ;
  void *__s___0 ;
  union __anonunion___u_35 *__u ;
  __uint8_t __c ;
  void *__s___1 ;
  int tmp___2 ;
  int *tmp___3 ;
  char *tmp___4 ;
  size_t __len___2 ;
  size_t tmp___21 ;
  char *__retval___2 ;
  char *tmp___22 ;
  int tmp___24 ;
  char *tmp___25 ;

  {
  pwsp = (WS_PRIVATE *)arg;
  err_log(10, 2U, (char *)"Entering ws_mainthread\n");
  while (1) {
    pwsc = (WS_CONNINFO *)malloc(sizeof(WS_CONNINFO ));
    if (! pwsc) {
      tmp___0 = __errno_location();
      tmp___1 = strerror((*tmp___0));
      err_log(0, 2U, (char *)"Error: %s\n", tmp___1);
      pwsp->running = 0;
      return ((void *)0);
    }
    tmp___2 = __builtin_constant_p(sizeof(WS_CONNINFO ));
    if (tmp___2) {
      if (sizeof(WS_CONNINFO ) <= 16U) {
        if (sizeof(WS_CONNINFO ) == 1U) {
          __s___1 = (void *)pwsc;
          (*((__uint8_t *)__s___1)) = (unsigned char)0;
        } else {
          __s___0 = (void *)pwsc;
          __u = (union __anonunion___u_35 *)__s___0;
          __c = (unsigned char)0;
          switch ((int )sizeof(WS_CONNINFO )) {
          case 15: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          __u = (union __anonunion___u_35 *)((void *)__u + 4);
          case 11: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          __u = (union __anonunion___u_35 *)((void *)__u + 4);
          case 7: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          __u = (union __anonunion___u_35 *)((void *)__u + 4);
          case 3: 
          __u->__usi = (unsigned short )((int )((unsigned short )__c) * 257);
          __u = (union __anonunion___u_35 *)((void *)__u + 2);
          __u->__uc = __c;
          break;
          case 14: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          __u = (union __anonunion___u_35 *)((void *)__u + 4);
          case 10: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          __u = (union __anonunion___u_35 *)((void *)__u + 4);
          case 6: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          __u = (union __anonunion___u_35 *)((void *)__u + 4);
          case 2: 
          __u->__usi = (unsigned short )((int )((unsigned short )__c) * 257);
          break;
          case 13: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          __u = (union __anonunion___u_35 *)((void *)__u + 4);
          case 9: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          __u = (union __anonunion___u_35 *)((void *)__u + 4);
          case 5: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          __u = (union __anonunion___u_35 *)((void *)__u + 4);
          case 1: 
          __u->__uc = __c;
          break;
          case 16: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          __u = (union __anonunion___u_35 *)((void *)__u + 4);
          case 12: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          __u = (union __anonunion___u_35 *)((void *)__u + 4);
          case 8: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          __u = (union __anonunion___u_35 *)((void *)__u + 4);
          case 4: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          case 0: ;
          break;
          }
        }
      } else {
        goto _L;
      }
    } else {
      _L: /* CIL Label */ 
      __s = (void *)pwsc;
      __builtin_memset(__s, '\000', (int )sizeof(WS_CONNINFO ));
    }
    fd = u_accept(pwsp->server_fd, hostname, 256);
    if (fd == -1) {
      tmp___3 = __errno_location();
      tmp___4 = strerror((*tmp___3));
      err_log(1, 2U, (char *)"Dispatcher: accept failed: %s\n", tmp___4);
      shutdown(pwsp->server_fd, 2);
      r_close(pwsp->server_fd);
      pwsp->running = 0;
      free((void *)pwsc);
      err_log(0, 2U, (char *)"Dispatcher: Aborting\n");
      return ((void *)0);
    }
    tmp___24 = __builtin_constant_p(hostname);
    if (tmp___24) {
      if ((unsigned int )((void const   *)(hostname + 1)) - (unsigned int )((void const   *)(hostname)) ==
          1U) {
        if ((int const   )(*((char const   *)(hostname) + 0)) == 0) {
          pwsc->hostname = (char *)calloc(1U, 1U);
        } else {
          tmp___21 = strlen((char const   *)(hostname));
          __len___2 = tmp___21 + 1U;
          tmp___22 = (char *)malloc(__len___2);
          __retval___2 = tmp___22;
          if ((unsigned int )__retval___2 != (unsigned int )((void *)0)) {
            __retval___2 = (char *)memcpy((void * __restrict  )__retval___2, (void const   * __restrict  )(hostname),
                                          __len___2);
          }
          pwsc->hostname = __retval___2;
        }
      } else {
        goto _L___0;
      }
    } else {
      _L___0: /* CIL Label */ 
      pwsc->hostname = __strdup((char const   *)(hostname));
    }
    pwsc->fd = fd;
    pwsc->pwsp = (void *)pwsp;
    ws_lock_unsafe();
    pwsc->threadno = pwsp->threadno;
    pwsp->threadno ++;
    ws_unlock_unsafe();
    err = pthread_create((pthread_t * __restrict  )(& tid), (pthread_attr_t const   * __restrict  )((void *)0),
                         & ws_dispatcher, (void * __restrict  )((void *)pwsc));
    if (err) {
      pwsc->error = err;
      tmp___25 = strerror(err);
      err_log(0, 2U, (char *)"Could not spawn thread: %s\n", tmp___25);
      ws_close(pwsc);
    } else {
      ws_add_dispatch_thread(pwsp, pwsc);
      pthread_detach(tid);
    }
  }
  err_log(10, 2U, (char *)"Exiting ws_mainthred\n");
  return ((void *)0);
}
}
void ws_close(WS_CONNINFO *pwsc ) 
{ WS_PRIVATE *pwsp ;

  {
  pwsp = (WS_PRIVATE *)pwsc->pwsp;
  err_log(10, 2U, (char *)"Entering ws_close\n");
  config_set_status(pwsc, 0, (void *)0);
  err_log(9, 2U, (char *)"Thread %d: Terminating\n", pwsc->threadno);
  err_log(9, 2U, (char *)"Thread %d: Freeing request headers\n", pwsc->threadno);
  ws_freearglist(& pwsc->request_headers);
  err_log(9, 2U, (char *)"Thread %d: Freeing response headers\n", pwsc->threadno);
  ws_freearglist(& pwsc->response_headers);
  err_log(9, 2U, (char *)"Thread %d: Freeing request vars\n", pwsc->threadno);
  ws_freearglist(& pwsc->request_vars);
  if (pwsc->uri) {
    free((void *)pwsc->uri);
    pwsc->uri = (char *)((void *)0);
  }
  if (pwsc->close) {
    goto _L;
  } else {
    if (pwsc->error) {
      _L: /* CIL Label */ 
      err_log(9, 2U, (char *)"Thread %d: Closing fd\n", pwsc->threadno);
      shutdown(pwsc->fd, 2);
      r_close(pwsc->fd);
      free((void *)pwsc->hostname);
      ws_remove_dispatch_thread(pwsp, pwsc);
      free((void *)pwsc);
      err_log(10, 2U, (char *)"Exiting ws_close (thread terminating)\n");
      pthread_exit((void *)0);
    }
  }
  err_log(10, 2U, (char *)"Exiting ws_close (thread continuing)\n");
  return;
}
}
void ws_freearglist(ARGLIST *root ) 
{ ARGLIST *current ;

  {
  err_log(10, 2U, (char *)"Entering ws_freearglist\n");
  while (root->next) {
    free((void *)(root->next)->key);
    free((void *)(root->next)->value);
    current = root->next;
    root->next = current->next;
    free((void *)current);
  }
  err_log(10, 2U, (char *)"Exiting ws_freearglist\n");
  return;
}
}
void ws_emitheaders(WS_CONNINFO *pwsc ) 
{ ARGLIST *pcurrent ;

  {
  pcurrent = pwsc->response_headers.next;
  err_log(10, 2U, (char *)"Entering ws_emitheaders\n");
  while (pcurrent) {
    err_log(9, 2U, (char *)"Emitting reponse header %s: %s\n", pcurrent->key, pcurrent->value);
    ws_writefd(pwsc, (char *)"%s: %s\r\n", pcurrent->key, pcurrent->value);
    pcurrent = pcurrent->next;
  }
  ws_writefd(pwsc, (char *)"\r\n");
  err_log(10, 2U, (char *)"Exitin ws_emitheaders\n");
  return;
}
}
int ws_getpostvars(WS_CONNINFO *pwsc ) 
{ char *content_length ;
  int length ;
  char *buffer___0 ;
  int *tmp___0 ;
  int *tmp___1 ;
  ssize_t tmp___2 ;

  {
  err_log(10, 2U, (char *)"Entering ws_getpostvars\n");
  content_length = ws_getarg(& pwsc->request_headers, (char *)"Content-Length");
  if (! content_length) {
    pwsc->error = 22;
    return (-1);
  }
  length = atoi__extinline((char const   *)content_length);
  err_log(9, 2U, (char *)"Thread %d: Post var length: %d\n", pwsc->threadno, length);
  buffer___0 = (char *)malloc((unsigned int )(length + 1));
  if (! buffer___0) {
    tmp___0 = __errno_location();
    pwsc->error = (*tmp___0);
    err_log(5, 2U, (char *)"Thread %d: Could not malloc %d bytes\n", pwsc->threadno,
            length);
    return (-1);
  }
  tmp___2 = readtimed(pwsc->fd, (void *)buffer___0, (unsigned int )length, 1800.0);
  if (tmp___2 == -1) {
    err_log(5, 2U, (char *)"Thread %d: Timeout reading post vars\n", pwsc->threadno);
    tmp___1 = __errno_location();
    pwsc->error = (*tmp___1);
    return (-1);
  }
  err_log(9, 2U, (char *)"Thread %d: Read post vars: %s\n", pwsc->threadno, buffer___0);
  pwsc->error = ws_getgetvars(pwsc, buffer___0);
  free((void *)buffer___0);
  err_log(10, 2U, (char *)"Exiting ws_getpostvars\n");
  return (pwsc->error);
}
}
int ws_getheaders(WS_CONNINFO *pwsc ) 
{ char *first ;
  char *last ;
  int done ;
  char buffer___0[2048] ;
  int *tmp ;
  int tmp___0 ;
  size_t tmp___1 ;
  size_t tmp___2 ;
  char __r0 ;
  char __r1 ;
  char __r2 ;
  size_t tmp___3 ;
  size_t tmp___4 ;
  int tmp___5 ;
  size_t tmp___6 ;

  {
  err_log(10, 2U, (char *)"Entering ws_getheaders\n");
  done = 0;
  while (! done) {
    tmp___0 = readline(pwsc->fd, buffer___0, (int )sizeof(buffer___0));
    if (tmp___0 == -1) {
      tmp = __errno_location();
      pwsc->error = (*tmp);
      err_log(5, 2U, (char *)"Thread %d: Unexpected close\n", pwsc->threadno);
      return (-1);
    }
    err_log(9, 2U, (char *)"Thread %d: Read: %s", pwsc->threadno, buffer___0);
    first = buffer___0;
    if ((int )buffer___0[0] == 13) {
      first = & buffer___0[1];
    }
    tmp___2 = strlen((char const   *)first);
    if ((int )(*(first + (tmp___2 - 1U))) == 10) {
      tmp___1 = strlen((char const   *)first);
      (*(first + (tmp___1 - 1U))) = (char )'\000';
    }
    tmp___6 = strlen((char const   *)first);
    if (tmp___6 == 0U) {
      err_log(9, 2U, (char *)"Thread %d: Headers parsed!\n", pwsc->threadno);
      done = 1;
    } else {
      last = first;
      if ((unsigned int )((void const   *)(":" + 1)) - (unsigned int )((void const   *)":") ==
          1U) {
        __r0 = (char )(*(":" + 0));
        if ((int const   )(*(":" + 0)) != 0) {
          __r1 = (char )(*(":" + 1));
          if ((int const   )(*(":" + 1)) == 0) {
            __strsep_1c__extinline(& last, __r0);
          } else {
            __r2 = (char )(*(":" + 2));
            if ((int )__r2 == 0) {
              __strsep_2c__extinline(& last, __r0, __r1);
            } else {
              if ((int const   )(*(":" + 3)) == 0) {
                __strsep_3c__extinline(& last, __r0, __r1, __r2);
              } else {
                __strsep_g(& last, ":");
              }
            }
          }
        } else {
          goto _L;
        }
      } else {
        _L: /* CIL Label */ 
        __strsep_g(& last, ":");
      }
      if ((unsigned int )last == (unsigned int )first) {
        err_log(2, 2U, (char *)"Thread %d: Invalid header: %s\n", pwsc->threadno,
                first);
      } else {
        while ((int )(*last) == 32) {
          last ++;
        }
        while (1) {
          tmp___4 = strlen((char const   *)last);
          if (! ((int )(*(last + (tmp___4 - 1U))) == 13)) {
            break;
          }
          tmp___3 = strlen((char const   *)last);
          (*(last + (tmp___3 - 1U))) = (char )'\000';
        }
        err_log(9, 2U, (char *)"Thread %d: Adding header *%s=%s*\n", pwsc->threadno,
                first, last);
        tmp___5 = ws_addarg(& pwsc->request_headers, first, (char *)"%s", last);
        if (tmp___5) {
          err_log(0, 2U, (char *)"Thread %d: Out of memory\n", pwsc->threadno);
          pwsc->error = 12;
          return (-1);
        }
      }
    }
  }
  err_log(10, 2U, (char *)"Exiting ws_getheaders\n");
  return (0);
}
}
static int ws_encoding_hack(WS_CONNINFO *pwsc ) 
{ char *user_agent ;
  int space_as_plus ;
  int tmp ;
  int tmp___0 ;

  {
  space_as_plus = 1;
  user_agent = ws_getrequestheader(pwsc, (char *)"user-agent");
  if (user_agent) {
    tmp = strncasecmp((char const   *)user_agent, "Roku", 4U);
    if (tmp == 0) {
      space_as_plus = 0;
    }
    tmp___0 = strncasecmp((char const   *)user_agent, "iTunes", 6U);
    if (tmp___0 == 0) {
      space_as_plus = 0;
    }
  }
  return (space_as_plus);
}
}
int ws_getgetvars(WS_CONNINFO *pwsc , char *string ) 
{ char *first ;
  char *last ;
  char *middle ;
  char *key ;
  char *value ;
  int done ;
  int space_as_plus ;
  char __r0 ;
  char __r1 ;
  char __r2 ;
  char __r0___0 ;
  char __r1___0 ;
  char __r2___0 ;

  {
  err_log(9, 2U, (char *)"Thread %d: Entering ws_getgetvars (%s)\n", pwsc->threadno,
          string);
  space_as_plus = ws_encoding_hack(pwsc);
  done = 0;
  first = string;
  while (1) {
    if (! done) {
      if (! first) {
        goto _L___1;
      }
    } else {
      _L___1: /* CIL Label */ 
      break;
    }
    middle = first;
    last = middle;
    if ((unsigned int )((void const   *)("&" + 1)) - (unsigned int )((void const   *)"&") ==
        1U) {
      __r0 = (char )(*("&" + 0));
      if ((int const   )(*("&" + 0)) != 0) {
        __r1 = (char )(*("&" + 1));
        if ((int const   )(*("&" + 1)) == 0) {
          __strsep_1c__extinline(& last, __r0);
        } else {
          __r2 = (char )(*("&" + 2));
          if ((int )__r2 == 0) {
            __strsep_2c__extinline(& last, __r0, __r1);
          } else {
            if ((int const   )(*("&" + 3)) == 0) {
              __strsep_3c__extinline(& last, __r0, __r1, __r2);
            } else {
              __strsep_g(& last, "&");
            }
          }
        }
      } else {
        goto _L;
      }
    } else {
      _L: /* CIL Label */ 
      __strsep_g(& last, "&");
    }
    if ((unsigned int )((void const   *)("=" + 1)) - (unsigned int )((void const   *)"=") ==
        1U) {
      __r0___0 = (char )(*("=" + 0));
      if ((int const   )(*("=" + 0)) != 0) {
        __r1___0 = (char )(*("=" + 1));
        if ((int const   )(*("=" + 1)) == 0) {
          __strsep_1c__extinline(& middle, __r0___0);
        } else {
          __r2___0 = (char )(*("=" + 2));
          if ((int )__r2___0 == 0) {
            __strsep_2c__extinline(& middle, __r0___0, __r1___0);
          } else {
            if ((int const   )(*("=" + 3)) == 0) {
              __strsep_3c__extinline(& middle, __r0___0, __r1___0, __r2___0);
            } else {
              __strsep_g(& middle, "=");
            }
          }
        }
      } else {
        goto _L___0;
      }
    } else {
      _L___0: /* CIL Label */ 
      __strsep_g(& middle, "=");
    }
    if (! middle) {
      err_log(2, 2U, (char *)"Thread %d: Bad arg: %s\n", pwsc->threadno, first);
    } else {
      key = ws_urldecode(first, space_as_plus);
      value = ws_urldecode(middle, space_as_plus);
      err_log(9, 2U, (char *)"Thread %d: Adding arg %s = %s\n", pwsc->threadno, key,
              value);
      ws_addarg(& pwsc->request_vars, key, (char *)"%s", value);
      free((void *)key);
      free((void *)value);
    }
    if (! last) {
      err_log(9, 2U, (char *)"Thread %d: Done parsing GET/POST args!\n", pwsc->threadno);
      done = 1;
    } else {
      first = last;
    }
  }
  err_log(10, 2U, (char *)"Exiting ws_getgetvars\n");
  return (0);
}
}
void *ws_dispatcher(void *arg ) 
{ WS_CONNINFO *pwsc ;
  WS_PRIVATE *pwsp ;
  char buffer___0[2048] ;
  char *first ;
  char *last ;
  int connection_done ;
  int can_dispatch ;
  char *auth ;
  char *username ;
  char *password ;
  int hdrs ;
  int handler ;
  time_t now ;
  struct tm now_tm ;
  void (*req_handler)(WS_CONNINFO * ) ;
  int (*auth_handler)(char * , char * ) ;
  int *tmp ;
  int *tmp___0 ;
  char *tmp___1 ;
  int tmp___2 ;
  char __r0 ;
  char __r1 ;
  char __r2 ;
  int tmp___3 ;
  int tmp___4 ;
  char __r0___0 ;
  char __r1___0 ;
  char __r2___0 ;
  size_t __len___2 ;
  size_t tmp___21 ;
  char *__retval___2 ;
  char *tmp___22 ;
  int tmp___24 ;
  int tmp___25 ;
  int tmp___26 ;
  int tmp___27 ;
  int tmp___28 ;
  char const   *tmp___29 ;
  char __r0___1 ;
  char __r1___1 ;
  char __r2___1 ;
  int tmp___30 ;
  char *tmp___32 ;
  size_t __len___6 ;
  size_t tmp___49 ;
  char *__retval___6 ;
  char *tmp___50 ;
  int tmp___52 ;
  char const   *tmp___53 ;
  int tmp___54 ;
  int tmp___55 ;

  {
  pwsc = (WS_CONNINFO *)arg;
  pwsp = (WS_PRIVATE *)pwsc->pwsp;
  connection_done = 0;
  err_log(9, 2U, (char *)"Thread %d: Entering ws_dispatcher (Connection from %s)\n",
          pwsc->threadno, pwsc->hostname);
  while (! connection_done) {
    tmp___2 = readlinetimed(pwsc->fd, buffer___0, (int )sizeof(buffer___0), 1800.0);
    if (tmp___2 < 1) {
      tmp = __errno_location();
      pwsc->error = (*tmp);
      pwsc->close = 1;
      tmp___0 = __errno_location();
      tmp___1 = strerror((*tmp___0));
      err_log(2, 2U, (char *)"Thread %d:  could not read: %s\n", pwsc->threadno, tmp___1);
      ws_close(pwsc);
      return ((void *)0);
    }
    err_log(9, 2U, (char *)"Thread %d: got request\n", pwsc->threadno);
    err_log(8, 2U, (char *)"Request: %s", buffer___0);
    last = buffer___0;
    first = last;
    if ((unsigned int )((void const   *)(" " + 1)) - (unsigned int )((void const   *)" ") ==
        1U) {
      __r0 = (char )(*(" " + 0));
      if ((int const   )(*(" " + 0)) != 0) {
        __r1 = (char )(*(" " + 1));
        if ((int const   )(*(" " + 1)) == 0) {
          __strsep_1c__extinline(& last, __r0);
        } else {
          __r2 = (char )(*(" " + 2));
          if ((int )__r2 == 0) {
            __strsep_2c__extinline(& last, __r0, __r1);
          } else {
            if ((int const   )(*(" " + 3)) == 0) {
              __strsep_3c__extinline(& last, __r0, __r1, __r2);
            } else {
              __strsep_g(& last, " ");
            }
          }
        }
      } else {
        goto _L;
      }
    } else {
      _L: /* CIL Label */ 
      __strsep_g(& last, " ");
    }
    if (! last) {
      pwsc->close = 1;
      ws_returnerror(pwsc, 400, (char *)"Bad request\n");
      ws_close(pwsc);
      err_log(10, 2U, (char *)"Error: bad request.  Exiting ws_dispatcher\n");
      return ((void *)0);
    }
    tmp___4 = strcasecmp((char const   *)first, "get");
    if (tmp___4) {
      tmp___3 = strcasecmp((char const   *)first, "post");
      if (tmp___3) {
        pwsc->error = 22;
        pwsc->close = 1;
        ws_returnerror(pwsc, 501, (char *)"Not implemented");
        ws_close(pwsc);
        err_log(10, 2U, (char *)"Error: not get or post.  Exiting ws_dispatcher\n");
        return ((void *)0);
      } else {
        pwsc->request_type = 1;
      }
    } else {
      pwsc->request_type = 0;
    }
    first = last;
    if ((unsigned int )((void const   *)(" " + 1)) - (unsigned int )((void const   *)" ") ==
        1U) {
      __r0___0 = (char )(*(" " + 0));
      if ((int const   )(*(" " + 0)) != 0) {
        __r1___0 = (char )(*(" " + 1));
        if ((int const   )(*(" " + 1)) == 0) {
          __strsep_1c__extinline(& last, __r0___0);
        } else {
          __r2___0 = (char )(*(" " + 2));
          if ((int )__r2___0 == 0) {
            __strsep_2c__extinline(& last, __r0___0, __r1___0);
          } else {
            if ((int const   )(*(" " + 3)) == 0) {
              __strsep_3c__extinline(& last, __r0___0, __r1___0, __r2___0);
            } else {
              __strsep_g(& last, " ");
            }
          }
        }
      } else {
        goto _L___0;
      }
    } else {
      _L___0: /* CIL Label */ 
      __strsep_g(& last, " ");
    }
    tmp___24 = __builtin_constant_p(first);
    if (tmp___24) {
      if ((unsigned int )((void const   *)(first + 1)) - (unsigned int )((void const   *)first) ==
          1U) {
        if ((int const   )(*((char const   *)first + 0)) == 0) {
          pwsc->uri = (char *)calloc(1U, 1U);
        } else {
          tmp___21 = strlen((char const   *)first);
          __len___2 = tmp___21 + 1U;
          tmp___22 = (char *)malloc(__len___2);
          __retval___2 = tmp___22;
          if ((unsigned int )__retval___2 != (unsigned int )((void *)0)) {
            __retval___2 = (char *)memcpy((void * __restrict  )__retval___2, (void const   * __restrict  )first,
                                          __len___2);
          }
          pwsc->uri = __retval___2;
        }
      } else {
        goto _L___1;
      }
    } else {
      _L___1: /* CIL Label */ 
      pwsc->uri = __strdup((char const   *)first);
    }
    tmp___25 = ws_getheaders(pwsc);
    if (tmp___25) {
      goto _L___2;
    } else {
      if (! last) {
        _L___2: /* CIL Label */ 
        err_log(1, 2U, (char *)"Thread %d: Couldn\'t parse headers - aborting\n",
                pwsc->threadno);
        pwsc->close = 1;
        ws_close(pwsc);
        return ((void *)0);
      }
    }
    tmp___28 = strncasecmp((char const   *)last, "HTTP/1.0", 8U);
    if (tmp___28 == 0) {
      tmp___26 = ws_testarg(& pwsc->request_headers, (char *)"connection", (char *)"keep-alive");
      if (tmp___26) {
        tmp___27 = 0;
      } else {
        tmp___27 = 1;
      }
      pwsc->close = tmp___27;
    } else {
      pwsc->close = ws_testarg(& pwsc->request_headers, (char *)"connection", (char *)"close");
    }
    if (pwsc->close) {
      tmp___29 = "non-persist";
    } else {
      tmp___29 = "persist";
    }
    err_log(9, 2U, (char *)"Thread %d: Connection type %s: Connection: %s\n", pwsc->threadno,
            last, tmp___29);
    if (! pwsc->uri) {
      pwsc->error = 12;
      pwsc->close = 1;
      err_log(1, 2U, (char *)"Thread %d: Error allocation URI\n", pwsc->threadno);
      ws_returnerror(pwsc, 500, (char *)"Internal server error");
      ws_close(pwsc);
      return ((void *)0);
    }
    first = pwsc->uri;
    if ((unsigned int )((void const   *)("?" + 1)) - (unsigned int )((void const   *)"?") ==
        1U) {
      __r0___1 = (char )(*("?" + 0));
      if ((int const   )(*("?" + 0)) != 0) {
        __r1___1 = (char )(*("?" + 1));
        if ((int const   )(*("?" + 1)) == 0) {
          __strsep_1c__extinline(& first, __r0___1);
        } else {
          __r2___1 = (char )(*("?" + 2));
          if ((int )__r2___1 == 0) {
            __strsep_2c__extinline(& first, __r0___1, __r1___1);
          } else {
            if ((int const   )(*("?" + 3)) == 0) {
              __strsep_3c__extinline(& first, __r0___1, __r1___1, __r2___1);
            } else {
              __strsep_g(& first, "?");
            }
          }
        }
      } else {
        goto _L___3;
      }
    } else {
      _L___3: /* CIL Label */ 
      __strsep_g(& first, "?");
    }
    if (first) {
      err_log(9, 2U, (char *)"Thread %d: parsing GET args\n", pwsc->threadno);
      ws_getgetvars(pwsc, first);
    }
    err_log(9, 2U, (char *)"Thread %d: Original URI: %s\n", pwsc->threadno, pwsc->uri);
    tmp___30 = ws_encoding_hack(pwsc);
    first = ws_urldecode(pwsc->uri, tmp___30);
    free((void *)pwsc->uri);
    pwsc->uri = first;
    first = strstr((char const   *)pwsc->uri, "://");
    if (first) {
      first += 3;
      tmp___32 = strchr((char const   *)first, '/');
      first = tmp___32;
      if (first) {
        tmp___52 = __builtin_constant_p(first);
        if (tmp___52) {
          if ((unsigned int )((void const   *)(first + 1)) - (unsigned int )((void const   *)first) ==
              1U) {
            if ((int const   )(*((char const   *)first + 0)) == 0) {
              first = (char *)calloc(1U, 1U);
            } else {
              tmp___49 = strlen((char const   *)first);
              __len___6 = tmp___49 + 1U;
              tmp___50 = (char *)malloc(__len___6);
              __retval___6 = tmp___50;
              if ((unsigned int )__retval___6 != (unsigned int )((void *)0)) {
                __retval___6 = (char *)memcpy((void * __restrict  )__retval___6, (void const   * __restrict  )first,
                                              __len___6);
              }
              first = __retval___6;
            }
          } else {
            goto _L___4;
          }
        } else {
          _L___4: /* CIL Label */ 
          first = __strdup((char const   *)first);
        }
        free((void *)pwsc->uri);
        pwsc->uri = first;
      }
    }
    err_log(9, 2U, (char *)"Thread %d: Translated URI: %s\n", pwsc->threadno, pwsc->uri);
    if (pwsc->request_type == 1) {
      ws_getpostvars(pwsc);
    }
    hdrs = 1;
    handler = ws_findhandler(pwsp, pwsc, & req_handler, & auth_handler, & hdrs);
    time(& now);
    err_log(9, 2U, (char *)"Thread %d: Time is %d seconds after epoch\n", pwsc->threadno,
            now);
    gmtime_r((time_t const   * __restrict  )(& now), (struct tm * __restrict  )(& now_tm));
    err_log(9, 2U, (char *)"Thread %d: Setting time header\n", pwsc->threadno);
    ws_addarg(& pwsc->response_headers, (char *)"Date", (char *)"%s, %d %s %d %02d:%02d:%02d GMT",
              ws_dow[now_tm.tm_wday], now_tm.tm_mday, ws_moy[now_tm.tm_mon], now_tm.tm_year +
                                                                             1900,
              now_tm.tm_hour, now_tm.tm_min, now_tm.tm_sec);
    if (hdrs) {
      if (pwsc->close) {
        tmp___53 = "close";
      } else {
        tmp___53 = "keep-alive";
      }
      ws_addarg(& pwsc->response_headers, (char *)"Connection", (char *)tmp___53);
      ws_addarg(& pwsc->response_headers, (char *)"Server", (char *)"mt-daapd/0.2.4");
      ws_addarg(& pwsc->response_headers, (char *)"Content-Type", (char *)"text/html");
      ws_addarg(& pwsc->response_headers, (char *)"Content-Language", (char *)"en_us");
    }
    if (handler == -1) {
      err_log(9, 2U, (char *)"Thread %d: Using default handler.\n", pwsc->threadno);
      ws_defaulthandler(pwsp, pwsc);
    } else {
      err_log(9, 2U, (char *)"Thread %d: Using non-default handler\n", pwsc->threadno);
      can_dispatch = 0;
      if (auth_handler) {
        tmp___55 = ((*auth_handler))((char *)((void *)0), (char *)((void *)0));
        if (tmp___55 == 0) {
          auth = ws_getarg(& pwsc->request_headers, (char *)"Authorization");
          if (auth) {
            ws_decodepassword(auth, & username, & password);
            tmp___54 = ((*auth_handler))(username, password);
            if (tmp___54) {
              can_dispatch = 1;
            }
            ws_addarg(& pwsc->request_vars, (char *)"HTTP_USER", username);
            ws_addarg(& pwsc->request_vars, (char *)"HTTP_PASSWD", password);
            free((void *)username);
          }
          if (! can_dispatch) {
            ws_addarg(& pwsc->response_headers, (char *)"WWW-Authenticate", (char *)"Basic realm=\"webserver\"");
            ws_returnerror(pwsc, 401, (char *)"Unauthorized");
            pwsc->error = 0;
          }
        } else {
          goto _L___5;
        }
      } else {
        _L___5: /* CIL Label */ 
        can_dispatch = 1;
      }
      if (can_dispatch) {
        if (req_handler) {
          ((*req_handler))(pwsc);
        } else {
          ws_defaulthandler(pwsp, pwsc);
        }
      }
    }
    if (pwsc->close) {
      goto _L___7;
    } else {
      if (pwsc->error) {
        _L___7: /* CIL Label */ 
        goto _L___6;
      } else {
        if (pwsp->stop) {
          _L___6: /* CIL Label */ 
          pwsc->close = 1;
          connection_done = 1;
        }
      }
    }
    ws_close(pwsc);
  }
  err_log(10, 2U, (char *)"Exiting ws_dispatcher\n");
  return ((void *)0);
}
}
int ws_writefd(WS_CONNINFO *pwsc , char *fmt  , ...) 
{ char buffer___0[1024] ;
  va_list ap ;
  size_t tmp ;
  int tmp___0 ;

  {
  err_log(10, 2U, (char *)"Entering ws_writefd\n");
  __builtin_stdarg_start(ap, fmt);
  vsnprintf((char * __restrict  )(buffer___0), 1024U, (char const   * __restrict  )fmt,
            ap);
  __builtin_va_end(ap);
  err_log(10, 2U, (char *)"Exiting ws_writefd\n");
  tmp = strlen((char const   *)(buffer___0));
  tmp___0 = r_write(pwsc->fd, (void *)(buffer___0), tmp);
  return (tmp___0);
}
}
int ws_returnerror(WS_CONNINFO *pwsc , int error , char *description ) 
{ char *useragent ;
  int tmp___44 ;
  size_t __s1_len___0 ;
  size_t __s2_len___0 ;
  int tmp___66 ;
  size_t tmp___67 ;
  register int __result___85 ;
  unsigned char const   *__s2___14 ;
  register int __result___86 ;
  register int __result___93 ;
  unsigned char const   *__s1___30 ;
  register int __result___94 ;
  int tmp___82 ;
  int tmp___83 ;
  int tmp___84 ;
  int tmp___85 ;
  int tmp___86 ;
  size_t tmp___87 ;
  size_t tmp___88 ;
  int *tmp___89 ;
  char *tmp___90 ;
  int *tmp___91 ;

  {
  err_log(2, 2U, (char *)"Thread %d: Entering ws_returnerror (%d: %s)\n", pwsc->threadno,
          error, description);
  ws_writefd(pwsc, (char *)"HTTP/1.1 %d %s\r\n", error, description);
  useragent = ws_getarg(& pwsc->request_headers, (char *)"User-Agent");
  if (useragent) {
    tmp___86 = __builtin_constant_p(useragent);
    if (tmp___86) {
      tmp___87 = strlen((char const   *)useragent);
      if (tmp___87 < 6U) {
        goto _L___335;
      } else {
        goto _L___336;
      }
    } else {
      _L___336: /* CIL Label */ 
      tmp___88 = strlen("iTunes");
      if (tmp___88 < 6U) {
        _L___335: /* CIL Label */ 
        tmp___84 = __builtin_constant_p(useragent);
        if (tmp___84) {
          __s1_len___0 = strlen((char const   *)useragent);
          __s2_len___0 = strlen("iTunes");
          if (! ((unsigned int )((void const   *)(useragent + 1)) - (unsigned int )((void const   *)useragent) ==
                 1U)) {
            goto _L___332;
          } else {
            if (__s1_len___0 >= 4U) {
              _L___332: /* CIL Label */ 
              if (! ((unsigned int )((void const   *)("iTunes" + 1)) - (unsigned int )((void const   *)"iTunes") ==
                     1U)) {
                goto _L___331;
              } else {
                if (__s2_len___0 >= 4U) {
                  _L___331: /* CIL Label */ 
                  tmp___85 = 1;
                } else {
                  goto _L___330;
                }
              }
            } else {
              _L___330: /* CIL Label */ 
              tmp___85 = 0;
            }
          }
          if (tmp___85) {
            if (__s1_len___0 < __s2_len___0) {
              tmp___67 = __s1_len___0;
            } else {
              tmp___67 = __s2_len___0;
            }
            tmp___66 = memcmp((void const   *)((char const   *)useragent), (void const   *)"iTunes",
                              tmp___67 + 1U);
          } else {
            goto _L___334;
          }
        } else {
          _L___334: /* CIL Label */ 
          tmp___83 = __builtin_constant_p(useragent);
          if (tmp___83) {
            if ((unsigned int )((void const   *)(useragent + 1)) - (unsigned int )((void const   *)useragent) ==
                1U) {
              __s1_len___0 = strlen((char const   *)useragent);
              if (__s1_len___0 < 4U) {
                if ((unsigned int )((void const   *)("iTunes" + 1)) - (unsigned int )((void const   *)"iTunes") ==
                    1U) {
                  __result___85 = (int )((int const   )(*((unsigned char const   *)((char const   *)useragent) +
                                                          0)) - (int const   )(*((unsigned char const   *)"iTunes" +
                                                                                 0)));
                  if (__s1_len___0 > 0U) {
                    if (__result___85 == 0) {
                      __result___85 = (int )((int const   )(*((unsigned char const   *)((char const   *)useragent) +
                                                              1)) - (int const   )(*((unsigned char const   *)"iTunes" +
                                                                                     1)));
                      if (__s1_len___0 > 1U) {
                        if (__result___85 == 0) {
                          __result___85 = (int )((int const   )(*((unsigned char const   *)((char const   *)useragent) +
                                                                  2)) - (int const   )(*((unsigned char const   *)"iTunes" +
                                                                                         2)));
                          if (__s1_len___0 > 2U) {
                            if (__result___85 == 0) {
                              __result___85 = (int )((int const   )(*((unsigned char const   *)((char const   *)useragent) +
                                                                      3)) - (int const   )(*((unsigned char const   *)"iTunes" +
                                                                                             3)));
                            } else {
                              goto _L___295;
                            }
                          } else {
                            _L___295: /* CIL Label */ ;
                          }
                        } else {
                          goto _L___296;
                        }
                      } else {
                        _L___296: /* CIL Label */ ;
                      }
                    } else {
                      goto _L___297;
                    }
                  } else {
                    _L___297: /* CIL Label */ ;
                  }
                  tmp___66 = __result___85;
                } else {
                  __s2___14 = (unsigned char const   *)"iTunes";
                  __result___86 = (int )((int const   )(*((unsigned char const   *)((char const   *)useragent) +
                                                          0)) - (int const   )(*(__s2___14 +
                                                                                 0)));
                  if (__s1_len___0 > 0U) {
                    if (__result___86 == 0) {
                      __result___86 = (int )((int const   )(*((unsigned char const   *)((char const   *)useragent) +
                                                              1)) - (int const   )(*(__s2___14 +
                                                                                     1)));
                      if (__s1_len___0 > 1U) {
                        if (__result___86 == 0) {
                          __result___86 = (int )((int const   )(*((unsigned char const   *)((char const   *)useragent) +
                                                                  2)) - (int const   )(*(__s2___14 +
                                                                                         2)));
                          if (__s1_len___0 > 2U) {
                            if (__result___86 == 0) {
                              __result___86 = (int )((int const   )(*((unsigned char const   *)((char const   *)useragent) +
                                                                      3)) - (int const   )(*(__s2___14 +
                                                                                             3)));
                            } else {
                              goto _L___298;
                            }
                          } else {
                            _L___298: /* CIL Label */ ;
                          }
                        } else {
                          goto _L___299;
                        }
                      } else {
                        _L___299: /* CIL Label */ ;
                      }
                    } else {
                      goto _L___300;
                    }
                  } else {
                    _L___300: /* CIL Label */ ;
                  }
                  tmp___66 = __result___86;
                }
              } else {
                goto _L___329;
              }
            } else {
              goto _L___329;
            }
          } else {
            _L___329: /* CIL Label */ 
            if ((unsigned int )((void const   *)("iTunes" + 1)) - (unsigned int )((void const   *)"iTunes") ==
                1U) {
              __s2_len___0 = strlen("iTunes");
              if (__s2_len___0 < 4U) {
                tmp___82 = __builtin_constant_p(useragent);
                if (tmp___82) {
                  if ((unsigned int )((void const   *)(useragent + 1)) - (unsigned int )((void const   *)useragent) ==
                      1U) {
                    __result___93 = (int )((int const   )(*((unsigned char const   *)((char const   *)useragent) +
                                                            0)) - (int const   )(*((unsigned char const   *)"iTunes" +
                                                                                   0)));
                    if (__s2_len___0 > 0U) {
                      if (__result___93 == 0) {
                        __result___93 = (int )((int const   )(*((unsigned char const   *)((char const   *)useragent) +
                                                                1)) - (int const   )(*((unsigned char const   *)"iTunes" +
                                                                                       1)));
                        if (__s2_len___0 > 1U) {
                          if (__result___93 == 0) {
                            __result___93 = (int )((int const   )(*((unsigned char const   *)((char const   *)useragent) +
                                                                    2)) - (int const   )(*((unsigned char const   *)"iTunes" +
                                                                                           2)));
                            if (__s2_len___0 > 2U) {
                              if (__result___93 == 0) {
                                __result___93 = (int )((int const   )(*((unsigned char const   *)((char const   *)useragent) +
                                                                        3)) - (int const   )(*((unsigned char const   *)"iTunes" +
                                                                                               3)));
                              } else {
                                goto _L___320;
                              }
                            } else {
                              _L___320: /* CIL Label */ ;
                            }
                          } else {
                            goto _L___321;
                          }
                        } else {
                          _L___321: /* CIL Label */ ;
                        }
                      } else {
                        goto _L___322;
                      }
                    } else {
                      _L___322: /* CIL Label */ ;
                    }
                    tmp___66 = __result___93;
                  } else {
                    goto _L___326;
                  }
                } else {
                  _L___326: /* CIL Label */ 
                  __s1___30 = (unsigned char const   *)((char const   *)useragent);
                  __result___94 = (int )((int const   )(*(__s1___30 + 0)) - (int const   )(*((unsigned char const   *)"iTunes" +
                                                                                             0)));
                  if (__s2_len___0 > 0U) {
                    if (__result___94 == 0) {
                      __result___94 = (int )((int const   )(*(__s1___30 + 1)) - (int const   )(*((unsigned char const   *)"iTunes" +
                                                                                                 1)));
                      if (__s2_len___0 > 1U) {
                        if (__result___94 == 0) {
                          __result___94 = (int )((int const   )(*(__s1___30 + 2)) -
                                                 (int const   )(*((unsigned char const   *)"iTunes" +
                                                                  2)));
                          if (__s2_len___0 > 2U) {
                            if (__result___94 == 0) {
                              __result___94 = (int )((int const   )(*(__s1___30 +
                                                                      3)) - (int const   )(*((unsigned char const   *)"iTunes" +
                                                                                             3)));
                            } else {
                              goto _L___323;
                            }
                          } else {
                            _L___323: /* CIL Label */ ;
                          }
                        } else {
                          goto _L___324;
                        }
                      } else {
                        _L___324: /* CIL Label */ ;
                      }
                    } else {
                      goto _L___325;
                    }
                  } else {
                    _L___325: /* CIL Label */ ;
                  }
                  tmp___66 = __result___94;
                }
              } else {
                goto _L___327;
              }
            } else {
              _L___327: /* CIL Label */ 
              tmp___66 = strcmp((char const   *)useragent, "iTunes");
            }
          }
        }
        tmp___44 = tmp___66;
      } else {
        tmp___44 = strncmp((char const   *)useragent, "iTunes", 6U);
      }
    }
    if (tmp___44) {
      pwsc->close = 1;
      ws_addarg(& pwsc->response_headers, (char *)"Connection", (char *)"close");
    } else {
      goto _L___337;
    }
  } else {
    _L___337: /* CIL Label */ ;
  }
  ws_emitheaders(pwsc);
  ws_writefd(pwsc, (char *)"<HTML>\r\n<TITLE>");
  ws_writefd(pwsc, (char *)"%d %s</TITLE>\r\n<BODY>", error, description);
  ws_writefd(pwsc, (char *)"\r\n<H1>%s</H1>\r\n", description);
  ws_writefd(pwsc, (char *)"Error %d\r\n<hr>\r\n", error);
  ws_writefd(pwsc, (char *)"<i>mt-daapd: %s\r\n<br>", "0.2.4");
  tmp___91 = __errno_location();
  if ((*tmp___91)) {
    tmp___89 = __errno_location();
    tmp___90 = strerror((*tmp___89));
    ws_writefd(pwsc, (char *)"Error: %s\r\n", tmp___90);
  }
  ws_writefd(pwsc, (char *)"</i></BODY>\r\n</HTML>\r\n");
  err_log(10, 2U, (char *)"Exiting ws_returnerror\n");
  return (0);
}
}
void ws_defaulthandler(WS_PRIVATE *pwsp , WS_CONNINFO *pwsc ) 
{ char path[4096] ;
  char resolved_path[4096] ;
  int file_fd ;
  off_t len ;
  int *tmp ;
  char *tmp___0 ;
  int tmp___70 ;
  size_t __s1_len___0 ;
  size_t __s2_len___0 ;
  int tmp___101 ;
  size_t tmp___102 ;
  register int __result___85 ;
  unsigned char const   *__s2___14 ;
  register int __result___86 ;
  int tmp___117 ;
  register int __result___93 ;
  unsigned char const   *__s1___30 ;
  register int __result___94 ;
  int tmp___124 ;
  int tmp___125 ;
  int tmp___126 ;
  int tmp___127 ;
  int tmp___128 ;
  int tmp___129 ;
  size_t tmp___130 ;
  size_t tmp___131 ;
  int tmp___132 ;
  int tmp___133 ;
  size_t tmp___134 ;
  size_t tmp___135 ;
  int tmp___136 ;
  size_t tmp___137 ;
  size_t tmp___138 ;
  int *tmp___139 ;
  int *tmp___140 ;
  char *tmp___141 ;

  {
  err_log(10, 2U, (char *)"Entering ws_defaulthandler\n");
  snprintf((char * __restrict  )(path), 4096U, (char const   * __restrict  )"%s/%s",
           pwsp->wsconfig.web_root, pwsc->uri);
  tmp___0 = realpath((char const   * __restrict  )(path), (char * __restrict  )(resolved_path));
  if (! tmp___0) {
    tmp = __errno_location();
    pwsc->error = (*tmp);
    err_log(2, 2U, (char *)"Exiting ws_defaulthandler: Cannot resolve %s\n", path);
    ws_returnerror(pwsc, 404, (char *)"Not found");
    ws_close(pwsc);
    return;
  }
  err_log(9, 2U, (char *)"Thread %d: Preparing to serve %s\n", pwsc->threadno, resolved_path);
  tmp___131 = strlen((char const   *)pwsp->wsconfig.web_root);
  tmp___132 = __builtin_constant_p(tmp___131);
  if (tmp___132) {
    tmp___133 = __builtin_constant_p(resolved_path);
    if (tmp___133) {
      tmp___134 = strlen((char const   *)(resolved_path));
      tmp___135 = strlen((char const   *)pwsp->wsconfig.web_root);
      if (tmp___134 < tmp___135) {
        goto _L___352;
      } else {
        goto _L___354;
      }
    } else {
      _L___354: /* CIL Label */ 
      tmp___136 = __builtin_constant_p(pwsp->wsconfig.web_root);
      if (tmp___136) {
        tmp___137 = strlen((char const   *)pwsp->wsconfig.web_root);
        tmp___138 = strlen((char const   *)pwsp->wsconfig.web_root);
        if (tmp___137 < tmp___138) {
          _L___352: /* CIL Label */ 
          tmp___127 = __builtin_constant_p(resolved_path);
          if (tmp___127) {
            tmp___128 = __builtin_constant_p(pwsp->wsconfig.web_root);
            if (tmp___128) {
              __s1_len___0 = strlen((char const   *)(resolved_path));
              __s2_len___0 = strlen((char const   *)pwsp->wsconfig.web_root);
              if (! ((unsigned int )((void const   *)(resolved_path + 1)) - (unsigned int )((void const   *)(resolved_path)) ==
                     1U)) {
                goto _L___348;
              } else {
                if (__s1_len___0 >= 4U) {
                  _L___348: /* CIL Label */ 
                  if (! ((unsigned int )((void const   *)(pwsp->wsconfig.web_root +
                                                          1)) - (unsigned int )((void const   *)pwsp->wsconfig.web_root) ==
                         1U)) {
                    goto _L___347;
                  } else {
                    if (__s2_len___0 >= 4U) {
                      _L___347: /* CIL Label */ 
                      tmp___129 = 1;
                    } else {
                      goto _L___346;
                    }
                  }
                } else {
                  _L___346: /* CIL Label */ 
                  tmp___129 = 0;
                }
              }
              if (tmp___129) {
                if (__s1_len___0 < __s2_len___0) {
                  tmp___102 = __s1_len___0;
                } else {
                  tmp___102 = __s2_len___0;
                }
                tmp___101 = memcmp((void const   *)((char const   *)(resolved_path)),
                                   (void const   *)((char const   *)pwsp->wsconfig.web_root),
                                   tmp___102 + 1U);
              } else {
                goto _L___350;
              }
            } else {
              goto _L___350;
            }
          } else {
            _L___350: /* CIL Label */ 
            tmp___126 = __builtin_constant_p(resolved_path);
            if (tmp___126) {
              if ((unsigned int )((void const   *)(resolved_path + 1)) - (unsigned int )((void const   *)(resolved_path)) ==
                  1U) {
                __s1_len___0 = strlen((char const   *)(resolved_path));
                if (__s1_len___0 < 4U) {
                  tmp___117 = __builtin_constant_p(pwsp->wsconfig.web_root);
                  if (tmp___117) {
                    if ((unsigned int )((void const   *)(pwsp->wsconfig.web_root +
                                                         1)) - (unsigned int )((void const   *)pwsp->wsconfig.web_root) ==
                        1U) {
                      __result___85 = (int )((int const   )(*((unsigned char const   *)((char const   *)(resolved_path)) +
                                                              0)) - (int const   )(*((unsigned char const   *)((char const   *)pwsp->wsconfig.web_root) +
                                                                                     0)));
                      if (__s1_len___0 > 0U) {
                        if (__result___85 == 0) {
                          __result___85 = (int )((int const   )(*((unsigned char const   *)((char const   *)(resolved_path)) +
                                                                  1)) - (int const   )(*((unsigned char const   *)((char const   *)pwsp->wsconfig.web_root) +
                                                                                         1)));
                          if (__s1_len___0 > 1U) {
                            if (__result___85 == 0) {
                              __result___85 = (int )((int const   )(*((unsigned char const   *)((char const   *)(resolved_path)) +
                                                                      2)) - (int const   )(*((unsigned char const   *)((char const   *)pwsp->wsconfig.web_root) +
                                                                                             2)));
                              if (__s1_len___0 > 2U) {
                                if (__result___85 == 0) {
                                  __result___85 = (int )((int const   )(*((unsigned char const   *)((char const   *)(resolved_path)) +
                                                                          3)) - (int const   )(*((unsigned char const   *)((char const   *)pwsp->wsconfig.web_root) +
                                                                                                 3)));
                                } else {
                                  goto _L___309;
                                }
                              } else {
                                _L___309: /* CIL Label */ ;
                              }
                            } else {
                              goto _L___310;
                            }
                          } else {
                            _L___310: /* CIL Label */ ;
                          }
                        } else {
                          goto _L___311;
                        }
                      } else {
                        _L___311: /* CIL Label */ ;
                      }
                      tmp___101 = __result___85;
                    } else {
                      goto _L___315;
                    }
                  } else {
                    _L___315: /* CIL Label */ 
                    __s2___14 = (unsigned char const   *)((char const   *)pwsp->wsconfig.web_root);
                    __result___86 = (int )((int const   )(*((unsigned char const   *)((char const   *)(resolved_path)) +
                                                            0)) - (int const   )(*(__s2___14 +
                                                                                   0)));
                    if (__s1_len___0 > 0U) {
                      if (__result___86 == 0) {
                        __result___86 = (int )((int const   )(*((unsigned char const   *)((char const   *)(resolved_path)) +
                                                                1)) - (int const   )(*(__s2___14 +
                                                                                       1)));
                        if (__s1_len___0 > 1U) {
                          if (__result___86 == 0) {
                            __result___86 = (int )((int const   )(*((unsigned char const   *)((char const   *)(resolved_path)) +
                                                                    2)) - (int const   )(*(__s2___14 +
                                                                                           2)));
                            if (__s1_len___0 > 2U) {
                              if (__result___86 == 0) {
                                __result___86 = (int )((int const   )(*((unsigned char const   *)((char const   *)(resolved_path)) +
                                                                        3)) - (int const   )(*(__s2___14 +
                                                                                               3)));
                              } else {
                                goto _L___312;
                              }
                            } else {
                              _L___312: /* CIL Label */ ;
                            }
                          } else {
                            goto _L___313;
                          }
                        } else {
                          _L___313: /* CIL Label */ ;
                        }
                      } else {
                        goto _L___314;
                      }
                    } else {
                      _L___314: /* CIL Label */ ;
                    }
                    tmp___101 = __result___86;
                  }
                } else {
                  goto _L___345;
                }
              } else {
                goto _L___345;
              }
            } else {
              _L___345: /* CIL Label */ 
              tmp___125 = __builtin_constant_p(pwsp->wsconfig.web_root);
              if (tmp___125) {
                if ((unsigned int )((void const   *)(pwsp->wsconfig.web_root + 1)) -
                    (unsigned int )((void const   *)pwsp->wsconfig.web_root) == 1U) {
                  __s2_len___0 = strlen((char const   *)pwsp->wsconfig.web_root);
                  if (__s2_len___0 < 4U) {
                    tmp___124 = __builtin_constant_p(resolved_path);
                    if (tmp___124) {
                      if ((unsigned int )((void const   *)(resolved_path + 1)) - (unsigned int )((void const   *)(resolved_path)) ==
                          1U) {
                        __result___93 = (int )((int const   )(*((unsigned char const   *)((char const   *)(resolved_path)) +
                                                                0)) - (int const   )(*((unsigned char const   *)((char const   *)pwsp->wsconfig.web_root) +
                                                                                       0)));
                        if (__s2_len___0 > 0U) {
                          if (__result___93 == 0) {
                            __result___93 = (int )((int const   )(*((unsigned char const   *)((char const   *)(resolved_path)) +
                                                                    1)) - (int const   )(*((unsigned char const   *)((char const   *)pwsp->wsconfig.web_root) +
                                                                                           1)));
                            if (__s2_len___0 > 1U) {
                              if (__result___93 == 0) {
                                __result___93 = (int )((int const   )(*((unsigned char const   *)((char const   *)(resolved_path)) +
                                                                        2)) - (int const   )(*((unsigned char const   *)((char const   *)pwsp->wsconfig.web_root) +
                                                                                               2)));
                                if (__s2_len___0 > 2U) {
                                  if (__result___93 == 0) {
                                    __result___93 = (int )((int const   )(*((unsigned char const   *)((char const   *)(resolved_path)) +
                                                                            3)) -
                                                           (int const   )(*((unsigned char const   *)((char const   *)pwsp->wsconfig.web_root) +
                                                                            3)));
                                  } else {
                                    goto _L___335;
                                  }
                                } else {
                                  _L___335: /* CIL Label */ ;
                                }
                              } else {
                                goto _L___336;
                              }
                            } else {
                              _L___336: /* CIL Label */ ;
                            }
                          } else {
                            goto _L___337;
                          }
                        } else {
                          _L___337: /* CIL Label */ ;
                        }
                        tmp___101 = __result___93;
                      } else {
                        goto _L___341;
                      }
                    } else {
                      _L___341: /* CIL Label */ 
                      __s1___30 = (unsigned char const   *)((char const   *)(resolved_path));
                      __result___94 = (int )((int const   )(*(__s1___30 + 0)) - (int const   )(*((unsigned char const   *)((char const   *)pwsp->wsconfig.web_root) +
                                                                                                 0)));
                      if (__s2_len___0 > 0U) {
                        if (__result___94 == 0) {
                          __result___94 = (int )((int const   )(*(__s1___30 + 1)) -
                                                 (int const   )(*((unsigned char const   *)((char const   *)pwsp->wsconfig.web_root) +
                                                                  1)));
                          if (__s2_len___0 > 1U) {
                            if (__result___94 == 0) {
                              __result___94 = (int )((int const   )(*(__s1___30 +
                                                                      2)) - (int const   )(*((unsigned char const   *)((char const   *)pwsp->wsconfig.web_root) +
                                                                                             2)));
                              if (__s2_len___0 > 2U) {
                                if (__result___94 == 0) {
                                  __result___94 = (int )((int const   )(*(__s1___30 +
                                                                          3)) - (int const   )(*((unsigned char const   *)((char const   *)pwsp->wsconfig.web_root) +
                                                                                                 3)));
                                } else {
                                  goto _L___338;
                                }
                              } else {
                                _L___338: /* CIL Label */ ;
                              }
                            } else {
                              goto _L___339;
                            }
                          } else {
                            _L___339: /* CIL Label */ ;
                          }
                        } else {
                          goto _L___340;
                        }
                      } else {
                        _L___340: /* CIL Label */ ;
                      }
                      tmp___101 = __result___94;
                    }
                  } else {
                    goto _L___343;
                  }
                } else {
                  goto _L___343;
                }
              } else {
                _L___343: /* CIL Label */ 
                tmp___101 = strcmp((char const   *)(resolved_path), (char const   *)pwsp->wsconfig.web_root);
              }
            }
          }
          tmp___70 = tmp___101;
        } else {
          goto _L___353;
        }
      } else {
        _L___353: /* CIL Label */ 
        goto _L___351;
      }
    }
  } else {
    _L___351: /* CIL Label */ 
    tmp___130 = strlen((char const   *)pwsp->wsconfig.web_root);
    tmp___70 = strncmp((char const   *)(resolved_path), (char const   *)pwsp->wsconfig.web_root,
                       tmp___130);
  }
  if (tmp___70) {
    pwsc->error = 22;
    err_log(2, 2U, (char *)"Exiting ws_defaulthandler: Thread %d: Requested file %s out of root\n",
            pwsc->threadno, resolved_path);
    ws_returnerror(pwsc, 403, (char *)"Forbidden");
    ws_close(pwsc);
    return;
  }
  file_fd = open((char const   *)(resolved_path), 0);
  if (file_fd == -1) {
    tmp___139 = __errno_location();
    pwsc->error = (*tmp___139);
    tmp___140 = __errno_location();
    tmp___141 = strerror((*tmp___140));
    err_log(2, 2U, (char *)"Exiting ws_defaulthandler: Thread %d: Error opening %s: %s\n",
            pwsc->threadno, resolved_path, tmp___141);
    ws_returnerror(pwsc, 404, (char *)"Not found");
    ws_close(pwsc);
    return;
  }
  len = lseek(file_fd, 0L, 2);
  if (len != -1L) {
    err_log(9, 2U, (char *)"Length of file is %ld\n", len);
    ws_addarg(& pwsc->response_headers, (char *)"Content-Length", (char *)"%ld", len);
    lseek(file_fd, 0L, 0);
  }
  ws_writefd(pwsc, (char *)"HTTP/1.1 200 OK\r\n");
  ws_emitheaders(pwsc);
  copyfile(file_fd, pwsc->fd);
  r_close(file_fd);
  err_log(9, 2U, (char *)"Exiting ws_defaulthandler: Thread %d: Served successfully\n",
          pwsc->threadno);
  return;
}
}
int ws_testrequestheader(WS_CONNINFO *pwsc , char *header , char *value ) 
{ int tmp ;

  {
  tmp = ws_testarg(& pwsc->request_headers, header, value);
  return (tmp);
}
}
int ws_testarg(ARGLIST *root , char *key , char *value ) 
{ char *retval ;
  int tmp ;
  int tmp___0 ;

  {
  err_log(9, 2U, (char *)"Checking to see if %s matches %s\n", key, value);
  retval = ws_getarg(root, key);
  if (! retval) {
    return (0);
  }
  tmp = strcasecmp((char const   *)value, (char const   *)retval);
  if (tmp) {
    tmp___0 = 0;
  } else {
    tmp___0 = 1;
  }
  return (tmp___0);
}
}
char *ws_getarg(ARGLIST *root , char *key ) 
{ ARGLIST *pcurrent ;
  int tmp ;

  {
  pcurrent = root->next;
  while (1) {
    if (pcurrent) {
      tmp = strcasecmp((char const   *)pcurrent->key, (char const   *)key);
      if (! tmp) {
        goto _L;
      }
    } else {
      _L: /* CIL Label */ 
      break;
    }
    pcurrent = pcurrent->next;
  }
  if (pcurrent) {
    return (pcurrent->value);
  }
  return ((char *)((void *)0));
}
}
int ws_addarg(ARGLIST *root , char *key , char *fmt  , ...) 
{ char *newkey ;
  char *newvalue ;
  ARGLIST *pnew ;
  ARGLIST *current ;
  va_list ap ;
  char value[2048] ;
  size_t __len___2 ;
  size_t tmp___15 ;
  char *__retval___2 ;
  char *tmp___16 ;
  int tmp___18 ;
  size_t __len___6 ;
  size_t tmp___35 ;
  char *__retval___6 ;
  char *tmp___36 ;
  int tmp___38 ;
  size_t __s1_len ;
  size_t __s2_len ;
  int tmp___70 ;
  size_t tmp___71 ;
  register int __result___37 ;
  unsigned char const   *__s2___6 ;
  register int __result___38 ;
  int tmp___86 ;
  register int __result___45 ;
  unsigned char const   *__s1___14 ;
  register int __result___46 ;
  int tmp___93 ;
  int tmp___94 ;
  int tmp___95 ;
  int tmp___96 ;
  int tmp___97 ;
  int tmp___98 ;

  {
  __builtin_stdarg_start(ap, fmt);
  vsnprintf((char * __restrict  )(value), sizeof(value), (char const   * __restrict  )fmt,
            ap);
  __builtin_va_end(ap);
  tmp___18 = __builtin_constant_p(key);
  if (tmp___18) {
    if ((unsigned int )((void const   *)(key + 1)) - (unsigned int )((void const   *)key) ==
        1U) {
      if ((int const   )(*((char const   *)key + 0)) == 0) {
        newkey = (char *)calloc(1U, 1U);
      } else {
        tmp___15 = strlen((char const   *)key);
        __len___2 = tmp___15 + 1U;
        tmp___16 = (char *)malloc(__len___2);
        __retval___2 = tmp___16;
        if ((unsigned int )__retval___2 != (unsigned int )((void *)0)) {
          __retval___2 = (char *)memcpy((void * __restrict  )__retval___2, (void const   * __restrict  )key,
                                        __len___2);
        }
        newkey = __retval___2;
      }
    } else {
      goto _L;
    }
  } else {
    _L: /* CIL Label */ 
    newkey = __strdup((char const   *)key);
  }
  tmp___38 = __builtin_constant_p(value);
  if (tmp___38) {
    if ((unsigned int )((void const   *)(value + 1)) - (unsigned int )((void const   *)(value)) ==
        1U) {
      if ((int const   )(*((char const   *)(value) + 0)) == 0) {
        newvalue = (char *)calloc(1U, 1U);
      } else {
        tmp___35 = strlen((char const   *)(value));
        __len___6 = tmp___35 + 1U;
        tmp___36 = (char *)malloc(__len___6);
        __retval___6 = tmp___36;
        if ((unsigned int )__retval___6 != (unsigned int )((void *)0)) {
          __retval___6 = (char *)memcpy((void * __restrict  )__retval___6, (void const   * __restrict  )(value),
                                        __len___6);
        }
        newvalue = __retval___6;
      }
    } else {
      goto _L___0;
    }
  } else {
    _L___0: /* CIL Label */ 
    newvalue = __strdup((char const   *)(value));
  }
  pnew = (ARGLIST *)malloc(sizeof(ARGLIST ));
  if (! pnew) {
    goto _L___2;
  } else {
    if (! newkey) {
      _L___2: /* CIL Label */ 
      goto _L___1;
    } else {
      if (! newvalue) {
        _L___1: /* CIL Label */ 
        return (-1);
      }
    }
  }
  pnew->key = newkey;
  pnew->value = newvalue;
  current = root->next;
  while (current) {
    tmp___96 = __builtin_constant_p(current->key);
    if (tmp___96) {
      tmp___97 = __builtin_constant_p(key);
      if (tmp___97) {
        __s1_len = strlen((char const   *)current->key);
        __s2_len = strlen((char const   *)key);
        if (! ((unsigned int )((void const   *)(current->key + 1)) - (unsigned int )((void const   *)current->key) ==
               1U)) {
          goto _L___176;
        } else {
          if (__s1_len >= 4U) {
            _L___176: /* CIL Label */ 
            if (! ((unsigned int )((void const   *)(key + 1)) - (unsigned int )((void const   *)key) ==
                   1U)) {
              goto _L___175;
            } else {
              if (__s2_len >= 4U) {
                _L___175: /* CIL Label */ 
                tmp___98 = 1;
              } else {
                goto _L___174;
              }
            }
          } else {
            _L___174: /* CIL Label */ 
            tmp___98 = 0;
          }
        }
        if (tmp___98) {
          if (__s1_len < __s2_len) {
            tmp___71 = __s1_len;
          } else {
            tmp___71 = __s2_len;
          }
          tmp___70 = memcmp((void const   *)((char const   *)current->key), (void const   *)((char const   *)key),
                            tmp___71 + 1U);
        } else {
          goto _L___178;
        }
      } else {
        goto _L___178;
      }
    } else {
      _L___178: /* CIL Label */ 
      tmp___95 = __builtin_constant_p(current->key);
      if (tmp___95) {
        if ((unsigned int )((void const   *)(current->key + 1)) - (unsigned int )((void const   *)current->key) ==
            1U) {
          __s1_len = strlen((char const   *)current->key);
          if (__s1_len < 4U) {
            tmp___86 = __builtin_constant_p(key);
            if (tmp___86) {
              if ((unsigned int )((void const   *)(key + 1)) - (unsigned int )((void const   *)key) ==
                  1U) {
                __result___37 = (int )((int const   )(*((unsigned char const   *)((char const   *)current->key) +
                                                        0)) - (int const   )(*((unsigned char const   *)((char const   *)key) +
                                                                               0)));
                if (__s1_len > 0U) {
                  if (__result___37 == 0) {
                    __result___37 = (int )((int const   )(*((unsigned char const   *)((char const   *)current->key) +
                                                            1)) - (int const   )(*((unsigned char const   *)((char const   *)key) +
                                                                                   1)));
                    if (__s1_len > 1U) {
                      if (__result___37 == 0) {
                        __result___37 = (int )((int const   )(*((unsigned char const   *)((char const   *)current->key) +
                                                                2)) - (int const   )(*((unsigned char const   *)((char const   *)key) +
                                                                                       2)));
                        if (__s1_len > 2U) {
                          if (__result___37 == 0) {
                            __result___37 = (int )((int const   )(*((unsigned char const   *)((char const   *)current->key) +
                                                                    3)) - (int const   )(*((unsigned char const   *)((char const   *)key) +
                                                                                           3)));
                          } else {
                            goto _L___137;
                          }
                        } else {
                          _L___137: /* CIL Label */ ;
                        }
                      } else {
                        goto _L___138;
                      }
                    } else {
                      _L___138: /* CIL Label */ ;
                    }
                  } else {
                    goto _L___139;
                  }
                } else {
                  _L___139: /* CIL Label */ ;
                }
                tmp___70 = __result___37;
              } else {
                goto _L___143;
              }
            } else {
              _L___143: /* CIL Label */ 
              __s2___6 = (unsigned char const   *)((char const   *)key);
              __result___38 = (int )((int const   )(*((unsigned char const   *)((char const   *)current->key) +
                                                      0)) - (int const   )(*(__s2___6 +
                                                                             0)));
              if (__s1_len > 0U) {
                if (__result___38 == 0) {
                  __result___38 = (int )((int const   )(*((unsigned char const   *)((char const   *)current->key) +
                                                          1)) - (int const   )(*(__s2___6 +
                                                                                 1)));
                  if (__s1_len > 1U) {
                    if (__result___38 == 0) {
                      __result___38 = (int )((int const   )(*((unsigned char const   *)((char const   *)current->key) +
                                                              2)) - (int const   )(*(__s2___6 +
                                                                                     2)));
                      if (__s1_len > 2U) {
                        if (__result___38 == 0) {
                          __result___38 = (int )((int const   )(*((unsigned char const   *)((char const   *)current->key) +
                                                                  3)) - (int const   )(*(__s2___6 +
                                                                                         3)));
                        } else {
                          goto _L___140;
                        }
                      } else {
                        _L___140: /* CIL Label */ ;
                      }
                    } else {
                      goto _L___141;
                    }
                  } else {
                    _L___141: /* CIL Label */ ;
                  }
                } else {
                  goto _L___142;
                }
              } else {
                _L___142: /* CIL Label */ ;
              }
              tmp___70 = __result___38;
            }
          } else {
            goto _L___173;
          }
        } else {
          goto _L___173;
        }
      } else {
        _L___173: /* CIL Label */ 
        tmp___94 = __builtin_constant_p(key);
        if (tmp___94) {
          if ((unsigned int )((void const   *)(key + 1)) - (unsigned int )((void const   *)key) ==
              1U) {
            __s2_len = strlen((char const   *)key);
            if (__s2_len < 4U) {
              tmp___93 = __builtin_constant_p(current->key);
              if (tmp___93) {
                if ((unsigned int )((void const   *)(current->key + 1)) - (unsigned int )((void const   *)current->key) ==
                    1U) {
                  __result___45 = (int )((int const   )(*((unsigned char const   *)((char const   *)current->key) +
                                                          0)) - (int const   )(*((unsigned char const   *)((char const   *)key) +
                                                                                 0)));
                  if (__s2_len > 0U) {
                    if (__result___45 == 0) {
                      __result___45 = (int )((int const   )(*((unsigned char const   *)((char const   *)current->key) +
                                                              1)) - (int const   )(*((unsigned char const   *)((char const   *)key) +
                                                                                     1)));
                      if (__s2_len > 1U) {
                        if (__result___45 == 0) {
                          __result___45 = (int )((int const   )(*((unsigned char const   *)((char const   *)current->key) +
                                                                  2)) - (int const   )(*((unsigned char const   *)((char const   *)key) +
                                                                                         2)));
                          if (__s2_len > 2U) {
                            if (__result___45 == 0) {
                              __result___45 = (int )((int const   )(*((unsigned char const   *)((char const   *)current->key) +
                                                                      3)) - (int const   )(*((unsigned char const   *)((char const   *)key) +
                                                                                             3)));
                            } else {
                              goto _L___163;
                            }
                          } else {
                            _L___163: /* CIL Label */ ;
                          }
                        } else {
                          goto _L___164;
                        }
                      } else {
                        _L___164: /* CIL Label */ ;
                      }
                    } else {
                      goto _L___165;
                    }
                  } else {
                    _L___165: /* CIL Label */ ;
                  }
                  tmp___70 = __result___45;
                } else {
                  goto _L___169;
                }
              } else {
                _L___169: /* CIL Label */ 
                __s1___14 = (unsigned char const   *)((char const   *)current->key);
                __result___46 = (int )((int const   )(*(__s1___14 + 0)) - (int const   )(*((unsigned char const   *)((char const   *)key) +
                                                                                           0)));
                if (__s2_len > 0U) {
                  if (__result___46 == 0) {
                    __result___46 = (int )((int const   )(*(__s1___14 + 1)) - (int const   )(*((unsigned char const   *)((char const   *)key) +
                                                                                               1)));
                    if (__s2_len > 1U) {
                      if (__result___46 == 0) {
                        __result___46 = (int )((int const   )(*(__s1___14 + 2)) -
                                               (int const   )(*((unsigned char const   *)((char const   *)key) +
                                                                2)));
                        if (__s2_len > 2U) {
                          if (__result___46 == 0) {
                            __result___46 = (int )((int const   )(*(__s1___14 + 3)) -
                                                   (int const   )(*((unsigned char const   *)((char const   *)key) +
                                                                    3)));
                          } else {
                            goto _L___166;
                          }
                        } else {
                          _L___166: /* CIL Label */ ;
                        }
                      } else {
                        goto _L___167;
                      }
                    } else {
                      _L___167: /* CIL Label */ ;
                    }
                  } else {
                    goto _L___168;
                  }
                } else {
                  _L___168: /* CIL Label */ ;
                }
                tmp___70 = __result___46;
              }
            } else {
              goto _L___171;
            }
          } else {
            goto _L___171;
          }
        } else {
          _L___171: /* CIL Label */ 
          tmp___70 = strcmp((char const   *)current->key, (char const   *)key);
        }
      }
    }
    if (! tmp___70) {
      err_log(9, 2U, (char *)"Updating %s from %s to %s\n", key, current->value, value);
      free((void *)current->value);
      current->value = newvalue;
      free((void *)newkey);
      free((void *)pnew);
      return (0);
    }
    current = current->next;
  }
  pnew->next = root->next;
  err_log(9, 2U, (char *)"Added *%s=%s*\n", newkey, newvalue);
  root->next = pnew;
  return (0);
}
}
char *ws_urldecode(char *string , int space_as_plus ) 
{ char *pnew ;
  char *src ;
  char *dst ;
  int val ;
  size_t tmp ;
  char *tmp___1 ;
  char *tmp___2 ;
  int __res ;
  int __c ;
  __int32_t const   **tmp___4 ;
  int tmp___5 ;
  __int32_t const   **tmp___6 ;
  int __res___0 ;
  int __c___0 ;
  __int32_t const   **tmp___8 ;
  int tmp___9 ;
  __int32_t const   **tmp___10 ;
  int __res___1 ;
  int __c___1 ;
  __int32_t const   **tmp___12 ;
  int tmp___13 ;
  __int32_t const   **tmp___14 ;
  int __res___2 ;
  int __c___2 ;
  __int32_t const   **tmp___16 ;
  int tmp___17 ;
  __int32_t const   **tmp___18 ;
  int __res___3 ;
  int __c___3 ;
  __int32_t const   **tmp___20 ;
  int tmp___21 ;
  __int32_t const   **tmp___22 ;
  int __res___4 ;
  int __c___4 ;
  __int32_t const   **tmp___24 ;
  int tmp___25 ;
  __int32_t const   **tmp___26 ;
  char *tmp___27 ;
  char *tmp___28 ;
  char *tmp___29 ;

  {
  val = 0;
  tmp = strlen((char const   *)string);
  pnew = (char *)malloc(tmp + 1U);
  if (! pnew) {
    return ((char *)((void *)0));
  }
  src = string;
  dst = pnew;
  while ((*src)) {
    switch ((int )(*src)) {
    case 43: ;
    if (space_as_plus) {
      tmp___1 = dst;
      dst ++;
      (*tmp___1) = (char )' ';
    } else {
      tmp___2 = dst;
      dst ++;
      (*tmp___2) = (*src);
    }
    src ++;
    break;
    case 37: 
    src ++;
    if ((*src)) {
      if ((int )(*src) <= 57) {
        if ((int )(*src) >= 48) {
          val = (int )(*src) - 48;
        } else {
          goto _L___3;
        }
      } else {
        _L___3: /* CIL Label */ 
        if (sizeof((*src)) > 1U) {
          tmp___9 = __builtin_constant_p((*src));
          if (tmp___9) {
            __c___0 = (int )(*src);
            if (__c___0 < -128) {
              goto _L___0;
            } else {
              if (__c___0 > 255) {
                _L___0: /* CIL Label */ 
                __res___0 = __c___0;
              } else {
                tmp___8 = __ctype_tolower_loc();
                __res___0 = (*((*tmp___8) + __c___0));
              }
            }
          } else {
            __res___0 = tolower__extinline((int )(*src));
          }
        } else {
          tmp___10 = __ctype_tolower_loc();
          __res___0 = (*((*tmp___10) + (int )(*src)));
        }
        if (__res___0 <= 102) {
          if (sizeof((*src)) > 1U) {
            tmp___13 = __builtin_constant_p((*src));
            if (tmp___13) {
              __c___1 = (int )(*src);
              if (__c___1 < -128) {
                goto _L___1;
              } else {
                if (__c___1 > 255) {
                  _L___1: /* CIL Label */ 
                  __res___1 = __c___1;
                } else {
                  tmp___12 = __ctype_tolower_loc();
                  __res___1 = (*((*tmp___12) + __c___1));
                }
              }
            } else {
              __res___1 = tolower__extinline((int )(*src));
            }
          } else {
            tmp___14 = __ctype_tolower_loc();
            __res___1 = (*((*tmp___14) + (int )(*src)));
          }
          if (__res___1 >= 97) {
            if (sizeof((*src)) > 1U) {
              tmp___5 = __builtin_constant_p((*src));
              if (tmp___5) {
                __c = (int )(*src);
                if (__c < -128) {
                  goto _L;
                } else {
                  if (__c > 255) {
                    _L: /* CIL Label */ 
                    __res = __c;
                  } else {
                    tmp___4 = __ctype_tolower_loc();
                    __res = (*((*tmp___4) + __c));
                  }
                }
              } else {
                __res = tolower__extinline((int )(*src));
              }
            } else {
              tmp___6 = __ctype_tolower_loc();
              __res = (*((*tmp___6) + (int )(*src)));
            }
            val = 10 + (__res - 97);
          } else {
            goto _L___2;
          }
        } else {
          _L___2: /* CIL Label */ ;
        }
      }
      src ++;
    }
    if ((*src)) {
      val *= 16;
      if ((int )(*src) <= 57) {
        if ((int )(*src) >= 48) {
          val += (int )(*src) - 48;
        } else {
          goto _L___8;
        }
      } else {
        _L___8: /* CIL Label */ 
        if (sizeof((*src)) > 1U) {
          tmp___21 = __builtin_constant_p((*src));
          if (tmp___21) {
            __c___3 = (int )(*src);
            if (__c___3 < -128) {
              goto _L___5;
            } else {
              if (__c___3 > 255) {
                _L___5: /* CIL Label */ 
                __res___3 = __c___3;
              } else {
                tmp___20 = __ctype_tolower_loc();
                __res___3 = (*((*tmp___20) + __c___3));
              }
            }
          } else {
            __res___3 = tolower__extinline((int )(*src));
          }
        } else {
          tmp___22 = __ctype_tolower_loc();
          __res___3 = (*((*tmp___22) + (int )(*src)));
        }
        if (__res___3 <= 102) {
          if (sizeof((*src)) > 1U) {
            tmp___25 = __builtin_constant_p((*src));
            if (tmp___25) {
              __c___4 = (int )(*src);
              if (__c___4 < -128) {
                goto _L___6;
              } else {
                if (__c___4 > 255) {
                  _L___6: /* CIL Label */ 
                  __res___4 = __c___4;
                } else {
                  tmp___24 = __ctype_tolower_loc();
                  __res___4 = (*((*tmp___24) + __c___4));
                }
              }
            } else {
              __res___4 = tolower__extinline((int )(*src));
            }
          } else {
            tmp___26 = __ctype_tolower_loc();
            __res___4 = (*((*tmp___26) + (int )(*src)));
          }
          if (__res___4 >= 97) {
            if (sizeof((*src)) > 1U) {
              tmp___17 = __builtin_constant_p((*src));
              if (tmp___17) {
                __c___2 = (int )(*src);
                if (__c___2 < -128) {
                  goto _L___4;
                } else {
                  if (__c___2 > 255) {
                    _L___4: /* CIL Label */ 
                    __res___2 = __c___2;
                  } else {
                    tmp___16 = __ctype_tolower_loc();
                    __res___2 = (*((*tmp___16) + __c___2));
                  }
                }
              } else {
                __res___2 = tolower__extinline((int )(*src));
              }
            } else {
              tmp___18 = __ctype_tolower_loc();
              __res___2 = (*((*tmp___18) + (int )(*src)));
            }
            val += 10 + (__res___2 - 97);
          } else {
            goto _L___7;
          }
        } else {
          _L___7: /* CIL Label */ ;
        }
      }
      src ++;
    }
    tmp___27 = dst;
    dst ++;
    (*tmp___27) = (char )val;
    break;
    default: 
    tmp___28 = dst;
    dst ++;
    tmp___29 = src;
    src ++;
    (*tmp___28) = (*tmp___29);
    break;
    }
  }
  (*dst) = (char )'\000';
  return (pnew);
}
}
int ws_registerhandler(WSHANDLE ws , char *regex , void (*handler)(WS_CONNINFO * ) ,
                       int (*auth)(char * , char * ) , int addheaders ) 
{ WS_HANDLER *phandler ;
  WS_PRIVATE *pwsp ;
  int *tmp___0 ;
  int tmp___1 ;

  {
  pwsp = (WS_PRIVATE *)ws;
  phandler = (WS_HANDLER *)malloc(sizeof(WS_HANDLER ));
  if (! phandler) {
    return (-1);
  }
  tmp___1 = regcomp((regex_t * __restrict  )(& phandler->regex), (char const   * __restrict  )regex,
                    9);
  if (tmp___1) {
    free((void *)phandler);
    tmp___0 = __errno_location();
    (*tmp___0) = 22;
    return (-1);
  }
  phandler->req_handler = handler;
  phandler->auth_handler = auth;
  phandler->addheaders = addheaders;
  ws_lock_unsafe();
  phandler->next = pwsp->handlers.next;
  pwsp->handlers.next = phandler;
  ws_unlock_unsafe();
  return (0);
}
}
int ws_findhandler(WS_PRIVATE *pwsp , WS_CONNINFO *pwsc , void (**preq)(WS_CONNINFO * ) ,
                   int (**pauth)(char * , char * ) , int *addheaders ) 
{ WS_HANDLER *phandler ;
  int tmp ;

  {
  phandler = pwsp->handlers.next;
  ws_lock_unsafe();
  (*preq) = (void (*)(WS_CONNINFO * ))((void *)0);
  err_log(9, 2U, (char *)"Thread %d: Preparing to find handler\n", pwsc->threadno);
  while (phandler) {
    tmp = regexec((regex_t const   * __restrict  )(& phandler->regex), (char const   * __restrict  )pwsc->uri,
                  0U, (regmatch_t * __restrict  )((void *)0), 0);
    if (! tmp) {
      err_log(9, 2U, (char *)"Thread %d: URI Match!\n", pwsc->threadno);
      (*preq) = phandler->req_handler;
      (*pauth) = phandler->auth_handler;
      (*addheaders) = phandler->addheaders;
      ws_unlock_unsafe();
      return (0);
    }
    phandler = phandler->next;
  }
  ws_unlock_unsafe();
  return (-1);
}
}
static char ws_xlat[256]  ;
static int ws_xlat_init  =    0;
int ws_decodepassword(char *header , char **username , char **password ) 
{ int index___0 ;
  int len ;
  int rack ;
  int pads ;
  unsigned char *decodebuffer ;
  unsigned char *pin ;
  unsigned char *pout ;
  int lookup___1 ;
  int tmp ;
  void *__s___0 ;
  union __anonunion___u_36 *__u ;
  __uint8_t __c ;
  void *__s___1 ;
  int tmp___0 ;
  int tmp___1 ;
  size_t tmp___2 ;
  void *__s___2 ;
  int tmp___5 ;
  void *__s___3 ;
  union __anonunion___u_37 *__u___0 ;
  __uint8_t __c___0 ;
  unsigned int tmp___6 ;
  void *__s___4 ;
  size_t tmp___7 ;
  size_t tmp___8 ;
  int tmp___9 ;
  size_t tmp___10 ;
  char __r0 ;
  char __r1 ;
  char __r2 ;

  {
  rack = 0;
  pads = 0;
  (*username) = (char *)((void *)0);
  (*password) = (char *)((void *)0);
  tmp = ws_lock_unsafe();
  if (tmp == -1) {
    return (-1);
  }
  if (! ws_xlat_init) {
    ws_xlat_init = 1;
    tmp___0 = __builtin_constant_p(sizeof(ws_xlat));
    if (tmp___0) {
      if (sizeof(ws_xlat) <= 16U) {
        if (sizeof(ws_xlat) == 1U) {
          __s___1 = (void *)((char *)(& ws_xlat));
          (*((__uint8_t *)__s___1)) = (unsigned char)255;
        } else {
          __s___0 = (void *)((char *)(& ws_xlat));
          __u = (union __anonunion___u_36 *)__s___0;
          __c = (unsigned char)255;
          switch ((int )sizeof(ws_xlat)) {
          case 15: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          __u = (union __anonunion___u_36 *)((void *)__u + 4);
          case 11: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          __u = (union __anonunion___u_36 *)((void *)__u + 4);
          case 7: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          __u = (union __anonunion___u_36 *)((void *)__u + 4);
          case 3: 
          __u->__usi = (unsigned short )((int )((unsigned short )__c) * 257);
          __u = (union __anonunion___u_36 *)((void *)__u + 2);
          __u->__uc = __c;
          break;
          case 14: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          __u = (union __anonunion___u_36 *)((void *)__u + 4);
          case 10: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          __u = (union __anonunion___u_36 *)((void *)__u + 4);
          case 6: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          __u = (union __anonunion___u_36 *)((void *)__u + 4);
          case 2: 
          __u->__usi = (unsigned short )((int )((unsigned short )__c) * 257);
          break;
          case 13: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          __u = (union __anonunion___u_36 *)((void *)__u + 4);
          case 9: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          __u = (union __anonunion___u_36 *)((void *)__u + 4);
          case 5: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          __u = (union __anonunion___u_36 *)((void *)__u + 4);
          case 1: 
          __u->__uc = __c;
          break;
          case 16: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          __u = (union __anonunion___u_36 *)((void *)__u + 4);
          case 12: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          __u = (union __anonunion___u_36 *)((void *)__u + 4);
          case 8: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          __u = (union __anonunion___u_36 *)((void *)__u + 4);
          case 4: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          case 0: ;
          break;
          }
        }
      } else {
        goto _L;
      }
    } else {
      _L: /* CIL Label */ 
      memset((void *)((char *)(& ws_xlat)), 255, sizeof(ws_xlat));
    }
    index___0 = 0;
    while (index___0 < 26) {
      ws_xlat[65 + index___0] = (char )index___0;
      ws_xlat[97 + index___0] = (char )(index___0 + 26);
      index___0 ++;
    }
    index___0 = 0;
    while (index___0 < 10) {
      ws_xlat[48 + index___0] = (char )(index___0 + 52);
      index___0 ++;
    }
    ws_xlat['+'] = (char)62;
    ws_xlat['/'] = (char)63;
  }
  tmp___1 = ws_unlock_unsafe();
  if (tmp___1 == -1) {
    return (-1);
  }
  while ((int )(*header) != 32) {
    header ++;
  }
  header ++;
  tmp___2 = strlen((char const   *)header);
  decodebuffer = (unsigned char *)malloc(tmp___2);
  if (! decodebuffer) {
    return (-1);
  }
  err_log(9, 2U, (char *)"Preparing to decode %s\n", header);
  tmp___8 = strlen((char const   *)header);
  tmp___9 = __builtin_constant_p(tmp___8);
  if (tmp___9) {
    tmp___10 = strlen((char const   *)header);
    if (tmp___10 <= 16U) {
      tmp___7 = strlen((char const   *)header);
      if (tmp___7 == 1U) {
        __s___4 = (void *)decodebuffer;
        (*((__uint8_t *)__s___4)) = (unsigned char)0;
      } else {
        __s___3 = (void *)decodebuffer;
        __u___0 = (union __anonunion___u_37 *)__s___3;
        __c___0 = (unsigned char)0;
        tmp___6 = strlen((char const   *)header);
        switch ((int )tmp___6) {
        case 15: 
        __u___0->__ui = (unsigned int )((int )__c___0 * 16843009);
        __u___0 = (union __anonunion___u_37 *)((void *)__u___0 + 4);
        case 11: 
        __u___0->__ui = (unsigned int )((int )__c___0 * 16843009);
        __u___0 = (union __anonunion___u_37 *)((void *)__u___0 + 4);
        case 7: 
        __u___0->__ui = (unsigned int )((int )__c___0 * 16843009);
        __u___0 = (union __anonunion___u_37 *)((void *)__u___0 + 4);
        case 3: 
        __u___0->__usi = (unsigned short )((int )((unsigned short )__c___0) * 257);
        __u___0 = (union __anonunion___u_37 *)((void *)__u___0 + 2);
        __u___0->__uc = __c___0;
        break;
        case 14: 
        __u___0->__ui = (unsigned int )((int )__c___0 * 16843009);
        __u___0 = (union __anonunion___u_37 *)((void *)__u___0 + 4);
        case 10: 
        __u___0->__ui = (unsigned int )((int )__c___0 * 16843009);
        __u___0 = (union __anonunion___u_37 *)((void *)__u___0 + 4);
        case 6: 
        __u___0->__ui = (unsigned int )((int )__c___0 * 16843009);
        __u___0 = (union __anonunion___u_37 *)((void *)__u___0 + 4);
        case 2: 
        __u___0->__usi = (unsigned short )((int )((unsigned short )__c___0) * 257);
        break;
        case 13: 
        __u___0->__ui = (unsigned int )((int )__c___0 * 16843009);
        __u___0 = (union __anonunion___u_37 *)((void *)__u___0 + 4);
        case 9: 
        __u___0->__ui = (unsigned int )((int )__c___0 * 16843009);
        __u___0 = (union __anonunion___u_37 *)((void *)__u___0 + 4);
        case 5: 
        __u___0->__ui = (unsigned int )((int )__c___0 * 16843009);
        __u___0 = (union __anonunion___u_37 *)((void *)__u___0 + 4);
        case 1: 
        __u___0->__uc = __c___0;
        break;
        case 16: 
        __u___0->__ui = (unsigned int )((int )__c___0 * 16843009);
        __u___0 = (union __anonunion___u_37 *)((void *)__u___0 + 4);
        case 12: 
        __u___0->__ui = (unsigned int )((int )__c___0 * 16843009);
        __u___0 = (union __anonunion___u_37 *)((void *)__u___0 + 4);
        case 8: 
        __u___0->__ui = (unsigned int )((int )__c___0 * 16843009);
        __u___0 = (union __anonunion___u_37 *)((void *)__u___0 + 4);
        case 4: 
        __u___0->__ui = (unsigned int )((int )__c___0 * 16843009);
        case 0: ;
        break;
        }
      }
    } else {
      goto _L___0;
    }
  } else {
    _L___0: /* CIL Label */ 
    __s___2 = (void *)decodebuffer;
    tmp___5 = (int )strlen((char const   *)header);
    __builtin_memset(__s___2, '\000', tmp___5);
  }
  len = 0;
  pout = decodebuffer;
  pin = (unsigned char *)header;
  while ((*(pin + rack))) {
    if ((int )(*(pin + rack)) != 61) {
      lookup___1 = (int )ws_xlat[(*(pin + rack))];
      if (lookup___1 == 255) {
        err_log(2, 2U, (char *)"Got garbage Authenticate header\n");
        return (-1);
      }
      switch (rack) {
      case 0: 
      (*(pout + 0)) = (unsigned char )(lookup___1 << 2);
      break;
      case 1: 
      (*(pout + 0)) = (unsigned char )((int )(*(pout + 0)) | (lookup___1 >> 4));
      (*(pout + 1)) = (unsigned char )(lookup___1 << 4);
      break;
      case 2: 
      (*(pout + 1)) = (unsigned char )((int )(*(pout + 1)) | (lookup___1 >> 2));
      (*(pout + 2)) = (unsigned char )(lookup___1 << 6);
      break;
      case 3: 
      (*(pout + 2)) = (unsigned char )((int )(*(pout + 2)) | lookup___1);
      break;
      }
      rack ++;
    } else {
      pads ++;
      rack ++;
    }
    if (rack == 4) {
      pin += 4;
      pout += 3;
      len += 3 - pads;
      rack = 0;
    }
  }
  err_log(9, 2U, (char *)"Decoded %s\n", decodebuffer);
  (*username) = (char *)decodebuffer;
  (*password) = (*username);
  if ((unsigned int )((void const   *)(":" + 1)) - (unsigned int )((void const   *)":") ==
      1U) {
    __r0 = (char )(*(":" + 0));
    if ((int const   )(*(":" + 0)) != 0) {
      __r1 = (char )(*(":" + 1));
      if ((int const   )(*(":" + 1)) == 0) {
        __strsep_1c__extinline(password, __r0);
      } else {
        __r2 = (char )(*(":" + 2));
        if ((int )__r2 == 0) {
          __strsep_2c__extinline(password, __r0, __r1);
        } else {
          if ((int const   )(*(":" + 3)) == 0) {
            __strsep_3c__extinline(password, __r0, __r1, __r2);
          } else {
            __strsep_g(password, ":");
          }
        }
      }
    } else {
      goto _L___1;
    }
  } else {
    _L___1: /* CIL Label */ 
    __strsep_g(password, ":");
  }
  err_log(9, 2U, (char *)"Decoded user=%s, pw=%s\n", (*username), (*password));
  return (0);
}
}
int ws_addresponseheader(WS_CONNINFO *pwsc , char *header , char *fmt  , ...) 
{ va_list ap ;
  char value[2048] ;
  int tmp ;

  {
  __builtin_stdarg_start(ap, fmt);
  vsnprintf((char * __restrict  )(value), sizeof(value), (char const   * __restrict  )fmt,
            ap);
  __builtin_va_end(ap);
  tmp = ws_addarg(& pwsc->response_headers, header, value);
  return (tmp);
}
}
char *ws_getvar(WS_CONNINFO *pwsc , char *var ) 
{ char *tmp ;

  {
  tmp = ws_getarg(& pwsc->request_vars, var);
  return (tmp);
}
}
char *ws_getrequestheader(WS_CONNINFO *pwsc , char *header ) 
{ char *tmp ;

  {
  tmp = ws_getarg(& pwsc->request_headers, header);
  return (tmp);
}
}
#pragma merger(0,"/tmp/cil-9Mb1UUPm.i","-g -g -O2")
extern char *ctime_r(time_t const   * __restrict  __timer , char * __restrict  __buf ) ;
ssize_t r_read(int fd , void *buf , size_t size ) ;
extern int sprintf(char * __restrict  __s , char const   * __restrict  __format  , ...) ;
extern char *fgets(char * __restrict  __s , int __n , FILE * __restrict  __stream ) ;
extern char *strcat(char * __restrict  __dest , char const   * __restrict  __src ) ;
extern int mkdir(char const   *__path , __mode_t __mode ) ;
extern int __xstat(int __ver , char const   *__filename , struct stat *__stat_buf ) ;
__inline static int stat__extinline(char const   *__path , struct stat *__statbuf ) 
{ int tmp ;

  {
  tmp = __xstat(3, __path, __statbuf);
  return (tmp);
}
}
int config_write(WS_CONNINFO *pwsc ) ;
int config_get_next_session(void) ;
int rend_running(void) ;
static void config_emit_string(WS_CONNINFO *pwsc , void *value , char *arg ) ;
static void config_emit_literal(WS_CONNINFO *pwsc , void *value , char *arg ) ;
static void config_emit_int(WS_CONNINFO *pwsc , void *value , char *arg ) ;
static void config_emit_include(WS_CONNINFO *pwsc , void *value , char *arg ) ;
static void config_emit_threadstatus(WS_CONNINFO *pwsc , void *value , char *arg ) ;
static void config_emit_ispage(WS_CONNINFO *pwsc , void *value , char *arg ) ;
static void config_emit_session_count(WS_CONNINFO *pwsc , void *value , char *arg ) ;
static void config_emit_service_status(WS_CONNINFO *pwsc , void *value , char *arg ) ;
static void config_emit_user(WS_CONNINFO *pwsc , void *value , char *arg ) ;
static void config_emit_readonly(WS_CONNINFO *pwsc , void *value , char *arg ) ;
static void config_emit_version(WS_CONNINFO *pwsc , void *value , char *arg ) ;
static void config_emit_system(WS_CONNINFO *pwsc , void *value , char *arg ) ;
static void config_emit_flags(WS_CONNINFO *pwsc , void *value , char *arg ) ;
static void config_subst_stream(WS_CONNINFO *pwsc , int fd_src ) ;
static int config_file_is_readonly(void) ;
static int config_mutex_lock(void) ;
static int config_mutex_unlock(void) ;
static int config_existdir(char *path ) ;
static int config_makedir(char *path ) ;
CONFIGELEMENT config_elements[30]  = 
  {      {1, 1, 0, 1, (char *)"runas", (void *)(& config.runas), & config_emit_string}, 
        {1,
      1, 0, 1, (char *)"web_root", (void *)(& config.web_root), & config_emit_string}, 
        {1,
      1, 0, 0, (char *)"port", (void *)(& config.port), & config_emit_int}, 
        {1, 1, 0, 1, (char *)"admin_pw", (void *)(& config.adminpassword), & config_emit_string}, 
        {1,
      1, 0, 1, (char *)"mp3_dir", (void *)(& config.mp3dir), & config_emit_string}, 
        {1,
      0, 0, 1, (char *)"db_dir", (void *)(& config.dbdir), & config_emit_string}, 
        {1, 1, 0, 1, (char *)"servername", (void *)(& config.servername), & config_emit_string}, 
        {1,
      0, 0, 0, (char *)"rescan_interval", (void *)(& config.rescan_interval), & config_emit_int}, 
        {1,
      0, 0, 0, (char *)"always_scan", (void *)(& config.always_scan), & config_emit_int}, 
        {1,
      0, 0, 0, (char *)"process_m3u", (void *)(& config.process_m3u), & config_emit_int}, 
        {1,
      0, 0, 0, (char *)"scan_type", (void *)(& config.scan_type), & config_emit_int}, 
        {1,
      0, 0, 0, (char *)"compress", (void *)(& config.compress), & config_emit_int}, 
        {1,
      0, 0, 1, (char *)"playlist", (void *)(& config.playlist), & config_emit_string}, 
        {1,
      0, 0, 1, (char *)"extensions", (void *)(& config.extensions), & config_emit_string}, 
        {1,
      0, 0, 1, (char *)"password", (void *)(& config.readpassword), & config_emit_string}, 
        {1,
      0, 0, 1, (char *)"logfile", (void *)(& config.logfile), & config_emit_string}, 
        {0,
      0, 0, 4, (char *)"release", (void *)"0.2.4", & config_emit_literal}, 
        {0, 0, 0, 4, (char *)"package", (void *)"mt-daapd", & config_emit_literal}, 
        {0, 0, 0, 4, (char *)"include", (void *)0, & config_emit_include}, 
        {0, 0, 0, 4, (char *)"threadstat", (void *)0, & config_emit_threadstatus}, 
        {0, 0, 0, 4, (char *)"ispage", (void *)0, & config_emit_ispage}, 
        {0, 0, 0, 4, (char *)"session-count", (void *)0, & config_emit_session_count}, 
        {0,
      0, 0, 4, (char *)"service-status", (void *)0, & config_emit_service_status}, 
        {0,
      0, 0, 4, (char *)"user", (void *)0, & config_emit_user}, 
        {0, 0, 0, 4, (char *)"readonly", (void *)0, & config_emit_readonly}, 
        {0, 0, 0, 4, (char *)"version", (void *)0, & config_emit_version}, 
        {0, 0, 0, 4, (char *)"system", (void *)0, & config_emit_system}, 
        {1, 0, 0, 1, (char *)"art_filename", (void *)(& config.artfilename), & config_emit_string}, 
        {0,
      0, 0, 4, (char *)"flags", (void *)0, & config_emit_flags}, 
        {-1, 1, 0, 1, (char *)((void *)0), (void *)0, (void (*)(WS_CONNINFO * , void * ,
                                                             char * ))((void *)0)}};
struct tag_scan_status scan_status  =    {0, 0, (char *)((void *)0), (char *)((void *)0), (struct tag_scan_status *)0};
struct __anonstruct_pthread_mutex_t_7 scan_mutex  =    {0, 0, (_pthread_descr )0, 0, {0L, 0}};
int config_session  =    0;
static int config_makedir(char *path ) 
{ char *token ;
  char *next_token ;
  char *pathdup ;
  char path_buffer[4096] ;
  int err ;
  size_t __len___2 ;
  size_t tmp___15 ;
  char *__retval___2 ;
  char *tmp___16 ;
  int tmp___18 ;
  void *__s ;
  void *__s___0 ;
  union __anonunion___u_53 *__u ;
  __uint8_t __c ;
  void *__s___1 ;
  int tmp___19 ;
  int *tmp___20 ;
  int *tmp___21 ;
  int tmp___22 ;
  int *tmp___23 ;
  int *tmp___24 ;
  size_t tmp___25 ;
  size_t tmp___26 ;
  char __r0 ;
  char __r1 ;
  char __r2 ;
  char *tmp___43 ;

  {
  err_log(9, 1U, (char *)"Creating %s\n", path);
  tmp___18 = __builtin_constant_p(path);
  if (tmp___18) {
    if ((unsigned int )((void const   *)(path + 1)) - (unsigned int )((void const   *)path) ==
        1U) {
      if ((int const   )(*((char const   *)path + 0)) == 0) {
        pathdup = (char *)calloc(1U, 1U);
      } else {
        tmp___15 = strlen((char const   *)path);
        __len___2 = tmp___15 + 1U;
        tmp___16 = (char *)malloc(__len___2);
        __retval___2 = tmp___16;
        if ((unsigned int )__retval___2 != (unsigned int )((void *)0)) {
          __retval___2 = (char *)memcpy((void * __restrict  )__retval___2, (void const   * __restrict  )path,
                                        __len___2);
        }
        pathdup = __retval___2;
      }
    } else {
      goto _L;
    }
  } else {
    _L: /* CIL Label */ 
    pathdup = __strdup((char const   *)path);
  }
  if (! pathdup) {
    return (-1);
  }
  next_token = pathdup + 1;
  tmp___19 = __builtin_constant_p(sizeof(path_buffer));
  if (tmp___19) {
    if (sizeof(path_buffer) <= 16U) {
      if (sizeof(path_buffer) == 1U) {
        __s___1 = (void *)(path_buffer);
        (*((__uint8_t *)__s___1)) = (unsigned char)0;
      } else {
        __s___0 = (void *)(path_buffer);
        __u = (union __anonunion___u_53 *)__s___0;
        __c = (unsigned char)0;
        switch ((int )sizeof(path_buffer)) {
        case 15: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_53 *)((void *)__u + 4);
        case 11: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_53 *)((void *)__u + 4);
        case 7: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_53 *)((void *)__u + 4);
        case 3: 
        __u->__usi = (unsigned short )((int )((unsigned short )__c) * 257);
        __u = (union __anonunion___u_53 *)((void *)__u + 2);
        __u->__uc = __c;
        break;
        case 14: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_53 *)((void *)__u + 4);
        case 10: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_53 *)((void *)__u + 4);
        case 6: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_53 *)((void *)__u + 4);
        case 2: 
        __u->__usi = (unsigned short )((int )((unsigned short )__c) * 257);
        break;
        case 13: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_53 *)((void *)__u + 4);
        case 9: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_53 *)((void *)__u + 4);
        case 5: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_53 *)((void *)__u + 4);
        case 1: 
        __u->__uc = __c;
        break;
        case 16: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_53 *)((void *)__u + 4);
        case 12: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_53 *)((void *)__u + 4);
        case 8: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_53 *)((void *)__u + 4);
        case 4: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        case 0: ;
        break;
        }
      }
    } else {
      goto _L___0;
    }
  } else {
    _L___0: /* CIL Label */ 
    __s = (void *)(path_buffer);
    __builtin_memset(__s, '\000', (int )sizeof(path_buffer));
  }
  while (1) {
    if ((unsigned int )((void const   *)("/" + 1)) - (unsigned int )((void const   *)"/") ==
        1U) {
      __r0 = (char )(*("/" + 0));
      if ((int const   )(*("/" + 0)) != 0) {
        __r1 = (char )(*("/" + 1));
        if ((int const   )(*("/" + 1)) == 0) {
          tmp___43 = __strsep_1c__extinline(& next_token, __r0);
        } else {
          __r2 = (char )(*("/" + 2));
          if ((int )__r2 == 0) {
            tmp___43 = __strsep_2c__extinline(& next_token, __r0, __r1);
          } else {
            if ((int const   )(*("/" + 3)) == 0) {
              tmp___43 = __strsep_3c__extinline(& next_token, __r0, __r1, __r2);
            } else {
              tmp___43 = __strsep_g(& next_token, "/");
            }
          }
        }
      } else {
        goto _L___2;
      }
    } else {
      _L___2: /* CIL Label */ 
      tmp___43 = __strsep_g(& next_token, "/");
    }
    token = tmp___43;
    if (! token) {
      break;
    }
    tmp___25 = strlen((char const   *)(path_buffer));
    tmp___26 = strlen((char const   *)token);
    if (tmp___25 + tmp___26 < 4096U) {
      strcat((char * __restrict  )(path_buffer), (char const   * __restrict  )"/");
      strcat((char * __restrict  )(path_buffer), (char const   * __restrict  )token);
      err_log(9, 1U, (char *)"Making %s\n", path_buffer);
      tmp___22 = mkdir((char const   *)(path_buffer), 448U);
      if (tmp___22) {
        tmp___23 = __errno_location();
        if ((*tmp___23) != 17) {
          tmp___20 = __errno_location();
          err = (*tmp___20);
          free((void *)pathdup);
          tmp___21 = __errno_location();
          (*tmp___21) = err;
          return (-1);
        } else {
          goto _L___1;
        }
      } else {
        _L___1: /* CIL Label */ ;
      }
    } else {
      tmp___24 = __errno_location();
      (*tmp___24) = 36;
      return (-1);
    }
  }
  free((void *)pathdup);
  return (0);
}
}
static int config_existdir(char *path ) 
{ struct stat sb ;
  int tmp ;
  int *tmp___0 ;

  {
  err_log(9, 1U, (char *)"Checking existence of %s\n", path);
  tmp = stat__extinline((char const   *)path, & sb);
  if (tmp) {
    return (0);
  }
  if (sb.st_mode & 16384U) {
    return (1);
  }
  tmp___0 = __errno_location();
  (*tmp___0) = 20;
  return (0);
}
}
int config_read(char *file ) 
{ FILE *fin ;
  char *buffer___0 ;
  int err ;
  char *value ;
  char *comment ;
  char path_buffer[4096] ;
  CONFIGELEMENT *pce ;
  int handled ;
  char *term ;
  int *tmp___0 ;
  int *tmp___1 ;
  size_t __len___2 ;
  size_t tmp___18 ;
  char *__retval___2 ;
  char *tmp___19 ;
  int tmp___21 ;
  size_t __len___6 ;
  size_t tmp___37 ;
  char *__retval___6 ;
  char *tmp___38 ;
  size_t __len___10 ;
  size_t tmp___55 ;
  char *__retval___10 ;
  char *tmp___56 ;
  char *tmp___59 ;
  size_t tmp___60 ;
  size_t tmp___61 ;
  char *tmp___69 ;
  size_t tmp___70 ;
  size_t tmp___72 ;
  size_t tmp___73 ;
  int tmp___74 ;
  size_t tmp___75 ;
  char __r0 ;
  char __r1 ;
  char __r2 ;
  size_t tmp___76 ;
  char *tmp___80 ;
  int tmp___82 ;
  char *tmp___94 ;
  size_t __len___14 ;
  size_t tmp___100 ;
  char *__retval___14 ;
  char *tmp___101 ;
  int tmp___103 ;
  int tmp___104 ;
  size_t tmp___105 ;
  char *tmp___106 ;
  size_t __len___18 ;
  size_t tmp___123 ;
  char *__retval___18 ;
  char *tmp___124 ;
  int tmp___126 ;
  size_t __len___22 ;
  size_t tmp___143 ;
  char *__retval___22 ;
  char *tmp___144 ;
  int tmp___146 ;
  size_t __len___26 ;
  size_t tmp___163 ;
  char *__retval___26 ;
  char *tmp___164 ;
  int tmp___166 ;
  int tmp___167 ;
  int *tmp___168 ;
  char *tmp___169 ;
  int tmp___170 ;
  int *tmp___171 ;
  char *tmp___172 ;
  int tmp___173 ;
  int tmp___174 ;
  int tmp___197 ;
  size_t __s1_len___0 ;
  size_t __s2_len___0 ;
  int tmp___208 ;
  size_t tmp___209 ;
  register int __result___85 ;
  unsigned char const   *__s2___14 ;
  register int __result___86 ;
  register int __result___93 ;
  unsigned char const   *__s1___30 ;
  register int __result___94 ;
  int tmp___216 ;
  size_t tmp___217 ;
  size_t tmp___218 ;
  int tmp___241 ;
  size_t __s1_len___2 ;
  size_t __s2_len___2 ;
  int tmp___252 ;
  size_t tmp___253 ;
  register int __result___181 ;
  unsigned char const   *__s2___30 ;
  register int __result___182 ;
  register int __result___189 ;
  unsigned char const   *__s1___62 ;
  register int __result___190 ;
  int tmp___260 ;
  size_t tmp___261 ;
  size_t tmp___262 ;
  int tmp___285 ;
  size_t __s1_len___4 ;
  size_t __s2_len___4 ;
  int tmp___296 ;
  size_t tmp___297 ;
  register int __result___277 ;
  unsigned char const   *__s2___46 ;
  register int __result___278 ;
  register int __result___285 ;
  unsigned char const   *__s1___94 ;
  register int __result___286 ;
  int tmp___304 ;
  size_t tmp___305 ;
  size_t tmp___306 ;

  {
  err = 0;
  buffer___0 = (char *)malloc(1025U);
  if (! buffer___0) {
    return (-1);
  }
  fin = fopen((char const   * __restrict  )file, (char const   * __restrict  )"r");
  if ((unsigned int )fin == (unsigned int )((void *)0)) {
    tmp___0 = __errno_location();
    err = (*tmp___0);
    free((void *)buffer___0);
    if (2 == err) {
      err_log(1, 1U, (char *)"Whoops!  Can\'t find the config file!  If you are running this for the first\n");
      err_log(1, 1U, (char *)"time, then perhaps you\'ve forgotten to copy the sample config in the \n");
      err_log(1, 1U, (char *)"contrib directory into /etc/mt-daapd.conf.  Just a suggestion...\n\n");
    }
    tmp___1 = __errno_location();
    (*tmp___1) = err;
    return (-1);
  }
  config.always_scan = 1;
  tmp___21 = __builtin_constant_p(file);
  if (tmp___21) {
    if ((unsigned int )((void const   *)(file + 1)) - (unsigned int )((void const   *)file) ==
        1U) {
      if ((int const   )(*((char const   *)file + 0)) == 0) {
        config.configfile = (char *)calloc(1U, 1U);
      } else {
        tmp___18 = strlen((char const   *)file);
        __len___2 = tmp___18 + 1U;
        tmp___19 = (char *)malloc(__len___2);
        __retval___2 = tmp___19;
        if ((unsigned int )__retval___2 != (unsigned int )((void *)0)) {
          __retval___2 = (char *)memcpy((void * __restrict  )__retval___2, (void const   * __restrict  )file,
                                        __len___2);
        }
        config.configfile = __retval___2;
      }
    } else {
      goto _L;
    }
  } else {
    _L: /* CIL Label */ 
    config.configfile = __strdup((char const   *)file);
  }
  config.web_root = (char *)((void *)0);
  config.adminpassword = (char *)((void *)0);
  config.readpassword = (char *)((void *)0);
  config.mp3dir = (char *)((void *)0);
  config.playlist = (char *)((void *)0);
  config.runas = (char *)((void *)0);
  config.artfilename = (char *)((void *)0);
  config.logfile = (char *)((void *)0);
  config.rescan_interval = 0;
  config.process_m3u = 0;
  config.scan_type = 0;
  config.compress = 0;
  if ((unsigned int )((void const   *)(".mp3" + 1)) - (unsigned int )((void const   *)".mp3") ==
      1U) {
    if ((int const   )(*(".mp3" + 0)) == 0) {
      config.extensions = (char *)calloc(1U, 1U);
    } else {
      tmp___37 = strlen(".mp3");
      __len___6 = tmp___37 + 1U;
      tmp___38 = (char *)malloc(__len___6);
      __retval___6 = tmp___38;
      if ((unsigned int )__retval___6 != (unsigned int )((void *)0)) {
        __retval___6 = (char *)memcpy((void * __restrict  )__retval___6, (void const   * __restrict  )".mp3",
                                      __len___6);
      }
      config.extensions = __retval___6;
    }
  } else {
    config.extensions = __strdup(".mp3");
  }
  if ((unsigned int )((void const   *)("mt-daapd 0.2.4" + 1)) - (unsigned int )((void const   *)"mt-daapd 0.2.4") ==
      1U) {
    if ((int const   )(*("mt-daapd 0.2.4" + 0)) == 0) {
      config.servername = (char *)calloc(1U, 1U);
    } else {
      tmp___55 = strlen("mt-daapd 0.2.4");
      __len___10 = tmp___55 + 1U;
      tmp___56 = (char *)malloc(__len___10);
      __retval___10 = tmp___56;
      if ((unsigned int )__retval___10 != (unsigned int )((void *)0)) {
        __retval___10 = (char *)memcpy((void * __restrict  )__retval___10, (void const   * __restrict  )"mt-daapd 0.2.4",
                                       __len___10);
      }
      config.servername = __retval___10;
    }
  } else {
    config.servername = __strdup("mt-daapd 0.2.4");
  }
  while (1) {
    tmp___106 = fgets((char * __restrict  )buffer___0, 1024, (FILE * __restrict  )fin);
    if (! tmp___106) {
      break;
    }
    (*(buffer___0 + 1024)) = (char )'\000';
    tmp___59 = strchr((char const   *)buffer___0, '#');
    comment = tmp___59;
    if (comment) {
      (*comment) = (char )'\000';
    }
    while (1) {
      tmp___61 = strlen((char const   *)buffer___0);
      if (tmp___61) {
        tmp___73 = strlen((char const   *)buffer___0);
        tmp___74 = __builtin_constant_p((*(buffer___0 + (tmp___73 - 1U))));
        if (tmp___74) {
          tmp___75 = strlen((char const   *)buffer___0);
          if ((int )(*(buffer___0 + (tmp___75 - 1U))) == 0) {
            tmp___70 = strlen((char const   *)buffer___0);
            tmp___69 = (char *)__rawmemchr((void const   *)"\n\r ", (int )(*(buffer___0 +
                                                                             (tmp___70 -
                                                                              1U))));
          } else {
            goto _L___0;
          }
        } else {
          _L___0: /* CIL Label */ 
          tmp___72 = strlen((char const   *)buffer___0);
          tmp___69 = strchr("\n\r ", (int )(*(buffer___0 + (tmp___72 - 1U))));
        }
        if (! tmp___69) {
          goto _L___1;
        }
      } else {
        _L___1: /* CIL Label */ 
        break;
      }
      tmp___60 = strlen((char const   *)buffer___0);
      (*(buffer___0 + (tmp___60 - 1U))) = (char )'\000';
    }
    term = buffer___0;
    while (1) {
      if ((int )(*term) == 9) {
        goto _L___2;
      } else {
        if ((int )(*term) == 32) {
          _L___2: /* CIL Label */ ;
        } else {
          break;
        }
      }
      term ++;
    }
    value = term;
    if ((unsigned int )((void const   *)("\t " + 1)) - (unsigned int )((void const   *)"\t ") ==
        1U) {
      __r0 = (char )(*("\t " + 0));
      if ((int const   )(*("\t " + 0)) != 0) {
        __r1 = (char )(*("\t " + 1));
        if ((int const   )(*("\t " + 1)) == 0) {
          __strsep_1c__extinline(& value, __r0);
        } else {
          __r2 = (char )(*("\t " + 2));
          if ((int )__r2 == 0) {
            __strsep_2c__extinline(& value, __r0, __r1);
          } else {
            if ((int const   )(*("\t " + 3)) == 0) {
              __strsep_3c__extinline(& value, __r0, __r1, __r2);
            } else {
              __strsep_g(& value, "\t ");
            }
          }
        }
      } else {
        goto _L___3;
      }
    } else {
      _L___3: /* CIL Label */ 
      __strsep_g(& value, "\t ");
    }
    if (value) {
      if (term) {
        tmp___105 = strlen((char const   *)term);
        if (tmp___105) {
          while (1) {
            tmp___76 = strlen((char const   *)value);
            if (tmp___76) {
              tmp___82 = __builtin_constant_p((*value));
              if (tmp___82) {
                if ((int )(*value) == 0) {
                  tmp___80 = (char *)__rawmemchr((void const   *)"\t ", (int )(*value));
                } else {
                  goto _L___4;
                }
              } else {
                _L___4: /* CIL Label */ 
                tmp___80 = strchr("\t ", (int )(*value));
              }
              if (! tmp___80) {
                goto _L___5;
              }
            } else {
              _L___5: /* CIL Label */ 
              break;
            }
            value ++;
          }
          pce = config_elements;
          handled = 0;
          while (1) {
            if (! handled) {
              if (! (pce->config_element != -1)) {
                goto _L___8;
              }
            } else {
              _L___8: /* CIL Label */ 
              break;
            }
            tmp___104 = strcasecmp((char const   *)term, (char const   *)pce->name);
            if (tmp___104 == 0) {
              if (pce->config_element) {
                handled = 1;
                pce->changed = 1;
                err_log(9, 1U, (char *)"Read %s: %s\n", pce->name, value);
                switch (pce->type) {
                case 1: ;
                if ((*((char **)pce->var))) {
                  free((void *)(*((char **)pce->var)));
                }
                tmp___103 = __builtin_constant_p(value);
                if (tmp___103) {
                  if ((unsigned int )((void const   *)(value + 1)) - (unsigned int )((void const   *)value) ==
                      1U) {
                    if ((int const   )(*((char const   *)value + 0)) == 0) {
                      tmp___94 = (char *)calloc(1U, 1U);
                    } else {
                      tmp___100 = strlen((char const   *)value);
                      __len___14 = tmp___100 + 1U;
                      tmp___101 = (char *)malloc(__len___14);
                      __retval___14 = tmp___101;
                      if ((unsigned int )__retval___14 != (unsigned int )((void *)0)) {
                        __retval___14 = (char *)memcpy((void * __restrict  )__retval___14,
                                                       (void const   * __restrict  )value,
                                                       __len___14);
                      }
                      tmp___94 = __retval___14;
                    }
                  } else {
                    goto _L___6;
                  }
                } else {
                  _L___6: /* CIL Label */ 
                  tmp___94 = __strdup((char const   *)value);
                }
                (*((char **)pce->var)) = (char *)((void *)tmp___94);
                break;
                case 0: 
                (*((int *)pce->var)) = atoi__extinline((char const   *)value);
                break;
                }
              } else {
                goto _L___7;
              }
            } else {
              _L___7: /* CIL Label */ ;
            }
            pce ++;
          }
          if (! handled) {
            fprintf((FILE * __restrict  )stderr, (char const   * __restrict  )"Invalid config directive: %s\n",
                    buffer___0);
            fclose(fin);
            return (-1);
          }
        } else {
          goto _L___10;
        }
      } else {
        goto _L___10;
      }
    } else {
      _L___10: /* CIL Label */ ;
    }
  }
  fclose(fin);
  free((void *)buffer___0);
  realpath((char const   * __restrict  )config.web_root, (char * __restrict  )(path_buffer));
  free((void *)config.web_root);
  tmp___126 = __builtin_constant_p(path_buffer);
  if (tmp___126) {
    if ((unsigned int )((void const   *)(path_buffer + 1)) - (unsigned int )((void const   *)(path_buffer)) ==
        1U) {
      if ((int const   )(*((char const   *)(path_buffer) + 0)) == 0) {
        config.web_root = (char *)calloc(1U, 1U);
      } else {
        tmp___123 = strlen((char const   *)(path_buffer));
        __len___18 = tmp___123 + 1U;
        tmp___124 = (char *)malloc(__len___18);
        __retval___18 = tmp___124;
        if ((unsigned int )__retval___18 != (unsigned int )((void *)0)) {
          __retval___18 = (char *)memcpy((void * __restrict  )__retval___18, (void const   * __restrict  )(path_buffer),
                                         __len___18);
        }
        config.web_root = __retval___18;
      }
    } else {
      goto _L___11;
    }
  } else {
    _L___11: /* CIL Label */ 
    config.web_root = __strdup((char const   *)(path_buffer));
  }
  realpath((char const   * __restrict  )config.mp3dir, (char * __restrict  )(path_buffer));
  free((void *)config.mp3dir);
  tmp___146 = __builtin_constant_p(path_buffer);
  if (tmp___146) {
    if ((unsigned int )((void const   *)(path_buffer + 1)) - (unsigned int )((void const   *)(path_buffer)) ==
        1U) {
      if ((int const   )(*((char const   *)(path_buffer) + 0)) == 0) {
        config.mp3dir = (char *)calloc(1U, 1U);
      } else {
        tmp___143 = strlen((char const   *)(path_buffer));
        __len___22 = tmp___143 + 1U;
        tmp___144 = (char *)malloc(__len___22);
        __retval___22 = tmp___144;
        if ((unsigned int )__retval___22 != (unsigned int )((void *)0)) {
          __retval___22 = (char *)memcpy((void * __restrict  )__retval___22, (void const   * __restrict  )(path_buffer),
                                         __len___22);
        }
        config.mp3dir = __retval___22;
      }
    } else {
      goto _L___12;
    }
  } else {
    _L___12: /* CIL Label */ 
    config.mp3dir = __strdup((char const   *)(path_buffer));
  }
  realpath((char const   * __restrict  )config.dbdir, (char * __restrict  )(path_buffer));
  free((void *)config.dbdir);
  tmp___166 = __builtin_constant_p(path_buffer);
  if (tmp___166) {
    if ((unsigned int )((void const   *)(path_buffer + 1)) - (unsigned int )((void const   *)(path_buffer)) ==
        1U) {
      if ((int const   )(*((char const   *)(path_buffer) + 0)) == 0) {
        config.dbdir = (char *)calloc(1U, 1U);
      } else {
        tmp___163 = strlen((char const   *)(path_buffer));
        __len___26 = tmp___163 + 1U;
        tmp___164 = (char *)malloc(__len___26);
        __retval___26 = tmp___164;
        if ((unsigned int )__retval___26 != (unsigned int )((void *)0)) {
          __retval___26 = (char *)memcpy((void * __restrict  )__retval___26, (void const   * __restrict  )(path_buffer),
                                         __len___26);
        }
        config.dbdir = __retval___26;
      }
    } else {
      goto _L___13;
    }
  } else {
    _L___13: /* CIL Label */ 
    config.dbdir = __strdup((char const   *)(path_buffer));
  }
  pce = config_elements;
  err = 0;
  while (pce->config_element != -1) {
    if (pce->required) {
      if (pce->config_element) {
        if (! pce->changed) {
          err_log(1, 1U, (char *)"Required config entry \'%s\' not specified\n", pce->name);
          err = -1;
        } else {
          goto _L___15;
        }
      } else {
        goto _L___15;
      }
    } else {
      _L___15: /* CIL Label */ ;
    }
    pce->changed = 0;
    pce ++;
  }
  sprintf((char * __restrict  )(path_buffer), (char const   * __restrict  )"%s/index.html",
          config.web_root);
  fin = fopen((char const   * __restrict  )(path_buffer), (char const   * __restrict  )"r");
  if ((unsigned int )fin == (unsigned int )((void *)0)) {
    err = -1;
    err_log(1, 1U, (char *)"Invalid web_root\n");
    tmp___167 = strcasecmp((char const   *)config.web_root, "/usr/share/mt-daapd/admin-root");
    if (tmp___167 == 0) {
      fin = fopen((char const   * __restrict  )"/usr/local/share/mt-daapd/admin-root",
                  (char const   * __restrict  )"r");
      if ((unsigned int )fin != (unsigned int )((void *)0)) {
        fclose(fin);
        err_log(1, 1U, (char *)"Should it be /usr/local/share/mt-daapd/admin-root?");
      }
    }
  } else {
    fclose(fin);
  }
  tmp___170 = config_existdir(config.mp3dir);
  if (! tmp___170) {
    tmp___168 = __errno_location();
    tmp___169 = strerror((*tmp___168));
    err_log(1, 1U, (char *)"Bad mp3 directory (%s): %s\n", config.mp3dir, tmp___169);
    return (-1);
  }
  tmp___174 = config_existdir(config.dbdir);
  if (! tmp___174) {
    tmp___173 = config_makedir(config.dbdir);
    if (tmp___173) {
      tmp___171 = __errno_location();
      tmp___172 = strerror((*tmp___171));
      err_log(1, 1U, (char *)"Database dir %s does not exist, cannot create: %s\n",
              config.dbdir, tmp___172);
      return (-1);
    }
  }
  tmp___217 = strlen("1.1.4");
  if (tmp___217 < 2U) {
    goto _L___328;
  } else {
    tmp___218 = strlen("0.");
    if (tmp___218 < 2U) {
      _L___328: /* CIL Label */ 
      __s1_len___0 = strlen("1.1.4");
      __s2_len___0 = strlen("0.");
      if (! ((unsigned int )((void const   *)("1.1.4" + 1)) - (unsigned int )((void const   *)"1.1.4") ==
             1U)) {
        goto _L___327;
      } else {
        if (__s1_len___0 >= 4U) {
          _L___327: /* CIL Label */ 
          if (! ((unsigned int )((void const   *)("0." + 1)) - (unsigned int )((void const   *)"0.") ==
                 1U)) {
            goto _L___326;
          } else {
            if (__s2_len___0 >= 4U) {
              _L___326: /* CIL Label */ 
              tmp___216 = 1;
            } else {
              goto _L___325;
            }
          }
        } else {
          _L___325: /* CIL Label */ 
          tmp___216 = 0;
        }
      }
      if (tmp___216) {
        if (__s1_len___0 < __s2_len___0) {
          tmp___209 = __s1_len___0;
        } else {
          tmp___209 = __s2_len___0;
        }
        tmp___208 = memcmp((void const   *)"1.1.4", (void const   *)"0.", tmp___209 +
                                                                          1U);
      } else {
        if ((unsigned int )((void const   *)("1.1.4" + 1)) - (unsigned int )((void const   *)"1.1.4") ==
            1U) {
          __s1_len___0 = strlen("1.1.4");
          if (__s1_len___0 < 4U) {
            if ((unsigned int )((void const   *)("0." + 1)) - (unsigned int )((void const   *)"0.") ==
                1U) {
              __result___85 = (int )((int const   )(*((unsigned char const   *)"1.1.4" +
                                                      0)) - (int const   )(*((unsigned char const   *)"0." +
                                                                             0)));
              if (__s1_len___0 > 0U) {
                if (__result___85 == 0) {
                  __result___85 = (int )((int const   )(*((unsigned char const   *)"1.1.4" +
                                                          1)) - (int const   )(*((unsigned char const   *)"0." +
                                                                                 1)));
                  if (__s1_len___0 > 1U) {
                    if (__result___85 == 0) {
                      __result___85 = (int )((int const   )(*((unsigned char const   *)"1.1.4" +
                                                              2)) - (int const   )(*((unsigned char const   *)"0." +
                                                                                     2)));
                      if (__s1_len___0 > 2U) {
                        if (__result___85 == 0) {
                          __result___85 = (int )((int const   )(*((unsigned char const   *)"1.1.4" +
                                                                  3)) - (int const   )(*((unsigned char const   *)"0." +
                                                                                         3)));
                        } else {
                          goto _L___293;
                        }
                      } else {
                        _L___293: /* CIL Label */ ;
                      }
                    } else {
                      goto _L___294;
                    }
                  } else {
                    _L___294: /* CIL Label */ ;
                  }
                } else {
                  goto _L___295;
                }
              } else {
                _L___295: /* CIL Label */ ;
              }
              tmp___208 = __result___85;
            } else {
              __s2___14 = (unsigned char const   *)"0.";
              __result___86 = (int )((int const   )(*((unsigned char const   *)"1.1.4" +
                                                      0)) - (int const   )(*(__s2___14 +
                                                                             0)));
              if (__s1_len___0 > 0U) {
                if (__result___86 == 0) {
                  __result___86 = (int )((int const   )(*((unsigned char const   *)"1.1.4" +
                                                          1)) - (int const   )(*(__s2___14 +
                                                                                 1)));
                  if (__s1_len___0 > 1U) {
                    if (__result___86 == 0) {
                      __result___86 = (int )((int const   )(*((unsigned char const   *)"1.1.4" +
                                                              2)) - (int const   )(*(__s2___14 +
                                                                                     2)));
                      if (__s1_len___0 > 2U) {
                        if (__result___86 == 0) {
                          __result___86 = (int )((int const   )(*((unsigned char const   *)"1.1.4" +
                                                                  3)) - (int const   )(*(__s2___14 +
                                                                                         3)));
                        } else {
                          goto _L___296;
                        }
                      } else {
                        _L___296: /* CIL Label */ ;
                      }
                    } else {
                      goto _L___297;
                    }
                  } else {
                    _L___297: /* CIL Label */ ;
                  }
                } else {
                  goto _L___298;
                }
              } else {
                _L___298: /* CIL Label */ ;
              }
              tmp___208 = __result___86;
            }
          } else {
            goto _L___324;
          }
        } else {
          _L___324: /* CIL Label */ 
          if ((unsigned int )((void const   *)("0." + 1)) - (unsigned int )((void const   *)"0.") ==
              1U) {
            __s2_len___0 = strlen("0.");
            if (__s2_len___0 < 4U) {
              if ((unsigned int )((void const   *)("1.1.4" + 1)) - (unsigned int )((void const   *)"1.1.4") ==
                  1U) {
                __result___93 = (int )((int const   )(*((unsigned char const   *)"1.1.4" +
                                                        0)) - (int const   )(*((unsigned char const   *)"0." +
                                                                               0)));
                if (__s2_len___0 > 0U) {
                  if (__result___93 == 0) {
                    __result___93 = (int )((int const   )(*((unsigned char const   *)"1.1.4" +
                                                            1)) - (int const   )(*((unsigned char const   *)"0." +
                                                                                   1)));
                    if (__s2_len___0 > 1U) {
                      if (__result___93 == 0) {
                        __result___93 = (int )((int const   )(*((unsigned char const   *)"1.1.4" +
                                                                2)) - (int const   )(*((unsigned char const   *)"0." +
                                                                                       2)));
                        if (__s2_len___0 > 2U) {
                          if (__result___93 == 0) {
                            __result___93 = (int )((int const   )(*((unsigned char const   *)"1.1.4" +
                                                                    3)) - (int const   )(*((unsigned char const   *)"0." +
                                                                                           3)));
                          } else {
                            goto _L___317;
                          }
                        } else {
                          _L___317: /* CIL Label */ ;
                        }
                      } else {
                        goto _L___318;
                      }
                    } else {
                      _L___318: /* CIL Label */ ;
                    }
                  } else {
                    goto _L___319;
                  }
                } else {
                  _L___319: /* CIL Label */ ;
                }
                tmp___208 = __result___93;
              } else {
                __s1___30 = (unsigned char const   *)"1.1.4";
                __result___94 = (int )((int const   )(*(__s1___30 + 0)) - (int const   )(*((unsigned char const   *)"0." +
                                                                                           0)));
                if (__s2_len___0 > 0U) {
                  if (__result___94 == 0) {
                    __result___94 = (int )((int const   )(*(__s1___30 + 1)) - (int const   )(*((unsigned char const   *)"0." +
                                                                                               1)));
                    if (__s2_len___0 > 1U) {
                      if (__result___94 == 0) {
                        __result___94 = (int )((int const   )(*(__s1___30 + 2)) -
                                               (int const   )(*((unsigned char const   *)"0." +
                                                                2)));
                        if (__s2_len___0 > 2U) {
                          if (__result___94 == 0) {
                            __result___94 = (int )((int const   )(*(__s1___30 + 3)) -
                                                   (int const   )(*((unsigned char const   *)"0." +
                                                                    3)));
                          } else {
                            goto _L___320;
                          }
                        } else {
                          _L___320: /* CIL Label */ ;
                        }
                      } else {
                        goto _L___321;
                      }
                    } else {
                      _L___321: /* CIL Label */ ;
                    }
                  } else {
                    goto _L___322;
                  }
                } else {
                  _L___322: /* CIL Label */ ;
                }
                tmp___208 = __result___94;
              }
            } else {
              goto _L___323;
            }
          } else {
            _L___323: /* CIL Label */ 
            tmp___208 = strcmp("1.1.4", "0.");
          }
        }
      }
      tmp___197 = tmp___208;
    } else {
      tmp___197 = strncmp("1.1.4", "0.", 2U);
    }
  }
  if (tmp___197) {
    tmp___261 = strlen("1.1.4");
    if (tmp___261 < 3U) {
      goto _L___641;
    } else {
      tmp___262 = strlen("1.0");
      if (tmp___262 < 3U) {
        _L___641: /* CIL Label */ 
        __s1_len___2 = strlen("1.1.4");
        __s2_len___2 = strlen("1.0");
        if (! ((unsigned int )((void const   *)("1.1.4" + 1)) - (unsigned int )((void const   *)"1.1.4") ==
               1U)) {
          goto _L___640;
        } else {
          if (__s1_len___2 >= 4U) {
            _L___640: /* CIL Label */ 
            if (! ((unsigned int )((void const   *)("1.0" + 1)) - (unsigned int )((void const   *)"1.0") ==
                   1U)) {
              goto _L___639;
            } else {
              if (__s2_len___2 >= 4U) {
                _L___639: /* CIL Label */ 
                tmp___260 = 1;
              } else {
                goto _L___638;
              }
            }
          } else {
            _L___638: /* CIL Label */ 
            tmp___260 = 0;
          }
        }
        if (tmp___260) {
          if (__s1_len___2 < __s2_len___2) {
            tmp___253 = __s1_len___2;
          } else {
            tmp___253 = __s2_len___2;
          }
          tmp___252 = memcmp((void const   *)"1.1.4", (void const   *)"1.0", tmp___253 +
                                                                             1U);
        } else {
          if ((unsigned int )((void const   *)("1.1.4" + 1)) - (unsigned int )((void const   *)"1.1.4") ==
              1U) {
            __s1_len___2 = strlen("1.1.4");
            if (__s1_len___2 < 4U) {
              if ((unsigned int )((void const   *)("1.0" + 1)) - (unsigned int )((void const   *)"1.0") ==
                  1U) {
                __result___181 = (int )((int const   )(*((unsigned char const   *)"1.1.4" +
                                                         0)) - (int const   )(*((unsigned char const   *)"1.0" +
                                                                                0)));
                if (__s1_len___2 > 0U) {
                  if (__result___181 == 0) {
                    __result___181 = (int )((int const   )(*((unsigned char const   *)"1.1.4" +
                                                             1)) - (int const   )(*((unsigned char const   *)"1.0" +
                                                                                    1)));
                    if (__s1_len___2 > 1U) {
                      if (__result___181 == 0) {
                        __result___181 = (int )((int const   )(*((unsigned char const   *)"1.1.4" +
                                                                 2)) - (int const   )(*((unsigned char const   *)"1.0" +
                                                                                        2)));
                        if (__s1_len___2 > 2U) {
                          if (__result___181 == 0) {
                            __result___181 = (int )((int const   )(*((unsigned char const   *)"1.1.4" +
                                                                     3)) - (int const   )(*((unsigned char const   *)"1.0" +
                                                                                            3)));
                          } else {
                            goto _L___606;
                          }
                        } else {
                          _L___606: /* CIL Label */ ;
                        }
                      } else {
                        goto _L___607;
                      }
                    } else {
                      _L___607: /* CIL Label */ ;
                    }
                  } else {
                    goto _L___608;
                  }
                } else {
                  _L___608: /* CIL Label */ ;
                }
                tmp___252 = __result___181;
              } else {
                __s2___30 = (unsigned char const   *)"1.0";
                __result___182 = (int )((int const   )(*((unsigned char const   *)"1.1.4" +
                                                         0)) - (int const   )(*(__s2___30 +
                                                                                0)));
                if (__s1_len___2 > 0U) {
                  if (__result___182 == 0) {
                    __result___182 = (int )((int const   )(*((unsigned char const   *)"1.1.4" +
                                                             1)) - (int const   )(*(__s2___30 +
                                                                                    1)));
                    if (__s1_len___2 > 1U) {
                      if (__result___182 == 0) {
                        __result___182 = (int )((int const   )(*((unsigned char const   *)"1.1.4" +
                                                                 2)) - (int const   )(*(__s2___30 +
                                                                                        2)));
                        if (__s1_len___2 > 2U) {
                          if (__result___182 == 0) {
                            __result___182 = (int )((int const   )(*((unsigned char const   *)"1.1.4" +
                                                                     3)) - (int const   )(*(__s2___30 +
                                                                                            3)));
                          } else {
                            goto _L___609;
                          }
                        } else {
                          _L___609: /* CIL Label */ ;
                        }
                      } else {
                        goto _L___610;
                      }
                    } else {
                      _L___610: /* CIL Label */ ;
                    }
                  } else {
                    goto _L___611;
                  }
                } else {
                  _L___611: /* CIL Label */ ;
                }
                tmp___252 = __result___182;
              }
            } else {
              goto _L___637;
            }
          } else {
            _L___637: /* CIL Label */ 
            if ((unsigned int )((void const   *)("1.0" + 1)) - (unsigned int )((void const   *)"1.0") ==
                1U) {
              __s2_len___2 = strlen("1.0");
              if (__s2_len___2 < 4U) {
                if ((unsigned int )((void const   *)("1.1.4" + 1)) - (unsigned int )((void const   *)"1.1.4") ==
                    1U) {
                  __result___189 = (int )((int const   )(*((unsigned char const   *)"1.1.4" +
                                                           0)) - (int const   )(*((unsigned char const   *)"1.0" +
                                                                                  0)));
                  if (__s2_len___2 > 0U) {
                    if (__result___189 == 0) {
                      __result___189 = (int )((int const   )(*((unsigned char const   *)"1.1.4" +
                                                               1)) - (int const   )(*((unsigned char const   *)"1.0" +
                                                                                      1)));
                      if (__s2_len___2 > 1U) {
                        if (__result___189 == 0) {
                          __result___189 = (int )((int const   )(*((unsigned char const   *)"1.1.4" +
                                                                   2)) - (int const   )(*((unsigned char const   *)"1.0" +
                                                                                          2)));
                          if (__s2_len___2 > 2U) {
                            if (__result___189 == 0) {
                              __result___189 = (int )((int const   )(*((unsigned char const   *)"1.1.4" +
                                                                       3)) - (int const   )(*((unsigned char const   *)"1.0" +
                                                                                              3)));
                            } else {
                              goto _L___630;
                            }
                          } else {
                            _L___630: /* CIL Label */ ;
                          }
                        } else {
                          goto _L___631;
                        }
                      } else {
                        _L___631: /* CIL Label */ ;
                      }
                    } else {
                      goto _L___632;
                    }
                  } else {
                    _L___632: /* CIL Label */ ;
                  }
                  tmp___252 = __result___189;
                } else {
                  __s1___62 = (unsigned char const   *)"1.1.4";
                  __result___190 = (int )((int const   )(*(__s1___62 + 0)) - (int const   )(*((unsigned char const   *)"1.0" +
                                                                                              0)));
                  if (__s2_len___2 > 0U) {
                    if (__result___190 == 0) {
                      __result___190 = (int )((int const   )(*(__s1___62 + 1)) - (int const   )(*((unsigned char const   *)"1.0" +
                                                                                                  1)));
                      if (__s2_len___2 > 1U) {
                        if (__result___190 == 0) {
                          __result___190 = (int )((int const   )(*(__s1___62 + 2)) -
                                                  (int const   )(*((unsigned char const   *)"1.0" +
                                                                   2)));
                          if (__s2_len___2 > 2U) {
                            if (__result___190 == 0) {
                              __result___190 = (int )((int const   )(*(__s1___62 +
                                                                       3)) - (int const   )(*((unsigned char const   *)"1.0" +
                                                                                              3)));
                            } else {
                              goto _L___633;
                            }
                          } else {
                            _L___633: /* CIL Label */ ;
                          }
                        } else {
                          goto _L___634;
                        }
                      } else {
                        _L___634: /* CIL Label */ ;
                      }
                    } else {
                      goto _L___635;
                    }
                  } else {
                    _L___635: /* CIL Label */ ;
                  }
                  tmp___252 = __result___190;
                }
              } else {
                goto _L___636;
              }
            } else {
              _L___636: /* CIL Label */ 
              tmp___252 = strcmp("1.1.4", "1.0");
            }
          }
        }
        tmp___241 = tmp___252;
      } else {
        tmp___241 = strncmp("1.1.4", "1.0", 3U);
      }
    }
    if (tmp___241) {
      tmp___305 = strlen("1.1.4");
      if (tmp___305 < 3U) {
        goto _L___954;
      } else {
        tmp___306 = strlen("1.1");
        if (tmp___306 < 3U) {
          _L___954: /* CIL Label */ 
          __s1_len___4 = strlen("1.1.4");
          __s2_len___4 = strlen("1.1");
          if (! ((unsigned int )((void const   *)("1.1.4" + 1)) - (unsigned int )((void const   *)"1.1.4") ==
                 1U)) {
            goto _L___953;
          } else {
            if (__s1_len___4 >= 4U) {
              _L___953: /* CIL Label */ 
              if (! ((unsigned int )((void const   *)("1.1" + 1)) - (unsigned int )((void const   *)"1.1") ==
                     1U)) {
                goto _L___952;
              } else {
                if (__s2_len___4 >= 4U) {
                  _L___952: /* CIL Label */ 
                  tmp___304 = 1;
                } else {
                  goto _L___951;
                }
              }
            } else {
              _L___951: /* CIL Label */ 
              tmp___304 = 0;
            }
          }
          if (tmp___304) {
            if (__s1_len___4 < __s2_len___4) {
              tmp___297 = __s1_len___4;
            } else {
              tmp___297 = __s2_len___4;
            }
            tmp___296 = memcmp((void const   *)"1.1.4", (void const   *)"1.1", tmp___297 +
                                                                               1U);
          } else {
            if ((unsigned int )((void const   *)("1.1.4" + 1)) - (unsigned int )((void const   *)"1.1.4") ==
                1U) {
              __s1_len___4 = strlen("1.1.4");
              if (__s1_len___4 < 4U) {
                if ((unsigned int )((void const   *)("1.1" + 1)) - (unsigned int )((void const   *)"1.1") ==
                    1U) {
                  __result___277 = (int )((int const   )(*((unsigned char const   *)"1.1.4" +
                                                           0)) - (int const   )(*((unsigned char const   *)"1.1" +
                                                                                  0)));
                  if (__s1_len___4 > 0U) {
                    if (__result___277 == 0) {
                      __result___277 = (int )((int const   )(*((unsigned char const   *)"1.1.4" +
                                                               1)) - (int const   )(*((unsigned char const   *)"1.1" +
                                                                                      1)));
                      if (__s1_len___4 > 1U) {
                        if (__result___277 == 0) {
                          __result___277 = (int )((int const   )(*((unsigned char const   *)"1.1.4" +
                                                                   2)) - (int const   )(*((unsigned char const   *)"1.1" +
                                                                                          2)));
                          if (__s1_len___4 > 2U) {
                            if (__result___277 == 0) {
                              __result___277 = (int )((int const   )(*((unsigned char const   *)"1.1.4" +
                                                                       3)) - (int const   )(*((unsigned char const   *)"1.1" +
                                                                                              3)));
                            } else {
                              goto _L___919;
                            }
                          } else {
                            _L___919: /* CIL Label */ ;
                          }
                        } else {
                          goto _L___920;
                        }
                      } else {
                        _L___920: /* CIL Label */ ;
                      }
                    } else {
                      goto _L___921;
                    }
                  } else {
                    _L___921: /* CIL Label */ ;
                  }
                  tmp___296 = __result___277;
                } else {
                  __s2___46 = (unsigned char const   *)"1.1";
                  __result___278 = (int )((int const   )(*((unsigned char const   *)"1.1.4" +
                                                           0)) - (int const   )(*(__s2___46 +
                                                                                  0)));
                  if (__s1_len___4 > 0U) {
                    if (__result___278 == 0) {
                      __result___278 = (int )((int const   )(*((unsigned char const   *)"1.1.4" +
                                                               1)) - (int const   )(*(__s2___46 +
                                                                                      1)));
                      if (__s1_len___4 > 1U) {
                        if (__result___278 == 0) {
                          __result___278 = (int )((int const   )(*((unsigned char const   *)"1.1.4" +
                                                                   2)) - (int const   )(*(__s2___46 +
                                                                                          2)));
                          if (__s1_len___4 > 2U) {
                            if (__result___278 == 0) {
                              __result___278 = (int )((int const   )(*((unsigned char const   *)"1.1.4" +
                                                                       3)) - (int const   )(*(__s2___46 +
                                                                                              3)));
                            } else {
                              goto _L___922;
                            }
                          } else {
                            _L___922: /* CIL Label */ ;
                          }
                        } else {
                          goto _L___923;
                        }
                      } else {
                        _L___923: /* CIL Label */ ;
                      }
                    } else {
                      goto _L___924;
                    }
                  } else {
                    _L___924: /* CIL Label */ ;
                  }
                  tmp___296 = __result___278;
                }
              } else {
                goto _L___950;
              }
            } else {
              _L___950: /* CIL Label */ 
              if ((unsigned int )((void const   *)("1.1" + 1)) - (unsigned int )((void const   *)"1.1") ==
                  1U) {
                __s2_len___4 = strlen("1.1");
                if (__s2_len___4 < 4U) {
                  if ((unsigned int )((void const   *)("1.1.4" + 1)) - (unsigned int )((void const   *)"1.1.4") ==
                      1U) {
                    __result___285 = (int )((int const   )(*((unsigned char const   *)"1.1.4" +
                                                             0)) - (int const   )(*((unsigned char const   *)"1.1" +
                                                                                    0)));
                    if (__s2_len___4 > 0U) {
                      if (__result___285 == 0) {
                        __result___285 = (int )((int const   )(*((unsigned char const   *)"1.1.4" +
                                                                 1)) - (int const   )(*((unsigned char const   *)"1.1" +
                                                                                        1)));
                        if (__s2_len___4 > 1U) {
                          if (__result___285 == 0) {
                            __result___285 = (int )((int const   )(*((unsigned char const   *)"1.1.4" +
                                                                     2)) - (int const   )(*((unsigned char const   *)"1.1" +
                                                                                            2)));
                            if (__s2_len___4 > 2U) {
                              if (__result___285 == 0) {
                                __result___285 = (int )((int const   )(*((unsigned char const   *)"1.1.4" +
                                                                         3)) - (int const   )(*((unsigned char const   *)"1.1" +
                                                                                                3)));
                              } else {
                                goto _L___943;
                              }
                            } else {
                              _L___943: /* CIL Label */ ;
                            }
                          } else {
                            goto _L___944;
                          }
                        } else {
                          _L___944: /* CIL Label */ ;
                        }
                      } else {
                        goto _L___945;
                      }
                    } else {
                      _L___945: /* CIL Label */ ;
                    }
                    tmp___296 = __result___285;
                  } else {
                    __s1___94 = (unsigned char const   *)"1.1.4";
                    __result___286 = (int )((int const   )(*(__s1___94 + 0)) - (int const   )(*((unsigned char const   *)"1.1" +
                                                                                                0)));
                    if (__s2_len___4 > 0U) {
                      if (__result___286 == 0) {
                        __result___286 = (int )((int const   )(*(__s1___94 + 1)) -
                                                (int const   )(*((unsigned char const   *)"1.1" +
                                                                 1)));
                        if (__s2_len___4 > 1U) {
                          if (__result___286 == 0) {
                            __result___286 = (int )((int const   )(*(__s1___94 + 2)) -
                                                    (int const   )(*((unsigned char const   *)"1.1" +
                                                                     2)));
                            if (__s2_len___4 > 2U) {
                              if (__result___286 == 0) {
                                __result___286 = (int )((int const   )(*(__s1___94 +
                                                                         3)) - (int const   )(*((unsigned char const   *)"1.1" +
                                                                                                3)));
                              } else {
                                goto _L___946;
                              }
                            } else {
                              _L___946: /* CIL Label */ ;
                            }
                          } else {
                            goto _L___947;
                          }
                        } else {
                          _L___947: /* CIL Label */ ;
                        }
                      } else {
                        goto _L___948;
                      }
                    } else {
                      _L___948: /* CIL Label */ ;
                    }
                    tmp___296 = __result___286;
                  }
                } else {
                  goto _L___949;
                }
              } else {
                _L___949: /* CIL Label */ 
                tmp___296 = strcmp("1.1.4", "1.1");
              }
            }
          }
          tmp___285 = tmp___296;
        } else {
          tmp___285 = strncmp("1.1.4", "1.1", 3U);
        }
      }
      if (! tmp___285) {
        _L___955: /* CIL Label */ 
        if (config.compress) {
          config.compress = 0;
          err_log(1, 1U, (char *)"Must have zlib > 1.2.0 to use gzip content encoding.  You have %s.  Disabling.\n",
                  "1.1.4");
        }
      }
    } else {
      _L___956: /* CIL Label */ 
      goto _L___955;
    }
  } else {
    goto _L___956;
  }
  return (err);
}
}
void config_close(void) 
{ CONFIGELEMENT *pce ;
  int err ;

  {
  free((void *)config.configfile);
  pce = config_elements;
  err = 0;
  while (pce->config_element != -1) {
    if (pce->config_element) {
      if (pce->type == 1) {
        if ((*((char **)pce->var))) {
          err_log(9, 1U, (char *)"Freeing %s\n", pce->name);
          free((void *)(*((char **)pce->var)));
        } else {
          goto _L___0;
        }
      } else {
        goto _L___0;
      }
    } else {
      _L___0: /* CIL Label */ ;
    }
    pce ++;
  }
  return;
}
}
int config_write(WS_CONNINFO *pwsc ) 
{ FILE *configfile ;
  char ctime_buf[27] ;
  time_t now ;
  char *tmp ;
  char *tmp___0 ;
  char *tmp___1 ;
  char *tmp___2 ;
  char *tmp___3 ;
  char *tmp___4 ;
  char *tmp___5 ;
  char *tmp___6 ;
  char *tmp___7 ;
  char *tmp___8 ;
  char const   *tmp___9 ;
  size_t tmp___10 ;
  char *tmp___11 ;
  char *tmp___12 ;
  char *tmp___13 ;
  char *tmp___14 ;
  char *tmp___15 ;
  char *tmp___16 ;
  char const   *tmp___17 ;
  size_t tmp___18 ;
  char *tmp___19 ;
  char *tmp___20 ;
  char const   *tmp___21 ;
  size_t tmp___22 ;
  char *tmp___23 ;
  char *tmp___24 ;
  char const   *tmp___25 ;
  size_t tmp___26 ;
  char *tmp___27 ;
  char *tmp___28 ;

  {
  configfile = fopen((char const   * __restrict  )config.configfile, (char const   * __restrict  )"w");
  if (! configfile) {
    return (-1);
  }
  now = time((time_t *)((void *)0));
  ctime_r((time_t const   * __restrict  )(& now), (char * __restrict  )(ctime_buf));
  fprintf((FILE * __restrict  )configfile, (char const   * __restrict  )"#\n# mt-daapd.conf\n#\n");
  fprintf((FILE * __restrict  )configfile, (char const   * __restrict  )"# Edited: %s",
          ctime_buf);
  tmp = ws_getvar(pwsc, (char *)"HTTP_USER");
  fprintf((FILE * __restrict  )configfile, (char const   * __restrict  )"# By:     %s\n",
          tmp);
  fprintf((FILE * __restrict  )configfile, (char const   * __restrict  )"#\n");
  tmp___0 = ws_getvar(pwsc, (char *)"web_root");
  fprintf((FILE * __restrict  )configfile, (char const   * __restrict  )"web_root\t%s\n",
          tmp___0);
  tmp___1 = ws_getvar(pwsc, (char *)"port");
  fprintf((FILE * __restrict  )configfile, (char const   * __restrict  )"port\t\t%s\n",
          tmp___1);
  tmp___2 = ws_getvar(pwsc, (char *)"admin_pw");
  fprintf((FILE * __restrict  )configfile, (char const   * __restrict  )"admin_pw\t%s\n",
          tmp___2);
  tmp___3 = ws_getvar(pwsc, (char *)"mp3_dir");
  fprintf((FILE * __restrict  )configfile, (char const   * __restrict  )"mp3_dir\t\t%s\n",
          tmp___3);
  tmp___4 = ws_getvar(pwsc, (char *)"servername");
  fprintf((FILE * __restrict  )configfile, (char const   * __restrict  )"servername\t%s\n",
          tmp___4);
  tmp___5 = ws_getvar(pwsc, (char *)"runas");
  fprintf((FILE * __restrict  )configfile, (char const   * __restrict  )"runas\t\t%s\n",
          tmp___5);
  tmp___6 = ws_getvar(pwsc, (char *)"playlist");
  fprintf((FILE * __restrict  )configfile, (char const   * __restrict  )"playlist\t%s\n",
          tmp___6);
  tmp___8 = ws_getvar(pwsc, (char *)"password");
  if (tmp___8) {
    tmp___9 = ws_getvar(pwsc, (char *)"password");
    tmp___10 = strlen(tmp___9);
    if (tmp___10) {
      tmp___7 = ws_getvar(pwsc, (char *)"password");
      fprintf((FILE * __restrict  )configfile, (char const   * __restrict  )"password\t%s\n",
              tmp___7);
    } else {
      goto _L;
    }
  } else {
    _L: /* CIL Label */ ;
  }
  tmp___11 = ws_getvar(pwsc, (char *)"extensions");
  fprintf((FILE * __restrict  )configfile, (char const   * __restrict  )"extensions\t%s\n",
          tmp___11);
  tmp___12 = ws_getvar(pwsc, (char *)"db_dir");
  fprintf((FILE * __restrict  )configfile, (char const   * __restrict  )"db_dir\t\t%s\n",
          tmp___12);
  tmp___13 = ws_getvar(pwsc, (char *)"rescan_interval");
  fprintf((FILE * __restrict  )configfile, (char const   * __restrict  )"rescan_interval\t%s\n",
          tmp___13);
  tmp___14 = ws_getvar(pwsc, (char *)"scan_type");
  fprintf((FILE * __restrict  )configfile, (char const   * __restrict  )"scan_type\t%s\n",
          tmp___14);
  tmp___16 = ws_getvar(pwsc, (char *)"always_scan");
  if (tmp___16) {
    tmp___17 = ws_getvar(pwsc, (char *)"always_scan");
    tmp___18 = strlen(tmp___17);
    if (tmp___18) {
      tmp___15 = ws_getvar(pwsc, (char *)"always_scan");
      fprintf((FILE * __restrict  )configfile, (char const   * __restrict  )"always_scan\t%s\n",
              tmp___15);
    } else {
      goto _L___0;
    }
  } else {
    _L___0: /* CIL Label */ ;
  }
  tmp___20 = ws_getvar(pwsc, (char *)"art_filename");
  if (tmp___20) {
    tmp___21 = ws_getvar(pwsc, (char *)"art_filename");
    tmp___22 = strlen(tmp___21);
    if (tmp___22) {
      tmp___19 = ws_getvar(pwsc, (char *)"art_filename");
      fprintf((FILE * __restrict  )configfile, (char const   * __restrict  )"art_filename\t%s\n",
              tmp___19);
    } else {
      goto _L___1;
    }
  } else {
    _L___1: /* CIL Label */ ;
  }
  tmp___24 = ws_getvar(pwsc, (char *)"logfile");
  if (tmp___24) {
    tmp___25 = ws_getvar(pwsc, (char *)"logfile");
    tmp___26 = strlen(tmp___25);
    if (tmp___26) {
      tmp___23 = ws_getvar(pwsc, (char *)"logfile");
      fprintf((FILE * __restrict  )configfile, (char const   * __restrict  )"logfile\t\t%s\n",
              tmp___23);
    } else {
      goto _L___2;
    }
  } else {
    _L___2: /* CIL Label */ ;
  }
  tmp___27 = ws_getvar(pwsc, (char *)"process_m3u");
  fprintf((FILE * __restrict  )configfile, (char const   * __restrict  )"process_m3u\t%s\n",
          tmp___27);
  tmp___28 = ws_getvar(pwsc, (char *)"compress");
  fprintf((FILE * __restrict  )configfile, (char const   * __restrict  )"compress\t%s\n",
          tmp___28);
  fclose(configfile);
  return (0);
}
}
static void config_subst_stream(WS_CONNINFO *pwsc , int fd_src ) 
{ int in_arg ;
  char *argptr ;
  char argbuffer[80] ;
  char next ;
  CONFIGELEMENT *pce ;
  char *first ;
  char *last ;
  ssize_t tmp ;
  char __r0 ;
  char __r1 ;
  char __r2 ;
  int tmp___0 ;
  char *tmp___1 ;
  size_t tmp___2 ;
  void *__s ;
  void *__s___0 ;
  union __anonunion___u_54 *__u ;
  __uint8_t __c ;
  void *__s___1 ;
  int tmp___3 ;
  ssize_t tmp___4 ;

  {
  in_arg = 0;
  argptr = argbuffer;
  while (1) {
    tmp = r_read(fd_src, (void *)(& next), 1U);
    if (tmp <= 0) {
      break;
    }
    if (in_arg) {
      if ((int )next == 64) {
        tmp___2 = strlen((char const   *)(argbuffer));
        if (tmp___2 > 0U) {
          in_arg = 0;
          err_log(9, 1U, (char *)"Got directive %s\n", argbuffer);
          last = argbuffer;
          first = last;
          if ((unsigned int )((void const   *)(" " + 1)) - (unsigned int )((void const   *)" ") ==
              1U) {
            __r0 = (char )(*(" " + 0));
            if ((int const   )(*(" " + 0)) != 0) {
              __r1 = (char )(*(" " + 1));
              if ((int const   )(*(" " + 1)) == 0) {
                __strsep_1c__extinline(& last, __r0);
              } else {
                __r2 = (char )(*(" " + 2));
                if ((int )__r2 == 0) {
                  __strsep_2c__extinline(& last, __r0, __r1);
                } else {
                  if ((int const   )(*(" " + 3)) == 0) {
                    __strsep_3c__extinline(& last, __r0, __r1, __r2);
                  } else {
                    __strsep_g(& last, " ");
                  }
                }
              }
            } else {
              goto _L;
            }
          } else {
            _L: /* CIL Label */ 
            __strsep_g(& last, " ");
          }
          pce = config_elements;
          while (pce->config_element != -1) {
            tmp___0 = strcasecmp((char const   *)first, (char const   *)pce->name);
            if (tmp___0 == 0) {
              ((*(pce->emit)))(pwsc, pce->var, last);
              break;
            }
            pce ++;
          }
          if (pce->config_element == -1) {
            ws_writefd(pwsc, (char *)"@%s@", argbuffer);
          }
        } else {
          goto _L___0;
        }
      } else {
        _L___0: /* CIL Label */ 
        if ((int )next == 64) {
          ws_writefd(pwsc, (char *)"@");
          in_arg = 0;
        } else {
          if ((unsigned int )(argptr - argbuffer) < sizeof(argbuffer) - 1U) {
            tmp___1 = argptr;
            argptr ++;
            (*tmp___1) = next;
          }
        }
      }
    } else {
      if ((int )next == 64) {
        argptr = argbuffer;
        tmp___3 = __builtin_constant_p(sizeof(argbuffer));
        if (tmp___3) {
          if (sizeof(argbuffer) <= 16U) {
            if (sizeof(argbuffer) == 1U) {
              __s___1 = (void *)(argbuffer);
              (*((__uint8_t *)__s___1)) = (unsigned char)0;
            } else {
              __s___0 = (void *)(argbuffer);
              __u = (union __anonunion___u_54 *)__s___0;
              __c = (unsigned char)0;
              switch ((int )sizeof(argbuffer)) {
              case 15: 
              __u->__ui = (unsigned int )((int )__c * 16843009);
              __u = (union __anonunion___u_54 *)((void *)__u + 4);
              case 11: 
              __u->__ui = (unsigned int )((int )__c * 16843009);
              __u = (union __anonunion___u_54 *)((void *)__u + 4);
              case 7: 
              __u->__ui = (unsigned int )((int )__c * 16843009);
              __u = (union __anonunion___u_54 *)((void *)__u + 4);
              case 3: 
              __u->__usi = (unsigned short )((int )((unsigned short )__c) * 257);
              __u = (union __anonunion___u_54 *)((void *)__u + 2);
              __u->__uc = __c;
              break;
              case 14: 
              __u->__ui = (unsigned int )((int )__c * 16843009);
              __u = (union __anonunion___u_54 *)((void *)__u + 4);
              case 10: 
              __u->__ui = (unsigned int )((int )__c * 16843009);
              __u = (union __anonunion___u_54 *)((void *)__u + 4);
              case 6: 
              __u->__ui = (unsigned int )((int )__c * 16843009);
              __u = (union __anonunion___u_54 *)((void *)__u + 4);
              case 2: 
              __u->__usi = (unsigned short )((int )((unsigned short )__c) * 257);
              break;
              case 13: 
              __u->__ui = (unsigned int )((int )__c * 16843009);
              __u = (union __anonunion___u_54 *)((void *)__u + 4);
              case 9: 
              __u->__ui = (unsigned int )((int )__c * 16843009);
              __u = (union __anonunion___u_54 *)((void *)__u + 4);
              case 5: 
              __u->__ui = (unsigned int )((int )__c * 16843009);
              __u = (union __anonunion___u_54 *)((void *)__u + 4);
              case 1: 
              __u->__uc = __c;
              break;
              case 16: 
              __u->__ui = (unsigned int )((int )__c * 16843009);
              __u = (union __anonunion___u_54 *)((void *)__u + 4);
              case 12: 
              __u->__ui = (unsigned int )((int )__c * 16843009);
              __u = (union __anonunion___u_54 *)((void *)__u + 4);
              case 8: 
              __u->__ui = (unsigned int )((int )__c * 16843009);
              __u = (union __anonunion___u_54 *)((void *)__u + 4);
              case 4: 
              __u->__ui = (unsigned int )((int )__c * 16843009);
              case 0: ;
              break;
              }
            }
          } else {
            goto _L___1;
          }
        } else {
          _L___1: /* CIL Label */ 
          __s = (void *)(argbuffer);
          __builtin_memset(__s, '\000', (int )sizeof(argbuffer));
        }
        in_arg = 1;
      } else {
        tmp___4 = r_write(pwsc->fd, (void *)(& next), 1U);
        if (tmp___4 == -1) {
          break;
        }
      }
    }
  }
  return;
}
}
void config_handler(WS_CONNINFO *pwsc ) 
{ char path[4096] ;
  char resolved_path[4096] ;
  int file_fd ;
  struct stat sb ;
  char *pw ;
  int *tmp ;
  char *tmp___0 ;
  int tmp___70 ;
  size_t __s1_len___0 ;
  size_t __s2_len___0 ;
  int tmp___101 ;
  size_t tmp___102 ;
  register int __result___85 ;
  unsigned char const   *__s2___14 ;
  register int __result___86 ;
  int tmp___117 ;
  register int __result___93 ;
  unsigned char const   *__s1___30 ;
  register int __result___94 ;
  int tmp___124 ;
  int tmp___125 ;
  int tmp___126 ;
  int tmp___127 ;
  int tmp___128 ;
  int tmp___129 ;
  size_t tmp___130 ;
  size_t tmp___131 ;
  int tmp___132 ;
  int tmp___133 ;
  size_t tmp___134 ;
  size_t tmp___135 ;
  int tmp___136 ;
  size_t tmp___137 ;
  size_t tmp___138 ;
  int *tmp___139 ;
  int *tmp___140 ;
  char *tmp___141 ;
  int tmp___142 ;
  int tmp___143 ;
  size_t __len___2 ;
  size_t tmp___160 ;
  char *__retval___2 ;
  char *tmp___161 ;
  int tmp___163 ;
  size_t __len___6 ;
  size_t tmp___180 ;
  char *__retval___6 ;
  char *tmp___181 ;
  int tmp___183 ;
  int tmp___184 ;
  int tmp___185 ;
  size_t tmp___186 ;
  int tmp___187 ;

  {
  err_log(9, 3U, (char *)"Entering config_handler\n");
  config_set_status(pwsc, 0, (char *)"Serving admin pages");
  pwsc->close = 1;
  ws_addresponseheader(pwsc, (char *)"Connection", (char *)"close");
  snprintf((char * __restrict  )(path), 4096U, (char const   * __restrict  )"%s/%s",
           config.web_root, pwsc->uri);
  tmp___0 = realpath((char const   * __restrict  )(path), (char * __restrict  )(resolved_path));
  if (! tmp___0) {
    tmp = __errno_location();
    pwsc->error = (*tmp);
    err_log(2, 3U, (char *)"Cannot resolve %s\n", path);
    ws_returnerror(pwsc, 404, (char *)"Not found");
    config_set_status(pwsc, 0, (char *)((void *)0));
    return;
  }
  stat__extinline((char const   *)(resolved_path), & sb);
  if (sb.st_mode & 16384U) {
    strcat((char * __restrict  )(resolved_path), (char const   * __restrict  )"/index.html");
  }
  err_log(9, 3U, (char *)"Thread %d: Preparing to serve %s\n", pwsc->threadno, resolved_path);
  tmp___131 = strlen((char const   *)config.web_root);
  tmp___132 = __builtin_constant_p(tmp___131);
  if (tmp___132) {
    tmp___133 = __builtin_constant_p(resolved_path);
    if (tmp___133) {
      tmp___134 = strlen((char const   *)(resolved_path));
      tmp___135 = strlen((char const   *)config.web_root);
      if (tmp___134 < tmp___135) {
        goto _L___352;
      } else {
        goto _L___354;
      }
    } else {
      _L___354: /* CIL Label */ 
      tmp___136 = __builtin_constant_p(config.web_root);
      if (tmp___136) {
        tmp___137 = strlen((char const   *)config.web_root);
        tmp___138 = strlen((char const   *)config.web_root);
        if (tmp___137 < tmp___138) {
          _L___352: /* CIL Label */ 
          tmp___127 = __builtin_constant_p(resolved_path);
          if (tmp___127) {
            tmp___128 = __builtin_constant_p(config.web_root);
            if (tmp___128) {
              __s1_len___0 = strlen((char const   *)(resolved_path));
              __s2_len___0 = strlen((char const   *)config.web_root);
              if (! ((unsigned int )((void const   *)(resolved_path + 1)) - (unsigned int )((void const   *)(resolved_path)) ==
                     1U)) {
                goto _L___348;
              } else {
                if (__s1_len___0 >= 4U) {
                  _L___348: /* CIL Label */ 
                  if (! ((unsigned int )((void const   *)(config.web_root + 1)) -
                         (unsigned int )((void const   *)config.web_root) == 1U)) {
                    goto _L___347;
                  } else {
                    if (__s2_len___0 >= 4U) {
                      _L___347: /* CIL Label */ 
                      tmp___129 = 1;
                    } else {
                      goto _L___346;
                    }
                  }
                } else {
                  _L___346: /* CIL Label */ 
                  tmp___129 = 0;
                }
              }
              if (tmp___129) {
                if (__s1_len___0 < __s2_len___0) {
                  tmp___102 = __s1_len___0;
                } else {
                  tmp___102 = __s2_len___0;
                }
                tmp___101 = memcmp((void const   *)((char const   *)(resolved_path)),
                                   (void const   *)((char const   *)config.web_root),
                                   tmp___102 + 1U);
              } else {
                goto _L___350;
              }
            } else {
              goto _L___350;
            }
          } else {
            _L___350: /* CIL Label */ 
            tmp___126 = __builtin_constant_p(resolved_path);
            if (tmp___126) {
              if ((unsigned int )((void const   *)(resolved_path + 1)) - (unsigned int )((void const   *)(resolved_path)) ==
                  1U) {
                __s1_len___0 = strlen((char const   *)(resolved_path));
                if (__s1_len___0 < 4U) {
                  tmp___117 = __builtin_constant_p(config.web_root);
                  if (tmp___117) {
                    if ((unsigned int )((void const   *)(config.web_root + 1)) - (unsigned int )((void const   *)config.web_root) ==
                        1U) {
                      __result___85 = (int )((int const   )(*((unsigned char const   *)((char const   *)(resolved_path)) +
                                                              0)) - (int const   )(*((unsigned char const   *)((char const   *)config.web_root) +
                                                                                     0)));
                      if (__s1_len___0 > 0U) {
                        if (__result___85 == 0) {
                          __result___85 = (int )((int const   )(*((unsigned char const   *)((char const   *)(resolved_path)) +
                                                                  1)) - (int const   )(*((unsigned char const   *)((char const   *)config.web_root) +
                                                                                         1)));
                          if (__s1_len___0 > 1U) {
                            if (__result___85 == 0) {
                              __result___85 = (int )((int const   )(*((unsigned char const   *)((char const   *)(resolved_path)) +
                                                                      2)) - (int const   )(*((unsigned char const   *)((char const   *)config.web_root) +
                                                                                             2)));
                              if (__s1_len___0 > 2U) {
                                if (__result___85 == 0) {
                                  __result___85 = (int )((int const   )(*((unsigned char const   *)((char const   *)(resolved_path)) +
                                                                          3)) - (int const   )(*((unsigned char const   *)((char const   *)config.web_root) +
                                                                                                 3)));
                                } else {
                                  goto _L___309;
                                }
                              } else {
                                _L___309: /* CIL Label */ ;
                              }
                            } else {
                              goto _L___310;
                            }
                          } else {
                            _L___310: /* CIL Label */ ;
                          }
                        } else {
                          goto _L___311;
                        }
                      } else {
                        _L___311: /* CIL Label */ ;
                      }
                      tmp___101 = __result___85;
                    } else {
                      goto _L___315;
                    }
                  } else {
                    _L___315: /* CIL Label */ 
                    __s2___14 = (unsigned char const   *)((char const   *)config.web_root);
                    __result___86 = (int )((int const   )(*((unsigned char const   *)((char const   *)(resolved_path)) +
                                                            0)) - (int const   )(*(__s2___14 +
                                                                                   0)));
                    if (__s1_len___0 > 0U) {
                      if (__result___86 == 0) {
                        __result___86 = (int )((int const   )(*((unsigned char const   *)((char const   *)(resolved_path)) +
                                                                1)) - (int const   )(*(__s2___14 +
                                                                                       1)));
                        if (__s1_len___0 > 1U) {
                          if (__result___86 == 0) {
                            __result___86 = (int )((int const   )(*((unsigned char const   *)((char const   *)(resolved_path)) +
                                                                    2)) - (int const   )(*(__s2___14 +
                                                                                           2)));
                            if (__s1_len___0 > 2U) {
                              if (__result___86 == 0) {
                                __result___86 = (int )((int const   )(*((unsigned char const   *)((char const   *)(resolved_path)) +
                                                                        3)) - (int const   )(*(__s2___14 +
                                                                                               3)));
                              } else {
                                goto _L___312;
                              }
                            } else {
                              _L___312: /* CIL Label */ ;
                            }
                          } else {
                            goto _L___313;
                          }
                        } else {
                          _L___313: /* CIL Label */ ;
                        }
                      } else {
                        goto _L___314;
                      }
                    } else {
                      _L___314: /* CIL Label */ ;
                    }
                    tmp___101 = __result___86;
                  }
                } else {
                  goto _L___345;
                }
              } else {
                goto _L___345;
              }
            } else {
              _L___345: /* CIL Label */ 
              tmp___125 = __builtin_constant_p(config.web_root);
              if (tmp___125) {
                if ((unsigned int )((void const   *)(config.web_root + 1)) - (unsigned int )((void const   *)config.web_root) ==
                    1U) {
                  __s2_len___0 = strlen((char const   *)config.web_root);
                  if (__s2_len___0 < 4U) {
                    tmp___124 = __builtin_constant_p(resolved_path);
                    if (tmp___124) {
                      if ((unsigned int )((void const   *)(resolved_path + 1)) - (unsigned int )((void const   *)(resolved_path)) ==
                          1U) {
                        __result___93 = (int )((int const   )(*((unsigned char const   *)((char const   *)(resolved_path)) +
                                                                0)) - (int const   )(*((unsigned char const   *)((char const   *)config.web_root) +
                                                                                       0)));
                        if (__s2_len___0 > 0U) {
                          if (__result___93 == 0) {
                            __result___93 = (int )((int const   )(*((unsigned char const   *)((char const   *)(resolved_path)) +
                                                                    1)) - (int const   )(*((unsigned char const   *)((char const   *)config.web_root) +
                                                                                           1)));
                            if (__s2_len___0 > 1U) {
                              if (__result___93 == 0) {
                                __result___93 = (int )((int const   )(*((unsigned char const   *)((char const   *)(resolved_path)) +
                                                                        2)) - (int const   )(*((unsigned char const   *)((char const   *)config.web_root) +
                                                                                               2)));
                                if (__s2_len___0 > 2U) {
                                  if (__result___93 == 0) {
                                    __result___93 = (int )((int const   )(*((unsigned char const   *)((char const   *)(resolved_path)) +
                                                                            3)) -
                                                           (int const   )(*((unsigned char const   *)((char const   *)config.web_root) +
                                                                            3)));
                                  } else {
                                    goto _L___335;
                                  }
                                } else {
                                  _L___335: /* CIL Label */ ;
                                }
                              } else {
                                goto _L___336;
                              }
                            } else {
                              _L___336: /* CIL Label */ ;
                            }
                          } else {
                            goto _L___337;
                          }
                        } else {
                          _L___337: /* CIL Label */ ;
                        }
                        tmp___101 = __result___93;
                      } else {
                        goto _L___341;
                      }
                    } else {
                      _L___341: /* CIL Label */ 
                      __s1___30 = (unsigned char const   *)((char const   *)(resolved_path));
                      __result___94 = (int )((int const   )(*(__s1___30 + 0)) - (int const   )(*((unsigned char const   *)((char const   *)config.web_root) +
                                                                                                 0)));
                      if (__s2_len___0 > 0U) {
                        if (__result___94 == 0) {
                          __result___94 = (int )((int const   )(*(__s1___30 + 1)) -
                                                 (int const   )(*((unsigned char const   *)((char const   *)config.web_root) +
                                                                  1)));
                          if (__s2_len___0 > 1U) {
                            if (__result___94 == 0) {
                              __result___94 = (int )((int const   )(*(__s1___30 +
                                                                      2)) - (int const   )(*((unsigned char const   *)((char const   *)config.web_root) +
                                                                                             2)));
                              if (__s2_len___0 > 2U) {
                                if (__result___94 == 0) {
                                  __result___94 = (int )((int const   )(*(__s1___30 +
                                                                          3)) - (int const   )(*((unsigned char const   *)((char const   *)config.web_root) +
                                                                                                 3)));
                                } else {
                                  goto _L___338;
                                }
                              } else {
                                _L___338: /* CIL Label */ ;
                              }
                            } else {
                              goto _L___339;
                            }
                          } else {
                            _L___339: /* CIL Label */ ;
                          }
                        } else {
                          goto _L___340;
                        }
                      } else {
                        _L___340: /* CIL Label */ ;
                      }
                      tmp___101 = __result___94;
                    }
                  } else {
                    goto _L___343;
                  }
                } else {
                  goto _L___343;
                }
              } else {
                _L___343: /* CIL Label */ 
                tmp___101 = strcmp((char const   *)(resolved_path), (char const   *)config.web_root);
              }
            }
          }
          tmp___70 = tmp___101;
        } else {
          goto _L___353;
        }
      } else {
        _L___353: /* CIL Label */ 
        goto _L___351;
      }
    }
  } else {
    _L___351: /* CIL Label */ 
    tmp___130 = strlen((char const   *)config.web_root);
    tmp___70 = strncmp((char const   *)(resolved_path), (char const   *)config.web_root,
                       tmp___130);
  }
  if (tmp___70) {
    pwsc->error = 22;
    err_log(2, 3U, (char *)"Thread %d: Requested file %s out of root\n", pwsc->threadno,
            resolved_path);
    ws_returnerror(pwsc, 403, (char *)"Forbidden");
    config_set_status(pwsc, 0, (char *)((void *)0));
    return;
  }
  file_fd = r_open2((char const   *)(resolved_path), 0);
  if (file_fd == -1) {
    tmp___139 = __errno_location();
    pwsc->error = (*tmp___139);
    tmp___140 = __errno_location();
    tmp___141 = strerror((*tmp___140));
    err_log(2, 3U, (char *)"Thread %d: Error opening %s: %s\n", pwsc->threadno, resolved_path,
            tmp___141);
    ws_returnerror(pwsc, 404, (char *)"Not found");
    config_set_status(pwsc, 0, (char *)((void *)0));
    return;
  }
  tmp___185 = strcasecmp((char const   *)pwsc->uri, "/config-update.html");
  if (tmp___185 == 0) {
    pw = ws_getvar(pwsc, (char *)"action");
    if (pw) {
      tmp___142 = strcasecmp((char const   *)pw, "stopdaap");
      if (tmp___142 == 0) {
        config.stop = 1;
      }
      tmp___143 = strcasecmp((char const   *)pw, "rescan");
      if (tmp___143 == 0) {
        config.reload = 1;
      }
    } else {
      pw = ws_getvar(pwsc, (char *)"admin_pw");
      if (pw) {
        if (config.adminpassword) {
          free((void *)config.adminpassword);
        }
        tmp___163 = __builtin_constant_p(pw);
        if (tmp___163) {
          if ((unsigned int )((void const   *)(pw + 1)) - (unsigned int )((void const   *)pw) ==
              1U) {
            if ((int const   )(*((char const   *)pw + 0)) == 0) {
              config.adminpassword = (char *)calloc(1U, 1U);
            } else {
              tmp___160 = strlen((char const   *)pw);
              __len___2 = tmp___160 + 1U;
              tmp___161 = (char *)malloc(__len___2);
              __retval___2 = tmp___161;
              if ((unsigned int )__retval___2 != (unsigned int )((void *)0)) {
                __retval___2 = (char *)memcpy((void * __restrict  )__retval___2, (void const   * __restrict  )pw,
                                              __len___2);
              }
              config.adminpassword = __retval___2;
            }
          } else {
            goto _L___355;
          }
        } else {
          _L___355: /* CIL Label */ 
          config.adminpassword = __strdup((char const   *)pw);
        }
      }
      pw = ws_getvar(pwsc, (char *)"password");
      if (pw) {
        if (config.readpassword) {
          free((void *)config.readpassword);
        }
        tmp___183 = __builtin_constant_p(pw);
        if (tmp___183) {
          if ((unsigned int )((void const   *)(pw + 1)) - (unsigned int )((void const   *)pw) ==
              1U) {
            if ((int const   )(*((char const   *)pw + 0)) == 0) {
              config.readpassword = (char *)calloc(1U, 1U);
            } else {
              tmp___180 = strlen((char const   *)pw);
              __len___6 = tmp___180 + 1U;
              tmp___181 = (char *)malloc(__len___6);
              __retval___6 = tmp___181;
              if ((unsigned int )__retval___6 != (unsigned int )((void *)0)) {
                __retval___6 = (char *)memcpy((void * __restrict  )__retval___6, (void const   * __restrict  )pw,
                                              __len___6);
              }
              config.readpassword = __retval___6;
            }
          } else {
            goto _L___356;
          }
        } else {
          _L___356: /* CIL Label */ 
          config.readpassword = __strdup((char const   *)pw);
        }
      }
      pw = ws_getvar(pwsc, (char *)"rescan_interval");
      if (pw) {
        config.rescan_interval = atoi__extinline((char const   *)pw);
      }
      tmp___184 = config_file_is_readonly();
      if (! tmp___184) {
        err_log(5, 3U, (char *)"Updating config file\n");
        config_write(pwsc);
      }
    }
  }
  ws_writefd(pwsc, (char *)"HTTP/1.1 200 OK\r\n");
  ws_emitheaders(pwsc);
  tmp___186 = strlen((char const   *)(resolved_path));
  tmp___187 = strcasecmp((char const   *)(& resolved_path[tmp___186 - 5U]), ".html");
  if (tmp___187 == 0) {
    config_subst_stream(pwsc, file_fd);
  } else {
    copyfile(file_fd, pwsc->fd);
  }
  r_close(file_fd);
  err_log(9, 3U, (char *)"Thread %d: Served successfully\n", pwsc->threadno);
  config_set_status(pwsc, 0, (char *)((void *)0));
  return;
}
}
int config_auth(char *user , char *password ) 
{ size_t __s1_len ;
  size_t __s2_len ;
  int tmp___29 ;
  size_t tmp___30 ;
  register int __result___37 ;
  unsigned char const   *__s2___6 ;
  register int __result___38 ;
  int tmp___45 ;
  register int __result___45 ;
  unsigned char const   *__s1___14 ;
  register int __result___46 ;
  int tmp___52 ;
  int tmp___53 ;
  int tmp___54 ;
  int tmp___55 ;
  int tmp___56 ;
  int tmp___57 ;
  int tmp___58 ;

  {
  if (! password) {
    goto _L;
  } else {
    if (! config.adminpassword) {
      _L: /* CIL Label */ 
      return (0);
    }
  }
  tmp___55 = __builtin_constant_p(password);
  if (tmp___55) {
    tmp___56 = __builtin_constant_p(config.adminpassword);
    if (tmp___56) {
      __s1_len = strlen((char const   *)password);
      __s2_len = strlen((char const   *)config.adminpassword);
      if (! ((unsigned int )((void const   *)(password + 1)) - (unsigned int )((void const   *)password) ==
             1U)) {
        goto _L___173;
      } else {
        if (__s1_len >= 4U) {
          _L___173: /* CIL Label */ 
          if (! ((unsigned int )((void const   *)(config.adminpassword + 1)) - (unsigned int )((void const   *)config.adminpassword) ==
                 1U)) {
            goto _L___172;
          } else {
            if (__s2_len >= 4U) {
              _L___172: /* CIL Label */ 
              tmp___57 = 1;
            } else {
              goto _L___171;
            }
          }
        } else {
          _L___171: /* CIL Label */ 
          tmp___57 = 0;
        }
      }
      if (tmp___57) {
        if (__s1_len < __s2_len) {
          tmp___30 = __s1_len;
        } else {
          tmp___30 = __s2_len;
        }
        tmp___29 = memcmp((void const   *)((char const   *)password), (void const   *)((char const   *)config.adminpassword),
                          tmp___30 + 1U);
      } else {
        goto _L___175;
      }
    } else {
      goto _L___175;
    }
  } else {
    _L___175: /* CIL Label */ 
    tmp___54 = __builtin_constant_p(password);
    if (tmp___54) {
      if ((unsigned int )((void const   *)(password + 1)) - (unsigned int )((void const   *)password) ==
          1U) {
        __s1_len = strlen((char const   *)password);
        if (__s1_len < 4U) {
          tmp___45 = __builtin_constant_p(config.adminpassword);
          if (tmp___45) {
            if ((unsigned int )((void const   *)(config.adminpassword + 1)) - (unsigned int )((void const   *)config.adminpassword) ==
                1U) {
              __result___37 = (int )((int const   )(*((unsigned char const   *)((char const   *)password) +
                                                      0)) - (int const   )(*((unsigned char const   *)((char const   *)config.adminpassword) +
                                                                             0)));
              if (__s1_len > 0U) {
                if (__result___37 == 0) {
                  __result___37 = (int )((int const   )(*((unsigned char const   *)((char const   *)password) +
                                                          1)) - (int const   )(*((unsigned char const   *)((char const   *)config.adminpassword) +
                                                                                 1)));
                  if (__s1_len > 1U) {
                    if (__result___37 == 0) {
                      __result___37 = (int )((int const   )(*((unsigned char const   *)((char const   *)password) +
                                                              2)) - (int const   )(*((unsigned char const   *)((char const   *)config.adminpassword) +
                                                                                     2)));
                      if (__s1_len > 2U) {
                        if (__result___37 == 0) {
                          __result___37 = (int )((int const   )(*((unsigned char const   *)((char const   *)password) +
                                                                  3)) - (int const   )(*((unsigned char const   *)((char const   *)config.adminpassword) +
                                                                                         3)));
                        } else {
                          goto _L___134;
                        }
                      } else {
                        _L___134: /* CIL Label */ ;
                      }
                    } else {
                      goto _L___135;
                    }
                  } else {
                    _L___135: /* CIL Label */ ;
                  }
                } else {
                  goto _L___136;
                }
              } else {
                _L___136: /* CIL Label */ ;
              }
              tmp___29 = __result___37;
            } else {
              goto _L___140;
            }
          } else {
            _L___140: /* CIL Label */ 
            __s2___6 = (unsigned char const   *)((char const   *)config.adminpassword);
            __result___38 = (int )((int const   )(*((unsigned char const   *)((char const   *)password) +
                                                    0)) - (int const   )(*(__s2___6 +
                                                                           0)));
            if (__s1_len > 0U) {
              if (__result___38 == 0) {
                __result___38 = (int )((int const   )(*((unsigned char const   *)((char const   *)password) +
                                                        1)) - (int const   )(*(__s2___6 +
                                                                               1)));
                if (__s1_len > 1U) {
                  if (__result___38 == 0) {
                    __result___38 = (int )((int const   )(*((unsigned char const   *)((char const   *)password) +
                                                            2)) - (int const   )(*(__s2___6 +
                                                                                   2)));
                    if (__s1_len > 2U) {
                      if (__result___38 == 0) {
                        __result___38 = (int )((int const   )(*((unsigned char const   *)((char const   *)password) +
                                                                3)) - (int const   )(*(__s2___6 +
                                                                                       3)));
                      } else {
                        goto _L___137;
                      }
                    } else {
                      _L___137: /* CIL Label */ ;
                    }
                  } else {
                    goto _L___138;
                  }
                } else {
                  _L___138: /* CIL Label */ ;
                }
              } else {
                goto _L___139;
              }
            } else {
              _L___139: /* CIL Label */ ;
            }
            tmp___29 = __result___38;
          }
        } else {
          goto _L___170;
        }
      } else {
        goto _L___170;
      }
    } else {
      _L___170: /* CIL Label */ 
      tmp___53 = __builtin_constant_p(config.adminpassword);
      if (tmp___53) {
        if ((unsigned int )((void const   *)(config.adminpassword + 1)) - (unsigned int )((void const   *)config.adminpassword) ==
            1U) {
          __s2_len = strlen((char const   *)config.adminpassword);
          if (__s2_len < 4U) {
            tmp___52 = __builtin_constant_p(password);
            if (tmp___52) {
              if ((unsigned int )((void const   *)(password + 1)) - (unsigned int )((void const   *)password) ==
                  1U) {
                __result___45 = (int )((int const   )(*((unsigned char const   *)((char const   *)password) +
                                                        0)) - (int const   )(*((unsigned char const   *)((char const   *)config.adminpassword) +
                                                                               0)));
                if (__s2_len > 0U) {
                  if (__result___45 == 0) {
                    __result___45 = (int )((int const   )(*((unsigned char const   *)((char const   *)password) +
                                                            1)) - (int const   )(*((unsigned char const   *)((char const   *)config.adminpassword) +
                                                                                   1)));
                    if (__s2_len > 1U) {
                      if (__result___45 == 0) {
                        __result___45 = (int )((int const   )(*((unsigned char const   *)((char const   *)password) +
                                                                2)) - (int const   )(*((unsigned char const   *)((char const   *)config.adminpassword) +
                                                                                       2)));
                        if (__s2_len > 2U) {
                          if (__result___45 == 0) {
                            __result___45 = (int )((int const   )(*((unsigned char const   *)((char const   *)password) +
                                                                    3)) - (int const   )(*((unsigned char const   *)((char const   *)config.adminpassword) +
                                                                                           3)));
                          } else {
                            goto _L___160;
                          }
                        } else {
                          _L___160: /* CIL Label */ ;
                        }
                      } else {
                        goto _L___161;
                      }
                    } else {
                      _L___161: /* CIL Label */ ;
                    }
                  } else {
                    goto _L___162;
                  }
                } else {
                  _L___162: /* CIL Label */ ;
                }
                tmp___29 = __result___45;
              } else {
                goto _L___166;
              }
            } else {
              _L___166: /* CIL Label */ 
              __s1___14 = (unsigned char const   *)((char const   *)password);
              __result___46 = (int )((int const   )(*(__s1___14 + 0)) - (int const   )(*((unsigned char const   *)((char const   *)config.adminpassword) +
                                                                                         0)));
              if (__s2_len > 0U) {
                if (__result___46 == 0) {
                  __result___46 = (int )((int const   )(*(__s1___14 + 1)) - (int const   )(*((unsigned char const   *)((char const   *)config.adminpassword) +
                                                                                             1)));
                  if (__s2_len > 1U) {
                    if (__result___46 == 0) {
                      __result___46 = (int )((int const   )(*(__s1___14 + 2)) - (int const   )(*((unsigned char const   *)((char const   *)config.adminpassword) +
                                                                                                 2)));
                      if (__s2_len > 2U) {
                        if (__result___46 == 0) {
                          __result___46 = (int )((int const   )(*(__s1___14 + 3)) -
                                                 (int const   )(*((unsigned char const   *)((char const   *)config.adminpassword) +
                                                                  3)));
                        } else {
                          goto _L___163;
                        }
                      } else {
                        _L___163: /* CIL Label */ ;
                      }
                    } else {
                      goto _L___164;
                    }
                  } else {
                    _L___164: /* CIL Label */ ;
                  }
                } else {
                  goto _L___165;
                }
              } else {
                _L___165: /* CIL Label */ ;
              }
              tmp___29 = __result___46;
            }
          } else {
            goto _L___168;
          }
        } else {
          goto _L___168;
        }
      } else {
        _L___168: /* CIL Label */ 
        tmp___29 = strcmp((char const   *)password, (char const   *)config.adminpassword);
      }
    }
  }
  if (tmp___29) {
    tmp___58 = 0;
  } else {
    tmp___58 = 1;
  }
  return (tmp___58);
}
}
static void config_emit_string(WS_CONNINFO *pwsc , void *value , char *arg ) 
{ 

  {
  if ((*((char **)value))) {
    ws_writefd(pwsc, (char *)"%s", (*((char **)value)));
  }
  return;
}
}
static void config_emit_literal(WS_CONNINFO *pwsc , void *value , char *arg ) 
{ 

  {
  ws_writefd(pwsc, (char *)"%s", (char *)value);
  return;
}
}
static void config_emit_int(WS_CONNINFO *pwsc , void *value , char *arg ) 
{ 

  {
  ws_writefd(pwsc, (char *)"%d", (*((int *)value)));
  return;
}
}
static void config_emit_service_status(WS_CONNINFO *pwsc , void *value , char *arg ) 
{ int mdns_running ;
  char *html ;
  char buf[256] ;
  int r_days ;
  int r_hours ;
  int r_mins ;
  int r_secs ;
  int scanning ;
  int tmp ;
  int tmp___0 ;
  char const   *tmp___1 ;
  char const   *tmp___2 ;
  char const   *tmp___3 ;
  time_t tmp___4 ;
  void *__s ;
  void *__s___0 ;
  union __anonunion___u_55 *__u ;
  __uint8_t __c ;
  void *__s___1 ;
  int tmp___5 ;
  char const   *tmp___6 ;
  size_t tmp___7 ;
  char const   *tmp___8 ;
  size_t tmp___9 ;
  char const   *tmp___10 ;
  size_t tmp___11 ;
  char const   *tmp___12 ;
  size_t tmp___13 ;
  int tmp___14 ;
  int tmp___15 ;

  {
  ws_writefd(pwsc, (char *)"<TABLE><TR><TH ALIGN=LEFT>Service</TH>");
  ws_writefd(pwsc, (char *)"<TH ALIGN=LEFT>Status</TH><TH ALIGN=LEFT>Control</TH></TR>\n");
  ws_writefd(pwsc, (char *)"<TR><TD>Rendezvous</TD>");
  if (config.use_mdns) {
    tmp = rend_running();
    if (tmp) {
      tmp___0 = 0;
    } else {
      tmp___0 = 1;
    }
    mdns_running = tmp___0;
    if (mdns_running) {
      html = (char *)"<a href=\"config-update.html?action=stopmdns\">Stop MDNS Server</a>";
    } else {
      html = (char *)"<a href=\"config-update.html?action=startmdns\">Start MDNS Server</a>";
    }
    if (mdns_running) {
      tmp___1 = "Running";
    } else {
      tmp___1 = "Stopped";
    }
    ws_writefd(pwsc, (char *)"<TD>%s</TD><TD>%s</TD></TR>\n", tmp___1, html);
  } else {
    ws_writefd(pwsc, (char *)"<TD>Not configured</TD><TD>&nbsp;</TD></TR>\n");
  }
  if (config.stop) {
    tmp___2 = "Stopping";
  } else {
    tmp___2 = "Running";
  }
  ws_writefd(pwsc, (char *)"<TR><TD>DAAP Server</TD><TD>%s</TD>", tmp___2);
  if (config.stop) {
    ws_writefd(pwsc, (char *)"<TD>Wait...</TD></TR>\n");
  } else {
    ws_writefd(pwsc, (char *)"<TD><a href=\"config-update.html?action=stopdaap\">Stop DAAP Server</a></TD></TR>");
  }
  scanning = config.reload;
  if (scanning) {
    tmp___3 = "Running";
  } else {
    tmp___3 = "Idle";
  }
  ws_writefd(pwsc, (char *)"<TR><TD>Background scanner</TD><TD>%s</TD>", tmp___3);
  if (scanning) {
    ws_writefd(pwsc, (char *)"<TD>Wait...</TD></TR>");
  } else {
    ws_writefd(pwsc, (char *)"<TD><A HREF=\"config-update.html?action=rescan\">Start Scan</A></TD></TR>");
  }
  ws_writefd(pwsc, (char *)"</TABLE>\n");
  ws_writefd(pwsc, (char *)"<TABLE>\n");
  ws_writefd(pwsc, (char *)"<TR>\n");
  ws_writefd(pwsc, (char *)" <TH>Uptime</TH>\n");
  tmp___4 = time((time_t *)((void *)0));
  r_secs = (int )(tmp___4 - config.stats.start_time);
  r_days = r_secs / 86400;
  r_secs -= 86400 * r_days;
  r_hours = r_secs / 3600;
  r_secs -= 3600 * r_hours;
  r_mins = r_secs / 60;
  r_secs -= 60 * r_mins;
  tmp___5 = __builtin_constant_p(sizeof(buf));
  if (tmp___5) {
    if (sizeof(buf) <= 16U) {
      if (sizeof(buf) == 1U) {
        __s___1 = (void *)(buf);
        (*((__uint8_t *)__s___1)) = (unsigned char)0;
      } else {
        __s___0 = (void *)(buf);
        __u = (union __anonunion___u_55 *)__s___0;
        __c = (unsigned char)0;
        switch ((int )sizeof(buf)) {
        case 15: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_55 *)((void *)__u + 4);
        case 11: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_55 *)((void *)__u + 4);
        case 7: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_55 *)((void *)__u + 4);
        case 3: 
        __u->__usi = (unsigned short )((int )((unsigned short )__c) * 257);
        __u = (union __anonunion___u_55 *)((void *)__u + 2);
        __u->__uc = __c;
        break;
        case 14: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_55 *)((void *)__u + 4);
        case 10: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_55 *)((void *)__u + 4);
        case 6: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_55 *)((void *)__u + 4);
        case 2: 
        __u->__usi = (unsigned short )((int )((unsigned short )__c) * 257);
        break;
        case 13: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_55 *)((void *)__u + 4);
        case 9: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_55 *)((void *)__u + 4);
        case 5: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_55 *)((void *)__u + 4);
        case 1: 
        __u->__uc = __c;
        break;
        case 16: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_55 *)((void *)__u + 4);
        case 12: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_55 *)((void *)__u + 4);
        case 8: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_55 *)((void *)__u + 4);
        case 4: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        case 0: ;
        break;
        }
      }
    } else {
      goto _L;
    }
  } else {
    _L: /* CIL Label */ 
    __s = (void *)(buf);
    __builtin_memset(__s, '\000', (int )sizeof(buf));
  }
  if (r_days) {
    if (r_days == 1) {
      tmp___6 = "";
    } else {
      tmp___6 = "s";
    }
    tmp___7 = strlen((char const   *)(buf));
    sprintf((char * __restrict  )(& buf[tmp___7]), (char const   * __restrict  )"%d day%s, ",
            r_days, tmp___6);
  }
  if (r_days) {
    goto _L___0;
  } else {
    if (r_hours) {
      _L___0: /* CIL Label */ 
      if (r_hours == 1) {
        tmp___8 = "";
      } else {
        tmp___8 = "s";
      }
      tmp___9 = strlen((char const   *)(buf));
      sprintf((char * __restrict  )(& buf[tmp___9]), (char const   * __restrict  )"%d hour%s, ",
              r_hours, tmp___8);
    }
  }
  if (r_days) {
    goto _L___2;
  } else {
    if (r_hours) {
      _L___2: /* CIL Label */ 
      goto _L___1;
    } else {
      if (r_mins) {
        _L___1: /* CIL Label */ 
        if (r_mins == 1) {
          tmp___10 = "";
        } else {
          tmp___10 = "s";
        }
        tmp___11 = strlen((char const   *)(buf));
        sprintf((char * __restrict  )(& buf[tmp___11]), (char const   * __restrict  )"%d minute%s, ",
                r_mins, tmp___10);
      }
    }
  }
  if (r_secs == 1) {
    tmp___12 = "";
  } else {
    tmp___12 = "s";
  }
  tmp___13 = strlen((char const   *)(buf));
  sprintf((char * __restrict  )(& buf[tmp___13]), (char const   * __restrict  )"%d second%s ",
          r_secs, tmp___12);
  ws_writefd(pwsc, (char *)" <TD>%s</TD>\n", buf);
  ws_writefd(pwsc, (char *)"</TR>\n");
  ws_writefd(pwsc, (char *)"<TR>\n");
  ws_writefd(pwsc, (char *)" <TH>Songs</TH>\n");
  tmp___14 = db_get_song_count();
  ws_writefd(pwsc, (char *)" <TD>%d</TD>\n", tmp___14);
  ws_writefd(pwsc, (char *)"</TR>\n");
  ws_writefd(pwsc, (char *)"<TR>\n");
  ws_writefd(pwsc, (char *)" <TH>Songs Served</TH>\n");
  ws_writefd(pwsc, (char *)" <TD>%d</TD>\n", config.stats.songs_served);
  ws_writefd(pwsc, (char *)"</TR>\n");
  if (! scanning) {
    ws_writefd(pwsc, (char *)"<TR>\n");
    ws_writefd(pwsc, (char *)" <TH>DB Version</TH>\n");
    tmp___15 = db_version();
    ws_writefd(pwsc, (char *)" <TD>%d</TD>\n", tmp___15);
    ws_writefd(pwsc, (char *)"</TR>\n");
  }
  ws_writefd(pwsc, (char *)"</TABLE>\n");
  return;
}
}
int config_get_session_count(void) 
{ SCAN_STATUS *pcurrent ;
  SCAN_STATUS *pcheck ;
  int count ;
  int tmp ;
  size_t __s1_len ;
  size_t __s2_len ;
  int tmp___30 ;
  size_t tmp___31 ;
  register int __result___37 ;
  unsigned char const   *__s2___6 ;
  register int __result___38 ;
  int tmp___46 ;
  register int __result___45 ;
  unsigned char const   *__s1___14 ;
  register int __result___46 ;
  int tmp___53 ;
  int tmp___54 ;
  int tmp___55 ;
  int tmp___56 ;
  int tmp___57 ;
  int tmp___58 ;

  {
  count = 0;
  tmp = config_mutex_lock();
  if (tmp) {
    return (0);
  }
  pcurrent = scan_status.next;
  while (pcurrent) {
    pcheck = scan_status.next;
    while ((unsigned int )pcheck != (unsigned int )pcurrent) {
      tmp___56 = __builtin_constant_p(pcheck->host);
      if (tmp___56) {
        tmp___57 = __builtin_constant_p(pcurrent->host);
        if (tmp___57) {
          __s1_len = strlen((char const   *)pcheck->host);
          __s2_len = strlen((char const   *)pcurrent->host);
          if (! ((unsigned int )((void const   *)(pcheck->host + 1)) - (unsigned int )((void const   *)pcheck->host) ==
                 1U)) {
            goto _L___172;
          } else {
            if (__s1_len >= 4U) {
              _L___172: /* CIL Label */ 
              if (! ((unsigned int )((void const   *)(pcurrent->host + 1)) - (unsigned int )((void const   *)pcurrent->host) ==
                     1U)) {
                goto _L___171;
              } else {
                if (__s2_len >= 4U) {
                  _L___171: /* CIL Label */ 
                  tmp___58 = 1;
                } else {
                  goto _L___170;
                }
              }
            } else {
              _L___170: /* CIL Label */ 
              tmp___58 = 0;
            }
          }
          if (tmp___58) {
            if (__s1_len < __s2_len) {
              tmp___31 = __s1_len;
            } else {
              tmp___31 = __s2_len;
            }
            tmp___30 = memcmp((void const   *)((char const   *)pcheck->host), (void const   *)((char const   *)pcurrent->host),
                              tmp___31 + 1U);
          } else {
            goto _L___174;
          }
        } else {
          goto _L___174;
        }
      } else {
        _L___174: /* CIL Label */ 
        tmp___55 = __builtin_constant_p(pcheck->host);
        if (tmp___55) {
          if ((unsigned int )((void const   *)(pcheck->host + 1)) - (unsigned int )((void const   *)pcheck->host) ==
              1U) {
            __s1_len = strlen((char const   *)pcheck->host);
            if (__s1_len < 4U) {
              tmp___46 = __builtin_constant_p(pcurrent->host);
              if (tmp___46) {
                if ((unsigned int )((void const   *)(pcurrent->host + 1)) - (unsigned int )((void const   *)pcurrent->host) ==
                    1U) {
                  __result___37 = (int )((int const   )(*((unsigned char const   *)((char const   *)pcheck->host) +
                                                          0)) - (int const   )(*((unsigned char const   *)((char const   *)pcurrent->host) +
                                                                                 0)));
                  if (__s1_len > 0U) {
                    if (__result___37 == 0) {
                      __result___37 = (int )((int const   )(*((unsigned char const   *)((char const   *)pcheck->host) +
                                                              1)) - (int const   )(*((unsigned char const   *)((char const   *)pcurrent->host) +
                                                                                     1)));
                      if (__s1_len > 1U) {
                        if (__result___37 == 0) {
                          __result___37 = (int )((int const   )(*((unsigned char const   *)((char const   *)pcheck->host) +
                                                                  2)) - (int const   )(*((unsigned char const   *)((char const   *)pcurrent->host) +
                                                                                         2)));
                          if (__s1_len > 2U) {
                            if (__result___37 == 0) {
                              __result___37 = (int )((int const   )(*((unsigned char const   *)((char const   *)pcheck->host) +
                                                                      3)) - (int const   )(*((unsigned char const   *)((char const   *)pcurrent->host) +
                                                                                             3)));
                            } else {
                              goto _L___133;
                            }
                          } else {
                            _L___133: /* CIL Label */ ;
                          }
                        } else {
                          goto _L___134;
                        }
                      } else {
                        _L___134: /* CIL Label */ ;
                      }
                    } else {
                      goto _L___135;
                    }
                  } else {
                    _L___135: /* CIL Label */ ;
                  }
                  tmp___30 = __result___37;
                } else {
                  goto _L___139;
                }
              } else {
                _L___139: /* CIL Label */ 
                __s2___6 = (unsigned char const   *)((char const   *)pcurrent->host);
                __result___38 = (int )((int const   )(*((unsigned char const   *)((char const   *)pcheck->host) +
                                                        0)) - (int const   )(*(__s2___6 +
                                                                               0)));
                if (__s1_len > 0U) {
                  if (__result___38 == 0) {
                    __result___38 = (int )((int const   )(*((unsigned char const   *)((char const   *)pcheck->host) +
                                                            1)) - (int const   )(*(__s2___6 +
                                                                                   1)));
                    if (__s1_len > 1U) {
                      if (__result___38 == 0) {
                        __result___38 = (int )((int const   )(*((unsigned char const   *)((char const   *)pcheck->host) +
                                                                2)) - (int const   )(*(__s2___6 +
                                                                                       2)));
                        if (__s1_len > 2U) {
                          if (__result___38 == 0) {
                            __result___38 = (int )((int const   )(*((unsigned char const   *)((char const   *)pcheck->host) +
                                                                    3)) - (int const   )(*(__s2___6 +
                                                                                           3)));
                          } else {
                            goto _L___136;
                          }
                        } else {
                          _L___136: /* CIL Label */ ;
                        }
                      } else {
                        goto _L___137;
                      }
                    } else {
                      _L___137: /* CIL Label */ ;
                    }
                  } else {
                    goto _L___138;
                  }
                } else {
                  _L___138: /* CIL Label */ ;
                }
                tmp___30 = __result___38;
              }
            } else {
              goto _L___169;
            }
          } else {
            goto _L___169;
          }
        } else {
          _L___169: /* CIL Label */ 
          tmp___54 = __builtin_constant_p(pcurrent->host);
          if (tmp___54) {
            if ((unsigned int )((void const   *)(pcurrent->host + 1)) - (unsigned int )((void const   *)pcurrent->host) ==
                1U) {
              __s2_len = strlen((char const   *)pcurrent->host);
              if (__s2_len < 4U) {
                tmp___53 = __builtin_constant_p(pcheck->host);
                if (tmp___53) {
                  if ((unsigned int )((void const   *)(pcheck->host + 1)) - (unsigned int )((void const   *)pcheck->host) ==
                      1U) {
                    __result___45 = (int )((int const   )(*((unsigned char const   *)((char const   *)pcheck->host) +
                                                            0)) - (int const   )(*((unsigned char const   *)((char const   *)pcurrent->host) +
                                                                                   0)));
                    if (__s2_len > 0U) {
                      if (__result___45 == 0) {
                        __result___45 = (int )((int const   )(*((unsigned char const   *)((char const   *)pcheck->host) +
                                                                1)) - (int const   )(*((unsigned char const   *)((char const   *)pcurrent->host) +
                                                                                       1)));
                        if (__s2_len > 1U) {
                          if (__result___45 == 0) {
                            __result___45 = (int )((int const   )(*((unsigned char const   *)((char const   *)pcheck->host) +
                                                                    2)) - (int const   )(*((unsigned char const   *)((char const   *)pcurrent->host) +
                                                                                           2)));
                            if (__s2_len > 2U) {
                              if (__result___45 == 0) {
                                __result___45 = (int )((int const   )(*((unsigned char const   *)((char const   *)pcheck->host) +
                                                                        3)) - (int const   )(*((unsigned char const   *)((char const   *)pcurrent->host) +
                                                                                               3)));
                              } else {
                                goto _L___159;
                              }
                            } else {
                              _L___159: /* CIL Label */ ;
                            }
                          } else {
                            goto _L___160;
                          }
                        } else {
                          _L___160: /* CIL Label */ ;
                        }
                      } else {
                        goto _L___161;
                      }
                    } else {
                      _L___161: /* CIL Label */ ;
                    }
                    tmp___30 = __result___45;
                  } else {
                    goto _L___165;
                  }
                } else {
                  _L___165: /* CIL Label */ 
                  __s1___14 = (unsigned char const   *)((char const   *)pcheck->host);
                  __result___46 = (int )((int const   )(*(__s1___14 + 0)) - (int const   )(*((unsigned char const   *)((char const   *)pcurrent->host) +
                                                                                             0)));
                  if (__s2_len > 0U) {
                    if (__result___46 == 0) {
                      __result___46 = (int )((int const   )(*(__s1___14 + 1)) - (int const   )(*((unsigned char const   *)((char const   *)pcurrent->host) +
                                                                                                 1)));
                      if (__s2_len > 1U) {
                        if (__result___46 == 0) {
                          __result___46 = (int )((int const   )(*(__s1___14 + 2)) -
                                                 (int const   )(*((unsigned char const   *)((char const   *)pcurrent->host) +
                                                                  2)));
                          if (__s2_len > 2U) {
                            if (__result___46 == 0) {
                              __result___46 = (int )((int const   )(*(__s1___14 +
                                                                      3)) - (int const   )(*((unsigned char const   *)((char const   *)pcurrent->host) +
                                                                                             3)));
                            } else {
                              goto _L___162;
                            }
                          } else {
                            _L___162: /* CIL Label */ ;
                          }
                        } else {
                          goto _L___163;
                        }
                      } else {
                        _L___163: /* CIL Label */ ;
                      }
                    } else {
                      goto _L___164;
                    }
                  } else {
                    _L___164: /* CIL Label */ ;
                  }
                  tmp___30 = __result___46;
                }
              } else {
                goto _L___167;
              }
            } else {
              goto _L___167;
            }
          } else {
            _L___167: /* CIL Label */ 
            tmp___30 = strcmp((char const   *)pcheck->host, (char const   *)pcurrent->host);
          }
        }
      }
      if (tmp___30 == 0) {
        break;
      }
      pcheck = pcheck->next;
    }
    if ((unsigned int )pcheck == (unsigned int )pcurrent) {
      count ++;
    }
    pcurrent = pcurrent->next;
  }
  config_mutex_unlock();
  return (count);
}
}
static void config_emit_session_count(WS_CONNINFO *pwsc , void *value , char *arg ) 
{ int tmp ;

  {
  tmp = config_get_session_count();
  ws_writefd(pwsc, (char *)"%d", tmp);
  return;
}
}
static void config_emit_threadstatus(WS_CONNINFO *pwsc , void *value , char *arg ) 
{ SCAN_STATUS *pss ;
  int tmp ;

  {
  tmp = config_mutex_lock();
  if (tmp) {
    return;
  }
  ws_writefd(pwsc, (char *)"<TABLE><TR><TH ALIGN=LEFT>Thread</TH>");
  ws_writefd(pwsc, (char *)"<TH ALIGN=LEFT>Session</TH><TH ALIGN=LEFT>Host</TH>");
  ws_writefd(pwsc, (char *)"<TH ALIGN=LEFT>Action</TH></TR>\n");
  pss = scan_status.next;
  while (pss) {
    ws_writefd(pwsc, (char *)"<TR><TD>%d</TD><TD>%d</TD><TD>%s</TD><TD>%s</TD></TR>\n",
               pss->thread, pss->session, pss->host, pss->what);
    pss = pss->next;
  }
  ws_writefd(pwsc, (char *)"</TABLE>\n");
  config_mutex_unlock();
  return;
}
}
static void config_emit_ispage(WS_CONNINFO *pwsc , void *value , char *arg ) 
{ char *first ;
  char *last ;
  char *page ;
  char *true ;
  char *false ;
  char __r0 ;
  char __r1 ;
  char __r2 ;
  size_t __len___2 ;
  size_t tmp___15 ;
  char *__retval___2 ;
  char *tmp___16 ;
  int tmp___18 ;
  char __r0___0 ;
  char __r1___0 ;
  char __r2___0 ;
  size_t __len___6 ;
  size_t tmp___35 ;
  char *__retval___6 ;
  char *tmp___36 ;
  int tmp___38 ;
  size_t __len___10 ;
  size_t tmp___55 ;
  char *__retval___10 ;
  char *tmp___56 ;
  int tmp___58 ;
  size_t __len___14 ;
  size_t tmp___75 ;
  char *__retval___14 ;
  char *tmp___76 ;
  int tmp___78 ;
  size_t tmp___79 ;
  size_t tmp___80 ;
  size_t tmp___81 ;
  size_t tmp___82 ;
  int tmp___83 ;

  {
  err_log(9, 3U, (char *)"Splitting arg %s\n", arg);
  last = arg;
  first = last;
  if ((unsigned int )((void const   *)(":" + 1)) - (unsigned int )((void const   *)":") ==
      1U) {
    __r0 = (char )(*(":" + 0));
    if ((int const   )(*(":" + 0)) != 0) {
      __r1 = (char )(*(":" + 1));
      if ((int const   )(*(":" + 1)) == 0) {
        __strsep_1c__extinline(& last, __r0);
      } else {
        __r2 = (char )(*(":" + 2));
        if ((int )__r2 == 0) {
          __strsep_2c__extinline(& last, __r0, __r1);
        } else {
          if ((int const   )(*(":" + 3)) == 0) {
            __strsep_3c__extinline(& last, __r0, __r1, __r2);
          } else {
            __strsep_g(& last, ":");
          }
        }
      }
    } else {
      goto _L;
    }
  } else {
    _L: /* CIL Label */ 
    __strsep_g(& last, ":");
  }
  if (last) {
    tmp___18 = __builtin_constant_p(first);
    if (tmp___18) {
      if ((unsigned int )((void const   *)(first + 1)) - (unsigned int )((void const   *)first) ==
          1U) {
        if ((int const   )(*((char const   *)first + 0)) == 0) {
          page = (char *)calloc(1U, 1U);
        } else {
          tmp___15 = strlen((char const   *)first);
          __len___2 = tmp___15 + 1U;
          tmp___16 = (char *)malloc(__len___2);
          __retval___2 = tmp___16;
          if ((unsigned int )__retval___2 != (unsigned int )((void *)0)) {
            __retval___2 = (char *)memcpy((void * __restrict  )__retval___2, (void const   * __restrict  )first,
                                          __len___2);
          }
          page = __retval___2;
        }
      } else {
        goto _L___0;
      }
    } else {
      _L___0: /* CIL Label */ 
      page = __strdup((char const   *)first);
    }
    if (! page) {
      return;
    }
    first = last;
    if ((unsigned int )((void const   *)(":" + 1)) - (unsigned int )((void const   *)":") ==
        1U) {
      __r0___0 = (char )(*(":" + 0));
      if ((int const   )(*(":" + 0)) != 0) {
        __r1___0 = (char )(*(":" + 1));
        if ((int const   )(*(":" + 1)) == 0) {
          __strsep_1c__extinline(& last, __r0___0);
        } else {
          __r2___0 = (char )(*(":" + 2));
          if ((int )__r2___0 == 0) {
            __strsep_2c__extinline(& last, __r0___0, __r1___0);
          } else {
            if ((int const   )(*(":" + 3)) == 0) {
              __strsep_3c__extinline(& last, __r0___0, __r1___0, __r2___0);
            } else {
              __strsep_g(& last, ":");
            }
          }
        }
      } else {
        goto _L___1;
      }
    } else {
      _L___1: /* CIL Label */ 
      __strsep_g(& last, ":");
    }
    if (last) {
      tmp___38 = __builtin_constant_p(first);
      if (tmp___38) {
        if ((unsigned int )((void const   *)(first + 1)) - (unsigned int )((void const   *)first) ==
            1U) {
          if ((int const   )(*((char const   *)first + 0)) == 0) {
            true = (char *)calloc(1U, 1U);
          } else {
            tmp___35 = strlen((char const   *)first);
            __len___6 = tmp___35 + 1U;
            tmp___36 = (char *)malloc(__len___6);
            __retval___6 = tmp___36;
            if ((unsigned int )__retval___6 != (unsigned int )((void *)0)) {
              __retval___6 = (char *)memcpy((void * __restrict  )__retval___6, (void const   * __restrict  )first,
                                            __len___6);
            }
            true = __retval___6;
          }
        } else {
          goto _L___2;
        }
      } else {
        _L___2: /* CIL Label */ 
        true = __strdup((char const   *)first);
      }
      tmp___58 = __builtin_constant_p(last);
      if (tmp___58) {
        if ((unsigned int )((void const   *)(last + 1)) - (unsigned int )((void const   *)last) ==
            1U) {
          if ((int const   )(*((char const   *)last + 0)) == 0) {
            false = (char *)calloc(1U, 1U);
          } else {
            tmp___55 = strlen((char const   *)last);
            __len___10 = tmp___55 + 1U;
            tmp___56 = (char *)malloc(__len___10);
            __retval___10 = tmp___56;
            if ((unsigned int )__retval___10 != (unsigned int )((void *)0)) {
              __retval___10 = (char *)memcpy((void * __restrict  )__retval___10, (void const   * __restrict  )last,
                                             __len___10);
            }
            false = __retval___10;
          }
        } else {
          goto _L___3;
        }
      } else {
        _L___3: /* CIL Label */ 
        false = __strdup((char const   *)last);
      }
      if (! true) {
        goto _L___4;
      } else {
        if (! false) {
          _L___4: /* CIL Label */ 
          return;
        }
      }
    } else {
      tmp___78 = __builtin_constant_p(first);
      if (tmp___78) {
        if ((unsigned int )((void const   *)(first + 1)) - (unsigned int )((void const   *)first) ==
            1U) {
          if ((int const   )(*((char const   *)first + 0)) == 0) {
            true = (char *)calloc(1U, 1U);
          } else {
            tmp___75 = strlen((char const   *)first);
            __len___14 = tmp___75 + 1U;
            tmp___76 = (char *)malloc(__len___14);
            __retval___14 = tmp___76;
            if ((unsigned int )__retval___14 != (unsigned int )((void *)0)) {
              __retval___14 = (char *)memcpy((void * __restrict  )__retval___14, (void const   * __restrict  )first,
                                             __len___14);
            }
            true = __retval___14;
          }
        } else {
          goto _L___5;
        }
      } else {
        _L___5: /* CIL Label */ 
        true = __strdup((char const   *)first);
      }
      if (! true) {
        return;
      }
      false = (char *)((void *)0);
    }
  } else {
    return;
  }
  err_log(9, 3U, (char *)"page: %s, uri: %s\n", page, pwsc->uri);
  tmp___79 = strlen((char const   *)page);
  tmp___80 = strlen((char const   *)pwsc->uri);
  if (tmp___79 > tmp___80) {
    goto _L___6;
  } else {
    tmp___81 = strlen((char const   *)pwsc->uri);
    tmp___82 = strlen((char const   *)page);
    tmp___83 = strcasecmp((char const   *)page, (char const   *)(pwsc->uri + (tmp___81 -
                                                                              tmp___82)));
    if (tmp___83 != 0) {
      _L___6: /* CIL Label */ 
      ws_writefd(pwsc, (char *)"%s", false);
    } else {
      ws_writefd(pwsc, (char *)"%s", true);
    }
  }
  if (page) {
    free((void *)page);
  }
  if (true) {
    free((void *)true);
  }
  if (false) {
    free((void *)false);
  }
  return;
}
}
static void config_emit_user(WS_CONNINFO *pwsc , void *value , char *arg ) 
{ char *tmp ;
  char *tmp___0 ;

  {
  tmp___0 = ws_getvar(pwsc, (char *)"HTTP_USER");
  if (tmp___0) {
    tmp = ws_getvar(pwsc, (char *)"HTTP_USER");
    ws_writefd(pwsc, (char *)"%s", tmp);
  }
  return;
}
}
static int config_file_is_readonly(void) 
{ FILE *fin ;

  {
  fin = fopen((char const   * __restrict  )config.configfile, (char const   * __restrict  )"r+");
  if (! fin) {
    return (1);
  }
  fclose(fin);
  return (0);
}
}
static void config_emit_readonly(WS_CONNINFO *pwsc , void *value , char *arg ) 
{ int tmp ;

  {
  tmp = config_file_is_readonly();
  if (tmp) {
    ws_writefd(pwsc, (char *)"READONLY");
  }
  return;
}
}
static void config_emit_include(WS_CONNINFO *pwsc , void *value , char *arg ) 
{ char resolved_path[4096] ;
  char path[4096] ;
  int file_fd ;
  struct stat sb ;
  int *tmp ;
  char *tmp___0 ;
  int tmp___70 ;
  size_t __s1_len___0 ;
  size_t __s2_len___0 ;
  int tmp___101 ;
  size_t tmp___102 ;
  register int __result___85 ;
  unsigned char const   *__s2___14 ;
  register int __result___86 ;
  int tmp___117 ;
  register int __result___93 ;
  unsigned char const   *__s1___30 ;
  register int __result___94 ;
  int tmp___124 ;
  int tmp___125 ;
  int tmp___126 ;
  int tmp___127 ;
  int tmp___128 ;
  int tmp___129 ;
  size_t tmp___130 ;
  size_t tmp___131 ;
  int tmp___132 ;
  int tmp___133 ;
  size_t tmp___134 ;
  size_t tmp___135 ;
  int tmp___136 ;
  size_t tmp___137 ;
  size_t tmp___138 ;
  int *tmp___139 ;
  int *tmp___140 ;
  char *tmp___141 ;
  int *tmp___142 ;
  char *tmp___143 ;

  {
  err_log(9, 3U, (char *)"Preparing to include %s\n", arg);
  snprintf((char * __restrict  )(path), 4096U, (char const   * __restrict  )"%s/%s",
           config.web_root, arg);
  tmp___0 = realpath((char const   * __restrict  )(path), (char * __restrict  )(resolved_path));
  if (! tmp___0) {
    tmp = __errno_location();
    pwsc->error = (*tmp);
    err_log(2, 3U, (char *)"Cannot resolve %s\n", path);
    ws_writefd(pwsc, (char *)"<hr><i>error: cannot find %s</i><hr>", arg);
    return;
  }
  stat__extinline((char const   *)(resolved_path), & sb);
  if (sb.st_mode & 16384U) {
    ws_writefd(pwsc, (char *)"<hr><i>error: cannot include director %s</i><hr>", arg);
    return;
  }
  err_log(9, 3U, (char *)"Thread %d: Preparing to serve %s\n", pwsc->threadno, resolved_path);
  tmp___131 = strlen((char const   *)config.web_root);
  tmp___132 = __builtin_constant_p(tmp___131);
  if (tmp___132) {
    tmp___133 = __builtin_constant_p(resolved_path);
    if (tmp___133) {
      tmp___134 = strlen((char const   *)(resolved_path));
      tmp___135 = strlen((char const   *)config.web_root);
      if (tmp___134 < tmp___135) {
        goto _L___352;
      } else {
        goto _L___354;
      }
    } else {
      _L___354: /* CIL Label */ 
      tmp___136 = __builtin_constant_p(config.web_root);
      if (tmp___136) {
        tmp___137 = strlen((char const   *)config.web_root);
        tmp___138 = strlen((char const   *)config.web_root);
        if (tmp___137 < tmp___138) {
          _L___352: /* CIL Label */ 
          tmp___127 = __builtin_constant_p(resolved_path);
          if (tmp___127) {
            tmp___128 = __builtin_constant_p(config.web_root);
            if (tmp___128) {
              __s1_len___0 = strlen((char const   *)(resolved_path));
              __s2_len___0 = strlen((char const   *)config.web_root);
              if (! ((unsigned int )((void const   *)(resolved_path + 1)) - (unsigned int )((void const   *)(resolved_path)) ==
                     1U)) {
                goto _L___348;
              } else {
                if (__s1_len___0 >= 4U) {
                  _L___348: /* CIL Label */ 
                  if (! ((unsigned int )((void const   *)(config.web_root + 1)) -
                         (unsigned int )((void const   *)config.web_root) == 1U)) {
                    goto _L___347;
                  } else {
                    if (__s2_len___0 >= 4U) {
                      _L___347: /* CIL Label */ 
                      tmp___129 = 1;
                    } else {
                      goto _L___346;
                    }
                  }
                } else {
                  _L___346: /* CIL Label */ 
                  tmp___129 = 0;
                }
              }
              if (tmp___129) {
                if (__s1_len___0 < __s2_len___0) {
                  tmp___102 = __s1_len___0;
                } else {
                  tmp___102 = __s2_len___0;
                }
                tmp___101 = memcmp((void const   *)((char const   *)(resolved_path)),
                                   (void const   *)((char const   *)config.web_root),
                                   tmp___102 + 1U);
              } else {
                goto _L___350;
              }
            } else {
              goto _L___350;
            }
          } else {
            _L___350: /* CIL Label */ 
            tmp___126 = __builtin_constant_p(resolved_path);
            if (tmp___126) {
              if ((unsigned int )((void const   *)(resolved_path + 1)) - (unsigned int )((void const   *)(resolved_path)) ==
                  1U) {
                __s1_len___0 = strlen((char const   *)(resolved_path));
                if (__s1_len___0 < 4U) {
                  tmp___117 = __builtin_constant_p(config.web_root);
                  if (tmp___117) {
                    if ((unsigned int )((void const   *)(config.web_root + 1)) - (unsigned int )((void const   *)config.web_root) ==
                        1U) {
                      __result___85 = (int )((int const   )(*((unsigned char const   *)((char const   *)(resolved_path)) +
                                                              0)) - (int const   )(*((unsigned char const   *)((char const   *)config.web_root) +
                                                                                     0)));
                      if (__s1_len___0 > 0U) {
                        if (__result___85 == 0) {
                          __result___85 = (int )((int const   )(*((unsigned char const   *)((char const   *)(resolved_path)) +
                                                                  1)) - (int const   )(*((unsigned char const   *)((char const   *)config.web_root) +
                                                                                         1)));
                          if (__s1_len___0 > 1U) {
                            if (__result___85 == 0) {
                              __result___85 = (int )((int const   )(*((unsigned char const   *)((char const   *)(resolved_path)) +
                                                                      2)) - (int const   )(*((unsigned char const   *)((char const   *)config.web_root) +
                                                                                             2)));
                              if (__s1_len___0 > 2U) {
                                if (__result___85 == 0) {
                                  __result___85 = (int )((int const   )(*((unsigned char const   *)((char const   *)(resolved_path)) +
                                                                          3)) - (int const   )(*((unsigned char const   *)((char const   *)config.web_root) +
                                                                                                 3)));
                                } else {
                                  goto _L___309;
                                }
                              } else {
                                _L___309: /* CIL Label */ ;
                              }
                            } else {
                              goto _L___310;
                            }
                          } else {
                            _L___310: /* CIL Label */ ;
                          }
                        } else {
                          goto _L___311;
                        }
                      } else {
                        _L___311: /* CIL Label */ ;
                      }
                      tmp___101 = __result___85;
                    } else {
                      goto _L___315;
                    }
                  } else {
                    _L___315: /* CIL Label */ 
                    __s2___14 = (unsigned char const   *)((char const   *)config.web_root);
                    __result___86 = (int )((int const   )(*((unsigned char const   *)((char const   *)(resolved_path)) +
                                                            0)) - (int const   )(*(__s2___14 +
                                                                                   0)));
                    if (__s1_len___0 > 0U) {
                      if (__result___86 == 0) {
                        __result___86 = (int )((int const   )(*((unsigned char const   *)((char const   *)(resolved_path)) +
                                                                1)) - (int const   )(*(__s2___14 +
                                                                                       1)));
                        if (__s1_len___0 > 1U) {
                          if (__result___86 == 0) {
                            __result___86 = (int )((int const   )(*((unsigned char const   *)((char const   *)(resolved_path)) +
                                                                    2)) - (int const   )(*(__s2___14 +
                                                                                           2)));
                            if (__s1_len___0 > 2U) {
                              if (__result___86 == 0) {
                                __result___86 = (int )((int const   )(*((unsigned char const   *)((char const   *)(resolved_path)) +
                                                                        3)) - (int const   )(*(__s2___14 +
                                                                                               3)));
                              } else {
                                goto _L___312;
                              }
                            } else {
                              _L___312: /* CIL Label */ ;
                            }
                          } else {
                            goto _L___313;
                          }
                        } else {
                          _L___313: /* CIL Label */ ;
                        }
                      } else {
                        goto _L___314;
                      }
                    } else {
                      _L___314: /* CIL Label */ ;
                    }
                    tmp___101 = __result___86;
                  }
                } else {
                  goto _L___345;
                }
              } else {
                goto _L___345;
              }
            } else {
              _L___345: /* CIL Label */ 
              tmp___125 = __builtin_constant_p(config.web_root);
              if (tmp___125) {
                if ((unsigned int )((void const   *)(config.web_root + 1)) - (unsigned int )((void const   *)config.web_root) ==
                    1U) {
                  __s2_len___0 = strlen((char const   *)config.web_root);
                  if (__s2_len___0 < 4U) {
                    tmp___124 = __builtin_constant_p(resolved_path);
                    if (tmp___124) {
                      if ((unsigned int )((void const   *)(resolved_path + 1)) - (unsigned int )((void const   *)(resolved_path)) ==
                          1U) {
                        __result___93 = (int )((int const   )(*((unsigned char const   *)((char const   *)(resolved_path)) +
                                                                0)) - (int const   )(*((unsigned char const   *)((char const   *)config.web_root) +
                                                                                       0)));
                        if (__s2_len___0 > 0U) {
                          if (__result___93 == 0) {
                            __result___93 = (int )((int const   )(*((unsigned char const   *)((char const   *)(resolved_path)) +
                                                                    1)) - (int const   )(*((unsigned char const   *)((char const   *)config.web_root) +
                                                                                           1)));
                            if (__s2_len___0 > 1U) {
                              if (__result___93 == 0) {
                                __result___93 = (int )((int const   )(*((unsigned char const   *)((char const   *)(resolved_path)) +
                                                                        2)) - (int const   )(*((unsigned char const   *)((char const   *)config.web_root) +
                                                                                               2)));
                                if (__s2_len___0 > 2U) {
                                  if (__result___93 == 0) {
                                    __result___93 = (int )((int const   )(*((unsigned char const   *)((char const   *)(resolved_path)) +
                                                                            3)) -
                                                           (int const   )(*((unsigned char const   *)((char const   *)config.web_root) +
                                                                            3)));
                                  } else {
                                    goto _L___335;
                                  }
                                } else {
                                  _L___335: /* CIL Label */ ;
                                }
                              } else {
                                goto _L___336;
                              }
                            } else {
                              _L___336: /* CIL Label */ ;
                            }
                          } else {
                            goto _L___337;
                          }
                        } else {
                          _L___337: /* CIL Label */ ;
                        }
                        tmp___101 = __result___93;
                      } else {
                        goto _L___341;
                      }
                    } else {
                      _L___341: /* CIL Label */ 
                      __s1___30 = (unsigned char const   *)((char const   *)(resolved_path));
                      __result___94 = (int )((int const   )(*(__s1___30 + 0)) - (int const   )(*((unsigned char const   *)((char const   *)config.web_root) +
                                                                                                 0)));
                      if (__s2_len___0 > 0U) {
                        if (__result___94 == 0) {
                          __result___94 = (int )((int const   )(*(__s1___30 + 1)) -
                                                 (int const   )(*((unsigned char const   *)((char const   *)config.web_root) +
                                                                  1)));
                          if (__s2_len___0 > 1U) {
                            if (__result___94 == 0) {
                              __result___94 = (int )((int const   )(*(__s1___30 +
                                                                      2)) - (int const   )(*((unsigned char const   *)((char const   *)config.web_root) +
                                                                                             2)));
                              if (__s2_len___0 > 2U) {
                                if (__result___94 == 0) {
                                  __result___94 = (int )((int const   )(*(__s1___30 +
                                                                          3)) - (int const   )(*((unsigned char const   *)((char const   *)config.web_root) +
                                                                                                 3)));
                                } else {
                                  goto _L___338;
                                }
                              } else {
                                _L___338: /* CIL Label */ ;
                              }
                            } else {
                              goto _L___339;
                            }
                          } else {
                            _L___339: /* CIL Label */ ;
                          }
                        } else {
                          goto _L___340;
                        }
                      } else {
                        _L___340: /* CIL Label */ ;
                      }
                      tmp___101 = __result___94;
                    }
                  } else {
                    goto _L___343;
                  }
                } else {
                  goto _L___343;
                }
              } else {
                _L___343: /* CIL Label */ 
                tmp___101 = strcmp((char const   *)(resolved_path), (char const   *)config.web_root);
              }
            }
          }
          tmp___70 = tmp___101;
        } else {
          goto _L___353;
        }
      } else {
        _L___353: /* CIL Label */ 
        goto _L___351;
      }
    }
  } else {
    _L___351: /* CIL Label */ 
    tmp___130 = strlen((char const   *)config.web_root);
    tmp___70 = strncmp((char const   *)(resolved_path), (char const   *)config.web_root,
                       tmp___130);
  }
  if (tmp___70) {
    pwsc->error = 22;
    err_log(1, 3U, (char *)"Thread %d: Requested file %s out of root\n", pwsc->threadno,
            resolved_path);
    ws_writefd(pwsc, (char *)"<hr><i>error: %s out of web root</i><hr>", arg);
    return;
  }
  file_fd = r_open2((char const   *)(resolved_path), 0);
  if (file_fd == -1) {
    tmp___139 = __errno_location();
    pwsc->error = (*tmp___139);
    tmp___140 = __errno_location();
    tmp___141 = strerror((*tmp___140));
    err_log(1, 3U, (char *)"Thread %d: Error opening %s: %s\n", pwsc->threadno, resolved_path,
            tmp___141);
    tmp___142 = __errno_location();
    tmp___143 = strerror((*tmp___142));
    ws_writefd(pwsc, (char *)"<hr><i>error: cannot open %s: %s</i><hr>", arg, tmp___143);
    return;
  }
  config_subst_stream(pwsc, file_fd);
  r_close(file_fd);
  err_log(9, 3U, (char *)"Thread %d: included successfully\n", pwsc->threadno);
  return;
}
}
void config_set_status(WS_CONNINFO *pwsc , int session , char *fmt  , ...) 
{ char buffer___0[1024] ;
  va_list ap ;
  SCAN_STATUS *pfirst ;
  SCAN_STATUS *plast ;
  int tmp ;
  size_t __len___2 ;
  size_t tmp___16 ;
  char *__retval___2 ;
  char *tmp___17 ;
  int tmp___19 ;
  size_t __len___6 ;
  size_t tmp___37 ;
  char *__retval___6 ;
  char *tmp___38 ;
  int tmp___40 ;
  size_t __len___10 ;
  size_t tmp___57 ;
  char *__retval___10 ;
  char *tmp___58 ;
  int tmp___60 ;

  {
  err_log(9, 1U, (char *)"Entering config_set_status\n");
  tmp = config_mutex_lock();
  if (tmp) {
    err_log(0, 1U, (char *)"Error acquiring config mutex\n");
  }
  plast = scan_status.next;
  pfirst = plast;
  while (1) {
    if (pfirst) {
      if (! (pfirst->thread != pwsc->threadno)) {
        goto _L;
      }
    } else {
      _L: /* CIL Label */ 
      break;
    }
    plast = pfirst;
    pfirst = pfirst->next;
  }
  if (fmt) {
    __builtin_stdarg_start(ap, fmt);
    vsnprintf((char * __restrict  )(buffer___0), 1024U, (char const   * __restrict  )fmt,
              ap);
    __builtin_va_end(ap);
    if (pfirst) {
      free((void *)pfirst->what);
      tmp___19 = __builtin_constant_p(buffer___0);
      if (tmp___19) {
        if ((unsigned int )((void const   *)(buffer___0 + 1)) - (unsigned int )((void const   *)(buffer___0)) ==
            1U) {
          if ((int const   )(*((char const   *)(buffer___0) + 0)) == 0) {
            pfirst->what = (char *)calloc(1U, 1U);
          } else {
            tmp___16 = strlen((char const   *)(buffer___0));
            __len___2 = tmp___16 + 1U;
            tmp___17 = (char *)malloc(__len___2);
            __retval___2 = tmp___17;
            if ((unsigned int )__retval___2 != (unsigned int )((void *)0)) {
              __retval___2 = (char *)memcpy((void * __restrict  )__retval___2, (void const   * __restrict  )(buffer___0),
                                            __len___2);
            }
            pfirst->what = __retval___2;
          }
        } else {
          goto _L___0;
        }
      } else {
        _L___0: /* CIL Label */ 
        pfirst->what = __strdup((char const   *)(buffer___0));
      }
      pfirst->session = session;
    } else {
      pfirst = (SCAN_STATUS *)malloc(sizeof(SCAN_STATUS ));
      if (pfirst) {
        tmp___40 = __builtin_constant_p(buffer___0);
        if (tmp___40) {
          if ((unsigned int )((void const   *)(buffer___0 + 1)) - (unsigned int )((void const   *)(buffer___0)) ==
              1U) {
            if ((int const   )(*((char const   *)(buffer___0) + 0)) == 0) {
              pfirst->what = (char *)calloc(1U, 1U);
            } else {
              tmp___37 = strlen((char const   *)(buffer___0));
              __len___6 = tmp___37 + 1U;
              tmp___38 = (char *)malloc(__len___6);
              __retval___6 = tmp___38;
              if ((unsigned int )__retval___6 != (unsigned int )((void *)0)) {
                __retval___6 = (char *)memcpy((void * __restrict  )__retval___6, (void const   * __restrict  )(buffer___0),
                                              __len___6);
              }
              pfirst->what = __retval___6;
            }
          } else {
            goto _L___1;
          }
        } else {
          _L___1: /* CIL Label */ 
          pfirst->what = __strdup((char const   *)(buffer___0));
        }
        pfirst->session = session;
        pfirst->thread = pwsc->threadno;
        pfirst->next = scan_status.next;
        tmp___60 = __builtin_constant_p(pwsc->hostname);
        if (tmp___60) {
          if ((unsigned int )((void const   *)(pwsc->hostname + 1)) - (unsigned int )((void const   *)pwsc->hostname) ==
              1U) {
            if ((int const   )(*((char const   *)pwsc->hostname + 0)) == 0) {
              pfirst->host = (char *)calloc(1U, 1U);
            } else {
              tmp___57 = strlen((char const   *)pwsc->hostname);
              __len___10 = tmp___57 + 1U;
              tmp___58 = (char *)malloc(__len___10);
              __retval___10 = tmp___58;
              if ((unsigned int )__retval___10 != (unsigned int )((void *)0)) {
                __retval___10 = (char *)memcpy((void * __restrict  )__retval___10,
                                               (void const   * __restrict  )pwsc->hostname,
                                               __len___10);
              }
              pfirst->host = __retval___10;
            }
          } else {
            goto _L___2;
          }
        } else {
          _L___2: /* CIL Label */ 
          pfirst->host = __strdup((char const   *)pwsc->hostname);
        }
        scan_status.next = pfirst;
      }
    }
  } else {
    if (! pfirst) {
      config_mutex_unlock();
      err_log(9, 1U, (char *)"Exiting config_set_status\n");
      return;
    }
    if ((unsigned int )pfirst == (unsigned int )plast) {
      scan_status.next = pfirst->next;
      free((void *)pfirst->what);
      free((void *)pfirst->host);
      free((void *)pfirst);
    } else {
      plast->next = pfirst->next;
      free((void *)pfirst->what);
      free((void *)pfirst->host);
      free((void *)pfirst);
    }
  }
  config_mutex_unlock();
  err_log(9, 1U, (char *)"Exiting config_set_status\n");
  return;
}
}
static int config_mutex_lock(void) 
{ int err ;
  int *tmp ;

  {
  err = pthread_mutex_lock(& scan_mutex);
  if (err) {
    tmp = __errno_location();
    (*tmp) = err;
    return (-1);
  }
  return (0);
}
}
static int config_mutex_unlock(void) 
{ int err ;
  int *tmp ;

  {
  err = pthread_mutex_unlock(& scan_mutex);
  if (err) {
    tmp = __errno_location();
    (*tmp) = err;
    return (-1);
  }
  return (0);
}
}
int config_get_next_session(void) 
{ int session ;

  {
  config_mutex_lock();
  config_session ++;
  session = config_session;
  config_mutex_unlock();
  return (session);
}
}
static void config_emit_version(WS_CONNINFO *pwsc , void *value , char *arg ) 
{ 

  {
  ws_writefd(pwsc, (char *)"%s", "0.2.4");
  return;
}
}
static void config_emit_system(WS_CONNINFO *pwsc , void *value , char *arg ) 
{ 

  {
  ws_writefd(pwsc, (char *)"%s", "i686-pc-linux-gnu");
  return;
}
}
static void config_emit_flags(WS_CONNINFO *pwsc , void *value , char *arg ) 
{ 

  {
  return;
}
}
#pragma merger(0,"/tmp/cil-LMVPOy3e.i","-g -g -O2")
extern size_t strftime(char * __restrict  __s , size_t __maxsize , char const   * __restrict  __format ,
                       struct tm  const  * __restrict  __tp ) ;
extern struct tm *localtime_r(time_t const   * __restrict  __timer , struct tm * __restrict  __tp ) ;
extern char *__strtok_r(char * __restrict  __s , char const   * __restrict  __delim ,
                        char ** __restrict  __save_ptr ) ;
__inline static char *__strtok_r_1c__extinline(char *__s , char __sep , char **__nextp ) 
{ char *__result ;
  char *tmp ;
  char *tmp___0 ;

  {
  if ((unsigned int )__s == (unsigned int )((void *)0)) {
    __s = (*__nextp);
  }
  while ((int )(*__s) == (int )__sep) {
    __s ++;
  }
  __result = (char *)((void *)0);
  if ((int )(*__s) != 0) {
    tmp = __s;
    __s ++;
    __result = tmp;
    while ((int )(*__s) != 0) {
      tmp___0 = __s;
      __s ++;
      if ((int )(*tmp___0) == (int )__sep) {
        (*(__s + -1)) = (char )'\000';
        break;
      }
    }
    (*__nextp) = __s;
  }
  return (__result);
}
}
extern void closelog(void) ;
extern void openlog(char const   *__ident , int __option , int __facility ) ;
extern void ( /* format attribute */  syslog)(int __pri , char const   *__fmt  , ...) ;
int err_debuglevel  =    0;
static int err_logdestination  =    0;
static FILE *err_file  =    (FILE *)((void *)0);
static struct __anonstruct_pthread_mutex_t_7 err_mutex  =    {0, 0, (_pthread_descr )0, 0, {0L, 0}};
static unsigned int err_debugmask  =    4294967295U;
static char *err_categorylist[13]  = 
  {      (char *)"config",      (char *)"webserver",      (char *)"database",      (char *)"scan", 
        (char *)"query",      (char *)"index",      (char *)"browse",      (char *)"playlist", 
        (char *)"art",      (char *)"daap",      (char *)"main",      (char *)"rend", 
        (char *)((void *)0)};
static int err_lock_mutex(void) ;
static int err_unlock_mutex(void) ;
void err_log(int level , unsigned int cat , char *fmt  , ...) 
{ va_list ap ;
  char timebuf[256] ;
  char errbuf[1024] ;
  struct tm tm_now ;
  time_t tt_now ;

  {
  if (level) {
    if (level > err_debuglevel) {
      return;
    }
    if (! (cat & err_debugmask)) {
      return;
    }
  }
  __builtin_stdarg_start(ap, fmt);
  vsnprintf((char * __restrict  )(errbuf), sizeof(errbuf), (char const   * __restrict  )fmt,
            ap);
  __builtin_va_end(ap);
  err_lock_mutex();
  if (! level) {
    if (err_logdestination != 0) {
      if (! (cat & 2048U)) {
        fprintf((FILE * __restrict  )stderr, (char const   * __restrict  )"%s", errbuf);
        fprintf((FILE * __restrict  )stderr, (char const   * __restrict  )"Aborting\n");
        fflush(stderr);
      } else {
        goto _L___0;
      }
    } else {
      goto _L___0;
    }
  } else {
    _L___0: /* CIL Label */ ;
  }
  switch (err_logdestination) {
  case 2: 
  tt_now = time((time_t *)((void *)0));
  localtime_r((time_t const   * __restrict  )(& tt_now), (struct tm * __restrict  )(& tm_now));
  strftime((char * __restrict  )(timebuf), sizeof(timebuf), (char const   * __restrict  )"%Y-%m-%d %T",
           (struct tm  const  * __restrict  )(& tm_now));
  fprintf((FILE * __restrict  )err_file, (char const   * __restrict  )"%s: %s", timebuf,
          errbuf);
  if (! level) {
    fprintf((FILE * __restrict  )err_file, (char const   * __restrict  )"%s: Aborting\n",
            timebuf);
  }
  fflush(err_file);
  break;
  case 0: 
  fprintf((FILE * __restrict  )stderr, (char const   * __restrict  )"%s", errbuf);
  if (! level) {
    fprintf((FILE * __restrict  )stderr, (char const   * __restrict  )"Aborting\n");
  }
  break;
  case 1: 
  syslog(5, "%s", errbuf);
  if (! level) {
    syslog(6, "Aborting\n");
  }
  break;
  }
  err_unlock_mutex();
  if (! level) {
    exit(1);
  }
  return;
}
}
void err_setdest(char *app , int destination ) 
{ int *tmp ;
  char *tmp___0 ;

  {
  if (err_logdestination == destination) {
    return;
  }
  switch (err_logdestination) {
  case 1: 
  closelog();
  break;
  case 2: 
  fclose(err_file);
  break;
  }
  switch (destination) {
  case 2: 
  err_file = fopen((char const   * __restrict  )app, (char const   * __restrict  )"a");
  if ((unsigned int )err_file == (unsigned int )((void *)0)) {
    tmp = __errno_location();
    tmp___0 = strerror((*tmp));
    fprintf((FILE * __restrict  )stderr, (char const   * __restrict  )"Error opening %s: %s\n",
            app, tmp___0);
    exit(1);
  }
  break;
  case 1: 
  openlog((char const   *)app, 1, 24);
  break;
  }
  err_logdestination = destination;
  return;
}
}
extern int err_setdebugmask(char *list ) 
{ unsigned int rack ;
  char *token ;
  char *str ;
  char *last ;
  int index___0 ;
  int tmp___5 ;

  {
  err_debugmask = 2147483648U;
  str = list;
  while (1) {
    if ((unsigned int )((void const   *)("," + 1)) - (unsigned int )((void const   *)",") ==
        1U) {
      if ((int const   )(*("," + 0)) != 0) {
        if ((int const   )(*("," + 1)) == 0) {
          token = __strtok_r_1c__extinline(str, (char )(*("," + 0)), & last);
        } else {
          goto _L___0;
        }
      } else {
        _L___0: /* CIL Label */ 
        token = __strtok_r((char * __restrict  )str, (char const   * __restrict  )",",
                           (char ** __restrict  )(& last));
      }
    } else {
      token = __strtok_r((char * __restrict  )str, (char const   * __restrict  )",",
                         (char ** __restrict  )(& last));
    }
    str = (char *)((void *)0);
    if (token) {
      rack = 1U;
      index___0 = 0;
      while (1) {
        if (err_categorylist[index___0]) {
          tmp___5 = strcasecmp((char const   *)err_categorylist[index___0], (char const   *)token);
          if (! tmp___5) {
            goto _L___1;
          }
        } else {
          _L___1: /* CIL Label */ 
          break;
        }
        rack <<= 1;
        index___0 ++;
      }
      if (! err_categorylist[index___0]) {
        err_log(1, 2147483648U, (char *)"Unknown module: %s\n", token);
        return (1);
      } else {
        err_log(9, 2147483648U, (char *)"Adding module %s to debug list (0x%08x)\n",
                token, rack);
        err_debugmask |= rack;
      }
    } else {
      break;
    }
  }
  err_log(5, 2147483648U, (char *)"Debug mask is 0x%08x\n", err_debugmask);
  return (0);
}
}
static int err_lock_mutex(void) 
{ int err ;
  int *tmp ;

  {
  err = pthread_mutex_lock(& err_mutex);
  if (err) {
    tmp = __errno_location();
    (*tmp) = err;
    return (-1);
  }
  return (0);
}
}
static int err_unlock_mutex(void) 
{ int err ;
  int *tmp ;

  {
  err = pthread_mutex_unlock(& err_mutex);
  if (err) {
    tmp = __errno_location();
    (*tmp) = err;
    return (-1);
  }
  return (0);
}
}
#pragma merger(0,"/tmp/cil-9gCby0Nf.i","-g -g -O2")
extern int gettimeofday(struct timeval * __restrict  __tv , __timezone_ptr_t __tz ) ;
extern __pid_t waitpid(__pid_t __pid , int *__stat_loc , int __options ) ;
extern ssize_t read(int __fd , void *__buf , size_t __nbytes ) ;
extern ssize_t write(int __fd , void const   *__buf , size_t __n ) ;
struct timeval add2currenttime(double seconds ) ;
int r_dup2(int fildes , int fildes2 ) ;
int r_open3(char const   *path , int oflag , mode_t mode ) ;
pid_t r_wait(int *stat_loc ) ;
pid_t r_waitpid(pid_t pid , int *stat_loc , int options ) ;
ssize_t readblock(int fd , void *buf , size_t size ) ;
int readwrite(int fromfd , int tofd ) ;
int readwriteblock(int fromfd , int tofd , char *buf , int size ) ;
int waitfdtimed(int fd , struct timeval end ) ;
static int gettimeout(struct timeval end , struct timeval *timeoutp ) 
{ int *tmp ;

  {
  gettimeofday((struct timeval * __restrict  )timeoutp, (struct timezone * __restrict  )((void *)0));
  timeoutp->tv_sec = end.tv_sec - timeoutp->tv_sec;
  timeoutp->tv_usec = end.tv_usec - timeoutp->tv_usec;
  if (timeoutp->tv_usec >= 1000000L) {
    timeoutp->tv_sec = timeoutp->tv_sec + 1L;
    timeoutp->tv_usec = timeoutp->tv_usec - 1000000L;
  }
  if (timeoutp->tv_usec < 0L) {
    timeoutp->tv_sec = timeoutp->tv_sec - 1L;
    timeoutp->tv_usec = timeoutp->tv_usec + 1000000L;
  }
  if (timeoutp->tv_sec < 0L) {
    goto _L;
  } else {
    if (timeoutp->tv_sec == 0L) {
      if (timeoutp->tv_usec == 0L) {
        _L: /* CIL Label */ 
        tmp = __errno_location();
        (*tmp) = 62;
        return (-1);
      } else {
        goto _L___0;
      }
    } else {
      _L___0: /* CIL Label */ ;
    }
  }
  return (0);
}
}
int r_close(int fildes ) 
{ int retval ;
  int *tmp ;
  int tmp___0 ;

  {
  while (1) {
    retval = close(fildes);
    if (retval == -1) {
      tmp = __errno_location();
      if ((*tmp) == 4) {
        tmp___0 = 1;
      } else {
        goto _L;
      }
    } else {
      _L: /* CIL Label */ 
      tmp___0 = 0;
    }
    if (! tmp___0) {
      break;
    }
  }
  return (retval);
}
}
int r_dup2(int fildes , int fildes2 ) 
{ int retval ;
  int *tmp ;
  int tmp___0 ;

  {
  while (1) {
    retval = dup2(fildes, fildes2);
    if (retval == -1) {
      tmp = __errno_location();
      if ((*tmp) == 4) {
        tmp___0 = 1;
      } else {
        goto _L;
      }
    } else {
      _L: /* CIL Label */ 
      tmp___0 = 0;
    }
    if (! tmp___0) {
      break;
    }
  }
  return (retval);
}
}
int r_open2(char const   *path , int oflag ) 
{ int retval ;
  int *tmp ;
  int tmp___0 ;

  {
  while (1) {
    retval = open(path, oflag);
    if (retval == -1) {
      tmp = __errno_location();
      if ((*tmp) == 4) {
        tmp___0 = 1;
      } else {
        goto _L;
      }
    } else {
      _L: /* CIL Label */ 
      tmp___0 = 0;
    }
    if (! tmp___0) {
      break;
    }
  }
  return (retval);
}
}
int r_open3(char const   *path , int oflag , mode_t mode ) 
{ int retval ;
  int *tmp ;
  int tmp___0 ;

  {
  while (1) {
    retval = open(path, oflag, mode);
    if (retval == -1) {
      tmp = __errno_location();
      if ((*tmp) == 4) {
        tmp___0 = 1;
      } else {
        goto _L;
      }
    } else {
      _L: /* CIL Label */ 
      tmp___0 = 0;
    }
    if (! tmp___0) {
      break;
    }
  }
  return (retval);
}
}
ssize_t r_read(int fd , void *buf , size_t size ) 
{ ssize_t retval ;
  int *tmp ;

  {
  while (1) {
    retval = read(fd, buf, size);
    if (retval == -1) {
      tmp = __errno_location();
      if (! ((*tmp) == 4)) {
        goto _L;
      }
    } else {
      _L: /* CIL Label */ 
      break;
    }
  }
  return (retval);
}
}
pid_t r_wait(int *stat_loc ) 
{ pid_t retval ;
  int *tmp ;

  {
  while (1) {
    retval = wait((union wait *)stat_loc);
    if (retval == -1) {
      tmp = __errno_location();
      if (! ((*tmp) == 4)) {
        goto _L;
      }
    } else {
      _L: /* CIL Label */ 
      break;
    }
  }
  return (retval);
}
}
pid_t r_waitpid(pid_t pid , int *stat_loc , int options ) 
{ pid_t retval ;
  int *tmp ;

  {
  while (1) {
    retval = waitpid(pid, stat_loc, options);
    if (retval == -1) {
      tmp = __errno_location();
      if (! ((*tmp) == 4)) {
        goto _L;
      }
    } else {
      _L: /* CIL Label */ 
      break;
    }
  }
  return (retval);
}
}
ssize_t r_write(int fd , void *buf , size_t size ) 
{ char *bufp ;
  size_t bytestowrite ;
  ssize_t byteswritten ;
  size_t totalbytes ;
  int *tmp ;

  {
  bufp = (char *)buf;
  bytestowrite = size;
  totalbytes = 0U;
  while (bytestowrite > 0U) {
    byteswritten = write(fd, (void const   *)bufp, bytestowrite);
    if (byteswritten == -1) {
      tmp = __errno_location();
      if ((*tmp) != 4) {
        return (-1);
      } else {
        goto _L;
      }
    } else {
      _L: /* CIL Label */ ;
    }
    if (byteswritten == -1) {
      byteswritten = 0;
    }
    totalbytes += (size_t )byteswritten;
    bufp += byteswritten;
    bytestowrite -= (size_t )byteswritten;
  }
  return ((int )totalbytes);
}
}
struct timeval add2currenttime(double seconds ) 
{ struct timeval newtime ;

  {
  gettimeofday((struct timeval * __restrict  )(& newtime), (struct timezone * __restrict  )((void *)0));
  newtime.tv_sec = newtime.tv_sec + (__time_t )((int )seconds);
  newtime.tv_usec = newtime.tv_usec + (__suseconds_t )((int )((seconds - (double )((int )seconds)) *
                                                              1000000.0 + 0.5));
  if (newtime.tv_usec >= 1000000L) {
    newtime.tv_sec = newtime.tv_sec + 1L;
    newtime.tv_usec = newtime.tv_usec - 1000000L;
  }
  return (newtime);
}
}
int copyfile(int fromfd , int tofd ) 
{ int bytesread ;
  int totalbytes ;

  {
  totalbytes = 0;
  while (1) {
    bytesread = readwrite(fromfd, tofd);
    if (! (bytesread > 0)) {
      break;
    }
    totalbytes += bytesread;
  }
  return (totalbytes);
}
}
ssize_t readblock(int fd , void *buf , size_t size ) 
{ char *bufp ;
  ssize_t bytesread ;
  size_t bytestoread ;
  size_t totalbytes ;
  int *tmp ;
  int *tmp___0 ;

  {
  bufp = (char *)buf;
  bytestoread = size;
  totalbytes = 0U;
  while (bytestoread > 0U) {
    bytesread = read(fd, (void *)bufp, bytestoread);
    if (bytesread == 0) {
      if (totalbytes == 0U) {
        return (0);
      } else {
        goto _L;
      }
    } else {
      _L: /* CIL Label */ ;
    }
    if (bytesread == 0) {
      tmp = __errno_location();
      (*tmp) = 22;
      return (-1);
    }
    if (bytesread == -1) {
      tmp___0 = __errno_location();
      if ((*tmp___0) != 4) {
        return (-1);
      } else {
        goto _L___0;
      }
    } else {
      _L___0: /* CIL Label */ ;
    }
    if (bytesread == -1) {
      bytesread = 0;
    }
    totalbytes += (size_t )bytesread;
    bufp += bytesread;
    bytestoread -= (size_t )bytesread;
  }
  return ((int )totalbytes);
}
}
int readline(int fd , char *buf , int nbytes ) 
{ int numread ;
  int returnval ;
  int *tmp ;
  int *tmp___0 ;

  {
  numread = 0;
  while (numread < nbytes - 1) {
    returnval = read(fd, (void *)(buf + numread), 1U);
    if (returnval == -1) {
      tmp = __errno_location();
      if ((*tmp) == 4) {
        continue;
      } else {
        goto _L;
      }
    } else {
      _L: /* CIL Label */ ;
    }
    if (returnval == 0) {
      if (numread == 0) {
        return (0);
      } else {
        goto _L___0;
      }
    } else {
      _L___0: /* CIL Label */ ;
    }
    if (returnval == 0) {
      break;
    }
    if (returnval == -1) {
      return (-1);
    }
    numread ++;
    if ((int )(*(buf + (numread - 1))) == 10) {
      (*(buf + numread)) = (char )'\000';
      return (numread);
    }
  }
  tmp___0 = __errno_location();
  (*tmp___0) = 22;
  return (-1);
}
}
int readlinetimed(int fd , char *buf , int nbytes , double seconds ) 
{ int numread ;
  int returnval ;
  ssize_t tmp ;
  int *tmp___0 ;
  int *tmp___1 ;

  {
  numread = 0;
  while (numread < nbytes - 1) {
    tmp = readtimed(fd, (void *)(buf + numread), 1U, seconds);
    returnval = tmp;
    if (returnval == -1) {
      tmp___0 = __errno_location();
      if ((*tmp___0) == 4) {
        continue;
      } else {
        goto _L;
      }
    } else {
      _L: /* CIL Label */ ;
    }
    if (returnval == 0) {
      if (numread == 0) {
        return (0);
      } else {
        goto _L___0;
      }
    } else {
      _L___0: /* CIL Label */ ;
    }
    if (returnval == 0) {
      break;
    }
    if (returnval == -1) {
      return (-1);
    }
    numread ++;
    if ((int )(*(buf + (numread - 1))) == 10) {
      (*(buf + numread)) = (char )'\000';
      return (numread);
    }
  }
  tmp___1 = __errno_location();
  (*tmp___1) = 22;
  return (-1);
}
}
ssize_t readtimed(int fd , void *buf , size_t nbyte , double seconds ) 
{ struct timeval timedone ;
  int tmp ;
  ssize_t tmp___0 ;

  {
  timedone = add2currenttime(seconds);
  tmp = waitfdtimed(fd, timedone);
  if (tmp == -1) {
    return (-1);
  }
  tmp___0 = r_read(fd, buf, nbyte);
  return (tmp___0);
}
}
int readwrite(int fromfd , int tofd ) 
{ char buf[4096] ;
  int bytesread ;
  ssize_t tmp ;

  {
  bytesread = r_read(fromfd, (void *)(buf), 4096U);
  if (bytesread < 0) {
    return (-1);
  }
  if (bytesread == 0) {
    return (0);
  }
  tmp = r_write(tofd, (void *)(buf), (unsigned int )bytesread);
  if (tmp < 0) {
    return (-1);
  }
  return (bytesread);
}
}
int readwriteblock(int fromfd , int tofd , char *buf , int size ) 
{ int bytesread ;
  int tmp ;

  {
  bytesread = readblock(fromfd, (void *)buf, (unsigned int )size);
  if (bytesread != size) {
    return (bytesread);
  }
  tmp = r_write(tofd, (void *)buf, (unsigned int )size);
  return (tmp);
}
}
int waitfdtimed(int fd , struct timeval end ) 
{ fd_set readset ;
  int retval ;
  struct timeval timeout ;
  int *tmp ;
  int __d0 ;
  int __d1 ;
  int tmp___0 ;
  int tmp___1 ;
  int __d0___0 ;
  int __d1___0 ;
  int *tmp___2 ;
  int *tmp___3 ;

  {
  if (fd < 0) {
    goto _L;
  } else {
    if (fd >= 1024) {
      _L: /* CIL Label */ 
      tmp = __errno_location();
      (*tmp) = 22;
      return (-1);
    }
  }
  while (1) {
    __asm__  volatile   ("cld; rep; stosl": "=c" (__d0), "=D" (__d1): "a" (0), "0" (sizeof(fd_set ) /
                                                                                    sizeof(__fd_mask )),
                         "1" (& readset.__fds_bits[0]): "memory");
    break;
  }
  __asm__  volatile   ("btsl %1,%0": "=m" (readset.__fds_bits[(unsigned int )fd /
                                                              (8U * sizeof(__fd_mask ))]): "r" ((unsigned int )fd %
                                                                                                (8U *
                                                                                                 sizeof(__fd_mask ))): "cc",
                       "memory");
  tmp___0 = gettimeout(end, & timeout);
  if (tmp___0 == -1) {
    return (-1);
  }
  while (1) {
    retval = select(fd + 1, (fd_set * __restrict  )(& readset), (fd_set * __restrict  )((void *)0),
                    (fd_set * __restrict  )((void *)0), (struct timeval * __restrict  )(& timeout));
    if (retval == -1) {
      tmp___2 = __errno_location();
      if (! ((*tmp___2) == 4)) {
        goto _L___0;
      }
    } else {
      _L___0: /* CIL Label */ 
      break;
    }
    tmp___1 = gettimeout(end, & timeout);
    if (tmp___1 == -1) {
      return (-1);
    }
    while (1) {
      __asm__  volatile   ("cld; rep; stosl": "=c" (__d0___0), "=D" (__d1___0): "a" (0),
                           "0" (sizeof(fd_set ) / sizeof(__fd_mask )), "1" (& readset.__fds_bits[0]): "memory");
      break;
    }
    __asm__  volatile   ("btsl %1,%0": "=m" (readset.__fds_bits[(unsigned int )fd /
                                                                (8U * sizeof(__fd_mask ))]): "r" ((unsigned int )fd %
                                                                                                  (8U *
                                                                                                   sizeof(__fd_mask ))): "cc",
                         "memory");
  }
  if (retval == 0) {
    tmp___3 = __errno_location();
    (*tmp___3) = 62;
    return (-1);
  }
  if (retval == -1) {
    return (-1);
  }
  return (0);
}
}
#pragma merger(0,"/tmp/cil-VnTMWCcW.i","-g -g -O2")
extern int deflate(z_streamp strm , int flush ) ;
extern int deflateEnd(z_streamp strm ) ;
extern int deflateInit2_(z_streamp strm , int level , int method , int windowBits ,
                         int memLevel , int strategy , char const   *version , int stream_size ) ;
ssize_t gzip_write(GZIP_STREAM *gz , void *buf , size_t size ) ;
DAAP_BLOCK *daap_add_int(DAAP_BLOCK *parent , char *tag , int value ) ;
DAAP_BLOCK *daap_add_data(DAAP_BLOCK *parent , char *tag , int len , void *value ) ;
DAAP_BLOCK *daap_add_string(DAAP_BLOCK *parent , char *tag , char *value ) ;
DAAP_BLOCK *daap_add_empty(DAAP_BLOCK *parent , char *tag ) ;
DAAP_BLOCK *daap_add_char(DAAP_BLOCK *parent , char *tag , char value ) ;
DAAP_BLOCK *daap_add_short(DAAP_BLOCK *parent , char *tag , short value ) ;
DAAP_BLOCK *daap_add_long(DAAP_BLOCK *parent , char *tag , int v1 , int v2 ) ;
void daap_remove(DAAP_BLOCK *node ) ;
DAAP_BLOCK *daap_find(DAAP_BLOCK *parent , char *tag ) ;
int daap_set_int(DAAP_BLOCK *parent , char *tag , int value ) ;
DAAP_BLOCK *daap_get_new(void) ;
DAAP_BLOCK *daap_add_formatted(DAAP_BLOCK *parent , char *tag , int size , char *value ) ;
GZIP_STREAM *gzip_alloc(void) 
{ GZIP_STREAM *gz ;
  GZIP_STREAM *tmp ;
  void *__s ;
  void *__s___0 ;
  union __anonunion___u_21 *__u ;
  __uint8_t __c ;
  void *__s___1 ;
  int tmp___0 ;

  {
  tmp = (GZIP_STREAM *)malloc(sizeof(GZIP_STREAM ));
  gz = tmp;
  if (gz) {
    tmp___0 = __builtin_constant_p(sizeof(GZIP_STREAM ));
    if (tmp___0) {
      if (sizeof(GZIP_STREAM ) <= 16U) {
        if (sizeof(GZIP_STREAM ) == 1U) {
          __s___1 = (void *)gz;
          (*((__uint8_t *)__s___1)) = (unsigned char)0;
        } else {
          __s___0 = (void *)gz;
          __u = (union __anonunion___u_21 *)__s___0;
          __c = (unsigned char)0;
          switch ((int )sizeof(GZIP_STREAM )) {
          case 15: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          __u = (union __anonunion___u_21 *)((void *)__u + 4);
          case 11: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          __u = (union __anonunion___u_21 *)((void *)__u + 4);
          case 7: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          __u = (union __anonunion___u_21 *)((void *)__u + 4);
          case 3: 
          __u->__usi = (unsigned short )((int )((unsigned short )__c) * 257);
          __u = (union __anonunion___u_21 *)((void *)__u + 2);
          __u->__uc = __c;
          break;
          case 14: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          __u = (union __anonunion___u_21 *)((void *)__u + 4);
          case 10: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          __u = (union __anonunion___u_21 *)((void *)__u + 4);
          case 6: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          __u = (union __anonunion___u_21 *)((void *)__u + 4);
          case 2: 
          __u->__usi = (unsigned short )((int )((unsigned short )__c) * 257);
          break;
          case 13: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          __u = (union __anonunion___u_21 *)((void *)__u + 4);
          case 9: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          __u = (union __anonunion___u_21 *)((void *)__u + 4);
          case 5: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          __u = (union __anonunion___u_21 *)((void *)__u + 4);
          case 1: 
          __u->__uc = __c;
          break;
          case 16: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          __u = (union __anonunion___u_21 *)((void *)__u + 4);
          case 12: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          __u = (union __anonunion___u_21 *)((void *)__u + 4);
          case 8: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          __u = (union __anonunion___u_21 *)((void *)__u + 4);
          case 4: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          case 0: ;
          break;
          }
        }
      } else {
        goto _L;
      }
    } else {
      _L: /* CIL Label */ 
      __s = (void *)gz;
      __builtin_memset(__s, '\000', (int )sizeof(GZIP_STREAM ));
    }
    gz->in_size = 16384;
    gz->in = (char *)malloc((unsigned int )gz->in_size);
    gz->bytes_in = 0;
    gz->out = (char *)((void *)0);
    gz->bytes_out = 0;
  }
  return (gz);
}
}
ssize_t gzip_write(GZIP_STREAM *gz , void *buf , size_t size ) 
{ char *in2 ;
  int new_size ;

  {
  if ((unsigned int )gz->in == (unsigned int )((void *)0)) {
    return (-1);
  }
  while ((size_t )gz->in_size <= (size_t )gz->bytes_in + size) {
    new_size = 2 * gz->in_size;
    in2 = (char *)malloc((unsigned int )new_size);
    if ((unsigned int )in2 == (unsigned int )((void *)0)) {
      err_log(1, 514U, (char *)"out of memory for input buffer\n");
      free((void *)gz->in);
      gz->in = (char *)((void *)0);
      gz->in_size = 0;
      gz->bytes_in = gz->in_size;
      return (-1);
    }
    memcpy((void * __restrict  )in2, (void const   * __restrict  )gz->in, (unsigned int )gz->in_size);
    free((void *)gz->in);
    gz->in = in2;
    gz->in_size = new_size;
  }
  memcpy((void * __restrict  )(gz->in + gz->bytes_in), (void const   * __restrict  )buf,
         size);
  gz->bytes_in = (int )((size_t )gz->bytes_in + size);
  return ((int )size);
}
}
int gzip_compress(GZIP_STREAM *gz ) 
{ int out_size ;
  int status ;
  z_stream strm ;
  void *__s ;
  void *__s___0 ;
  union __anonunion___u_22 *__u ;
  __uint8_t __c ;
  void *__s___1 ;
  int tmp ;

  {
  if ((unsigned int )gz->in == (unsigned int )((void *)0)) {
    return (-1);
  }
  out_size = (int )(1.05 * (double )gz->in_size) + 40;
  gz->out = (char *)malloc((unsigned int )out_size);
  if ((unsigned int )gz->out == (unsigned int )((void *)0)) {
    err_log(5, 514U, (char *)"out of memory for output buffer\n");
    gz->bytes_out = 0;
    return (-1);
  }
  tmp = __builtin_constant_p(sizeof(strm));
  if (tmp) {
    if (sizeof(strm) <= 16U) {
      if (sizeof(strm) == 1U) {
        __s___1 = (void *)(& strm);
        (*((__uint8_t *)__s___1)) = (unsigned char)0;
      } else {
        __s___0 = (void *)(& strm);
        __u = (union __anonunion___u_22 *)__s___0;
        __c = (unsigned char)0;
        switch ((int )sizeof(strm)) {
        case 15: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_22 *)((void *)__u + 4);
        case 11: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_22 *)((void *)__u + 4);
        case 7: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_22 *)((void *)__u + 4);
        case 3: 
        __u->__usi = (unsigned short )((int )((unsigned short )__c) * 257);
        __u = (union __anonunion___u_22 *)((void *)__u + 2);
        __u->__uc = __c;
        break;
        case 14: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_22 *)((void *)__u + 4);
        case 10: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_22 *)((void *)__u + 4);
        case 6: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_22 *)((void *)__u + 4);
        case 2: 
        __u->__usi = (unsigned short )((int )((unsigned short )__c) * 257);
        break;
        case 13: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_22 *)((void *)__u + 4);
        case 9: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_22 *)((void *)__u + 4);
        case 5: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_22 *)((void *)__u + 4);
        case 1: 
        __u->__uc = __c;
        break;
        case 16: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_22 *)((void *)__u + 4);
        case 12: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_22 *)((void *)__u + 4);
        case 8: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_22 *)((void *)__u + 4);
        case 4: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        case 0: ;
        break;
        }
      }
    } else {
      goto _L;
    }
  } else {
    _L: /* CIL Label */ 
    __s = (void *)(& strm);
    __builtin_memset(__s, '\000', (int )sizeof(strm));
  }
  strm.zalloc = (voidpf (*)(voidpf opaque , uInt items , uInt size ))0;
  strm.zfree = (void (*)(voidpf opaque , voidpf address ))0;
  strm.opaque = (void *)0;
  strm.next_in = (Bytef *)gz->in;
  strm.avail_in = (unsigned int )gz->bytes_in;
  strm.next_out = (Bytef *)gz->out;
  strm.avail_out = (unsigned int )out_size;
  deflateInit2_(& strm, -1, 8, 24, 8, 0, "1.1.4", (int )sizeof(z_stream ));
  while (1) {
    status = deflate(& strm, 4);
    if (! (status == 0)) {
      break;
    }
  }
  if (status != 1) {
    err_log(1, 514U, (char *)"unable to compress data: %s (%d)\n", strm.msg, status);
    gz->bytes_out = 0;
    return (-1);
  }
  gz->bytes_out = (int )strm.total_out;
  deflateEnd(& strm);
  return (gz->bytes_out);
}
}
int gzip_close(GZIP_STREAM *gz , int fd ) 
{ int bytes_written ;
  ssize_t tmp ;

  {
  bytes_written = gz->bytes_out;
  tmp = r_write(fd, (void *)gz->out, (unsigned int )gz->bytes_out);
  if (tmp != gz->bytes_out) {
    err_log(1, 514U, (char *)"unable to write gzipped data\n");
    return (-1);
  }
  if ((unsigned int )gz->in != (unsigned int )((void *)0)) {
    free((void *)gz->in);
  }
  if ((unsigned int )gz->out != (unsigned int )((void *)0)) {
    free((void *)gz->out);
  }
  free((void *)gz);
  return (bytes_written);
}
}
DAAP_BLOCK *daap_get_new(void) 
{ DAAP_BLOCK *pnew ;

  {
  pnew = (DAAP_BLOCK *)malloc(sizeof(DAAP_BLOCK ));
  if (! pnew) {
    err_log(2, 512U, (char *)"Error mallocing a daap block\n");
    return ((DAAP_BLOCK *)((void *)0));
  }
  pnew->free = 0;
  pnew->value = (char *)((void *)0);
  pnew->parent = (struct daap_block_tag *)((void *)0);
  pnew->children = (struct daap_block_tag *)((void *)0);
  pnew->last_child = (struct daap_block_tag *)((void *)0);
  pnew->next = (struct daap_block_tag *)((void *)0);
  return (pnew);
}
}
DAAP_BLOCK *daap_add_formatted(DAAP_BLOCK *parent , char *tag , int size , char *value ) 
{ DAAP_BLOCK *current ;
  DAAP_BLOCK *last ;
  DAAP_BLOCK *pnew ;

  {
  err_log(10, 512U, (char *)"Adding daap tag %s\n", tag);
  pnew = daap_get_new();
  if (! pnew) {
    return ((DAAP_BLOCK *)((void *)0));
  }
  pnew->reported_size = size;
  pnew->parent = parent;
  pnew->size = size;
  memcpy((void * __restrict  )(pnew->tag), (void const   * __restrict  )tag, 4U);
  if (size <= 4) {
    if (size >= 0) {
      memcpy((void * __restrict  )(pnew->svalue), (void const   * __restrict  )value,
             (unsigned int )size);
      pnew->free = 0;
    } else {
      goto _L;
    }
  } else {
    _L: /* CIL Label */ 
    pnew->value = value;
    pnew->free = 1;
  }
  pnew->next = (struct daap_block_tag *)((void *)0);
  if (parent) {
    last = parent->last_child;
    if (last) {
      last->next = pnew;
    } else {
      parent->children = pnew;
    }
    parent->last_child = pnew;
  }
  current = pnew->parent;
  while (current) {
    current->reported_size = current->reported_size + (8 + pnew->reported_size);
    current = current->parent;
  }
  return (pnew);
}
}
DAAP_BLOCK *daap_add_long(DAAP_BLOCK *parent , char *tag , int v1 , int v2 ) 
{ char *ivalue ;
  DAAP_BLOCK *tmp___0 ;

  {
  ivalue = (char *)malloc(8U);
  if (! ivalue) {
    return ((DAAP_BLOCK *)((void *)0));
  }
  (*(ivalue + 0)) = (char )((v1 >> 24) & 255);
  (*(ivalue + 1)) = (char )((v1 >> 16) & 255);
  (*(ivalue + 2)) = (char )((v1 >> 8) & 255);
  (*(ivalue + 3)) = (char )(v1 & 255);
  (*(ivalue + 4)) = (char )((v2 >> 24) & 255);
  (*(ivalue + 5)) = (char )((v2 >> 16) & 255);
  (*(ivalue + 6)) = (char )((v2 >> 8) & 255);
  (*(ivalue + 7)) = (char )(v2 & 255);
  tmp___0 = daap_add_formatted(parent, tag, 8, ivalue);
  return (tmp___0);
}
}
DAAP_BLOCK *daap_add_int(DAAP_BLOCK *parent , char *tag , int value ) 
{ char ivalue[4] ;
  DAAP_BLOCK *tmp ;

  {
  ivalue[0] = (char )((value >> 24) & 255);
  ivalue[1] = (char )((value >> 16) & 255);
  ivalue[2] = (char )((value >> 8) & 255);
  ivalue[3] = (char )(value & 255);
  tmp = daap_add_formatted(parent, tag, 4, ivalue);
  return (tmp);
}
}
DAAP_BLOCK *daap_add_short(DAAP_BLOCK *parent , char *tag , short value ) 
{ char ivalue[2] ;
  DAAP_BLOCK *tmp ;

  {
  ivalue[0] = (char )(((int )value >> 8) & 255);
  ivalue[1] = (char )((int )value & 255);
  tmp = daap_add_formatted(parent, tag, 2, ivalue);
  return (tmp);
}
}
DAAP_BLOCK *daap_add_char(DAAP_BLOCK *parent , char *tag , char value ) 
{ DAAP_BLOCK *tmp ;

  {
  tmp = daap_add_formatted(parent, tag, 1, & value);
  return (tmp);
}
}
DAAP_BLOCK *daap_add_data(DAAP_BLOCK *parent , char *tag , int len , void *value ) 
{ void *pvalue ;
  void *tmp ;
  DAAP_BLOCK *tmp___0 ;
  DAAP_BLOCK *tmp___1 ;

  {
  if (len > 4) {
    tmp = malloc((unsigned int )len);
    pvalue = tmp;
    if (! pvalue) {
      return ((DAAP_BLOCK *)((void *)0));
    }
    memcpy((void * __restrict  )pvalue, (void const   * __restrict  )value, (unsigned int )len);
    tmp___0 = daap_add_formatted(parent, tag, len, (char *)pvalue);
    return (tmp___0);
  }
  tmp___1 = daap_add_formatted(parent, tag, len, (char *)value);
  return (tmp___1);
}
}
DAAP_BLOCK *daap_add_string(DAAP_BLOCK *parent , char *tag , char *value ) 
{ char *newvalue ;
  size_t __len___2 ;
  size_t tmp___15 ;
  char *__retval___2 ;
  char *tmp___16 ;
  int tmp___18 ;
  int tmp___19 ;
  DAAP_BLOCK *tmp___20 ;
  size_t tmp___21 ;
  int tmp___22 ;
  DAAP_BLOCK *tmp___23 ;
  DAAP_BLOCK *tmp___24 ;

  {
  if (value) {
    tmp___21 = strlen((char const   *)value);
    if (tmp___21 > 4U) {
      tmp___18 = __builtin_constant_p(value);
      if (tmp___18) {
        if ((unsigned int )((void const   *)(value + 1)) - (unsigned int )((void const   *)value) ==
            1U) {
          if ((int const   )(*((char const   *)value + 0)) == 0) {
            newvalue = (char *)calloc(1U, 1U);
          } else {
            tmp___15 = strlen((char const   *)value);
            __len___2 = tmp___15 + 1U;
            tmp___16 = (char *)malloc(__len___2);
            __retval___2 = tmp___16;
            if ((unsigned int )__retval___2 != (unsigned int )((void *)0)) {
              __retval___2 = (char *)memcpy((void * __restrict  )__retval___2, (void const   * __restrict  )value,
                                            __len___2);
            }
            newvalue = __retval___2;
          }
        } else {
          goto _L;
        }
      } else {
        _L: /* CIL Label */ 
        newvalue = __strdup((char const   *)value);
      }
      if (! newvalue) {
        return ((DAAP_BLOCK *)((void *)0));
      }
      tmp___19 = (int )strlen((char const   *)newvalue);
      tmp___20 = daap_add_formatted(parent, tag, tmp___19, newvalue);
      return (tmp___20);
    }
    tmp___22 = (int )strlen((char const   *)value);
    tmp___23 = daap_add_formatted(parent, tag, tmp___22, value);
    return (tmp___23);
  }
  tmp___24 = daap_add_formatted(parent, tag, 0, (char *)"");
  return (tmp___24);
}
}
DAAP_BLOCK *daap_add_empty(DAAP_BLOCK *parent , char *tag ) 
{ DAAP_BLOCK *tmp ;

  {
  tmp = daap_add_formatted(parent, tag, 0, (char *)((void *)0));
  return (tmp);
}
}
int daap_serialize(DAAP_BLOCK *root , int fd , GZIP_STREAM *gz ) 
{ char size[4] ;
  int tmp ;

  {
  while (root) {
    if ((unsigned int )gz == (unsigned int )((void *)0)) {
      r_write(fd, (void *)(root->tag), 4U);
    } else {
      gzip_write(gz, (void *)(root->tag), 4U);
    }
    size[0] = (char )((root->reported_size >> 24) & 255);
    size[1] = (char )((root->reported_size >> 16) & 255);
    size[2] = (char )((root->reported_size >> 8) & 255);
    size[3] = (char )(root->reported_size & 255);
    if ((unsigned int )gz == (unsigned int )((void *)0)) {
      r_write(fd, (void *)(& size), 4U);
    } else {
      gzip_write(gz, (void *)(& size), 4U);
    }
    if (root->size) {
      if (root->free) {
        if ((unsigned int )gz == (unsigned int )((void *)0)) {
          r_write(fd, (void *)root->value, (unsigned int )root->size);
        } else {
          gzip_write(gz, (void *)root->value, (unsigned int )root->size);
        }
      } else {
        if ((unsigned int )gz == (unsigned int )((void *)0)) {
          r_write(fd, (void *)(root->svalue), (unsigned int )root->size);
        } else {
          gzip_write(gz, (void *)(root->svalue), (unsigned int )root->size);
        }
      }
    }
    if (root->children) {
      tmp = daap_serialize(root->children, fd, gz);
      if (tmp) {
        return (-1);
      }
    }
    root = root->next;
  }
  return (0);
}
}
void daap_remove(DAAP_BLOCK *node ) 
{ DAAP_BLOCK *parent ;
  DAAP_BLOCK **ptr ;

  {
  parent = node->parent;
  if ((unsigned int )((DAAP_BLOCK *)0) != (unsigned int )parent) {
    ptr = & parent->children;
    while (1) {
      if ((*ptr)) {
        if (! ((unsigned int )(*ptr) != (unsigned int )node)) {
          goto _L;
        }
      } else {
        _L: /* CIL Label */ 
        break;
      }
      ptr = & ((*ptr))->next;
    }
    if (! ((unsigned int )((DAAP_BLOCK *)0) != (unsigned int )(*ptr))) {
      __assert_fail("0 != *ptr", "daap-proto.c", 406U, "daap_remove");
    }
    (*ptr) = node->next;
    parent = node->parent;
    while (parent) {
      parent->reported_size = parent->reported_size - (8 + node->reported_size);
      parent = parent->parent;
    }
    node->parent = (struct daap_block_tag *)0;
    node->next = (struct daap_block_tag *)0;
  }
  daap_free(node);
  return;
}
}
DAAP_BLOCK *daap_find(DAAP_BLOCK *parent , char *tag ) 
{ int tmp___63 ;
  size_t __s1_len___0 ;
  size_t __s2_len___0 ;
  int tmp___94 ;
  size_t tmp___95 ;
  register int __result___85 ;
  unsigned char const   *__s2___14 ;
  register int __result___86 ;
  int tmp___110 ;
  register int __result___93 ;
  unsigned char const   *__s1___30 ;
  register int __result___94 ;
  int tmp___117 ;
  int tmp___118 ;
  int tmp___119 ;
  int tmp___120 ;
  int tmp___121 ;
  int tmp___122 ;
  int tmp___123 ;
  size_t tmp___124 ;
  int tmp___125 ;
  size_t tmp___126 ;

  {
  parent = parent->children;
  while (parent) {
    tmp___123 = __builtin_constant_p(parent->tag);
    if (tmp___123) {
      tmp___124 = strlen((char const   *)(parent->tag));
      if (tmp___124 < 4U) {
        goto _L___351;
      } else {
        goto _L___353;
      }
    } else {
      _L___353: /* CIL Label */ 
      tmp___125 = __builtin_constant_p(tag);
      if (tmp___125) {
        tmp___126 = strlen((char const   *)tag);
        if (tmp___126 < 4U) {
          _L___351: /* CIL Label */ 
          tmp___120 = __builtin_constant_p(parent->tag);
          if (tmp___120) {
            tmp___121 = __builtin_constant_p(tag);
            if (tmp___121) {
              __s1_len___0 = strlen((char const   *)(parent->tag));
              __s2_len___0 = strlen((char const   *)tag);
              if (! ((unsigned int )((void const   *)(parent->tag + 1)) - (unsigned int )((void const   *)(parent->tag)) ==
                     1U)) {
                goto _L___348;
              } else {
                if (__s1_len___0 >= 4U) {
                  _L___348: /* CIL Label */ 
                  if (! ((unsigned int )((void const   *)(tag + 1)) - (unsigned int )((void const   *)tag) ==
                         1U)) {
                    goto _L___347;
                  } else {
                    if (__s2_len___0 >= 4U) {
                      _L___347: /* CIL Label */ 
                      tmp___122 = 1;
                    } else {
                      goto _L___346;
                    }
                  }
                } else {
                  _L___346: /* CIL Label */ 
                  tmp___122 = 0;
                }
              }
              if (tmp___122) {
                if (__s1_len___0 < __s2_len___0) {
                  tmp___95 = __s1_len___0;
                } else {
                  tmp___95 = __s2_len___0;
                }
                tmp___94 = memcmp((void const   *)((char const   *)(parent->tag)),
                                  (void const   *)((char const   *)tag), tmp___95 +
                                                                         1U);
              } else {
                goto _L___350;
              }
            } else {
              goto _L___350;
            }
          } else {
            _L___350: /* CIL Label */ 
            tmp___119 = __builtin_constant_p(parent->tag);
            if (tmp___119) {
              if ((unsigned int )((void const   *)(parent->tag + 1)) - (unsigned int )((void const   *)(parent->tag)) ==
                  1U) {
                __s1_len___0 = strlen((char const   *)(parent->tag));
                if (__s1_len___0 < 4U) {
                  tmp___110 = __builtin_constant_p(tag);
                  if (tmp___110) {
                    if ((unsigned int )((void const   *)(tag + 1)) - (unsigned int )((void const   *)tag) ==
                        1U) {
                      __result___85 = (int )((int const   )(*((unsigned char const   *)((char const   *)(parent->tag)) +
                                                              0)) - (int const   )(*((unsigned char const   *)((char const   *)tag) +
                                                                                     0)));
                      if (__s1_len___0 > 0U) {
                        if (__result___85 == 0) {
                          __result___85 = (int )((int const   )(*((unsigned char const   *)((char const   *)(parent->tag)) +
                                                                  1)) - (int const   )(*((unsigned char const   *)((char const   *)tag) +
                                                                                         1)));
                          if (__s1_len___0 > 1U) {
                            if (__result___85 == 0) {
                              __result___85 = (int )((int const   )(*((unsigned char const   *)((char const   *)(parent->tag)) +
                                                                      2)) - (int const   )(*((unsigned char const   *)((char const   *)tag) +
                                                                                             2)));
                              if (__s1_len___0 > 2U) {
                                if (__result___85 == 0) {
                                  __result___85 = (int )((int const   )(*((unsigned char const   *)((char const   *)(parent->tag)) +
                                                                          3)) - (int const   )(*((unsigned char const   *)((char const   *)tag) +
                                                                                                 3)));
                                } else {
                                  goto _L___309;
                                }
                              } else {
                                _L___309: /* CIL Label */ ;
                              }
                            } else {
                              goto _L___310;
                            }
                          } else {
                            _L___310: /* CIL Label */ ;
                          }
                        } else {
                          goto _L___311;
                        }
                      } else {
                        _L___311: /* CIL Label */ ;
                      }
                      tmp___94 = __result___85;
                    } else {
                      goto _L___315;
                    }
                  } else {
                    _L___315: /* CIL Label */ 
                    __s2___14 = (unsigned char const   *)((char const   *)tag);
                    __result___86 = (int )((int const   )(*((unsigned char const   *)((char const   *)(parent->tag)) +
                                                            0)) - (int const   )(*(__s2___14 +
                                                                                   0)));
                    if (__s1_len___0 > 0U) {
                      if (__result___86 == 0) {
                        __result___86 = (int )((int const   )(*((unsigned char const   *)((char const   *)(parent->tag)) +
                                                                1)) - (int const   )(*(__s2___14 +
                                                                                       1)));
                        if (__s1_len___0 > 1U) {
                          if (__result___86 == 0) {
                            __result___86 = (int )((int const   )(*((unsigned char const   *)((char const   *)(parent->tag)) +
                                                                    2)) - (int const   )(*(__s2___14 +
                                                                                           2)));
                            if (__s1_len___0 > 2U) {
                              if (__result___86 == 0) {
                                __result___86 = (int )((int const   )(*((unsigned char const   *)((char const   *)(parent->tag)) +
                                                                        3)) - (int const   )(*(__s2___14 +
                                                                                               3)));
                              } else {
                                goto _L___312;
                              }
                            } else {
                              _L___312: /* CIL Label */ ;
                            }
                          } else {
                            goto _L___313;
                          }
                        } else {
                          _L___313: /* CIL Label */ ;
                        }
                      } else {
                        goto _L___314;
                      }
                    } else {
                      _L___314: /* CIL Label */ ;
                    }
                    tmp___94 = __result___86;
                  }
                } else {
                  goto _L___345;
                }
              } else {
                goto _L___345;
              }
            } else {
              _L___345: /* CIL Label */ 
              tmp___118 = __builtin_constant_p(tag);
              if (tmp___118) {
                if ((unsigned int )((void const   *)(tag + 1)) - (unsigned int )((void const   *)tag) ==
                    1U) {
                  __s2_len___0 = strlen((char const   *)tag);
                  if (__s2_len___0 < 4U) {
                    tmp___117 = __builtin_constant_p(parent->tag);
                    if (tmp___117) {
                      if ((unsigned int )((void const   *)(parent->tag + 1)) - (unsigned int )((void const   *)(parent->tag)) ==
                          1U) {
                        __result___93 = (int )((int const   )(*((unsigned char const   *)((char const   *)(parent->tag)) +
                                                                0)) - (int const   )(*((unsigned char const   *)((char const   *)tag) +
                                                                                       0)));
                        if (__s2_len___0 > 0U) {
                          if (__result___93 == 0) {
                            __result___93 = (int )((int const   )(*((unsigned char const   *)((char const   *)(parent->tag)) +
                                                                    1)) - (int const   )(*((unsigned char const   *)((char const   *)tag) +
                                                                                           1)));
                            if (__s2_len___0 > 1U) {
                              if (__result___93 == 0) {
                                __result___93 = (int )((int const   )(*((unsigned char const   *)((char const   *)(parent->tag)) +
                                                                        2)) - (int const   )(*((unsigned char const   *)((char const   *)tag) +
                                                                                               2)));
                                if (__s2_len___0 > 2U) {
                                  if (__result___93 == 0) {
                                    __result___93 = (int )((int const   )(*((unsigned char const   *)((char const   *)(parent->tag)) +
                                                                            3)) -
                                                           (int const   )(*((unsigned char const   *)((char const   *)tag) +
                                                                            3)));
                                  } else {
                                    goto _L___335;
                                  }
                                } else {
                                  _L___335: /* CIL Label */ ;
                                }
                              } else {
                                goto _L___336;
                              }
                            } else {
                              _L___336: /* CIL Label */ ;
                            }
                          } else {
                            goto _L___337;
                          }
                        } else {
                          _L___337: /* CIL Label */ ;
                        }
                        tmp___94 = __result___93;
                      } else {
                        goto _L___341;
                      }
                    } else {
                      _L___341: /* CIL Label */ 
                      __s1___30 = (unsigned char const   *)((char const   *)(parent->tag));
                      __result___94 = (int )((int const   )(*(__s1___30 + 0)) - (int const   )(*((unsigned char const   *)((char const   *)tag) +
                                                                                                 0)));
                      if (__s2_len___0 > 0U) {
                        if (__result___94 == 0) {
                          __result___94 = (int )((int const   )(*(__s1___30 + 1)) -
                                                 (int const   )(*((unsigned char const   *)((char const   *)tag) +
                                                                  1)));
                          if (__s2_len___0 > 1U) {
                            if (__result___94 == 0) {
                              __result___94 = (int )((int const   )(*(__s1___30 +
                                                                      2)) - (int const   )(*((unsigned char const   *)((char const   *)tag) +
                                                                                             2)));
                              if (__s2_len___0 > 2U) {
                                if (__result___94 == 0) {
                                  __result___94 = (int )((int const   )(*(__s1___30 +
                                                                          3)) - (int const   )(*((unsigned char const   *)((char const   *)tag) +
                                                                                                 3)));
                                } else {
                                  goto _L___338;
                                }
                              } else {
                                _L___338: /* CIL Label */ ;
                              }
                            } else {
                              goto _L___339;
                            }
                          } else {
                            _L___339: /* CIL Label */ ;
                          }
                        } else {
                          goto _L___340;
                        }
                      } else {
                        _L___340: /* CIL Label */ ;
                      }
                      tmp___94 = __result___94;
                    }
                  } else {
                    goto _L___343;
                  }
                } else {
                  goto _L___343;
                }
              } else {
                _L___343: /* CIL Label */ 
                tmp___94 = strcmp((char const   *)(parent->tag), (char const   *)tag);
              }
            }
          }
          tmp___63 = tmp___94;
        } else {
          goto _L___352;
        }
      } else {
        _L___352: /* CIL Label */ 
        tmp___63 = strncmp((char const   *)(parent->tag), (char const   *)tag, 4U);
      }
    }
    if (! tmp___63) {
      break;
    }
    parent = parent->next;
  }
  return (parent);
}
}
void daap_free(DAAP_BLOCK *root ) 
{ DAAP_BLOCK *pnext ;

  {
  while (root) {
    err_log(10, 512U, (char *)"Freeing %c%c%c%c\n", root->tag[0], root->tag[1], root->tag[2],
            root->tag[3]);
    if (root->size) {
      if (root->free) {
        free((void *)root->value);
      } else {
        goto _L;
      }
    } else {
      _L: /* CIL Label */ ;
    }
    daap_free(root->children);
    pnext = root->next;
    free((void *)root);
    root = pnext;
  }
  return;
}
}
int daap_set_int(DAAP_BLOCK *parent , char *tag , int value ) 
{ DAAP_BLOCK *child ;
  DAAP_BLOCK *tmp ;

  {
  tmp = daap_find(parent, tag);
  child = tmp;
  if ((unsigned int )((DAAP_BLOCK *)0) == (unsigned int )child) {
    goto _L;
  } else {
    if ((unsigned int )child->size != sizeof(int )) {
      _L: /* CIL Label */ 
      return (0);
    }
  }
  child->svalue[0] = (char )((value >> 24) & 255);
  child->svalue[1] = (char )((value >> 16) & 255);
  child->svalue[2] = (char )((value >> 8) & 255);
  child->svalue[3] = (char )(value & 255);
  return (1);
}
}
#pragma merger(0,"/tmp/cil-QggGqCUA.i","-g -g -O2")
ENUMHANDLE db_enum_begin(void) ;
MP3FILE *db_enum(ENUMHANDLE *current ) ;
int db_enum_end(ENUMHANDLE handle ) ;
int db_get_playlist_count(void) ;
int db_get_playlist_entry_count(unsigned long playlistid ) ;
int db_get_playlist_is_smart(unsigned long playlistid ) ;
ENUMHANDLE db_playlist_enum_begin(void) ;
int db_playlist_enum(ENUMHANDLE *handle ) ;
int db_playlist_enum_end(ENUMHANDLE handle ) ;
ENUMHANDLE db_playlist_items_enum_begin(unsigned long playlistid ) ;
int db_playlist_items_enum(ENUMHANDLE *handle ) ;
int db_playlist_items_enum_end(ENUMHANDLE handle ) ;
char *db_get_playlist_name(unsigned long playlistid ) ;
DAAP_BLOCK *daap_add_song_entry(DAAP_BLOCK *mlcl , MP3FILE *song , unsigned long long meta ) ;
query_node_t *query_build(char const   *query , query_field_t const   *fields ) ;
int query_test(query_node_t *query , void *target ) ;
void query_free(query_node_t *query ) ;
void query_dump(FILE *fp , query_node_t *query , int depth ) ;
DAAP_ITEMS taglist[85]  = 
  {      {5, (char *)"miid", (char *)"dmap.itemid"}, 
        {9, (char *)"minm", (char *)"dmap.itemname"}, 
        {1, (char *)"mikd", (char *)"dmap.itemkind"}, 
        {7, (char *)"mper", (char *)"dmap.persistentid"}, 
        {12, (char *)"mcon", (char *)"dmap.container"}, 
        {5, (char *)"mcti", (char *)"dmap.containeritemid"}, 
        {5, (char *)"mpco", (char *)"dmap.parentcontainerid"}, 
        {5, (char *)"mstt", (char *)"dmap.status"}, 
        {9, (char *)"msts", (char *)"dmap.statusstring"}, 
        {5, (char *)"mimc", (char *)"dmap.itemcount"}, 
        {5, (char *)"mctc", (char *)"dmap.containercount"}, 
        {5, (char *)"mrco", (char *)"dmap.returnedcount"}, 
        {5, (char *)"mtco", (char *)"dmap.specifiedtotalcount"}, 
        {12, (char *)"mlcl", (char *)"dmap.listing"}, 
        {12, (char *)"mlit", (char *)"dmap.listingitem"}, 
        {12, (char *)"mbcl", (char *)"dmap.bag"}, 
        {12, (char *)"mdcl", (char *)"dmap.dictionary"}, 
        {12, (char *)"msrv", (char *)"dmap.serverinforesponse"}, 
        {1, (char *)"msau", (char *)"dmap.authenticationmethod"}, 
        {1, (char *)"mslr", (char *)"dmap.loginrequired"}, 
        {11, (char *)"mpro", (char *)"dmap.protocolversion"}, 
        {1, (char *)"msal", (char *)"dmap.supportsautologout"}, 
        {1, (char *)"msup", (char *)"dmap.supportsupdate"}, 
        {1, (char *)"mspi", (char *)"dmap.supportspersistentids"}, 
        {1, (char *)"msex", (char *)"dmap.supportsextensions"}, 
        {1, (char *)"msbr", (char *)"dmap.supportsbrowse"}, 
        {1, (char *)"msqy", (char *)"dmap.supportsquery"}, 
        {1, (char *)"msix", (char *)"dmap.supportsindex"}, 
        {1, (char *)"msrs", (char *)"dmap.supportsresolve"}, 
        {5, (char *)"mstm", (char *)"dmap.timeoutinterval"}, 
        {5, (char *)"msdc", (char *)"dmap.databasescount"}, 
        {12, (char *)"mlog", (char *)"dmap.loginresponse"}, 
        {5, (char *)"mlid", (char *)"dmap.sessionid"}, 
        {12, (char *)"mupd", (char *)"dmap.updateresponse"}, 
        {5, (char *)"musr", (char *)"dmap.serverrevision"}, 
        {1, (char *)"muty", (char *)"dmap.updatetype"}, 
        {12, (char *)"mudl", (char *)"dmap.deletedidlisting"}, 
        {12, (char *)"mccr", (char *)"dmap.contentcodesresponse"}, 
        {5, (char *)"mcnm", (char *)"dmap.contentcodesnumber"}, 
        {9, (char *)"mcna", (char *)"dmap.contentcodesname"}, 
        {3, (char *)"mcty", (char *)"dmap.contentcodestype"}, 
        {11, (char *)"apro", (char *)"daap.protocolversion"}, 
        {12, (char *)"avdb", (char *)"daap.serverdatabases"}, 
        {12, (char *)"abro", (char *)"daap.databasebrowse"}, 
        {12, (char *)"abal", (char *)"daap.browsealbumlisting"}, 
        {12, (char *)"abar", (char *)"daap.browseartistlisting"}, 
        {12, (char *)"abcp", (char *)"daap.browsecomposerlisting"}, 
        {12, (char *)"abgn", (char *)"daap.browsegenrelisting"}, 
        {12, (char *)"adbs", (char *)"daap.databasesongs"}, 
        {9, (char *)"asal", (char *)"daap.songalbum"}, 
        {9, (char *)"asar", (char *)"daap.songartist"}, 
        {3, (char *)"asbt", (char *)"daap.songbeatsperminute"}, 
        {3, (char *)"asbr", (char *)"daap.songbitrate"}, 
        {9, (char *)"ascm", (char *)"daap.songcomment"}, 
        {1, (char *)"asco", (char *)"daap.songcompilation"}, 
        {9, (char *)"ascp", (char *)"daap.songcomposer"}, 
        {10, (char *)"asda", (char *)"daap.songdateadded"}, 
        {10, (char *)"asdm", (char *)"daap.songdatemodified"}, 
        {3, (char *)"asdc", (char *)"daap.songdisccount"}, 
        {3, (char *)"asdn", (char *)"daap.songdiscnumber"}, 
        {1, (char *)"asdb", (char *)"daap.songdisabled"}, 
        {9, (char *)"aseq", (char *)"daap.songeqpreset"}, 
        {9, (char *)"asfm", (char *)"daap.songformat"}, 
        {9, (char *)"asgn", (char *)"daap.songgenre"}, 
        {9, (char *)"asdt", (char *)"daap.songdescription"}, 
        {2, (char *)"asrv", (char *)"daap.songrelativevolume"}, 
        {5, (char *)"assr", (char *)"daap.songsamplerate"}, 
        {5, (char *)"assz", (char *)"daap.songsize"}, 
        {5, (char *)"asst", (char *)"daap.songstarttime"}, 
        {5, (char *)"assp", (char *)"daap.songstoptime"}, 
        {5, (char *)"astm", (char *)"daap.songtime"}, 
        {3, (char *)"astc", (char *)"daap.songtrackcount"}, 
        {3, (char *)"astn", (char *)"daap.songtracknumber"}, 
        {1, (char *)"asur", (char *)"daap.songuserrating"}, 
        {3, (char *)"asyr", (char *)"daap.songyear"}, 
        {1, (char *)"asdk", (char *)"daap.songdatakind"}, 
        {9, (char *)"asul", (char *)"daap.songdataurl"}, 
        {12, (char *)"aply", (char *)"daap.databaseplaylists"}, 
        {1, (char *)"abpl", (char *)"daap.baseplaylist"}, 
        {12, (char *)"apso", (char *)"daap.playlistsongs"}, 
        {12, (char *)"arsv", (char *)"daap.resolve"}, 
        {12, (char *)"arif", (char *)"daap.resolveinfo"}, 
        {5, (char *)"aeNV", (char *)"com.apple.itunes.norm-volume"}, 
        {1, (char *)"aeSP", (char *)"com.apple.itunes.smart-playlist"}, 
        {0, (char *)((void *)0), (char *)((void *)0)}};
static query_field_t song_fields[25]  = 
  {      {17, "dmap.itemname", (int )((unsigned int )(& ((MP3FILE *)0)->title))}, 
        {15, "dmap.itemid", (int )((unsigned int )(& ((MP3FILE *)0)->id))}, 
        {17, "daap.songalbum", (int )((unsigned int )(& ((MP3FILE *)0)->album))}, 
        {17, "daap.songartist", (int )((unsigned int )(& ((MP3FILE *)0)->artist))}, 
        {15, "daap.songbitrate", (int )((unsigned int )(& ((MP3FILE *)0)->bitrate))}, 
        {17,
      "daap.songcomment", (int )((unsigned int )(& ((MP3FILE *)0)->comment))}, 
        {15, "daap.songcompilation", (int )((unsigned int )(& ((MP3FILE *)0)->compilation))}, 
        {17,
      "daap.songcomposer", (int )((unsigned int )(& ((MP3FILE *)0)->composer))}, 
        {15, "daap.songdatakind", (int )((unsigned int )(& ((MP3FILE *)0)->data_kind))}, 
        {17,
      "daap.songdataurl", (int )((unsigned int )(& ((MP3FILE *)0)->url))}, 
        {15, "daap.songdateadded", (int )((unsigned int )(& ((MP3FILE *)0)->time_added))}, 
        {15,
      "daap.songdatemodified", (int )((unsigned int )(& ((MP3FILE *)0)->time_modified))}, 
        {17,
      "daap.songdescription", (int )((unsigned int )(& ((MP3FILE *)0)->description))}, 
        {15,
      "daap.songdisccount", (int )((unsigned int )(& ((MP3FILE *)0)->total_discs))}, 
        {15,
      "daap.songdiscnumber", (int )((unsigned int )(& ((MP3FILE *)0)->disc))}, 
        {17, "daap.songformat", (int )((unsigned int )(& ((MP3FILE *)0)->type))}, 
        {17, "daap.songgenre", (int )((unsigned int )(& ((MP3FILE *)0)->genre))}, 
        {15, "daap.songsamplerate", (int )((unsigned int )(& ((MP3FILE *)0)->samplerate))}, 
        {15,
      "daap.songsize", (int )((unsigned int )(& ((MP3FILE *)0)->file_size))}, 
        {15, "daap.songstoptime", (int )((unsigned int )(& ((MP3FILE *)0)->song_length))}, 
        {15,
      "daap.songtime", (int )((unsigned int )(& ((MP3FILE *)0)->song_length))}, 
        {15, "daap.songtrackcount", (int )((unsigned int )(& ((MP3FILE *)0)->total_tracks))}, 
        {15,
      "daap.songtracknumber", (int )((unsigned int )(& ((MP3FILE *)0)->track))}, 
        {15, "daap.songyear", (int )((unsigned int )(& ((MP3FILE *)0)->year))}, 
        {(query_type_t )0, (char const   *)0, 0}};
int daap_add_mdcl(DAAP_BLOCK *root , char *tag , char *name , short number ) 
{ DAAP_BLOCK *mdcl ;
  int g ;
  DAAP_BLOCK *tmp___0 ;
  int tmp___1 ;
  DAAP_BLOCK *tmp___2 ;
  int tmp___3 ;
  int tmp___4 ;

  {
  g = 1;
  mdcl = daap_add_empty(root, (char *)"mdcl");
  if (mdcl) {
    g = (int )daap_add_string(mdcl, (char *)"mcnm", tag);
    if (g) {
      tmp___0 = daap_add_string(mdcl, (char *)"mcna", name);
      if (tmp___0) {
        tmp___1 = 1;
      } else {
        goto _L;
      }
    } else {
      _L: /* CIL Label */ 
      tmp___1 = 0;
    }
    g = tmp___1;
    if (g) {
      tmp___2 = daap_add_short(mdcl, (char *)"mcty", number);
      if (tmp___2) {
        tmp___3 = 1;
      } else {
        goto _L___0;
      }
    } else {
      _L___0: /* CIL Label */ 
      tmp___3 = 0;
    }
    g = tmp___3;
  }
  if (mdcl) {
    tmp___4 = g;
  } else {
    tmp___4 = 0;
  }
  return (tmp___4);
}
}
DAAP_BLOCK *daap_response_content_codes(void) 
{ DAAP_BLOCK *root ;
  DAAP_ITEMS *current ;
  int g ;
  int tmp___0 ;
  int tmp___1 ;

  {
  current = taglist;
  g = 1;
  err_log(9, 512U, (char *)"Preparing to get content codes\n");
  root = daap_add_empty((DAAP_BLOCK *)((void *)0), (char *)"mccr");
  if (root) {
    g = (int )daap_add_int(root, (char *)"mstt", 200);
    while (current->type) {
      if (g) {
        tmp___0 = daap_add_mdcl(root, current->tag, current->description, (short )current->type);
        if (tmp___0) {
          tmp___1 = 1;
        } else {
          goto _L;
        }
      } else {
        _L: /* CIL Label */ 
        tmp___1 = 0;
      }
      g = tmp___1;
      current ++;
    }
  }
  if (! g) {
    daap_free(root);
    return ((DAAP_BLOCK *)((void *)0));
  }
  return (root);
}
}
DAAP_BLOCK *daap_response_login(char *hostname ) 
{ DAAP_BLOCK *root ;
  int g ;
  int session ;
  DAAP_BLOCK *tmp___0 ;
  int tmp___1 ;

  {
  g = 1;
  session = 0;
  err_log(9, 512U, (char *)"Preparing to send login response\n");
  root = daap_add_empty((DAAP_BLOCK *)((void *)0), (char *)"mlog");
  if (root) {
    g = (int )daap_add_int(root, (char *)"mstt", 200);
    session = config_get_next_session();
    if (g) {
      tmp___0 = daap_add_int(root, (char *)"mlid", session);
      if (tmp___0) {
        tmp___1 = 1;
      } else {
        goto _L;
      }
    } else {
      _L: /* CIL Label */ 
      tmp___1 = 0;
    }
    g = tmp___1;
  }
  if (! g) {
    daap_free(root);
    return ((DAAP_BLOCK *)((void *)0));
  }
  err_log(1, 512U, (char *)"%s logging in as session %d\n", hostname, session);
  return (root);
}
}
static MetaDataMap gSongMetaDataMap[36]  = 
  {      {"dmap.itemid", 0}, 
        {"dmap.itemname", 1}, 
        {"dmap.itemkind", 2}, 
        {"dmap.persistentid", 3}, 
        {"dmap.containeritemid", 4}, 
        {"dmap.parentcontainerid", 5}, 
        {"daap.songalbum", 6}, 
        {"daap.songartist", 7}, 
        {"daap.songbitrate", 9}, 
        {"daap.songbeatsperminute", 8}, 
        {"daap.songcomment", 10}, 
        {"daap.songcompilation", 11}, 
        {"daap.songcomposer", 12}, 
        {"daap.songdatakind", 13}, 
        {"daap.songdataurl", 14}, 
        {"daap.songdateadded", 15}, 
        {"daap.songdatemodified", 16}, 
        {"daap.songdescription", 17}, 
        {"daap.songdisabled", 18}, 
        {"daap.songdisccount", 19}, 
        {"daap.songdiscnumber", 20}, 
        {"daap.songeqpreset", 21}, 
        {"daap.songformat", 22}, 
        {"daap.songgenre", 23}, 
        {"daap.songgrouping", 24}, 
        {"daap.songrelativevolume", 25}, 
        {"daap.songsamplerate", 26}, 
        {"daap.songsize", 27}, 
        {"daap.songstarttime", 28}, 
        {"daap.songstoptime", 29}, 
        {"daap.songtime", 30}, 
        {"daap.songtrackcount", 31}, 
        {"daap.songtracknumber", 32}, 
        {"daap.songuserrating", 33}, 
        {"daap.songyear", 34}, 
        {(char const   *)0, (MetaFieldName_t )0}};
MetaField_t encodeMetaRequest(char *meta , MetaDataMap *map ) 
{ MetaField_t bits ;
  char *start ;
  char *end ;
  MetaDataMap *m ;
  int len ;
  size_t tmp ;
  char *tmp___1 ;
  int tmp___67 ;
  size_t __s1_len___0 ;
  size_t __s2_len___0 ;
  int tmp___98 ;
  size_t tmp___99 ;
  register int __result___85 ;
  unsigned char const   *__s2___14 ;
  register int __result___86 ;
  int tmp___114 ;
  register int __result___93 ;
  unsigned char const   *__s1___30 ;
  register int __result___94 ;
  int tmp___121 ;
  int tmp___122 ;
  int tmp___123 ;
  int tmp___124 ;
  int tmp___125 ;
  int tmp___126 ;
  int tmp___127 ;
  int tmp___128 ;
  size_t tmp___129 ;
  int tmp___130 ;
  size_t tmp___131 ;

  {
  bits = (MetaField_t )0;
  start = meta;
  while ((*start)) {
    tmp___1 = strchr((char const   *)start, ',');
    end = tmp___1;
    if ((unsigned int )((char *)0) == (unsigned int )end) {
      tmp = strlen((char const   *)start);
      end = start + tmp;
    }
    len = end - start;
    if ((int )(*end) != 0) {
      end ++;
    }
    m = map;
    while (m->tag) {
      tmp___127 = __builtin_constant_p(len);
      if (tmp___127) {
        tmp___128 = __builtin_constant_p(m->tag);
        if (tmp___128) {
          tmp___129 = strlen(m->tag);
          if (tmp___129 < (unsigned int )len) {
            goto _L___352;
          } else {
            goto _L___354;
          }
        } else {
          _L___354: /* CIL Label */ 
          tmp___130 = __builtin_constant_p(start);
          if (tmp___130) {
            tmp___131 = strlen((char const   *)start);
            if (tmp___131 < (unsigned int )len) {
              _L___352: /* CIL Label */ 
              tmp___124 = __builtin_constant_p(m->tag);
              if (tmp___124) {
                tmp___125 = __builtin_constant_p(start);
                if (tmp___125) {
                  __s1_len___0 = strlen(m->tag);
                  __s2_len___0 = strlen((char const   *)start);
                  if (! ((unsigned int )((void const   *)(m->tag + 1)) - (unsigned int )((void const   *)m->tag) ==
                         1U)) {
                    goto _L___348;
                  } else {
                    if (__s1_len___0 >= 4U) {
                      _L___348: /* CIL Label */ 
                      if (! ((unsigned int )((void const   *)(start + 1)) - (unsigned int )((void const   *)start) ==
                             1U)) {
                        goto _L___347;
                      } else {
                        if (__s2_len___0 >= 4U) {
                          _L___347: /* CIL Label */ 
                          tmp___126 = 1;
                        } else {
                          goto _L___346;
                        }
                      }
                    } else {
                      _L___346: /* CIL Label */ 
                      tmp___126 = 0;
                    }
                  }
                  if (tmp___126) {
                    if (__s1_len___0 < __s2_len___0) {
                      tmp___99 = __s1_len___0;
                    } else {
                      tmp___99 = __s2_len___0;
                    }
                    tmp___98 = memcmp((void const   *)m->tag, (void const   *)((char const   *)start),
                                      tmp___99 + 1U);
                  } else {
                    goto _L___350;
                  }
                } else {
                  goto _L___350;
                }
              } else {
                _L___350: /* CIL Label */ 
                tmp___123 = __builtin_constant_p(m->tag);
                if (tmp___123) {
                  if ((unsigned int )((void const   *)(m->tag + 1)) - (unsigned int )((void const   *)m->tag) ==
                      1U) {
                    __s1_len___0 = strlen(m->tag);
                    if (__s1_len___0 < 4U) {
                      tmp___114 = __builtin_constant_p(start);
                      if (tmp___114) {
                        if ((unsigned int )((void const   *)(start + 1)) - (unsigned int )((void const   *)start) ==
                            1U) {
                          __result___85 = (int )((int const   )(*((unsigned char const   *)m->tag +
                                                                  0)) - (int const   )(*((unsigned char const   *)((char const   *)start) +
                                                                                         0)));
                          if (__s1_len___0 > 0U) {
                            if (__result___85 == 0) {
                              __result___85 = (int )((int const   )(*((unsigned char const   *)m->tag +
                                                                      1)) - (int const   )(*((unsigned char const   *)((char const   *)start) +
                                                                                             1)));
                              if (__s1_len___0 > 1U) {
                                if (__result___85 == 0) {
                                  __result___85 = (int )((int const   )(*((unsigned char const   *)m->tag +
                                                                          2)) - (int const   )(*((unsigned char const   *)((char const   *)start) +
                                                                                                 2)));
                                  if (__s1_len___0 > 2U) {
                                    if (__result___85 == 0) {
                                      __result___85 = (int )((int const   )(*((unsigned char const   *)m->tag +
                                                                              3)) -
                                                             (int const   )(*((unsigned char const   *)((char const   *)start) +
                                                                              3)));
                                    } else {
                                      goto _L___309;
                                    }
                                  } else {
                                    _L___309: /* CIL Label */ ;
                                  }
                                } else {
                                  goto _L___310;
                                }
                              } else {
                                _L___310: /* CIL Label */ ;
                              }
                            } else {
                              goto _L___311;
                            }
                          } else {
                            _L___311: /* CIL Label */ ;
                          }
                          tmp___98 = __result___85;
                        } else {
                          goto _L___315;
                        }
                      } else {
                        _L___315: /* CIL Label */ 
                        __s2___14 = (unsigned char const   *)((char const   *)start);
                        __result___86 = (int )((int const   )(*((unsigned char const   *)m->tag +
                                                                0)) - (int const   )(*(__s2___14 +
                                                                                       0)));
                        if (__s1_len___0 > 0U) {
                          if (__result___86 == 0) {
                            __result___86 = (int )((int const   )(*((unsigned char const   *)m->tag +
                                                                    1)) - (int const   )(*(__s2___14 +
                                                                                           1)));
                            if (__s1_len___0 > 1U) {
                              if (__result___86 == 0) {
                                __result___86 = (int )((int const   )(*((unsigned char const   *)m->tag +
                                                                        2)) - (int const   )(*(__s2___14 +
                                                                                               2)));
                                if (__s1_len___0 > 2U) {
                                  if (__result___86 == 0) {
                                    __result___86 = (int )((int const   )(*((unsigned char const   *)m->tag +
                                                                            3)) -
                                                           (int const   )(*(__s2___14 +
                                                                            3)));
                                  } else {
                                    goto _L___312;
                                  }
                                } else {
                                  _L___312: /* CIL Label */ ;
                                }
                              } else {
                                goto _L___313;
                              }
                            } else {
                              _L___313: /* CIL Label */ ;
                            }
                          } else {
                            goto _L___314;
                          }
                        } else {
                          _L___314: /* CIL Label */ ;
                        }
                        tmp___98 = __result___86;
                      }
                    } else {
                      goto _L___345;
                    }
                  } else {
                    goto _L___345;
                  }
                } else {
                  _L___345: /* CIL Label */ 
                  tmp___122 = __builtin_constant_p(start);
                  if (tmp___122) {
                    if ((unsigned int )((void const   *)(start + 1)) - (unsigned int )((void const   *)start) ==
                        1U) {
                      __s2_len___0 = strlen((char const   *)start);
                      if (__s2_len___0 < 4U) {
                        tmp___121 = __builtin_constant_p(m->tag);
                        if (tmp___121) {
                          if ((unsigned int )((void const   *)(m->tag + 1)) - (unsigned int )((void const   *)m->tag) ==
                              1U) {
                            __result___93 = (int )((int const   )(*((unsigned char const   *)m->tag +
                                                                    0)) - (int const   )(*((unsigned char const   *)((char const   *)start) +
                                                                                           0)));
                            if (__s2_len___0 > 0U) {
                              if (__result___93 == 0) {
                                __result___93 = (int )((int const   )(*((unsigned char const   *)m->tag +
                                                                        1)) - (int const   )(*((unsigned char const   *)((char const   *)start) +
                                                                                               1)));
                                if (__s2_len___0 > 1U) {
                                  if (__result___93 == 0) {
                                    __result___93 = (int )((int const   )(*((unsigned char const   *)m->tag +
                                                                            2)) -
                                                           (int const   )(*((unsigned char const   *)((char const   *)start) +
                                                                            2)));
                                    if (__s2_len___0 > 2U) {
                                      if (__result___93 == 0) {
                                        __result___93 = (int )((int const   )(*((unsigned char const   *)m->tag +
                                                                                3)) -
                                                               (int const   )(*((unsigned char const   *)((char const   *)start) +
                                                                                3)));
                                      } else {
                                        goto _L___335;
                                      }
                                    } else {
                                      _L___335: /* CIL Label */ ;
                                    }
                                  } else {
                                    goto _L___336;
                                  }
                                } else {
                                  _L___336: /* CIL Label */ ;
                                }
                              } else {
                                goto _L___337;
                              }
                            } else {
                              _L___337: /* CIL Label */ ;
                            }
                            tmp___98 = __result___93;
                          } else {
                            goto _L___341;
                          }
                        } else {
                          _L___341: /* CIL Label */ 
                          __s1___30 = (unsigned char const   *)m->tag;
                          __result___94 = (int )((int const   )(*(__s1___30 + 0)) -
                                                 (int const   )(*((unsigned char const   *)((char const   *)start) +
                                                                  0)));
                          if (__s2_len___0 > 0U) {
                            if (__result___94 == 0) {
                              __result___94 = (int )((int const   )(*(__s1___30 +
                                                                      1)) - (int const   )(*((unsigned char const   *)((char const   *)start) +
                                                                                             1)));
                              if (__s2_len___0 > 1U) {
                                if (__result___94 == 0) {
                                  __result___94 = (int )((int const   )(*(__s1___30 +
                                                                          2)) - (int const   )(*((unsigned char const   *)((char const   *)start) +
                                                                                                 2)));
                                  if (__s2_len___0 > 2U) {
                                    if (__result___94 == 0) {
                                      __result___94 = (int )((int const   )(*(__s1___30 +
                                                                              3)) -
                                                             (int const   )(*((unsigned char const   *)((char const   *)start) +
                                                                              3)));
                                    } else {
                                      goto _L___338;
                                    }
                                  } else {
                                    _L___338: /* CIL Label */ ;
                                  }
                                } else {
                                  goto _L___339;
                                }
                              } else {
                                _L___339: /* CIL Label */ ;
                              }
                            } else {
                              goto _L___340;
                            }
                          } else {
                            _L___340: /* CIL Label */ ;
                          }
                          tmp___98 = __result___94;
                        }
                      } else {
                        goto _L___343;
                      }
                    } else {
                      goto _L___343;
                    }
                  } else {
                    _L___343: /* CIL Label */ 
                    tmp___98 = strcmp(m->tag, (char const   *)start);
                  }
                }
              }
              tmp___67 = tmp___98;
            } else {
              goto _L___353;
            }
          } else {
            _L___353: /* CIL Label */ 
            goto _L___351;
          }
        }
      } else {
        _L___351: /* CIL Label */ 
        tmp___67 = strncmp(m->tag, (char const   *)start, (unsigned int )len);
      }
      if (! tmp___67) {
        break;
      }
      m ++;
    }
    if (m->tag) {
      bits |= 1ULL << (int )m->bit;
    } else {
      err_log(2, 512U, (char *)"Unknown meta code: %.*s\n", len, start);
    }
    start = end;
  }
  err_log(9, 512U, (char *)"meta codes: %llu\n", bits);
  return (bits);
}
}
int wantsMeta(MetaField_t meta , MetaFieldName_t fieldNo ) 
{ 

  {
  return (0ULL != (meta & (1ULL << (int )fieldNo)));
}
}
DAAP_BLOCK *daap_response_songlist(char *metaStr , char *query ) 
{ DAAP_BLOCK *root ;
  int g ;
  DAAP_BLOCK *mlcl ;
  ENUMHANDLE henum ;
  MP3FILE *current ;
  MetaField_t meta ;
  query_node_t *filter ;
  int songs ;
  int tmp ;
  DAAP_BLOCK *tmp___1 ;
  int tmp___2 ;
  DAAP_BLOCK *tmp___3 ;
  int tmp___4 ;
  DAAP_BLOCK *tmp___5 ;
  int tmp___6 ;
  DAAP_BLOCK *tmp___7 ;
  int tmp___8 ;

  {
  g = 1;
  filter = (query_node_t *)0;
  songs = 0;
  err_log(9, 512U, (char *)"enter daap_response_songlist\n");
  if ((unsigned int )((char *)0) == (unsigned int )metaStr) {
    meta = 0xffffffffffffffffULL;
  } else {
    meta = encodeMetaRequest(metaStr, gSongMetaDataMap);
  }
  if ((unsigned int )((char *)0) != (unsigned int )query) {
    filter = query_build((char const   *)query, (query_field_t const   *)(song_fields));
    err_log(5, 528U, (char *)"query: %s\n", query);
    if (err_debuglevel >= 5) {
      query_dump(stderr, filter, 0);
    }
  }
  err_log(9, 516U, (char *)"Preparing to send db items\n");
  henum = db_enum_begin();
  if (! henum) {
    tmp = db_get_song_count();
    if (tmp) {
      err_log(9, 516U, (char *)"Can\'t get enum handle - exiting daap_response_songlist\n");
      return ((DAAP_BLOCK *)((void *)0));
    } else {
      goto _L;
    }
  } else {
    _L: /* CIL Label */ ;
  }
  root = daap_add_empty((DAAP_BLOCK *)((void *)0), (char *)"adbs");
  if (root) {
    g = (int )daap_add_int(root, (char *)"mstt", 200);
    if (g) {
      tmp___1 = daap_add_char(root, (char *)"muty", (char)0);
      if (tmp___1) {
        tmp___2 = 1;
      } else {
        goto _L___0;
      }
    } else {
      _L___0: /* CIL Label */ 
      tmp___2 = 0;
    }
    g = tmp___2;
    if (g) {
      tmp___3 = daap_add_int(root, (char *)"mtco", 0);
      if (tmp___3) {
        tmp___4 = 1;
      } else {
        goto _L___1;
      }
    } else {
      _L___1: /* CIL Label */ 
      tmp___4 = 0;
    }
    g = tmp___4;
    if (g) {
      tmp___5 = daap_add_int(root, (char *)"mrco", 0);
      if (tmp___5) {
        tmp___6 = 1;
      } else {
        goto _L___2;
      }
    } else {
      _L___2: /* CIL Label */ 
      tmp___6 = 0;
    }
    g = tmp___6;
    mlcl = daap_add_empty(root, (char *)"mlcl");
    if (mlcl) {
      while (1) {
        if (g) {
          current = db_enum(& henum);
          if (! current) {
            goto _L___4;
          }
        } else {
          _L___4: /* CIL Label */ 
          break;
        }
        if ((unsigned int )filter == (unsigned int )((query_node_t *)0)) {
          goto _L___3;
        } else {
          tmp___8 = query_test(filter, (void *)current);
          if (tmp___8) {
            _L___3: /* CIL Label */ 
            err_log(9, 516U, (char *)"Got entry for %s\n", current->fname);
            tmp___7 = daap_add_song_entry(mlcl, current, meta);
            g = (unsigned int )((DAAP_BLOCK *)0) != (unsigned int )tmp___7;
            songs ++;
          }
        }
      }
    } else {
      g = 0;
    }
  }
  db_enum_end(henum);
  if ((unsigned int )filter != (unsigned int )((query_node_t *)0)) {
    query_free(filter);
  }
  if (! g) {
    err_log(9, 516U, (char *)"Error enumerating db - exiting daap_response_songlist\n");
    daap_free(root);
    return ((DAAP_BLOCK *)((void *)0));
  }
  err_log(9, 516U, (char *)"Successfully enumerated database - %d items\n", songs);
  daap_set_int(root, (char *)"mtco", songs);
  daap_set_int(root, (char *)"mrco", songs);
  err_log(9, 512U, (char *)"Exiting daap_response_songlist\n");
  return (root);
}
}
DAAP_BLOCK *daap_add_song_entry(DAAP_BLOCK *mlcl , MP3FILE *song , unsigned long long meta ) 
{ DAAP_BLOCK *mlit ;
  int g ;
  DAAP_BLOCK *tmp ;
  int tmp___0 ;
  int tmp___1 ;
  DAAP_BLOCK *tmp___2 ;
  int tmp___3 ;
  int tmp___4 ;
  DAAP_BLOCK *tmp___5 ;
  int tmp___6 ;
  int tmp___7 ;
  DAAP_BLOCK *tmp___8 ;
  int tmp___9 ;
  int tmp___10 ;
  DAAP_BLOCK *tmp___11 ;
  int tmp___12 ;
  int tmp___13 ;
  DAAP_BLOCK *tmp___14 ;
  int tmp___15 ;
  int tmp___16 ;
  DAAP_BLOCK *tmp___17 ;
  int tmp___18 ;
  int tmp___19 ;
  DAAP_BLOCK *tmp___20 ;
  int tmp___21 ;
  int tmp___22 ;
  DAAP_BLOCK *tmp___23 ;
  int tmp___24 ;
  int tmp___25 ;
  DAAP_BLOCK *tmp___26 ;
  int tmp___27 ;
  int tmp___28 ;
  DAAP_BLOCK *tmp___29 ;
  int tmp___30 ;
  int tmp___31 ;
  DAAP_BLOCK *tmp___32 ;
  int tmp___33 ;
  int tmp___34 ;
  DAAP_BLOCK *tmp___35 ;
  int tmp___36 ;
  int tmp___37 ;
  DAAP_BLOCK *tmp___38 ;
  int tmp___39 ;
  int tmp___40 ;
  DAAP_BLOCK *tmp___41 ;
  int tmp___42 ;
  int tmp___43 ;
  DAAP_BLOCK *tmp___44 ;
  int tmp___45 ;
  int tmp___46 ;
  DAAP_BLOCK *tmp___47 ;
  int tmp___48 ;
  int tmp___49 ;
  DAAP_BLOCK *tmp___50 ;
  int tmp___51 ;
  int tmp___52 ;
  DAAP_BLOCK *tmp___53 ;
  int tmp___54 ;
  int tmp___55 ;
  DAAP_BLOCK *tmp___56 ;
  int tmp___57 ;
  int tmp___58 ;
  DAAP_BLOCK *tmp___59 ;
  int tmp___60 ;
  int tmp___61 ;
  DAAP_BLOCK *tmp___62 ;
  int tmp___63 ;
  int tmp___64 ;
  DAAP_BLOCK *tmp___65 ;
  int tmp___66 ;
  int tmp___67 ;
  DAAP_BLOCK *tmp___68 ;
  int tmp___69 ;
  int tmp___70 ;
  DAAP_BLOCK *tmp___71 ;
  int tmp___72 ;
  int tmp___73 ;
  DAAP_BLOCK *tmp___74 ;
  int tmp___75 ;
  int tmp___76 ;
  DAAP_BLOCK *tmp___77 ;
  int tmp___78 ;
  int tmp___79 ;
  DAAP_BLOCK *tmp___80 ;
  int tmp___81 ;
  int tmp___82 ;
  DAAP_BLOCK *tmp___83 ;
  int tmp___84 ;
  int tmp___85 ;

  {
  g = 1;
  mlit = daap_add_empty(mlcl, (char *)"mlit");
  if (mlit) {
    tmp___1 = wantsMeta(meta, 2);
    if (tmp___1) {
      if (g) {
        tmp = daap_add_char(mlit, (char *)"mikd", (char )song->item_kind);
        if (tmp) {
          tmp___0 = 1;
        } else {
          goto _L;
        }
      } else {
        _L: /* CIL Label */ 
        tmp___0 = 0;
      }
      g = tmp___0;
    }
    tmp___4 = wantsMeta(meta, 13);
    if (tmp___4) {
      if (g) {
        tmp___2 = daap_add_char(mlit, (char *)"asdk", (char )song->data_kind);
        if (tmp___2) {
          tmp___3 = 1;
        } else {
          goto _L___0;
        }
      } else {
        _L___0: /* CIL Label */ 
        tmp___3 = 0;
      }
      g = tmp___3;
    }
    tmp___7 = wantsMeta(meta, 14);
    if (tmp___7) {
      if (g) {
        tmp___5 = daap_add_string(mlit, (char *)"asul", song->url);
        if (tmp___5) {
          tmp___6 = 1;
        } else {
          goto _L___1;
        }
      } else {
        _L___1: /* CIL Label */ 
        tmp___6 = 0;
      }
      g = tmp___6;
    }
    if (song->album) {
      tmp___10 = wantsMeta(meta, 6);
      if (tmp___10) {
        if (g) {
          tmp___8 = daap_add_string(mlit, (char *)"asal", song->album);
          if (tmp___8) {
            tmp___9 = 1;
          } else {
            goto _L___2;
          }
        } else {
          _L___2: /* CIL Label */ 
          tmp___9 = 0;
        }
        g = tmp___9;
      } else {
        goto _L___3;
      }
    } else {
      _L___3: /* CIL Label */ ;
    }
    if (song->artist) {
      tmp___13 = wantsMeta(meta, 7);
      if (tmp___13) {
        if (g) {
          tmp___11 = daap_add_string(mlit, (char *)"asar", song->artist);
          if (tmp___11) {
            tmp___12 = 1;
          } else {
            goto _L___4;
          }
        } else {
          _L___4: /* CIL Label */ 
          tmp___12 = 0;
        }
        g = tmp___12;
      } else {
        goto _L___5;
      }
    } else {
      _L___5: /* CIL Label */ ;
    }
    if (song->bpm) {
      tmp___16 = wantsMeta(meta, 8);
      if (tmp___16) {
        if (g) {
          tmp___14 = daap_add_short(mlit, (char *)"asbt", (short )song->bpm);
          if (tmp___14) {
            tmp___15 = 1;
          } else {
            goto _L___6;
          }
        } else {
          _L___6: /* CIL Label */ 
          tmp___15 = 0;
        }
        g = tmp___15;
      } else {
        goto _L___7;
      }
    } else {
      _L___7: /* CIL Label */ ;
    }
    if (song->bitrate) {
      tmp___19 = wantsMeta(meta, 9);
      if (tmp___19) {
        if (g) {
          tmp___17 = daap_add_short(mlit, (char *)"asbr", (short )song->bitrate);
          if (tmp___17) {
            tmp___18 = 1;
          } else {
            goto _L___8;
          }
        } else {
          _L___8: /* CIL Label */ 
          tmp___18 = 0;
        }
        g = tmp___18;
      } else {
        goto _L___9;
      }
    } else {
      _L___9: /* CIL Label */ ;
    }
    if (song->comment) {
      tmp___22 = wantsMeta(meta, 10);
      if (tmp___22) {
        if (g) {
          tmp___20 = daap_add_string(mlit, (char *)"ascm", song->comment);
          if (tmp___20) {
            tmp___21 = 1;
          } else {
            goto _L___10;
          }
        } else {
          _L___10: /* CIL Label */ 
          tmp___21 = 0;
        }
        g = tmp___21;
      } else {
        goto _L___11;
      }
    } else {
      _L___11: /* CIL Label */ ;
    }
    if (song->compilation) {
      tmp___25 = wantsMeta(meta, 11);
      if (tmp___25) {
        if (g) {
          tmp___23 = daap_add_char(mlit, (char *)"asco", song->compilation);
          if (tmp___23) {
            tmp___24 = 1;
          } else {
            goto _L___12;
          }
        } else {
          _L___12: /* CIL Label */ 
          tmp___24 = 0;
        }
        g = tmp___24;
      } else {
        goto _L___13;
      }
    } else {
      _L___13: /* CIL Label */ ;
    }
    if (song->composer) {
      tmp___28 = wantsMeta(meta, 12);
      if (tmp___28) {
        if (g) {
          tmp___26 = daap_add_string(mlit, (char *)"ascp", song->composer);
          if (tmp___26) {
            tmp___27 = 1;
          } else {
            goto _L___14;
          }
        } else {
          _L___14: /* CIL Label */ 
          tmp___27 = 0;
        }
        g = tmp___27;
      } else {
        goto _L___15;
      }
    } else {
      _L___15: /* CIL Label */ ;
    }
    if (song->grouping) {
      tmp___31 = wantsMeta(meta, 24);
      if (tmp___31) {
        if (g) {
          tmp___29 = daap_add_string(mlit, (char *)"agrp", song->grouping);
          if (tmp___29) {
            tmp___30 = 1;
          } else {
            goto _L___16;
          }
        } else {
          _L___16: /* CIL Label */ 
          tmp___30 = 0;
        }
        g = tmp___30;
      } else {
        goto _L___17;
      }
    } else {
      _L___17: /* CIL Label */ ;
    }
    if (song->time_added) {
      tmp___34 = wantsMeta(meta, 15);
      if (tmp___34) {
        if (g) {
          tmp___32 = daap_add_int(mlit, (char *)"asda", song->time_added);
          if (tmp___32) {
            tmp___33 = 1;
          } else {
            goto _L___18;
          }
        } else {
          _L___18: /* CIL Label */ 
          tmp___33 = 0;
        }
        g = tmp___33;
      } else {
        goto _L___19;
      }
    } else {
      _L___19: /* CIL Label */ ;
    }
    if (song->time_modified) {
      tmp___37 = wantsMeta(meta, 16);
      if (tmp___37) {
        if (g) {
          tmp___35 = daap_add_int(mlit, (char *)"asdm", song->time_modified);
          if (tmp___35) {
            tmp___36 = 1;
          } else {
            goto _L___20;
          }
        } else {
          _L___20: /* CIL Label */ 
          tmp___36 = 0;
        }
        g = tmp___36;
      } else {
        goto _L___21;
      }
    } else {
      _L___21: /* CIL Label */ ;
    }
    if (song->total_discs) {
      tmp___40 = wantsMeta(meta, 19);
      if (tmp___40) {
        if (g) {
          tmp___38 = daap_add_short(mlit, (char *)"asdc", (short )song->total_discs);
          if (tmp___38) {
            tmp___39 = 1;
          } else {
            goto _L___22;
          }
        } else {
          _L___22: /* CIL Label */ 
          tmp___39 = 0;
        }
        g = tmp___39;
      } else {
        goto _L___23;
      }
    } else {
      _L___23: /* CIL Label */ ;
    }
    if (song->disc) {
      tmp___43 = wantsMeta(meta, 20);
      if (tmp___43) {
        if (g) {
          tmp___41 = daap_add_short(mlit, (char *)"asdn", (short )song->disc);
          if (tmp___41) {
            tmp___42 = 1;
          } else {
            goto _L___24;
          }
        } else {
          _L___24: /* CIL Label */ 
          tmp___42 = 0;
        }
        g = tmp___42;
      } else {
        goto _L___25;
      }
    } else {
      _L___25: /* CIL Label */ ;
    }
    if (song->genre) {
      tmp___46 = wantsMeta(meta, 23);
      if (tmp___46) {
        if (g) {
          tmp___44 = daap_add_string(mlit, (char *)"asgn", song->genre);
          if (tmp___44) {
            tmp___45 = 1;
          } else {
            goto _L___26;
          }
        } else {
          _L___26: /* CIL Label */ 
          tmp___45 = 0;
        }
        g = tmp___45;
      } else {
        goto _L___27;
      }
    } else {
      _L___27: /* CIL Label */ ;
    }
    tmp___49 = wantsMeta(meta, 0);
    if (tmp___49) {
      if (g) {
        tmp___47 = daap_add_int(mlit, (char *)"miid", (int )song->id);
        if (tmp___47) {
          tmp___48 = 1;
        } else {
          goto _L___28;
        }
      } else {
        _L___28: /* CIL Label */ 
        tmp___48 = 0;
      }
      g = tmp___48;
    }
    tmp___52 = wantsMeta(meta, 3);
    if (tmp___52) {
      if (g) {
        tmp___50 = daap_add_long(mlit, (char *)"mper", 0, (int )song->id);
        if (tmp___50) {
          tmp___51 = 1;
        } else {
          goto _L___29;
        }
      } else {
        _L___29: /* CIL Label */ 
        tmp___51 = 0;
      }
      g = tmp___51;
    }
    tmp___55 = wantsMeta(meta, 22);
    if (tmp___55) {
      if (g) {
        tmp___53 = daap_add_string(mlit, (char *)"asfm", song->type);
        if (tmp___53) {
          tmp___54 = 1;
        } else {
          goto _L___30;
        }
      } else {
        _L___30: /* CIL Label */ 
        tmp___54 = 0;
      }
      g = tmp___54;
    }
    tmp___58 = wantsMeta(meta, 17);
    if (tmp___58) {
      if (g) {
        tmp___56 = daap_add_string(mlit, (char *)"asdt", song->description);
        if (tmp___56) {
          tmp___57 = 1;
        } else {
          goto _L___31;
        }
      } else {
        _L___31: /* CIL Label */ 
        tmp___57 = 0;
      }
      g = tmp___57;
    }
    tmp___61 = wantsMeta(meta, 1);
    if (tmp___61) {
      if (g) {
        tmp___59 = daap_add_string(mlit, (char *)"minm", song->title);
        if (tmp___59) {
          tmp___60 = 1;
        } else {
          goto _L___32;
        }
      } else {
        _L___32: /* CIL Label */ 
        tmp___60 = 0;
      }
      g = tmp___60;
    }
    if (song->samplerate) {
      tmp___64 = wantsMeta(meta, 26);
      if (tmp___64) {
        if (g) {
          tmp___62 = daap_add_int(mlit, (char *)"assr", song->samplerate);
          if (tmp___62) {
            tmp___63 = 1;
          } else {
            goto _L___33;
          }
        } else {
          _L___33: /* CIL Label */ 
          tmp___63 = 0;
        }
        g = tmp___63;
      } else {
        goto _L___34;
      }
    } else {
      _L___34: /* CIL Label */ ;
    }
    if (song->file_size) {
      tmp___67 = wantsMeta(meta, 27);
      if (tmp___67) {
        if (g) {
          tmp___65 = daap_add_int(mlit, (char *)"assz", song->file_size);
          if (tmp___65) {
            tmp___66 = 1;
          } else {
            goto _L___35;
          }
        } else {
          _L___35: /* CIL Label */ 
          tmp___66 = 0;
        }
        g = tmp___66;
      } else {
        goto _L___36;
      }
    } else {
      _L___36: /* CIL Label */ ;
    }
    tmp___70 = wantsMeta(meta, 28);
    if (tmp___70) {
      if (g) {
        tmp___68 = daap_add_int(mlit, (char *)"asst", 0);
        if (tmp___68) {
          tmp___69 = 1;
        } else {
          goto _L___37;
        }
      } else {
        _L___37: /* CIL Label */ 
        tmp___69 = 0;
      }
      g = tmp___69;
    }
    tmp___73 = wantsMeta(meta, 29);
    if (tmp___73) {
      if (g) {
        tmp___71 = daap_add_int(mlit, (char *)"assp", 0);
        if (tmp___71) {
          tmp___72 = 1;
        } else {
          goto _L___38;
        }
      } else {
        _L___38: /* CIL Label */ 
        tmp___72 = 0;
      }
      g = tmp___72;
    }
    if (song->song_length) {
      tmp___76 = wantsMeta(meta, 30);
      if (tmp___76) {
        if (g) {
          tmp___74 = daap_add_int(mlit, (char *)"astm", song->song_length);
          if (tmp___74) {
            tmp___75 = 1;
          } else {
            goto _L___39;
          }
        } else {
          _L___39: /* CIL Label */ 
          tmp___75 = 0;
        }
        g = tmp___75;
      } else {
        goto _L___40;
      }
    } else {
      _L___40: /* CIL Label */ ;
    }
    if (song->total_tracks) {
      tmp___79 = wantsMeta(meta, 31);
      if (tmp___79) {
        if (g) {
          tmp___77 = daap_add_short(mlit, (char *)"astc", (short )song->total_tracks);
          if (tmp___77) {
            tmp___78 = 1;
          } else {
            goto _L___41;
          }
        } else {
          _L___41: /* CIL Label */ 
          tmp___78 = 0;
        }
        g = tmp___78;
      } else {
        goto _L___42;
      }
    } else {
      _L___42: /* CIL Label */ ;
    }
    if (song->track) {
      tmp___82 = wantsMeta(meta, 32);
      if (tmp___82) {
        if (g) {
          tmp___80 = daap_add_short(mlit, (char *)"astn", (short )song->track);
          if (tmp___80) {
            tmp___81 = 1;
          } else {
            goto _L___43;
          }
        } else {
          _L___43: /* CIL Label */ 
          tmp___81 = 0;
        }
        g = tmp___81;
      } else {
        goto _L___44;
      }
    } else {
      _L___44: /* CIL Label */ ;
    }
    if (song->year) {
      tmp___85 = wantsMeta(meta, 34);
      if (tmp___85) {
        if (g) {
          tmp___83 = daap_add_short(mlit, (char *)"asyr", (short )song->year);
          if (tmp___83) {
            tmp___84 = 1;
          } else {
            goto _L___45;
          }
        } else {
          _L___45: /* CIL Label */ 
          tmp___84 = 0;
        }
        g = tmp___84;
      } else {
        goto _L___46;
      }
    } else {
      _L___46: /* CIL Label */ ;
    }
  }
  if (g == 0) {
    daap_free(mlit);
    mlit = (DAAP_BLOCK *)0;
  }
  return (mlit);
}
}
DAAP_BLOCK *daap_response_update(int fd , int clientver ) 
{ DAAP_BLOCK *root ;
  int g ;
  fd_set rset ;
  struct timeval tv ;
  int result ;
  int __d0 ;
  int __d1 ;
  register char __result ;
  int tmp ;
  int tmp___1 ;
  DAAP_BLOCK *tmp___2 ;
  int tmp___3 ;

  {
  g = 1;
  err_log(9, 512U, (char *)"Preparing to send update response\n");
  while (1) {
    tmp = db_version();
    if (! (clientver == tmp)) {
      break;
    }
    while (1) {
      __asm__  volatile   ("cld; rep; stosl": "=c" (__d0), "=D" (__d1): "a" (0), "0" (sizeof(fd_set ) /
                                                                                      sizeof(__fd_mask )),
                           "1" (& rset.__fds_bits[0]): "memory");
      break;
    }
    __asm__  volatile   ("btsl %1,%0": "=m" (rset.__fds_bits[(unsigned int )fd / (8U *
                                                                                  sizeof(__fd_mask ))]): "r" ((unsigned int )fd %
                                                                                                              (8U *
                                                                                                               sizeof(__fd_mask ))): "cc",
                         "memory");
    tv.tv_sec = 30L;
    tv.tv_usec = 0L;
    result = select(fd + 1, (fd_set * __restrict  )(& rset), (fd_set * __restrict  )((void *)0),
                    (fd_set * __restrict  )((void *)0), (struct timeval * __restrict  )(& tv));
    __asm__  volatile   ("btl %1,%2 ; setcb %b0": "=q" (__result): "r" ((unsigned int )fd %
                                                                        (8U * sizeof(__fd_mask ))),
                         "m" (rset.__fds_bits[(unsigned int )fd / (8U * sizeof(__fd_mask ))]): "cc");
    if (__result) {
      err_log(9, 512U, (char *)"Socket closed?\n");
      return ((DAAP_BLOCK *)((void *)0));
    }
  }
  root = daap_add_empty((DAAP_BLOCK *)((void *)0), (char *)"mupd");
  if (root) {
    g = (int )daap_add_int(root, (char *)"mstt", 200);
    if (g) {
      tmp___1 = db_version();
      tmp___2 = daap_add_int(root, (char *)"musr", tmp___1);
      if (tmp___2) {
        tmp___3 = 1;
      } else {
        goto _L;
      }
    } else {
      _L: /* CIL Label */ 
      tmp___3 = 0;
    }
    g = tmp___3;
  }
  if (! g) {
    daap_free(root);
    return ((DAAP_BLOCK *)((void *)0));
  }
  return (root);
}
}
DAAP_BLOCK *daap_response_playlists(char *name ) 
{ DAAP_BLOCK *root ;
  DAAP_BLOCK *mlcl ;
  DAAP_BLOCK *mlit ;
  int g ;
  int playlistid ;
  ENUMHANDLE henum ;
  DAAP_BLOCK *tmp___0 ;
  int tmp___1 ;
  int tmp___2 ;
  DAAP_BLOCK *tmp___3 ;
  int tmp___4 ;
  int tmp___5 ;
  DAAP_BLOCK *tmp___6 ;
  int tmp___7 ;
  DAAP_BLOCK *tmp___8 ;
  int tmp___9 ;
  DAAP_BLOCK *tmp___10 ;
  int tmp___11 ;
  DAAP_BLOCK *tmp___12 ;
  int tmp___13 ;
  int tmp___14 ;
  DAAP_BLOCK *tmp___15 ;
  int tmp___16 ;
  int tmp___17 ;
  int tmp___18 ;
  char const   *tmp___20 ;
  int tmp___21 ;
  DAAP_BLOCK *tmp___22 ;
  int tmp___23 ;
  DAAP_BLOCK *tmp___24 ;
  int tmp___25 ;
  char *tmp___26 ;
  DAAP_BLOCK *tmp___27 ;
  int tmp___28 ;
  int tmp___29 ;
  DAAP_BLOCK *tmp___30 ;
  int tmp___31 ;
  DAAP_BLOCK *tmp___32 ;
  int tmp___33 ;
  int tmp___34 ;
  int tmp___35 ;
  int tmp___36 ;

  {
  root = (DAAP_BLOCK *)((void *)0);
  mlcl = (DAAP_BLOCK *)((void *)0);
  mlit = (DAAP_BLOCK *)((void *)0);
  g = 1;
  err_log(9, 512U, (char *)"Preparing to send playlists\n");
  root = daap_add_empty((DAAP_BLOCK *)((void *)0), (char *)"aply");
  if (root) {
    g = (int )daap_add_int(root, (char *)"mstt", 200);
    if (g) {
      tmp___0 = daap_add_char(root, (char *)"muty", (char)0);
      if (tmp___0) {
        tmp___1 = 1;
      } else {
        goto _L;
      }
    } else {
      _L: /* CIL Label */ 
      tmp___1 = 0;
    }
    g = tmp___1;
    if (g) {
      tmp___2 = db_get_playlist_count();
      tmp___3 = daap_add_int(root, (char *)"mtco", 1 + tmp___2);
      if (tmp___3) {
        tmp___4 = 1;
      } else {
        goto _L___0;
      }
    } else {
      _L___0: /* CIL Label */ 
      tmp___4 = 0;
    }
    g = tmp___4;
    if (g) {
      tmp___5 = db_get_playlist_count();
      tmp___6 = daap_add_int(root, (char *)"mrco", 1 + tmp___5);
      if (tmp___6) {
        tmp___7 = 1;
      } else {
        goto _L___1;
      }
    } else {
      _L___1: /* CIL Label */ 
      tmp___7 = 0;
    }
    g = tmp___7;
    mlcl = daap_add_empty(root, (char *)"mlcl");
    if (mlcl) {
      mlit = daap_add_empty(mlcl, (char *)"mlit");
      if (mlit) {
        if (g) {
          tmp___8 = daap_add_int(mlit, (char *)"miid", 1);
          if (tmp___8) {
            tmp___9 = 1;
          } else {
            goto _L___2;
          }
        } else {
          _L___2: /* CIL Label */ 
          tmp___9 = 0;
        }
        g = tmp___9;
        if (g) {
          tmp___10 = daap_add_long(mlit, (char *)"mper", 0, 1);
          if (tmp___10) {
            tmp___11 = 1;
          } else {
            goto _L___3;
          }
        } else {
          _L___3: /* CIL Label */ 
          tmp___11 = 0;
        }
        g = tmp___11;
        if (g) {
          tmp___12 = daap_add_string(mlit, (char *)"minm", name);
          if (tmp___12) {
            tmp___13 = 1;
          } else {
            goto _L___4;
          }
        } else {
          _L___4: /* CIL Label */ 
          tmp___13 = 0;
        }
        g = tmp___13;
        if (g) {
          tmp___14 = db_get_song_count();
          tmp___15 = daap_add_int(mlit, (char *)"mimc", tmp___14);
          if (tmp___15) {
            tmp___16 = 1;
          } else {
            goto _L___5;
          }
        } else {
          _L___5: /* CIL Label */ 
          tmp___16 = 0;
        }
        g = tmp___16;
      }
      if (g) {
        if (mlit) {
          tmp___17 = 1;
        } else {
          goto _L___6;
        }
      } else {
        _L___6: /* CIL Label */ 
        tmp___17 = 0;
      }
      g = tmp___17;
      henum = db_playlist_enum_begin();
      while (henum) {
        playlistid = db_playlist_enum(& henum);
        err_log(9, 640U, (char *)"Returning playlist %d\n", playlistid);
        tmp___18 = db_get_playlist_entry_count((unsigned long )playlistid);
        err_log(9, 640U, (char *)"  -- Songs: %d\n", tmp___18);
        tmp___21 = db_get_playlist_is_smart((unsigned long )playlistid);
        if (tmp___21) {
          tmp___20 = "Yes";
        } else {
          tmp___20 = "No";
        }
        err_log(9, 640U, (char *)"  -- Smart: %s\n", tmp___20);
        mlit = daap_add_empty(mlcl, (char *)"mlit");
        if (mlit) {
          if (g) {
            tmp___22 = daap_add_int(mlit, (char *)"miid", playlistid);
            if (tmp___22) {
              tmp___23 = 1;
            } else {
              goto _L___7;
            }
          } else {
            _L___7: /* CIL Label */ 
            tmp___23 = 0;
          }
          g = tmp___23;
          if (g) {
            tmp___24 = daap_add_long(mlit, (char *)"mper", 0, playlistid);
            if (tmp___24) {
              tmp___25 = 1;
            } else {
              goto _L___8;
            }
          } else {
            _L___8: /* CIL Label */ 
            tmp___25 = 0;
          }
          g = tmp___25;
          if (g) {
            tmp___26 = db_get_playlist_name((unsigned long )playlistid);
            tmp___27 = daap_add_string(mlit, (char *)"minm", tmp___26);
            if (tmp___27) {
              tmp___28 = 1;
            } else {
              goto _L___9;
            }
          } else {
            _L___9: /* CIL Label */ 
            tmp___28 = 0;
          }
          g = tmp___28;
          if (g) {
            tmp___29 = db_get_playlist_entry_count((unsigned long )playlistid);
            tmp___30 = daap_add_int(mlit, (char *)"mimc", tmp___29);
            if (tmp___30) {
              tmp___31 = 1;
            } else {
              goto _L___10;
            }
          } else {
            _L___10: /* CIL Label */ 
            tmp___31 = 0;
          }
          g = tmp___31;
          tmp___34 = db_get_playlist_is_smart((unsigned long )playlistid);
          if (tmp___34) {
            if (g) {
              tmp___32 = daap_add_char(mlit, (char *)"aeSP", (char)1);
              if (tmp___32) {
                tmp___33 = 1;
              } else {
                goto _L___11;
              }
            } else {
              _L___11: /* CIL Label */ 
              tmp___33 = 0;
            }
            g = tmp___33;
          }
        }
        if (g) {
          if (mlit) {
            tmp___35 = 1;
          } else {
            goto _L___12;
          }
        } else {
          _L___12: /* CIL Label */ 
          tmp___35 = 0;
        }
        g = tmp___35;
      }
      db_playlist_enum_end(henum);
    }
  }
  if (g) {
    if (mlcl) {
      tmp___36 = 1;
    } else {
      goto _L___13;
    }
  } else {
    _L___13: /* CIL Label */ 
    tmp___36 = 0;
  }
  g = tmp___36;
  if (! g) {
    err_log(5, 512U, (char *)"Memory problem.  Bailing\n");
    daap_free(root);
    return ((DAAP_BLOCK *)((void *)0));
  }
  return (root);
}
}
DAAP_BLOCK *daap_response_dbinfo(char *name ) 
{ DAAP_BLOCK *root ;
  DAAP_BLOCK *mlcl ;
  DAAP_BLOCK *mlit ;
  int g ;
  DAAP_BLOCK *tmp___0 ;
  int tmp___1 ;
  DAAP_BLOCK *tmp___2 ;
  int tmp___3 ;
  DAAP_BLOCK *tmp___4 ;
  int tmp___5 ;
  DAAP_BLOCK *tmp___6 ;
  int tmp___7 ;
  DAAP_BLOCK *tmp___8 ;
  int tmp___9 ;
  DAAP_BLOCK *tmp___10 ;
  int tmp___11 ;
  int tmp___12 ;
  DAAP_BLOCK *tmp___13 ;
  int tmp___14 ;
  int tmp___15 ;
  DAAP_BLOCK *tmp___16 ;
  int tmp___17 ;
  int tmp___18 ;
  int tmp___19 ;
  int tmp___20 ;

  {
  root = (DAAP_BLOCK *)((void *)0);
  mlcl = (DAAP_BLOCK *)((void *)0);
  mlit = (DAAP_BLOCK *)((void *)0);
  g = 1;
  err_log(9, 516U, (char *)"Preparing to send db info\n");
  root = daap_add_empty((DAAP_BLOCK *)((void *)0), (char *)"avdb");
  if (root) {
    g = (int )daap_add_int(root, (char *)"mstt", 200);
    if (g) {
      tmp___0 = daap_add_char(root, (char *)"muty", (char)0);
      if (tmp___0) {
        tmp___1 = 1;
      } else {
        goto _L;
      }
    } else {
      _L: /* CIL Label */ 
      tmp___1 = 0;
    }
    g = tmp___1;
    if (g) {
      tmp___2 = daap_add_int(root, (char *)"mtco", 1);
      if (tmp___2) {
        tmp___3 = 1;
      } else {
        goto _L___0;
      }
    } else {
      _L___0: /* CIL Label */ 
      tmp___3 = 0;
    }
    g = tmp___3;
    if (g) {
      tmp___4 = daap_add_int(root, (char *)"mrco", 1);
      if (tmp___4) {
        tmp___5 = 1;
      } else {
        goto _L___1;
      }
    } else {
      _L___1: /* CIL Label */ 
      tmp___5 = 0;
    }
    g = tmp___5;
    mlcl = daap_add_empty(root, (char *)"mlcl");
    if (mlcl) {
      mlit = daap_add_empty(mlcl, (char *)"mlit");
      if (mlit) {
        if (g) {
          tmp___6 = daap_add_int(mlit, (char *)"miid", 1);
          if (tmp___6) {
            tmp___7 = 1;
          } else {
            goto _L___2;
          }
        } else {
          _L___2: /* CIL Label */ 
          tmp___7 = 0;
        }
        g = tmp___7;
        if (g) {
          tmp___8 = daap_add_long(mlit, (char *)"mper", 0, 1);
          if (tmp___8) {
            tmp___9 = 1;
          } else {
            goto _L___3;
          }
        } else {
          _L___3: /* CIL Label */ 
          tmp___9 = 0;
        }
        g = tmp___9;
        if (g) {
          tmp___10 = daap_add_string(mlit, (char *)"minm", name);
          if (tmp___10) {
            tmp___11 = 1;
          } else {
            goto _L___4;
          }
        } else {
          _L___4: /* CIL Label */ 
          tmp___11 = 0;
        }
        g = tmp___11;
        if (g) {
          tmp___12 = db_get_song_count();
          tmp___13 = daap_add_int(mlit, (char *)"mimc", tmp___12);
          if (tmp___13) {
            tmp___14 = 1;
          } else {
            goto _L___5;
          }
        } else {
          _L___5: /* CIL Label */ 
          tmp___14 = 0;
        }
        g = tmp___14;
        if (g) {
          tmp___15 = db_get_playlist_count();
          tmp___16 = daap_add_int(mlit, (char *)"mctc", 1 + tmp___15);
          if (tmp___16) {
            tmp___17 = 1;
          } else {
            goto _L___6;
          }
        } else {
          _L___6: /* CIL Label */ 
          tmp___17 = 0;
        }
        g = tmp___17;
      }
    }
  }
  if (g) {
    if (mlcl) {
      if (mlit) {
        tmp___18 = 1;
      } else {
        goto _L___8;
      }
    } else {
      goto _L___8;
    }
  } else {
    _L___8: /* CIL Label */ 
    tmp___18 = 0;
  }
  g = tmp___18;
  if (! g) {
    err_log(5, 512U, (char *)"Memory problem.  Bailing\n");
    daap_free(root);
    return ((DAAP_BLOCK *)((void *)0));
  }
  tmp___19 = db_get_playlist_count();
  tmp___20 = db_get_song_count();
  err_log(9, 516U, (char *)"Sent db info... %d songs, %d playlists\n", tmp___20, tmp___19);
  return (root);
}
}
DAAP_BLOCK *daap_response_server_info(char *name , char *client_version ) 
{ DAAP_BLOCK *root ;
  int g ;
  int mpro ;
  int apro ;
  size_t __s1_len ;
  size_t __s2_len ;
  int tmp___20 ;
  size_t tmp___21 ;
  register int __result___37 ;
  unsigned char const   *__s2___6 ;
  register int __result___38 ;
  register int __result___45 ;
  unsigned char const   *__s1___14 ;
  register int __result___46 ;
  int tmp___36 ;
  int tmp___37 ;
  int tmp___38 ;
  int tmp___39 ;
  size_t __s1_len___0 ;
  size_t __s2_len___0 ;
  int tmp___61 ;
  size_t tmp___62 ;
  register int __result___85 ;
  unsigned char const   *__s2___14 ;
  register int __result___86 ;
  register int __result___93 ;
  unsigned char const   *__s1___30 ;
  register int __result___94 ;
  int tmp___77 ;
  int tmp___78 ;
  int tmp___79 ;
  int tmp___80 ;
  DAAP_BLOCK *tmp___82 ;
  int tmp___83 ;
  DAAP_BLOCK *tmp___84 ;
  int tmp___85 ;
  DAAP_BLOCK *tmp___86 ;
  int tmp___87 ;
  int tmp___88 ;
  DAAP_BLOCK *tmp___89 ;
  int tmp___90 ;
  DAAP_BLOCK *tmp___91 ;
  int tmp___92 ;
  DAAP_BLOCK *tmp___93 ;
  int tmp___94 ;
  DAAP_BLOCK *tmp___95 ;
  int tmp___96 ;
  DAAP_BLOCK *tmp___97 ;
  int tmp___98 ;
  DAAP_BLOCK *tmp___99 ;
  int tmp___100 ;
  DAAP_BLOCK *tmp___101 ;
  int tmp___102 ;
  DAAP_BLOCK *tmp___103 ;
  int tmp___104 ;

  {
  g = 1;
  mpro = 131072;
  apro = 196608;
  err_log(9, 512U, (char *)"Preparing to send server-info for client ver %s\n", client_version);
  root = daap_add_empty((DAAP_BLOCK *)((void *)0), (char *)"msrv");
  if (root) {
    if (client_version) {
      tmp___38 = __builtin_constant_p(client_version);
      if (tmp___38) {
        __s1_len = strlen((char const   *)client_version);
        __s2_len = strlen("1.0");
        if (! ((unsigned int )((void const   *)(client_version + 1)) - (unsigned int )((void const   *)client_version) ==
               1U)) {
          goto _L___164;
        } else {
          if (__s1_len >= 4U) {
            _L___164: /* CIL Label */ 
            if (! ((unsigned int )((void const   *)("1.0" + 1)) - (unsigned int )((void const   *)"1.0") ==
                   1U)) {
              goto _L___163;
            } else {
              if (__s2_len >= 4U) {
                _L___163: /* CIL Label */ 
                tmp___39 = 1;
              } else {
                goto _L___162;
              }
            }
          } else {
            _L___162: /* CIL Label */ 
            tmp___39 = 0;
          }
        }
        if (tmp___39) {
          if (__s1_len < __s2_len) {
            tmp___21 = __s1_len;
          } else {
            tmp___21 = __s2_len;
          }
          tmp___20 = memcmp((void const   *)((char const   *)client_version), (void const   *)"1.0",
                            tmp___21 + 1U);
        } else {
          goto _L___166;
        }
      } else {
        _L___166: /* CIL Label */ 
        tmp___37 = __builtin_constant_p(client_version);
        if (tmp___37) {
          if ((unsigned int )((void const   *)(client_version + 1)) - (unsigned int )((void const   *)client_version) ==
              1U) {
            __s1_len = strlen((char const   *)client_version);
            if (__s1_len < 4U) {
              if ((unsigned int )((void const   *)("1.0" + 1)) - (unsigned int )((void const   *)"1.0") ==
                  1U) {
                __result___37 = (int )((int const   )(*((unsigned char const   *)((char const   *)client_version) +
                                                        0)) - (int const   )(*((unsigned char const   *)"1.0" +
                                                                               0)));
                if (__s1_len > 0U) {
                  if (__result___37 == 0) {
                    __result___37 = (int )((int const   )(*((unsigned char const   *)((char const   *)client_version) +
                                                            1)) - (int const   )(*((unsigned char const   *)"1.0" +
                                                                                   1)));
                    if (__s1_len > 1U) {
                      if (__result___37 == 0) {
                        __result___37 = (int )((int const   )(*((unsigned char const   *)((char const   *)client_version) +
                                                                2)) - (int const   )(*((unsigned char const   *)"1.0" +
                                                                                       2)));
                        if (__s1_len > 2U) {
                          if (__result___37 == 0) {
                            __result___37 = (int )((int const   )(*((unsigned char const   *)((char const   *)client_version) +
                                                                    3)) - (int const   )(*((unsigned char const   *)"1.0" +
                                                                                           3)));
                          } else {
                            goto _L___127;
                          }
                        } else {
                          _L___127: /* CIL Label */ ;
                        }
                      } else {
                        goto _L___128;
                      }
                    } else {
                      _L___128: /* CIL Label */ ;
                    }
                  } else {
                    goto _L___129;
                  }
                } else {
                  _L___129: /* CIL Label */ ;
                }
                tmp___20 = __result___37;
              } else {
                __s2___6 = (unsigned char const   *)"1.0";
                __result___38 = (int )((int const   )(*((unsigned char const   *)((char const   *)client_version) +
                                                        0)) - (int const   )(*(__s2___6 +
                                                                               0)));
                if (__s1_len > 0U) {
                  if (__result___38 == 0) {
                    __result___38 = (int )((int const   )(*((unsigned char const   *)((char const   *)client_version) +
                                                            1)) - (int const   )(*(__s2___6 +
                                                                                   1)));
                    if (__s1_len > 1U) {
                      if (__result___38 == 0) {
                        __result___38 = (int )((int const   )(*((unsigned char const   *)((char const   *)client_version) +
                                                                2)) - (int const   )(*(__s2___6 +
                                                                                       2)));
                        if (__s1_len > 2U) {
                          if (__result___38 == 0) {
                            __result___38 = (int )((int const   )(*((unsigned char const   *)((char const   *)client_version) +
                                                                    3)) - (int const   )(*(__s2___6 +
                                                                                           3)));
                          } else {
                            goto _L___130;
                          }
                        } else {
                          _L___130: /* CIL Label */ ;
                        }
                      } else {
                        goto _L___131;
                      }
                    } else {
                      _L___131: /* CIL Label */ ;
                    }
                  } else {
                    goto _L___132;
                  }
                } else {
                  _L___132: /* CIL Label */ ;
                }
                tmp___20 = __result___38;
              }
            } else {
              goto _L___161;
            }
          } else {
            goto _L___161;
          }
        } else {
          _L___161: /* CIL Label */ 
          if ((unsigned int )((void const   *)("1.0" + 1)) - (unsigned int )((void const   *)"1.0") ==
              1U) {
            __s2_len = strlen("1.0");
            if (__s2_len < 4U) {
              tmp___36 = __builtin_constant_p(client_version);
              if (tmp___36) {
                if ((unsigned int )((void const   *)(client_version + 1)) - (unsigned int )((void const   *)client_version) ==
                    1U) {
                  __result___45 = (int )((int const   )(*((unsigned char const   *)((char const   *)client_version) +
                                                          0)) - (int const   )(*((unsigned char const   *)"1.0" +
                                                                                 0)));
                  if (__s2_len > 0U) {
                    if (__result___45 == 0) {
                      __result___45 = (int )((int const   )(*((unsigned char const   *)((char const   *)client_version) +
                                                              1)) - (int const   )(*((unsigned char const   *)"1.0" +
                                                                                     1)));
                      if (__s2_len > 1U) {
                        if (__result___45 == 0) {
                          __result___45 = (int )((int const   )(*((unsigned char const   *)((char const   *)client_version) +
                                                                  2)) - (int const   )(*((unsigned char const   *)"1.0" +
                                                                                         2)));
                          if (__s2_len > 2U) {
                            if (__result___45 == 0) {
                              __result___45 = (int )((int const   )(*((unsigned char const   *)((char const   *)client_version) +
                                                                      3)) - (int const   )(*((unsigned char const   *)"1.0" +
                                                                                             3)));
                            } else {
                              goto _L___152;
                            }
                          } else {
                            _L___152: /* CIL Label */ ;
                          }
                        } else {
                          goto _L___153;
                        }
                      } else {
                        _L___153: /* CIL Label */ ;
                      }
                    } else {
                      goto _L___154;
                    }
                  } else {
                    _L___154: /* CIL Label */ ;
                  }
                  tmp___20 = __result___45;
                } else {
                  goto _L___158;
                }
              } else {
                _L___158: /* CIL Label */ 
                __s1___14 = (unsigned char const   *)((char const   *)client_version);
                __result___46 = (int )((int const   )(*(__s1___14 + 0)) - (int const   )(*((unsigned char const   *)"1.0" +
                                                                                           0)));
                if (__s2_len > 0U) {
                  if (__result___46 == 0) {
                    __result___46 = (int )((int const   )(*(__s1___14 + 1)) - (int const   )(*((unsigned char const   *)"1.0" +
                                                                                               1)));
                    if (__s2_len > 1U) {
                      if (__result___46 == 0) {
                        __result___46 = (int )((int const   )(*(__s1___14 + 2)) -
                                               (int const   )(*((unsigned char const   *)"1.0" +
                                                                2)));
                        if (__s2_len > 2U) {
                          if (__result___46 == 0) {
                            __result___46 = (int )((int const   )(*(__s1___14 + 3)) -
                                                   (int const   )(*((unsigned char const   *)"1.0" +
                                                                    3)));
                          } else {
                            goto _L___155;
                          }
                        } else {
                          _L___155: /* CIL Label */ ;
                        }
                      } else {
                        goto _L___156;
                      }
                    } else {
                      _L___156: /* CIL Label */ ;
                    }
                  } else {
                    goto _L___157;
                  }
                } else {
                  _L___157: /* CIL Label */ ;
                }
                tmp___20 = __result___46;
              }
            } else {
              goto _L___159;
            }
          } else {
            _L___159: /* CIL Label */ 
            tmp___20 = strcmp((char const   *)client_version, "1.0");
          }
        }
      }
      if (tmp___20) {
        goto _L___167;
      } else {
        mpro = 65536;
        apro = 65536;
      }
    } else {
      _L___167: /* CIL Label */ ;
    }
    if (client_version) {
      tmp___79 = __builtin_constant_p(client_version);
      if (tmp___79) {
        __s1_len___0 = strlen((char const   *)client_version);
        __s2_len___0 = strlen("2.0");
        if (! ((unsigned int )((void const   *)(client_version + 1)) - (unsigned int )((void const   *)client_version) ==
               1U)) {
          goto _L___333;
        } else {
          if (__s1_len___0 >= 4U) {
            _L___333: /* CIL Label */ 
            if (! ((unsigned int )((void const   *)("2.0" + 1)) - (unsigned int )((void const   *)"2.0") ==
                   1U)) {
              goto _L___332;
            } else {
              if (__s2_len___0 >= 4U) {
                _L___332: /* CIL Label */ 
                tmp___80 = 1;
              } else {
                goto _L___331;
              }
            }
          } else {
            _L___331: /* CIL Label */ 
            tmp___80 = 0;
          }
        }
        if (tmp___80) {
          if (__s1_len___0 < __s2_len___0) {
            tmp___62 = __s1_len___0;
          } else {
            tmp___62 = __s2_len___0;
          }
          tmp___61 = memcmp((void const   *)((char const   *)client_version), (void const   *)"2.0",
                            tmp___62 + 1U);
        } else {
          goto _L___335;
        }
      } else {
        _L___335: /* CIL Label */ 
        tmp___78 = __builtin_constant_p(client_version);
        if (tmp___78) {
          if ((unsigned int )((void const   *)(client_version + 1)) - (unsigned int )((void const   *)client_version) ==
              1U) {
            __s1_len___0 = strlen((char const   *)client_version);
            if (__s1_len___0 < 4U) {
              if ((unsigned int )((void const   *)("2.0" + 1)) - (unsigned int )((void const   *)"2.0") ==
                  1U) {
                __result___85 = (int )((int const   )(*((unsigned char const   *)((char const   *)client_version) +
                                                        0)) - (int const   )(*((unsigned char const   *)"2.0" +
                                                                               0)));
                if (__s1_len___0 > 0U) {
                  if (__result___85 == 0) {
                    __result___85 = (int )((int const   )(*((unsigned char const   *)((char const   *)client_version) +
                                                            1)) - (int const   )(*((unsigned char const   *)"2.0" +
                                                                                   1)));
                    if (__s1_len___0 > 1U) {
                      if (__result___85 == 0) {
                        __result___85 = (int )((int const   )(*((unsigned char const   *)((char const   *)client_version) +
                                                                2)) - (int const   )(*((unsigned char const   *)"2.0" +
                                                                                       2)));
                        if (__s1_len___0 > 2U) {
                          if (__result___85 == 0) {
                            __result___85 = (int )((int const   )(*((unsigned char const   *)((char const   *)client_version) +
                                                                    3)) - (int const   )(*((unsigned char const   *)"2.0" +
                                                                                           3)));
                          } else {
                            goto _L___296;
                          }
                        } else {
                          _L___296: /* CIL Label */ ;
                        }
                      } else {
                        goto _L___297;
                      }
                    } else {
                      _L___297: /* CIL Label */ ;
                    }
                  } else {
                    goto _L___298;
                  }
                } else {
                  _L___298: /* CIL Label */ ;
                }
                tmp___61 = __result___85;
              } else {
                __s2___14 = (unsigned char const   *)"2.0";
                __result___86 = (int )((int const   )(*((unsigned char const   *)((char const   *)client_version) +
                                                        0)) - (int const   )(*(__s2___14 +
                                                                               0)));
                if (__s1_len___0 > 0U) {
                  if (__result___86 == 0) {
                    __result___86 = (int )((int const   )(*((unsigned char const   *)((char const   *)client_version) +
                                                            1)) - (int const   )(*(__s2___14 +
                                                                                   1)));
                    if (__s1_len___0 > 1U) {
                      if (__result___86 == 0) {
                        __result___86 = (int )((int const   )(*((unsigned char const   *)((char const   *)client_version) +
                                                                2)) - (int const   )(*(__s2___14 +
                                                                                       2)));
                        if (__s1_len___0 > 2U) {
                          if (__result___86 == 0) {
                            __result___86 = (int )((int const   )(*((unsigned char const   *)((char const   *)client_version) +
                                                                    3)) - (int const   )(*(__s2___14 +
                                                                                           3)));
                          } else {
                            goto _L___299;
                          }
                        } else {
                          _L___299: /* CIL Label */ ;
                        }
                      } else {
                        goto _L___300;
                      }
                    } else {
                      _L___300: /* CIL Label */ ;
                    }
                  } else {
                    goto _L___301;
                  }
                } else {
                  _L___301: /* CIL Label */ ;
                }
                tmp___61 = __result___86;
              }
            } else {
              goto _L___330;
            }
          } else {
            goto _L___330;
          }
        } else {
          _L___330: /* CIL Label */ 
          if ((unsigned int )((void const   *)("2.0" + 1)) - (unsigned int )((void const   *)"2.0") ==
              1U) {
            __s2_len___0 = strlen("2.0");
            if (__s2_len___0 < 4U) {
              tmp___77 = __builtin_constant_p(client_version);
              if (tmp___77) {
                if ((unsigned int )((void const   *)(client_version + 1)) - (unsigned int )((void const   *)client_version) ==
                    1U) {
                  __result___93 = (int )((int const   )(*((unsigned char const   *)((char const   *)client_version) +
                                                          0)) - (int const   )(*((unsigned char const   *)"2.0" +
                                                                                 0)));
                  if (__s2_len___0 > 0U) {
                    if (__result___93 == 0) {
                      __result___93 = (int )((int const   )(*((unsigned char const   *)((char const   *)client_version) +
                                                              1)) - (int const   )(*((unsigned char const   *)"2.0" +
                                                                                     1)));
                      if (__s2_len___0 > 1U) {
                        if (__result___93 == 0) {
                          __result___93 = (int )((int const   )(*((unsigned char const   *)((char const   *)client_version) +
                                                                  2)) - (int const   )(*((unsigned char const   *)"2.0" +
                                                                                         2)));
                          if (__s2_len___0 > 2U) {
                            if (__result___93 == 0) {
                              __result___93 = (int )((int const   )(*((unsigned char const   *)((char const   *)client_version) +
                                                                      3)) - (int const   )(*((unsigned char const   *)"2.0" +
                                                                                             3)));
                            } else {
                              goto _L___321;
                            }
                          } else {
                            _L___321: /* CIL Label */ ;
                          }
                        } else {
                          goto _L___322;
                        }
                      } else {
                        _L___322: /* CIL Label */ ;
                      }
                    } else {
                      goto _L___323;
                    }
                  } else {
                    _L___323: /* CIL Label */ ;
                  }
                  tmp___61 = __result___93;
                } else {
                  goto _L___327;
                }
              } else {
                _L___327: /* CIL Label */ 
                __s1___30 = (unsigned char const   *)((char const   *)client_version);
                __result___94 = (int )((int const   )(*(__s1___30 + 0)) - (int const   )(*((unsigned char const   *)"2.0" +
                                                                                           0)));
                if (__s2_len___0 > 0U) {
                  if (__result___94 == 0) {
                    __result___94 = (int )((int const   )(*(__s1___30 + 1)) - (int const   )(*((unsigned char const   *)"2.0" +
                                                                                               1)));
                    if (__s2_len___0 > 1U) {
                      if (__result___94 == 0) {
                        __result___94 = (int )((int const   )(*(__s1___30 + 2)) -
                                               (int const   )(*((unsigned char const   *)"2.0" +
                                                                2)));
                        if (__s2_len___0 > 2U) {
                          if (__result___94 == 0) {
                            __result___94 = (int )((int const   )(*(__s1___30 + 3)) -
                                                   (int const   )(*((unsigned char const   *)"2.0" +
                                                                    3)));
                          } else {
                            goto _L___324;
                          }
                        } else {
                          _L___324: /* CIL Label */ ;
                        }
                      } else {
                        goto _L___325;
                      }
                    } else {
                      _L___325: /* CIL Label */ ;
                    }
                  } else {
                    goto _L___326;
                  }
                } else {
                  _L___326: /* CIL Label */ ;
                }
                tmp___61 = __result___94;
              }
            } else {
              goto _L___328;
            }
          } else {
            _L___328: /* CIL Label */ 
            tmp___61 = strcmp((char const   *)client_version, "2.0");
          }
        }
      }
      if (tmp___61) {
        goto _L___336;
      } else {
        mpro = 65536;
        apro = 131072;
      }
    } else {
      _L___336: /* CIL Label */ ;
    }
    g = (int )daap_add_int(root, (char *)"mstt", 200);
    if (g) {
      tmp___82 = daap_add_int(root, (char *)"mpro", mpro);
      if (tmp___82) {
        tmp___83 = 1;
      } else {
        goto _L___337;
      }
    } else {
      _L___337: /* CIL Label */ 
      tmp___83 = 0;
    }
    g = tmp___83;
    if (g) {
      tmp___84 = daap_add_int(root, (char *)"apro", apro);
      if (tmp___84) {
        tmp___85 = 1;
      } else {
        goto _L___338;
      }
    } else {
      _L___338: /* CIL Label */ 
      tmp___85 = 0;
    }
    g = tmp___85;
    if (g) {
      tmp___86 = daap_add_string(root, (char *)"minm", name);
      if (tmp___86) {
        tmp___87 = 1;
      } else {
        goto _L___339;
      }
    } else {
      _L___339: /* CIL Label */ 
      tmp___87 = 0;
    }
    g = tmp___87;
    if (g) {
      if ((unsigned int )config.readpassword != (unsigned int )((void *)0)) {
        tmp___88 = 2;
      } else {
        tmp___88 = 0;
      }
      tmp___89 = daap_add_char(root, (char *)"msau", (char )tmp___88);
      if (tmp___89) {
        tmp___90 = 1;
      } else {
        goto _L___340;
      }
    } else {
      _L___340: /* CIL Label */ 
      tmp___90 = 0;
    }
    g = tmp___90;
    if (g) {
      tmp___91 = daap_add_int(root, (char *)"mstm", 1800);
      if (tmp___91) {
        tmp___92 = 1;
      } else {
        goto _L___341;
      }
    } else {
      _L___341: /* CIL Label */ 
      tmp___92 = 0;
    }
    g = tmp___92;
    if (g) {
      tmp___93 = daap_add_char(root, (char *)"msex", (char)0);
      if (tmp___93) {
        tmp___94 = 1;
      } else {
        goto _L___342;
      }
    } else {
      _L___342: /* CIL Label */ 
      tmp___94 = 0;
    }
    g = tmp___94;
    if (g) {
      tmp___95 = daap_add_char(root, (char *)"msix", (char)0);
      if (tmp___95) {
        tmp___96 = 1;
      } else {
        goto _L___343;
      }
    } else {
      _L___343: /* CIL Label */ 
      tmp___96 = 0;
    }
    g = tmp___96;
    if (g) {
      tmp___97 = daap_add_char(root, (char *)"msbr", (char)0);
      if (tmp___97) {
        tmp___98 = 1;
      } else {
        goto _L___344;
      }
    } else {
      _L___344: /* CIL Label */ 
      tmp___98 = 0;
    }
    g = tmp___98;
    if (g) {
      tmp___99 = daap_add_char(root, (char *)"msqy", (char)0);
      if (tmp___99) {
        tmp___100 = 1;
      } else {
        goto _L___345;
      }
    } else {
      _L___345: /* CIL Label */ 
      tmp___100 = 0;
    }
    g = tmp___100;
    if (g) {
      tmp___101 = daap_add_char(root, (char *)"msup", (char)0);
      if (tmp___101) {
        tmp___102 = 1;
      } else {
        goto _L___346;
      }
    } else {
      _L___346: /* CIL Label */ 
      tmp___102 = 0;
    }
    g = tmp___102;
    if (g) {
      tmp___103 = daap_add_int(root, (char *)"msdc", 1);
      if (tmp___103) {
        tmp___104 = 1;
      } else {
        goto _L___347;
      }
    } else {
      _L___347: /* CIL Label */ 
      tmp___104 = 0;
    }
    g = tmp___104;
  }
  if (! g) {
    daap_free(root);
    return ((DAAP_BLOCK *)((void *)0));
  }
  return (root);
}
}
DAAP_BLOCK *daap_response_playlist_items(unsigned int playlist , char *metaStr , char *query ) 
{ DAAP_BLOCK *root ;
  DAAP_BLOCK *mlcl ;
  DAAP_BLOCK *mlit ;
  ENUMHANDLE henum ;
  MP3FILE *current ;
  unsigned long itemid ;
  int g ;
  unsigned long long meta ;
  query_node_t *filter ;
  int songs ;
  DAAP_BLOCK *tmp___0 ;
  int tmp___1 ;
  DAAP_BLOCK *tmp___2 ;
  int tmp___3 ;
  DAAP_BLOCK *tmp___4 ;
  int tmp___5 ;
  DAAP_BLOCK *tmp___6 ;
  int tmp___7 ;
  int tmp___8 ;
  int tmp___9 ;
  DAAP_BLOCK *tmp___10 ;
  int tmp___11 ;
  int tmp___12 ;
  int tmp___13 ;

  {
  g = 1;
  filter = (query_node_t *)0;
  songs = 0;
  if ((unsigned int )((char *)0) == (unsigned int )metaStr) {
    meta = 55ULL;
  } else {
    meta = encodeMetaRequest(metaStr, gSongMetaDataMap);
  }
  if ((unsigned int )((char *)0) != (unsigned int )query) {
    filter = query_build((char const   *)query, (query_field_t const   *)(song_fields));
    err_log(5, 528U, (char *)"query: %s\n", query);
    if (err_debuglevel >= 5) {
      query_dump(stderr, filter, 0);
    }
  }
  err_log(9, 640U, (char *)"Preparing to send playlist items for pl #%d\n", playlist);
  if (playlist == 1U) {
    henum = db_enum_begin();
  } else {
    henum = db_playlist_items_enum_begin((unsigned long )playlist);
  }
  root = daap_add_empty((DAAP_BLOCK *)((void *)0), (char *)"apso");
  if (root) {
    g = (int )daap_add_int(root, (char *)"mstt", 200);
    if (g) {
      tmp___0 = daap_add_char(root, (char *)"muty", (char)0);
      if (tmp___0) {
        tmp___1 = 1;
      } else {
        goto _L;
      }
    } else {
      _L: /* CIL Label */ 
      tmp___1 = 0;
    }
    g = tmp___1;
    if (g) {
      tmp___2 = daap_add_int(root, (char *)"mtco", 0);
      if (tmp___2) {
        tmp___3 = 1;
      } else {
        goto _L___0;
      }
    } else {
      _L___0: /* CIL Label */ 
      tmp___3 = 0;
    }
    g = tmp___3;
    if (g) {
      tmp___4 = daap_add_int(root, (char *)"mrco", 0);
      if (tmp___4) {
        tmp___5 = 1;
      } else {
        goto _L___1;
      }
    } else {
      _L___1: /* CIL Label */ 
      tmp___5 = 0;
    }
    g = tmp___5;
    mlcl = daap_add_empty(root, (char *)"mlcl");
    if (mlcl) {
      if (playlist == 1U) {
        while (1) {
          current = db_enum(& henum);
          if (! current) {
            break;
          }
          if ((unsigned int )((query_node_t *)0) == (unsigned int )filter) {
            goto _L___3;
          } else {
            tmp___9 = query_test(filter, (void *)current);
            if (tmp___9) {
              _L___3: /* CIL Label */ 
              songs ++;
              mlit = daap_add_song_entry(mlcl, current, meta);
              if ((unsigned int )((DAAP_BLOCK *)0) != (unsigned int )mlit) {
                tmp___8 = wantsMeta(meta, 4);
                if (tmp___8) {
                  if (g) {
                    tmp___6 = daap_add_int(mlit, (char *)"mcti", (int )current->id);
                    if (tmp___6) {
                      tmp___7 = 1;
                    } else {
                      goto _L___2;
                    }
                  } else {
                    _L___2: /* CIL Label */ 
                    tmp___7 = 0;
                  }
                  g = tmp___7;
                }
              } else {
                g = 0;
              }
            }
          }
        }
      } else {
        while (1) {
          itemid = (unsigned long )db_playlist_items_enum(& henum);
          if (! (itemid != 4294967295UL)) {
            break;
          }
          current = db_find(itemid);
          if ((unsigned int )((MP3FILE *)0) != (unsigned int )current) {
            if ((unsigned int )((query_node_t *)0) == (unsigned int )filter) {
              goto _L___5;
            } else {
              tmp___13 = query_test(filter, (void *)current);
              if (tmp___13) {
                _L___5: /* CIL Label */ 
                songs ++;
                err_log(9, 640U, (char *)"Adding itemid %lu\n", itemid);
                mlit = daap_add_song_entry(mlcl, current, meta);
                if ((unsigned int )((DAAP_BLOCK *)0) != (unsigned int )mlit) {
                  tmp___12 = wantsMeta(meta, 4);
                  if (tmp___12) {
                    if (g) {
                      tmp___10 = daap_add_int(mlit, (char *)"mcti", (int )current->id);
                      if (tmp___10) {
                        tmp___11 = 1;
                      } else {
                        goto _L___4;
                      }
                    } else {
                      _L___4: /* CIL Label */ 
                      tmp___11 = 0;
                    }
                    g = tmp___11;
                  }
                } else {
                  g = 0;
                }
              }
            }
            db_dispose(current);
            free((void *)current);
          } else {
            g = 0;
          }
        }
      }
    } else {
      g = 0;
    }
  }
  if (playlist == 1U) {
    db_enum_end(henum);
  } else {
    db_playlist_items_enum_end(henum);
  }
  if ((unsigned int )((query_node_t *)0) != (unsigned int )filter) {
    query_free(filter);
  }
  if (! g) {
    daap_free(root);
    return ((DAAP_BLOCK *)((void *)0));
  }
  err_log(9, 640U, (char *)"Sucessfully enumerated %d items\n", songs);
  daap_set_int(root, (char *)"mtco", songs);
  daap_set_int(root, (char *)"mrco", songs);
  return (root);
}
}
void daap_handle_index(DAAP_BLOCK *block , char const   *index___0 ) 
{ int first ;
  int count ;
  int size ;
  char *ptr ;
  DAAP_BLOCK *list ;
  DAAP_BLOCK *item ;
  DAAP_BLOCK **back ;
  int n ;
  int tmp___44 ;
  size_t __s1_len___0 ;
  size_t __s2_len___0 ;
  int tmp___66 ;
  size_t tmp___67 ;
  register int __result___85 ;
  unsigned char const   *__s2___14 ;
  register int __result___86 ;
  register int __result___93 ;
  unsigned char const   *__s1___30 ;
  register int __result___94 ;
  int tmp___82 ;
  int tmp___83 ;
  int tmp___84 ;
  int tmp___85 ;
  int tmp___86 ;
  size_t tmp___87 ;
  size_t tmp___88 ;
  long tmp___89 ;
  int tmp___135 ;
  size_t __s1_len___2 ;
  size_t __s2_len___2 ;
  int tmp___157 ;
  size_t tmp___158 ;
  register int __result___181 ;
  unsigned char const   *__s2___30 ;
  register int __result___182 ;
  register int __result___189 ;
  unsigned char const   *__s1___62 ;
  register int __result___190 ;
  int tmp___173 ;
  int tmp___174 ;
  int tmp___175 ;
  int tmp___176 ;
  int tmp___177 ;
  size_t tmp___178 ;
  size_t tmp___179 ;
  int tmp___225 ;
  size_t __s1_len___4 ;
  size_t __s2_len___4 ;
  int tmp___247 ;
  size_t tmp___248 ;
  register int __result___277 ;
  unsigned char const   *__s2___46 ;
  register int __result___278 ;
  register int __result___285 ;
  unsigned char const   *__s1___94 ;
  register int __result___286 ;
  int tmp___263 ;
  int tmp___264 ;
  int tmp___265 ;
  int tmp___266 ;
  int tmp___267 ;
  size_t tmp___268 ;
  size_t tmp___269 ;
  int tmp___315 ;
  size_t __s1_len___6 ;
  size_t __s2_len___6 ;
  int tmp___337 ;
  size_t tmp___338 ;
  register int __result___373 ;
  unsigned char const   *__s2___62 ;
  register int __result___374 ;
  register int __result___381 ;
  unsigned char const   *__s1___126 ;
  register int __result___382 ;
  int tmp___353 ;
  int tmp___354 ;
  int tmp___355 ;
  int tmp___356 ;
  int tmp___357 ;
  size_t tmp___358 ;
  size_t tmp___359 ;

  {
  list = daap_find(block, (char *)"mlcl");
  if ((unsigned int )((DAAP_BLOCK *)0) == (unsigned int )list) {
    return;
  }
  size = 0;
  item = list->children;
  while (item) {
    tmp___86 = __builtin_constant_p(item->tag);
    if (tmp___86) {
      tmp___87 = strlen((char const   *)(item->tag));
      if (tmp___87 < 4U) {
        goto _L___335;
      } else {
        goto _L___336;
      }
    } else {
      _L___336: /* CIL Label */ 
      tmp___88 = strlen("mlit");
      if (tmp___88 < 4U) {
        _L___335: /* CIL Label */ 
        tmp___84 = __builtin_constant_p(item->tag);
        if (tmp___84) {
          __s1_len___0 = strlen((char const   *)(item->tag));
          __s2_len___0 = strlen("mlit");
          if (! ((unsigned int )((void const   *)(item->tag + 1)) - (unsigned int )((void const   *)(item->tag)) ==
                 1U)) {
            goto _L___332;
          } else {
            if (__s1_len___0 >= 4U) {
              _L___332: /* CIL Label */ 
              if (! ((unsigned int )((void const   *)("mlit" + 1)) - (unsigned int )((void const   *)"mlit") ==
                     1U)) {
                goto _L___331;
              } else {
                if (__s2_len___0 >= 4U) {
                  _L___331: /* CIL Label */ 
                  tmp___85 = 1;
                } else {
                  goto _L___330;
                }
              }
            } else {
              _L___330: /* CIL Label */ 
              tmp___85 = 0;
            }
          }
          if (tmp___85) {
            if (__s1_len___0 < __s2_len___0) {
              tmp___67 = __s1_len___0;
            } else {
              tmp___67 = __s2_len___0;
            }
            tmp___66 = memcmp((void const   *)((char const   *)(item->tag)), (void const   *)"mlit",
                              tmp___67 + 1U);
          } else {
            goto _L___334;
          }
        } else {
          _L___334: /* CIL Label */ 
          tmp___83 = __builtin_constant_p(item->tag);
          if (tmp___83) {
            if ((unsigned int )((void const   *)(item->tag + 1)) - (unsigned int )((void const   *)(item->tag)) ==
                1U) {
              __s1_len___0 = strlen((char const   *)(item->tag));
              if (__s1_len___0 < 4U) {
                if ((unsigned int )((void const   *)("mlit" + 1)) - (unsigned int )((void const   *)"mlit") ==
                    1U) {
                  __result___85 = (int )((int const   )(*((unsigned char const   *)((char const   *)(item->tag)) +
                                                          0)) - (int const   )(*((unsigned char const   *)"mlit" +
                                                                                 0)));
                  if (__s1_len___0 > 0U) {
                    if (__result___85 == 0) {
                      __result___85 = (int )((int const   )(*((unsigned char const   *)((char const   *)(item->tag)) +
                                                              1)) - (int const   )(*((unsigned char const   *)"mlit" +
                                                                                     1)));
                      if (__s1_len___0 > 1U) {
                        if (__result___85 == 0) {
                          __result___85 = (int )((int const   )(*((unsigned char const   *)((char const   *)(item->tag)) +
                                                                  2)) - (int const   )(*((unsigned char const   *)"mlit" +
                                                                                         2)));
                          if (__s1_len___0 > 2U) {
                            if (__result___85 == 0) {
                              __result___85 = (int )((int const   )(*((unsigned char const   *)((char const   *)(item->tag)) +
                                                                      3)) - (int const   )(*((unsigned char const   *)"mlit" +
                                                                                             3)));
                            } else {
                              goto _L___295;
                            }
                          } else {
                            _L___295: /* CIL Label */ ;
                          }
                        } else {
                          goto _L___296;
                        }
                      } else {
                        _L___296: /* CIL Label */ ;
                      }
                    } else {
                      goto _L___297;
                    }
                  } else {
                    _L___297: /* CIL Label */ ;
                  }
                  tmp___66 = __result___85;
                } else {
                  __s2___14 = (unsigned char const   *)"mlit";
                  __result___86 = (int )((int const   )(*((unsigned char const   *)((char const   *)(item->tag)) +
                                                          0)) - (int const   )(*(__s2___14 +
                                                                                 0)));
                  if (__s1_len___0 > 0U) {
                    if (__result___86 == 0) {
                      __result___86 = (int )((int const   )(*((unsigned char const   *)((char const   *)(item->tag)) +
                                                              1)) - (int const   )(*(__s2___14 +
                                                                                     1)));
                      if (__s1_len___0 > 1U) {
                        if (__result___86 == 0) {
                          __result___86 = (int )((int const   )(*((unsigned char const   *)((char const   *)(item->tag)) +
                                                                  2)) - (int const   )(*(__s2___14 +
                                                                                         2)));
                          if (__s1_len___0 > 2U) {
                            if (__result___86 == 0) {
                              __result___86 = (int )((int const   )(*((unsigned char const   *)((char const   *)(item->tag)) +
                                                                      3)) - (int const   )(*(__s2___14 +
                                                                                             3)));
                            } else {
                              goto _L___298;
                            }
                          } else {
                            _L___298: /* CIL Label */ ;
                          }
                        } else {
                          goto _L___299;
                        }
                      } else {
                        _L___299: /* CIL Label */ ;
                      }
                    } else {
                      goto _L___300;
                    }
                  } else {
                    _L___300: /* CIL Label */ ;
                  }
                  tmp___66 = __result___86;
                }
              } else {
                goto _L___329;
              }
            } else {
              goto _L___329;
            }
          } else {
            _L___329: /* CIL Label */ 
            if ((unsigned int )((void const   *)("mlit" + 1)) - (unsigned int )((void const   *)"mlit") ==
                1U) {
              __s2_len___0 = strlen("mlit");
              if (__s2_len___0 < 4U) {
                tmp___82 = __builtin_constant_p(item->tag);
                if (tmp___82) {
                  if ((unsigned int )((void const   *)(item->tag + 1)) - (unsigned int )((void const   *)(item->tag)) ==
                      1U) {
                    __result___93 = (int )((int const   )(*((unsigned char const   *)((char const   *)(item->tag)) +
                                                            0)) - (int const   )(*((unsigned char const   *)"mlit" +
                                                                                   0)));
                    if (__s2_len___0 > 0U) {
                      if (__result___93 == 0) {
                        __result___93 = (int )((int const   )(*((unsigned char const   *)((char const   *)(item->tag)) +
                                                                1)) - (int const   )(*((unsigned char const   *)"mlit" +
                                                                                       1)));
                        if (__s2_len___0 > 1U) {
                          if (__result___93 == 0) {
                            __result___93 = (int )((int const   )(*((unsigned char const   *)((char const   *)(item->tag)) +
                                                                    2)) - (int const   )(*((unsigned char const   *)"mlit" +
                                                                                           2)));
                            if (__s2_len___0 > 2U) {
                              if (__result___93 == 0) {
                                __result___93 = (int )((int const   )(*((unsigned char const   *)((char const   *)(item->tag)) +
                                                                        3)) - (int const   )(*((unsigned char const   *)"mlit" +
                                                                                               3)));
                              } else {
                                goto _L___320;
                              }
                            } else {
                              _L___320: /* CIL Label */ ;
                            }
                          } else {
                            goto _L___321;
                          }
                        } else {
                          _L___321: /* CIL Label */ ;
                        }
                      } else {
                        goto _L___322;
                      }
                    } else {
                      _L___322: /* CIL Label */ ;
                    }
                    tmp___66 = __result___93;
                  } else {
                    goto _L___326;
                  }
                } else {
                  _L___326: /* CIL Label */ 
                  __s1___30 = (unsigned char const   *)((char const   *)(item->tag));
                  __result___94 = (int )((int const   )(*(__s1___30 + 0)) - (int const   )(*((unsigned char const   *)"mlit" +
                                                                                             0)));
                  if (__s2_len___0 > 0U) {
                    if (__result___94 == 0) {
                      __result___94 = (int )((int const   )(*(__s1___30 + 1)) - (int const   )(*((unsigned char const   *)"mlit" +
                                                                                                 1)));
                      if (__s2_len___0 > 1U) {
                        if (__result___94 == 0) {
                          __result___94 = (int )((int const   )(*(__s1___30 + 2)) -
                                                 (int const   )(*((unsigned char const   *)"mlit" +
                                                                  2)));
                          if (__s2_len___0 > 2U) {
                            if (__result___94 == 0) {
                              __result___94 = (int )((int const   )(*(__s1___30 +
                                                                      3)) - (int const   )(*((unsigned char const   *)"mlit" +
                                                                                             3)));
                            } else {
                              goto _L___323;
                            }
                          } else {
                            _L___323: /* CIL Label */ ;
                          }
                        } else {
                          goto _L___324;
                        }
                      } else {
                        _L___324: /* CIL Label */ ;
                      }
                    } else {
                      goto _L___325;
                    }
                  } else {
                    _L___325: /* CIL Label */ ;
                  }
                  tmp___66 = __result___94;
                }
              } else {
                goto _L___327;
              }
            } else {
              _L___327: /* CIL Label */ 
              tmp___66 = strcmp((char const   *)(item->tag), "mlit");
            }
          }
        }
        tmp___44 = tmp___66;
      } else {
        tmp___44 = strncmp((char const   *)(item->tag), "mlit", 4U);
      }
    }
    if (! tmp___44) {
      size ++;
    }
    item = item->next;
  }
  n = (int )strtol__extinline((char const   * __restrict  )index___0, (char ** __restrict  )(& ptr),
                              10);
  if (n < 0) {
    n *= -1;
    if (n < size) {
      first = size - n;
      count = n;
    } else {
      first = 0;
      count = size;
    }
  } else {
    if (0 == (int )(*ptr)) {
      if (n < size) {
        first = n;
        count = 1;
      } else {
        first = 0;
        count = 0;
      }
    } else {
      if (45 == (int )(*ptr)) {
        first = n;
        ptr ++;
        if ((int )(*ptr) == 0) {
          n = size;
        } else {
          tmp___89 = strtol__extinline((char const   * __restrict  )ptr, (char ** __restrict  )(& ptr),
                                       10);
          n = (int )(tmp___89 + 1L);
          if (n > size) {
            n = size;
          }
        }
        count = n - first;
      }
    }
  }
  daap_set_int(block, (char *)"mrco", count);
  err_log(5, 544U, (char *)"index:%s first:%d count:%d\n", index___0, first, count);
  back = & list->children;
  while (1) {
    if ((*back)) {
      if (! first) {
        goto _L___675;
      }
    } else {
      _L___675: /* CIL Label */ 
      break;
    }
    tmp___177 = __builtin_constant_p(((*back))->tag);
    if (tmp___177) {
      tmp___178 = strlen((char const   *)(((*back))->tag));
      if (tmp___178 < 4U) {
        goto _L___673;
      } else {
        goto _L___674;
      }
    } else {
      _L___674: /* CIL Label */ 
      tmp___179 = strlen("mlit");
      if (tmp___179 < 4U) {
        _L___673: /* CIL Label */ 
        tmp___175 = __builtin_constant_p(((*back))->tag);
        if (tmp___175) {
          __s1_len___2 = strlen((char const   *)(((*back))->tag));
          __s2_len___2 = strlen("mlit");
          if (! ((unsigned int )((void const   *)(((*back))->tag + 1)) - (unsigned int )((void const   *)(((*back))->tag)) ==
                 1U)) {
            goto _L___670;
          } else {
            if (__s1_len___2 >= 4U) {
              _L___670: /* CIL Label */ 
              if (! ((unsigned int )((void const   *)("mlit" + 1)) - (unsigned int )((void const   *)"mlit") ==
                     1U)) {
                goto _L___669;
              } else {
                if (__s2_len___2 >= 4U) {
                  _L___669: /* CIL Label */ 
                  tmp___176 = 1;
                } else {
                  goto _L___668;
                }
              }
            } else {
              _L___668: /* CIL Label */ 
              tmp___176 = 0;
            }
          }
          if (tmp___176) {
            if (__s1_len___2 < __s2_len___2) {
              tmp___158 = __s1_len___2;
            } else {
              tmp___158 = __s2_len___2;
            }
            tmp___157 = memcmp((void const   *)((char const   *)(((*back))->tag)),
                               (void const   *)"mlit", tmp___158 + 1U);
          } else {
            goto _L___672;
          }
        } else {
          _L___672: /* CIL Label */ 
          tmp___174 = __builtin_constant_p(((*back))->tag);
          if (tmp___174) {
            if ((unsigned int )((void const   *)(((*back))->tag + 1)) - (unsigned int )((void const   *)(((*back))->tag)) ==
                1U) {
              __s1_len___2 = strlen((char const   *)(((*back))->tag));
              if (__s1_len___2 < 4U) {
                if ((unsigned int )((void const   *)("mlit" + 1)) - (unsigned int )((void const   *)"mlit") ==
                    1U) {
                  __result___181 = (int )((int const   )(*((unsigned char const   *)((char const   *)(((*back))->tag)) +
                                                           0)) - (int const   )(*((unsigned char const   *)"mlit" +
                                                                                  0)));
                  if (__s1_len___2 > 0U) {
                    if (__result___181 == 0) {
                      __result___181 = (int )((int const   )(*((unsigned char const   *)((char const   *)(((*back))->tag)) +
                                                               1)) - (int const   )(*((unsigned char const   *)"mlit" +
                                                                                      1)));
                      if (__s1_len___2 > 1U) {
                        if (__result___181 == 0) {
                          __result___181 = (int )((int const   )(*((unsigned char const   *)((char const   *)(((*back))->tag)) +
                                                                   2)) - (int const   )(*((unsigned char const   *)"mlit" +
                                                                                          2)));
                          if (__s1_len___2 > 2U) {
                            if (__result___181 == 0) {
                              __result___181 = (int )((int const   )(*((unsigned char const   *)((char const   *)(((*back))->tag)) +
                                                                       3)) - (int const   )(*((unsigned char const   *)"mlit" +
                                                                                              3)));
                            } else {
                              goto _L___633;
                            }
                          } else {
                            _L___633: /* CIL Label */ ;
                          }
                        } else {
                          goto _L___634;
                        }
                      } else {
                        _L___634: /* CIL Label */ ;
                      }
                    } else {
                      goto _L___635;
                    }
                  } else {
                    _L___635: /* CIL Label */ ;
                  }
                  tmp___157 = __result___181;
                } else {
                  __s2___30 = (unsigned char const   *)"mlit";
                  __result___182 = (int )((int const   )(*((unsigned char const   *)((char const   *)(((*back))->tag)) +
                                                           0)) - (int const   )(*(__s2___30 +
                                                                                  0)));
                  if (__s1_len___2 > 0U) {
                    if (__result___182 == 0) {
                      __result___182 = (int )((int const   )(*((unsigned char const   *)((char const   *)(((*back))->tag)) +
                                                               1)) - (int const   )(*(__s2___30 +
                                                                                      1)));
                      if (__s1_len___2 > 1U) {
                        if (__result___182 == 0) {
                          __result___182 = (int )((int const   )(*((unsigned char const   *)((char const   *)(((*back))->tag)) +
                                                                   2)) - (int const   )(*(__s2___30 +
                                                                                          2)));
                          if (__s1_len___2 > 2U) {
                            if (__result___182 == 0) {
                              __result___182 = (int )((int const   )(*((unsigned char const   *)((char const   *)(((*back))->tag)) +
                                                                       3)) - (int const   )(*(__s2___30 +
                                                                                              3)));
                            } else {
                              goto _L___636;
                            }
                          } else {
                            _L___636: /* CIL Label */ ;
                          }
                        } else {
                          goto _L___637;
                        }
                      } else {
                        _L___637: /* CIL Label */ ;
                      }
                    } else {
                      goto _L___638;
                    }
                  } else {
                    _L___638: /* CIL Label */ ;
                  }
                  tmp___157 = __result___182;
                }
              } else {
                goto _L___667;
              }
            } else {
              goto _L___667;
            }
          } else {
            _L___667: /* CIL Label */ 
            if ((unsigned int )((void const   *)("mlit" + 1)) - (unsigned int )((void const   *)"mlit") ==
                1U) {
              __s2_len___2 = strlen("mlit");
              if (__s2_len___2 < 4U) {
                tmp___173 = __builtin_constant_p(((*back))->tag);
                if (tmp___173) {
                  if ((unsigned int )((void const   *)(((*back))->tag + 1)) - (unsigned int )((void const   *)(((*back))->tag)) ==
                      1U) {
                    __result___189 = (int )((int const   )(*((unsigned char const   *)((char const   *)(((*back))->tag)) +
                                                             0)) - (int const   )(*((unsigned char const   *)"mlit" +
                                                                                    0)));
                    if (__s2_len___2 > 0U) {
                      if (__result___189 == 0) {
                        __result___189 = (int )((int const   )(*((unsigned char const   *)((char const   *)(((*back))->tag)) +
                                                                 1)) - (int const   )(*((unsigned char const   *)"mlit" +
                                                                                        1)));
                        if (__s2_len___2 > 1U) {
                          if (__result___189 == 0) {
                            __result___189 = (int )((int const   )(*((unsigned char const   *)((char const   *)(((*back))->tag)) +
                                                                     2)) - (int const   )(*((unsigned char const   *)"mlit" +
                                                                                            2)));
                            if (__s2_len___2 > 2U) {
                              if (__result___189 == 0) {
                                __result___189 = (int )((int const   )(*((unsigned char const   *)((char const   *)(((*back))->tag)) +
                                                                         3)) - (int const   )(*((unsigned char const   *)"mlit" +
                                                                                                3)));
                              } else {
                                goto _L___658;
                              }
                            } else {
                              _L___658: /* CIL Label */ ;
                            }
                          } else {
                            goto _L___659;
                          }
                        } else {
                          _L___659: /* CIL Label */ ;
                        }
                      } else {
                        goto _L___660;
                      }
                    } else {
                      _L___660: /* CIL Label */ ;
                    }
                    tmp___157 = __result___189;
                  } else {
                    goto _L___664;
                  }
                } else {
                  _L___664: /* CIL Label */ 
                  __s1___62 = (unsigned char const   *)((char const   *)(((*back))->tag));
                  __result___190 = (int )((int const   )(*(__s1___62 + 0)) - (int const   )(*((unsigned char const   *)"mlit" +
                                                                                              0)));
                  if (__s2_len___2 > 0U) {
                    if (__result___190 == 0) {
                      __result___190 = (int )((int const   )(*(__s1___62 + 1)) - (int const   )(*((unsigned char const   *)"mlit" +
                                                                                                  1)));
                      if (__s2_len___2 > 1U) {
                        if (__result___190 == 0) {
                          __result___190 = (int )((int const   )(*(__s1___62 + 2)) -
                                                  (int const   )(*((unsigned char const   *)"mlit" +
                                                                   2)));
                          if (__s2_len___2 > 2U) {
                            if (__result___190 == 0) {
                              __result___190 = (int )((int const   )(*(__s1___62 +
                                                                       3)) - (int const   )(*((unsigned char const   *)"mlit" +
                                                                                              3)));
                            } else {
                              goto _L___661;
                            }
                          } else {
                            _L___661: /* CIL Label */ ;
                          }
                        } else {
                          goto _L___662;
                        }
                      } else {
                        _L___662: /* CIL Label */ ;
                      }
                    } else {
                      goto _L___663;
                    }
                  } else {
                    _L___663: /* CIL Label */ ;
                  }
                  tmp___157 = __result___190;
                }
              } else {
                goto _L___665;
              }
            } else {
              _L___665: /* CIL Label */ 
              tmp___157 = strcmp((char const   *)(((*back))->tag), "mlit");
            }
          }
        }
        tmp___135 = tmp___157;
      } else {
        tmp___135 = strncmp((char const   *)(((*back))->tag), "mlit", 4U);
      }
    }
    if (tmp___135) {
      back = & ((*back))->next;
    } else {
      err_log(9, 544U, (char *)"first:%d removing\n", first);
      daap_remove((*back));
      first --;
    }
  }
  while (1) {
    if ((*back)) {
      if (! count) {
        goto _L___1014;
      }
    } else {
      _L___1014: /* CIL Label */ 
      break;
    }
    tmp___267 = __builtin_constant_p(((*back))->tag);
    if (tmp___267) {
      tmp___268 = strlen((char const   *)(((*back))->tag));
      if (tmp___268 < 4U) {
        goto _L___1012;
      } else {
        goto _L___1013;
      }
    } else {
      _L___1013: /* CIL Label */ 
      tmp___269 = strlen("mlit");
      if (tmp___269 < 4U) {
        _L___1012: /* CIL Label */ 
        tmp___265 = __builtin_constant_p(((*back))->tag);
        if (tmp___265) {
          __s1_len___4 = strlen((char const   *)(((*back))->tag));
          __s2_len___4 = strlen("mlit");
          if (! ((unsigned int )((void const   *)(((*back))->tag + 1)) - (unsigned int )((void const   *)(((*back))->tag)) ==
                 1U)) {
            goto _L___1009;
          } else {
            if (__s1_len___4 >= 4U) {
              _L___1009: /* CIL Label */ 
              if (! ((unsigned int )((void const   *)("mlit" + 1)) - (unsigned int )((void const   *)"mlit") ==
                     1U)) {
                goto _L___1008;
              } else {
                if (__s2_len___4 >= 4U) {
                  _L___1008: /* CIL Label */ 
                  tmp___266 = 1;
                } else {
                  goto _L___1007;
                }
              }
            } else {
              _L___1007: /* CIL Label */ 
              tmp___266 = 0;
            }
          }
          if (tmp___266) {
            if (__s1_len___4 < __s2_len___4) {
              tmp___248 = __s1_len___4;
            } else {
              tmp___248 = __s2_len___4;
            }
            tmp___247 = memcmp((void const   *)((char const   *)(((*back))->tag)),
                               (void const   *)"mlit", tmp___248 + 1U);
          } else {
            goto _L___1011;
          }
        } else {
          _L___1011: /* CIL Label */ 
          tmp___264 = __builtin_constant_p(((*back))->tag);
          if (tmp___264) {
            if ((unsigned int )((void const   *)(((*back))->tag + 1)) - (unsigned int )((void const   *)(((*back))->tag)) ==
                1U) {
              __s1_len___4 = strlen((char const   *)(((*back))->tag));
              if (__s1_len___4 < 4U) {
                if ((unsigned int )((void const   *)("mlit" + 1)) - (unsigned int )((void const   *)"mlit") ==
                    1U) {
                  __result___277 = (int )((int const   )(*((unsigned char const   *)((char const   *)(((*back))->tag)) +
                                                           0)) - (int const   )(*((unsigned char const   *)"mlit" +
                                                                                  0)));
                  if (__s1_len___4 > 0U) {
                    if (__result___277 == 0) {
                      __result___277 = (int )((int const   )(*((unsigned char const   *)((char const   *)(((*back))->tag)) +
                                                               1)) - (int const   )(*((unsigned char const   *)"mlit" +
                                                                                      1)));
                      if (__s1_len___4 > 1U) {
                        if (__result___277 == 0) {
                          __result___277 = (int )((int const   )(*((unsigned char const   *)((char const   *)(((*back))->tag)) +
                                                                   2)) - (int const   )(*((unsigned char const   *)"mlit" +
                                                                                          2)));
                          if (__s1_len___4 > 2U) {
                            if (__result___277 == 0) {
                              __result___277 = (int )((int const   )(*((unsigned char const   *)((char const   *)(((*back))->tag)) +
                                                                       3)) - (int const   )(*((unsigned char const   *)"mlit" +
                                                                                              3)));
                            } else {
                              goto _L___972;
                            }
                          } else {
                            _L___972: /* CIL Label */ ;
                          }
                        } else {
                          goto _L___973;
                        }
                      } else {
                        _L___973: /* CIL Label */ ;
                      }
                    } else {
                      goto _L___974;
                    }
                  } else {
                    _L___974: /* CIL Label */ ;
                  }
                  tmp___247 = __result___277;
                } else {
                  __s2___46 = (unsigned char const   *)"mlit";
                  __result___278 = (int )((int const   )(*((unsigned char const   *)((char const   *)(((*back))->tag)) +
                                                           0)) - (int const   )(*(__s2___46 +
                                                                                  0)));
                  if (__s1_len___4 > 0U) {
                    if (__result___278 == 0) {
                      __result___278 = (int )((int const   )(*((unsigned char const   *)((char const   *)(((*back))->tag)) +
                                                               1)) - (int const   )(*(__s2___46 +
                                                                                      1)));
                      if (__s1_len___4 > 1U) {
                        if (__result___278 == 0) {
                          __result___278 = (int )((int const   )(*((unsigned char const   *)((char const   *)(((*back))->tag)) +
                                                                   2)) - (int const   )(*(__s2___46 +
                                                                                          2)));
                          if (__s1_len___4 > 2U) {
                            if (__result___278 == 0) {
                              __result___278 = (int )((int const   )(*((unsigned char const   *)((char const   *)(((*back))->tag)) +
                                                                       3)) - (int const   )(*(__s2___46 +
                                                                                              3)));
                            } else {
                              goto _L___975;
                            }
                          } else {
                            _L___975: /* CIL Label */ ;
                          }
                        } else {
                          goto _L___976;
                        }
                      } else {
                        _L___976: /* CIL Label */ ;
                      }
                    } else {
                      goto _L___977;
                    }
                  } else {
                    _L___977: /* CIL Label */ ;
                  }
                  tmp___247 = __result___278;
                }
              } else {
                goto _L___1006;
              }
            } else {
              goto _L___1006;
            }
          } else {
            _L___1006: /* CIL Label */ 
            if ((unsigned int )((void const   *)("mlit" + 1)) - (unsigned int )((void const   *)"mlit") ==
                1U) {
              __s2_len___4 = strlen("mlit");
              if (__s2_len___4 < 4U) {
                tmp___263 = __builtin_constant_p(((*back))->tag);
                if (tmp___263) {
                  if ((unsigned int )((void const   *)(((*back))->tag + 1)) - (unsigned int )((void const   *)(((*back))->tag)) ==
                      1U) {
                    __result___285 = (int )((int const   )(*((unsigned char const   *)((char const   *)(((*back))->tag)) +
                                                             0)) - (int const   )(*((unsigned char const   *)"mlit" +
                                                                                    0)));
                    if (__s2_len___4 > 0U) {
                      if (__result___285 == 0) {
                        __result___285 = (int )((int const   )(*((unsigned char const   *)((char const   *)(((*back))->tag)) +
                                                                 1)) - (int const   )(*((unsigned char const   *)"mlit" +
                                                                                        1)));
                        if (__s2_len___4 > 1U) {
                          if (__result___285 == 0) {
                            __result___285 = (int )((int const   )(*((unsigned char const   *)((char const   *)(((*back))->tag)) +
                                                                     2)) - (int const   )(*((unsigned char const   *)"mlit" +
                                                                                            2)));
                            if (__s2_len___4 > 2U) {
                              if (__result___285 == 0) {
                                __result___285 = (int )((int const   )(*((unsigned char const   *)((char const   *)(((*back))->tag)) +
                                                                         3)) - (int const   )(*((unsigned char const   *)"mlit" +
                                                                                                3)));
                              } else {
                                goto _L___997;
                              }
                            } else {
                              _L___997: /* CIL Label */ ;
                            }
                          } else {
                            goto _L___998;
                          }
                        } else {
                          _L___998: /* CIL Label */ ;
                        }
                      } else {
                        goto _L___999;
                      }
                    } else {
                      _L___999: /* CIL Label */ ;
                    }
                    tmp___247 = __result___285;
                  } else {
                    goto _L___1003;
                  }
                } else {
                  _L___1003: /* CIL Label */ 
                  __s1___94 = (unsigned char const   *)((char const   *)(((*back))->tag));
                  __result___286 = (int )((int const   )(*(__s1___94 + 0)) - (int const   )(*((unsigned char const   *)"mlit" +
                                                                                              0)));
                  if (__s2_len___4 > 0U) {
                    if (__result___286 == 0) {
                      __result___286 = (int )((int const   )(*(__s1___94 + 1)) - (int const   )(*((unsigned char const   *)"mlit" +
                                                                                                  1)));
                      if (__s2_len___4 > 1U) {
                        if (__result___286 == 0) {
                          __result___286 = (int )((int const   )(*(__s1___94 + 2)) -
                                                  (int const   )(*((unsigned char const   *)"mlit" +
                                                                   2)));
                          if (__s2_len___4 > 2U) {
                            if (__result___286 == 0) {
                              __result___286 = (int )((int const   )(*(__s1___94 +
                                                                       3)) - (int const   )(*((unsigned char const   *)"mlit" +
                                                                                              3)));
                            } else {
                              goto _L___1000;
                            }
                          } else {
                            _L___1000: /* CIL Label */ ;
                          }
                        } else {
                          goto _L___1001;
                        }
                      } else {
                        _L___1001: /* CIL Label */ ;
                      }
                    } else {
                      goto _L___1002;
                    }
                  } else {
                    _L___1002: /* CIL Label */ ;
                  }
                  tmp___247 = __result___286;
                }
              } else {
                goto _L___1004;
              }
            } else {
              _L___1004: /* CIL Label */ 
              tmp___247 = strcmp((char const   *)(((*back))->tag), "mlit");
            }
          }
        }
        tmp___225 = tmp___247;
      } else {
        tmp___225 = strncmp((char const   *)(((*back))->tag), "mlit", 4U);
      }
    }
    if (! tmp___225) {
      err_log(9, 544U, (char *)"count:%d keeping\n", count);
      count --;
    }
    back = & ((*back))->next;
  }
  while ((*back)) {
    tmp___357 = __builtin_constant_p(((*back))->tag);
    if (tmp___357) {
      tmp___358 = strlen((char const   *)(((*back))->tag));
      if (tmp___358 < 4U) {
        goto _L___1351;
      } else {
        goto _L___1352;
      }
    } else {
      _L___1352: /* CIL Label */ 
      tmp___359 = strlen("mlit");
      if (tmp___359 < 4U) {
        _L___1351: /* CIL Label */ 
        tmp___355 = __builtin_constant_p(((*back))->tag);
        if (tmp___355) {
          __s1_len___6 = strlen((char const   *)(((*back))->tag));
          __s2_len___6 = strlen("mlit");
          if (! ((unsigned int )((void const   *)(((*back))->tag + 1)) - (unsigned int )((void const   *)(((*back))->tag)) ==
                 1U)) {
            goto _L___1348;
          } else {
            if (__s1_len___6 >= 4U) {
              _L___1348: /* CIL Label */ 
              if (! ((unsigned int )((void const   *)("mlit" + 1)) - (unsigned int )((void const   *)"mlit") ==
                     1U)) {
                goto _L___1347;
              } else {
                if (__s2_len___6 >= 4U) {
                  _L___1347: /* CIL Label */ 
                  tmp___356 = 1;
                } else {
                  goto _L___1346;
                }
              }
            } else {
              _L___1346: /* CIL Label */ 
              tmp___356 = 0;
            }
          }
          if (tmp___356) {
            if (__s1_len___6 < __s2_len___6) {
              tmp___338 = __s1_len___6;
            } else {
              tmp___338 = __s2_len___6;
            }
            tmp___337 = memcmp((void const   *)((char const   *)(((*back))->tag)),
                               (void const   *)"mlit", tmp___338 + 1U);
          } else {
            goto _L___1350;
          }
        } else {
          _L___1350: /* CIL Label */ 
          tmp___354 = __builtin_constant_p(((*back))->tag);
          if (tmp___354) {
            if ((unsigned int )((void const   *)(((*back))->tag + 1)) - (unsigned int )((void const   *)(((*back))->tag)) ==
                1U) {
              __s1_len___6 = strlen((char const   *)(((*back))->tag));
              if (__s1_len___6 < 4U) {
                if ((unsigned int )((void const   *)("mlit" + 1)) - (unsigned int )((void const   *)"mlit") ==
                    1U) {
                  __result___373 = (int )((int const   )(*((unsigned char const   *)((char const   *)(((*back))->tag)) +
                                                           0)) - (int const   )(*((unsigned char const   *)"mlit" +
                                                                                  0)));
                  if (__s1_len___6 > 0U) {
                    if (__result___373 == 0) {
                      __result___373 = (int )((int const   )(*((unsigned char const   *)((char const   *)(((*back))->tag)) +
                                                               1)) - (int const   )(*((unsigned char const   *)"mlit" +
                                                                                      1)));
                      if (__s1_len___6 > 1U) {
                        if (__result___373 == 0) {
                          __result___373 = (int )((int const   )(*((unsigned char const   *)((char const   *)(((*back))->tag)) +
                                                                   2)) - (int const   )(*((unsigned char const   *)"mlit" +
                                                                                          2)));
                          if (__s1_len___6 > 2U) {
                            if (__result___373 == 0) {
                              __result___373 = (int )((int const   )(*((unsigned char const   *)((char const   *)(((*back))->tag)) +
                                                                       3)) - (int const   )(*((unsigned char const   *)"mlit" +
                                                                                              3)));
                            } else {
                              goto _L___1311;
                            }
                          } else {
                            _L___1311: /* CIL Label */ ;
                          }
                        } else {
                          goto _L___1312;
                        }
                      } else {
                        _L___1312: /* CIL Label */ ;
                      }
                    } else {
                      goto _L___1313;
                    }
                  } else {
                    _L___1313: /* CIL Label */ ;
                  }
                  tmp___337 = __result___373;
                } else {
                  __s2___62 = (unsigned char const   *)"mlit";
                  __result___374 = (int )((int const   )(*((unsigned char const   *)((char const   *)(((*back))->tag)) +
                                                           0)) - (int const   )(*(__s2___62 +
                                                                                  0)));
                  if (__s1_len___6 > 0U) {
                    if (__result___374 == 0) {
                      __result___374 = (int )((int const   )(*((unsigned char const   *)((char const   *)(((*back))->tag)) +
                                                               1)) - (int const   )(*(__s2___62 +
                                                                                      1)));
                      if (__s1_len___6 > 1U) {
                        if (__result___374 == 0) {
                          __result___374 = (int )((int const   )(*((unsigned char const   *)((char const   *)(((*back))->tag)) +
                                                                   2)) - (int const   )(*(__s2___62 +
                                                                                          2)));
                          if (__s1_len___6 > 2U) {
                            if (__result___374 == 0) {
                              __result___374 = (int )((int const   )(*((unsigned char const   *)((char const   *)(((*back))->tag)) +
                                                                       3)) - (int const   )(*(__s2___62 +
                                                                                              3)));
                            } else {
                              goto _L___1314;
                            }
                          } else {
                            _L___1314: /* CIL Label */ ;
                          }
                        } else {
                          goto _L___1315;
                        }
                      } else {
                        _L___1315: /* CIL Label */ ;
                      }
                    } else {
                      goto _L___1316;
                    }
                  } else {
                    _L___1316: /* CIL Label */ ;
                  }
                  tmp___337 = __result___374;
                }
              } else {
                goto _L___1345;
              }
            } else {
              goto _L___1345;
            }
          } else {
            _L___1345: /* CIL Label */ 
            if ((unsigned int )((void const   *)("mlit" + 1)) - (unsigned int )((void const   *)"mlit") ==
                1U) {
              __s2_len___6 = strlen("mlit");
              if (__s2_len___6 < 4U) {
                tmp___353 = __builtin_constant_p(((*back))->tag);
                if (tmp___353) {
                  if ((unsigned int )((void const   *)(((*back))->tag + 1)) - (unsigned int )((void const   *)(((*back))->tag)) ==
                      1U) {
                    __result___381 = (int )((int const   )(*((unsigned char const   *)((char const   *)(((*back))->tag)) +
                                                             0)) - (int const   )(*((unsigned char const   *)"mlit" +
                                                                                    0)));
                    if (__s2_len___6 > 0U) {
                      if (__result___381 == 0) {
                        __result___381 = (int )((int const   )(*((unsigned char const   *)((char const   *)(((*back))->tag)) +
                                                                 1)) - (int const   )(*((unsigned char const   *)"mlit" +
                                                                                        1)));
                        if (__s2_len___6 > 1U) {
                          if (__result___381 == 0) {
                            __result___381 = (int )((int const   )(*((unsigned char const   *)((char const   *)(((*back))->tag)) +
                                                                     2)) - (int const   )(*((unsigned char const   *)"mlit" +
                                                                                            2)));
                            if (__s2_len___6 > 2U) {
                              if (__result___381 == 0) {
                                __result___381 = (int )((int const   )(*((unsigned char const   *)((char const   *)(((*back))->tag)) +
                                                                         3)) - (int const   )(*((unsigned char const   *)"mlit" +
                                                                                                3)));
                              } else {
                                goto _L___1336;
                              }
                            } else {
                              _L___1336: /* CIL Label */ ;
                            }
                          } else {
                            goto _L___1337;
                          }
                        } else {
                          _L___1337: /* CIL Label */ ;
                        }
                      } else {
                        goto _L___1338;
                      }
                    } else {
                      _L___1338: /* CIL Label */ ;
                    }
                    tmp___337 = __result___381;
                  } else {
                    goto _L___1342;
                  }
                } else {
                  _L___1342: /* CIL Label */ 
                  __s1___126 = (unsigned char const   *)((char const   *)(((*back))->tag));
                  __result___382 = (int )((int const   )(*(__s1___126 + 0)) - (int const   )(*((unsigned char const   *)"mlit" +
                                                                                               0)));
                  if (__s2_len___6 > 0U) {
                    if (__result___382 == 0) {
                      __result___382 = (int )((int const   )(*(__s1___126 + 1)) -
                                              (int const   )(*((unsigned char const   *)"mlit" +
                                                               1)));
                      if (__s2_len___6 > 1U) {
                        if (__result___382 == 0) {
                          __result___382 = (int )((int const   )(*(__s1___126 + 2)) -
                                                  (int const   )(*((unsigned char const   *)"mlit" +
                                                                   2)));
                          if (__s2_len___6 > 2U) {
                            if (__result___382 == 0) {
                              __result___382 = (int )((int const   )(*(__s1___126 +
                                                                       3)) - (int const   )(*((unsigned char const   *)"mlit" +
                                                                                              3)));
                            } else {
                              goto _L___1339;
                            }
                          } else {
                            _L___1339: /* CIL Label */ ;
                          }
                        } else {
                          goto _L___1340;
                        }
                      } else {
                        _L___1340: /* CIL Label */ ;
                      }
                    } else {
                      goto _L___1341;
                    }
                  } else {
                    _L___1341: /* CIL Label */ ;
                  }
                  tmp___337 = __result___382;
                }
              } else {
                goto _L___1343;
              }
            } else {
              _L___1343: /* CIL Label */ 
              tmp___337 = strcmp((char const   *)(((*back))->tag), "mlit");
            }
          }
        }
        tmp___315 = tmp___337;
      } else {
        tmp___315 = strncmp((char const   *)(((*back))->tag), "mlit", 4U);
      }
    }
    if (tmp___315) {
      back = & ((*back))->next;
    } else {
      err_log(9, 544U, (char *)"removing spare\n");
      daap_remove((*back));
    }
  }
  return;
}
}
static void add_browse_item(browse_item **root , char *name ) 
{ browse_item *item ;
  int tmp ;
  int tmp___0 ;
  size_t __len___2 ;
  size_t tmp___17 ;
  char *__retval___2 ;
  char *tmp___18 ;
  int tmp___20 ;

  {
  while (1) {
    item = (*root);
    if ((unsigned int )((browse_item *)0) != (unsigned int )item) {
      tmp = strcasecmp((char const   *)item->name, (char const   *)name);
      if (! (tmp < 0)) {
        goto _L;
      }
    } else {
      _L: /* CIL Label */ 
      break;
    }
    root = & item->next;
  }
  if (item) {
    tmp___0 = strcasecmp((char const   *)item->name, (char const   *)name);
    if (tmp___0 == 0) {
      return;
    } else {
      goto _L___0;
    }
  } else {
    _L___0: /* CIL Label */ ;
  }
  item = (browse_item *)calloc(1U, sizeof(browse_item ));
  tmp___20 = __builtin_constant_p(name);
  if (tmp___20) {
    if ((unsigned int )((void const   *)(name + 1)) - (unsigned int )((void const   *)name) ==
        1U) {
      if ((int const   )(*((char const   *)name + 0)) == 0) {
        item->name = (char *)calloc(1U, 1U);
      } else {
        tmp___17 = strlen((char const   *)name);
        __len___2 = tmp___17 + 1U;
        tmp___18 = (char *)malloc(__len___2);
        __retval___2 = tmp___18;
        if ((unsigned int )__retval___2 != (unsigned int )((void *)0)) {
          __retval___2 = (char *)memcpy((void * __restrict  )__retval___2, (void const   * __restrict  )name,
                                        __len___2);
        }
        item->name = __retval___2;
      }
    } else {
      goto _L___1;
    }
  } else {
    _L___1: /* CIL Label */ 
    item->name = __strdup((char const   *)name);
  }
  item->next = (*root);
  (*root) = item;
  return;
}
}
static void free_browse_items(browse_item *root ) 
{ browse_item *next ;

  {
  while ((unsigned int )((browse_item *)0) != (unsigned int )root) {
    next = root->next;
    free((void *)root->name);
    free((void *)root);
    root = next;
  }
  return;
}
}
static int count_browse_items(browse_item *root ) 
{ int count ;

  {
  count = 0;
  while ((unsigned int )((browse_item *)0) != (unsigned int )root) {
    root = root->next;
    count ++;
  }
  return (count);
}
}
static query_field_t browse_fields[5]  = {      {17, "daap.songartist", (int )((unsigned int )(& ((MP3FILE *)0)->artist))}, 
        {17, "daap.songalbum", (int )((unsigned int )(& ((MP3FILE *)0)->album))}, 
        {17, "daap.songgenre", (int )((unsigned int )(& ((MP3FILE *)0)->genre))}, 
        {17, "daap.songcomposer", (int )((unsigned int )(& ((MP3FILE *)0)->composer))}, 
        {(query_type_t )0,
      (char const   *)0, 0}};
DAAP_BLOCK *daap_response_browse(char const   *name , char const   *filter ) 
{ MP3FILE *current ;
  ENUMHANDLE henum ;
  size_t field ;
  char *l_type ;
  browse_item *items ;
  browse_item *item ;
  DAAP_BLOCK *root ;
  query_node_t *query ;
  size_t __s1_len ;
  size_t __s2_len ;
  int tmp___20 ;
  size_t tmp___21 ;
  register int __result___37 ;
  unsigned char const   *__s2___6 ;
  register int __result___38 ;
  register int __result___45 ;
  unsigned char const   *__s1___14 ;
  register int __result___46 ;
  int tmp___36 ;
  int tmp___37 ;
  int tmp___38 ;
  int tmp___39 ;
  size_t __s1_len___0 ;
  size_t __s2_len___0 ;
  int tmp___61 ;
  size_t tmp___62 ;
  register int __result___85 ;
  unsigned char const   *__s2___14 ;
  register int __result___86 ;
  register int __result___93 ;
  unsigned char const   *__s1___30 ;
  register int __result___94 ;
  int tmp___77 ;
  int tmp___78 ;
  int tmp___79 ;
  int tmp___80 ;
  size_t __s1_len___1 ;
  size_t __s2_len___1 ;
  int tmp___102 ;
  size_t tmp___103 ;
  register int __result___133 ;
  unsigned char const   *__s2___22 ;
  register int __result___134 ;
  register int __result___141 ;
  unsigned char const   *__s1___46 ;
  register int __result___142 ;
  int tmp___118 ;
  int tmp___119 ;
  int tmp___120 ;
  int tmp___121 ;
  size_t __s1_len___2 ;
  size_t __s2_len___2 ;
  int tmp___143 ;
  size_t tmp___144 ;
  register int __result___181 ;
  unsigned char const   *__s2___30 ;
  register int __result___182 ;
  register int __result___189 ;
  unsigned char const   *__s1___62 ;
  register int __result___190 ;
  int tmp___159 ;
  int tmp___160 ;
  int tmp___161 ;
  int tmp___162 ;
  char *name___0 ;
  int tmp___163 ;
  int count ;
  int tmp___164 ;
  DAAP_BLOCK *mlcl ;
  DAAP_BLOCK *tmp___165 ;
  DAAP_BLOCK *tmp___166 ;
  DAAP_BLOCK *tmp___167 ;
  DAAP_BLOCK *tmp___168 ;

  {
  items = (browse_item *)0;
  root = (DAAP_BLOCK *)0;
  query = (query_node_t *)0;
  tmp___161 = __builtin_constant_p(name);
  if (tmp___161) {
    __s1_len___2 = strlen(name);
    __s2_len___2 = strlen("artists");
    if (! ((unsigned int )((void const   *)(name + 1)) - (unsigned int )((void const   *)name) ==
           1U)) {
      goto _L___668;
    } else {
      if (__s1_len___2 >= 4U) {
        _L___668: /* CIL Label */ 
        if (! ((unsigned int )((void const   *)("artists" + 1)) - (unsigned int )((void const   *)"artists") ==
               1U)) {
          goto _L___667;
        } else {
          if (__s2_len___2 >= 4U) {
            _L___667: /* CIL Label */ 
            tmp___162 = 1;
          } else {
            goto _L___666;
          }
        }
      } else {
        _L___666: /* CIL Label */ 
        tmp___162 = 0;
      }
    }
    if (tmp___162) {
      if (__s1_len___2 < __s2_len___2) {
        tmp___144 = __s1_len___2;
      } else {
        tmp___144 = __s2_len___2;
      }
      tmp___143 = memcmp((void const   *)name, (void const   *)"artists", tmp___144 +
                                                                          1U);
    } else {
      goto _L___670;
    }
  } else {
    _L___670: /* CIL Label */ 
    tmp___160 = __builtin_constant_p(name);
    if (tmp___160) {
      if ((unsigned int )((void const   *)(name + 1)) - (unsigned int )((void const   *)name) ==
          1U) {
        __s1_len___2 = strlen(name);
        if (__s1_len___2 < 4U) {
          if ((unsigned int )((void const   *)("artists" + 1)) - (unsigned int )((void const   *)"artists") ==
              1U) {
            __result___181 = (int )((int const   )(*((unsigned char const   *)name +
                                                     0)) - (int const   )(*((unsigned char const   *)"artists" +
                                                                            0)));
            if (__s1_len___2 > 0U) {
              if (__result___181 == 0) {
                __result___181 = (int )((int const   )(*((unsigned char const   *)name +
                                                         1)) - (int const   )(*((unsigned char const   *)"artists" +
                                                                                1)));
                if (__s1_len___2 > 1U) {
                  if (__result___181 == 0) {
                    __result___181 = (int )((int const   )(*((unsigned char const   *)name +
                                                             2)) - (int const   )(*((unsigned char const   *)"artists" +
                                                                                    2)));
                    if (__s1_len___2 > 2U) {
                      if (__result___181 == 0) {
                        __result___181 = (int )((int const   )(*((unsigned char const   *)name +
                                                                 3)) - (int const   )(*((unsigned char const   *)"artists" +
                                                                                        3)));
                      } else {
                        goto _L___631;
                      }
                    } else {
                      _L___631: /* CIL Label */ ;
                    }
                  } else {
                    goto _L___632;
                  }
                } else {
                  _L___632: /* CIL Label */ ;
                }
              } else {
                goto _L___633;
              }
            } else {
              _L___633: /* CIL Label */ ;
            }
            tmp___143 = __result___181;
          } else {
            __s2___30 = (unsigned char const   *)"artists";
            __result___182 = (int )((int const   )(*((unsigned char const   *)name +
                                                     0)) - (int const   )(*(__s2___30 +
                                                                            0)));
            if (__s1_len___2 > 0U) {
              if (__result___182 == 0) {
                __result___182 = (int )((int const   )(*((unsigned char const   *)name +
                                                         1)) - (int const   )(*(__s2___30 +
                                                                                1)));
                if (__s1_len___2 > 1U) {
                  if (__result___182 == 0) {
                    __result___182 = (int )((int const   )(*((unsigned char const   *)name +
                                                             2)) - (int const   )(*(__s2___30 +
                                                                                    2)));
                    if (__s1_len___2 > 2U) {
                      if (__result___182 == 0) {
                        __result___182 = (int )((int const   )(*((unsigned char const   *)name +
                                                                 3)) - (int const   )(*(__s2___30 +
                                                                                        3)));
                      } else {
                        goto _L___634;
                      }
                    } else {
                      _L___634: /* CIL Label */ ;
                    }
                  } else {
                    goto _L___635;
                  }
                } else {
                  _L___635: /* CIL Label */ ;
                }
              } else {
                goto _L___636;
              }
            } else {
              _L___636: /* CIL Label */ ;
            }
            tmp___143 = __result___182;
          }
        } else {
          goto _L___665;
        }
      } else {
        goto _L___665;
      }
    } else {
      _L___665: /* CIL Label */ 
      if ((unsigned int )((void const   *)("artists" + 1)) - (unsigned int )((void const   *)"artists") ==
          1U) {
        __s2_len___2 = strlen("artists");
        if (__s2_len___2 < 4U) {
          tmp___159 = __builtin_constant_p(name);
          if (tmp___159) {
            if ((unsigned int )((void const   *)(name + 1)) - (unsigned int )((void const   *)name) ==
                1U) {
              __result___189 = (int )((int const   )(*((unsigned char const   *)name +
                                                       0)) - (int const   )(*((unsigned char const   *)"artists" +
                                                                              0)));
              if (__s2_len___2 > 0U) {
                if (__result___189 == 0) {
                  __result___189 = (int )((int const   )(*((unsigned char const   *)name +
                                                           1)) - (int const   )(*((unsigned char const   *)"artists" +
                                                                                  1)));
                  if (__s2_len___2 > 1U) {
                    if (__result___189 == 0) {
                      __result___189 = (int )((int const   )(*((unsigned char const   *)name +
                                                               2)) - (int const   )(*((unsigned char const   *)"artists" +
                                                                                      2)));
                      if (__s2_len___2 > 2U) {
                        if (__result___189 == 0) {
                          __result___189 = (int )((int const   )(*((unsigned char const   *)name +
                                                                   3)) - (int const   )(*((unsigned char const   *)"artists" +
                                                                                          3)));
                        } else {
                          goto _L___656;
                        }
                      } else {
                        _L___656: /* CIL Label */ ;
                      }
                    } else {
                      goto _L___657;
                    }
                  } else {
                    _L___657: /* CIL Label */ ;
                  }
                } else {
                  goto _L___658;
                }
              } else {
                _L___658: /* CIL Label */ ;
              }
              tmp___143 = __result___189;
            } else {
              goto _L___662;
            }
          } else {
            _L___662: /* CIL Label */ 
            __s1___62 = (unsigned char const   *)name;
            __result___190 = (int )((int const   )(*(__s1___62 + 0)) - (int const   )(*((unsigned char const   *)"artists" +
                                                                                        0)));
            if (__s2_len___2 > 0U) {
              if (__result___190 == 0) {
                __result___190 = (int )((int const   )(*(__s1___62 + 1)) - (int const   )(*((unsigned char const   *)"artists" +
                                                                                            1)));
                if (__s2_len___2 > 1U) {
                  if (__result___190 == 0) {
                    __result___190 = (int )((int const   )(*(__s1___62 + 2)) - (int const   )(*((unsigned char const   *)"artists" +
                                                                                                2)));
                    if (__s2_len___2 > 2U) {
                      if (__result___190 == 0) {
                        __result___190 = (int )((int const   )(*(__s1___62 + 3)) -
                                                (int const   )(*((unsigned char const   *)"artists" +
                                                                 3)));
                      } else {
                        goto _L___659;
                      }
                    } else {
                      _L___659: /* CIL Label */ ;
                    }
                  } else {
                    goto _L___660;
                  }
                } else {
                  _L___660: /* CIL Label */ ;
                }
              } else {
                goto _L___661;
              }
            } else {
              _L___661: /* CIL Label */ ;
            }
            tmp___143 = __result___190;
          }
        } else {
          goto _L___663;
        }
      } else {
        _L___663: /* CIL Label */ 
        tmp___143 = strcmp(name, "artists");
      }
    }
  }
  if (tmp___143) {
    tmp___120 = __builtin_constant_p(name);
    if (tmp___120) {
      __s1_len___1 = strlen(name);
      __s2_len___1 = strlen("genres");
      if (! ((unsigned int )((void const   *)(name + 1)) - (unsigned int )((void const   *)name) ==
             1U)) {
        goto _L___500;
      } else {
        if (__s1_len___1 >= 4U) {
          _L___500: /* CIL Label */ 
          if (! ((unsigned int )((void const   *)("genres" + 1)) - (unsigned int )((void const   *)"genres") ==
                 1U)) {
            goto _L___499;
          } else {
            if (__s2_len___1 >= 4U) {
              _L___499: /* CIL Label */ 
              tmp___121 = 1;
            } else {
              goto _L___498;
            }
          }
        } else {
          _L___498: /* CIL Label */ 
          tmp___121 = 0;
        }
      }
      if (tmp___121) {
        if (__s1_len___1 < __s2_len___1) {
          tmp___103 = __s1_len___1;
        } else {
          tmp___103 = __s2_len___1;
        }
        tmp___102 = memcmp((void const   *)name, (void const   *)"genres", tmp___103 +
                                                                           1U);
      } else {
        goto _L___502;
      }
    } else {
      _L___502: /* CIL Label */ 
      tmp___119 = __builtin_constant_p(name);
      if (tmp___119) {
        if ((unsigned int )((void const   *)(name + 1)) - (unsigned int )((void const   *)name) ==
            1U) {
          __s1_len___1 = strlen(name);
          if (__s1_len___1 < 4U) {
            if ((unsigned int )((void const   *)("genres" + 1)) - (unsigned int )((void const   *)"genres") ==
                1U) {
              __result___133 = (int )((int const   )(*((unsigned char const   *)name +
                                                       0)) - (int const   )(*((unsigned char const   *)"genres" +
                                                                              0)));
              if (__s1_len___1 > 0U) {
                if (__result___133 == 0) {
                  __result___133 = (int )((int const   )(*((unsigned char const   *)name +
                                                           1)) - (int const   )(*((unsigned char const   *)"genres" +
                                                                                  1)));
                  if (__s1_len___1 > 1U) {
                    if (__result___133 == 0) {
                      __result___133 = (int )((int const   )(*((unsigned char const   *)name +
                                                               2)) - (int const   )(*((unsigned char const   *)"genres" +
                                                                                      2)));
                      if (__s1_len___1 > 2U) {
                        if (__result___133 == 0) {
                          __result___133 = (int )((int const   )(*((unsigned char const   *)name +
                                                                   3)) - (int const   )(*((unsigned char const   *)"genres" +
                                                                                          3)));
                        } else {
                          goto _L___463;
                        }
                      } else {
                        _L___463: /* CIL Label */ ;
                      }
                    } else {
                      goto _L___464;
                    }
                  } else {
                    _L___464: /* CIL Label */ ;
                  }
                } else {
                  goto _L___465;
                }
              } else {
                _L___465: /* CIL Label */ ;
              }
              tmp___102 = __result___133;
            } else {
              __s2___22 = (unsigned char const   *)"genres";
              __result___134 = (int )((int const   )(*((unsigned char const   *)name +
                                                       0)) - (int const   )(*(__s2___22 +
                                                                              0)));
              if (__s1_len___1 > 0U) {
                if (__result___134 == 0) {
                  __result___134 = (int )((int const   )(*((unsigned char const   *)name +
                                                           1)) - (int const   )(*(__s2___22 +
                                                                                  1)));
                  if (__s1_len___1 > 1U) {
                    if (__result___134 == 0) {
                      __result___134 = (int )((int const   )(*((unsigned char const   *)name +
                                                               2)) - (int const   )(*(__s2___22 +
                                                                                      2)));
                      if (__s1_len___1 > 2U) {
                        if (__result___134 == 0) {
                          __result___134 = (int )((int const   )(*((unsigned char const   *)name +
                                                                   3)) - (int const   )(*(__s2___22 +
                                                                                          3)));
                        } else {
                          goto _L___466;
                        }
                      } else {
                        _L___466: /* CIL Label */ ;
                      }
                    } else {
                      goto _L___467;
                    }
                  } else {
                    _L___467: /* CIL Label */ ;
                  }
                } else {
                  goto _L___468;
                }
              } else {
                _L___468: /* CIL Label */ ;
              }
              tmp___102 = __result___134;
            }
          } else {
            goto _L___497;
          }
        } else {
          goto _L___497;
        }
      } else {
        _L___497: /* CIL Label */ 
        if ((unsigned int )((void const   *)("genres" + 1)) - (unsigned int )((void const   *)"genres") ==
            1U) {
          __s2_len___1 = strlen("genres");
          if (__s2_len___1 < 4U) {
            tmp___118 = __builtin_constant_p(name);
            if (tmp___118) {
              if ((unsigned int )((void const   *)(name + 1)) - (unsigned int )((void const   *)name) ==
                  1U) {
                __result___141 = (int )((int const   )(*((unsigned char const   *)name +
                                                         0)) - (int const   )(*((unsigned char const   *)"genres" +
                                                                                0)));
                if (__s2_len___1 > 0U) {
                  if (__result___141 == 0) {
                    __result___141 = (int )((int const   )(*((unsigned char const   *)name +
                                                             1)) - (int const   )(*((unsigned char const   *)"genres" +
                                                                                    1)));
                    if (__s2_len___1 > 1U) {
                      if (__result___141 == 0) {
                        __result___141 = (int )((int const   )(*((unsigned char const   *)name +
                                                                 2)) - (int const   )(*((unsigned char const   *)"genres" +
                                                                                        2)));
                        if (__s2_len___1 > 2U) {
                          if (__result___141 == 0) {
                            __result___141 = (int )((int const   )(*((unsigned char const   *)name +
                                                                     3)) - (int const   )(*((unsigned char const   *)"genres" +
                                                                                            3)));
                          } else {
                            goto _L___488;
                          }
                        } else {
                          _L___488: /* CIL Label */ ;
                        }
                      } else {
                        goto _L___489;
                      }
                    } else {
                      _L___489: /* CIL Label */ ;
                    }
                  } else {
                    goto _L___490;
                  }
                } else {
                  _L___490: /* CIL Label */ ;
                }
                tmp___102 = __result___141;
              } else {
                goto _L___494;
              }
            } else {
              _L___494: /* CIL Label */ 
              __s1___46 = (unsigned char const   *)name;
              __result___142 = (int )((int const   )(*(__s1___46 + 0)) - (int const   )(*((unsigned char const   *)"genres" +
                                                                                          0)));
              if (__s2_len___1 > 0U) {
                if (__result___142 == 0) {
                  __result___142 = (int )((int const   )(*(__s1___46 + 1)) - (int const   )(*((unsigned char const   *)"genres" +
                                                                                              1)));
                  if (__s2_len___1 > 1U) {
                    if (__result___142 == 0) {
                      __result___142 = (int )((int const   )(*(__s1___46 + 2)) - (int const   )(*((unsigned char const   *)"genres" +
                                                                                                  2)));
                      if (__s2_len___1 > 2U) {
                        if (__result___142 == 0) {
                          __result___142 = (int )((int const   )(*(__s1___46 + 3)) -
                                                  (int const   )(*((unsigned char const   *)"genres" +
                                                                   3)));
                        } else {
                          goto _L___491;
                        }
                      } else {
                        _L___491: /* CIL Label */ ;
                      }
                    } else {
                      goto _L___492;
                    }
                  } else {
                    _L___492: /* CIL Label */ ;
                  }
                } else {
                  goto _L___493;
                }
              } else {
                _L___493: /* CIL Label */ ;
              }
              tmp___102 = __result___142;
            }
          } else {
            goto _L___495;
          }
        } else {
          _L___495: /* CIL Label */ 
          tmp___102 = strcmp(name, "genres");
        }
      }
    }
    if (tmp___102) {
      tmp___79 = __builtin_constant_p(name);
      if (tmp___79) {
        __s1_len___0 = strlen(name);
        __s2_len___0 = strlen("albums");
        if (! ((unsigned int )((void const   *)(name + 1)) - (unsigned int )((void const   *)name) ==
               1U)) {
          goto _L___332;
        } else {
          if (__s1_len___0 >= 4U) {
            _L___332: /* CIL Label */ 
            if (! ((unsigned int )((void const   *)("albums" + 1)) - (unsigned int )((void const   *)"albums") ==
                   1U)) {
              goto _L___331;
            } else {
              if (__s2_len___0 >= 4U) {
                _L___331: /* CIL Label */ 
                tmp___80 = 1;
              } else {
                goto _L___330;
              }
            }
          } else {
            _L___330: /* CIL Label */ 
            tmp___80 = 0;
          }
        }
        if (tmp___80) {
          if (__s1_len___0 < __s2_len___0) {
            tmp___62 = __s1_len___0;
          } else {
            tmp___62 = __s2_len___0;
          }
          tmp___61 = memcmp((void const   *)name, (void const   *)"albums", tmp___62 +
                                                                            1U);
        } else {
          goto _L___334;
        }
      } else {
        _L___334: /* CIL Label */ 
        tmp___78 = __builtin_constant_p(name);
        if (tmp___78) {
          if ((unsigned int )((void const   *)(name + 1)) - (unsigned int )((void const   *)name) ==
              1U) {
            __s1_len___0 = strlen(name);
            if (__s1_len___0 < 4U) {
              if ((unsigned int )((void const   *)("albums" + 1)) - (unsigned int )((void const   *)"albums") ==
                  1U) {
                __result___85 = (int )((int const   )(*((unsigned char const   *)name +
                                                        0)) - (int const   )(*((unsigned char const   *)"albums" +
                                                                               0)));
                if (__s1_len___0 > 0U) {
                  if (__result___85 == 0) {
                    __result___85 = (int )((int const   )(*((unsigned char const   *)name +
                                                            1)) - (int const   )(*((unsigned char const   *)"albums" +
                                                                                   1)));
                    if (__s1_len___0 > 1U) {
                      if (__result___85 == 0) {
                        __result___85 = (int )((int const   )(*((unsigned char const   *)name +
                                                                2)) - (int const   )(*((unsigned char const   *)"albums" +
                                                                                       2)));
                        if (__s1_len___0 > 2U) {
                          if (__result___85 == 0) {
                            __result___85 = (int )((int const   )(*((unsigned char const   *)name +
                                                                    3)) - (int const   )(*((unsigned char const   *)"albums" +
                                                                                           3)));
                          } else {
                            goto _L___295;
                          }
                        } else {
                          _L___295: /* CIL Label */ ;
                        }
                      } else {
                        goto _L___296;
                      }
                    } else {
                      _L___296: /* CIL Label */ ;
                    }
                  } else {
                    goto _L___297;
                  }
                } else {
                  _L___297: /* CIL Label */ ;
                }
                tmp___61 = __result___85;
              } else {
                __s2___14 = (unsigned char const   *)"albums";
                __result___86 = (int )((int const   )(*((unsigned char const   *)name +
                                                        0)) - (int const   )(*(__s2___14 +
                                                                               0)));
                if (__s1_len___0 > 0U) {
                  if (__result___86 == 0) {
                    __result___86 = (int )((int const   )(*((unsigned char const   *)name +
                                                            1)) - (int const   )(*(__s2___14 +
                                                                                   1)));
                    if (__s1_len___0 > 1U) {
                      if (__result___86 == 0) {
                        __result___86 = (int )((int const   )(*((unsigned char const   *)name +
                                                                2)) - (int const   )(*(__s2___14 +
                                                                                       2)));
                        if (__s1_len___0 > 2U) {
                          if (__result___86 == 0) {
                            __result___86 = (int )((int const   )(*((unsigned char const   *)name +
                                                                    3)) - (int const   )(*(__s2___14 +
                                                                                           3)));
                          } else {
                            goto _L___298;
                          }
                        } else {
                          _L___298: /* CIL Label */ ;
                        }
                      } else {
                        goto _L___299;
                      }
                    } else {
                      _L___299: /* CIL Label */ ;
                    }
                  } else {
                    goto _L___300;
                  }
                } else {
                  _L___300: /* CIL Label */ ;
                }
                tmp___61 = __result___86;
              }
            } else {
              goto _L___329;
            }
          } else {
            goto _L___329;
          }
        } else {
          _L___329: /* CIL Label */ 
          if ((unsigned int )((void const   *)("albums" + 1)) - (unsigned int )((void const   *)"albums") ==
              1U) {
            __s2_len___0 = strlen("albums");
            if (__s2_len___0 < 4U) {
              tmp___77 = __builtin_constant_p(name);
              if (tmp___77) {
                if ((unsigned int )((void const   *)(name + 1)) - (unsigned int )((void const   *)name) ==
                    1U) {
                  __result___93 = (int )((int const   )(*((unsigned char const   *)name +
                                                          0)) - (int const   )(*((unsigned char const   *)"albums" +
                                                                                 0)));
                  if (__s2_len___0 > 0U) {
                    if (__result___93 == 0) {
                      __result___93 = (int )((int const   )(*((unsigned char const   *)name +
                                                              1)) - (int const   )(*((unsigned char const   *)"albums" +
                                                                                     1)));
                      if (__s2_len___0 > 1U) {
                        if (__result___93 == 0) {
                          __result___93 = (int )((int const   )(*((unsigned char const   *)name +
                                                                  2)) - (int const   )(*((unsigned char const   *)"albums" +
                                                                                         2)));
                          if (__s2_len___0 > 2U) {
                            if (__result___93 == 0) {
                              __result___93 = (int )((int const   )(*((unsigned char const   *)name +
                                                                      3)) - (int const   )(*((unsigned char const   *)"albums" +
                                                                                             3)));
                            } else {
                              goto _L___320;
                            }
                          } else {
                            _L___320: /* CIL Label */ ;
                          }
                        } else {
                          goto _L___321;
                        }
                      } else {
                        _L___321: /* CIL Label */ ;
                      }
                    } else {
                      goto _L___322;
                    }
                  } else {
                    _L___322: /* CIL Label */ ;
                  }
                  tmp___61 = __result___93;
                } else {
                  goto _L___326;
                }
              } else {
                _L___326: /* CIL Label */ 
                __s1___30 = (unsigned char const   *)name;
                __result___94 = (int )((int const   )(*(__s1___30 + 0)) - (int const   )(*((unsigned char const   *)"albums" +
                                                                                           0)));
                if (__s2_len___0 > 0U) {
                  if (__result___94 == 0) {
                    __result___94 = (int )((int const   )(*(__s1___30 + 1)) - (int const   )(*((unsigned char const   *)"albums" +
                                                                                               1)));
                    if (__s2_len___0 > 1U) {
                      if (__result___94 == 0) {
                        __result___94 = (int )((int const   )(*(__s1___30 + 2)) -
                                               (int const   )(*((unsigned char const   *)"albums" +
                                                                2)));
                        if (__s2_len___0 > 2U) {
                          if (__result___94 == 0) {
                            __result___94 = (int )((int const   )(*(__s1___30 + 3)) -
                                                   (int const   )(*((unsigned char const   *)"albums" +
                                                                    3)));
                          } else {
                            goto _L___323;
                          }
                        } else {
                          _L___323: /* CIL Label */ ;
                        }
                      } else {
                        goto _L___324;
                      }
                    } else {
                      _L___324: /* CIL Label */ ;
                    }
                  } else {
                    goto _L___325;
                  }
                } else {
                  _L___325: /* CIL Label */ ;
                }
                tmp___61 = __result___94;
              }
            } else {
              goto _L___327;
            }
          } else {
            _L___327: /* CIL Label */ 
            tmp___61 = strcmp(name, "albums");
          }
        }
      }
      if (tmp___61) {
        tmp___38 = __builtin_constant_p(name);
        if (tmp___38) {
          __s1_len = strlen(name);
          __s2_len = strlen("composers");
          if (! ((unsigned int )((void const   *)(name + 1)) - (unsigned int )((void const   *)name) ==
                 1U)) {
            goto _L___164;
          } else {
            if (__s1_len >= 4U) {
              _L___164: /* CIL Label */ 
              if (! ((unsigned int )((void const   *)("composers" + 1)) - (unsigned int )((void const   *)"composers") ==
                     1U)) {
                goto _L___163;
              } else {
                if (__s2_len >= 4U) {
                  _L___163: /* CIL Label */ 
                  tmp___39 = 1;
                } else {
                  goto _L___162;
                }
              }
            } else {
              _L___162: /* CIL Label */ 
              tmp___39 = 0;
            }
          }
          if (tmp___39) {
            if (__s1_len < __s2_len) {
              tmp___21 = __s1_len;
            } else {
              tmp___21 = __s2_len;
            }
            tmp___20 = memcmp((void const   *)name, (void const   *)"composers", tmp___21 +
                                                                                 1U);
          } else {
            goto _L___166;
          }
        } else {
          _L___166: /* CIL Label */ 
          tmp___37 = __builtin_constant_p(name);
          if (tmp___37) {
            if ((unsigned int )((void const   *)(name + 1)) - (unsigned int )((void const   *)name) ==
                1U) {
              __s1_len = strlen(name);
              if (__s1_len < 4U) {
                if ((unsigned int )((void const   *)("composers" + 1)) - (unsigned int )((void const   *)"composers") ==
                    1U) {
                  __result___37 = (int )((int const   )(*((unsigned char const   *)name +
                                                          0)) - (int const   )(*((unsigned char const   *)"composers" +
                                                                                 0)));
                  if (__s1_len > 0U) {
                    if (__result___37 == 0) {
                      __result___37 = (int )((int const   )(*((unsigned char const   *)name +
                                                              1)) - (int const   )(*((unsigned char const   *)"composers" +
                                                                                     1)));
                      if (__s1_len > 1U) {
                        if (__result___37 == 0) {
                          __result___37 = (int )((int const   )(*((unsigned char const   *)name +
                                                                  2)) - (int const   )(*((unsigned char const   *)"composers" +
                                                                                         2)));
                          if (__s1_len > 2U) {
                            if (__result___37 == 0) {
                              __result___37 = (int )((int const   )(*((unsigned char const   *)name +
                                                                      3)) - (int const   )(*((unsigned char const   *)"composers" +
                                                                                             3)));
                            } else {
                              goto _L___127;
                            }
                          } else {
                            _L___127: /* CIL Label */ ;
                          }
                        } else {
                          goto _L___128;
                        }
                      } else {
                        _L___128: /* CIL Label */ ;
                      }
                    } else {
                      goto _L___129;
                    }
                  } else {
                    _L___129: /* CIL Label */ ;
                  }
                  tmp___20 = __result___37;
                } else {
                  __s2___6 = (unsigned char const   *)"composers";
                  __result___38 = (int )((int const   )(*((unsigned char const   *)name +
                                                          0)) - (int const   )(*(__s2___6 +
                                                                                 0)));
                  if (__s1_len > 0U) {
                    if (__result___38 == 0) {
                      __result___38 = (int )((int const   )(*((unsigned char const   *)name +
                                                              1)) - (int const   )(*(__s2___6 +
                                                                                     1)));
                      if (__s1_len > 1U) {
                        if (__result___38 == 0) {
                          __result___38 = (int )((int const   )(*((unsigned char const   *)name +
                                                                  2)) - (int const   )(*(__s2___6 +
                                                                                         2)));
                          if (__s1_len > 2U) {
                            if (__result___38 == 0) {
                              __result___38 = (int )((int const   )(*((unsigned char const   *)name +
                                                                      3)) - (int const   )(*(__s2___6 +
                                                                                             3)));
                            } else {
                              goto _L___130;
                            }
                          } else {
                            _L___130: /* CIL Label */ ;
                          }
                        } else {
                          goto _L___131;
                        }
                      } else {
                        _L___131: /* CIL Label */ ;
                      }
                    } else {
                      goto _L___132;
                    }
                  } else {
                    _L___132: /* CIL Label */ ;
                  }
                  tmp___20 = __result___38;
                }
              } else {
                goto _L___161;
              }
            } else {
              goto _L___161;
            }
          } else {
            _L___161: /* CIL Label */ 
            if ((unsigned int )((void const   *)("composers" + 1)) - (unsigned int )((void const   *)"composers") ==
                1U) {
              __s2_len = strlen("composers");
              if (__s2_len < 4U) {
                tmp___36 = __builtin_constant_p(name);
                if (tmp___36) {
                  if ((unsigned int )((void const   *)(name + 1)) - (unsigned int )((void const   *)name) ==
                      1U) {
                    __result___45 = (int )((int const   )(*((unsigned char const   *)name +
                                                            0)) - (int const   )(*((unsigned char const   *)"composers" +
                                                                                   0)));
                    if (__s2_len > 0U) {
                      if (__result___45 == 0) {
                        __result___45 = (int )((int const   )(*((unsigned char const   *)name +
                                                                1)) - (int const   )(*((unsigned char const   *)"composers" +
                                                                                       1)));
                        if (__s2_len > 1U) {
                          if (__result___45 == 0) {
                            __result___45 = (int )((int const   )(*((unsigned char const   *)name +
                                                                    2)) - (int const   )(*((unsigned char const   *)"composers" +
                                                                                           2)));
                            if (__s2_len > 2U) {
                              if (__result___45 == 0) {
                                __result___45 = (int )((int const   )(*((unsigned char const   *)name +
                                                                        3)) - (int const   )(*((unsigned char const   *)"composers" +
                                                                                               3)));
                              } else {
                                goto _L___152;
                              }
                            } else {
                              _L___152: /* CIL Label */ ;
                            }
                          } else {
                            goto _L___153;
                          }
                        } else {
                          _L___153: /* CIL Label */ ;
                        }
                      } else {
                        goto _L___154;
                      }
                    } else {
                      _L___154: /* CIL Label */ ;
                    }
                    tmp___20 = __result___45;
                  } else {
                    goto _L___158;
                  }
                } else {
                  _L___158: /* CIL Label */ 
                  __s1___14 = (unsigned char const   *)name;
                  __result___46 = (int )((int const   )(*(__s1___14 + 0)) - (int const   )(*((unsigned char const   *)"composers" +
                                                                                             0)));
                  if (__s2_len > 0U) {
                    if (__result___46 == 0) {
                      __result___46 = (int )((int const   )(*(__s1___14 + 1)) - (int const   )(*((unsigned char const   *)"composers" +
                                                                                                 1)));
                      if (__s2_len > 1U) {
                        if (__result___46 == 0) {
                          __result___46 = (int )((int const   )(*(__s1___14 + 2)) -
                                                 (int const   )(*((unsigned char const   *)"composers" +
                                                                  2)));
                          if (__s2_len > 2U) {
                            if (__result___46 == 0) {
                              __result___46 = (int )((int const   )(*(__s1___14 +
                                                                      3)) - (int const   )(*((unsigned char const   *)"composers" +
                                                                                             3)));
                            } else {
                              goto _L___155;
                            }
                          } else {
                            _L___155: /* CIL Label */ ;
                          }
                        } else {
                          goto _L___156;
                        }
                      } else {
                        _L___156: /* CIL Label */ ;
                      }
                    } else {
                      goto _L___157;
                    }
                  } else {
                    _L___157: /* CIL Label */ ;
                  }
                  tmp___20 = __result___46;
                }
              } else {
                goto _L___159;
              }
            } else {
              _L___159: /* CIL Label */ 
              tmp___20 = strcmp(name, "composers");
            }
          }
        }
        if (tmp___20) {
          err_log(2, 576U, (char *)"Invalid browse request: %s\n", name);
          return ((DAAP_BLOCK *)((void *)0));
        } else {
          field = (unsigned int )(& ((MP3FILE *)0)->composer);
          l_type = (char *)"abcp";
        }
      } else {
        field = (unsigned int )(& ((MP3FILE *)0)->album);
        l_type = (char *)"abal";
      }
    } else {
      field = (unsigned int )(& ((MP3FILE *)0)->genre);
      l_type = (char *)"abgn";
    }
  } else {
    field = (unsigned int )(& ((MP3FILE *)0)->artist);
    l_type = (char *)"abar";
  }
  if ((unsigned int )((char const   *)0) != (unsigned int )filter) {
    query = query_build(filter, (query_field_t const   *)(browse_fields));
    if ((unsigned int )((query_node_t *)0) == (unsigned int )query) {
      return ((DAAP_BLOCK *)((void *)0));
    } else {
      goto _L___671;
    }
  } else {
    _L___671: /* CIL Label */ ;
  }
  if (query) {
    err_log(5, 592U, (char *)"query: %s\n", filter);
    if (err_debuglevel >= 5) {
      query_dump(stderr, query, 0);
    }
  }
  henum = db_enum_begin();
  if ((unsigned int )((ENUMHANDLE )0) == (unsigned int )henum) {
    return ((DAAP_BLOCK *)((void *)0));
  }
  while (1) {
    current = db_enum(& henum);
    if (! current) {
      break;
    }
    if ((unsigned int )((query_node_t *)0) == (unsigned int )query) {
      goto _L___672;
    } else {
      tmp___163 = query_test(query, (void *)current);
      if (tmp___163) {
        _L___672: /* CIL Label */ 
        name___0 = (*((char **)((unsigned int )current + field)));
        if ((unsigned int )((char *)0) != (unsigned int )name___0) {
          add_browse_item(& items, name___0);
        }
      }
    }
  }
  db_enum_end(henum);
  root = daap_add_empty((DAAP_BLOCK *)0, (char *)"abro");
  if ((unsigned int )((DAAP_BLOCK *)0) != (unsigned int )root) {
    tmp___164 = count_browse_items(items);
    count = tmp___164;
    tmp___165 = daap_add_int(root, (char *)"mstt", 200);
    if (tmp___165) {
      tmp___166 = daap_add_int(root, (char *)"mtco", count);
      if (tmp___166) {
        tmp___167 = daap_add_int(root, (char *)"mrco", count);
        if (tmp___167) {
          mlcl = daap_add_empty(root, l_type);
          if ((unsigned int )((DAAP_BLOCK *)0) == (unsigned int )mlcl) {
            _L___673: /* CIL Label */ 
            goto error;
          }
        } else {
          _L___674: /* CIL Label */ 
          goto _L___673;
        }
      } else {
        _L___675: /* CIL Label */ 
        goto _L___674;
      }
    } else {
      goto _L___675;
    }
    item = items;
    while (item) {
      tmp___168 = daap_add_string(mlcl, (char *)"mlit", item->name);
      if (! tmp___168) {
        goto error;
      }
      item = item->next;
    }
  }
  free_browse_items(items);
  if ((unsigned int )((query_node_t *)0) != (unsigned int )query) {
    query_free(query);
  }
  return (root);
  error: 
  free_browse_items(items);
  if ((unsigned int )((query_node_t *)0) != (unsigned int )query) {
    query_free(query);
  }
  if ((unsigned int )root != (unsigned int )((DAAP_BLOCK *)0)) {
    daap_free(root);
  }
  return ((DAAP_BLOCK *)((void *)0));
}
}
#pragma merger(0,"/tmp/cil-18NaHZkG.i","-g -g -O2")
extern GDBM_FILE gdbm_open(char * , int  , int  , int  , void (*)() ) ;
extern void gdbm_close(GDBM_FILE  ) ;
extern int gdbm_store(GDBM_FILE  , datum  , datum  , int  ) ;
extern datum gdbm_fetch(GDBM_FILE  , datum  ) ;
extern int gdbm_delete(GDBM_FILE  , datum  ) ;
extern datum gdbm_firstkey(GDBM_FILE  ) ;
extern datum gdbm_nextkey(GDBM_FILE  , datum  ) ;
extern int gdbm_reorganize(GDBM_FILE  ) ;
extern void gdbm_sync(GDBM_FILE  ) ;
extern int gdbm_exists(GDBM_FILE  , datum  ) ;
extern int pthread_rwlock_init(pthread_rwlock_t * __restrict  __rwlock , pthread_rwlockattr_t const   * __restrict  __attr ) ;
extern int pthread_rwlock_rdlock(pthread_rwlock_t *__rwlock ) ;
extern int pthread_rwlock_wrlock(pthread_rwlock_t *__rwlock ) ;
extern int pthread_rwlock_unlock(pthread_rwlock_t *__rwlock ) ;
extern int pthread_once(pthread_once_t *__once_control , void (*__init_routine)(void) ) ;
extern char *strdup(char const   *__s )  __attribute__((__malloc__)) ;
void make_composite_tags(MP3FILE *song ) ;
void pl_eval(MP3FILE *pmp3 ) ;
void pl_register(void) ;
struct rbtree *rbinit(int (*cmp)(void const   * , void const   * , void const   * ) ,
                      void const   *config___0 ) ;
void const   *rbdelete(void const   *key , struct rbtree *rbinfo ) ;
void const   *rblookup(int mode , void const   *key , struct rbtree *rbinfo ) ;
void const   *rbsearch(void const   *key , struct rbtree *rbinfo ) ;
void rbdestroy(struct rbtree *rbinfo ) ;
int db_start_initial_update(void) ;
int db_end_initial_update(void) ;
int db_is_empty(void) ;
int db_add(MP3FILE *pmp3 ) ;
int db_delete(unsigned long id ) ;
int db_add_playlist(unsigned long playlistid , char *name , int file_time , int is_smart ) ;
int db_add_playlist_song(unsigned long playlistid , unsigned long itemid ) ;
int db_delete_playlist(unsigned long playlistid ) ;
int db_playlist_last_modified(unsigned long playlistid ) ;
int db_scanning(void) ;
int db_exists(unsigned long id ) ;
int db_last_modified(unsigned long id ) ;
static int db_version_no  ;
static int db_update_mode  =    0;
static int db_song_count  ;
static int db_playlist_count  =    0;
static DB_PLAYLIST db_playlists  ;
static pthread_rwlock_t db_rwlock  ;
static int db_initlock  =    0;
static GDBM_FILE db_songs  ;
static struct rbtree *db_removed  ;
static MP3FILE gdbm_mp3  ;
static int gdbm_mp3_mustfree  =    0;
static struct __anonstruct_pthread_mutex_t_7 db_gdbm_mutex  =    {0, 0, (_pthread_descr )0, 0, {0L, 0}};
static void db_writelock(void) ;
static void db_readlock(void) ;
static int db_unlock(void) ;
static void db_gdbmlock(void) ;
static int db_gdbmunlock(void) ;
static DB_PLAYLIST *db_playlist_find(unsigned long playlistid ) ;
int db_unpackrecord(datum *pdatum , MP3FILE *pmp3 ) ;
datum *db_packrecord(MP3FILE *pmp3 ) ;
int db_compare_rb_nodes(void const   *pa , void const   *pb , void const   *cfg ) ;
static void db_readlock(void) 
{ int err ;
  char *tmp ;

  {
  err = pthread_rwlock_rdlock(& db_rwlock);
  if (err) {
    tmp = strerror(err);
    err_log(0, 4U, (char *)"cannot lock rdlock: %s\n", tmp);
  }
  return;
}
}
static void db_writelock(void) 
{ int err ;
  char *tmp ;

  {
  err = pthread_rwlock_wrlock(& db_rwlock);
  if (err) {
    tmp = strerror(err);
    err_log(0, 4U, (char *)"cannot lock rwlock: %s\n", tmp);
  }
  return;
}
}
static int db_unlock(void) 
{ int tmp ;

  {
  tmp = pthread_rwlock_unlock(& db_rwlock);
  return (tmp);
}
}
static void db_gdbmlock(void) 
{ int err ;
  char *tmp ;

  {
  err = pthread_mutex_lock(& db_gdbm_mutex);
  if (err) {
    tmp = strerror(err);
    err_log(0, 4U, (char *)"cannot lock gdbmlock: %s\n", tmp);
  }
  return;
}
}
static int db_gdbmunlock(void) 
{ int tmp ;

  {
  tmp = pthread_mutex_unlock(& db_gdbm_mutex);
  return (tmp);
}
}
int db_compare_rb_nodes(void const   *pa , void const   *pb , void const   *cfg ) 
{ 

  {
  if ((*((unsigned long *)pa)) < (*((unsigned long *)pb))) {
    return (-1);
  }
  if ((*((unsigned long *)pb)) < (*((unsigned long *)pa))) {
    return (1);
  }
  return (0);
}
}
void db_init_once(void) 
{ 

  {
  pthread_rwlock_init((pthread_rwlock_t * __restrict  )(& db_rwlock), (pthread_rwlockattr_t const   * __restrict  )((void *)0));
  return;
}
}
int db_open(char *parameters , int reload ) 
{ char db_path[4097] ;
  datum tmp_key ;
  datum tmp_value ;
  int current_db_version ;
  int tmp ;
  int *tmp___0 ;
  char *tmp___1 ;

  {
  tmp = pthread_once(& db_initlock, & db_init_once);
  if (tmp) {
    return (-1);
  }
  snprintf((char * __restrict  )(db_path), sizeof(db_path), (char const   * __restrict  )"%s/%s",
           parameters, "songs.gdb");
  if (reload) {
    reload = 3;
  } else {
    reload = 2;
  }
  db_gdbmlock();
  db_songs = gdbm_open(db_path, 0, (reload | 32) | 64, 384, (void (*)())((void *)0));
  if (reload == 2) {
    if (db_songs) {
      tmp_key = gdbm_firstkey(db_songs);
      if (tmp_key.dptr) {
        tmp_value = gdbm_fetch(db_songs, tmp_key);
        if (tmp_value.dptr) {
          current_db_version = (*((int *)tmp_value.dptr));
          if (current_db_version != 8) {
            err_log(1, 4U, (char *)"Database version changed... updating database\n");
            gdbm_close(db_songs);
            db_songs = gdbm_open(db_path, 0, 99, 384, (void (*)())((void *)0));
          } else {
            err_log(1, 4U, (char *)"Current database version: %d\n", 8);
          }
          free((void *)tmp_value.dptr);
        }
        free((void *)tmp_key.dptr);
      }
    } else {
      goto _L;
    }
  } else {
    _L: /* CIL Label */ ;
  }
  db_gdbmunlock();
  if (! db_songs) {
    tmp___0 = __errno_location();
    tmp___1 = strerror((*tmp___0));
    err_log(0, 4U, (char *)"Could not open songs database (%s): %s\n", db_path, tmp___1);
    return (-1);
  }
  return (0);
}
}
int db_init(void) 
{ MP3FILE mp3file ;
  datum tmp_key ;
  datum tmp_nextkey ;
  datum song_data ;
  int tmp ;

  {
  pl_register();
  db_version_no = 1;
  db_song_count = 0;
  err_log(9, 132U, (char *)"Building playlists\n");
  db_gdbmlock();
  tmp_key = gdbm_firstkey(db_songs);
  db_gdbmunlock();
  while (tmp_key.dptr) {
    db_gdbmlock();
    song_data = gdbm_fetch(db_songs, tmp_key);
    db_gdbmunlock();
    if (song_data.dptr) {
      tmp = db_unpackrecord(& song_data, & mp3file);
      if (! tmp) {
        pl_eval(& mp3file);
        db_dispose(& mp3file);
      }
      free((void *)song_data.dptr);
    }
    db_gdbmlock();
    tmp_nextkey = gdbm_nextkey(db_songs, tmp_key);
    db_gdbmunlock();
    free((void *)tmp_key.dptr);
    tmp_key = tmp_nextkey;
    db_song_count ++;
  }
  err_log(9, 4U, (char *)"Loaded database... found %d songs\n", db_song_count);
  return (0);
}
}
int db_deinit(void) 
{ DB_PLAYLIST *plist ;
  DB_PLAYLISTENTRY *pentry ;

  {
  db_gdbmlock();
  gdbm_close(db_songs);
  db_gdbmunlock();
  while (db_playlists.next) {
    plist = db_playlists.next;
    db_playlists.next = plist->next;
    free((void *)plist->name);
    while (plist->nodes) {
      pentry = plist->nodes;
      plist->nodes = pentry->next;
      free((void *)pentry);
    }
    free((void *)plist);
  }
  return (0);
}
}
int db_scanning(void) 
{ 

  {
  return (db_update_mode);
}
}
int db_version(void) 
{ int version ;

  {
  db_readlock();
  version = db_version_no;
  db_unlock();
  return (version);
}
}
int db_start_initial_update(void) 
{ datum tmp_key ;
  datum tmp_nextkey ;
  DB_PLAYLIST *current ;
  int *tmp ;
  int *tmp___0 ;
  void const   *tmp___1 ;

  {
  db_writelock();
  db_removed = rbinit(& db_compare_rb_nodes, (void const   *)((void *)0));
  if ((unsigned int )db_removed == (unsigned int )((void *)0)) {
    tmp = __errno_location();
    (*tmp) = 12;
    db_unlock();
    return (-1);
  }
  db_gdbmlock();
  tmp_key = gdbm_firstkey(db_songs);
  db_gdbmunlock();
  while (tmp_key.dptr) {
    tmp___1 = rbsearch((void const   *)((void *)tmp_key.dptr), db_removed);
    if (! tmp___1) {
      tmp___0 = __errno_location();
      (*tmp___0) = 12;
      db_unlock();
      return (-1);
    }
    db_gdbmlock();
    tmp_nextkey = gdbm_nextkey(db_songs, tmp_key);
    db_gdbmunlock();
    tmp_key = tmp_nextkey;
  }
  current = db_playlists.next;
  while (current) {
    current->found = 0;
    current = current->next;
  }
  db_update_mode = 1;
  db_unlock();
  return (0);
}
}
int db_end_initial_update(void) 
{ void const   *val ;
  unsigned long oldval ;
  unsigned long *oldptr ;
  DB_PLAYLIST *current ;
  DB_PLAYLIST *last ;
  DB_PLAYLISTENTRY *pple ;

  {
  err_log(9, 12U, (char *)"Initial update over.  Removing stale items\n");
  val = rblookup(7, (void const   *)((void *)0), db_removed);
  while (val) {
    oldval = (unsigned long )(*((int *)val));
    oldptr = (unsigned long *)rbdelete((void const   *)((void *)(& oldval)), db_removed);
    if (oldptr) {
      free((void *)oldptr);
    }
    db_delete(oldval);
    val = rblookup(7, (void const   *)((void *)0), db_removed);
  }
  err_log(9, 12U, (char *)"Done removing stale items\n");
  rbdestroy(db_removed);
  err_log(9, 4U, (char *)"Reorganizing db\n");
  db_writelock();
  db_gdbmlock();
  gdbm_reorganize(db_songs);
  gdbm_sync(db_songs);
  err_log(9, 4U, (char *)"Reorganize done\n");
  err_log(9, 132U, (char *)"Finding deleted static playlists\n");
  current = db_playlists.next;
  last = & db_playlists;
  while (current) {
    if (! current->found) {
      if (! current->is_smart) {
        err_log(9, 132U, (char *)"Deleting playlist %s\n", current->name);
        last->next = current->next;
        if (current->nodes) {
          db_playlist_count --;
        }
        db_version_no ++;
        while (current->nodes) {
          pple = current->nodes;
          current->nodes = pple->next;
          free((void *)pple);
        }
        if (current->name) {
          free((void *)current->name);
        }
        free((void *)current);
        current = last;
      } else {
        goto _L;
      }
    } else {
      _L: /* CIL Label */ ;
    }
    current = current->next;
  }
  db_update_mode = 0;
  db_gdbmunlock();
  db_unlock();
  return (0);
}
}
int db_is_empty(void) 
{ 

  {
  return (! db_song_count != 0);
}
}
static DB_PLAYLIST *db_playlist_find(unsigned long playlistid ) 
{ DB_PLAYLIST *current ;

  {
  current = db_playlists.next;
  while (1) {
    if (current) {
      if (! (current->id != playlistid)) {
        goto _L;
      }
    } else {
      _L: /* CIL Label */ 
      break;
    }
    current = current->next;
  }
  if (! current) {
    return ((DB_PLAYLIST *)((void *)0));
  }
  return (current);
}
}
int db_delete_playlist(unsigned long playlistid ) 
{ DB_PLAYLISTENTRY *pple ;
  DB_PLAYLIST *last ;
  DB_PLAYLIST *current ;

  {
  err_log(9, 128U, (char *)"Deleting playlist %ld\n", playlistid);
  db_writelock();
  current = db_playlists.next;
  last = & db_playlists;
  while (1) {
    if (current) {
      if (! (current->id != playlistid)) {
        goto _L;
      }
    } else {
      _L: /* CIL Label */ 
      break;
    }
    last = current;
    current = current->next;
  }
  if (! current) {
    db_unlock();
    return (-1);
  }
  last->next = current->next;
  if (current->nodes) {
    db_playlist_count --;
  }
  db_version_no ++;
  db_unlock();
  while (current->nodes) {
    pple = current->nodes;
    current->nodes = pple->next;
    free((void *)pple);
  }
  if (current->name) {
    free((void *)current->name);
  }
  free((void *)current);
  return (0);
}
}
int db_playlist_last_modified(unsigned long playlistid ) 
{ DB_PLAYLIST *plist ;
  int file_time ;

  {
  db_readlock();
  plist = db_playlist_find(playlistid);
  if (! plist) {
    db_unlock();
    return (0);
  }
  file_time = plist->file_time;
  plist->found = 1;
  db_unlock();
  return (file_time);
}
}
int db_add_playlist(unsigned long playlistid , char *name , int file_time , int is_smart ) 
{ DB_PLAYLIST *pnew ;

  {
  pnew = (DB_PLAYLIST *)malloc(sizeof(DB_PLAYLIST ));
  if (! pnew) {
    return (-1);
  }
  pnew->name = strdup((char const   *)name);
  pnew->id = playlistid;
  pnew->nodes = (struct tag_playlistentry *)((void *)0);
  pnew->last_node = (struct tag_playlistentry *)((void *)0);
  pnew->songs = 0;
  pnew->found = 1;
  pnew->file_time = file_time;
  pnew->is_smart = is_smart;
  if (! pnew->name) {
    free((void *)pnew);
    return (-1);
  }
  err_log(9, 132U, (char *)"Adding new playlist %s\n", name);
  db_writelock();
  pnew->next = db_playlists.next;
  db_playlists.next = pnew;
  db_version_no ++;
  err_log(9, 132U, (char *)"Added playlist\n");
  db_unlock();
  return (0);
}
}
int db_add_playlist_song(unsigned long playlistid , unsigned long itemid ) 
{ DB_PLAYLIST *current ;
  DB_PLAYLISTENTRY *pnew ;

  {
  pnew = (DB_PLAYLISTENTRY *)malloc(sizeof(DB_PLAYLISTENTRY ));
  if (! pnew) {
    return (-1);
  }
  pnew->id = itemid;
  pnew->next = (struct tag_playlistentry *)((void *)0);
  err_log(9, 132U, (char *)"Adding item %ld to %ld\n", itemid, playlistid);
  db_writelock();
  current = db_playlists.next;
  while (1) {
    if (current) {
      if (! (current->id != playlistid)) {
        goto _L;
      }
    } else {
      _L: /* CIL Label */ 
      break;
    }
    current = current->next;
  }
  if (! current) {
    err_log(2, 132U, (char *)"Could not find playlist attempting to add to\n");
    db_unlock();
    free((void *)pnew);
    return (-1);
  }
  if (! current->songs) {
    db_playlist_count ++;
  }
  current->songs ++;
  err_log(9, 132U, (char *)"Playlist now has %d entries\n", current->songs);
  if (current->last_node) {
    (current->last_node)->next = pnew;
  } else {
    current->nodes = pnew;
  }
  current->last_node = pnew;
  db_version_no ++;
  err_log(9, 132U, (char *)"Added playlist item\n");
  db_unlock();
  return (0);
}
}
datum *db_packrecord(MP3FILE *pmp3 ) 
{ int len ;
  datum *result ;
  MP3PACKED *ppacked ;
  int offset ;
  size_t tmp___0 ;
  size_t tmp___1 ;
  size_t tmp___3 ;
  size_t tmp___4 ;
  size_t tmp___6 ;
  size_t tmp___7 ;
  size_t tmp___9 ;
  size_t tmp___10 ;
  size_t tmp___12 ;
  size_t tmp___13 ;
  size_t tmp___15 ;
  size_t tmp___16 ;
  size_t tmp___18 ;
  size_t tmp___19 ;
  size_t tmp___21 ;
  size_t tmp___22 ;
  size_t tmp___24 ;
  size_t tmp___25 ;
  size_t tmp___27 ;
  size_t tmp___28 ;
  size_t tmp___30 ;
  size_t tmp___31 ;
  size_t tmp___33 ;
  size_t tmp___34 ;
  size_t tmp___36 ;
  size_t tmp___37 ;
  void *__s ;
  void *__s___0 ;
  union __anonunion___u_36___0 *__u ;
  __uint8_t __c ;
  void *__s___1 ;
  int tmp___40 ;
  size_t tmp___42 ;
  size_t tmp___44 ;
  size_t tmp___46 ;
  size_t tmp___48 ;
  size_t tmp___50 ;
  size_t tmp___52 ;
  size_t tmp___54 ;
  size_t tmp___56 ;
  size_t tmp___58 ;
  size_t tmp___60 ;
  size_t tmp___62 ;
  size_t tmp___64 ;
  size_t tmp___66 ;

  {
  len = (int )sizeof(MP3PACKED );
  if (pmp3->path) {
    tmp___1 = strlen((char const   *)pmp3->path);
    tmp___0 = tmp___1 + 1U;
  } else {
    tmp___0 = 1U;
  }
  len = (int )((size_t )len + tmp___0);
  if (pmp3->fname) {
    tmp___4 = strlen((char const   *)pmp3->fname);
    tmp___3 = tmp___4 + 1U;
  } else {
    tmp___3 = 1U;
  }
  len = (int )((size_t )len + tmp___3);
  if (pmp3->title) {
    tmp___7 = strlen((char const   *)pmp3->title);
    tmp___6 = tmp___7 + 1U;
  } else {
    tmp___6 = 1U;
  }
  len = (int )((size_t )len + tmp___6);
  if (pmp3->artist) {
    tmp___10 = strlen((char const   *)pmp3->artist);
    tmp___9 = tmp___10 + 1U;
  } else {
    tmp___9 = 1U;
  }
  len = (int )((size_t )len + tmp___9);
  if (pmp3->album) {
    tmp___13 = strlen((char const   *)pmp3->album);
    tmp___12 = tmp___13 + 1U;
  } else {
    tmp___12 = 1U;
  }
  len = (int )((size_t )len + tmp___12);
  if (pmp3->genre) {
    tmp___16 = strlen((char const   *)pmp3->genre);
    tmp___15 = tmp___16 + 1U;
  } else {
    tmp___15 = 1U;
  }
  len = (int )((size_t )len + tmp___15);
  if (pmp3->comment) {
    tmp___19 = strlen((char const   *)pmp3->comment);
    tmp___18 = tmp___19 + 1U;
  } else {
    tmp___18 = 1U;
  }
  len = (int )((size_t )len + tmp___18);
  if (pmp3->type) {
    tmp___22 = strlen((char const   *)pmp3->type);
    tmp___21 = tmp___22 + 1U;
  } else {
    tmp___21 = 1U;
  }
  len = (int )((size_t )len + tmp___21);
  if (pmp3->composer) {
    tmp___25 = strlen((char const   *)pmp3->composer);
    tmp___24 = tmp___25 + 1U;
  } else {
    tmp___24 = 1U;
  }
  len = (int )((size_t )len + tmp___24);
  if (pmp3->orchestra) {
    tmp___28 = strlen((char const   *)pmp3->orchestra);
    tmp___27 = tmp___28 + 1U;
  } else {
    tmp___27 = 1U;
  }
  len = (int )((size_t )len + tmp___27);
  if (pmp3->conductor) {
    tmp___31 = strlen((char const   *)pmp3->conductor);
    tmp___30 = tmp___31 + 1U;
  } else {
    tmp___30 = 1U;
  }
  len = (int )((size_t )len + tmp___30);
  if (pmp3->grouping) {
    tmp___34 = strlen((char const   *)pmp3->grouping);
    tmp___33 = tmp___34 + 1U;
  } else {
    tmp___33 = 1U;
  }
  len = (int )((size_t )len + tmp___33);
  if (pmp3->url) {
    tmp___37 = strlen((char const   *)pmp3->url);
    tmp___36 = tmp___37 + 1U;
  } else {
    tmp___36 = 1U;
  }
  len = (int )((size_t )len + tmp___36);
  result = (datum *)malloc(sizeof(datum ));
  if (! result) {
    return ((datum *)((void *)0));
  }
  result->dptr = (char *)malloc((unsigned int )len);
  result->dsize = len;
  if (! result->dptr) {
    free((void *)result);
    return ((datum *)((void *)0));
  }
  tmp___40 = __builtin_constant_p(len);
  if (tmp___40) {
    if (len <= 16) {
      if (len == 1) {
        __s___1 = (void *)result->dptr;
        (*((__uint8_t *)__s___1)) = (unsigned char)0;
      } else {
        __s___0 = (void *)result->dptr;
        __u = (union __anonunion___u_36___0 *)__s___0;
        __c = (unsigned char)0;
        switch ((int )((unsigned int )len)) {
        case 15: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_36___0 *)((void *)__u + 4);
        case 11: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_36___0 *)((void *)__u + 4);
        case 7: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_36___0 *)((void *)__u + 4);
        case 3: 
        __u->__usi = (unsigned short )((int )((unsigned short )__c) * 257);
        __u = (union __anonunion___u_36___0 *)((void *)__u + 2);
        __u->__uc = __c;
        break;
        case 14: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_36___0 *)((void *)__u + 4);
        case 10: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_36___0 *)((void *)__u + 4);
        case 6: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_36___0 *)((void *)__u + 4);
        case 2: 
        __u->__usi = (unsigned short )((int )((unsigned short )__c) * 257);
        break;
        case 13: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_36___0 *)((void *)__u + 4);
        case 9: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_36___0 *)((void *)__u + 4);
        case 5: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_36___0 *)((void *)__u + 4);
        case 1: 
        __u->__uc = __c;
        break;
        case 16: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_36___0 *)((void *)__u + 4);
        case 12: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_36___0 *)((void *)__u + 4);
        case 8: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_36___0 *)((void *)__u + 4);
        case 4: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        case 0: ;
        break;
        }
      }
    } else {
      goto _L;
    }
  } else {
    _L: /* CIL Label */ 
    __s = (void *)result->dptr;
    __builtin_memset(__s, '\000', len);
  }
  ppacked = (MP3PACKED *)result->dptr;
  ppacked->version = 8;
  ppacked->struct_size = (int )sizeof(MP3PACKED );
  ppacked->bitrate = pmp3->bitrate;
  ppacked->samplerate = pmp3->samplerate;
  ppacked->song_length = pmp3->song_length;
  ppacked->file_size = pmp3->file_size;
  ppacked->year = pmp3->year;
  ppacked->track = pmp3->track;
  ppacked->total_tracks = pmp3->total_tracks;
  ppacked->disc = pmp3->disc;
  ppacked->total_discs = pmp3->total_discs;
  ppacked->time_added = pmp3->time_added;
  ppacked->time_modified = pmp3->time_modified;
  ppacked->time_played = pmp3->time_played;
  ppacked->db_timestamp = pmp3->db_timestamp;
  ppacked->bpm = pmp3->bpm;
  ppacked->compilation = pmp3->compilation;
  ppacked->id = pmp3->id;
  if (pmp3->path) {
    tmp___42 = strlen((char const   *)pmp3->path);
    ppacked->path_len = (int )(tmp___42 + 1U);
  } else {
    ppacked->path_len = 1;
  }
  if (pmp3->fname) {
    tmp___44 = strlen((char const   *)pmp3->fname);
    ppacked->fname_len = (int )(tmp___44 + 1U);
  } else {
    ppacked->fname_len = 1;
  }
  if (pmp3->title) {
    tmp___46 = strlen((char const   *)pmp3->title);
    ppacked->title_len = (int )(tmp___46 + 1U);
  } else {
    ppacked->title_len = 1;
  }
  if (pmp3->artist) {
    tmp___48 = strlen((char const   *)pmp3->artist);
    ppacked->artist_len = (int )(tmp___48 + 1U);
  } else {
    ppacked->artist_len = 1;
  }
  if (pmp3->album) {
    tmp___50 = strlen((char const   *)pmp3->album);
    ppacked->album_len = (int )(tmp___50 + 1U);
  } else {
    ppacked->album_len = 1;
  }
  if (pmp3->genre) {
    tmp___52 = strlen((char const   *)pmp3->genre);
    ppacked->genre_len = (int )(tmp___52 + 1U);
  } else {
    ppacked->genre_len = 1;
  }
  if (pmp3->comment) {
    tmp___54 = strlen((char const   *)pmp3->comment);
    ppacked->comment_len = (int )(tmp___54 + 1U);
  } else {
    ppacked->comment_len = 1;
  }
  if (pmp3->type) {
    tmp___56 = strlen((char const   *)pmp3->type);
    ppacked->type_len = (int )(tmp___56 + 1U);
  } else {
    ppacked->type_len = 1;
  }
  if (pmp3->composer) {
    tmp___58 = strlen((char const   *)pmp3->composer);
    ppacked->composer_len = (int )(tmp___58 + 1U);
  } else {
    ppacked->composer_len = 1;
  }
  if (pmp3->orchestra) {
    tmp___60 = strlen((char const   *)pmp3->orchestra);
    ppacked->orchestra_len = (int )(tmp___60 + 1U);
  } else {
    ppacked->orchestra_len = 1;
  }
  if (pmp3->conductor) {
    tmp___62 = strlen((char const   *)pmp3->conductor);
    ppacked->conductor_len = (int )(tmp___62 + 1U);
  } else {
    ppacked->conductor_len = 1;
  }
  if (pmp3->grouping) {
    tmp___64 = strlen((char const   *)pmp3->grouping);
    ppacked->grouping_len = (int )(tmp___64 + 1U);
  } else {
    ppacked->grouping_len = 1;
  }
  if (pmp3->url) {
    tmp___66 = strlen((char const   *)pmp3->url);
    ppacked->url_len = (int )(tmp___66 + 1U);
  } else {
    ppacked->url_len = 1;
  }
  offset = 0;
  if (pmp3->path) {
    memcpy((void * __restrict  )(& ppacked->data[offset]), (void const   * __restrict  )pmp3->path,
           (unsigned int )ppacked->path_len);
  }
  offset += ppacked->path_len;
  if (pmp3->fname) {
    memcpy((void * __restrict  )(& ppacked->data[offset]), (void const   * __restrict  )pmp3->fname,
           (unsigned int )ppacked->fname_len);
  }
  offset += ppacked->fname_len;
  if (pmp3->title) {
    memcpy((void * __restrict  )(& ppacked->data[offset]), (void const   * __restrict  )pmp3->title,
           (unsigned int )ppacked->title_len);
  }
  offset += ppacked->title_len;
  if (pmp3->artist) {
    memcpy((void * __restrict  )(& ppacked->data[offset]), (void const   * __restrict  )pmp3->artist,
           (unsigned int )ppacked->artist_len);
  }
  offset += ppacked->artist_len;
  if (pmp3->album) {
    memcpy((void * __restrict  )(& ppacked->data[offset]), (void const   * __restrict  )pmp3->album,
           (unsigned int )ppacked->album_len);
  }
  offset += ppacked->album_len;
  if (pmp3->genre) {
    memcpy((void * __restrict  )(& ppacked->data[offset]), (void const   * __restrict  )pmp3->genre,
           (unsigned int )ppacked->genre_len);
  }
  offset += ppacked->genre_len;
  if (pmp3->comment) {
    memcpy((void * __restrict  )(& ppacked->data[offset]), (void const   * __restrict  )pmp3->comment,
           (unsigned int )ppacked->comment_len);
  }
  offset += ppacked->comment_len;
  if (pmp3->type) {
    memcpy((void * __restrict  )(& ppacked->data[offset]), (void const   * __restrict  )pmp3->type,
           (unsigned int )ppacked->type_len);
  }
  offset += ppacked->type_len;
  if (pmp3->composer) {
    memcpy((void * __restrict  )(& ppacked->data[offset]), (void const   * __restrict  )pmp3->composer,
           (unsigned int )ppacked->composer_len);
  }
  offset += ppacked->composer_len;
  if (pmp3->orchestra) {
    memcpy((void * __restrict  )(& ppacked->data[offset]), (void const   * __restrict  )pmp3->orchestra,
           (unsigned int )ppacked->orchestra_len);
  }
  offset += ppacked->orchestra_len;
  if (pmp3->conductor) {
    memcpy((void * __restrict  )(& ppacked->data[offset]), (void const   * __restrict  )pmp3->conductor,
           (unsigned int )ppacked->conductor_len);
  }
  offset += ppacked->conductor_len;
  if (pmp3->grouping) {
    memcpy((void * __restrict  )(& ppacked->data[offset]), (void const   * __restrict  )pmp3->grouping,
           (unsigned int )ppacked->grouping_len);
  }
  offset += ppacked->grouping_len;
  if (pmp3->url) {
    memcpy((void * __restrict  )(& ppacked->data[offset]), (void const   * __restrict  )pmp3->url,
           (unsigned int )ppacked->url_len);
  }
  offset += ppacked->url_len;
  return (result);
}
}
int db_unpackrecord(datum *pdatum , MP3FILE *pmp3 ) 
{ MP3PACKED *ppacked ;
  int offset ;
  void *__s ;
  void *__s___0 ;
  union __anonunion___u_37___0 *__u ;
  __uint8_t __c ;
  void *__s___1 ;
  int tmp ;

  {
  tmp = __builtin_constant_p(sizeof(MP3FILE ));
  if (tmp) {
    if (sizeof(MP3FILE ) <= 16U) {
      if (sizeof(MP3FILE ) == 1U) {
        __s___1 = (void *)pmp3;
        (*((__uint8_t *)__s___1)) = (unsigned char)0;
      } else {
        __s___0 = (void *)pmp3;
        __u = (union __anonunion___u_37___0 *)__s___0;
        __c = (unsigned char)0;
        switch ((int )sizeof(MP3FILE )) {
        case 15: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_37___0 *)((void *)__u + 4);
        case 11: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_37___0 *)((void *)__u + 4);
        case 7: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_37___0 *)((void *)__u + 4);
        case 3: 
        __u->__usi = (unsigned short )((int )((unsigned short )__c) * 257);
        __u = (union __anonunion___u_37___0 *)((void *)__u + 2);
        __u->__uc = __c;
        break;
        case 14: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_37___0 *)((void *)__u + 4);
        case 10: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_37___0 *)((void *)__u + 4);
        case 6: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_37___0 *)((void *)__u + 4);
        case 2: 
        __u->__usi = (unsigned short )((int )((unsigned short )__c) * 257);
        break;
        case 13: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_37___0 *)((void *)__u + 4);
        case 9: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_37___0 *)((void *)__u + 4);
        case 5: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_37___0 *)((void *)__u + 4);
        case 1: 
        __u->__uc = __c;
        break;
        case 16: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_37___0 *)((void *)__u + 4);
        case 12: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_37___0 *)((void *)__u + 4);
        case 8: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_37___0 *)((void *)__u + 4);
        case 4: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        case 0: ;
        break;
        }
      }
    } else {
      goto _L;
    }
  } else {
    _L: /* CIL Label */ 
    __s = (void *)pmp3;
    __builtin_memset(__s, '\000', (int )sizeof(MP3FILE ));
  }
  ppacked = (MP3PACKED *)pdatum->dptr;
  if (ppacked->version != 8) {
    err_log(0, 4U, (char *)"ON-DISK DATABASE VERSION HAS CHANGED\nDelete your songs.gdb and restart.\n");
  }
  pmp3->bitrate = ppacked->bitrate;
  pmp3->samplerate = ppacked->samplerate;
  pmp3->song_length = ppacked->song_length;
  pmp3->file_size = ppacked->file_size;
  pmp3->year = ppacked->year;
  pmp3->track = ppacked->track;
  pmp3->total_tracks = ppacked->total_tracks;
  pmp3->disc = ppacked->disc;
  pmp3->total_discs = ppacked->total_discs;
  pmp3->time_added = ppacked->time_added;
  pmp3->time_modified = ppacked->time_modified;
  pmp3->db_timestamp = ppacked->db_timestamp;
  pmp3->time_played = ppacked->time_played;
  pmp3->bpm = ppacked->bpm;
  pmp3->compilation = ppacked->compilation;
  pmp3->id = ppacked->id;
  offset = 0;
  if (ppacked->path_len > 1) {
    pmp3->path = strdup((char const   *)(& ppacked->data[offset]));
  }
  offset += ppacked->path_len;
  if (ppacked->fname_len > 1) {
    pmp3->fname = strdup((char const   *)(& ppacked->data[offset]));
  }
  offset += ppacked->fname_len;
  if (ppacked->title_len > 1) {
    pmp3->title = strdup((char const   *)(& ppacked->data[offset]));
  }
  offset += ppacked->title_len;
  if (ppacked->artist_len > 1) {
    pmp3->artist = strdup((char const   *)(& ppacked->data[offset]));
  }
  offset += ppacked->artist_len;
  if (ppacked->album_len > 1) {
    pmp3->album = strdup((char const   *)(& ppacked->data[offset]));
  }
  offset += ppacked->album_len;
  if (ppacked->genre_len > 1) {
    pmp3->genre = strdup((char const   *)(& ppacked->data[offset]));
  }
  offset += ppacked->genre_len;
  if (ppacked->comment_len > 1) {
    pmp3->comment = strdup((char const   *)(& ppacked->data[offset]));
  }
  offset += ppacked->comment_len;
  if (ppacked->type_len > 1) {
    pmp3->type = strdup((char const   *)(& ppacked->data[offset]));
  }
  offset += ppacked->type_len;
  if (ppacked->composer_len > 1) {
    pmp3->composer = strdup((char const   *)(& ppacked->data[offset]));
  }
  offset += ppacked->composer_len;
  if (ppacked->orchestra_len > 1) {
    pmp3->orchestra = strdup((char const   *)(& ppacked->data[offset]));
  }
  offset += ppacked->orchestra_len;
  if (ppacked->conductor_len > 1) {
    pmp3->conductor = strdup((char const   *)(& ppacked->data[offset]));
  }
  offset += ppacked->conductor_len;
  if (ppacked->grouping_len > 1) {
    pmp3->grouping = strdup((char const   *)(& ppacked->data[offset]));
  }
  offset += ppacked->grouping_len;
  if (ppacked->url_len > 1) {
    pmp3->url = strdup((char const   *)(& ppacked->data[offset]));
  }
  offset += ppacked->url_len;
  make_composite_tags(pmp3);
  return (0);
}
}
int db_add(MP3FILE *pmp3 ) 
{ datum *pnew ;
  datum dkey ;
  MP3PACKED *ppacked ;
  int new ;
  int *tmp ;
  int tmp___0 ;
  int tmp___4 ;
  char const   *tmp___5 ;

  {
  new = 1;
  err_log(9, 4U, (char *)"Adding %s\n", pmp3->path);
  pnew = db_packrecord(pmp3);
  if (! pnew) {
    tmp = __errno_location();
    (*tmp) = 12;
    return (-1);
  }
  dkey.dptr = (char *)((void *)(& pmp3->id));
  dkey.dsize = (int )sizeof(unsigned long );
  db_gdbmlock();
  tmp___0 = gdbm_exists(db_songs, dkey);
  if (tmp___0) {
    new = 0;
    err_log(9, 4U, (char *)"this is an update, not an add\n");
  }
  db_gdbmunlock();
  ppacked = (MP3PACKED *)pnew->dptr;
  if (! ppacked->time_added) {
    ppacked->time_added = (int )time((time_t *)((void *)0));
  }
  if (! ppacked->time_modified) {
    ppacked->time_modified = (int )time((time_t *)((void *)0));
  }
  ppacked->db_timestamp = (int )time((time_t *)((void *)0));
  ppacked->time_played = 0;
  db_writelock();
  db_gdbmlock();
  tmp___4 = gdbm_store(db_songs, dkey, (*pnew), 1);
  if (tmp___4) {
    db_gdbmunlock();
    err_log(0, 4U, (char *)"Error inserting file %s in database\n", pmp3->fname);
  }
  db_gdbmunlock();
  free((void *)pnew->dptr);
  free((void *)pnew);
  db_version_no ++;
  if (new) {
    db_song_count ++;
  }
  if (new) {
    tmp___5 = "Added";
  } else {
    tmp___5 = "Updated";
  }
  err_log(9, 4U, (char *)"%s file\n", tmp___5);
  db_unlock();
  return (0);
}
}
void db_dispose(MP3FILE *pmp3 ) 
{ 

  {
  if (pmp3->path) {
    free((void *)pmp3->path);
  }
  if (pmp3->fname) {
    free((void *)pmp3->fname);
  }
  if (pmp3->title) {
    free((void *)pmp3->title);
  }
  if (pmp3->artist) {
    free((void *)pmp3->artist);
  }
  if (pmp3->album) {
    free((void *)pmp3->album);
  }
  if (pmp3->genre) {
    free((void *)pmp3->genre);
  }
  if (pmp3->comment) {
    free((void *)pmp3->comment);
  }
  if (pmp3->type) {
    free((void *)pmp3->type);
  }
  if (pmp3->composer) {
    free((void *)pmp3->composer);
  }
  if (pmp3->orchestra) {
    free((void *)pmp3->orchestra);
  }
  if (pmp3->conductor) {
    free((void *)pmp3->conductor);
  }
  if (pmp3->grouping) {
    free((void *)pmp3->grouping);
  }
  if (pmp3->description) {
    free((void *)pmp3->description);
  }
  if (pmp3->url) {
    free((void *)pmp3->url);
  }
  return;
}
}
static int nullstrcmp(char const   *a , char const   *b ) 
{ int tmp ;
  size_t __s1_len ;
  size_t __s2_len ;
  int tmp___30 ;
  size_t tmp___31 ;
  register int __result___37 ;
  unsigned char const   *__s2___6 ;
  register int __result___38 ;
  int tmp___46 ;
  register int __result___45 ;
  unsigned char const   *__s1___14 ;
  register int __result___46 ;
  int tmp___53 ;
  int tmp___54 ;
  int tmp___55 ;
  int tmp___56 ;
  int tmp___57 ;
  int tmp___58 ;

  {
  if ((unsigned int )a == (unsigned int )((char const   *)0)) {
    if ((unsigned int )b == (unsigned int )((char const   *)0)) {
      tmp = 1;
    } else {
      tmp = 0;
    }
    return (tmp);
  }
  if ((unsigned int )b == (unsigned int )((char const   *)0)) {
    return (-1);
  }
  tmp___56 = __builtin_constant_p(a);
  if (tmp___56) {
    tmp___57 = __builtin_constant_p(b);
    if (tmp___57) {
      __s1_len = strlen(a);
      __s2_len = strlen(b);
      if (! ((unsigned int )((void const   *)(a + 1)) - (unsigned int )((void const   *)a) ==
             1U)) {
        goto _L___172;
      } else {
        if (__s1_len >= 4U) {
          _L___172: /* CIL Label */ 
          if (! ((unsigned int )((void const   *)(b + 1)) - (unsigned int )((void const   *)b) ==
                 1U)) {
            goto _L___171;
          } else {
            if (__s2_len >= 4U) {
              _L___171: /* CIL Label */ 
              tmp___58 = 1;
            } else {
              goto _L___170;
            }
          }
        } else {
          _L___170: /* CIL Label */ 
          tmp___58 = 0;
        }
      }
      if (tmp___58) {
        if (__s1_len < __s2_len) {
          tmp___31 = __s1_len;
        } else {
          tmp___31 = __s2_len;
        }
        tmp___30 = memcmp((void const   *)a, (void const   *)b, tmp___31 + 1U);
      } else {
        goto _L___174;
      }
    } else {
      goto _L___174;
    }
  } else {
    _L___174: /* CIL Label */ 
    tmp___55 = __builtin_constant_p(a);
    if (tmp___55) {
      if ((unsigned int )((void const   *)(a + 1)) - (unsigned int )((void const   *)a) ==
          1U) {
        __s1_len = strlen(a);
        if (__s1_len < 4U) {
          tmp___46 = __builtin_constant_p(b);
          if (tmp___46) {
            if ((unsigned int )((void const   *)(b + 1)) - (unsigned int )((void const   *)b) ==
                1U) {
              __result___37 = (int )((int const   )(*((unsigned char const   *)a +
                                                      0)) - (int const   )(*((unsigned char const   *)b +
                                                                             0)));
              if (__s1_len > 0U) {
                if (__result___37 == 0) {
                  __result___37 = (int )((int const   )(*((unsigned char const   *)a +
                                                          1)) - (int const   )(*((unsigned char const   *)b +
                                                                                 1)));
                  if (__s1_len > 1U) {
                    if (__result___37 == 0) {
                      __result___37 = (int )((int const   )(*((unsigned char const   *)a +
                                                              2)) - (int const   )(*((unsigned char const   *)b +
                                                                                     2)));
                      if (__s1_len > 2U) {
                        if (__result___37 == 0) {
                          __result___37 = (int )((int const   )(*((unsigned char const   *)a +
                                                                  3)) - (int const   )(*((unsigned char const   *)b +
                                                                                         3)));
                        } else {
                          goto _L___133;
                        }
                      } else {
                        _L___133: /* CIL Label */ ;
                      }
                    } else {
                      goto _L___134;
                    }
                  } else {
                    _L___134: /* CIL Label */ ;
                  }
                } else {
                  goto _L___135;
                }
              } else {
                _L___135: /* CIL Label */ ;
              }
              tmp___30 = __result___37;
            } else {
              goto _L___139;
            }
          } else {
            _L___139: /* CIL Label */ 
            __s2___6 = (unsigned char const   *)b;
            __result___38 = (int )((int const   )(*((unsigned char const   *)a + 0)) -
                                   (int const   )(*(__s2___6 + 0)));
            if (__s1_len > 0U) {
              if (__result___38 == 0) {
                __result___38 = (int )((int const   )(*((unsigned char const   *)a +
                                                        1)) - (int const   )(*(__s2___6 +
                                                                               1)));
                if (__s1_len > 1U) {
                  if (__result___38 == 0) {
                    __result___38 = (int )((int const   )(*((unsigned char const   *)a +
                                                            2)) - (int const   )(*(__s2___6 +
                                                                                   2)));
                    if (__s1_len > 2U) {
                      if (__result___38 == 0) {
                        __result___38 = (int )((int const   )(*((unsigned char const   *)a +
                                                                3)) - (int const   )(*(__s2___6 +
                                                                                       3)));
                      } else {
                        goto _L___136;
                      }
                    } else {
                      _L___136: /* CIL Label */ ;
                    }
                  } else {
                    goto _L___137;
                  }
                } else {
                  _L___137: /* CIL Label */ ;
                }
              } else {
                goto _L___138;
              }
            } else {
              _L___138: /* CIL Label */ ;
            }
            tmp___30 = __result___38;
          }
        } else {
          goto _L___169;
        }
      } else {
        goto _L___169;
      }
    } else {
      _L___169: /* CIL Label */ 
      tmp___54 = __builtin_constant_p(b);
      if (tmp___54) {
        if ((unsigned int )((void const   *)(b + 1)) - (unsigned int )((void const   *)b) ==
            1U) {
          __s2_len = strlen(b);
          if (__s2_len < 4U) {
            tmp___53 = __builtin_constant_p(a);
            if (tmp___53) {
              if ((unsigned int )((void const   *)(a + 1)) - (unsigned int )((void const   *)a) ==
                  1U) {
                __result___45 = (int )((int const   )(*((unsigned char const   *)a +
                                                        0)) - (int const   )(*((unsigned char const   *)b +
                                                                               0)));
                if (__s2_len > 0U) {
                  if (__result___45 == 0) {
                    __result___45 = (int )((int const   )(*((unsigned char const   *)a +
                                                            1)) - (int const   )(*((unsigned char const   *)b +
                                                                                   1)));
                    if (__s2_len > 1U) {
                      if (__result___45 == 0) {
                        __result___45 = (int )((int const   )(*((unsigned char const   *)a +
                                                                2)) - (int const   )(*((unsigned char const   *)b +
                                                                                       2)));
                        if (__s2_len > 2U) {
                          if (__result___45 == 0) {
                            __result___45 = (int )((int const   )(*((unsigned char const   *)a +
                                                                    3)) - (int const   )(*((unsigned char const   *)b +
                                                                                           3)));
                          } else {
                            goto _L___159;
                          }
                        } else {
                          _L___159: /* CIL Label */ ;
                        }
                      } else {
                        goto _L___160;
                      }
                    } else {
                      _L___160: /* CIL Label */ ;
                    }
                  } else {
                    goto _L___161;
                  }
                } else {
                  _L___161: /* CIL Label */ ;
                }
                tmp___30 = __result___45;
              } else {
                goto _L___165;
              }
            } else {
              _L___165: /* CIL Label */ 
              __s1___14 = (unsigned char const   *)a;
              __result___46 = (int )((int const   )(*(__s1___14 + 0)) - (int const   )(*((unsigned char const   *)b +
                                                                                         0)));
              if (__s2_len > 0U) {
                if (__result___46 == 0) {
                  __result___46 = (int )((int const   )(*(__s1___14 + 1)) - (int const   )(*((unsigned char const   *)b +
                                                                                             1)));
                  if (__s2_len > 1U) {
                    if (__result___46 == 0) {
                      __result___46 = (int )((int const   )(*(__s1___14 + 2)) - (int const   )(*((unsigned char const   *)b +
                                                                                                 2)));
                      if (__s2_len > 2U) {
                        if (__result___46 == 0) {
                          __result___46 = (int )((int const   )(*(__s1___14 + 3)) -
                                                 (int const   )(*((unsigned char const   *)b +
                                                                  3)));
                        } else {
                          goto _L___162;
                        }
                      } else {
                        _L___162: /* CIL Label */ ;
                      }
                    } else {
                      goto _L___163;
                    }
                  } else {
                    _L___163: /* CIL Label */ ;
                  }
                } else {
                  goto _L___164;
                }
              } else {
                _L___164: /* CIL Label */ ;
              }
              tmp___30 = __result___46;
            }
          } else {
            goto _L___167;
          }
        } else {
          goto _L___167;
        }
      } else {
        _L___167: /* CIL Label */ 
        tmp___30 = strcmp(a, b);
      }
    }
  }
  return (tmp___30);
}
}
int compare(MP3RECORD *a , MP3RECORD *b ) 
{ int comp ;

  {
  comp = nullstrcmp((char const   *)a->mp3file.album, (char const   *)b->mp3file.album);
  if (comp != 0) {
    return (comp);
  }
  comp = a->mp3file.disc - b->mp3file.disc;
  if (comp != 0) {
    return (comp);
  }
  comp = a->mp3file.track - b->mp3file.track;
  if (comp != 0) {
    return (comp);
  }
  return ((int )(a->mp3file.id - b->mp3file.id));
}
}
ENUMHANDLE db_enum_begin(void) 
{ datum *pkey ;

  {
  pkey = (datum *)malloc(sizeof(datum ));
  if (! pkey) {
    return ((void *)0);
  }
  db_writelock();
  if (gdbm_mp3_mustfree) {
    db_dispose(& gdbm_mp3);
  }
  gdbm_mp3_mustfree = 0;
  db_gdbmlock();
  (*pkey) = gdbm_firstkey(db_songs);
  db_gdbmunlock();
  return ((void *)pkey);
}
}
MP3FILE *db_enum(ENUMHANDLE *current ) 
{ datum *pkey ;
  datum next ;
  datum data ;
  int tmp ;

  {
  pkey = (datum *)(*current);
  if (gdbm_mp3_mustfree) {
    db_dispose(& gdbm_mp3);
  }
  gdbm_mp3_mustfree = 0;
  if (pkey->dptr) {
    db_gdbmlock();
    data = gdbm_fetch(db_songs, (*pkey));
    db_gdbmunlock();
    if (! data.dptr) {
      err_log(0, 4U, (char *)"Cannot find item.... corrupt database?\n");
    }
    tmp = db_unpackrecord(& data, & gdbm_mp3);
    if (tmp) {
      err_log(0, 4U, (char *)"Cannot unpack item... corrupt database?\n");
    }
    gdbm_mp3_mustfree = 1;
    free((void *)data.dptr);
    db_gdbmlock();
    next = gdbm_nextkey(db_songs, (*pkey));
    db_gdbmunlock();
    free((void *)pkey->dptr);
    (*pkey) = next;
    return (& gdbm_mp3);
  }
  return ((MP3FILE *)((void *)0));
}
}
int db_enum_end(ENUMHANDLE handle ) 
{ datum *pkey ;

  {
  pkey = (datum *)handle;
  if (gdbm_mp3_mustfree) {
    db_dispose(& gdbm_mp3);
  }
  gdbm_mp3_mustfree = 0;
  if (pkey->dptr) {
    free((void *)pkey->dptr);
  }
  db_unlock();
  free((void *)pkey);
  return (0);
}
}
ENUMHANDLE db_playlist_enum_begin(void) 
{ DB_PLAYLIST *current ;

  {
  db_readlock();
  current = db_playlists.next;
  while (1) {
    if (current) {
      if (! (! current->songs)) {
        goto _L;
      }
    } else {
      _L: /* CIL Label */ 
      break;
    }
    current = current->next;
  }
  return ((void *)current);
}
}
ENUMHANDLE db_playlist_items_enum_begin(unsigned long playlistid ) 
{ DB_PLAYLIST *current ;

  {
  db_readlock();
  current = db_playlists.next;
  while (1) {
    if (current) {
      if (! (current->id != playlistid)) {
        goto _L;
      }
    } else {
      _L: /* CIL Label */ 
      break;
    }
    current = current->next;
  }
  if (! current) {
    return ((void *)0);
  }
  return ((void *)current->nodes);
}
}
int db_playlist_enum(ENUMHANDLE *handle ) 
{ DB_PLAYLIST **current ;
  int retval ;
  DB_PLAYLIST *p ;

  {
  current = (DB_PLAYLIST **)handle;
  if ((*current)) {
    retval = (int )((*current))->id;
    p = (*current);
    p = p->next;
    while (1) {
      if (p) {
        if (! (! p->songs)) {
          goto _L;
        }
      } else {
        _L: /* CIL Label */ 
        break;
      }
      p = p->next;
    }
    (*current) = p;
    return (retval);
  }
  return (-1);
}
}
int db_playlist_items_enum(ENUMHANDLE *handle ) 
{ DB_PLAYLISTENTRY **current ;
  int retval ;

  {
  if (! handle) {
    return (-1);
  }
  current = (DB_PLAYLISTENTRY **)handle;
  if ((*current)) {
    retval = (int )((*current))->id;
    (*current) = ((*current))->next;
    return (retval);
  }
  return (-1);
}
}
int db_playlist_enum_end(ENUMHANDLE handle ) 
{ int tmp ;

  {
  tmp = db_unlock();
  return (tmp);
}
}
int db_playlist_items_enum_end(ENUMHANDLE handle ) 
{ int tmp ;

  {
  tmp = db_unlock();
  return (tmp);
}
}
MP3FILE *db_find(unsigned long id ) 
{ MP3FILE *pmp3 ;
  datum key ;
  datum content ;

  {
  pmp3 = (MP3FILE *)((void *)0);
  key.dptr = (char *)((void *)(& id));
  key.dsize = (int )sizeof(unsigned long );
  db_readlock();
  db_gdbmlock();
  content = gdbm_fetch(db_songs, key);
  db_gdbmunlock();
  if (! content.dptr) {
    err_log(9, 4U, (char *)"Could not find id %ld\n", id);
    db_unlock();
    return ((MP3FILE *)((void *)0));
  }
  pmp3 = (MP3FILE *)malloc(sizeof(MP3FILE ));
  if (! pmp3) {
    err_log(1, 2147483648U, (char *)"Malloc failed in db_find\n");
    db_unlock();
    return ((MP3FILE *)((void *)0));
  }
  db_unlock();
  db_unpackrecord(& content, pmp3);
  free((void *)content.dptr);
  return (pmp3);
}
}
int db_get_playlist_count(void) 
{ int retval ;

  {
  db_readlock();
  retval = db_playlist_count;
  db_unlock();
  return (retval);
}
}
int db_get_song_count(void) 
{ int retval ;

  {
  db_readlock();
  retval = db_song_count;
  db_unlock();
  return (retval);
}
}
int db_get_playlist_is_smart(unsigned long playlistid ) 
{ DB_PLAYLIST *current ;
  int result ;

  {
  db_readlock();
  current = db_playlists.next;
  while (1) {
    if (current) {
      if (! (current->id != playlistid)) {
        goto _L;
      }
    } else {
      _L: /* CIL Label */ 
      break;
    }
    current = current->next;
  }
  if (! current) {
    result = 0;
  } else {
    result = current->is_smart;
  }
  db_unlock();
  return (result);
}
}
int db_get_playlist_entry_count(unsigned long playlistid ) 
{ int count ;
  DB_PLAYLIST *current ;

  {
  db_readlock();
  current = db_playlists.next;
  while (1) {
    if (current) {
      if (! (current->id != playlistid)) {
        goto _L;
      }
    } else {
      _L: /* CIL Label */ 
      break;
    }
    current = current->next;
  }
  if (! current) {
    count = -1;
  } else {
    count = current->songs;
  }
  db_unlock();
  return (count);
}
}
char *db_get_playlist_name(unsigned long playlistid ) 
{ char *name ;
  DB_PLAYLIST *current ;

  {
  db_readlock();
  current = db_playlists.next;
  while (1) {
    if (current) {
      if (! (current->id != playlistid)) {
        goto _L;
      }
    } else {
      _L: /* CIL Label */ 
      break;
    }
    current = current->next;
  }
  if (! current) {
    name = (char *)((void *)0);
  } else {
    name = current->name;
  }
  db_unlock();
  return (name);
}
}
int db_exists(unsigned long id ) 
{ unsigned long *node ;
  datum key ;
  datum content ;

  {
  err_log(9, 4U, (char *)"Checking if node %lu in db\n", id);
  key.dptr = (char *)((void *)(& id));
  key.dsize = (int )sizeof(unsigned long );
  db_readlock();
  db_gdbmlock();
  content = gdbm_fetch(db_songs, key);
  db_gdbmunlock();
  if (! content.dptr) {
    err_log(9, 4U, (char *)"Nope!  Not in DB\n");
    db_unlock();
    return (0);
  }
  if (db_update_mode) {
    node = (unsigned long *)rbdelete((void const   *)((void *)(& id)), db_removed);
    if (node) {
      err_log(9, 4U, (char *)"Knocked node %lu from the list\n", (*node));
      free((void *)node);
    }
  }
  db_unlock();
  free((void *)content.dptr);
  err_log(9, 4U, (char *)"Yup, in database\n");
  return (1);
}
}
int db_last_modified(unsigned long id ) 
{ int retval ;
  MP3FILE *pmp3 ;

  {
  pmp3 = db_find(id);
  if (! pmp3) {
    retval = 0;
  } else {
    retval = pmp3->db_timestamp;
  }
  if (pmp3) {
    db_dispose(pmp3);
    free((void *)pmp3);
  }
  return (retval);
}
}
int db_delete(unsigned long id ) 
{ datum key ;
  DB_PLAYLIST *pcurrent ;
  DB_PLAYLISTENTRY *phead ;
  DB_PLAYLISTENTRY *ptail ;
  int tmp ;

  {
  err_log(9, 4U, (char *)"Removing item %lu\n", id);
  tmp = db_exists(id);
  if (tmp) {
    db_writelock();
    key.dptr = (char *)((void *)(& id));
    key.dsize = (int )sizeof(unsigned long );
    db_gdbmlock();
    gdbm_delete(db_songs, key);
    db_gdbmunlock();
    db_song_count --;
    db_version_no ++;
    pcurrent = db_playlists.next;
    while (pcurrent) {
      ptail = pcurrent->nodes;
      phead = ptail;
      while (1) {
        if (phead) {
          if (! (phead->id != id)) {
            goto _L;
          }
        } else {
          _L: /* CIL Label */ 
          break;
        }
        ptail = phead;
        phead = phead->next;
      }
      if (phead) {
        err_log(9, 132U, (char *)"Removing from playlist %lu\n", pcurrent->id);
        if ((unsigned int )phead == (unsigned int )pcurrent->nodes) {
          pcurrent->nodes = phead->next;
        } else {
          ptail->next = phead->next;
        }
        if ((unsigned int )pcurrent->last_node == (unsigned int )phead) {
          pcurrent->last_node = ptail;
        }
        free((void *)phead);
        if ((unsigned int )pcurrent->nodes == (unsigned int )((void *)0)) {
          pcurrent->last_node = (struct tag_playlistentry *)((void *)0);
          err_log(9, 132U, (char *)"Empty Playlist!\n");
          db_playlist_count --;
        }
      }
      pcurrent = pcurrent->next;
    }
    db_version_no ++;
    db_unlock();
  }
  return (0);
}
}
#pragma merger(0,"/tmp/cil-xYm2HixJ.i","-g -g -O2")
extern unsigned short const   **__ctype_b_loc(void)  __attribute__((__const__)) ;
extern int ferror(FILE *__stream ) ;
extern char *strrchr(char const   *__s , int __c )  __attribute__((__pure__)) ;
extern DIR *opendir(char const   *__name ) ;
extern int closedir(DIR *__dirp ) ;
extern int readdir_r(DIR * __restrict  __dirp , struct dirent * __restrict  __entry ,
                     struct dirent ** __restrict  __result ) ;
off_t aac_drilltoatom(FILE *aac_fp , char *atom_path , unsigned int *atom_length ) ;
int scan_br_table[5][16]  = { {        0,        32,        64,        96, 
            128,        160,        192,        224, 
            256,        288,        320,        352, 
            384,        416,        448,        0}, 
   {        0,        32,        48,        56, 
            64,        80,        96,        112, 
            128,        160,        192,        224, 
            256,        320,        384,        0}, 
   {        0,        32,        40,        48, 
            56,        64,        80,        96, 
            112,        128,        160,        192, 
            224,        256,        320,        0}, 
   {        0,        32,        48,        56, 
            64,        80,        96,        112, 
            128,        144,        160,        176, 
            192,        224,        256,        0}, 
   {        0,        8,        16,        24, 
            32,        40,        48,        56, 
            64,        80,        96,        112, 
            128,        144,        160,        0}};
int scan_sample_table[3][4]  = { {        44100,        48000,        32000,        0}, 
   {        22050,        24000,        16000,        0}, 
   {        11025,        12000,        8000,        0}};
int scan_mode_foreground  =    1;
char *scan_winamp_genre[149]  = 
  {      (char *)"Blues",      (char *)"Classic Rock",      (char *)"Country",      (char *)"Dance", 
        (char *)"Disco",      (char *)"Funk",      (char *)"Grunge",      (char *)"Hip-Hop", 
        (char *)"Jazz",      (char *)"Metal",      (char *)"New Age",      (char *)"Oldies", 
        (char *)"Other",      (char *)"Pop",      (char *)"R&B",      (char *)"Rap", 
        (char *)"Reggae",      (char *)"Rock",      (char *)"Techno",      (char *)"Industrial", 
        (char *)"Alternative",      (char *)"Ska",      (char *)"Death Metal",      (char *)"Pranks", 
        (char *)"Soundtrack",      (char *)"Euro-Techno",      (char *)"Ambient",      (char *)"Trip-Hop", 
        (char *)"Vocal",      (char *)"Jazz+Funk",      (char *)"Fusion",      (char *)"Trance", 
        (char *)"Classical",      (char *)"Instrumental",      (char *)"Acid",      (char *)"House", 
        (char *)"Game",      (char *)"Sound Clip",      (char *)"Gospel",      (char *)"Noise", 
        (char *)"AlternRock",      (char *)"Bass",      (char *)"Soul",      (char *)"Punk", 
        (char *)"Space",      (char *)"Meditative",      (char *)"Instrumental Pop",      (char *)"Instrumental Rock", 
        (char *)"Ethnic",      (char *)"Gothic",      (char *)"Darkwave",      (char *)"Techno-Industrial", 
        (char *)"Electronic",      (char *)"Pop-Folk",      (char *)"Eurodance",      (char *)"Dream", 
        (char *)"Southern Rock",      (char *)"Comedy",      (char *)"Cult",      (char *)"Gangsta", 
        (char *)"Top 40",      (char *)"Christian Rap",      (char *)"Pop/Funk",      (char *)"Jungle", 
        (char *)"Native American",      (char *)"Cabaret",      (char *)"New Wave",      (char *)"Psychadelic", 
        (char *)"Rave",      (char *)"Showtunes",      (char *)"Trailer",      (char *)"Lo-Fi", 
        (char *)"Tribal",      (char *)"Acid Punk",      (char *)"Acid Jazz",      (char *)"Polka", 
        (char *)"Retro",      (char *)"Musical",      (char *)"Rock & Roll",      (char *)"Hard Rock", 
        (char *)"Folk",      (char *)"Folk/Rock",      (char *)"National folk",      (char *)"Swing", 
        (char *)"Fast-fusion",      (char *)"Bebob",      (char *)"Latin",      (char *)"Revival", 
        (char *)"Celtic",      (char *)"Bluegrass",      (char *)"Avantgarde",      (char *)"Gothic Rock", 
        (char *)"Progressive Rock",      (char *)"Psychedelic Rock",      (char *)"Symphonic Rock",      (char *)"Slow Rock", 
        (char *)"Big Band",      (char *)"Chorus",      (char *)"Easy Listening",      (char *)"Acoustic", 
        (char *)"Humour",      (char *)"Speech",      (char *)"Chanson",      (char *)"Opera", 
        (char *)"Chamber Music",      (char *)"Sonata",      (char *)"Symphony",      (char *)"Booty Bass", 
        (char *)"Primus",      (char *)"Porn Groove",      (char *)"Satire",      (char *)"Slow Jam", 
        (char *)"Club",      (char *)"Tango",      (char *)"Samba",      (char *)"Folklore", 
        (char *)"Ballad",      (char *)"Powder Ballad",      (char *)"Rhythmic Soul",      (char *)"Freestyle", 
        (char *)"Duet",      (char *)"Punk Rock",      (char *)"Drum Solo",      (char *)"A Capella", 
        (char *)"Euro-House",      (char *)"Dance Hall",      (char *)"Goa",      (char *)"Drum & Bass", 
        (char *)"Club House",      (char *)"Hardcore",      (char *)"Terror",      (char *)"Indie", 
        (char *)"BritPop",      (char *)"NegerPunk",      (char *)"Polsk Punk",      (char *)"Beat", 
        (char *)"Christian Gangsta",      (char *)"Heavy Metal",      (char *)"Black Metal",      (char *)"Crossover", 
        (char *)"Contemporary C",      (char *)"Christian Rock",      (char *)"Merengue",      (char *)"Salsa", 
        (char *)"Thrash Metal",      (char *)"Anime",      (char *)"JPop",      (char *)"SynthPop", 
        (char *)"Unknown"};
static int scan_path(char *path ) ;
static int scan_gettags(char *file , MP3FILE *pmp3 ) ;
static int scan_get_mp3tags(char *file , MP3FILE *pmp3 ) ;
static int scan_get_aactags(char *file , MP3FILE *pmp3 ) ;
static int scan_get_nultags(char *file , MP3FILE *pmp3 ) 
{ 

  {
  return (0);
}
}
static int scan_get_fileinfo(char *file , MP3FILE *pmp3 ) ;
static int scan_get_mp3fileinfo(char *file , MP3FILE *pmp3 ) ;
static int scan_get_aacfileinfo(char *file , MP3FILE *pmp3 ) ;
static int scan_get_urlfileinfo(char *file , MP3FILE *pmp3 ) ;
static int scan_freetags(MP3FILE *pmp3 ) ;
static void scan_static_playlist(char *path , struct dirent *pde , struct stat *psb ) ;
static void scan_music_file(char *path , struct dirent *pde , struct stat *psb ) ;
static int scan_decode_mp3_frame(unsigned char *frame , SCAN_FRAMEINFO *pfi ) ;
static time_t mac_to_unix_time(int t ) ;
static taghandler taghandlers[7]  = {      {(char *)"aac", & scan_get_aactags, & scan_get_aacfileinfo}, 
        {(char *)"mp4", & scan_get_aactags, & scan_get_aacfileinfo}, 
        {(char *)"m4a", & scan_get_aactags, & scan_get_aacfileinfo}, 
        {(char *)"m4p", & scan_get_aactags, & scan_get_aacfileinfo}, 
        {(char *)"mp3", & scan_get_mp3tags, & scan_get_mp3fileinfo}, 
        {(char *)"url", & scan_get_nultags, & scan_get_urlfileinfo}, 
        {(char *)((void *)0), (int (*)(char *file , MP3FILE *pmp3 ))0, (int (*)(char *file ,
                                                                             MP3FILE *pmp3 ))0}};
static time_t mac_to_unix_time(int t ) 
{ struct timeval tv ;
  struct timezone tz ;

  {
  gettimeofday((struct timeval * __restrict  )(& tv), (struct timezone * __restrict  )(& tz));
  return (((long )t - 2082844800L) + (long )(tz.tz_minuteswest * 60));
}
}
int scan_init(char *path ) 
{ int err ;
  int tmp ;
  int tmp___0 ;
  char const   *tmp___1 ;
  int tmp___2 ;

  {
  scan_mode_foreground = 0;
  tmp = db_is_empty();
  if (tmp) {
    scan_mode_foreground = 1;
  }
  tmp___0 = db_start_initial_update();
  if (tmp___0) {
    return (-1);
  }
  if (scan_mode_foreground) {
    tmp___1 = "Foreground";
  } else {
    tmp___1 = "Background";
  }
  err_log(9, 8U, (char *)"%s scanning for MP3s in %s\n", tmp___1, path);
  err = scan_path(path);
  tmp___2 = db_end_initial_update();
  if (tmp___2) {
    return (-1);
  }
  scan_mode_foreground = 0;
  return (err);
}
}
extern int ( /* missing proto */  strcasestr)() ;
static int scan_path(char *path ) 
{ DIR *current_dir ;
  char de[(int )((sizeof(struct dirent ) + 255U) + 1U)] ;
  struct dirent *pde ;
  int err ;
  char mp3_path[4096] ;
  struct stat sb ;
  int modified_time ;
  int *tmp ;
  char *tmp___0 ;
  int *tmp___1 ;
  int *tmp___2 ;
  int *tmp___3 ;
  char *tmp___4 ;
  int tmp___5 ;
  int tmp___6 ;
  int tmp___7 ;
  size_t tmp___8 ;
  int tmp___9 ;
  size_t tmp___10 ;
  int tmp___11 ;
  size_t tmp___12 ;
  int tmp___13 ;

  {
  current_dir = opendir((char const   *)path);
  if ((unsigned int )current_dir == (unsigned int )((void *)0)) {
    return (-1);
  }
  while (1) {
    if (config.stop) {
      err_log(2, 8U, (char *)"Stop detected.  Aborting scan of %s.\n", path);
      closedir(current_dir);
      return (0);
    }
    pde = (struct dirent *)(& de);
    err = readdir_r((DIR * __restrict  )current_dir, (struct dirent * __restrict  )((struct dirent *)(de)),
                    (struct dirent ** __restrict  )(& pde));
    if (err == -1) {
      tmp = __errno_location();
      tmp___0 = strerror((*tmp));
      err_log(9, 8U, (char *)"Error on readdir_r: %s\n", tmp___0);
      tmp___1 = __errno_location();
      err = (*tmp___1);
      closedir(current_dir);
      tmp___2 = __errno_location();
      (*tmp___2) = err;
      return (-1);
    }
    if (! pde) {
      break;
    }
    if ((int )pde->d_name[0] == 46) {
      continue;
    }
    snprintf((char * __restrict  )(mp3_path), 4096U, (char const   * __restrict  )"%s/%s",
             path, pde->d_name);
    err_log(9, 8U, (char *)"Found %s\n", mp3_path);
    tmp___13 = stat__extinline((char const   *)(mp3_path), & sb);
    if (tmp___13) {
      tmp___3 = __errno_location();
      tmp___4 = strerror((*tmp___3));
      err_log(2, 8U, (char *)"Error statting: %s\n", tmp___4);
    } else {
      if (sb.st_mode & 16384U) {
        err_log(9, 8U, (char *)"Found dir %s... recursing\n", pde->d_name);
        scan_path(mp3_path);
      } else {
        tmp___12 = strlen((char const   *)(pde->d_name));
        if (tmp___12 > 4U) {
          tmp___10 = strlen((char const   *)(pde->d_name));
          tmp___11 = strcasecmp(".m3u", (char const   *)(& pde->d_name[tmp___10 -
                                                                       4U]));
          if (tmp___11 == 0) {
            if (config.process_m3u) {
              scan_static_playlist(path, pde, & sb);
            } else {
              goto _L___1;
            }
          } else {
            _L___1: /* CIL Label */ 
            tmp___8 = strlen((char const   *)(pde->d_name));
            tmp___9 = strcasestr(config.extensions, & pde->d_name[tmp___8 - 4U]);
            if (tmp___9) {
              modified_time = (int )sb.st_mtim.tv_sec;
              err_log(9, 8U, (char *)"FS Mod time: %d\n", modified_time);
              tmp___5 = db_last_modified(sb.st_ino);
              err_log(9, 8U, (char *)"DB Mod time: %d\n", tmp___5);
              if (scan_mode_foreground) {
                goto _L___0;
              } else {
                tmp___6 = db_exists(sb.st_ino);
                if (tmp___6) {
                  tmp___7 = db_last_modified(sb.st_ino);
                  if (tmp___7 < modified_time) {
                    _L: /* CIL Label */ 
                    scan_music_file(path, pde, & sb);
                  } else {
                    err_log(9, 8U, (char *)"Skipping file... not modified\n");
                  }
                } else {
                  _L___0: /* CIL Label */ 
                  goto _L;
                }
              }
            }
          }
        }
      }
    }
  }
  closedir(current_dir);
  return (0);
}
}
static void scan_static_playlist(char *path , struct dirent *pde , struct stat *psb ) 
{ char playlist_path[4096] ;
  char m3u_path[4096] ;
  char linebuffer[4096] ;
  int fd ;
  int playlistid ;
  struct stat sb ;
  int tmp ;
  size_t tmp___0 ;
  void *__s ;
  void *__s___0 ;
  union __anonunion___u_48 *__u ;
  __uint8_t __c ;
  void *__s___1 ;
  int tmp___1 ;
  size_t tmp___2 ;
  size_t tmp___3 ;
  size_t tmp___4 ;
  int *tmp___5 ;
  char *tmp___6 ;
  int tmp___7 ;
  int tmp___8 ;

  {
  err_log(2, 136U, (char *)"Processing static playlist: %s\n", pde->d_name);
  tmp = db_playlist_last_modified(psb->st_ino);
  if ((__time_t )tmp == psb->st_mtim.tv_sec) {
    return;
  }
  db_delete_playlist(psb->st_ino);
  strcpy((char * __restrict  )(m3u_path), (char const   * __restrict  )(pde->d_name));
  snprintf((char * __restrict  )(playlist_path), sizeof(playlist_path), (char const   * __restrict  )"%s/%s",
           path, pde->d_name);
  tmp___0 = strlen((char const   *)(pde->d_name));
  m3u_path[tmp___0 - 4U] = (char )'\000';
  playlistid = (int )psb->st_ino;
  fd = open((char const   *)(playlist_path), 0);
  if (fd != -1) {
    db_add_playlist((unsigned long )playlistid, m3u_path, (int )psb->st_mtim.tv_sec,
                    0);
    err_log(5, 136U, (char *)"Added playlist as id %d\n", playlistid);
    tmp___1 = __builtin_constant_p(sizeof(linebuffer));
    if (tmp___1) {
      if (sizeof(linebuffer) <= 16U) {
        if (sizeof(linebuffer) == 1U) {
          __s___1 = (void *)(linebuffer);
          (*((__uint8_t *)__s___1)) = (unsigned char)0;
        } else {
          __s___0 = (void *)(linebuffer);
          __u = (union __anonunion___u_48 *)__s___0;
          __c = (unsigned char)0;
          switch ((int )sizeof(linebuffer)) {
          case 15: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          __u = (union __anonunion___u_48 *)((void *)__u + 4);
          case 11: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          __u = (union __anonunion___u_48 *)((void *)__u + 4);
          case 7: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          __u = (union __anonunion___u_48 *)((void *)__u + 4);
          case 3: 
          __u->__usi = (unsigned short )((int )((unsigned short )__c) * 257);
          __u = (union __anonunion___u_48 *)((void *)__u + 2);
          __u->__uc = __c;
          break;
          case 14: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          __u = (union __anonunion___u_48 *)((void *)__u + 4);
          case 10: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          __u = (union __anonunion___u_48 *)((void *)__u + 4);
          case 6: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          __u = (union __anonunion___u_48 *)((void *)__u + 4);
          case 2: 
          __u->__usi = (unsigned short )((int )((unsigned short )__c) * 257);
          break;
          case 13: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          __u = (union __anonunion___u_48 *)((void *)__u + 4);
          case 9: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          __u = (union __anonunion___u_48 *)((void *)__u + 4);
          case 5: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          __u = (union __anonunion___u_48 *)((void *)__u + 4);
          case 1: 
          __u->__uc = __c;
          break;
          case 16: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          __u = (union __anonunion___u_48 *)((void *)__u + 4);
          case 12: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          __u = (union __anonunion___u_48 *)((void *)__u + 4);
          case 8: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          __u = (union __anonunion___u_48 *)((void *)__u + 4);
          case 4: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          case 0: ;
          break;
          }
        }
      } else {
        goto _L;
      }
    } else {
      _L: /* CIL Label */ 
      __s = (void *)(linebuffer);
      __builtin_memset(__s, '\000', (int )sizeof(linebuffer));
    }
    while (1) {
      tmp___8 = readline(fd, linebuffer, (int )sizeof(linebuffer));
      if (! (tmp___8 > 0)) {
        break;
      }
      while (1) {
        tmp___3 = strlen((char const   *)(linebuffer));
        if ((int )linebuffer[tmp___3 - 1U] == 10) {
          goto _L___0;
        } else {
          tmp___4 = strlen((char const   *)(linebuffer));
          if ((int )linebuffer[tmp___4 - 1U] == 13) {
            _L___0: /* CIL Label */ ;
          } else {
            break;
          }
        }
        tmp___2 = strlen((char const   *)(linebuffer));
        linebuffer[tmp___2 - 1U] = (char )'\000';
      }
      if ((int )linebuffer[0] == 59) {
        goto _L___1;
      } else {
        if ((int )linebuffer[0] == 35) {
          _L___1: /* CIL Label */ 
          continue;
        }
      }
      if ((int )linebuffer[0] == 47) {
        strcpy((char * __restrict  )(m3u_path), (char const   * __restrict  )(linebuffer));
      } else {
        snprintf((char * __restrict  )(m3u_path), sizeof(m3u_path), (char const   * __restrict  )"%s/%s",
                 path, linebuffer);
      }
      err_log(9, 136U, (char *)"Checking %s\n", m3u_path);
      tmp___7 = stat__extinline((char const   *)(m3u_path), & sb);
      if (tmp___7) {
        tmp___5 = __errno_location();
        tmp___6 = strerror((*tmp___5));
        err_log(2, 136U, (char *)"Playlist entry %s bad: %s\n", m3u_path, tmp___6);
      } else {
        db_add_playlist_song((unsigned long )playlistid, sb.st_ino);
      }
    }
    close(fd);
  }
  err_log(2, 136U, (char *)"Done processing playlist\n");
  return;
}
}
static void scan_music_file(char *path , struct dirent *pde , struct stat *psb ) 
{ MP3FILE mp3file ;
  char mp3_path[4096] ;
  void *__s ;
  void *__s___0 ;
  union __anonunion___u_49 *__u ;
  __uint8_t __c ;
  void *__s___1 ;
  int tmp ;
  size_t __len___2 ;
  char *tmp___29 ;
  size_t tmp___30 ;
  char *__retval___2 ;
  char *tmp___31 ;
  char *tmp___32 ;
  char *tmp___34 ;
  char *tmp___35 ;
  char *tmp___36 ;
  int tmp___37 ;
  char *tmp___38 ;
  char *tmp___39 ;
  size_t tmp___40 ;
  int tmp___41 ;
  int tmp___42 ;

  {
  snprintf((char * __restrict  )(mp3_path), sizeof(mp3_path), (char const   * __restrict  )"%s/%s",
           path, pde->d_name);
  err_log(5, 8U, (char *)"Found music file: %s\n", pde->d_name);
  tmp = __builtin_constant_p(sizeof(mp3file));
  if (tmp) {
    if (sizeof(mp3file) <= 16U) {
      if (sizeof(mp3file) == 1U) {
        __s___1 = (void *)(& mp3file);
        (*((__uint8_t *)__s___1)) = (unsigned char)0;
      } else {
        __s___0 = (void *)(& mp3file);
        __u = (union __anonunion___u_49 *)__s___0;
        __c = (unsigned char)0;
        switch ((int )sizeof(mp3file)) {
        case 15: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_49 *)((void *)__u + 4);
        case 11: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_49 *)((void *)__u + 4);
        case 7: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_49 *)((void *)__u + 4);
        case 3: 
        __u->__usi = (unsigned short )((int )((unsigned short )__c) * 257);
        __u = (union __anonunion___u_49 *)((void *)__u + 2);
        __u->__uc = __c;
        break;
        case 14: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_49 *)((void *)__u + 4);
        case 10: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_49 *)((void *)__u + 4);
        case 6: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_49 *)((void *)__u + 4);
        case 2: 
        __u->__usi = (unsigned short )((int )((unsigned short )__c) * 257);
        break;
        case 13: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_49 *)((void *)__u + 4);
        case 9: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_49 *)((void *)__u + 4);
        case 5: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_49 *)((void *)__u + 4);
        case 1: 
        __u->__uc = __c;
        break;
        case 16: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_49 *)((void *)__u + 4);
        case 12: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_49 *)((void *)__u + 4);
        case 8: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_49 *)((void *)__u + 4);
        case 4: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        case 0: ;
        break;
        }
      }
    } else {
      goto _L;
    }
  } else {
    _L: /* CIL Label */ 
    __s = (void *)(& mp3file);
    __builtin_memset(__s, '\000', (int )sizeof(mp3file));
  }
  mp3file.path = mp3_path;
  mp3file.fname = pde->d_name;
  tmp___40 = strlen((char const   *)(pde->d_name));
  if (tmp___40 > 4U) {
    tmp___36 = strrchr((char const   *)(pde->d_name), '.');
    tmp___37 = __builtin_constant_p(tmp___36 + 1);
    if (tmp___37) {
      tmp___38 = strrchr((char const   *)(pde->d_name), '.');
      tmp___39 = strrchr((char const   *)(pde->d_name), '.');
      if ((unsigned int )((void const   *)((tmp___38 + 1) + 1)) - (unsigned int )((void const   *)(tmp___39 +
                                                                                                   1)) ==
          1U) {
        tmp___34 = strrchr((char const   *)(pde->d_name), '.');
        if ((int const   )(*((char const   *)(tmp___34 + 1) + 0)) == 0) {
          mp3file.type = (char *)calloc(1U, 1U);
        } else {
          tmp___29 = strrchr((char const   *)(pde->d_name), '.');
          tmp___30 = strlen((char const   *)(tmp___29 + 1));
          __len___2 = tmp___30 + 1U;
          tmp___31 = (char *)malloc(__len___2);
          __retval___2 = tmp___31;
          if ((unsigned int )__retval___2 != (unsigned int )((void *)0)) {
            tmp___32 = strrchr((char const   *)(pde->d_name), '.');
            __retval___2 = (char *)memcpy((void * __restrict  )__retval___2, (void const   * __restrict  )(tmp___32 +
                                                                                                           1),
                                          __len___2);
          }
          mp3file.type = __retval___2;
        }
      } else {
        goto _L___0;
      }
    } else {
      _L___0: /* CIL Label */ 
      tmp___35 = strrchr((char const   *)(pde->d_name), '.');
      mp3file.type = __strdup((char const   *)(tmp___35 + 1));
    }
  }
  mp3file.id = psb->st_ino;
  tmp___41 = scan_gettags(mp3file.path, & mp3file);
  if (tmp___41) {
    _L___1: /* CIL Label */ 
    err_log(2, 8U, (char *)"Skipping %s - scan_gettags failed\n", pde->d_name);
  } else {
    tmp___42 = scan_get_fileinfo(mp3file.path, & mp3file);
    if (tmp___42) {
      goto _L___1;
    } else {
      make_composite_tags(& mp3file);
      mp3file.time_added = (int )psb->st_mtim.tv_sec;
      if (psb->st_ctim.tv_sec < (__time_t )mp3file.time_added) {
        mp3file.time_added = (int )psb->st_ctim.tv_sec;
      }
      mp3file.time_modified = (int )psb->st_mtim.tv_sec;
      err_log(9, 8U, (char *)" Date Added: %d\n", mp3file.time_added);
      db_add(& mp3file);
      pl_eval(& mp3file);
    }
  }
  scan_freetags(& mp3file);
  return;
}
}
long scan_aac_findatom(FILE *fin , long max_offset , char *which_atom , int *atom_size ) 
{ long current_offset ;
  int size ;
  char atom[4] ;
  size_t tmp ;
  register unsigned int __v ;
  register unsigned int __x ;
  int tmp___0 ;
  size_t tmp___1 ;
  int tmp___2 ;

  {
  current_offset = 0L;
  while (current_offset < max_offset) {
    tmp = fread((void * __restrict  )((void *)(& size)), 1U, sizeof(int ), (FILE * __restrict  )fin);
    if (tmp != sizeof(int )) {
      return (-1L);
    }
    __x = (unsigned int )size;
    tmp___0 = __builtin_constant_p(__x);
    if (tmp___0) {
      __v = ((((__x & 4278190080U) >> 24) | ((__x & 16711680U) >> 8)) | ((__x & 65280U) <<
                                                                         8)) | ((__x &
                                                                                 255U) <<
                                                                                24);
    } else {
      __asm__  ("rorw $8, %w0;"
                "rorl $16, %0;"
                "rorw $8, %w0": "=r" (__v): "0" (__x): "cc");
    }
    size = (int )__v;
    if (size <= 7) {
      return (-1L);
    }
    tmp___1 = fread((void * __restrict  )(atom), 1U, 4U, (FILE * __restrict  )fin);
    if (tmp___1 != 4U) {
      return (-1L);
    }
    tmp___2 = strncasecmp((char const   *)(atom), (char const   *)which_atom, 4U);
    if (tmp___2 == 0) {
      (*atom_size) = size;
      return (current_offset);
    }
    fseek(fin, (long )(size - 8), 1);
    current_offset += (long )size;
  }
  return (-1L);
}
}
static int scan_get_aactags(char *file , MP3FILE *pmp3 ) 
{ FILE *fin ;
  long atom_offset ;
  int atom_length ;
  long current_offset ;
  int current_size ;
  char current_atom[4] ;
  char *current_data ;
  unsigned short us_data ;
  int genre ;
  int len ;
  size_t tmp ;
  register unsigned int __v ;
  register unsigned int __x ;
  int tmp___0 ;
  size_t tmp___1 ;
  void *__s ;
  void *__s___0 ;
  union __anonunion___u_50 *__u ;
  __uint8_t __c ;
  void *__s___1 ;
  int tmp___3 ;
  size_t tmp___4 ;
  size_t __len___2 ;
  size_t tmp___21 ;
  char *__retval___2 ;
  char *tmp___22 ;
  int tmp___24 ;
  size_t __len___6 ;
  size_t tmp___41 ;
  char *__retval___6 ;
  char *tmp___42 ;
  int tmp___44 ;
  size_t __len___10 ;
  size_t tmp___61 ;
  char *__retval___10 ;
  char *tmp___62 ;
  int tmp___64 ;
  size_t __len___14 ;
  size_t tmp___81 ;
  char *__retval___14 ;
  char *tmp___82 ;
  int tmp___84 ;
  size_t __len___18 ;
  size_t tmp___101 ;
  char *__retval___18 ;
  char *tmp___102 ;
  int tmp___104 ;
  size_t __len___22 ;
  size_t tmp___121 ;
  char *__retval___22 ;
  char *tmp___122 ;
  int tmp___124 ;
  size_t __len___26 ;
  size_t tmp___141 ;
  char *__retval___26 ;
  char *tmp___142 ;
  int tmp___144 ;
  register unsigned short __v___0 ;
  register unsigned short __x___0 ;
  int tmp___145 ;
  register unsigned short __v___1 ;
  register unsigned short __x___1 ;
  int tmp___146 ;
  register unsigned short __v___2 ;
  register unsigned short __x___2 ;
  int tmp___147 ;
  register unsigned short __v___3 ;
  register unsigned short __x___3 ;
  int tmp___148 ;
  register unsigned short __v___4 ;
  register unsigned short __x___4 ;
  int tmp___149 ;
  size_t __len___30 ;
  size_t tmp___166 ;
  char *__retval___30 ;
  char *tmp___167 ;
  int tmp___169 ;
  int tmp___170 ;
  int tmp___171 ;
  int tmp___172 ;
  int tmp___173 ;
  int tmp___174 ;
  int tmp___175 ;
  int tmp___176 ;
  int tmp___177 ;
  int tmp___178 ;
  int tmp___179 ;
  int tmp___180 ;
  int tmp___181 ;
  int tmp___182 ;

  {
  current_offset = 0L;
  fin = fopen((char const   * __restrict  )file, (char const   * __restrict  )"rb");
  if (! fin) {
    err_log(5, 8U, (char *)"Cannot open file %s for reading\n", file);
    return (-1);
  }
  fseek(fin, 0L, 0);
  atom_offset = aac_drilltoatom(fin, (char *)"moov:udta:meta:ilst", (unsigned int *)(& atom_length));
  if (atom_offset != -1L) {
    while (current_offset < (long )atom_length) {
      tmp = fread((void * __restrict  )((void *)(& current_size)), 1U, sizeof(int ),
                  (FILE * __restrict  )fin);
      if (tmp != sizeof(int )) {
        break;
      }
      __x = (unsigned int )current_size;
      tmp___0 = __builtin_constant_p(__x);
      if (tmp___0) {
        __v = ((((__x & 4278190080U) >> 24) | ((__x & 16711680U) >> 8)) | ((__x &
                                                                            65280U) <<
                                                                           8)) | ((__x &
                                                                                   255U) <<
                                                                                  24);
      } else {
        __asm__  ("rorw $8, %w0;"
                  "rorl $16, %0;"
                  "rorw $8, %w0": "=r" (__v): "0" (__x): "cc");
      }
      current_size = (int )__v;
      if (current_size <= 7) {
        break;
      }
      tmp___1 = fread((void * __restrict  )(current_atom), 1U, 4U, (FILE * __restrict  )fin);
      if (tmp___1 != 4U) {
        break;
      }
      len = current_size - 7;
      if (len < 22) {
        len = 22;
      }
      current_data = (char *)malloc((unsigned int )len);
      tmp___3 = __builtin_constant_p(len);
      if (tmp___3) {
        if (len <= 16) {
          if (len == 1) {
            __s___1 = (void *)current_data;
            (*((__uint8_t *)__s___1)) = (unsigned char)0;
          } else {
            __s___0 = (void *)current_data;
            __u = (union __anonunion___u_50 *)__s___0;
            __c = (unsigned char)0;
            switch ((int )((unsigned int )len)) {
            case 15: 
            __u->__ui = (unsigned int )((int )__c * 16843009);
            __u = (union __anonunion___u_50 *)((void *)__u + 4);
            case 11: 
            __u->__ui = (unsigned int )((int )__c * 16843009);
            __u = (union __anonunion___u_50 *)((void *)__u + 4);
            case 7: 
            __u->__ui = (unsigned int )((int )__c * 16843009);
            __u = (union __anonunion___u_50 *)((void *)__u + 4);
            case 3: 
            __u->__usi = (unsigned short )((int )((unsigned short )__c) * 257);
            __u = (union __anonunion___u_50 *)((void *)__u + 2);
            __u->__uc = __c;
            break;
            case 14: 
            __u->__ui = (unsigned int )((int )__c * 16843009);
            __u = (union __anonunion___u_50 *)((void *)__u + 4);
            case 10: 
            __u->__ui = (unsigned int )((int )__c * 16843009);
            __u = (union __anonunion___u_50 *)((void *)__u + 4);
            case 6: 
            __u->__ui = (unsigned int )((int )__c * 16843009);
            __u = (union __anonunion___u_50 *)((void *)__u + 4);
            case 2: 
            __u->__usi = (unsigned short )((int )((unsigned short )__c) * 257);
            break;
            case 13: 
            __u->__ui = (unsigned int )((int )__c * 16843009);
            __u = (union __anonunion___u_50 *)((void *)__u + 4);
            case 9: 
            __u->__ui = (unsigned int )((int )__c * 16843009);
            __u = (union __anonunion___u_50 *)((void *)__u + 4);
            case 5: 
            __u->__ui = (unsigned int )((int )__c * 16843009);
            __u = (union __anonunion___u_50 *)((void *)__u + 4);
            case 1: 
            __u->__uc = __c;
            break;
            case 16: 
            __u->__ui = (unsigned int )((int )__c * 16843009);
            __u = (union __anonunion___u_50 *)((void *)__u + 4);
            case 12: 
            __u->__ui = (unsigned int )((int )__c * 16843009);
            __u = (union __anonunion___u_50 *)((void *)__u + 4);
            case 8: 
            __u->__ui = (unsigned int )((int )__c * 16843009);
            __u = (union __anonunion___u_50 *)((void *)__u + 4);
            case 4: 
            __u->__ui = (unsigned int )((int )__c * 16843009);
            case 0: ;
            break;
            }
          }
        } else {
          goto _L;
        }
      } else {
        _L: /* CIL Label */ 
        __s = (void *)current_data;
        __builtin_memset(__s, '\000', len);
      }
      tmp___4 = fread((void * __restrict  )current_data, 1U, (unsigned int )(current_size -
                                                                             8), (FILE * __restrict  )fin);
      if (tmp___4 != (size_t )(current_size - 8)) {
        break;
      }
      tmp___182 = memcmp((void const   *)(current_atom), (void const   *)"\251nam",
                         4U);
      if (tmp___182) {
        tmp___181 = memcmp((void const   *)(current_atom), (void const   *)"\251ART",
                           4U);
        if (tmp___181) {
          tmp___180 = memcmp((void const   *)(current_atom), (void const   *)"\251alb",
                             4U);
          if (tmp___180) {
            tmp___179 = memcmp((void const   *)(current_atom), (void const   *)"\251cmt",
                               4U);
            if (tmp___179) {
              tmp___178 = memcmp((void const   *)(current_atom), (void const   *)"\251wrt",
                                 4U);
              if (tmp___178) {
                tmp___177 = memcmp((void const   *)(current_atom), (void const   *)"\251grp",
                                   4U);
                if (tmp___177) {
                  tmp___176 = memcmp((void const   *)(current_atom), (void const   *)"\251gen",
                                     4U);
                  if (tmp___176) {
                    tmp___175 = memcmp((void const   *)(current_atom), (void const   *)"tmpo",
                                       4U);
                    if (tmp___175) {
                      tmp___174 = memcmp((void const   *)(current_atom), (void const   *)"trkn",
                                         4U);
                      if (tmp___174) {
                        tmp___173 = memcmp((void const   *)(current_atom), (void const   *)"disk",
                                           4U);
                        if (tmp___173) {
                          tmp___172 = memcmp((void const   *)(current_atom), (void const   *)"\251day",
                                             4U);
                          if (tmp___172) {
                            tmp___171 = memcmp((void const   *)(current_atom), (void const   *)"gnre",
                                               4U);
                            if (tmp___171) {
                              tmp___170 = memcmp((void const   *)(current_atom), (void const   *)"cpil",
                                                 4U);
                              if (! tmp___170) {
                                pmp3->compilation = (*(current_data + 16));
                              }
                            } else {
                              genre = (int )(*(current_data + 17));
                              genre --;
                              if (genre < 0) {
                                goto _L___7;
                              } else {
                                if (genre > 148) {
                                  _L___7: /* CIL Label */ 
                                  genre = 148;
                                }
                              }
                              tmp___169 = __builtin_constant_p(scan_winamp_genre[genre]);
                              if (tmp___169) {
                                if ((unsigned int )((void const   *)(scan_winamp_genre[genre] +
                                                                     1)) - (unsigned int )((void const   *)scan_winamp_genre[genre]) ==
                                    1U) {
                                  if ((int const   )(*((char const   *)scan_winamp_genre[genre] +
                                                       0)) == 0) {
                                    pmp3->genre = (char *)calloc(1U, 1U);
                                  } else {
                                    tmp___166 = strlen((char const   *)scan_winamp_genre[genre]);
                                    __len___30 = tmp___166 + 1U;
                                    tmp___167 = (char *)malloc(__len___30);
                                    __retval___30 = tmp___167;
                                    if ((unsigned int )__retval___30 != (unsigned int )((void *)0)) {
                                      __retval___30 = (char *)memcpy((void * __restrict  )__retval___30,
                                                                     (void const   * __restrict  )scan_winamp_genre[genre],
                                                                     __len___30);
                                    }
                                    pmp3->genre = __retval___30;
                                  }
                                } else {
                                  goto _L___8;
                                }
                              } else {
                                _L___8: /* CIL Label */ 
                                pmp3->genre = __strdup((char const   *)scan_winamp_genre[genre]);
                              }
                            }
                          } else {
                            pmp3->year = atoi__extinline((char const   *)(current_data +
                                                                          16));
                          }
                        } else {
                          us_data = (*((unsigned short *)(current_data + 18)));
                          __x___3 = us_data;
                          tmp___148 = __builtin_constant_p(__x___3);
                          if (tmp___148) {
                            __v___3 = (unsigned short )((((int )__x___3 >> 8) & 255) |
                                                        (((int )__x___3 & 255) <<
                                                         8));
                          } else {
                            __asm__  ("rorw $8, %w0": "=r" (__v___3): "0" (__x___3): "cc");
                          }
                          us_data = __v___3;
                          pmp3->disc = (int )us_data;
                          us_data = (*((unsigned short *)(current_data + 20)));
                          __x___4 = us_data;
                          tmp___149 = __builtin_constant_p(__x___4);
                          if (tmp___149) {
                            __v___4 = (unsigned short )((((int )__x___4 >> 8) & 255) |
                                                        (((int )__x___4 & 255) <<
                                                         8));
                          } else {
                            __asm__  ("rorw $8, %w0": "=r" (__v___4): "0" (__x___4): "cc");
                          }
                          us_data = __v___4;
                          pmp3->total_discs = (int )us_data;
                        }
                      } else {
                        us_data = (*((unsigned short *)(current_data + 18)));
                        __x___1 = us_data;
                        tmp___146 = __builtin_constant_p(__x___1);
                        if (tmp___146) {
                          __v___1 = (unsigned short )((((int )__x___1 >> 8) & 255) |
                                                      (((int )__x___1 & 255) << 8));
                        } else {
                          __asm__  ("rorw $8, %w0": "=r" (__v___1): "0" (__x___1): "cc");
                        }
                        us_data = __v___1;
                        pmp3->track = (int )us_data;
                        us_data = (*((unsigned short *)(current_data + 20)));
                        __x___2 = us_data;
                        tmp___147 = __builtin_constant_p(__x___2);
                        if (tmp___147) {
                          __v___2 = (unsigned short )((((int )__x___2 >> 8) & 255) |
                                                      (((int )__x___2 & 255) << 8));
                        } else {
                          __asm__  ("rorw $8, %w0": "=r" (__v___2): "0" (__x___2): "cc");
                        }
                        us_data = __v___2;
                        pmp3->total_tracks = (int )us_data;
                      }
                    } else {
                      us_data = (*((unsigned short *)(current_data + 16)));
                      __x___0 = us_data;
                      tmp___145 = __builtin_constant_p(__x___0);
                      if (tmp___145) {
                        __v___0 = (unsigned short )((((int )__x___0 >> 8) & 255) |
                                                    (((int )__x___0 & 255) << 8));
                      } else {
                        __asm__  ("rorw $8, %w0": "=r" (__v___0): "0" (__x___0): "cc");
                      }
                      us_data = __v___0;
                      pmp3->bpm = (int )us_data;
                    }
                  } else {
                    tmp___144 = __builtin_constant_p(current_data + 16);
                    if (tmp___144) {
                      if ((unsigned int )((void const   *)((current_data + 16) + 1)) -
                          (unsigned int )((void const   *)(current_data + 16)) ==
                          1U) {
                        if ((int const   )(*((char const   *)(current_data + 16) +
                                             0)) == 0) {
                          pmp3->genre = (char *)calloc(1U, 1U);
                        } else {
                          tmp___141 = strlen((char const   *)(current_data + 16));
                          __len___26 = tmp___141 + 1U;
                          tmp___142 = (char *)malloc(__len___26);
                          __retval___26 = tmp___142;
                          if ((unsigned int )__retval___26 != (unsigned int )((void *)0)) {
                            __retval___26 = (char *)memcpy((void * __restrict  )__retval___26,
                                                           (void const   * __restrict  )(current_data +
                                                                                         16),
                                                           __len___26);
                          }
                          pmp3->genre = __retval___26;
                        }
                      } else {
                        goto _L___6;
                      }
                    } else {
                      _L___6: /* CIL Label */ 
                      pmp3->genre = __strdup((char const   *)(current_data + 16));
                    }
                  }
                } else {
                  tmp___124 = __builtin_constant_p(current_data + 16);
                  if (tmp___124) {
                    if ((unsigned int )((void const   *)((current_data + 16) + 1)) -
                        (unsigned int )((void const   *)(current_data + 16)) == 1U) {
                      if ((int const   )(*((char const   *)(current_data + 16) + 0)) ==
                          0) {
                        pmp3->grouping = (char *)calloc(1U, 1U);
                      } else {
                        tmp___121 = strlen((char const   *)(current_data + 16));
                        __len___22 = tmp___121 + 1U;
                        tmp___122 = (char *)malloc(__len___22);
                        __retval___22 = tmp___122;
                        if ((unsigned int )__retval___22 != (unsigned int )((void *)0)) {
                          __retval___22 = (char *)memcpy((void * __restrict  )__retval___22,
                                                         (void const   * __restrict  )(current_data +
                                                                                       16),
                                                         __len___22);
                        }
                        pmp3->grouping = __retval___22;
                      }
                    } else {
                      goto _L___5;
                    }
                  } else {
                    _L___5: /* CIL Label */ 
                    pmp3->grouping = __strdup((char const   *)(current_data + 16));
                  }
                }
              } else {
                tmp___104 = __builtin_constant_p(current_data + 16);
                if (tmp___104) {
                  if ((unsigned int )((void const   *)((current_data + 16) + 1)) -
                      (unsigned int )((void const   *)(current_data + 16)) == 1U) {
                    if ((int const   )(*((char const   *)(current_data + 16) + 0)) ==
                        0) {
                      pmp3->composer = (char *)calloc(1U, 1U);
                    } else {
                      tmp___101 = strlen((char const   *)(current_data + 16));
                      __len___18 = tmp___101 + 1U;
                      tmp___102 = (char *)malloc(__len___18);
                      __retval___18 = tmp___102;
                      if ((unsigned int )__retval___18 != (unsigned int )((void *)0)) {
                        __retval___18 = (char *)memcpy((void * __restrict  )__retval___18,
                                                       (void const   * __restrict  )(current_data +
                                                                                     16),
                                                       __len___18);
                      }
                      pmp3->composer = __retval___18;
                    }
                  } else {
                    goto _L___4;
                  }
                } else {
                  _L___4: /* CIL Label */ 
                  pmp3->composer = __strdup((char const   *)(current_data + 16));
                }
              }
            } else {
              tmp___84 = __builtin_constant_p(current_data + 16);
              if (tmp___84) {
                if ((unsigned int )((void const   *)((current_data + 16) + 1)) - (unsigned int )((void const   *)(current_data +
                                                                                                                  16)) ==
                    1U) {
                  if ((int const   )(*((char const   *)(current_data + 16) + 0)) ==
                      0) {
                    pmp3->comment = (char *)calloc(1U, 1U);
                  } else {
                    tmp___81 = strlen((char const   *)(current_data + 16));
                    __len___14 = tmp___81 + 1U;
                    tmp___82 = (char *)malloc(__len___14);
                    __retval___14 = tmp___82;
                    if ((unsigned int )__retval___14 != (unsigned int )((void *)0)) {
                      __retval___14 = (char *)memcpy((void * __restrict  )__retval___14,
                                                     (void const   * __restrict  )(current_data +
                                                                                   16),
                                                     __len___14);
                    }
                    pmp3->comment = __retval___14;
                  }
                } else {
                  goto _L___3;
                }
              } else {
                _L___3: /* CIL Label */ 
                pmp3->comment = __strdup((char const   *)(current_data + 16));
              }
            }
          } else {
            tmp___64 = __builtin_constant_p(current_data + 16);
            if (tmp___64) {
              if ((unsigned int )((void const   *)((current_data + 16) + 1)) - (unsigned int )((void const   *)(current_data +
                                                                                                                16)) ==
                  1U) {
                if ((int const   )(*((char const   *)(current_data + 16) + 0)) ==
                    0) {
                  pmp3->album = (char *)calloc(1U, 1U);
                } else {
                  tmp___61 = strlen((char const   *)(current_data + 16));
                  __len___10 = tmp___61 + 1U;
                  tmp___62 = (char *)malloc(__len___10);
                  __retval___10 = tmp___62;
                  if ((unsigned int )__retval___10 != (unsigned int )((void *)0)) {
                    __retval___10 = (char *)memcpy((void * __restrict  )__retval___10,
                                                   (void const   * __restrict  )(current_data +
                                                                                 16),
                                                   __len___10);
                  }
                  pmp3->album = __retval___10;
                }
              } else {
                goto _L___2;
              }
            } else {
              _L___2: /* CIL Label */ 
              pmp3->album = __strdup((char const   *)(current_data + 16));
            }
          }
        } else {
          tmp___44 = __builtin_constant_p(current_data + 16);
          if (tmp___44) {
            if ((unsigned int )((void const   *)((current_data + 16) + 1)) - (unsigned int )((void const   *)(current_data +
                                                                                                              16)) ==
                1U) {
              if ((int const   )(*((char const   *)(current_data + 16) + 0)) == 0) {
                pmp3->artist = (char *)calloc(1U, 1U);
              } else {
                tmp___41 = strlen((char const   *)(current_data + 16));
                __len___6 = tmp___41 + 1U;
                tmp___42 = (char *)malloc(__len___6);
                __retval___6 = tmp___42;
                if ((unsigned int )__retval___6 != (unsigned int )((void *)0)) {
                  __retval___6 = (char *)memcpy((void * __restrict  )__retval___6,
                                                (void const   * __restrict  )(current_data +
                                                                              16),
                                                __len___6);
                }
                pmp3->artist = __retval___6;
              }
            } else {
              goto _L___1;
            }
          } else {
            _L___1: /* CIL Label */ 
            pmp3->artist = __strdup((char const   *)(current_data + 16));
          }
        }
      } else {
        tmp___24 = __builtin_constant_p(current_data + 16);
        if (tmp___24) {
          if ((unsigned int )((void const   *)((current_data + 16) + 1)) - (unsigned int )((void const   *)(current_data +
                                                                                                            16)) ==
              1U) {
            if ((int const   )(*((char const   *)(current_data + 16) + 0)) == 0) {
              pmp3->title = (char *)calloc(1U, 1U);
            } else {
              tmp___21 = strlen((char const   *)(current_data + 16));
              __len___2 = tmp___21 + 1U;
              tmp___22 = (char *)malloc(__len___2);
              __retval___2 = tmp___22;
              if ((unsigned int )__retval___2 != (unsigned int )((void *)0)) {
                __retval___2 = (char *)memcpy((void * __restrict  )__retval___2, (void const   * __restrict  )(current_data +
                                                                                                               16),
                                              __len___2);
              }
              pmp3->title = __retval___2;
            }
          } else {
            goto _L___0;
          }
        } else {
          _L___0: /* CIL Label */ 
          pmp3->title = __strdup((char const   *)(current_data + 16));
        }
      }
      free((void *)current_data);
      current_offset += (long )current_size;
    }
  }
  fclose(fin);
  return (0);
}
}
static int scan_gettags(char *file , MP3FILE *pmp3 ) 
{ taghandler *hdl ;
  int tmp ;
  int tmp___0 ;

  {
  hdl = taghandlers;
  while (hdl->suffix) {
    tmp = strcasecmp((char const   *)hdl->suffix, (char const   *)pmp3->type);
    if (! tmp) {
      break;
    }
    hdl ++;
  }
  if (hdl->tags) {
    tmp___0 = ((*(hdl->tags)))(file, pmp3);
    return (tmp___0);
  }
  return (0);
}
}
static int scan_get_mp3tags(char *file , MP3FILE *pmp3 ) 
{ struct id3_file *pid3file ;
  struct id3_tag *pid3tag ;
  struct id3_frame *pid3frame ;
  int err ;
  int index___0 ;
  int used ;
  unsigned char *utf8_text ;
  int genre ;
  int have_utf8 ;
  int have_text ;
  id3_ucs4_t const   *native_text ;
  char *tmp ;
  int got_numeric_genre ;
  int tmp___0 ;
  int *tmp___1 ;
  int *tmp___2 ;
  size_t __s1_len ;
  size_t __s2_len ;
  int tmp___24 ;
  size_t tmp___25 ;
  register int __result___37 ;
  unsigned char const   *__s2___6 ;
  register int __result___38 ;
  register int __result___45 ;
  unsigned char const   *__s1___14 ;
  register int __result___46 ;
  int tmp___40 ;
  int tmp___41 ;
  int tmp___42 ;
  int tmp___43 ;
  size_t __s1_len___0 ;
  size_t __s2_len___0 ;
  int tmp___65 ;
  size_t tmp___66 ;
  register int __result___85 ;
  unsigned char const   *__s2___14 ;
  register int __result___86 ;
  register int __result___93 ;
  unsigned char const   *__s1___30 ;
  register int __result___94 ;
  int tmp___81 ;
  int tmp___82 ;
  int tmp___83 ;
  int tmp___84 ;
  unsigned int tmp___85 ;
  unsigned short const   **tmp___86 ;
  unsigned short const   **tmp___87 ;
  size_t tmp___88 ;
  size_t __len___2 ;
  size_t tmp___105 ;
  char *__retval___2 ;
  char *tmp___106 ;
  int tmp___108 ;
  char __r0 ;
  char __r1 ;
  char __r2 ;
  char __r0___0 ;
  char __r1___0 ;
  char __r2___0 ;
  size_t __s1_len___1 ;
  size_t __s2_len___1 ;
  int tmp___131 ;
  size_t tmp___132 ;
  register int __result___133 ;
  unsigned char const   *__s2___22 ;
  register int __result___134 ;
  register int __result___141 ;
  unsigned char const   *__s1___46 ;
  register int __result___142 ;
  int tmp___147 ;
  int tmp___148 ;
  int tmp___149 ;
  int tmp___150 ;
  size_t __s1_len___2 ;
  size_t __s2_len___2 ;
  int tmp___172 ;
  size_t tmp___173 ;
  register int __result___181 ;
  unsigned char const   *__s2___30 ;
  register int __result___182 ;
  register int __result___189 ;
  unsigned char const   *__s1___62 ;
  register int __result___190 ;
  int tmp___188 ;
  int tmp___189 ;
  int tmp___190 ;
  int tmp___191 ;
  size_t __s1_len___3 ;
  size_t __s2_len___3 ;
  int tmp___213 ;
  size_t tmp___214 ;
  register int __result___229 ;
  unsigned char const   *__s2___38 ;
  register int __result___230 ;
  register int __result___237 ;
  unsigned char const   *__s1___78 ;
  register int __result___238 ;
  int tmp___229 ;
  int tmp___230 ;
  int tmp___231 ;
  int tmp___232 ;
  size_t __s1_len___4 ;
  size_t __s2_len___4 ;
  int tmp___254 ;
  size_t tmp___255 ;
  register int __result___277 ;
  unsigned char const   *__s2___46 ;
  register int __result___278 ;
  register int __result___285 ;
  unsigned char const   *__s1___94 ;
  register int __result___286 ;
  int tmp___270 ;
  int tmp___271 ;
  int tmp___272 ;
  int tmp___273 ;
  size_t __s1_len___5 ;
  size_t __s2_len___5 ;
  int tmp___295 ;
  size_t tmp___296 ;
  register int __result___325 ;
  unsigned char const   *__s2___54 ;
  register int __result___326 ;
  register int __result___333 ;
  unsigned char const   *__s1___110 ;
  register int __result___334 ;
  int tmp___311 ;
  int tmp___312 ;
  int tmp___313 ;
  int tmp___314 ;
  size_t __s1_len___6 ;
  size_t __s2_len___6 ;
  int tmp___336 ;
  size_t tmp___337 ;
  register int __result___373 ;
  unsigned char const   *__s2___62 ;
  register int __result___374 ;
  register int __result___381 ;
  unsigned char const   *__s1___126 ;
  register int __result___382 ;
  int tmp___352 ;
  int tmp___353 ;
  int tmp___354 ;
  int tmp___355 ;
  size_t __s1_len___7 ;
  size_t __s2_len___7 ;
  int tmp___377 ;
  size_t tmp___378 ;
  register int __result___421 ;
  unsigned char const   *__s2___70 ;
  register int __result___422 ;
  register int __result___429 ;
  unsigned char const   *__s1___142 ;
  register int __result___430 ;
  int tmp___393 ;
  int tmp___394 ;
  int tmp___395 ;
  int tmp___396 ;
  size_t __s1_len___8 ;
  size_t __s2_len___8 ;
  int tmp___418 ;
  size_t tmp___419 ;
  register int __result___469 ;
  unsigned char const   *__s2___78 ;
  register int __result___470 ;
  register int __result___477 ;
  unsigned char const   *__s1___158 ;
  register int __result___478 ;
  int tmp___434 ;
  int tmp___435 ;
  int tmp___436 ;
  int tmp___437 ;
  size_t __s1_len___9 ;
  size_t __s2_len___9 ;
  int tmp___459 ;
  size_t tmp___460 ;
  register int __result___517 ;
  unsigned char const   *__s2___86 ;
  register int __result___518 ;
  register int __result___525 ;
  unsigned char const   *__s1___174 ;
  register int __result___526 ;
  int tmp___475 ;
  int tmp___476 ;
  int tmp___477 ;
  int tmp___478 ;
  size_t __s1_len___10 ;
  size_t __s2_len___10 ;
  int tmp___500 ;
  size_t tmp___501 ;
  register int __result___565 ;
  unsigned char const   *__s2___94 ;
  register int __result___566 ;
  register int __result___573 ;
  unsigned char const   *__s1___190 ;
  register int __result___574 ;
  int tmp___516 ;
  int tmp___517 ;
  int tmp___518 ;
  int tmp___519 ;
  size_t __s1_len___11 ;
  size_t __s2_len___11 ;
  int tmp___541 ;
  size_t tmp___542 ;
  register int __result___613 ;
  unsigned char const   *__s2___102 ;
  register int __result___614 ;
  register int __result___621 ;
  unsigned char const   *__s1___206 ;
  register int __result___622 ;
  int tmp___557 ;
  int tmp___558 ;
  int tmp___559 ;
  int tmp___560 ;
  size_t __s1_len___12 ;
  size_t __s2_len___12 ;
  int tmp___582 ;
  size_t tmp___583 ;
  register int __result___661 ;
  unsigned char const   *__s2___110 ;
  register int __result___662 ;
  register int __result___669 ;
  unsigned char const   *__s1___222 ;
  register int __result___670 ;
  int tmp___598 ;
  int tmp___599 ;
  int tmp___600 ;
  int tmp___601 ;
  size_t __s1_len___13 ;
  size_t __s2_len___13 ;
  int tmp___623 ;
  size_t tmp___624 ;
  register int __result___709 ;
  unsigned char const   *__s2___118 ;
  register int __result___710 ;
  register int __result___717 ;
  unsigned char const   *__s1___238 ;
  register int __result___718 ;
  int tmp___639 ;
  int tmp___640 ;
  int tmp___641 ;
  int tmp___642 ;
  size_t __s1_len___14 ;
  size_t __s2_len___14 ;
  int tmp___664 ;
  size_t tmp___665 ;
  register int __result___757 ;
  unsigned char const   *__s2___126 ;
  register int __result___758 ;
  register int __result___765 ;
  unsigned char const   *__s1___254 ;
  register int __result___766 ;
  int tmp___680 ;
  int tmp___681 ;
  int tmp___682 ;
  int tmp___683 ;
  size_t __s1_len___15 ;
  size_t __s2_len___15 ;
  int tmp___705 ;
  size_t tmp___706 ;
  register int __result___805 ;
  unsigned char const   *__s2___134 ;
  register int __result___806 ;
  register int __result___813 ;
  unsigned char const   *__s1___270 ;
  register int __result___814 ;
  int tmp___721 ;
  int tmp___722 ;
  int tmp___723 ;
  int tmp___724 ;
  int tmp___725 ;
  size_t __s1_len___16 ;
  size_t __s2_len___16 ;
  int tmp___747 ;
  size_t tmp___748 ;
  register int __result___853 ;
  unsigned char const   *__s2___142 ;
  register int __result___854 ;
  register int __result___861 ;
  unsigned char const   *__s1___286 ;
  register int __result___862 ;
  int tmp___763 ;
  int tmp___764 ;
  int tmp___765 ;
  int tmp___766 ;

  {
  genre = 148;
  tmp___0 = strcasecmp((char const   *)pmp3->type, "mp3");
  if (tmp___0) {
    return (0);
  }
  pid3file = id3_file_open((char const   *)file, 0);
  if (! pid3file) {
    err_log(2, 8U, (char *)"Cannot open %s\n", file);
    return (-1);
  }
  pid3tag = id3_file_tag((struct id3_file  const  *)pid3file);
  if (! pid3tag) {
    tmp___1 = __errno_location();
    err = (*tmp___1);
    id3_file_close(pid3file);
    tmp___2 = __errno_location();
    (*tmp___2) = err;
    err_log(2, 8U, (char *)"Cannot get ID3 tag for %s\n", file);
    return (-1);
  }
  index___0 = 0;
  while (1) {
    pid3frame = id3_tag_findframe((struct id3_tag  const  *)pid3tag, "", (unsigned int )index___0);
    if (! pid3frame) {
      break;
    }
    used = 0;
    utf8_text = (unsigned char *)((void *)0);
    native_text = (id3_ucs4_t const   *)((void *)0);
    have_utf8 = 0;
    have_text = 0;
    tmp___42 = __builtin_constant_p(pid3frame->id);
    if (tmp___42) {
      __s1_len = strlen((char const   *)(pid3frame->id));
      __s2_len = strlen("YTCP");
      if (! ((unsigned int )((void const   *)(pid3frame->id + 1)) - (unsigned int )((void const   *)(pid3frame->id)) ==
             1U)) {
        goto _L___164;
      } else {
        if (__s1_len >= 4U) {
          _L___164: /* CIL Label */ 
          if (! ((unsigned int )((void const   *)("YTCP" + 1)) - (unsigned int )((void const   *)"YTCP") ==
                 1U)) {
            goto _L___163;
          } else {
            if (__s2_len >= 4U) {
              _L___163: /* CIL Label */ 
              tmp___43 = 1;
            } else {
              goto _L___162;
            }
          }
        } else {
          _L___162: /* CIL Label */ 
          tmp___43 = 0;
        }
      }
      if (tmp___43) {
        if (__s1_len < __s2_len) {
          tmp___25 = __s1_len;
        } else {
          tmp___25 = __s2_len;
        }
        tmp___24 = memcmp((void const   *)((char const   *)(pid3frame->id)), (void const   *)"YTCP",
                          tmp___25 + 1U);
      } else {
        goto _L___166;
      }
    } else {
      _L___166: /* CIL Label */ 
      tmp___41 = __builtin_constant_p(pid3frame->id);
      if (tmp___41) {
        if ((unsigned int )((void const   *)(pid3frame->id + 1)) - (unsigned int )((void const   *)(pid3frame->id)) ==
            1U) {
          __s1_len = strlen((char const   *)(pid3frame->id));
          if (__s1_len < 4U) {
            if ((unsigned int )((void const   *)("YTCP" + 1)) - (unsigned int )((void const   *)"YTCP") ==
                1U) {
              __result___37 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                      0)) - (int const   )(*((unsigned char const   *)"YTCP" +
                                                                             0)));
              if (__s1_len > 0U) {
                if (__result___37 == 0) {
                  __result___37 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                          1)) - (int const   )(*((unsigned char const   *)"YTCP" +
                                                                                 1)));
                  if (__s1_len > 1U) {
                    if (__result___37 == 0) {
                      __result___37 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                              2)) - (int const   )(*((unsigned char const   *)"YTCP" +
                                                                                     2)));
                      if (__s1_len > 2U) {
                        if (__result___37 == 0) {
                          __result___37 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                  3)) - (int const   )(*((unsigned char const   *)"YTCP" +
                                                                                         3)));
                        } else {
                          goto _L___127;
                        }
                      } else {
                        _L___127: /* CIL Label */ ;
                      }
                    } else {
                      goto _L___128;
                    }
                  } else {
                    _L___128: /* CIL Label */ ;
                  }
                } else {
                  goto _L___129;
                }
              } else {
                _L___129: /* CIL Label */ ;
              }
              tmp___24 = __result___37;
            } else {
              __s2___6 = (unsigned char const   *)"YTCP";
              __result___38 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                      0)) - (int const   )(*(__s2___6 +
                                                                             0)));
              if (__s1_len > 0U) {
                if (__result___38 == 0) {
                  __result___38 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                          1)) - (int const   )(*(__s2___6 +
                                                                                 1)));
                  if (__s1_len > 1U) {
                    if (__result___38 == 0) {
                      __result___38 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                              2)) - (int const   )(*(__s2___6 +
                                                                                     2)));
                      if (__s1_len > 2U) {
                        if (__result___38 == 0) {
                          __result___38 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                  3)) - (int const   )(*(__s2___6 +
                                                                                         3)));
                        } else {
                          goto _L___130;
                        }
                      } else {
                        _L___130: /* CIL Label */ ;
                      }
                    } else {
                      goto _L___131;
                    }
                  } else {
                    _L___131: /* CIL Label */ ;
                  }
                } else {
                  goto _L___132;
                }
              } else {
                _L___132: /* CIL Label */ ;
              }
              tmp___24 = __result___38;
            }
          } else {
            goto _L___161;
          }
        } else {
          goto _L___161;
        }
      } else {
        _L___161: /* CIL Label */ 
        if ((unsigned int )((void const   *)("YTCP" + 1)) - (unsigned int )((void const   *)"YTCP") ==
            1U) {
          __s2_len = strlen("YTCP");
          if (__s2_len < 4U) {
            tmp___40 = __builtin_constant_p(pid3frame->id);
            if (tmp___40) {
              if ((unsigned int )((void const   *)(pid3frame->id + 1)) - (unsigned int )((void const   *)(pid3frame->id)) ==
                  1U) {
                __result___45 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                        0)) - (int const   )(*((unsigned char const   *)"YTCP" +
                                                                               0)));
                if (__s2_len > 0U) {
                  if (__result___45 == 0) {
                    __result___45 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                            1)) - (int const   )(*((unsigned char const   *)"YTCP" +
                                                                                   1)));
                    if (__s2_len > 1U) {
                      if (__result___45 == 0) {
                        __result___45 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                2)) - (int const   )(*((unsigned char const   *)"YTCP" +
                                                                                       2)));
                        if (__s2_len > 2U) {
                          if (__result___45 == 0) {
                            __result___45 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                    3)) - (int const   )(*((unsigned char const   *)"YTCP" +
                                                                                           3)));
                          } else {
                            goto _L___152;
                          }
                        } else {
                          _L___152: /* CIL Label */ ;
                        }
                      } else {
                        goto _L___153;
                      }
                    } else {
                      _L___153: /* CIL Label */ ;
                    }
                  } else {
                    goto _L___154;
                  }
                } else {
                  _L___154: /* CIL Label */ ;
                }
                tmp___24 = __result___45;
              } else {
                goto _L___158;
              }
            } else {
              _L___158: /* CIL Label */ 
              __s1___14 = (unsigned char const   *)((char const   *)(pid3frame->id));
              __result___46 = (int )((int const   )(*(__s1___14 + 0)) - (int const   )(*((unsigned char const   *)"YTCP" +
                                                                                         0)));
              if (__s2_len > 0U) {
                if (__result___46 == 0) {
                  __result___46 = (int )((int const   )(*(__s1___14 + 1)) - (int const   )(*((unsigned char const   *)"YTCP" +
                                                                                             1)));
                  if (__s2_len > 1U) {
                    if (__result___46 == 0) {
                      __result___46 = (int )((int const   )(*(__s1___14 + 2)) - (int const   )(*((unsigned char const   *)"YTCP" +
                                                                                                 2)));
                      if (__s2_len > 2U) {
                        if (__result___46 == 0) {
                          __result___46 = (int )((int const   )(*(__s1___14 + 3)) -
                                                 (int const   )(*((unsigned char const   *)"YTCP" +
                                                                  3)));
                        } else {
                          goto _L___155;
                        }
                      } else {
                        _L___155: /* CIL Label */ ;
                      }
                    } else {
                      goto _L___156;
                    }
                  } else {
                    _L___156: /* CIL Label */ ;
                  }
                } else {
                  goto _L___157;
                }
              } else {
                _L___157: /* CIL Label */ ;
              }
              tmp___24 = __result___46;
            }
          } else {
            goto _L___159;
          }
        } else {
          _L___159: /* CIL Label */ 
          tmp___24 = strcmp((char const   *)(pid3frame->id), "YTCP");
        }
      }
    }
    if (! tmp___24) {
      pmp3->compilation = (char)1;
      err_log(9, 8U, (char *)"Compilation: %d\n", pmp3->compilation);
    }
    if ((int )pid3frame->id[0] == 84) {
      goto _L___336;
    } else {
      tmp___83 = __builtin_constant_p(pid3frame->id);
      if (tmp___83) {
        __s1_len___0 = strlen((char const   *)(pid3frame->id));
        __s2_len___0 = strlen("COMM");
        if (! ((unsigned int )((void const   *)(pid3frame->id + 1)) - (unsigned int )((void const   *)(pid3frame->id)) ==
               1U)) {
          goto _L___332;
        } else {
          if (__s1_len___0 >= 4U) {
            _L___332: /* CIL Label */ 
            if (! ((unsigned int )((void const   *)("COMM" + 1)) - (unsigned int )((void const   *)"COMM") ==
                   1U)) {
              goto _L___331;
            } else {
              if (__s2_len___0 >= 4U) {
                _L___331: /* CIL Label */ 
                tmp___84 = 1;
              } else {
                goto _L___330;
              }
            }
          } else {
            _L___330: /* CIL Label */ 
            tmp___84 = 0;
          }
        }
        if (tmp___84) {
          if (__s1_len___0 < __s2_len___0) {
            tmp___66 = __s1_len___0;
          } else {
            tmp___66 = __s2_len___0;
          }
          tmp___65 = memcmp((void const   *)((char const   *)(pid3frame->id)), (void const   *)"COMM",
                            tmp___66 + 1U);
        } else {
          goto _L___334;
        }
      } else {
        _L___334: /* CIL Label */ 
        tmp___82 = __builtin_constant_p(pid3frame->id);
        if (tmp___82) {
          if ((unsigned int )((void const   *)(pid3frame->id + 1)) - (unsigned int )((void const   *)(pid3frame->id)) ==
              1U) {
            __s1_len___0 = strlen((char const   *)(pid3frame->id));
            if (__s1_len___0 < 4U) {
              if ((unsigned int )((void const   *)("COMM" + 1)) - (unsigned int )((void const   *)"COMM") ==
                  1U) {
                __result___85 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                        0)) - (int const   )(*((unsigned char const   *)"COMM" +
                                                                               0)));
                if (__s1_len___0 > 0U) {
                  if (__result___85 == 0) {
                    __result___85 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                            1)) - (int const   )(*((unsigned char const   *)"COMM" +
                                                                                   1)));
                    if (__s1_len___0 > 1U) {
                      if (__result___85 == 0) {
                        __result___85 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                2)) - (int const   )(*((unsigned char const   *)"COMM" +
                                                                                       2)));
                        if (__s1_len___0 > 2U) {
                          if (__result___85 == 0) {
                            __result___85 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                    3)) - (int const   )(*((unsigned char const   *)"COMM" +
                                                                                           3)));
                          } else {
                            goto _L___295;
                          }
                        } else {
                          _L___295: /* CIL Label */ ;
                        }
                      } else {
                        goto _L___296;
                      }
                    } else {
                      _L___296: /* CIL Label */ ;
                    }
                  } else {
                    goto _L___297;
                  }
                } else {
                  _L___297: /* CIL Label */ ;
                }
                tmp___65 = __result___85;
              } else {
                __s2___14 = (unsigned char const   *)"COMM";
                __result___86 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                        0)) - (int const   )(*(__s2___14 +
                                                                               0)));
                if (__s1_len___0 > 0U) {
                  if (__result___86 == 0) {
                    __result___86 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                            1)) - (int const   )(*(__s2___14 +
                                                                                   1)));
                    if (__s1_len___0 > 1U) {
                      if (__result___86 == 0) {
                        __result___86 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                2)) - (int const   )(*(__s2___14 +
                                                                                       2)));
                        if (__s1_len___0 > 2U) {
                          if (__result___86 == 0) {
                            __result___86 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                    3)) - (int const   )(*(__s2___14 +
                                                                                           3)));
                          } else {
                            goto _L___298;
                          }
                        } else {
                          _L___298: /* CIL Label */ ;
                        }
                      } else {
                        goto _L___299;
                      }
                    } else {
                      _L___299: /* CIL Label */ ;
                    }
                  } else {
                    goto _L___300;
                  }
                } else {
                  _L___300: /* CIL Label */ ;
                }
                tmp___65 = __result___86;
              }
            } else {
              goto _L___329;
            }
          } else {
            goto _L___329;
          }
        } else {
          _L___329: /* CIL Label */ 
          if ((unsigned int )((void const   *)("COMM" + 1)) - (unsigned int )((void const   *)"COMM") ==
              1U) {
            __s2_len___0 = strlen("COMM");
            if (__s2_len___0 < 4U) {
              tmp___81 = __builtin_constant_p(pid3frame->id);
              if (tmp___81) {
                if ((unsigned int )((void const   *)(pid3frame->id + 1)) - (unsigned int )((void const   *)(pid3frame->id)) ==
                    1U) {
                  __result___93 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                          0)) - (int const   )(*((unsigned char const   *)"COMM" +
                                                                                 0)));
                  if (__s2_len___0 > 0U) {
                    if (__result___93 == 0) {
                      __result___93 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                              1)) - (int const   )(*((unsigned char const   *)"COMM" +
                                                                                     1)));
                      if (__s2_len___0 > 1U) {
                        if (__result___93 == 0) {
                          __result___93 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                  2)) - (int const   )(*((unsigned char const   *)"COMM" +
                                                                                         2)));
                          if (__s2_len___0 > 2U) {
                            if (__result___93 == 0) {
                              __result___93 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                      3)) - (int const   )(*((unsigned char const   *)"COMM" +
                                                                                             3)));
                            } else {
                              goto _L___320;
                            }
                          } else {
                            _L___320: /* CIL Label */ ;
                          }
                        } else {
                          goto _L___321;
                        }
                      } else {
                        _L___321: /* CIL Label */ ;
                      }
                    } else {
                      goto _L___322;
                    }
                  } else {
                    _L___322: /* CIL Label */ ;
                  }
                  tmp___65 = __result___93;
                } else {
                  goto _L___326;
                }
              } else {
                _L___326: /* CIL Label */ 
                __s1___30 = (unsigned char const   *)((char const   *)(pid3frame->id));
                __result___94 = (int )((int const   )(*(__s1___30 + 0)) - (int const   )(*((unsigned char const   *)"COMM" +
                                                                                           0)));
                if (__s2_len___0 > 0U) {
                  if (__result___94 == 0) {
                    __result___94 = (int )((int const   )(*(__s1___30 + 1)) - (int const   )(*((unsigned char const   *)"COMM" +
                                                                                               1)));
                    if (__s2_len___0 > 1U) {
                      if (__result___94 == 0) {
                        __result___94 = (int )((int const   )(*(__s1___30 + 2)) -
                                               (int const   )(*((unsigned char const   *)"COMM" +
                                                                2)));
                        if (__s2_len___0 > 2U) {
                          if (__result___94 == 0) {
                            __result___94 = (int )((int const   )(*(__s1___30 + 3)) -
                                                   (int const   )(*((unsigned char const   *)"COMM" +
                                                                    3)));
                          } else {
                            goto _L___323;
                          }
                        } else {
                          _L___323: /* CIL Label */ ;
                        }
                      } else {
                        goto _L___324;
                      }
                    } else {
                      _L___324: /* CIL Label */ ;
                    }
                  } else {
                    goto _L___325;
                  }
                } else {
                  _L___325: /* CIL Label */ ;
                }
                tmp___65 = __result___94;
              }
            } else {
              goto _L___327;
            }
          } else {
            _L___327: /* CIL Label */ 
            tmp___65 = strcmp((char const   *)(pid3frame->id), "COMM");
          }
        }
      }
      if (tmp___65 == 0) {
        _L___336: /* CIL Label */ 
        tmp___85 = id3_field_getnstrings((union id3_field  const  *)(pid3frame->fields +
                                                                     1));
        if (tmp___85) {
          have_text = 1;
        } else {
          goto _L___335;
        }
      } else {
        _L___335: /* CIL Label */ ;
      }
    }
    if (have_text) {
      native_text = id3_field_getstrings((union id3_field  const  *)(pid3frame->fields +
                                                                     1), 0U);
      if (native_text) {
        have_utf8 = 1;
        utf8_text = (unsigned char *)id3_ucs4_utf8duplicate(native_text);
        tmp___723 = __builtin_constant_p(pid3frame->id);
        if (tmp___723) {
          __s1_len___15 = strlen((char const   *)(pid3frame->id));
          __s2_len___15 = strlen("TIT2");
          if (! ((unsigned int )((void const   *)(pid3frame->id + 1)) - (unsigned int )((void const   *)(pid3frame->id)) ==
                 1U)) {
            goto _L___2859;
          } else {
            if (__s1_len___15 >= 4U) {
              _L___2859: /* CIL Label */ 
              if (! ((unsigned int )((void const   *)("TIT2" + 1)) - (unsigned int )((void const   *)"TIT2") ==
                     1U)) {
                goto _L___2858;
              } else {
                if (__s2_len___15 >= 4U) {
                  _L___2858: /* CIL Label */ 
                  tmp___724 = 1;
                } else {
                  goto _L___2857;
                }
              }
            } else {
              _L___2857: /* CIL Label */ 
              tmp___724 = 0;
            }
          }
          if (tmp___724) {
            if (__s1_len___15 < __s2_len___15) {
              tmp___706 = __s1_len___15;
            } else {
              tmp___706 = __s2_len___15;
            }
            tmp___705 = memcmp((void const   *)((char const   *)(pid3frame->id)),
                               (void const   *)"TIT2", tmp___706 + 1U);
          } else {
            goto _L___2861;
          }
        } else {
          _L___2861: /* CIL Label */ 
          tmp___722 = __builtin_constant_p(pid3frame->id);
          if (tmp___722) {
            if ((unsigned int )((void const   *)(pid3frame->id + 1)) - (unsigned int )((void const   *)(pid3frame->id)) ==
                1U) {
              __s1_len___15 = strlen((char const   *)(pid3frame->id));
              if (__s1_len___15 < 4U) {
                if ((unsigned int )((void const   *)("TIT2" + 1)) - (unsigned int )((void const   *)"TIT2") ==
                    1U) {
                  __result___805 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                           0)) - (int const   )(*((unsigned char const   *)"TIT2" +
                                                                                  0)));
                  if (__s1_len___15 > 0U) {
                    if (__result___805 == 0) {
                      __result___805 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                               1)) - (int const   )(*((unsigned char const   *)"TIT2" +
                                                                                      1)));
                      if (__s1_len___15 > 1U) {
                        if (__result___805 == 0) {
                          __result___805 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                   2)) - (int const   )(*((unsigned char const   *)"TIT2" +
                                                                                          2)));
                          if (__s1_len___15 > 2U) {
                            if (__result___805 == 0) {
                              __result___805 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                       3)) - (int const   )(*((unsigned char const   *)"TIT2" +
                                                                                              3)));
                            } else {
                              goto _L___2822;
                            }
                          } else {
                            _L___2822: /* CIL Label */ ;
                          }
                        } else {
                          goto _L___2823;
                        }
                      } else {
                        _L___2823: /* CIL Label */ ;
                      }
                    } else {
                      goto _L___2824;
                    }
                  } else {
                    _L___2824: /* CIL Label */ ;
                  }
                  tmp___705 = __result___805;
                } else {
                  __s2___134 = (unsigned char const   *)"TIT2";
                  __result___806 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                           0)) - (int const   )(*(__s2___134 +
                                                                                  0)));
                  if (__s1_len___15 > 0U) {
                    if (__result___806 == 0) {
                      __result___806 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                               1)) - (int const   )(*(__s2___134 +
                                                                                      1)));
                      if (__s1_len___15 > 1U) {
                        if (__result___806 == 0) {
                          __result___806 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                   2)) - (int const   )(*(__s2___134 +
                                                                                          2)));
                          if (__s1_len___15 > 2U) {
                            if (__result___806 == 0) {
                              __result___806 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                       3)) - (int const   )(*(__s2___134 +
                                                                                              3)));
                            } else {
                              goto _L___2825;
                            }
                          } else {
                            _L___2825: /* CIL Label */ ;
                          }
                        } else {
                          goto _L___2826;
                        }
                      } else {
                        _L___2826: /* CIL Label */ ;
                      }
                    } else {
                      goto _L___2827;
                    }
                  } else {
                    _L___2827: /* CIL Label */ ;
                  }
                  tmp___705 = __result___806;
                }
              } else {
                goto _L___2856;
              }
            } else {
              goto _L___2856;
            }
          } else {
            _L___2856: /* CIL Label */ 
            if ((unsigned int )((void const   *)("TIT2" + 1)) - (unsigned int )((void const   *)"TIT2") ==
                1U) {
              __s2_len___15 = strlen("TIT2");
              if (__s2_len___15 < 4U) {
                tmp___721 = __builtin_constant_p(pid3frame->id);
                if (tmp___721) {
                  if ((unsigned int )((void const   *)(pid3frame->id + 1)) - (unsigned int )((void const   *)(pid3frame->id)) ==
                      1U) {
                    __result___813 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                             0)) - (int const   )(*((unsigned char const   *)"TIT2" +
                                                                                    0)));
                    if (__s2_len___15 > 0U) {
                      if (__result___813 == 0) {
                        __result___813 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                 1)) - (int const   )(*((unsigned char const   *)"TIT2" +
                                                                                        1)));
                        if (__s2_len___15 > 1U) {
                          if (__result___813 == 0) {
                            __result___813 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                     2)) - (int const   )(*((unsigned char const   *)"TIT2" +
                                                                                            2)));
                            if (__s2_len___15 > 2U) {
                              if (__result___813 == 0) {
                                __result___813 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                         3)) - (int const   )(*((unsigned char const   *)"TIT2" +
                                                                                                3)));
                              } else {
                                goto _L___2847;
                              }
                            } else {
                              _L___2847: /* CIL Label */ ;
                            }
                          } else {
                            goto _L___2848;
                          }
                        } else {
                          _L___2848: /* CIL Label */ ;
                        }
                      } else {
                        goto _L___2849;
                      }
                    } else {
                      _L___2849: /* CIL Label */ ;
                    }
                    tmp___705 = __result___813;
                  } else {
                    goto _L___2853;
                  }
                } else {
                  _L___2853: /* CIL Label */ 
                  __s1___270 = (unsigned char const   *)((char const   *)(pid3frame->id));
                  __result___814 = (int )((int const   )(*(__s1___270 + 0)) - (int const   )(*((unsigned char const   *)"TIT2" +
                                                                                               0)));
                  if (__s2_len___15 > 0U) {
                    if (__result___814 == 0) {
                      __result___814 = (int )((int const   )(*(__s1___270 + 1)) -
                                              (int const   )(*((unsigned char const   *)"TIT2" +
                                                               1)));
                      if (__s2_len___15 > 1U) {
                        if (__result___814 == 0) {
                          __result___814 = (int )((int const   )(*(__s1___270 + 2)) -
                                                  (int const   )(*((unsigned char const   *)"TIT2" +
                                                                   2)));
                          if (__s2_len___15 > 2U) {
                            if (__result___814 == 0) {
                              __result___814 = (int )((int const   )(*(__s1___270 +
                                                                       3)) - (int const   )(*((unsigned char const   *)"TIT2" +
                                                                                              3)));
                            } else {
                              goto _L___2850;
                            }
                          } else {
                            _L___2850: /* CIL Label */ ;
                          }
                        } else {
                          goto _L___2851;
                        }
                      } else {
                        _L___2851: /* CIL Label */ ;
                      }
                    } else {
                      goto _L___2852;
                    }
                  } else {
                    _L___2852: /* CIL Label */ ;
                  }
                  tmp___705 = __result___814;
                }
              } else {
                goto _L___2854;
              }
            } else {
              _L___2854: /* CIL Label */ 
              tmp___705 = strcmp((char const   *)(pid3frame->id), "TIT2");
            }
          }
        }
        if (tmp___705) {
          tmp___682 = __builtin_constant_p(pid3frame->id);
          if (tmp___682) {
            __s1_len___14 = strlen((char const   *)(pid3frame->id));
            __s2_len___14 = strlen("TPE1");
            if (! ((unsigned int )((void const   *)(pid3frame->id + 1)) - (unsigned int )((void const   *)(pid3frame->id)) ==
                   1U)) {
              goto _L___2691;
            } else {
              if (__s1_len___14 >= 4U) {
                _L___2691: /* CIL Label */ 
                if (! ((unsigned int )((void const   *)("TPE1" + 1)) - (unsigned int )((void const   *)"TPE1") ==
                       1U)) {
                  goto _L___2690;
                } else {
                  if (__s2_len___14 >= 4U) {
                    _L___2690: /* CIL Label */ 
                    tmp___683 = 1;
                  } else {
                    goto _L___2689;
                  }
                }
              } else {
                _L___2689: /* CIL Label */ 
                tmp___683 = 0;
              }
            }
            if (tmp___683) {
              if (__s1_len___14 < __s2_len___14) {
                tmp___665 = __s1_len___14;
              } else {
                tmp___665 = __s2_len___14;
              }
              tmp___664 = memcmp((void const   *)((char const   *)(pid3frame->id)),
                                 (void const   *)"TPE1", tmp___665 + 1U);
            } else {
              goto _L___2693;
            }
          } else {
            _L___2693: /* CIL Label */ 
            tmp___681 = __builtin_constant_p(pid3frame->id);
            if (tmp___681) {
              if ((unsigned int )((void const   *)(pid3frame->id + 1)) - (unsigned int )((void const   *)(pid3frame->id)) ==
                  1U) {
                __s1_len___14 = strlen((char const   *)(pid3frame->id));
                if (__s1_len___14 < 4U) {
                  if ((unsigned int )((void const   *)("TPE1" + 1)) - (unsigned int )((void const   *)"TPE1") ==
                      1U) {
                    __result___757 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                             0)) - (int const   )(*((unsigned char const   *)"TPE1" +
                                                                                    0)));
                    if (__s1_len___14 > 0U) {
                      if (__result___757 == 0) {
                        __result___757 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                 1)) - (int const   )(*((unsigned char const   *)"TPE1" +
                                                                                        1)));
                        if (__s1_len___14 > 1U) {
                          if (__result___757 == 0) {
                            __result___757 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                     2)) - (int const   )(*((unsigned char const   *)"TPE1" +
                                                                                            2)));
                            if (__s1_len___14 > 2U) {
                              if (__result___757 == 0) {
                                __result___757 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                         3)) - (int const   )(*((unsigned char const   *)"TPE1" +
                                                                                                3)));
                              } else {
                                goto _L___2654;
                              }
                            } else {
                              _L___2654: /* CIL Label */ ;
                            }
                          } else {
                            goto _L___2655;
                          }
                        } else {
                          _L___2655: /* CIL Label */ ;
                        }
                      } else {
                        goto _L___2656;
                      }
                    } else {
                      _L___2656: /* CIL Label */ ;
                    }
                    tmp___664 = __result___757;
                  } else {
                    __s2___126 = (unsigned char const   *)"TPE1";
                    __result___758 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                             0)) - (int const   )(*(__s2___126 +
                                                                                    0)));
                    if (__s1_len___14 > 0U) {
                      if (__result___758 == 0) {
                        __result___758 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                 1)) - (int const   )(*(__s2___126 +
                                                                                        1)));
                        if (__s1_len___14 > 1U) {
                          if (__result___758 == 0) {
                            __result___758 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                     2)) - (int const   )(*(__s2___126 +
                                                                                            2)));
                            if (__s1_len___14 > 2U) {
                              if (__result___758 == 0) {
                                __result___758 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                         3)) - (int const   )(*(__s2___126 +
                                                                                                3)));
                              } else {
                                goto _L___2657;
                              }
                            } else {
                              _L___2657: /* CIL Label */ ;
                            }
                          } else {
                            goto _L___2658;
                          }
                        } else {
                          _L___2658: /* CIL Label */ ;
                        }
                      } else {
                        goto _L___2659;
                      }
                    } else {
                      _L___2659: /* CIL Label */ ;
                    }
                    tmp___664 = __result___758;
                  }
                } else {
                  goto _L___2688;
                }
              } else {
                goto _L___2688;
              }
            } else {
              _L___2688: /* CIL Label */ 
              if ((unsigned int )((void const   *)("TPE1" + 1)) - (unsigned int )((void const   *)"TPE1") ==
                  1U) {
                __s2_len___14 = strlen("TPE1");
                if (__s2_len___14 < 4U) {
                  tmp___680 = __builtin_constant_p(pid3frame->id);
                  if (tmp___680) {
                    if ((unsigned int )((void const   *)(pid3frame->id + 1)) - (unsigned int )((void const   *)(pid3frame->id)) ==
                        1U) {
                      __result___765 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                               0)) - (int const   )(*((unsigned char const   *)"TPE1" +
                                                                                      0)));
                      if (__s2_len___14 > 0U) {
                        if (__result___765 == 0) {
                          __result___765 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                   1)) - (int const   )(*((unsigned char const   *)"TPE1" +
                                                                                          1)));
                          if (__s2_len___14 > 1U) {
                            if (__result___765 == 0) {
                              __result___765 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                       2)) - (int const   )(*((unsigned char const   *)"TPE1" +
                                                                                              2)));
                              if (__s2_len___14 > 2U) {
                                if (__result___765 == 0) {
                                  __result___765 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                           3)) - (int const   )(*((unsigned char const   *)"TPE1" +
                                                                                                  3)));
                                } else {
                                  goto _L___2679;
                                }
                              } else {
                                _L___2679: /* CIL Label */ ;
                              }
                            } else {
                              goto _L___2680;
                            }
                          } else {
                            _L___2680: /* CIL Label */ ;
                          }
                        } else {
                          goto _L___2681;
                        }
                      } else {
                        _L___2681: /* CIL Label */ ;
                      }
                      tmp___664 = __result___765;
                    } else {
                      goto _L___2685;
                    }
                  } else {
                    _L___2685: /* CIL Label */ 
                    __s1___254 = (unsigned char const   *)((char const   *)(pid3frame->id));
                    __result___766 = (int )((int const   )(*(__s1___254 + 0)) - (int const   )(*((unsigned char const   *)"TPE1" +
                                                                                                 0)));
                    if (__s2_len___14 > 0U) {
                      if (__result___766 == 0) {
                        __result___766 = (int )((int const   )(*(__s1___254 + 1)) -
                                                (int const   )(*((unsigned char const   *)"TPE1" +
                                                                 1)));
                        if (__s2_len___14 > 1U) {
                          if (__result___766 == 0) {
                            __result___766 = (int )((int const   )(*(__s1___254 +
                                                                     2)) - (int const   )(*((unsigned char const   *)"TPE1" +
                                                                                            2)));
                            if (__s2_len___14 > 2U) {
                              if (__result___766 == 0) {
                                __result___766 = (int )((int const   )(*(__s1___254 +
                                                                         3)) - (int const   )(*((unsigned char const   *)"TPE1" +
                                                                                                3)));
                              } else {
                                goto _L___2682;
                              }
                            } else {
                              _L___2682: /* CIL Label */ ;
                            }
                          } else {
                            goto _L___2683;
                          }
                        } else {
                          _L___2683: /* CIL Label */ ;
                        }
                      } else {
                        goto _L___2684;
                      }
                    } else {
                      _L___2684: /* CIL Label */ ;
                    }
                    tmp___664 = __result___766;
                  }
                } else {
                  goto _L___2686;
                }
              } else {
                _L___2686: /* CIL Label */ 
                tmp___664 = strcmp((char const   *)(pid3frame->id), "TPE1");
              }
            }
          }
          if (tmp___664) {
            tmp___641 = __builtin_constant_p(pid3frame->id);
            if (tmp___641) {
              __s1_len___13 = strlen((char const   *)(pid3frame->id));
              __s2_len___13 = strlen("TALB");
              if (! ((unsigned int )((void const   *)(pid3frame->id + 1)) - (unsigned int )((void const   *)(pid3frame->id)) ==
                     1U)) {
                goto _L___2523;
              } else {
                if (__s1_len___13 >= 4U) {
                  _L___2523: /* CIL Label */ 
                  if (! ((unsigned int )((void const   *)("TALB" + 1)) - (unsigned int )((void const   *)"TALB") ==
                         1U)) {
                    goto _L___2522;
                  } else {
                    if (__s2_len___13 >= 4U) {
                      _L___2522: /* CIL Label */ 
                      tmp___642 = 1;
                    } else {
                      goto _L___2521;
                    }
                  }
                } else {
                  _L___2521: /* CIL Label */ 
                  tmp___642 = 0;
                }
              }
              if (tmp___642) {
                if (__s1_len___13 < __s2_len___13) {
                  tmp___624 = __s1_len___13;
                } else {
                  tmp___624 = __s2_len___13;
                }
                tmp___623 = memcmp((void const   *)((char const   *)(pid3frame->id)),
                                   (void const   *)"TALB", tmp___624 + 1U);
              } else {
                goto _L___2525;
              }
            } else {
              _L___2525: /* CIL Label */ 
              tmp___640 = __builtin_constant_p(pid3frame->id);
              if (tmp___640) {
                if ((unsigned int )((void const   *)(pid3frame->id + 1)) - (unsigned int )((void const   *)(pid3frame->id)) ==
                    1U) {
                  __s1_len___13 = strlen((char const   *)(pid3frame->id));
                  if (__s1_len___13 < 4U) {
                    if ((unsigned int )((void const   *)("TALB" + 1)) - (unsigned int )((void const   *)"TALB") ==
                        1U) {
                      __result___709 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                               0)) - (int const   )(*((unsigned char const   *)"TALB" +
                                                                                      0)));
                      if (__s1_len___13 > 0U) {
                        if (__result___709 == 0) {
                          __result___709 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                   1)) - (int const   )(*((unsigned char const   *)"TALB" +
                                                                                          1)));
                          if (__s1_len___13 > 1U) {
                            if (__result___709 == 0) {
                              __result___709 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                       2)) - (int const   )(*((unsigned char const   *)"TALB" +
                                                                                              2)));
                              if (__s1_len___13 > 2U) {
                                if (__result___709 == 0) {
                                  __result___709 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                           3)) - (int const   )(*((unsigned char const   *)"TALB" +
                                                                                                  3)));
                                } else {
                                  goto _L___2486;
                                }
                              } else {
                                _L___2486: /* CIL Label */ ;
                              }
                            } else {
                              goto _L___2487;
                            }
                          } else {
                            _L___2487: /* CIL Label */ ;
                          }
                        } else {
                          goto _L___2488;
                        }
                      } else {
                        _L___2488: /* CIL Label */ ;
                      }
                      tmp___623 = __result___709;
                    } else {
                      __s2___118 = (unsigned char const   *)"TALB";
                      __result___710 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                               0)) - (int const   )(*(__s2___118 +
                                                                                      0)));
                      if (__s1_len___13 > 0U) {
                        if (__result___710 == 0) {
                          __result___710 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                   1)) - (int const   )(*(__s2___118 +
                                                                                          1)));
                          if (__s1_len___13 > 1U) {
                            if (__result___710 == 0) {
                              __result___710 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                       2)) - (int const   )(*(__s2___118 +
                                                                                              2)));
                              if (__s1_len___13 > 2U) {
                                if (__result___710 == 0) {
                                  __result___710 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                           3)) - (int const   )(*(__s2___118 +
                                                                                                  3)));
                                } else {
                                  goto _L___2489;
                                }
                              } else {
                                _L___2489: /* CIL Label */ ;
                              }
                            } else {
                              goto _L___2490;
                            }
                          } else {
                            _L___2490: /* CIL Label */ ;
                          }
                        } else {
                          goto _L___2491;
                        }
                      } else {
                        _L___2491: /* CIL Label */ ;
                      }
                      tmp___623 = __result___710;
                    }
                  } else {
                    goto _L___2520;
                  }
                } else {
                  goto _L___2520;
                }
              } else {
                _L___2520: /* CIL Label */ 
                if ((unsigned int )((void const   *)("TALB" + 1)) - (unsigned int )((void const   *)"TALB") ==
                    1U) {
                  __s2_len___13 = strlen("TALB");
                  if (__s2_len___13 < 4U) {
                    tmp___639 = __builtin_constant_p(pid3frame->id);
                    if (tmp___639) {
                      if ((unsigned int )((void const   *)(pid3frame->id + 1)) - (unsigned int )((void const   *)(pid3frame->id)) ==
                          1U) {
                        __result___717 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                 0)) - (int const   )(*((unsigned char const   *)"TALB" +
                                                                                        0)));
                        if (__s2_len___13 > 0U) {
                          if (__result___717 == 0) {
                            __result___717 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                     1)) - (int const   )(*((unsigned char const   *)"TALB" +
                                                                                            1)));
                            if (__s2_len___13 > 1U) {
                              if (__result___717 == 0) {
                                __result___717 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                         2)) - (int const   )(*((unsigned char const   *)"TALB" +
                                                                                                2)));
                                if (__s2_len___13 > 2U) {
                                  if (__result___717 == 0) {
                                    __result___717 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                             3)) -
                                                            (int const   )(*((unsigned char const   *)"TALB" +
                                                                             3)));
                                  } else {
                                    goto _L___2511;
                                  }
                                } else {
                                  _L___2511: /* CIL Label */ ;
                                }
                              } else {
                                goto _L___2512;
                              }
                            } else {
                              _L___2512: /* CIL Label */ ;
                            }
                          } else {
                            goto _L___2513;
                          }
                        } else {
                          _L___2513: /* CIL Label */ ;
                        }
                        tmp___623 = __result___717;
                      } else {
                        goto _L___2517;
                      }
                    } else {
                      _L___2517: /* CIL Label */ 
                      __s1___238 = (unsigned char const   *)((char const   *)(pid3frame->id));
                      __result___718 = (int )((int const   )(*(__s1___238 + 0)) -
                                              (int const   )(*((unsigned char const   *)"TALB" +
                                                               0)));
                      if (__s2_len___13 > 0U) {
                        if (__result___718 == 0) {
                          __result___718 = (int )((int const   )(*(__s1___238 + 1)) -
                                                  (int const   )(*((unsigned char const   *)"TALB" +
                                                                   1)));
                          if (__s2_len___13 > 1U) {
                            if (__result___718 == 0) {
                              __result___718 = (int )((int const   )(*(__s1___238 +
                                                                       2)) - (int const   )(*((unsigned char const   *)"TALB" +
                                                                                              2)));
                              if (__s2_len___13 > 2U) {
                                if (__result___718 == 0) {
                                  __result___718 = (int )((int const   )(*(__s1___238 +
                                                                           3)) - (int const   )(*((unsigned char const   *)"TALB" +
                                                                                                  3)));
                                } else {
                                  goto _L___2514;
                                }
                              } else {
                                _L___2514: /* CIL Label */ ;
                              }
                            } else {
                              goto _L___2515;
                            }
                          } else {
                            _L___2515: /* CIL Label */ ;
                          }
                        } else {
                          goto _L___2516;
                        }
                      } else {
                        _L___2516: /* CIL Label */ ;
                      }
                      tmp___623 = __result___718;
                    }
                  } else {
                    goto _L___2518;
                  }
                } else {
                  _L___2518: /* CIL Label */ 
                  tmp___623 = strcmp((char const   *)(pid3frame->id), "TALB");
                }
              }
            }
            if (tmp___623) {
              tmp___600 = __builtin_constant_p(pid3frame->id);
              if (tmp___600) {
                __s1_len___12 = strlen((char const   *)(pid3frame->id));
                __s2_len___12 = strlen("TCOM");
                if (! ((unsigned int )((void const   *)(pid3frame->id + 1)) - (unsigned int )((void const   *)(pid3frame->id)) ==
                       1U)) {
                  goto _L___2355;
                } else {
                  if (__s1_len___12 >= 4U) {
                    _L___2355: /* CIL Label */ 
                    if (! ((unsigned int )((void const   *)("TCOM" + 1)) - (unsigned int )((void const   *)"TCOM") ==
                           1U)) {
                      goto _L___2354;
                    } else {
                      if (__s2_len___12 >= 4U) {
                        _L___2354: /* CIL Label */ 
                        tmp___601 = 1;
                      } else {
                        goto _L___2353;
                      }
                    }
                  } else {
                    _L___2353: /* CIL Label */ 
                    tmp___601 = 0;
                  }
                }
                if (tmp___601) {
                  if (__s1_len___12 < __s2_len___12) {
                    tmp___583 = __s1_len___12;
                  } else {
                    tmp___583 = __s2_len___12;
                  }
                  tmp___582 = memcmp((void const   *)((char const   *)(pid3frame->id)),
                                     (void const   *)"TCOM", tmp___583 + 1U);
                } else {
                  goto _L___2357;
                }
              } else {
                _L___2357: /* CIL Label */ 
                tmp___599 = __builtin_constant_p(pid3frame->id);
                if (tmp___599) {
                  if ((unsigned int )((void const   *)(pid3frame->id + 1)) - (unsigned int )((void const   *)(pid3frame->id)) ==
                      1U) {
                    __s1_len___12 = strlen((char const   *)(pid3frame->id));
                    if (__s1_len___12 < 4U) {
                      if ((unsigned int )((void const   *)("TCOM" + 1)) - (unsigned int )((void const   *)"TCOM") ==
                          1U) {
                        __result___661 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                 0)) - (int const   )(*((unsigned char const   *)"TCOM" +
                                                                                        0)));
                        if (__s1_len___12 > 0U) {
                          if (__result___661 == 0) {
                            __result___661 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                     1)) - (int const   )(*((unsigned char const   *)"TCOM" +
                                                                                            1)));
                            if (__s1_len___12 > 1U) {
                              if (__result___661 == 0) {
                                __result___661 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                         2)) - (int const   )(*((unsigned char const   *)"TCOM" +
                                                                                                2)));
                                if (__s1_len___12 > 2U) {
                                  if (__result___661 == 0) {
                                    __result___661 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                             3)) -
                                                            (int const   )(*((unsigned char const   *)"TCOM" +
                                                                             3)));
                                  } else {
                                    goto _L___2318;
                                  }
                                } else {
                                  _L___2318: /* CIL Label */ ;
                                }
                              } else {
                                goto _L___2319;
                              }
                            } else {
                              _L___2319: /* CIL Label */ ;
                            }
                          } else {
                            goto _L___2320;
                          }
                        } else {
                          _L___2320: /* CIL Label */ ;
                        }
                        tmp___582 = __result___661;
                      } else {
                        __s2___110 = (unsigned char const   *)"TCOM";
                        __result___662 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                 0)) - (int const   )(*(__s2___110 +
                                                                                        0)));
                        if (__s1_len___12 > 0U) {
                          if (__result___662 == 0) {
                            __result___662 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                     1)) - (int const   )(*(__s2___110 +
                                                                                            1)));
                            if (__s1_len___12 > 1U) {
                              if (__result___662 == 0) {
                                __result___662 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                         2)) - (int const   )(*(__s2___110 +
                                                                                                2)));
                                if (__s1_len___12 > 2U) {
                                  if (__result___662 == 0) {
                                    __result___662 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                             3)) -
                                                            (int const   )(*(__s2___110 +
                                                                             3)));
                                  } else {
                                    goto _L___2321;
                                  }
                                } else {
                                  _L___2321: /* CIL Label */ ;
                                }
                              } else {
                                goto _L___2322;
                              }
                            } else {
                              _L___2322: /* CIL Label */ ;
                            }
                          } else {
                            goto _L___2323;
                          }
                        } else {
                          _L___2323: /* CIL Label */ ;
                        }
                        tmp___582 = __result___662;
                      }
                    } else {
                      goto _L___2352;
                    }
                  } else {
                    goto _L___2352;
                  }
                } else {
                  _L___2352: /* CIL Label */ 
                  if ((unsigned int )((void const   *)("TCOM" + 1)) - (unsigned int )((void const   *)"TCOM") ==
                      1U) {
                    __s2_len___12 = strlen("TCOM");
                    if (__s2_len___12 < 4U) {
                      tmp___598 = __builtin_constant_p(pid3frame->id);
                      if (tmp___598) {
                        if ((unsigned int )((void const   *)(pid3frame->id + 1)) -
                            (unsigned int )((void const   *)(pid3frame->id)) == 1U) {
                          __result___669 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                   0)) - (int const   )(*((unsigned char const   *)"TCOM" +
                                                                                          0)));
                          if (__s2_len___12 > 0U) {
                            if (__result___669 == 0) {
                              __result___669 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                       1)) - (int const   )(*((unsigned char const   *)"TCOM" +
                                                                                              1)));
                              if (__s2_len___12 > 1U) {
                                if (__result___669 == 0) {
                                  __result___669 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                           2)) - (int const   )(*((unsigned char const   *)"TCOM" +
                                                                                                  2)));
                                  if (__s2_len___12 > 2U) {
                                    if (__result___669 == 0) {
                                      __result___669 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                               3)) -
                                                              (int const   )(*((unsigned char const   *)"TCOM" +
                                                                               3)));
                                    } else {
                                      goto _L___2343;
                                    }
                                  } else {
                                    _L___2343: /* CIL Label */ ;
                                  }
                                } else {
                                  goto _L___2344;
                                }
                              } else {
                                _L___2344: /* CIL Label */ ;
                              }
                            } else {
                              goto _L___2345;
                            }
                          } else {
                            _L___2345: /* CIL Label */ ;
                          }
                          tmp___582 = __result___669;
                        } else {
                          goto _L___2349;
                        }
                      } else {
                        _L___2349: /* CIL Label */ 
                        __s1___222 = (unsigned char const   *)((char const   *)(pid3frame->id));
                        __result___670 = (int )((int const   )(*(__s1___222 + 0)) -
                                                (int const   )(*((unsigned char const   *)"TCOM" +
                                                                 0)));
                        if (__s2_len___12 > 0U) {
                          if (__result___670 == 0) {
                            __result___670 = (int )((int const   )(*(__s1___222 +
                                                                     1)) - (int const   )(*((unsigned char const   *)"TCOM" +
                                                                                            1)));
                            if (__s2_len___12 > 1U) {
                              if (__result___670 == 0) {
                                __result___670 = (int )((int const   )(*(__s1___222 +
                                                                         2)) - (int const   )(*((unsigned char const   *)"TCOM" +
                                                                                                2)));
                                if (__s2_len___12 > 2U) {
                                  if (__result___670 == 0) {
                                    __result___670 = (int )((int const   )(*(__s1___222 +
                                                                             3)) -
                                                            (int const   )(*((unsigned char const   *)"TCOM" +
                                                                             3)));
                                  } else {
                                    goto _L___2346;
                                  }
                                } else {
                                  _L___2346: /* CIL Label */ ;
                                }
                              } else {
                                goto _L___2347;
                              }
                            } else {
                              _L___2347: /* CIL Label */ ;
                            }
                          } else {
                            goto _L___2348;
                          }
                        } else {
                          _L___2348: /* CIL Label */ ;
                        }
                        tmp___582 = __result___670;
                      }
                    } else {
                      goto _L___2350;
                    }
                  } else {
                    _L___2350: /* CIL Label */ 
                    tmp___582 = strcmp((char const   *)(pid3frame->id), "TCOM");
                  }
                }
              }
              if (tmp___582) {
                tmp___559 = __builtin_constant_p(pid3frame->id);
                if (tmp___559) {
                  __s1_len___11 = strlen((char const   *)(pid3frame->id));
                  __s2_len___11 = strlen("TIT1");
                  if (! ((unsigned int )((void const   *)(pid3frame->id + 1)) - (unsigned int )((void const   *)(pid3frame->id)) ==
                         1U)) {
                    goto _L___2187;
                  } else {
                    if (__s1_len___11 >= 4U) {
                      _L___2187: /* CIL Label */ 
                      if (! ((unsigned int )((void const   *)("TIT1" + 1)) - (unsigned int )((void const   *)"TIT1") ==
                             1U)) {
                        goto _L___2186;
                      } else {
                        if (__s2_len___11 >= 4U) {
                          _L___2186: /* CIL Label */ 
                          tmp___560 = 1;
                        } else {
                          goto _L___2185;
                        }
                      }
                    } else {
                      _L___2185: /* CIL Label */ 
                      tmp___560 = 0;
                    }
                  }
                  if (tmp___560) {
                    if (__s1_len___11 < __s2_len___11) {
                      tmp___542 = __s1_len___11;
                    } else {
                      tmp___542 = __s2_len___11;
                    }
                    tmp___541 = memcmp((void const   *)((char const   *)(pid3frame->id)),
                                       (void const   *)"TIT1", tmp___542 + 1U);
                  } else {
                    goto _L___2189;
                  }
                } else {
                  _L___2189: /* CIL Label */ 
                  tmp___558 = __builtin_constant_p(pid3frame->id);
                  if (tmp___558) {
                    if ((unsigned int )((void const   *)(pid3frame->id + 1)) - (unsigned int )((void const   *)(pid3frame->id)) ==
                        1U) {
                      __s1_len___11 = strlen((char const   *)(pid3frame->id));
                      if (__s1_len___11 < 4U) {
                        if ((unsigned int )((void const   *)("TIT1" + 1)) - (unsigned int )((void const   *)"TIT1") ==
                            1U) {
                          __result___613 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                   0)) - (int const   )(*((unsigned char const   *)"TIT1" +
                                                                                          0)));
                          if (__s1_len___11 > 0U) {
                            if (__result___613 == 0) {
                              __result___613 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                       1)) - (int const   )(*((unsigned char const   *)"TIT1" +
                                                                                              1)));
                              if (__s1_len___11 > 1U) {
                                if (__result___613 == 0) {
                                  __result___613 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                           2)) - (int const   )(*((unsigned char const   *)"TIT1" +
                                                                                                  2)));
                                  if (__s1_len___11 > 2U) {
                                    if (__result___613 == 0) {
                                      __result___613 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                               3)) -
                                                              (int const   )(*((unsigned char const   *)"TIT1" +
                                                                               3)));
                                    } else {
                                      goto _L___2150;
                                    }
                                  } else {
                                    _L___2150: /* CIL Label */ ;
                                  }
                                } else {
                                  goto _L___2151;
                                }
                              } else {
                                _L___2151: /* CIL Label */ ;
                              }
                            } else {
                              goto _L___2152;
                            }
                          } else {
                            _L___2152: /* CIL Label */ ;
                          }
                          tmp___541 = __result___613;
                        } else {
                          __s2___102 = (unsigned char const   *)"TIT1";
                          __result___614 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                   0)) - (int const   )(*(__s2___102 +
                                                                                          0)));
                          if (__s1_len___11 > 0U) {
                            if (__result___614 == 0) {
                              __result___614 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                       1)) - (int const   )(*(__s2___102 +
                                                                                              1)));
                              if (__s1_len___11 > 1U) {
                                if (__result___614 == 0) {
                                  __result___614 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                           2)) - (int const   )(*(__s2___102 +
                                                                                                  2)));
                                  if (__s1_len___11 > 2U) {
                                    if (__result___614 == 0) {
                                      __result___614 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                               3)) -
                                                              (int const   )(*(__s2___102 +
                                                                               3)));
                                    } else {
                                      goto _L___2153;
                                    }
                                  } else {
                                    _L___2153: /* CIL Label */ ;
                                  }
                                } else {
                                  goto _L___2154;
                                }
                              } else {
                                _L___2154: /* CIL Label */ ;
                              }
                            } else {
                              goto _L___2155;
                            }
                          } else {
                            _L___2155: /* CIL Label */ ;
                          }
                          tmp___541 = __result___614;
                        }
                      } else {
                        goto _L___2184;
                      }
                    } else {
                      goto _L___2184;
                    }
                  } else {
                    _L___2184: /* CIL Label */ 
                    if ((unsigned int )((void const   *)("TIT1" + 1)) - (unsigned int )((void const   *)"TIT1") ==
                        1U) {
                      __s2_len___11 = strlen("TIT1");
                      if (__s2_len___11 < 4U) {
                        tmp___557 = __builtin_constant_p(pid3frame->id);
                        if (tmp___557) {
                          if ((unsigned int )((void const   *)(pid3frame->id + 1)) -
                              (unsigned int )((void const   *)(pid3frame->id)) ==
                              1U) {
                            __result___621 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                     0)) - (int const   )(*((unsigned char const   *)"TIT1" +
                                                                                            0)));
                            if (__s2_len___11 > 0U) {
                              if (__result___621 == 0) {
                                __result___621 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                         1)) - (int const   )(*((unsigned char const   *)"TIT1" +
                                                                                                1)));
                                if (__s2_len___11 > 1U) {
                                  if (__result___621 == 0) {
                                    __result___621 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                             2)) -
                                                            (int const   )(*((unsigned char const   *)"TIT1" +
                                                                             2)));
                                    if (__s2_len___11 > 2U) {
                                      if (__result___621 == 0) {
                                        __result___621 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                 3)) -
                                                                (int const   )(*((unsigned char const   *)"TIT1" +
                                                                                 3)));
                                      } else {
                                        goto _L___2175;
                                      }
                                    } else {
                                      _L___2175: /* CIL Label */ ;
                                    }
                                  } else {
                                    goto _L___2176;
                                  }
                                } else {
                                  _L___2176: /* CIL Label */ ;
                                }
                              } else {
                                goto _L___2177;
                              }
                            } else {
                              _L___2177: /* CIL Label */ ;
                            }
                            tmp___541 = __result___621;
                          } else {
                            goto _L___2181;
                          }
                        } else {
                          _L___2181: /* CIL Label */ 
                          __s1___206 = (unsigned char const   *)((char const   *)(pid3frame->id));
                          __result___622 = (int )((int const   )(*(__s1___206 + 0)) -
                                                  (int const   )(*((unsigned char const   *)"TIT1" +
                                                                   0)));
                          if (__s2_len___11 > 0U) {
                            if (__result___622 == 0) {
                              __result___622 = (int )((int const   )(*(__s1___206 +
                                                                       1)) - (int const   )(*((unsigned char const   *)"TIT1" +
                                                                                              1)));
                              if (__s2_len___11 > 1U) {
                                if (__result___622 == 0) {
                                  __result___622 = (int )((int const   )(*(__s1___206 +
                                                                           2)) - (int const   )(*((unsigned char const   *)"TIT1" +
                                                                                                  2)));
                                  if (__s2_len___11 > 2U) {
                                    if (__result___622 == 0) {
                                      __result___622 = (int )((int const   )(*(__s1___206 +
                                                                               3)) -
                                                              (int const   )(*((unsigned char const   *)"TIT1" +
                                                                               3)));
                                    } else {
                                      goto _L___2178;
                                    }
                                  } else {
                                    _L___2178: /* CIL Label */ ;
                                  }
                                } else {
                                  goto _L___2179;
                                }
                              } else {
                                _L___2179: /* CIL Label */ ;
                              }
                            } else {
                              goto _L___2180;
                            }
                          } else {
                            _L___2180: /* CIL Label */ ;
                          }
                          tmp___541 = __result___622;
                        }
                      } else {
                        goto _L___2182;
                      }
                    } else {
                      _L___2182: /* CIL Label */ 
                      tmp___541 = strcmp((char const   *)(pid3frame->id), "TIT1");
                    }
                  }
                }
                if (tmp___541) {
                  tmp___518 = __builtin_constant_p(pid3frame->id);
                  if (tmp___518) {
                    __s1_len___10 = strlen((char const   *)(pid3frame->id));
                    __s2_len___10 = strlen("TPE2");
                    if (! ((unsigned int )((void const   *)(pid3frame->id + 1)) -
                           (unsigned int )((void const   *)(pid3frame->id)) == 1U)) {
                      goto _L___2019;
                    } else {
                      if (__s1_len___10 >= 4U) {
                        _L___2019: /* CIL Label */ 
                        if (! ((unsigned int )((void const   *)("TPE2" + 1)) - (unsigned int )((void const   *)"TPE2") ==
                               1U)) {
                          goto _L___2018;
                        } else {
                          if (__s2_len___10 >= 4U) {
                            _L___2018: /* CIL Label */ 
                            tmp___519 = 1;
                          } else {
                            goto _L___2017;
                          }
                        }
                      } else {
                        _L___2017: /* CIL Label */ 
                        tmp___519 = 0;
                      }
                    }
                    if (tmp___519) {
                      if (__s1_len___10 < __s2_len___10) {
                        tmp___501 = __s1_len___10;
                      } else {
                        tmp___501 = __s2_len___10;
                      }
                      tmp___500 = memcmp((void const   *)((char const   *)(pid3frame->id)),
                                         (void const   *)"TPE2", tmp___501 + 1U);
                    } else {
                      goto _L___2021;
                    }
                  } else {
                    _L___2021: /* CIL Label */ 
                    tmp___517 = __builtin_constant_p(pid3frame->id);
                    if (tmp___517) {
                      if ((unsigned int )((void const   *)(pid3frame->id + 1)) - (unsigned int )((void const   *)(pid3frame->id)) ==
                          1U) {
                        __s1_len___10 = strlen((char const   *)(pid3frame->id));
                        if (__s1_len___10 < 4U) {
                          if ((unsigned int )((void const   *)("TPE2" + 1)) - (unsigned int )((void const   *)"TPE2") ==
                              1U) {
                            __result___565 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                     0)) - (int const   )(*((unsigned char const   *)"TPE2" +
                                                                                            0)));
                            if (__s1_len___10 > 0U) {
                              if (__result___565 == 0) {
                                __result___565 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                         1)) - (int const   )(*((unsigned char const   *)"TPE2" +
                                                                                                1)));
                                if (__s1_len___10 > 1U) {
                                  if (__result___565 == 0) {
                                    __result___565 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                             2)) -
                                                            (int const   )(*((unsigned char const   *)"TPE2" +
                                                                             2)));
                                    if (__s1_len___10 > 2U) {
                                      if (__result___565 == 0) {
                                        __result___565 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                 3)) -
                                                                (int const   )(*((unsigned char const   *)"TPE2" +
                                                                                 3)));
                                      } else {
                                        goto _L___1982;
                                      }
                                    } else {
                                      _L___1982: /* CIL Label */ ;
                                    }
                                  } else {
                                    goto _L___1983;
                                  }
                                } else {
                                  _L___1983: /* CIL Label */ ;
                                }
                              } else {
                                goto _L___1984;
                              }
                            } else {
                              _L___1984: /* CIL Label */ ;
                            }
                            tmp___500 = __result___565;
                          } else {
                            __s2___94 = (unsigned char const   *)"TPE2";
                            __result___566 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                     0)) - (int const   )(*(__s2___94 +
                                                                                            0)));
                            if (__s1_len___10 > 0U) {
                              if (__result___566 == 0) {
                                __result___566 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                         1)) - (int const   )(*(__s2___94 +
                                                                                                1)));
                                if (__s1_len___10 > 1U) {
                                  if (__result___566 == 0) {
                                    __result___566 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                             2)) -
                                                            (int const   )(*(__s2___94 +
                                                                             2)));
                                    if (__s1_len___10 > 2U) {
                                      if (__result___566 == 0) {
                                        __result___566 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                 3)) -
                                                                (int const   )(*(__s2___94 +
                                                                                 3)));
                                      } else {
                                        goto _L___1985;
                                      }
                                    } else {
                                      _L___1985: /* CIL Label */ ;
                                    }
                                  } else {
                                    goto _L___1986;
                                  }
                                } else {
                                  _L___1986: /* CIL Label */ ;
                                }
                              } else {
                                goto _L___1987;
                              }
                            } else {
                              _L___1987: /* CIL Label */ ;
                            }
                            tmp___500 = __result___566;
                          }
                        } else {
                          goto _L___2016;
                        }
                      } else {
                        goto _L___2016;
                      }
                    } else {
                      _L___2016: /* CIL Label */ 
                      if ((unsigned int )((void const   *)("TPE2" + 1)) - (unsigned int )((void const   *)"TPE2") ==
                          1U) {
                        __s2_len___10 = strlen("TPE2");
                        if (__s2_len___10 < 4U) {
                          tmp___516 = __builtin_constant_p(pid3frame->id);
                          if (tmp___516) {
                            if ((unsigned int )((void const   *)(pid3frame->id + 1)) -
                                (unsigned int )((void const   *)(pid3frame->id)) ==
                                1U) {
                              __result___573 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                       0)) - (int const   )(*((unsigned char const   *)"TPE2" +
                                                                                              0)));
                              if (__s2_len___10 > 0U) {
                                if (__result___573 == 0) {
                                  __result___573 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                           1)) - (int const   )(*((unsigned char const   *)"TPE2" +
                                                                                                  1)));
                                  if (__s2_len___10 > 1U) {
                                    if (__result___573 == 0) {
                                      __result___573 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                               2)) -
                                                              (int const   )(*((unsigned char const   *)"TPE2" +
                                                                               2)));
                                      if (__s2_len___10 > 2U) {
                                        if (__result___573 == 0) {
                                          __result___573 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                   3)) -
                                                                  (int const   )(*((unsigned char const   *)"TPE2" +
                                                                                   3)));
                                        } else {
                                          goto _L___2007;
                                        }
                                      } else {
                                        _L___2007: /* CIL Label */ ;
                                      }
                                    } else {
                                      goto _L___2008;
                                    }
                                  } else {
                                    _L___2008: /* CIL Label */ ;
                                  }
                                } else {
                                  goto _L___2009;
                                }
                              } else {
                                _L___2009: /* CIL Label */ ;
                              }
                              tmp___500 = __result___573;
                            } else {
                              goto _L___2013;
                            }
                          } else {
                            _L___2013: /* CIL Label */ 
                            __s1___190 = (unsigned char const   *)((char const   *)(pid3frame->id));
                            __result___574 = (int )((int const   )(*(__s1___190 +
                                                                     0)) - (int const   )(*((unsigned char const   *)"TPE2" +
                                                                                            0)));
                            if (__s2_len___10 > 0U) {
                              if (__result___574 == 0) {
                                __result___574 = (int )((int const   )(*(__s1___190 +
                                                                         1)) - (int const   )(*((unsigned char const   *)"TPE2" +
                                                                                                1)));
                                if (__s2_len___10 > 1U) {
                                  if (__result___574 == 0) {
                                    __result___574 = (int )((int const   )(*(__s1___190 +
                                                                             2)) -
                                                            (int const   )(*((unsigned char const   *)"TPE2" +
                                                                             2)));
                                    if (__s2_len___10 > 2U) {
                                      if (__result___574 == 0) {
                                        __result___574 = (int )((int const   )(*(__s1___190 +
                                                                                 3)) -
                                                                (int const   )(*((unsigned char const   *)"TPE2" +
                                                                                 3)));
                                      } else {
                                        goto _L___2010;
                                      }
                                    } else {
                                      _L___2010: /* CIL Label */ ;
                                    }
                                  } else {
                                    goto _L___2011;
                                  }
                                } else {
                                  _L___2011: /* CIL Label */ ;
                                }
                              } else {
                                goto _L___2012;
                              }
                            } else {
                              _L___2012: /* CIL Label */ ;
                            }
                            tmp___500 = __result___574;
                          }
                        } else {
                          goto _L___2014;
                        }
                      } else {
                        _L___2014: /* CIL Label */ 
                        tmp___500 = strcmp((char const   *)(pid3frame->id), "TPE2");
                      }
                    }
                  }
                  if (tmp___500) {
                    tmp___477 = __builtin_constant_p(pid3frame->id);
                    if (tmp___477) {
                      __s1_len___9 = strlen((char const   *)(pid3frame->id));
                      __s2_len___9 = strlen("TPE3");
                      if (! ((unsigned int )((void const   *)(pid3frame->id + 1)) -
                             (unsigned int )((void const   *)(pid3frame->id)) == 1U)) {
                        goto _L___1851;
                      } else {
                        if (__s1_len___9 >= 4U) {
                          _L___1851: /* CIL Label */ 
                          if (! ((unsigned int )((void const   *)("TPE3" + 1)) - (unsigned int )((void const   *)"TPE3") ==
                                 1U)) {
                            goto _L___1850;
                          } else {
                            if (__s2_len___9 >= 4U) {
                              _L___1850: /* CIL Label */ 
                              tmp___478 = 1;
                            } else {
                              goto _L___1849;
                            }
                          }
                        } else {
                          _L___1849: /* CIL Label */ 
                          tmp___478 = 0;
                        }
                      }
                      if (tmp___478) {
                        if (__s1_len___9 < __s2_len___9) {
                          tmp___460 = __s1_len___9;
                        } else {
                          tmp___460 = __s2_len___9;
                        }
                        tmp___459 = memcmp((void const   *)((char const   *)(pid3frame->id)),
                                           (void const   *)"TPE3", tmp___460 + 1U);
                      } else {
                        goto _L___1853;
                      }
                    } else {
                      _L___1853: /* CIL Label */ 
                      tmp___476 = __builtin_constant_p(pid3frame->id);
                      if (tmp___476) {
                        if ((unsigned int )((void const   *)(pid3frame->id + 1)) -
                            (unsigned int )((void const   *)(pid3frame->id)) == 1U) {
                          __s1_len___9 = strlen((char const   *)(pid3frame->id));
                          if (__s1_len___9 < 4U) {
                            if ((unsigned int )((void const   *)("TPE3" + 1)) - (unsigned int )((void const   *)"TPE3") ==
                                1U) {
                              __result___517 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                       0)) - (int const   )(*((unsigned char const   *)"TPE3" +
                                                                                              0)));
                              if (__s1_len___9 > 0U) {
                                if (__result___517 == 0) {
                                  __result___517 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                           1)) - (int const   )(*((unsigned char const   *)"TPE3" +
                                                                                                  1)));
                                  if (__s1_len___9 > 1U) {
                                    if (__result___517 == 0) {
                                      __result___517 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                               2)) -
                                                              (int const   )(*((unsigned char const   *)"TPE3" +
                                                                               2)));
                                      if (__s1_len___9 > 2U) {
                                        if (__result___517 == 0) {
                                          __result___517 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                   3)) -
                                                                  (int const   )(*((unsigned char const   *)"TPE3" +
                                                                                   3)));
                                        } else {
                                          goto _L___1814;
                                        }
                                      } else {
                                        _L___1814: /* CIL Label */ ;
                                      }
                                    } else {
                                      goto _L___1815;
                                    }
                                  } else {
                                    _L___1815: /* CIL Label */ ;
                                  }
                                } else {
                                  goto _L___1816;
                                }
                              } else {
                                _L___1816: /* CIL Label */ ;
                              }
                              tmp___459 = __result___517;
                            } else {
                              __s2___86 = (unsigned char const   *)"TPE3";
                              __result___518 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                       0)) - (int const   )(*(__s2___86 +
                                                                                              0)));
                              if (__s1_len___9 > 0U) {
                                if (__result___518 == 0) {
                                  __result___518 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                           1)) - (int const   )(*(__s2___86 +
                                                                                                  1)));
                                  if (__s1_len___9 > 1U) {
                                    if (__result___518 == 0) {
                                      __result___518 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                               2)) -
                                                              (int const   )(*(__s2___86 +
                                                                               2)));
                                      if (__s1_len___9 > 2U) {
                                        if (__result___518 == 0) {
                                          __result___518 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                   3)) -
                                                                  (int const   )(*(__s2___86 +
                                                                                   3)));
                                        } else {
                                          goto _L___1817;
                                        }
                                      } else {
                                        _L___1817: /* CIL Label */ ;
                                      }
                                    } else {
                                      goto _L___1818;
                                    }
                                  } else {
                                    _L___1818: /* CIL Label */ ;
                                  }
                                } else {
                                  goto _L___1819;
                                }
                              } else {
                                _L___1819: /* CIL Label */ ;
                              }
                              tmp___459 = __result___518;
                            }
                          } else {
                            goto _L___1848;
                          }
                        } else {
                          goto _L___1848;
                        }
                      } else {
                        _L___1848: /* CIL Label */ 
                        if ((unsigned int )((void const   *)("TPE3" + 1)) - (unsigned int )((void const   *)"TPE3") ==
                            1U) {
                          __s2_len___9 = strlen("TPE3");
                          if (__s2_len___9 < 4U) {
                            tmp___475 = __builtin_constant_p(pid3frame->id);
                            if (tmp___475) {
                              if ((unsigned int )((void const   *)(pid3frame->id +
                                                                   1)) - (unsigned int )((void const   *)(pid3frame->id)) ==
                                  1U) {
                                __result___525 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                         0)) - (int const   )(*((unsigned char const   *)"TPE3" +
                                                                                                0)));
                                if (__s2_len___9 > 0U) {
                                  if (__result___525 == 0) {
                                    __result___525 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                             1)) -
                                                            (int const   )(*((unsigned char const   *)"TPE3" +
                                                                             1)));
                                    if (__s2_len___9 > 1U) {
                                      if (__result___525 == 0) {
                                        __result___525 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                 2)) -
                                                                (int const   )(*((unsigned char const   *)"TPE3" +
                                                                                 2)));
                                        if (__s2_len___9 > 2U) {
                                          if (__result___525 == 0) {
                                            __result___525 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                     3)) -
                                                                    (int const   )(*((unsigned char const   *)"TPE3" +
                                                                                     3)));
                                          } else {
                                            goto _L___1839;
                                          }
                                        } else {
                                          _L___1839: /* CIL Label */ ;
                                        }
                                      } else {
                                        goto _L___1840;
                                      }
                                    } else {
                                      _L___1840: /* CIL Label */ ;
                                    }
                                  } else {
                                    goto _L___1841;
                                  }
                                } else {
                                  _L___1841: /* CIL Label */ ;
                                }
                                tmp___459 = __result___525;
                              } else {
                                goto _L___1845;
                              }
                            } else {
                              _L___1845: /* CIL Label */ 
                              __s1___174 = (unsigned char const   *)((char const   *)(pid3frame->id));
                              __result___526 = (int )((int const   )(*(__s1___174 +
                                                                       0)) - (int const   )(*((unsigned char const   *)"TPE3" +
                                                                                              0)));
                              if (__s2_len___9 > 0U) {
                                if (__result___526 == 0) {
                                  __result___526 = (int )((int const   )(*(__s1___174 +
                                                                           1)) - (int const   )(*((unsigned char const   *)"TPE3" +
                                                                                                  1)));
                                  if (__s2_len___9 > 1U) {
                                    if (__result___526 == 0) {
                                      __result___526 = (int )((int const   )(*(__s1___174 +
                                                                               2)) -
                                                              (int const   )(*((unsigned char const   *)"TPE3" +
                                                                               2)));
                                      if (__s2_len___9 > 2U) {
                                        if (__result___526 == 0) {
                                          __result___526 = (int )((int const   )(*(__s1___174 +
                                                                                   3)) -
                                                                  (int const   )(*((unsigned char const   *)"TPE3" +
                                                                                   3)));
                                        } else {
                                          goto _L___1842;
                                        }
                                      } else {
                                        _L___1842: /* CIL Label */ ;
                                      }
                                    } else {
                                      goto _L___1843;
                                    }
                                  } else {
                                    _L___1843: /* CIL Label */ ;
                                  }
                                } else {
                                  goto _L___1844;
                                }
                              } else {
                                _L___1844: /* CIL Label */ ;
                              }
                              tmp___459 = __result___526;
                            }
                          } else {
                            goto _L___1846;
                          }
                        } else {
                          _L___1846: /* CIL Label */ 
                          tmp___459 = strcmp((char const   *)(pid3frame->id), "TPE3");
                        }
                      }
                    }
                    if (tmp___459) {
                      tmp___436 = __builtin_constant_p(pid3frame->id);
                      if (tmp___436) {
                        __s1_len___8 = strlen((char const   *)(pid3frame->id));
                        __s2_len___8 = strlen("TCON");
                        if (! ((unsigned int )((void const   *)(pid3frame->id + 1)) -
                               (unsigned int )((void const   *)(pid3frame->id)) ==
                               1U)) {
                          goto _L___1683;
                        } else {
                          if (__s1_len___8 >= 4U) {
                            _L___1683: /* CIL Label */ 
                            if (! ((unsigned int )((void const   *)("TCON" + 1)) -
                                   (unsigned int )((void const   *)"TCON") == 1U)) {
                              goto _L___1682;
                            } else {
                              if (__s2_len___8 >= 4U) {
                                _L___1682: /* CIL Label */ 
                                tmp___437 = 1;
                              } else {
                                goto _L___1681;
                              }
                            }
                          } else {
                            _L___1681: /* CIL Label */ 
                            tmp___437 = 0;
                          }
                        }
                        if (tmp___437) {
                          if (__s1_len___8 < __s2_len___8) {
                            tmp___419 = __s1_len___8;
                          } else {
                            tmp___419 = __s2_len___8;
                          }
                          tmp___418 = memcmp((void const   *)((char const   *)(pid3frame->id)),
                                             (void const   *)"TCON", tmp___419 + 1U);
                        } else {
                          goto _L___1685;
                        }
                      } else {
                        _L___1685: /* CIL Label */ 
                        tmp___435 = __builtin_constant_p(pid3frame->id);
                        if (tmp___435) {
                          if ((unsigned int )((void const   *)(pid3frame->id + 1)) -
                              (unsigned int )((void const   *)(pid3frame->id)) ==
                              1U) {
                            __s1_len___8 = strlen((char const   *)(pid3frame->id));
                            if (__s1_len___8 < 4U) {
                              if ((unsigned int )((void const   *)("TCON" + 1)) -
                                  (unsigned int )((void const   *)"TCON") == 1U) {
                                __result___469 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                         0)) - (int const   )(*((unsigned char const   *)"TCON" +
                                                                                                0)));
                                if (__s1_len___8 > 0U) {
                                  if (__result___469 == 0) {
                                    __result___469 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                             1)) -
                                                            (int const   )(*((unsigned char const   *)"TCON" +
                                                                             1)));
                                    if (__s1_len___8 > 1U) {
                                      if (__result___469 == 0) {
                                        __result___469 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                 2)) -
                                                                (int const   )(*((unsigned char const   *)"TCON" +
                                                                                 2)));
                                        if (__s1_len___8 > 2U) {
                                          if (__result___469 == 0) {
                                            __result___469 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                     3)) -
                                                                    (int const   )(*((unsigned char const   *)"TCON" +
                                                                                     3)));
                                          } else {
                                            goto _L___1646;
                                          }
                                        } else {
                                          _L___1646: /* CIL Label */ ;
                                        }
                                      } else {
                                        goto _L___1647;
                                      }
                                    } else {
                                      _L___1647: /* CIL Label */ ;
                                    }
                                  } else {
                                    goto _L___1648;
                                  }
                                } else {
                                  _L___1648: /* CIL Label */ ;
                                }
                                tmp___418 = __result___469;
                              } else {
                                __s2___78 = (unsigned char const   *)"TCON";
                                __result___470 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                         0)) - (int const   )(*(__s2___78 +
                                                                                                0)));
                                if (__s1_len___8 > 0U) {
                                  if (__result___470 == 0) {
                                    __result___470 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                             1)) -
                                                            (int const   )(*(__s2___78 +
                                                                             1)));
                                    if (__s1_len___8 > 1U) {
                                      if (__result___470 == 0) {
                                        __result___470 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                 2)) -
                                                                (int const   )(*(__s2___78 +
                                                                                 2)));
                                        if (__s1_len___8 > 2U) {
                                          if (__result___470 == 0) {
                                            __result___470 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                     3)) -
                                                                    (int const   )(*(__s2___78 +
                                                                                     3)));
                                          } else {
                                            goto _L___1649;
                                          }
                                        } else {
                                          _L___1649: /* CIL Label */ ;
                                        }
                                      } else {
                                        goto _L___1650;
                                      }
                                    } else {
                                      _L___1650: /* CIL Label */ ;
                                    }
                                  } else {
                                    goto _L___1651;
                                  }
                                } else {
                                  _L___1651: /* CIL Label */ ;
                                }
                                tmp___418 = __result___470;
                              }
                            } else {
                              goto _L___1680;
                            }
                          } else {
                            goto _L___1680;
                          }
                        } else {
                          _L___1680: /* CIL Label */ 
                          if ((unsigned int )((void const   *)("TCON" + 1)) - (unsigned int )((void const   *)"TCON") ==
                              1U) {
                            __s2_len___8 = strlen("TCON");
                            if (__s2_len___8 < 4U) {
                              tmp___434 = __builtin_constant_p(pid3frame->id);
                              if (tmp___434) {
                                if ((unsigned int )((void const   *)(pid3frame->id +
                                                                     1)) - (unsigned int )((void const   *)(pid3frame->id)) ==
                                    1U) {
                                  __result___477 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                           0)) - (int const   )(*((unsigned char const   *)"TCON" +
                                                                                                  0)));
                                  if (__s2_len___8 > 0U) {
                                    if (__result___477 == 0) {
                                      __result___477 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                               1)) -
                                                              (int const   )(*((unsigned char const   *)"TCON" +
                                                                               1)));
                                      if (__s2_len___8 > 1U) {
                                        if (__result___477 == 0) {
                                          __result___477 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                   2)) -
                                                                  (int const   )(*((unsigned char const   *)"TCON" +
                                                                                   2)));
                                          if (__s2_len___8 > 2U) {
                                            if (__result___477 == 0) {
                                              __result___477 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                       3)) -
                                                                      (int const   )(*((unsigned char const   *)"TCON" +
                                                                                       3)));
                                            } else {
                                              goto _L___1671;
                                            }
                                          } else {
                                            _L___1671: /* CIL Label */ ;
                                          }
                                        } else {
                                          goto _L___1672;
                                        }
                                      } else {
                                        _L___1672: /* CIL Label */ ;
                                      }
                                    } else {
                                      goto _L___1673;
                                    }
                                  } else {
                                    _L___1673: /* CIL Label */ ;
                                  }
                                  tmp___418 = __result___477;
                                } else {
                                  goto _L___1677;
                                }
                              } else {
                                _L___1677: /* CIL Label */ 
                                __s1___158 = (unsigned char const   *)((char const   *)(pid3frame->id));
                                __result___478 = (int )((int const   )(*(__s1___158 +
                                                                         0)) - (int const   )(*((unsigned char const   *)"TCON" +
                                                                                                0)));
                                if (__s2_len___8 > 0U) {
                                  if (__result___478 == 0) {
                                    __result___478 = (int )((int const   )(*(__s1___158 +
                                                                             1)) -
                                                            (int const   )(*((unsigned char const   *)"TCON" +
                                                                             1)));
                                    if (__s2_len___8 > 1U) {
                                      if (__result___478 == 0) {
                                        __result___478 = (int )((int const   )(*(__s1___158 +
                                                                                 2)) -
                                                                (int const   )(*((unsigned char const   *)"TCON" +
                                                                                 2)));
                                        if (__s2_len___8 > 2U) {
                                          if (__result___478 == 0) {
                                            __result___478 = (int )((int const   )(*(__s1___158 +
                                                                                     3)) -
                                                                    (int const   )(*((unsigned char const   *)"TCON" +
                                                                                     3)));
                                          } else {
                                            goto _L___1674;
                                          }
                                        } else {
                                          _L___1674: /* CIL Label */ ;
                                        }
                                      } else {
                                        goto _L___1675;
                                      }
                                    } else {
                                      _L___1675: /* CIL Label */ ;
                                    }
                                  } else {
                                    goto _L___1676;
                                  }
                                } else {
                                  _L___1676: /* CIL Label */ ;
                                }
                                tmp___418 = __result___478;
                              }
                            } else {
                              goto _L___1678;
                            }
                          } else {
                            _L___1678: /* CIL Label */ 
                            tmp___418 = strcmp((char const   *)(pid3frame->id), "TCON");
                          }
                        }
                      }
                      if (tmp___418) {
                        tmp___395 = __builtin_constant_p(pid3frame->id);
                        if (tmp___395) {
                          __s1_len___7 = strlen((char const   *)(pid3frame->id));
                          __s2_len___7 = strlen("COMM");
                          if (! ((unsigned int )((void const   *)(pid3frame->id +
                                                                  1)) - (unsigned int )((void const   *)(pid3frame->id)) ==
                                 1U)) {
                            goto _L___1515;
                          } else {
                            if (__s1_len___7 >= 4U) {
                              _L___1515: /* CIL Label */ 
                              if (! ((unsigned int )((void const   *)("COMM" + 1)) -
                                     (unsigned int )((void const   *)"COMM") == 1U)) {
                                goto _L___1514;
                              } else {
                                if (__s2_len___7 >= 4U) {
                                  _L___1514: /* CIL Label */ 
                                  tmp___396 = 1;
                                } else {
                                  goto _L___1513;
                                }
                              }
                            } else {
                              _L___1513: /* CIL Label */ 
                              tmp___396 = 0;
                            }
                          }
                          if (tmp___396) {
                            if (__s1_len___7 < __s2_len___7) {
                              tmp___378 = __s1_len___7;
                            } else {
                              tmp___378 = __s2_len___7;
                            }
                            tmp___377 = memcmp((void const   *)((char const   *)(pid3frame->id)),
                                               (void const   *)"COMM", tmp___378 +
                                                                       1U);
                          } else {
                            goto _L___1517;
                          }
                        } else {
                          _L___1517: /* CIL Label */ 
                          tmp___394 = __builtin_constant_p(pid3frame->id);
                          if (tmp___394) {
                            if ((unsigned int )((void const   *)(pid3frame->id + 1)) -
                                (unsigned int )((void const   *)(pid3frame->id)) ==
                                1U) {
                              __s1_len___7 = strlen((char const   *)(pid3frame->id));
                              if (__s1_len___7 < 4U) {
                                if ((unsigned int )((void const   *)("COMM" + 1)) -
                                    (unsigned int )((void const   *)"COMM") == 1U) {
                                  __result___421 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                           0)) - (int const   )(*((unsigned char const   *)"COMM" +
                                                                                                  0)));
                                  if (__s1_len___7 > 0U) {
                                    if (__result___421 == 0) {
                                      __result___421 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                               1)) -
                                                              (int const   )(*((unsigned char const   *)"COMM" +
                                                                               1)));
                                      if (__s1_len___7 > 1U) {
                                        if (__result___421 == 0) {
                                          __result___421 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                   2)) -
                                                                  (int const   )(*((unsigned char const   *)"COMM" +
                                                                                   2)));
                                          if (__s1_len___7 > 2U) {
                                            if (__result___421 == 0) {
                                              __result___421 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                       3)) -
                                                                      (int const   )(*((unsigned char const   *)"COMM" +
                                                                                       3)));
                                            } else {
                                              goto _L___1478;
                                            }
                                          } else {
                                            _L___1478: /* CIL Label */ ;
                                          }
                                        } else {
                                          goto _L___1479;
                                        }
                                      } else {
                                        _L___1479: /* CIL Label */ ;
                                      }
                                    } else {
                                      goto _L___1480;
                                    }
                                  } else {
                                    _L___1480: /* CIL Label */ ;
                                  }
                                  tmp___377 = __result___421;
                                } else {
                                  __s2___70 = (unsigned char const   *)"COMM";
                                  __result___422 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                           0)) - (int const   )(*(__s2___70 +
                                                                                                  0)));
                                  if (__s1_len___7 > 0U) {
                                    if (__result___422 == 0) {
                                      __result___422 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                               1)) -
                                                              (int const   )(*(__s2___70 +
                                                                               1)));
                                      if (__s1_len___7 > 1U) {
                                        if (__result___422 == 0) {
                                          __result___422 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                   2)) -
                                                                  (int const   )(*(__s2___70 +
                                                                                   2)));
                                          if (__s1_len___7 > 2U) {
                                            if (__result___422 == 0) {
                                              __result___422 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                       3)) -
                                                                      (int const   )(*(__s2___70 +
                                                                                       3)));
                                            } else {
                                              goto _L___1481;
                                            }
                                          } else {
                                            _L___1481: /* CIL Label */ ;
                                          }
                                        } else {
                                          goto _L___1482;
                                        }
                                      } else {
                                        _L___1482: /* CIL Label */ ;
                                      }
                                    } else {
                                      goto _L___1483;
                                    }
                                  } else {
                                    _L___1483: /* CIL Label */ ;
                                  }
                                  tmp___377 = __result___422;
                                }
                              } else {
                                goto _L___1512;
                              }
                            } else {
                              goto _L___1512;
                            }
                          } else {
                            _L___1512: /* CIL Label */ 
                            if ((unsigned int )((void const   *)("COMM" + 1)) - (unsigned int )((void const   *)"COMM") ==
                                1U) {
                              __s2_len___7 = strlen("COMM");
                              if (__s2_len___7 < 4U) {
                                tmp___393 = __builtin_constant_p(pid3frame->id);
                                if (tmp___393) {
                                  if ((unsigned int )((void const   *)(pid3frame->id +
                                                                       1)) - (unsigned int )((void const   *)(pid3frame->id)) ==
                                      1U) {
                                    __result___429 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                             0)) -
                                                            (int const   )(*((unsigned char const   *)"COMM" +
                                                                             0)));
                                    if (__s2_len___7 > 0U) {
                                      if (__result___429 == 0) {
                                        __result___429 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                 1)) -
                                                                (int const   )(*((unsigned char const   *)"COMM" +
                                                                                 1)));
                                        if (__s2_len___7 > 1U) {
                                          if (__result___429 == 0) {
                                            __result___429 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                     2)) -
                                                                    (int const   )(*((unsigned char const   *)"COMM" +
                                                                                     2)));
                                            if (__s2_len___7 > 2U) {
                                              if (__result___429 == 0) {
                                                __result___429 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                         3)) -
                                                                        (int const   )(*((unsigned char const   *)"COMM" +
                                                                                         3)));
                                              } else {
                                                goto _L___1503;
                                              }
                                            } else {
                                              _L___1503: /* CIL Label */ ;
                                            }
                                          } else {
                                            goto _L___1504;
                                          }
                                        } else {
                                          _L___1504: /* CIL Label */ ;
                                        }
                                      } else {
                                        goto _L___1505;
                                      }
                                    } else {
                                      _L___1505: /* CIL Label */ ;
                                    }
                                    tmp___377 = __result___429;
                                  } else {
                                    goto _L___1509;
                                  }
                                } else {
                                  _L___1509: /* CIL Label */ 
                                  __s1___142 = (unsigned char const   *)((char const   *)(pid3frame->id));
                                  __result___430 = (int )((int const   )(*(__s1___142 +
                                                                           0)) - (int const   )(*((unsigned char const   *)"COMM" +
                                                                                                  0)));
                                  if (__s2_len___7 > 0U) {
                                    if (__result___430 == 0) {
                                      __result___430 = (int )((int const   )(*(__s1___142 +
                                                                               1)) -
                                                              (int const   )(*((unsigned char const   *)"COMM" +
                                                                               1)));
                                      if (__s2_len___7 > 1U) {
                                        if (__result___430 == 0) {
                                          __result___430 = (int )((int const   )(*(__s1___142 +
                                                                                   2)) -
                                                                  (int const   )(*((unsigned char const   *)"COMM" +
                                                                                   2)));
                                          if (__s2_len___7 > 2U) {
                                            if (__result___430 == 0) {
                                              __result___430 = (int )((int const   )(*(__s1___142 +
                                                                                       3)) -
                                                                      (int const   )(*((unsigned char const   *)"COMM" +
                                                                                       3)));
                                            } else {
                                              goto _L___1506;
                                            }
                                          } else {
                                            _L___1506: /* CIL Label */ ;
                                          }
                                        } else {
                                          goto _L___1507;
                                        }
                                      } else {
                                        _L___1507: /* CIL Label */ ;
                                      }
                                    } else {
                                      goto _L___1508;
                                    }
                                  } else {
                                    _L___1508: /* CIL Label */ ;
                                  }
                                  tmp___377 = __result___430;
                                }
                              } else {
                                goto _L___1510;
                              }
                            } else {
                              _L___1510: /* CIL Label */ 
                              tmp___377 = strcmp((char const   *)(pid3frame->id),
                                                 "COMM");
                            }
                          }
                        }
                        if (tmp___377) {
                          tmp___354 = __builtin_constant_p(pid3frame->id);
                          if (tmp___354) {
                            __s1_len___6 = strlen((char const   *)(pid3frame->id));
                            __s2_len___6 = strlen("TPOS");
                            if (! ((unsigned int )((void const   *)(pid3frame->id +
                                                                    1)) - (unsigned int )((void const   *)(pid3frame->id)) ==
                                   1U)) {
                              goto _L___1347;
                            } else {
                              if (__s1_len___6 >= 4U) {
                                _L___1347: /* CIL Label */ 
                                if (! ((unsigned int )((void const   *)("TPOS" + 1)) -
                                       (unsigned int )((void const   *)"TPOS") ==
                                       1U)) {
                                  goto _L___1346;
                                } else {
                                  if (__s2_len___6 >= 4U) {
                                    _L___1346: /* CIL Label */ 
                                    tmp___355 = 1;
                                  } else {
                                    goto _L___1345;
                                  }
                                }
                              } else {
                                _L___1345: /* CIL Label */ 
                                tmp___355 = 0;
                              }
                            }
                            if (tmp___355) {
                              if (__s1_len___6 < __s2_len___6) {
                                tmp___337 = __s1_len___6;
                              } else {
                                tmp___337 = __s2_len___6;
                              }
                              tmp___336 = memcmp((void const   *)((char const   *)(pid3frame->id)),
                                                 (void const   *)"TPOS", tmp___337 +
                                                                         1U);
                            } else {
                              goto _L___1349;
                            }
                          } else {
                            _L___1349: /* CIL Label */ 
                            tmp___353 = __builtin_constant_p(pid3frame->id);
                            if (tmp___353) {
                              if ((unsigned int )((void const   *)(pid3frame->id +
                                                                   1)) - (unsigned int )((void const   *)(pid3frame->id)) ==
                                  1U) {
                                __s1_len___6 = strlen((char const   *)(pid3frame->id));
                                if (__s1_len___6 < 4U) {
                                  if ((unsigned int )((void const   *)("TPOS" + 1)) -
                                      (unsigned int )((void const   *)"TPOS") == 1U) {
                                    __result___373 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                             0)) -
                                                            (int const   )(*((unsigned char const   *)"TPOS" +
                                                                             0)));
                                    if (__s1_len___6 > 0U) {
                                      if (__result___373 == 0) {
                                        __result___373 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                 1)) -
                                                                (int const   )(*((unsigned char const   *)"TPOS" +
                                                                                 1)));
                                        if (__s1_len___6 > 1U) {
                                          if (__result___373 == 0) {
                                            __result___373 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                     2)) -
                                                                    (int const   )(*((unsigned char const   *)"TPOS" +
                                                                                     2)));
                                            if (__s1_len___6 > 2U) {
                                              if (__result___373 == 0) {
                                                __result___373 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                         3)) -
                                                                        (int const   )(*((unsigned char const   *)"TPOS" +
                                                                                         3)));
                                              } else {
                                                goto _L___1310;
                                              }
                                            } else {
                                              _L___1310: /* CIL Label */ ;
                                            }
                                          } else {
                                            goto _L___1311;
                                          }
                                        } else {
                                          _L___1311: /* CIL Label */ ;
                                        }
                                      } else {
                                        goto _L___1312;
                                      }
                                    } else {
                                      _L___1312: /* CIL Label */ ;
                                    }
                                    tmp___336 = __result___373;
                                  } else {
                                    __s2___62 = (unsigned char const   *)"TPOS";
                                    __result___374 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                             0)) -
                                                            (int const   )(*(__s2___62 +
                                                                             0)));
                                    if (__s1_len___6 > 0U) {
                                      if (__result___374 == 0) {
                                        __result___374 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                 1)) -
                                                                (int const   )(*(__s2___62 +
                                                                                 1)));
                                        if (__s1_len___6 > 1U) {
                                          if (__result___374 == 0) {
                                            __result___374 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                     2)) -
                                                                    (int const   )(*(__s2___62 +
                                                                                     2)));
                                            if (__s1_len___6 > 2U) {
                                              if (__result___374 == 0) {
                                                __result___374 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                         3)) -
                                                                        (int const   )(*(__s2___62 +
                                                                                         3)));
                                              } else {
                                                goto _L___1313;
                                              }
                                            } else {
                                              _L___1313: /* CIL Label */ ;
                                            }
                                          } else {
                                            goto _L___1314;
                                          }
                                        } else {
                                          _L___1314: /* CIL Label */ ;
                                        }
                                      } else {
                                        goto _L___1315;
                                      }
                                    } else {
                                      _L___1315: /* CIL Label */ ;
                                    }
                                    tmp___336 = __result___374;
                                  }
                                } else {
                                  goto _L___1344;
                                }
                              } else {
                                goto _L___1344;
                              }
                            } else {
                              _L___1344: /* CIL Label */ 
                              if ((unsigned int )((void const   *)("TPOS" + 1)) -
                                  (unsigned int )((void const   *)"TPOS") == 1U) {
                                __s2_len___6 = strlen("TPOS");
                                if (__s2_len___6 < 4U) {
                                  tmp___352 = __builtin_constant_p(pid3frame->id);
                                  if (tmp___352) {
                                    if ((unsigned int )((void const   *)(pid3frame->id +
                                                                         1)) - (unsigned int )((void const   *)(pid3frame->id)) ==
                                        1U) {
                                      __result___381 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                               0)) -
                                                              (int const   )(*((unsigned char const   *)"TPOS" +
                                                                               0)));
                                      if (__s2_len___6 > 0U) {
                                        if (__result___381 == 0) {
                                          __result___381 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                   1)) -
                                                                  (int const   )(*((unsigned char const   *)"TPOS" +
                                                                                   1)));
                                          if (__s2_len___6 > 1U) {
                                            if (__result___381 == 0) {
                                              __result___381 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                       2)) -
                                                                      (int const   )(*((unsigned char const   *)"TPOS" +
                                                                                       2)));
                                              if (__s2_len___6 > 2U) {
                                                if (__result___381 == 0) {
                                                  __result___381 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                           3)) -
                                                                          (int const   )(*((unsigned char const   *)"TPOS" +
                                                                                           3)));
                                                } else {
                                                  goto _L___1335;
                                                }
                                              } else {
                                                _L___1335: /* CIL Label */ ;
                                              }
                                            } else {
                                              goto _L___1336;
                                            }
                                          } else {
                                            _L___1336: /* CIL Label */ ;
                                          }
                                        } else {
                                          goto _L___1337;
                                        }
                                      } else {
                                        _L___1337: /* CIL Label */ ;
                                      }
                                      tmp___336 = __result___381;
                                    } else {
                                      goto _L___1341;
                                    }
                                  } else {
                                    _L___1341: /* CIL Label */ 
                                    __s1___126 = (unsigned char const   *)((char const   *)(pid3frame->id));
                                    __result___382 = (int )((int const   )(*(__s1___126 +
                                                                             0)) -
                                                            (int const   )(*((unsigned char const   *)"TPOS" +
                                                                             0)));
                                    if (__s2_len___6 > 0U) {
                                      if (__result___382 == 0) {
                                        __result___382 = (int )((int const   )(*(__s1___126 +
                                                                                 1)) -
                                                                (int const   )(*((unsigned char const   *)"TPOS" +
                                                                                 1)));
                                        if (__s2_len___6 > 1U) {
                                          if (__result___382 == 0) {
                                            __result___382 = (int )((int const   )(*(__s1___126 +
                                                                                     2)) -
                                                                    (int const   )(*((unsigned char const   *)"TPOS" +
                                                                                     2)));
                                            if (__s2_len___6 > 2U) {
                                              if (__result___382 == 0) {
                                                __result___382 = (int )((int const   )(*(__s1___126 +
                                                                                         3)) -
                                                                        (int const   )(*((unsigned char const   *)"TPOS" +
                                                                                         3)));
                                              } else {
                                                goto _L___1338;
                                              }
                                            } else {
                                              _L___1338: /* CIL Label */ ;
                                            }
                                          } else {
                                            goto _L___1339;
                                          }
                                        } else {
                                          _L___1339: /* CIL Label */ ;
                                        }
                                      } else {
                                        goto _L___1340;
                                      }
                                    } else {
                                      _L___1340: /* CIL Label */ ;
                                    }
                                    tmp___336 = __result___382;
                                  }
                                } else {
                                  goto _L___1342;
                                }
                              } else {
                                _L___1342: /* CIL Label */ 
                                tmp___336 = strcmp((char const   *)(pid3frame->id),
                                                   "TPOS");
                              }
                            }
                          }
                          if (tmp___336) {
                            tmp___313 = __builtin_constant_p(pid3frame->id);
                            if (tmp___313) {
                              __s1_len___5 = strlen((char const   *)(pid3frame->id));
                              __s2_len___5 = strlen("TRCK");
                              if (! ((unsigned int )((void const   *)(pid3frame->id +
                                                                      1)) - (unsigned int )((void const   *)(pid3frame->id)) ==
                                     1U)) {
                                goto _L___1179;
                              } else {
                                if (__s1_len___5 >= 4U) {
                                  _L___1179: /* CIL Label */ 
                                  if (! ((unsigned int )((void const   *)("TRCK" +
                                                                          1)) - (unsigned int )((void const   *)"TRCK") ==
                                         1U)) {
                                    goto _L___1178;
                                  } else {
                                    if (__s2_len___5 >= 4U) {
                                      _L___1178: /* CIL Label */ 
                                      tmp___314 = 1;
                                    } else {
                                      goto _L___1177;
                                    }
                                  }
                                } else {
                                  _L___1177: /* CIL Label */ 
                                  tmp___314 = 0;
                                }
                              }
                              if (tmp___314) {
                                if (__s1_len___5 < __s2_len___5) {
                                  tmp___296 = __s1_len___5;
                                } else {
                                  tmp___296 = __s2_len___5;
                                }
                                tmp___295 = memcmp((void const   *)((char const   *)(pid3frame->id)),
                                                   (void const   *)"TRCK", tmp___296 +
                                                                           1U);
                              } else {
                                goto _L___1181;
                              }
                            } else {
                              _L___1181: /* CIL Label */ 
                              tmp___312 = __builtin_constant_p(pid3frame->id);
                              if (tmp___312) {
                                if ((unsigned int )((void const   *)(pid3frame->id +
                                                                     1)) - (unsigned int )((void const   *)(pid3frame->id)) ==
                                    1U) {
                                  __s1_len___5 = strlen((char const   *)(pid3frame->id));
                                  if (__s1_len___5 < 4U) {
                                    if ((unsigned int )((void const   *)("TRCK" +
                                                                         1)) - (unsigned int )((void const   *)"TRCK") ==
                                        1U) {
                                      __result___325 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                               0)) -
                                                              (int const   )(*((unsigned char const   *)"TRCK" +
                                                                               0)));
                                      if (__s1_len___5 > 0U) {
                                        if (__result___325 == 0) {
                                          __result___325 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                   1)) -
                                                                  (int const   )(*((unsigned char const   *)"TRCK" +
                                                                                   1)));
                                          if (__s1_len___5 > 1U) {
                                            if (__result___325 == 0) {
                                              __result___325 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                       2)) -
                                                                      (int const   )(*((unsigned char const   *)"TRCK" +
                                                                                       2)));
                                              if (__s1_len___5 > 2U) {
                                                if (__result___325 == 0) {
                                                  __result___325 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                           3)) -
                                                                          (int const   )(*((unsigned char const   *)"TRCK" +
                                                                                           3)));
                                                } else {
                                                  goto _L___1142;
                                                }
                                              } else {
                                                _L___1142: /* CIL Label */ ;
                                              }
                                            } else {
                                              goto _L___1143;
                                            }
                                          } else {
                                            _L___1143: /* CIL Label */ ;
                                          }
                                        } else {
                                          goto _L___1144;
                                        }
                                      } else {
                                        _L___1144: /* CIL Label */ ;
                                      }
                                      tmp___295 = __result___325;
                                    } else {
                                      __s2___54 = (unsigned char const   *)"TRCK";
                                      __result___326 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                               0)) -
                                                              (int const   )(*(__s2___54 +
                                                                               0)));
                                      if (__s1_len___5 > 0U) {
                                        if (__result___326 == 0) {
                                          __result___326 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                   1)) -
                                                                  (int const   )(*(__s2___54 +
                                                                                   1)));
                                          if (__s1_len___5 > 1U) {
                                            if (__result___326 == 0) {
                                              __result___326 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                       2)) -
                                                                      (int const   )(*(__s2___54 +
                                                                                       2)));
                                              if (__s1_len___5 > 2U) {
                                                if (__result___326 == 0) {
                                                  __result___326 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                           3)) -
                                                                          (int const   )(*(__s2___54 +
                                                                                           3)));
                                                } else {
                                                  goto _L___1145;
                                                }
                                              } else {
                                                _L___1145: /* CIL Label */ ;
                                              }
                                            } else {
                                              goto _L___1146;
                                            }
                                          } else {
                                            _L___1146: /* CIL Label */ ;
                                          }
                                        } else {
                                          goto _L___1147;
                                        }
                                      } else {
                                        _L___1147: /* CIL Label */ ;
                                      }
                                      tmp___295 = __result___326;
                                    }
                                  } else {
                                    goto _L___1176;
                                  }
                                } else {
                                  goto _L___1176;
                                }
                              } else {
                                _L___1176: /* CIL Label */ 
                                if ((unsigned int )((void const   *)("TRCK" + 1)) -
                                    (unsigned int )((void const   *)"TRCK") == 1U) {
                                  __s2_len___5 = strlen("TRCK");
                                  if (__s2_len___5 < 4U) {
                                    tmp___311 = __builtin_constant_p(pid3frame->id);
                                    if (tmp___311) {
                                      if ((unsigned int )((void const   *)(pid3frame->id +
                                                                           1)) - (unsigned int )((void const   *)(pid3frame->id)) ==
                                          1U) {
                                        __result___333 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                 0)) -
                                                                (int const   )(*((unsigned char const   *)"TRCK" +
                                                                                 0)));
                                        if (__s2_len___5 > 0U) {
                                          if (__result___333 == 0) {
                                            __result___333 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                     1)) -
                                                                    (int const   )(*((unsigned char const   *)"TRCK" +
                                                                                     1)));
                                            if (__s2_len___5 > 1U) {
                                              if (__result___333 == 0) {
                                                __result___333 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                         2)) -
                                                                        (int const   )(*((unsigned char const   *)"TRCK" +
                                                                                         2)));
                                                if (__s2_len___5 > 2U) {
                                                  if (__result___333 == 0) {
                                                    __result___333 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                             3)) -
                                                                            (int const   )(*((unsigned char const   *)"TRCK" +
                                                                                             3)));
                                                  } else {
                                                    goto _L___1167;
                                                  }
                                                } else {
                                                  _L___1167: /* CIL Label */ ;
                                                }
                                              } else {
                                                goto _L___1168;
                                              }
                                            } else {
                                              _L___1168: /* CIL Label */ ;
                                            }
                                          } else {
                                            goto _L___1169;
                                          }
                                        } else {
                                          _L___1169: /* CIL Label */ ;
                                        }
                                        tmp___295 = __result___333;
                                      } else {
                                        goto _L___1173;
                                      }
                                    } else {
                                      _L___1173: /* CIL Label */ 
                                      __s1___110 = (unsigned char const   *)((char const   *)(pid3frame->id));
                                      __result___334 = (int )((int const   )(*(__s1___110 +
                                                                               0)) -
                                                              (int const   )(*((unsigned char const   *)"TRCK" +
                                                                               0)));
                                      if (__s2_len___5 > 0U) {
                                        if (__result___334 == 0) {
                                          __result___334 = (int )((int const   )(*(__s1___110 +
                                                                                   1)) -
                                                                  (int const   )(*((unsigned char const   *)"TRCK" +
                                                                                   1)));
                                          if (__s2_len___5 > 1U) {
                                            if (__result___334 == 0) {
                                              __result___334 = (int )((int const   )(*(__s1___110 +
                                                                                       2)) -
                                                                      (int const   )(*((unsigned char const   *)"TRCK" +
                                                                                       2)));
                                              if (__s2_len___5 > 2U) {
                                                if (__result___334 == 0) {
                                                  __result___334 = (int )((int const   )(*(__s1___110 +
                                                                                           3)) -
                                                                          (int const   )(*((unsigned char const   *)"TRCK" +
                                                                                           3)));
                                                } else {
                                                  goto _L___1170;
                                                }
                                              } else {
                                                _L___1170: /* CIL Label */ ;
                                              }
                                            } else {
                                              goto _L___1171;
                                            }
                                          } else {
                                            _L___1171: /* CIL Label */ ;
                                          }
                                        } else {
                                          goto _L___1172;
                                        }
                                      } else {
                                        _L___1172: /* CIL Label */ ;
                                      }
                                      tmp___295 = __result___334;
                                    }
                                  } else {
                                    goto _L___1174;
                                  }
                                } else {
                                  _L___1174: /* CIL Label */ 
                                  tmp___295 = strcmp((char const   *)(pid3frame->id),
                                                     "TRCK");
                                }
                              }
                            }
                            if (tmp___295) {
                              tmp___272 = __builtin_constant_p(pid3frame->id);
                              if (tmp___272) {
                                __s1_len___4 = strlen((char const   *)(pid3frame->id));
                                __s2_len___4 = strlen("TDRC");
                                if (! ((unsigned int )((void const   *)(pid3frame->id +
                                                                        1)) - (unsigned int )((void const   *)(pid3frame->id)) ==
                                       1U)) {
                                  goto _L___1011;
                                } else {
                                  if (__s1_len___4 >= 4U) {
                                    _L___1011: /* CIL Label */ 
                                    if (! ((unsigned int )((void const   *)("TDRC" +
                                                                            1)) -
                                           (unsigned int )((void const   *)"TDRC") ==
                                           1U)) {
                                      goto _L___1010;
                                    } else {
                                      if (__s2_len___4 >= 4U) {
                                        _L___1010: /* CIL Label */ 
                                        tmp___273 = 1;
                                      } else {
                                        goto _L___1009;
                                      }
                                    }
                                  } else {
                                    _L___1009: /* CIL Label */ 
                                    tmp___273 = 0;
                                  }
                                }
                                if (tmp___273) {
                                  if (__s1_len___4 < __s2_len___4) {
                                    tmp___255 = __s1_len___4;
                                  } else {
                                    tmp___255 = __s2_len___4;
                                  }
                                  tmp___254 = memcmp((void const   *)((char const   *)(pid3frame->id)),
                                                     (void const   *)"TDRC", tmp___255 +
                                                                             1U);
                                } else {
                                  goto _L___1013;
                                }
                              } else {
                                _L___1013: /* CIL Label */ 
                                tmp___271 = __builtin_constant_p(pid3frame->id);
                                if (tmp___271) {
                                  if ((unsigned int )((void const   *)(pid3frame->id +
                                                                       1)) - (unsigned int )((void const   *)(pid3frame->id)) ==
                                      1U) {
                                    __s1_len___4 = strlen((char const   *)(pid3frame->id));
                                    if (__s1_len___4 < 4U) {
                                      if ((unsigned int )((void const   *)("TDRC" +
                                                                           1)) - (unsigned int )((void const   *)"TDRC") ==
                                          1U) {
                                        __result___277 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                 0)) -
                                                                (int const   )(*((unsigned char const   *)"TDRC" +
                                                                                 0)));
                                        if (__s1_len___4 > 0U) {
                                          if (__result___277 == 0) {
                                            __result___277 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                     1)) -
                                                                    (int const   )(*((unsigned char const   *)"TDRC" +
                                                                                     1)));
                                            if (__s1_len___4 > 1U) {
                                              if (__result___277 == 0) {
                                                __result___277 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                         2)) -
                                                                        (int const   )(*((unsigned char const   *)"TDRC" +
                                                                                         2)));
                                                if (__s1_len___4 > 2U) {
                                                  if (__result___277 == 0) {
                                                    __result___277 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                             3)) -
                                                                            (int const   )(*((unsigned char const   *)"TDRC" +
                                                                                             3)));
                                                  } else {
                                                    goto _L___974;
                                                  }
                                                } else {
                                                  _L___974: /* CIL Label */ ;
                                                }
                                              } else {
                                                goto _L___975;
                                              }
                                            } else {
                                              _L___975: /* CIL Label */ ;
                                            }
                                          } else {
                                            goto _L___976;
                                          }
                                        } else {
                                          _L___976: /* CIL Label */ ;
                                        }
                                        tmp___254 = __result___277;
                                      } else {
                                        __s2___46 = (unsigned char const   *)"TDRC";
                                        __result___278 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                 0)) -
                                                                (int const   )(*(__s2___46 +
                                                                                 0)));
                                        if (__s1_len___4 > 0U) {
                                          if (__result___278 == 0) {
                                            __result___278 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                     1)) -
                                                                    (int const   )(*(__s2___46 +
                                                                                     1)));
                                            if (__s1_len___4 > 1U) {
                                              if (__result___278 == 0) {
                                                __result___278 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                         2)) -
                                                                        (int const   )(*(__s2___46 +
                                                                                         2)));
                                                if (__s1_len___4 > 2U) {
                                                  if (__result___278 == 0) {
                                                    __result___278 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                             3)) -
                                                                            (int const   )(*(__s2___46 +
                                                                                             3)));
                                                  } else {
                                                    goto _L___977;
                                                  }
                                                } else {
                                                  _L___977: /* CIL Label */ ;
                                                }
                                              } else {
                                                goto _L___978;
                                              }
                                            } else {
                                              _L___978: /* CIL Label */ ;
                                            }
                                          } else {
                                            goto _L___979;
                                          }
                                        } else {
                                          _L___979: /* CIL Label */ ;
                                        }
                                        tmp___254 = __result___278;
                                      }
                                    } else {
                                      goto _L___1008;
                                    }
                                  } else {
                                    goto _L___1008;
                                  }
                                } else {
                                  _L___1008: /* CIL Label */ 
                                  if ((unsigned int )((void const   *)("TDRC" + 1)) -
                                      (unsigned int )((void const   *)"TDRC") == 1U) {
                                    __s2_len___4 = strlen("TDRC");
                                    if (__s2_len___4 < 4U) {
                                      tmp___270 = __builtin_constant_p(pid3frame->id);
                                      if (tmp___270) {
                                        if ((unsigned int )((void const   *)(pid3frame->id +
                                                                             1)) -
                                            (unsigned int )((void const   *)(pid3frame->id)) ==
                                            1U) {
                                          __result___285 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                   0)) -
                                                                  (int const   )(*((unsigned char const   *)"TDRC" +
                                                                                   0)));
                                          if (__s2_len___4 > 0U) {
                                            if (__result___285 == 0) {
                                              __result___285 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                       1)) -
                                                                      (int const   )(*((unsigned char const   *)"TDRC" +
                                                                                       1)));
                                              if (__s2_len___4 > 1U) {
                                                if (__result___285 == 0) {
                                                  __result___285 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                           2)) -
                                                                          (int const   )(*((unsigned char const   *)"TDRC" +
                                                                                           2)));
                                                  if (__s2_len___4 > 2U) {
                                                    if (__result___285 == 0) {
                                                      __result___285 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                               3)) -
                                                                              (int const   )(*((unsigned char const   *)"TDRC" +
                                                                                               3)));
                                                    } else {
                                                      goto _L___999;
                                                    }
                                                  } else {
                                                    _L___999: /* CIL Label */ ;
                                                  }
                                                } else {
                                                  goto _L___1000;
                                                }
                                              } else {
                                                _L___1000: /* CIL Label */ ;
                                              }
                                            } else {
                                              goto _L___1001;
                                            }
                                          } else {
                                            _L___1001: /* CIL Label */ ;
                                          }
                                          tmp___254 = __result___285;
                                        } else {
                                          goto _L___1005;
                                        }
                                      } else {
                                        _L___1005: /* CIL Label */ 
                                        __s1___94 = (unsigned char const   *)((char const   *)(pid3frame->id));
                                        __result___286 = (int )((int const   )(*(__s1___94 +
                                                                                 0)) -
                                                                (int const   )(*((unsigned char const   *)"TDRC" +
                                                                                 0)));
                                        if (__s2_len___4 > 0U) {
                                          if (__result___286 == 0) {
                                            __result___286 = (int )((int const   )(*(__s1___94 +
                                                                                     1)) -
                                                                    (int const   )(*((unsigned char const   *)"TDRC" +
                                                                                     1)));
                                            if (__s2_len___4 > 1U) {
                                              if (__result___286 == 0) {
                                                __result___286 = (int )((int const   )(*(__s1___94 +
                                                                                         2)) -
                                                                        (int const   )(*((unsigned char const   *)"TDRC" +
                                                                                         2)));
                                                if (__s2_len___4 > 2U) {
                                                  if (__result___286 == 0) {
                                                    __result___286 = (int )((int const   )(*(__s1___94 +
                                                                                             3)) -
                                                                            (int const   )(*((unsigned char const   *)"TDRC" +
                                                                                             3)));
                                                  } else {
                                                    goto _L___1002;
                                                  }
                                                } else {
                                                  _L___1002: /* CIL Label */ ;
                                                }
                                              } else {
                                                goto _L___1003;
                                              }
                                            } else {
                                              _L___1003: /* CIL Label */ ;
                                            }
                                          } else {
                                            goto _L___1004;
                                          }
                                        } else {
                                          _L___1004: /* CIL Label */ ;
                                        }
                                        tmp___254 = __result___286;
                                      }
                                    } else {
                                      goto _L___1006;
                                    }
                                  } else {
                                    _L___1006: /* CIL Label */ 
                                    tmp___254 = strcmp((char const   *)(pid3frame->id),
                                                       "TDRC");
                                  }
                                }
                              }
                              if (tmp___254) {
                                tmp___231 = __builtin_constant_p(pid3frame->id);
                                if (tmp___231) {
                                  __s1_len___3 = strlen((char const   *)(pid3frame->id));
                                  __s2_len___3 = strlen("TLEN");
                                  if (! ((unsigned int )((void const   *)(pid3frame->id +
                                                                          1)) - (unsigned int )((void const   *)(pid3frame->id)) ==
                                         1U)) {
                                    goto _L___843;
                                  } else {
                                    if (__s1_len___3 >= 4U) {
                                      _L___843: /* CIL Label */ 
                                      if (! ((unsigned int )((void const   *)("TLEN" +
                                                                              1)) -
                                             (unsigned int )((void const   *)"TLEN") ==
                                             1U)) {
                                        goto _L___842;
                                      } else {
                                        if (__s2_len___3 >= 4U) {
                                          _L___842: /* CIL Label */ 
                                          tmp___232 = 1;
                                        } else {
                                          goto _L___841;
                                        }
                                      }
                                    } else {
                                      _L___841: /* CIL Label */ 
                                      tmp___232 = 0;
                                    }
                                  }
                                  if (tmp___232) {
                                    if (__s1_len___3 < __s2_len___3) {
                                      tmp___214 = __s1_len___3;
                                    } else {
                                      tmp___214 = __s2_len___3;
                                    }
                                    tmp___213 = memcmp((void const   *)((char const   *)(pid3frame->id)),
                                                       (void const   *)"TLEN", tmp___214 +
                                                                               1U);
                                  } else {
                                    goto _L___845;
                                  }
                                } else {
                                  _L___845: /* CIL Label */ 
                                  tmp___230 = __builtin_constant_p(pid3frame->id);
                                  if (tmp___230) {
                                    if ((unsigned int )((void const   *)(pid3frame->id +
                                                                         1)) - (unsigned int )((void const   *)(pid3frame->id)) ==
                                        1U) {
                                      __s1_len___3 = strlen((char const   *)(pid3frame->id));
                                      if (__s1_len___3 < 4U) {
                                        if ((unsigned int )((void const   *)("TLEN" +
                                                                             1)) -
                                            (unsigned int )((void const   *)"TLEN") ==
                                            1U) {
                                          __result___229 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                   0)) -
                                                                  (int const   )(*((unsigned char const   *)"TLEN" +
                                                                                   0)));
                                          if (__s1_len___3 > 0U) {
                                            if (__result___229 == 0) {
                                              __result___229 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                       1)) -
                                                                      (int const   )(*((unsigned char const   *)"TLEN" +
                                                                                       1)));
                                              if (__s1_len___3 > 1U) {
                                                if (__result___229 == 0) {
                                                  __result___229 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                           2)) -
                                                                          (int const   )(*((unsigned char const   *)"TLEN" +
                                                                                           2)));
                                                  if (__s1_len___3 > 2U) {
                                                    if (__result___229 == 0) {
                                                      __result___229 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                               3)) -
                                                                              (int const   )(*((unsigned char const   *)"TLEN" +
                                                                                               3)));
                                                    } else {
                                                      goto _L___806;
                                                    }
                                                  } else {
                                                    _L___806: /* CIL Label */ ;
                                                  }
                                                } else {
                                                  goto _L___807;
                                                }
                                              } else {
                                                _L___807: /* CIL Label */ ;
                                              }
                                            } else {
                                              goto _L___808;
                                            }
                                          } else {
                                            _L___808: /* CIL Label */ ;
                                          }
                                          tmp___213 = __result___229;
                                        } else {
                                          __s2___38 = (unsigned char const   *)"TLEN";
                                          __result___230 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                   0)) -
                                                                  (int const   )(*(__s2___38 +
                                                                                   0)));
                                          if (__s1_len___3 > 0U) {
                                            if (__result___230 == 0) {
                                              __result___230 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                       1)) -
                                                                      (int const   )(*(__s2___38 +
                                                                                       1)));
                                              if (__s1_len___3 > 1U) {
                                                if (__result___230 == 0) {
                                                  __result___230 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                           2)) -
                                                                          (int const   )(*(__s2___38 +
                                                                                           2)));
                                                  if (__s1_len___3 > 2U) {
                                                    if (__result___230 == 0) {
                                                      __result___230 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                               3)) -
                                                                              (int const   )(*(__s2___38 +
                                                                                               3)));
                                                    } else {
                                                      goto _L___809;
                                                    }
                                                  } else {
                                                    _L___809: /* CIL Label */ ;
                                                  }
                                                } else {
                                                  goto _L___810;
                                                }
                                              } else {
                                                _L___810: /* CIL Label */ ;
                                              }
                                            } else {
                                              goto _L___811;
                                            }
                                          } else {
                                            _L___811: /* CIL Label */ ;
                                          }
                                          tmp___213 = __result___230;
                                        }
                                      } else {
                                        goto _L___840;
                                      }
                                    } else {
                                      goto _L___840;
                                    }
                                  } else {
                                    _L___840: /* CIL Label */ 
                                    if ((unsigned int )((void const   *)("TLEN" +
                                                                         1)) - (unsigned int )((void const   *)"TLEN") ==
                                        1U) {
                                      __s2_len___3 = strlen("TLEN");
                                      if (__s2_len___3 < 4U) {
                                        tmp___229 = __builtin_constant_p(pid3frame->id);
                                        if (tmp___229) {
                                          if ((unsigned int )((void const   *)(pid3frame->id +
                                                                               1)) -
                                              (unsigned int )((void const   *)(pid3frame->id)) ==
                                              1U) {
                                            __result___237 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                     0)) -
                                                                    (int const   )(*((unsigned char const   *)"TLEN" +
                                                                                     0)));
                                            if (__s2_len___3 > 0U) {
                                              if (__result___237 == 0) {
                                                __result___237 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                         1)) -
                                                                        (int const   )(*((unsigned char const   *)"TLEN" +
                                                                                         1)));
                                                if (__s2_len___3 > 1U) {
                                                  if (__result___237 == 0) {
                                                    __result___237 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                             2)) -
                                                                            (int const   )(*((unsigned char const   *)"TLEN" +
                                                                                             2)));
                                                    if (__s2_len___3 > 2U) {
                                                      if (__result___237 == 0) {
                                                        __result___237 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                                 3)) -
                                                                                (int const   )(*((unsigned char const   *)"TLEN" +
                                                                                                 3)));
                                                      } else {
                                                        goto _L___831;
                                                      }
                                                    } else {
                                                      _L___831: /* CIL Label */ ;
                                                    }
                                                  } else {
                                                    goto _L___832;
                                                  }
                                                } else {
                                                  _L___832: /* CIL Label */ ;
                                                }
                                              } else {
                                                goto _L___833;
                                              }
                                            } else {
                                              _L___833: /* CIL Label */ ;
                                            }
                                            tmp___213 = __result___237;
                                          } else {
                                            goto _L___837;
                                          }
                                        } else {
                                          _L___837: /* CIL Label */ 
                                          __s1___78 = (unsigned char const   *)((char const   *)(pid3frame->id));
                                          __result___238 = (int )((int const   )(*(__s1___78 +
                                                                                   0)) -
                                                                  (int const   )(*((unsigned char const   *)"TLEN" +
                                                                                   0)));
                                          if (__s2_len___3 > 0U) {
                                            if (__result___238 == 0) {
                                              __result___238 = (int )((int const   )(*(__s1___78 +
                                                                                       1)) -
                                                                      (int const   )(*((unsigned char const   *)"TLEN" +
                                                                                       1)));
                                              if (__s2_len___3 > 1U) {
                                                if (__result___238 == 0) {
                                                  __result___238 = (int )((int const   )(*(__s1___78 +
                                                                                           2)) -
                                                                          (int const   )(*((unsigned char const   *)"TLEN" +
                                                                                           2)));
                                                  if (__s2_len___3 > 2U) {
                                                    if (__result___238 == 0) {
                                                      __result___238 = (int )((int const   )(*(__s1___78 +
                                                                                               3)) -
                                                                              (int const   )(*((unsigned char const   *)"TLEN" +
                                                                                               3)));
                                                    } else {
                                                      goto _L___834;
                                                    }
                                                  } else {
                                                    _L___834: /* CIL Label */ ;
                                                  }
                                                } else {
                                                  goto _L___835;
                                                }
                                              } else {
                                                _L___835: /* CIL Label */ ;
                                              }
                                            } else {
                                              goto _L___836;
                                            }
                                          } else {
                                            _L___836: /* CIL Label */ ;
                                          }
                                          tmp___213 = __result___238;
                                        }
                                      } else {
                                        goto _L___838;
                                      }
                                    } else {
                                      _L___838: /* CIL Label */ 
                                      tmp___213 = strcmp((char const   *)(pid3frame->id),
                                                         "TLEN");
                                    }
                                  }
                                }
                                if (tmp___213) {
                                  tmp___190 = __builtin_constant_p(pid3frame->id);
                                  if (tmp___190) {
                                    __s1_len___2 = strlen((char const   *)(pid3frame->id));
                                    __s2_len___2 = strlen("TBPM");
                                    if (! ((unsigned int )((void const   *)(pid3frame->id +
                                                                            1)) -
                                           (unsigned int )((void const   *)(pid3frame->id)) ==
                                           1U)) {
                                      goto _L___675;
                                    } else {
                                      if (__s1_len___2 >= 4U) {
                                        _L___675: /* CIL Label */ 
                                        if (! ((unsigned int )((void const   *)("TBPM" +
                                                                                1)) -
                                               (unsigned int )((void const   *)"TBPM") ==
                                               1U)) {
                                          goto _L___674;
                                        } else {
                                          if (__s2_len___2 >= 4U) {
                                            _L___674: /* CIL Label */ 
                                            tmp___191 = 1;
                                          } else {
                                            goto _L___673;
                                          }
                                        }
                                      } else {
                                        _L___673: /* CIL Label */ 
                                        tmp___191 = 0;
                                      }
                                    }
                                    if (tmp___191) {
                                      if (__s1_len___2 < __s2_len___2) {
                                        tmp___173 = __s1_len___2;
                                      } else {
                                        tmp___173 = __s2_len___2;
                                      }
                                      tmp___172 = memcmp((void const   *)((char const   *)(pid3frame->id)),
                                                         (void const   *)"TBPM", tmp___173 +
                                                                                 1U);
                                    } else {
                                      goto _L___677;
                                    }
                                  } else {
                                    _L___677: /* CIL Label */ 
                                    tmp___189 = __builtin_constant_p(pid3frame->id);
                                    if (tmp___189) {
                                      if ((unsigned int )((void const   *)(pid3frame->id +
                                                                           1)) - (unsigned int )((void const   *)(pid3frame->id)) ==
                                          1U) {
                                        __s1_len___2 = strlen((char const   *)(pid3frame->id));
                                        if (__s1_len___2 < 4U) {
                                          if ((unsigned int )((void const   *)("TBPM" +
                                                                               1)) -
                                              (unsigned int )((void const   *)"TBPM") ==
                                              1U) {
                                            __result___181 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                     0)) -
                                                                    (int const   )(*((unsigned char const   *)"TBPM" +
                                                                                     0)));
                                            if (__s1_len___2 > 0U) {
                                              if (__result___181 == 0) {
                                                __result___181 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                         1)) -
                                                                        (int const   )(*((unsigned char const   *)"TBPM" +
                                                                                         1)));
                                                if (__s1_len___2 > 1U) {
                                                  if (__result___181 == 0) {
                                                    __result___181 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                             2)) -
                                                                            (int const   )(*((unsigned char const   *)"TBPM" +
                                                                                             2)));
                                                    if (__s1_len___2 > 2U) {
                                                      if (__result___181 == 0) {
                                                        __result___181 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                                 3)) -
                                                                                (int const   )(*((unsigned char const   *)"TBPM" +
                                                                                                 3)));
                                                      } else {
                                                        goto _L___638;
                                                      }
                                                    } else {
                                                      _L___638: /* CIL Label */ ;
                                                    }
                                                  } else {
                                                    goto _L___639;
                                                  }
                                                } else {
                                                  _L___639: /* CIL Label */ ;
                                                }
                                              } else {
                                                goto _L___640;
                                              }
                                            } else {
                                              _L___640: /* CIL Label */ ;
                                            }
                                            tmp___172 = __result___181;
                                          } else {
                                            __s2___30 = (unsigned char const   *)"TBPM";
                                            __result___182 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                     0)) -
                                                                    (int const   )(*(__s2___30 +
                                                                                     0)));
                                            if (__s1_len___2 > 0U) {
                                              if (__result___182 == 0) {
                                                __result___182 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                         1)) -
                                                                        (int const   )(*(__s2___30 +
                                                                                         1)));
                                                if (__s1_len___2 > 1U) {
                                                  if (__result___182 == 0) {
                                                    __result___182 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                             2)) -
                                                                            (int const   )(*(__s2___30 +
                                                                                             2)));
                                                    if (__s1_len___2 > 2U) {
                                                      if (__result___182 == 0) {
                                                        __result___182 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                                 3)) -
                                                                                (int const   )(*(__s2___30 +
                                                                                                 3)));
                                                      } else {
                                                        goto _L___641;
                                                      }
                                                    } else {
                                                      _L___641: /* CIL Label */ ;
                                                    }
                                                  } else {
                                                    goto _L___642;
                                                  }
                                                } else {
                                                  _L___642: /* CIL Label */ ;
                                                }
                                              } else {
                                                goto _L___643;
                                              }
                                            } else {
                                              _L___643: /* CIL Label */ ;
                                            }
                                            tmp___172 = __result___182;
                                          }
                                        } else {
                                          goto _L___672;
                                        }
                                      } else {
                                        goto _L___672;
                                      }
                                    } else {
                                      _L___672: /* CIL Label */ 
                                      if ((unsigned int )((void const   *)("TBPM" +
                                                                           1)) - (unsigned int )((void const   *)"TBPM") ==
                                          1U) {
                                        __s2_len___2 = strlen("TBPM");
                                        if (__s2_len___2 < 4U) {
                                          tmp___188 = __builtin_constant_p(pid3frame->id);
                                          if (tmp___188) {
                                            if ((unsigned int )((void const   *)(pid3frame->id +
                                                                                 1)) -
                                                (unsigned int )((void const   *)(pid3frame->id)) ==
                                                1U) {
                                              __result___189 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                       0)) -
                                                                      (int const   )(*((unsigned char const   *)"TBPM" +
                                                                                       0)));
                                              if (__s2_len___2 > 0U) {
                                                if (__result___189 == 0) {
                                                  __result___189 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                           1)) -
                                                                          (int const   )(*((unsigned char const   *)"TBPM" +
                                                                                           1)));
                                                  if (__s2_len___2 > 1U) {
                                                    if (__result___189 == 0) {
                                                      __result___189 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                               2)) -
                                                                              (int const   )(*((unsigned char const   *)"TBPM" +
                                                                                               2)));
                                                      if (__s2_len___2 > 2U) {
                                                        if (__result___189 == 0) {
                                                          __result___189 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                                   3)) -
                                                                                  (int const   )(*((unsigned char const   *)"TBPM" +
                                                                                                   3)));
                                                        } else {
                                                          goto _L___663;
                                                        }
                                                      } else {
                                                        _L___663: /* CIL Label */ ;
                                                      }
                                                    } else {
                                                      goto _L___664;
                                                    }
                                                  } else {
                                                    _L___664: /* CIL Label */ ;
                                                  }
                                                } else {
                                                  goto _L___665;
                                                }
                                              } else {
                                                _L___665: /* CIL Label */ ;
                                              }
                                              tmp___172 = __result___189;
                                            } else {
                                              goto _L___669;
                                            }
                                          } else {
                                            _L___669: /* CIL Label */ 
                                            __s1___62 = (unsigned char const   *)((char const   *)(pid3frame->id));
                                            __result___190 = (int )((int const   )(*(__s1___62 +
                                                                                     0)) -
                                                                    (int const   )(*((unsigned char const   *)"TBPM" +
                                                                                     0)));
                                            if (__s2_len___2 > 0U) {
                                              if (__result___190 == 0) {
                                                __result___190 = (int )((int const   )(*(__s1___62 +
                                                                                         1)) -
                                                                        (int const   )(*((unsigned char const   *)"TBPM" +
                                                                                         1)));
                                                if (__s2_len___2 > 1U) {
                                                  if (__result___190 == 0) {
                                                    __result___190 = (int )((int const   )(*(__s1___62 +
                                                                                             2)) -
                                                                            (int const   )(*((unsigned char const   *)"TBPM" +
                                                                                             2)));
                                                    if (__s2_len___2 > 2U) {
                                                      if (__result___190 == 0) {
                                                        __result___190 = (int )((int const   )(*(__s1___62 +
                                                                                                 3)) -
                                                                                (int const   )(*((unsigned char const   *)"TBPM" +
                                                                                                 3)));
                                                      } else {
                                                        goto _L___666;
                                                      }
                                                    } else {
                                                      _L___666: /* CIL Label */ ;
                                                    }
                                                  } else {
                                                    goto _L___667;
                                                  }
                                                } else {
                                                  _L___667: /* CIL Label */ ;
                                                }
                                              } else {
                                                goto _L___668;
                                              }
                                            } else {
                                              _L___668: /* CIL Label */ ;
                                            }
                                            tmp___172 = __result___190;
                                          }
                                        } else {
                                          goto _L___670;
                                        }
                                      } else {
                                        _L___670: /* CIL Label */ 
                                        tmp___172 = strcmp((char const   *)(pid3frame->id),
                                                           "TBPM");
                                      }
                                    }
                                  }
                                  if (tmp___172) {
                                    tmp___149 = __builtin_constant_p(pid3frame->id);
                                    if (tmp___149) {
                                      __s1_len___1 = strlen((char const   *)(pid3frame->id));
                                      __s2_len___1 = strlen("TCMP");
                                      if (! ((unsigned int )((void const   *)(pid3frame->id +
                                                                              1)) -
                                             (unsigned int )((void const   *)(pid3frame->id)) ==
                                             1U)) {
                                        goto _L___507;
                                      } else {
                                        if (__s1_len___1 >= 4U) {
                                          _L___507: /* CIL Label */ 
                                          if (! ((unsigned int )((void const   *)("TCMP" +
                                                                                  1)) -
                                                 (unsigned int )((void const   *)"TCMP") ==
                                                 1U)) {
                                            goto _L___506;
                                          } else {
                                            if (__s2_len___1 >= 4U) {
                                              _L___506: /* CIL Label */ 
                                              tmp___150 = 1;
                                            } else {
                                              goto _L___505;
                                            }
                                          }
                                        } else {
                                          _L___505: /* CIL Label */ 
                                          tmp___150 = 0;
                                        }
                                      }
                                      if (tmp___150) {
                                        if (__s1_len___1 < __s2_len___1) {
                                          tmp___132 = __s1_len___1;
                                        } else {
                                          tmp___132 = __s2_len___1;
                                        }
                                        tmp___131 = memcmp((void const   *)((char const   *)(pid3frame->id)),
                                                           (void const   *)"TCMP",
                                                           tmp___132 + 1U);
                                      } else {
                                        goto _L___509;
                                      }
                                    } else {
                                      _L___509: /* CIL Label */ 
                                      tmp___148 = __builtin_constant_p(pid3frame->id);
                                      if (tmp___148) {
                                        if ((unsigned int )((void const   *)(pid3frame->id +
                                                                             1)) -
                                            (unsigned int )((void const   *)(pid3frame->id)) ==
                                            1U) {
                                          __s1_len___1 = strlen((char const   *)(pid3frame->id));
                                          if (__s1_len___1 < 4U) {
                                            if ((unsigned int )((void const   *)("TCMP" +
                                                                                 1)) -
                                                (unsigned int )((void const   *)"TCMP") ==
                                                1U) {
                                              __result___133 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                       0)) -
                                                                      (int const   )(*((unsigned char const   *)"TCMP" +
                                                                                       0)));
                                              if (__s1_len___1 > 0U) {
                                                if (__result___133 == 0) {
                                                  __result___133 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                           1)) -
                                                                          (int const   )(*((unsigned char const   *)"TCMP" +
                                                                                           1)));
                                                  if (__s1_len___1 > 1U) {
                                                    if (__result___133 == 0) {
                                                      __result___133 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                               2)) -
                                                                              (int const   )(*((unsigned char const   *)"TCMP" +
                                                                                               2)));
                                                      if (__s1_len___1 > 2U) {
                                                        if (__result___133 == 0) {
                                                          __result___133 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                                   3)) -
                                                                                  (int const   )(*((unsigned char const   *)"TCMP" +
                                                                                                   3)));
                                                        } else {
                                                          goto _L___470;
                                                        }
                                                      } else {
                                                        _L___470: /* CIL Label */ ;
                                                      }
                                                    } else {
                                                      goto _L___471;
                                                    }
                                                  } else {
                                                    _L___471: /* CIL Label */ ;
                                                  }
                                                } else {
                                                  goto _L___472;
                                                }
                                              } else {
                                                _L___472: /* CIL Label */ ;
                                              }
                                              tmp___131 = __result___133;
                                            } else {
                                              __s2___22 = (unsigned char const   *)"TCMP";
                                              __result___134 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                       0)) -
                                                                      (int const   )(*(__s2___22 +
                                                                                       0)));
                                              if (__s1_len___1 > 0U) {
                                                if (__result___134 == 0) {
                                                  __result___134 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                           1)) -
                                                                          (int const   )(*(__s2___22 +
                                                                                           1)));
                                                  if (__s1_len___1 > 1U) {
                                                    if (__result___134 == 0) {
                                                      __result___134 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                               2)) -
                                                                              (int const   )(*(__s2___22 +
                                                                                               2)));
                                                      if (__s1_len___1 > 2U) {
                                                        if (__result___134 == 0) {
                                                          __result___134 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                                   3)) -
                                                                                  (int const   )(*(__s2___22 +
                                                                                                   3)));
                                                        } else {
                                                          goto _L___473;
                                                        }
                                                      } else {
                                                        _L___473: /* CIL Label */ ;
                                                      }
                                                    } else {
                                                      goto _L___474;
                                                    }
                                                  } else {
                                                    _L___474: /* CIL Label */ ;
                                                  }
                                                } else {
                                                  goto _L___475;
                                                }
                                              } else {
                                                _L___475: /* CIL Label */ ;
                                              }
                                              tmp___131 = __result___134;
                                            }
                                          } else {
                                            goto _L___504;
                                          }
                                        } else {
                                          goto _L___504;
                                        }
                                      } else {
                                        _L___504: /* CIL Label */ 
                                        if ((unsigned int )((void const   *)("TCMP" +
                                                                             1)) -
                                            (unsigned int )((void const   *)"TCMP") ==
                                            1U) {
                                          __s2_len___1 = strlen("TCMP");
                                          if (__s2_len___1 < 4U) {
                                            tmp___147 = __builtin_constant_p(pid3frame->id);
                                            if (tmp___147) {
                                              if ((unsigned int )((void const   *)(pid3frame->id +
                                                                                   1)) -
                                                  (unsigned int )((void const   *)(pid3frame->id)) ==
                                                  1U) {
                                                __result___141 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                         0)) -
                                                                        (int const   )(*((unsigned char const   *)"TCMP" +
                                                                                         0)));
                                                if (__s2_len___1 > 0U) {
                                                  if (__result___141 == 0) {
                                                    __result___141 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                             1)) -
                                                                            (int const   )(*((unsigned char const   *)"TCMP" +
                                                                                             1)));
                                                    if (__s2_len___1 > 1U) {
                                                      if (__result___141 == 0) {
                                                        __result___141 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                                 2)) -
                                                                                (int const   )(*((unsigned char const   *)"TCMP" +
                                                                                                 2)));
                                                        if (__s2_len___1 > 2U) {
                                                          if (__result___141 == 0) {
                                                            __result___141 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                                                     3)) -
                                                                                    (int const   )(*((unsigned char const   *)"TCMP" +
                                                                                                     3)));
                                                          } else {
                                                            goto _L___495;
                                                          }
                                                        } else {
                                                          _L___495: /* CIL Label */ ;
                                                        }
                                                      } else {
                                                        goto _L___496;
                                                      }
                                                    } else {
                                                      _L___496: /* CIL Label */ ;
                                                    }
                                                  } else {
                                                    goto _L___497;
                                                  }
                                                } else {
                                                  _L___497: /* CIL Label */ ;
                                                }
                                                tmp___131 = __result___141;
                                              } else {
                                                goto _L___501;
                                              }
                                            } else {
                                              _L___501: /* CIL Label */ 
                                              __s1___46 = (unsigned char const   *)((char const   *)(pid3frame->id));
                                              __result___142 = (int )((int const   )(*(__s1___46 +
                                                                                       0)) -
                                                                      (int const   )(*((unsigned char const   *)"TCMP" +
                                                                                       0)));
                                              if (__s2_len___1 > 0U) {
                                                if (__result___142 == 0) {
                                                  __result___142 = (int )((int const   )(*(__s1___46 +
                                                                                           1)) -
                                                                          (int const   )(*((unsigned char const   *)"TCMP" +
                                                                                           1)));
                                                  if (__s2_len___1 > 1U) {
                                                    if (__result___142 == 0) {
                                                      __result___142 = (int )((int const   )(*(__s1___46 +
                                                                                               2)) -
                                                                              (int const   )(*((unsigned char const   *)"TCMP" +
                                                                                               2)));
                                                      if (__s2_len___1 > 2U) {
                                                        if (__result___142 == 0) {
                                                          __result___142 = (int )((int const   )(*(__s1___46 +
                                                                                                   3)) -
                                                                                  (int const   )(*((unsigned char const   *)"TCMP" +
                                                                                                   3)));
                                                        } else {
                                                          goto _L___498;
                                                        }
                                                      } else {
                                                        _L___498: /* CIL Label */ ;
                                                      }
                                                    } else {
                                                      goto _L___499;
                                                    }
                                                  } else {
                                                    _L___499: /* CIL Label */ ;
                                                  }
                                                } else {
                                                  goto _L___500;
                                                }
                                              } else {
                                                _L___500: /* CIL Label */ ;
                                              }
                                              tmp___131 = __result___142;
                                            }
                                          } else {
                                            goto _L___502;
                                          }
                                        } else {
                                          _L___502: /* CIL Label */ 
                                          tmp___131 = strcmp((char const   *)(pid3frame->id),
                                                             "TCMP");
                                        }
                                      }
                                    }
                                    if (! tmp___131) {
                                      pmp3->compilation = (char )atoi__extinline((char const   *)utf8_text);
                                      err_log(9, 8U, (char *)"Compilation: %d\n",
                                              pmp3->compilation);
                                    }
                                  } else {
                                    pmp3->bpm = atoi__extinline((char const   *)utf8_text);
                                    err_log(9, 8U, (char *)"BPM: %d\n", pmp3->bpm);
                                  }
                                } else {
                                  pmp3->song_length = atoi__extinline((char const   *)utf8_text);
                                  err_log(9, 8U, (char *)" Length: %d\n", pmp3->song_length);
                                }
                              } else {
                                pmp3->year = atoi__extinline((char const   *)utf8_text);
                                err_log(9, 8U, (char *)" Year: %d\n", pmp3->year);
                              }
                            } else {
                              tmp = (char *)utf8_text;
                              if ((unsigned int )((void const   *)("/" + 1)) - (unsigned int )((void const   *)"/") ==
                                  1U) {
                                __r0___0 = (char )(*("/" + 0));
                                if ((int const   )(*("/" + 0)) != 0) {
                                  __r1___0 = (char )(*("/" + 1));
                                  if ((int const   )(*("/" + 1)) == 0) {
                                    __strsep_1c__extinline(& tmp, __r0___0);
                                  } else {
                                    __r2___0 = (char )(*("/" + 2));
                                    if ((int )__r2___0 == 0) {
                                      __strsep_2c__extinline(& tmp, __r0___0, __r1___0);
                                    } else {
                                      if ((int const   )(*("/" + 3)) == 0) {
                                        __strsep_3c__extinline(& tmp, __r0___0, __r1___0,
                                                               __r2___0);
                                      } else {
                                        __strsep_g(& tmp, "/");
                                      }
                                    }
                                  }
                                } else {
                                  goto _L___341;
                                }
                              } else {
                                _L___341: /* CIL Label */ 
                                __strsep_g(& tmp, "/");
                              }
                              if (tmp) {
                                pmp3->total_tracks = atoi__extinline((char const   *)tmp);
                              }
                              pmp3->track = atoi__extinline((char const   *)((char *)utf8_text));
                              err_log(9, 8U, (char *)" Track %d of %d\n", pmp3->track,
                                      pmp3->total_tracks);
                            }
                          } else {
                            tmp = (char *)utf8_text;
                            if ((unsigned int )((void const   *)("/" + 1)) - (unsigned int )((void const   *)"/") ==
                                1U) {
                              __r0 = (char )(*("/" + 0));
                              if ((int const   )(*("/" + 0)) != 0) {
                                __r1 = (char )(*("/" + 1));
                                if ((int const   )(*("/" + 1)) == 0) {
                                  __strsep_1c__extinline(& tmp, __r0);
                                } else {
                                  __r2 = (char )(*("/" + 2));
                                  if ((int )__r2 == 0) {
                                    __strsep_2c__extinline(& tmp, __r0, __r1);
                                  } else {
                                    if ((int const   )(*("/" + 3)) == 0) {
                                      __strsep_3c__extinline(& tmp, __r0, __r1, __r2);
                                    } else {
                                      __strsep_g(& tmp, "/");
                                    }
                                  }
                                }
                              } else {
                                goto _L___340;
                              }
                            } else {
                              _L___340: /* CIL Label */ 
                              __strsep_g(& tmp, "/");
                            }
                            if (tmp) {
                              pmp3->total_discs = atoi__extinline((char const   *)tmp);
                            }
                            pmp3->disc = atoi__extinline((char const   *)((char *)utf8_text));
                            err_log(9, 8U, (char *)" Disc %d of %d\n", pmp3->disc,
                                    pmp3->total_discs);
                          }
                        } else {
                          used = 1;
                          pmp3->comment = (char *)utf8_text;
                          err_log(9, 8U, (char *)" Comment: %s\n", pmp3->comment);
                        }
                      } else {
                        used = 1;
                        pmp3->genre = (char *)utf8_text;
                        got_numeric_genre = 0;
                        err_log(9, 8U, (char *)" Genre: %s\n", utf8_text);
                        if (pmp3->genre) {
                          tmp___88 = strlen((char const   *)pmp3->genre);
                          if (tmp___88) {
                            tmp___87 = __ctype_b_loc();
                            if ((int const   )(*((*tmp___87) + (int )(*(pmp3->genre +
                                                                        0)))) & 2048) {
                              genre = atoi__extinline((char const   *)pmp3->genre);
                              got_numeric_genre = 1;
                            } else {
                              if ((int )(*(pmp3->genre + 0)) == 40) {
                                tmp___86 = __ctype_b_loc();
                                if ((int const   )(*((*tmp___86) + (int )(*(pmp3->genre +
                                                                            1)))) &
                                    2048) {
                                  genre = atoi__extinline((char const   *)(pmp3->genre +
                                                                           1));
                                  got_numeric_genre = 1;
                                } else {
                                  goto _L___337;
                                }
                              } else {
                                _L___337: /* CIL Label */ ;
                              }
                            }
                          } else {
                            genre = 148;
                            got_numeric_genre = 1;
                          }
                          if (got_numeric_genre) {
                            if (genre < 0) {
                              goto _L___338;
                            } else {
                              if (genre > 148) {
                                _L___338: /* CIL Label */ 
                                genre = 148;
                              }
                            }
                            free((void *)pmp3->genre);
                            tmp___108 = __builtin_constant_p(scan_winamp_genre[genre]);
                            if (tmp___108) {
                              if ((unsigned int )((void const   *)(scan_winamp_genre[genre] +
                                                                   1)) - (unsigned int )((void const   *)scan_winamp_genre[genre]) ==
                                  1U) {
                                if ((int const   )(*((char const   *)scan_winamp_genre[genre] +
                                                     0)) == 0) {
                                  pmp3->genre = (char *)calloc(1U, 1U);
                                } else {
                                  tmp___105 = strlen((char const   *)scan_winamp_genre[genre]);
                                  __len___2 = tmp___105 + 1U;
                                  tmp___106 = (char *)malloc(__len___2);
                                  __retval___2 = tmp___106;
                                  if ((unsigned int )__retval___2 != (unsigned int )((void *)0)) {
                                    __retval___2 = (char *)memcpy((void * __restrict  )__retval___2,
                                                                  (void const   * __restrict  )scan_winamp_genre[genre],
                                                                  __len___2);
                                  }
                                  pmp3->genre = __retval___2;
                                }
                              } else {
                                goto _L___339;
                              }
                            } else {
                              _L___339: /* CIL Label */ 
                              pmp3->genre = __strdup((char const   *)scan_winamp_genre[genre]);
                            }
                          }
                        }
                      }
                    } else {
                      used = 1;
                      pmp3->conductor = (char *)utf8_text;
                      err_log(9, 8U, (char *)" Conductor: %s\n", utf8_text);
                    }
                  } else {
                    used = 1;
                    pmp3->orchestra = (char *)utf8_text;
                    err_log(9, 8U, (char *)" Orchestra: %s\n", utf8_text);
                  }
                } else {
                  used = 1;
                  pmp3->grouping = (char *)utf8_text;
                  err_log(9, 8U, (char *)" Grouping: %s\n", utf8_text);
                }
              } else {
                used = 1;
                pmp3->composer = (char *)utf8_text;
                err_log(9, 8U, (char *)" Composer: %s\n", utf8_text);
              }
            } else {
              used = 1;
              pmp3->album = (char *)utf8_text;
              err_log(9, 8U, (char *)" Album: %s\n", utf8_text);
            }
          } else {
            used = 1;
            pmp3->artist = (char *)utf8_text;
            err_log(9, 8U, (char *)" Artist: %s\n", utf8_text);
          }
        } else {
          used = 1;
          pmp3->title = (char *)utf8_text;
          err_log(9, 8U, (char *)" Title: %s\n", utf8_text);
        }
      }
    }
    if (! used) {
      if (have_utf8) {
        if (utf8_text) {
          free((void *)utf8_text);
        } else {
          goto _L___2863;
        }
      } else {
        goto _L___2863;
      }
    } else {
      _L___2863: /* CIL Label */ ;
    }
    tmp___765 = __builtin_constant_p(pid3frame->id);
    if (tmp___765) {
      __s1_len___16 = strlen((char const   *)(pid3frame->id));
      __s2_len___16 = strlen("COMM");
      if (! ((unsigned int )((void const   *)(pid3frame->id + 1)) - (unsigned int )((void const   *)(pid3frame->id)) ==
             1U)) {
        goto _L___3030;
      } else {
        if (__s1_len___16 >= 4U) {
          _L___3030: /* CIL Label */ 
          if (! ((unsigned int )((void const   *)("COMM" + 1)) - (unsigned int )((void const   *)"COMM") ==
                 1U)) {
            goto _L___3029;
          } else {
            if (__s2_len___16 >= 4U) {
              _L___3029: /* CIL Label */ 
              tmp___766 = 1;
            } else {
              goto _L___3028;
            }
          }
        } else {
          _L___3028: /* CIL Label */ 
          tmp___766 = 0;
        }
      }
      if (tmp___766) {
        if (__s1_len___16 < __s2_len___16) {
          tmp___748 = __s1_len___16;
        } else {
          tmp___748 = __s2_len___16;
        }
        tmp___747 = memcmp((void const   *)((char const   *)(pid3frame->id)), (void const   *)"COMM",
                           tmp___748 + 1U);
      } else {
        goto _L___3032;
      }
    } else {
      _L___3032: /* CIL Label */ 
      tmp___764 = __builtin_constant_p(pid3frame->id);
      if (tmp___764) {
        if ((unsigned int )((void const   *)(pid3frame->id + 1)) - (unsigned int )((void const   *)(pid3frame->id)) ==
            1U) {
          __s1_len___16 = strlen((char const   *)(pid3frame->id));
          if (__s1_len___16 < 4U) {
            if ((unsigned int )((void const   *)("COMM" + 1)) - (unsigned int )((void const   *)"COMM") ==
                1U) {
              __result___853 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                       0)) - (int const   )(*((unsigned char const   *)"COMM" +
                                                                              0)));
              if (__s1_len___16 > 0U) {
                if (__result___853 == 0) {
                  __result___853 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                           1)) - (int const   )(*((unsigned char const   *)"COMM" +
                                                                                  1)));
                  if (__s1_len___16 > 1U) {
                    if (__result___853 == 0) {
                      __result___853 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                               2)) - (int const   )(*((unsigned char const   *)"COMM" +
                                                                                      2)));
                      if (__s1_len___16 > 2U) {
                        if (__result___853 == 0) {
                          __result___853 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                   3)) - (int const   )(*((unsigned char const   *)"COMM" +
                                                                                          3)));
                        } else {
                          goto _L___2993;
                        }
                      } else {
                        _L___2993: /* CIL Label */ ;
                      }
                    } else {
                      goto _L___2994;
                    }
                  } else {
                    _L___2994: /* CIL Label */ ;
                  }
                } else {
                  goto _L___2995;
                }
              } else {
                _L___2995: /* CIL Label */ ;
              }
              tmp___747 = __result___853;
            } else {
              __s2___142 = (unsigned char const   *)"COMM";
              __result___854 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                       0)) - (int const   )(*(__s2___142 +
                                                                              0)));
              if (__s1_len___16 > 0U) {
                if (__result___854 == 0) {
                  __result___854 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                           1)) - (int const   )(*(__s2___142 +
                                                                                  1)));
                  if (__s1_len___16 > 1U) {
                    if (__result___854 == 0) {
                      __result___854 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                               2)) - (int const   )(*(__s2___142 +
                                                                                      2)));
                      if (__s1_len___16 > 2U) {
                        if (__result___854 == 0) {
                          __result___854 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                   3)) - (int const   )(*(__s2___142 +
                                                                                          3)));
                        } else {
                          goto _L___2996;
                        }
                      } else {
                        _L___2996: /* CIL Label */ ;
                      }
                    } else {
                      goto _L___2997;
                    }
                  } else {
                    _L___2997: /* CIL Label */ ;
                  }
                } else {
                  goto _L___2998;
                }
              } else {
                _L___2998: /* CIL Label */ ;
              }
              tmp___747 = __result___854;
            }
          } else {
            goto _L___3027;
          }
        } else {
          goto _L___3027;
        }
      } else {
        _L___3027: /* CIL Label */ 
        if ((unsigned int )((void const   *)("COMM" + 1)) - (unsigned int )((void const   *)"COMM") ==
            1U) {
          __s2_len___16 = strlen("COMM");
          if (__s2_len___16 < 4U) {
            tmp___763 = __builtin_constant_p(pid3frame->id);
            if (tmp___763) {
              if ((unsigned int )((void const   *)(pid3frame->id + 1)) - (unsigned int )((void const   *)(pid3frame->id)) ==
                  1U) {
                __result___861 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                         0)) - (int const   )(*((unsigned char const   *)"COMM" +
                                                                                0)));
                if (__s2_len___16 > 0U) {
                  if (__result___861 == 0) {
                    __result___861 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                             1)) - (int const   )(*((unsigned char const   *)"COMM" +
                                                                                    1)));
                    if (__s2_len___16 > 1U) {
                      if (__result___861 == 0) {
                        __result___861 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                 2)) - (int const   )(*((unsigned char const   *)"COMM" +
                                                                                        2)));
                        if (__s2_len___16 > 2U) {
                          if (__result___861 == 0) {
                            __result___861 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3frame->id)) +
                                                                     3)) - (int const   )(*((unsigned char const   *)"COMM" +
                                                                                            3)));
                          } else {
                            goto _L___3018;
                          }
                        } else {
                          _L___3018: /* CIL Label */ ;
                        }
                      } else {
                        goto _L___3019;
                      }
                    } else {
                      _L___3019: /* CIL Label */ ;
                    }
                  } else {
                    goto _L___3020;
                  }
                } else {
                  _L___3020: /* CIL Label */ ;
                }
                tmp___747 = __result___861;
              } else {
                goto _L___3024;
              }
            } else {
              _L___3024: /* CIL Label */ 
              __s1___286 = (unsigned char const   *)((char const   *)(pid3frame->id));
              __result___862 = (int )((int const   )(*(__s1___286 + 0)) - (int const   )(*((unsigned char const   *)"COMM" +
                                                                                           0)));
              if (__s2_len___16 > 0U) {
                if (__result___862 == 0) {
                  __result___862 = (int )((int const   )(*(__s1___286 + 1)) - (int const   )(*((unsigned char const   *)"COMM" +
                                                                                               1)));
                  if (__s2_len___16 > 1U) {
                    if (__result___862 == 0) {
                      __result___862 = (int )((int const   )(*(__s1___286 + 2)) -
                                              (int const   )(*((unsigned char const   *)"COMM" +
                                                               2)));
                      if (__s2_len___16 > 2U) {
                        if (__result___862 == 0) {
                          __result___862 = (int )((int const   )(*(__s1___286 + 3)) -
                                                  (int const   )(*((unsigned char const   *)"COMM" +
                                                                   3)));
                        } else {
                          goto _L___3021;
                        }
                      } else {
                        _L___3021: /* CIL Label */ ;
                      }
                    } else {
                      goto _L___3022;
                    }
                  } else {
                    _L___3022: /* CIL Label */ ;
                  }
                } else {
                  goto _L___3023;
                }
              } else {
                _L___3023: /* CIL Label */ ;
              }
              tmp___747 = __result___862;
            }
          } else {
            goto _L___3025;
          }
        } else {
          _L___3025: /* CIL Label */ 
          tmp___747 = strcmp((char const   *)(pid3frame->id), "COMM");
        }
      }
    }
    if (tmp___747) {
      _L___3033: /* CIL Label */ ;
    } else {
      if (pid3frame->nfields == 4U) {
        native_text = id3_field_getstring((union id3_field  const  *)(pid3frame->fields +
                                                                      2));
        if (native_text) {
          utf8_text = (unsigned char *)id3_ucs4_utf8duplicate(native_text);
          if (utf8_text) {
            tmp___725 = strncasecmp((char const   *)utf8_text, "iTun", 4U);
            if (tmp___725 != 0) {
              if (utf8_text) {
                free((void *)utf8_text);
              }
              native_text = id3_field_getfullstring((union id3_field  const  *)(pid3frame->fields +
                                                                                3));
              if (native_text) {
                if (pmp3->comment) {
                  free((void *)pmp3->comment);
                }
                utf8_text = (unsigned char *)id3_ucs4_utf8duplicate(native_text);
                if (utf8_text) {
                  pmp3->comment = (char *)utf8_text;
                }
              }
            } else {
              goto _L___2864;
            }
          } else {
            _L___2864: /* CIL Label */ 
            if (utf8_text) {
              free((void *)utf8_text);
            }
          }
        }
      } else {
        goto _L___3033;
      }
    }
    index___0 ++;
  }
  id3_file_close(pid3file);
  err_log(9, 8U, (char *)"Got id3 tag successfully\n");
  return (0);
}
}
static int scan_freetags(MP3FILE *pmp3 ) 
{ 

  {
  if (pmp3->title) {
    free((void *)pmp3->title);
  }
  if (pmp3->artist) {
    free((void *)pmp3->artist);
  }
  if (pmp3->album) {
    free((void *)pmp3->album);
  }
  if (pmp3->genre) {
    free((void *)pmp3->genre);
  }
  if (pmp3->comment) {
    free((void *)pmp3->comment);
  }
  if (pmp3->type) {
    free((void *)pmp3->type);
  }
  if (pmp3->composer) {
    free((void *)pmp3->composer);
  }
  if (pmp3->orchestra) {
    free((void *)pmp3->orchestra);
  }
  if (pmp3->conductor) {
    free((void *)pmp3->conductor);
  }
  if (pmp3->grouping) {
    free((void *)pmp3->grouping);
  }
  if (pmp3->description) {
    free((void *)pmp3->description);
  }
  return (0);
}
}
static int scan_get_fileinfo(char *file , MP3FILE *pmp3 ) 
{ FILE *infile ;
  off_t file_size ;
  taghandler *hdl ;
  size_t __s1_len ;
  size_t __s2_len ;
  int tmp___29 ;
  size_t tmp___30 ;
  register int __result___37 ;
  unsigned char const   *__s2___6 ;
  register int __result___38 ;
  int tmp___45 ;
  register int __result___45 ;
  unsigned char const   *__s1___14 ;
  register int __result___46 ;
  int tmp___52 ;
  int tmp___53 ;
  int tmp___54 ;
  int tmp___55 ;
  int tmp___56 ;
  int tmp___57 ;
  int tmp___58 ;

  {
  hdl = taghandlers;
  while (hdl->suffix) {
    tmp___55 = __builtin_constant_p(hdl->suffix);
    if (tmp___55) {
      tmp___56 = __builtin_constant_p(pmp3->type);
      if (tmp___56) {
        __s1_len = strlen((char const   *)hdl->suffix);
        __s2_len = strlen((char const   *)pmp3->type);
        if (! ((unsigned int )((void const   *)(hdl->suffix + 1)) - (unsigned int )((void const   *)hdl->suffix) ==
               1U)) {
          goto _L___172;
        } else {
          if (__s1_len >= 4U) {
            _L___172: /* CIL Label */ 
            if (! ((unsigned int )((void const   *)(pmp3->type + 1)) - (unsigned int )((void const   *)pmp3->type) ==
                   1U)) {
              goto _L___171;
            } else {
              if (__s2_len >= 4U) {
                _L___171: /* CIL Label */ 
                tmp___57 = 1;
              } else {
                goto _L___170;
              }
            }
          } else {
            _L___170: /* CIL Label */ 
            tmp___57 = 0;
          }
        }
        if (tmp___57) {
          if (__s1_len < __s2_len) {
            tmp___30 = __s1_len;
          } else {
            tmp___30 = __s2_len;
          }
          tmp___29 = memcmp((void const   *)((char const   *)hdl->suffix), (void const   *)((char const   *)pmp3->type),
                            tmp___30 + 1U);
        } else {
          goto _L___174;
        }
      } else {
        goto _L___174;
      }
    } else {
      _L___174: /* CIL Label */ 
      tmp___54 = __builtin_constant_p(hdl->suffix);
      if (tmp___54) {
        if ((unsigned int )((void const   *)(hdl->suffix + 1)) - (unsigned int )((void const   *)hdl->suffix) ==
            1U) {
          __s1_len = strlen((char const   *)hdl->suffix);
          if (__s1_len < 4U) {
            tmp___45 = __builtin_constant_p(pmp3->type);
            if (tmp___45) {
              if ((unsigned int )((void const   *)(pmp3->type + 1)) - (unsigned int )((void const   *)pmp3->type) ==
                  1U) {
                __result___37 = (int )((int const   )(*((unsigned char const   *)((char const   *)hdl->suffix) +
                                                        0)) - (int const   )(*((unsigned char const   *)((char const   *)pmp3->type) +
                                                                               0)));
                if (__s1_len > 0U) {
                  if (__result___37 == 0) {
                    __result___37 = (int )((int const   )(*((unsigned char const   *)((char const   *)hdl->suffix) +
                                                            1)) - (int const   )(*((unsigned char const   *)((char const   *)pmp3->type) +
                                                                                   1)));
                    if (__s1_len > 1U) {
                      if (__result___37 == 0) {
                        __result___37 = (int )((int const   )(*((unsigned char const   *)((char const   *)hdl->suffix) +
                                                                2)) - (int const   )(*((unsigned char const   *)((char const   *)pmp3->type) +
                                                                                       2)));
                        if (__s1_len > 2U) {
                          if (__result___37 == 0) {
                            __result___37 = (int )((int const   )(*((unsigned char const   *)((char const   *)hdl->suffix) +
                                                                    3)) - (int const   )(*((unsigned char const   *)((char const   *)pmp3->type) +
                                                                                           3)));
                          } else {
                            goto _L___133;
                          }
                        } else {
                          _L___133: /* CIL Label */ ;
                        }
                      } else {
                        goto _L___134;
                      }
                    } else {
                      _L___134: /* CIL Label */ ;
                    }
                  } else {
                    goto _L___135;
                  }
                } else {
                  _L___135: /* CIL Label */ ;
                }
                tmp___29 = __result___37;
              } else {
                goto _L___139;
              }
            } else {
              _L___139: /* CIL Label */ 
              __s2___6 = (unsigned char const   *)((char const   *)pmp3->type);
              __result___38 = (int )((int const   )(*((unsigned char const   *)((char const   *)hdl->suffix) +
                                                      0)) - (int const   )(*(__s2___6 +
                                                                             0)));
              if (__s1_len > 0U) {
                if (__result___38 == 0) {
                  __result___38 = (int )((int const   )(*((unsigned char const   *)((char const   *)hdl->suffix) +
                                                          1)) - (int const   )(*(__s2___6 +
                                                                                 1)));
                  if (__s1_len > 1U) {
                    if (__result___38 == 0) {
                      __result___38 = (int )((int const   )(*((unsigned char const   *)((char const   *)hdl->suffix) +
                                                              2)) - (int const   )(*(__s2___6 +
                                                                                     2)));
                      if (__s1_len > 2U) {
                        if (__result___38 == 0) {
                          __result___38 = (int )((int const   )(*((unsigned char const   *)((char const   *)hdl->suffix) +
                                                                  3)) - (int const   )(*(__s2___6 +
                                                                                         3)));
                        } else {
                          goto _L___136;
                        }
                      } else {
                        _L___136: /* CIL Label */ ;
                      }
                    } else {
                      goto _L___137;
                    }
                  } else {
                    _L___137: /* CIL Label */ ;
                  }
                } else {
                  goto _L___138;
                }
              } else {
                _L___138: /* CIL Label */ ;
              }
              tmp___29 = __result___38;
            }
          } else {
            goto _L___169;
          }
        } else {
          goto _L___169;
        }
      } else {
        _L___169: /* CIL Label */ 
        tmp___53 = __builtin_constant_p(pmp3->type);
        if (tmp___53) {
          if ((unsigned int )((void const   *)(pmp3->type + 1)) - (unsigned int )((void const   *)pmp3->type) ==
              1U) {
            __s2_len = strlen((char const   *)pmp3->type);
            if (__s2_len < 4U) {
              tmp___52 = __builtin_constant_p(hdl->suffix);
              if (tmp___52) {
                if ((unsigned int )((void const   *)(hdl->suffix + 1)) - (unsigned int )((void const   *)hdl->suffix) ==
                    1U) {
                  __result___45 = (int )((int const   )(*((unsigned char const   *)((char const   *)hdl->suffix) +
                                                          0)) - (int const   )(*((unsigned char const   *)((char const   *)pmp3->type) +
                                                                                 0)));
                  if (__s2_len > 0U) {
                    if (__result___45 == 0) {
                      __result___45 = (int )((int const   )(*((unsigned char const   *)((char const   *)hdl->suffix) +
                                                              1)) - (int const   )(*((unsigned char const   *)((char const   *)pmp3->type) +
                                                                                     1)));
                      if (__s2_len > 1U) {
                        if (__result___45 == 0) {
                          __result___45 = (int )((int const   )(*((unsigned char const   *)((char const   *)hdl->suffix) +
                                                                  2)) - (int const   )(*((unsigned char const   *)((char const   *)pmp3->type) +
                                                                                         2)));
                          if (__s2_len > 2U) {
                            if (__result___45 == 0) {
                              __result___45 = (int )((int const   )(*((unsigned char const   *)((char const   *)hdl->suffix) +
                                                                      3)) - (int const   )(*((unsigned char const   *)((char const   *)pmp3->type) +
                                                                                             3)));
                            } else {
                              goto _L___159;
                            }
                          } else {
                            _L___159: /* CIL Label */ ;
                          }
                        } else {
                          goto _L___160;
                        }
                      } else {
                        _L___160: /* CIL Label */ ;
                      }
                    } else {
                      goto _L___161;
                    }
                  } else {
                    _L___161: /* CIL Label */ ;
                  }
                  tmp___29 = __result___45;
                } else {
                  goto _L___165;
                }
              } else {
                _L___165: /* CIL Label */ 
                __s1___14 = (unsigned char const   *)((char const   *)hdl->suffix);
                __result___46 = (int )((int const   )(*(__s1___14 + 0)) - (int const   )(*((unsigned char const   *)((char const   *)pmp3->type) +
                                                                                           0)));
                if (__s2_len > 0U) {
                  if (__result___46 == 0) {
                    __result___46 = (int )((int const   )(*(__s1___14 + 1)) - (int const   )(*((unsigned char const   *)((char const   *)pmp3->type) +
                                                                                               1)));
                    if (__s2_len > 1U) {
                      if (__result___46 == 0) {
                        __result___46 = (int )((int const   )(*(__s1___14 + 2)) -
                                               (int const   )(*((unsigned char const   *)((char const   *)pmp3->type) +
                                                                2)));
                        if (__s2_len > 2U) {
                          if (__result___46 == 0) {
                            __result___46 = (int )((int const   )(*(__s1___14 + 3)) -
                                                   (int const   )(*((unsigned char const   *)((char const   *)pmp3->type) +
                                                                    3)));
                          } else {
                            goto _L___162;
                          }
                        } else {
                          _L___162: /* CIL Label */ ;
                        }
                      } else {
                        goto _L___163;
                      }
                    } else {
                      _L___163: /* CIL Label */ ;
                    }
                  } else {
                    goto _L___164;
                  }
                } else {
                  _L___164: /* CIL Label */ ;
                }
                tmp___29 = __result___46;
              }
            } else {
              goto _L___167;
            }
          } else {
            goto _L___167;
          }
        } else {
          _L___167: /* CIL Label */ 
          tmp___29 = strcmp((char const   *)hdl->suffix, (char const   *)pmp3->type);
        }
      }
    }
    if (! tmp___29) {
      break;
    }
    hdl ++;
  }
  if (hdl->files) {
    tmp___58 = ((*(hdl->files)))(file, pmp3);
    return (tmp___58);
  }
  infile = fopen((char const   * __restrict  )file, (char const   * __restrict  )"rb");
  if (! infile) {
    err_log(2, 8U, (char *)"Could not open %s for reading\n", file);
    return (-1);
  }
  fseek(infile, 0L, 2);
  file_size = ftell(infile);
  fseek(infile, 0L, 0);
  pmp3->file_size = (int )file_size;
  fclose(infile);
  return (0);
}
}
off_t aac_drilltoatom(FILE *aac_fp , char *atom_path , unsigned int *atom_length ) 
{ long atom_offset ;
  off_t file_size ;
  char *cur_p ;
  char *end_p ;
  char atom_name[5] ;
  size_t tmp ;
  int tmp___0 ;
  long tmp___1 ;
  char *tmp___3 ;
  size_t __s1_len ;
  size_t __s2_len ;
  int tmp___25 ;
  size_t tmp___26 ;
  register int __result___37 ;
  unsigned char const   *__s2___6 ;
  register int __result___38 ;
  register int __result___45 ;
  unsigned char const   *__s1___14 ;
  register int __result___46 ;
  int tmp___41 ;
  int tmp___42 ;
  int tmp___43 ;
  int tmp___44 ;
  size_t __s1_len___0 ;
  size_t __s2_len___0 ;
  int tmp___66 ;
  size_t tmp___67 ;
  register int __result___85 ;
  unsigned char const   *__s2___14 ;
  register int __result___86 ;
  register int __result___93 ;
  unsigned char const   *__s1___30 ;
  register int __result___94 ;
  int tmp___82 ;
  int tmp___83 ;
  int tmp___84 ;
  int tmp___85 ;
  size_t __s1_len___1 ;
  size_t __s2_len___1 ;
  int tmp___107 ;
  size_t tmp___108 ;
  register int __result___133 ;
  unsigned char const   *__s2___22 ;
  register int __result___134 ;
  register int __result___141 ;
  unsigned char const   *__s1___46 ;
  register int __result___142 ;
  int tmp___123 ;
  int tmp___124 ;
  int tmp___125 ;
  int tmp___126 ;
  long tmp___127 ;

  {
  fseek(aac_fp, 0L, 2);
  file_size = ftell(aac_fp);
  rewind(aac_fp);
  end_p = atom_path;
  while ((int )(*end_p) != 0) {
    end_p ++;
  }
  atom_name[4] = (char )'\000';
  cur_p = atom_path;
  while ((unsigned int )cur_p != (unsigned int )((void *)0)) {
    if (end_p - cur_p < 4) {
      return (-1L);
    }
    tmp___0 = __builtin_constant_p(cur_p);
    if (tmp___0) {
      tmp = strlen((char const   *)cur_p);
      if (tmp + 1U >= 4U) {
        memcpy((void * __restrict  )(atom_name), (void const   * __restrict  )cur_p,
               4U);
      } else {
        strncpy((char * __restrict  )(atom_name), (char const   * __restrict  )cur_p,
                4U);
      }
    } else {
      strncpy((char * __restrict  )(atom_name), (char const   * __restrict  )cur_p,
              4U);
    }
    atom_offset = scan_aac_findatom(aac_fp, file_size, atom_name, (int *)atom_length);
    if (atom_offset == -1L) {
      return (-1L);
    }
    tmp___1 = ftell(aac_fp);
    err_log(9, 8U, (char *)"Found %s atom at off %ld.\n", atom_name, tmp___1 - 8L);
    tmp___3 = strchr((char const   *)cur_p, ':');
    cur_p = tmp___3;
    if ((unsigned int )cur_p != (unsigned int )((void *)0)) {
      cur_p ++;
      tmp___125 = __builtin_constant_p(atom_name);
      if (tmp___125) {
        __s1_len___1 = strlen((char const   *)(atom_name));
        __s2_len___1 = strlen("meta");
        if (! ((unsigned int )((void const   *)(atom_name + 1)) - (unsigned int )((void const   *)(atom_name)) ==
               1U)) {
          goto _L___501;
        } else {
          if (__s1_len___1 >= 4U) {
            _L___501: /* CIL Label */ 
            if (! ((unsigned int )((void const   *)("meta" + 1)) - (unsigned int )((void const   *)"meta") ==
                   1U)) {
              goto _L___500;
            } else {
              if (__s2_len___1 >= 4U) {
                _L___500: /* CIL Label */ 
                tmp___126 = 1;
              } else {
                goto _L___499;
              }
            }
          } else {
            _L___499: /* CIL Label */ 
            tmp___126 = 0;
          }
        }
        if (tmp___126) {
          if (__s1_len___1 < __s2_len___1) {
            tmp___108 = __s1_len___1;
          } else {
            tmp___108 = __s2_len___1;
          }
          tmp___107 = memcmp((void const   *)((char const   *)(atom_name)), (void const   *)"meta",
                             tmp___108 + 1U);
        } else {
          goto _L___503;
        }
      } else {
        _L___503: /* CIL Label */ 
        tmp___124 = __builtin_constant_p(atom_name);
        if (tmp___124) {
          if ((unsigned int )((void const   *)(atom_name + 1)) - (unsigned int )((void const   *)(atom_name)) ==
              1U) {
            __s1_len___1 = strlen((char const   *)(atom_name));
            if (__s1_len___1 < 4U) {
              if ((unsigned int )((void const   *)("meta" + 1)) - (unsigned int )((void const   *)"meta") ==
                  1U) {
                __result___133 = (int )((int const   )(*((unsigned char const   *)((char const   *)(atom_name)) +
                                                         0)) - (int const   )(*((unsigned char const   *)"meta" +
                                                                                0)));
                if (__s1_len___1 > 0U) {
                  if (__result___133 == 0) {
                    __result___133 = (int )((int const   )(*((unsigned char const   *)((char const   *)(atom_name)) +
                                                             1)) - (int const   )(*((unsigned char const   *)"meta" +
                                                                                    1)));
                    if (__s1_len___1 > 1U) {
                      if (__result___133 == 0) {
                        __result___133 = (int )((int const   )(*((unsigned char const   *)((char const   *)(atom_name)) +
                                                                 2)) - (int const   )(*((unsigned char const   *)"meta" +
                                                                                        2)));
                        if (__s1_len___1 > 2U) {
                          if (__result___133 == 0) {
                            __result___133 = (int )((int const   )(*((unsigned char const   *)((char const   *)(atom_name)) +
                                                                     3)) - (int const   )(*((unsigned char const   *)"meta" +
                                                                                            3)));
                          } else {
                            goto _L___464;
                          }
                        } else {
                          _L___464: /* CIL Label */ ;
                        }
                      } else {
                        goto _L___465;
                      }
                    } else {
                      _L___465: /* CIL Label */ ;
                    }
                  } else {
                    goto _L___466;
                  }
                } else {
                  _L___466: /* CIL Label */ ;
                }
                tmp___107 = __result___133;
              } else {
                __s2___22 = (unsigned char const   *)"meta";
                __result___134 = (int )((int const   )(*((unsigned char const   *)((char const   *)(atom_name)) +
                                                         0)) - (int const   )(*(__s2___22 +
                                                                                0)));
                if (__s1_len___1 > 0U) {
                  if (__result___134 == 0) {
                    __result___134 = (int )((int const   )(*((unsigned char const   *)((char const   *)(atom_name)) +
                                                             1)) - (int const   )(*(__s2___22 +
                                                                                    1)));
                    if (__s1_len___1 > 1U) {
                      if (__result___134 == 0) {
                        __result___134 = (int )((int const   )(*((unsigned char const   *)((char const   *)(atom_name)) +
                                                                 2)) - (int const   )(*(__s2___22 +
                                                                                        2)));
                        if (__s1_len___1 > 2U) {
                          if (__result___134 == 0) {
                            __result___134 = (int )((int const   )(*((unsigned char const   *)((char const   *)(atom_name)) +
                                                                     3)) - (int const   )(*(__s2___22 +
                                                                                            3)));
                          } else {
                            goto _L___467;
                          }
                        } else {
                          _L___467: /* CIL Label */ ;
                        }
                      } else {
                        goto _L___468;
                      }
                    } else {
                      _L___468: /* CIL Label */ ;
                    }
                  } else {
                    goto _L___469;
                  }
                } else {
                  _L___469: /* CIL Label */ ;
                }
                tmp___107 = __result___134;
              }
            } else {
              goto _L___498;
            }
          } else {
            goto _L___498;
          }
        } else {
          _L___498: /* CIL Label */ 
          if ((unsigned int )((void const   *)("meta" + 1)) - (unsigned int )((void const   *)"meta") ==
              1U) {
            __s2_len___1 = strlen("meta");
            if (__s2_len___1 < 4U) {
              tmp___123 = __builtin_constant_p(atom_name);
              if (tmp___123) {
                if ((unsigned int )((void const   *)(atom_name + 1)) - (unsigned int )((void const   *)(atom_name)) ==
                    1U) {
                  __result___141 = (int )((int const   )(*((unsigned char const   *)((char const   *)(atom_name)) +
                                                           0)) - (int const   )(*((unsigned char const   *)"meta" +
                                                                                  0)));
                  if (__s2_len___1 > 0U) {
                    if (__result___141 == 0) {
                      __result___141 = (int )((int const   )(*((unsigned char const   *)((char const   *)(atom_name)) +
                                                               1)) - (int const   )(*((unsigned char const   *)"meta" +
                                                                                      1)));
                      if (__s2_len___1 > 1U) {
                        if (__result___141 == 0) {
                          __result___141 = (int )((int const   )(*((unsigned char const   *)((char const   *)(atom_name)) +
                                                                   2)) - (int const   )(*((unsigned char const   *)"meta" +
                                                                                          2)));
                          if (__s2_len___1 > 2U) {
                            if (__result___141 == 0) {
                              __result___141 = (int )((int const   )(*((unsigned char const   *)((char const   *)(atom_name)) +
                                                                       3)) - (int const   )(*((unsigned char const   *)"meta" +
                                                                                              3)));
                            } else {
                              goto _L___489;
                            }
                          } else {
                            _L___489: /* CIL Label */ ;
                          }
                        } else {
                          goto _L___490;
                        }
                      } else {
                        _L___490: /* CIL Label */ ;
                      }
                    } else {
                      goto _L___491;
                    }
                  } else {
                    _L___491: /* CIL Label */ ;
                  }
                  tmp___107 = __result___141;
                } else {
                  goto _L___495;
                }
              } else {
                _L___495: /* CIL Label */ 
                __s1___46 = (unsigned char const   *)((char const   *)(atom_name));
                __result___142 = (int )((int const   )(*(__s1___46 + 0)) - (int const   )(*((unsigned char const   *)"meta" +
                                                                                            0)));
                if (__s2_len___1 > 0U) {
                  if (__result___142 == 0) {
                    __result___142 = (int )((int const   )(*(__s1___46 + 1)) - (int const   )(*((unsigned char const   *)"meta" +
                                                                                                1)));
                    if (__s2_len___1 > 1U) {
                      if (__result___142 == 0) {
                        __result___142 = (int )((int const   )(*(__s1___46 + 2)) -
                                                (int const   )(*((unsigned char const   *)"meta" +
                                                                 2)));
                        if (__s2_len___1 > 2U) {
                          if (__result___142 == 0) {
                            __result___142 = (int )((int const   )(*(__s1___46 + 3)) -
                                                    (int const   )(*((unsigned char const   *)"meta" +
                                                                     3)));
                          } else {
                            goto _L___492;
                          }
                        } else {
                          _L___492: /* CIL Label */ ;
                        }
                      } else {
                        goto _L___493;
                      }
                    } else {
                      _L___493: /* CIL Label */ ;
                    }
                  } else {
                    goto _L___494;
                  }
                } else {
                  _L___494: /* CIL Label */ ;
                }
                tmp___107 = __result___142;
              }
            } else {
              goto _L___496;
            }
          } else {
            _L___496: /* CIL Label */ 
            tmp___107 = strcmp((char const   *)(atom_name), "meta");
          }
        }
      }
      if (tmp___107) {
        tmp___84 = __builtin_constant_p(atom_name);
        if (tmp___84) {
          __s1_len___0 = strlen((char const   *)(atom_name));
          __s2_len___0 = strlen("stsd");
          if (! ((unsigned int )((void const   *)(atom_name + 1)) - (unsigned int )((void const   *)(atom_name)) ==
                 1U)) {
            goto _L___333;
          } else {
            if (__s1_len___0 >= 4U) {
              _L___333: /* CIL Label */ 
              if (! ((unsigned int )((void const   *)("stsd" + 1)) - (unsigned int )((void const   *)"stsd") ==
                     1U)) {
                goto _L___332;
              } else {
                if (__s2_len___0 >= 4U) {
                  _L___332: /* CIL Label */ 
                  tmp___85 = 1;
                } else {
                  goto _L___331;
                }
              }
            } else {
              _L___331: /* CIL Label */ 
              tmp___85 = 0;
            }
          }
          if (tmp___85) {
            if (__s1_len___0 < __s2_len___0) {
              tmp___67 = __s1_len___0;
            } else {
              tmp___67 = __s2_len___0;
            }
            tmp___66 = memcmp((void const   *)((char const   *)(atom_name)), (void const   *)"stsd",
                              tmp___67 + 1U);
          } else {
            goto _L___335;
          }
        } else {
          _L___335: /* CIL Label */ 
          tmp___83 = __builtin_constant_p(atom_name);
          if (tmp___83) {
            if ((unsigned int )((void const   *)(atom_name + 1)) - (unsigned int )((void const   *)(atom_name)) ==
                1U) {
              __s1_len___0 = strlen((char const   *)(atom_name));
              if (__s1_len___0 < 4U) {
                if ((unsigned int )((void const   *)("stsd" + 1)) - (unsigned int )((void const   *)"stsd") ==
                    1U) {
                  __result___85 = (int )((int const   )(*((unsigned char const   *)((char const   *)(atom_name)) +
                                                          0)) - (int const   )(*((unsigned char const   *)"stsd" +
                                                                                 0)));
                  if (__s1_len___0 > 0U) {
                    if (__result___85 == 0) {
                      __result___85 = (int )((int const   )(*((unsigned char const   *)((char const   *)(atom_name)) +
                                                              1)) - (int const   )(*((unsigned char const   *)"stsd" +
                                                                                     1)));
                      if (__s1_len___0 > 1U) {
                        if (__result___85 == 0) {
                          __result___85 = (int )((int const   )(*((unsigned char const   *)((char const   *)(atom_name)) +
                                                                  2)) - (int const   )(*((unsigned char const   *)"stsd" +
                                                                                         2)));
                          if (__s1_len___0 > 2U) {
                            if (__result___85 == 0) {
                              __result___85 = (int )((int const   )(*((unsigned char const   *)((char const   *)(atom_name)) +
                                                                      3)) - (int const   )(*((unsigned char const   *)"stsd" +
                                                                                             3)));
                            } else {
                              goto _L___296;
                            }
                          } else {
                            _L___296: /* CIL Label */ ;
                          }
                        } else {
                          goto _L___297;
                        }
                      } else {
                        _L___297: /* CIL Label */ ;
                      }
                    } else {
                      goto _L___298;
                    }
                  } else {
                    _L___298: /* CIL Label */ ;
                  }
                  tmp___66 = __result___85;
                } else {
                  __s2___14 = (unsigned char const   *)"stsd";
                  __result___86 = (int )((int const   )(*((unsigned char const   *)((char const   *)(atom_name)) +
                                                          0)) - (int const   )(*(__s2___14 +
                                                                                 0)));
                  if (__s1_len___0 > 0U) {
                    if (__result___86 == 0) {
                      __result___86 = (int )((int const   )(*((unsigned char const   *)((char const   *)(atom_name)) +
                                                              1)) - (int const   )(*(__s2___14 +
                                                                                     1)));
                      if (__s1_len___0 > 1U) {
                        if (__result___86 == 0) {
                          __result___86 = (int )((int const   )(*((unsigned char const   *)((char const   *)(atom_name)) +
                                                                  2)) - (int const   )(*(__s2___14 +
                                                                                         2)));
                          if (__s1_len___0 > 2U) {
                            if (__result___86 == 0) {
                              __result___86 = (int )((int const   )(*((unsigned char const   *)((char const   *)(atom_name)) +
                                                                      3)) - (int const   )(*(__s2___14 +
                                                                                             3)));
                            } else {
                              goto _L___299;
                            }
                          } else {
                            _L___299: /* CIL Label */ ;
                          }
                        } else {
                          goto _L___300;
                        }
                      } else {
                        _L___300: /* CIL Label */ ;
                      }
                    } else {
                      goto _L___301;
                    }
                  } else {
                    _L___301: /* CIL Label */ ;
                  }
                  tmp___66 = __result___86;
                }
              } else {
                goto _L___330;
              }
            } else {
              goto _L___330;
            }
          } else {
            _L___330: /* CIL Label */ 
            if ((unsigned int )((void const   *)("stsd" + 1)) - (unsigned int )((void const   *)"stsd") ==
                1U) {
              __s2_len___0 = strlen("stsd");
              if (__s2_len___0 < 4U) {
                tmp___82 = __builtin_constant_p(atom_name);
                if (tmp___82) {
                  if ((unsigned int )((void const   *)(atom_name + 1)) - (unsigned int )((void const   *)(atom_name)) ==
                      1U) {
                    __result___93 = (int )((int const   )(*((unsigned char const   *)((char const   *)(atom_name)) +
                                                            0)) - (int const   )(*((unsigned char const   *)"stsd" +
                                                                                   0)));
                    if (__s2_len___0 > 0U) {
                      if (__result___93 == 0) {
                        __result___93 = (int )((int const   )(*((unsigned char const   *)((char const   *)(atom_name)) +
                                                                1)) - (int const   )(*((unsigned char const   *)"stsd" +
                                                                                       1)));
                        if (__s2_len___0 > 1U) {
                          if (__result___93 == 0) {
                            __result___93 = (int )((int const   )(*((unsigned char const   *)((char const   *)(atom_name)) +
                                                                    2)) - (int const   )(*((unsigned char const   *)"stsd" +
                                                                                           2)));
                            if (__s2_len___0 > 2U) {
                              if (__result___93 == 0) {
                                __result___93 = (int )((int const   )(*((unsigned char const   *)((char const   *)(atom_name)) +
                                                                        3)) - (int const   )(*((unsigned char const   *)"stsd" +
                                                                                               3)));
                              } else {
                                goto _L___321;
                              }
                            } else {
                              _L___321: /* CIL Label */ ;
                            }
                          } else {
                            goto _L___322;
                          }
                        } else {
                          _L___322: /* CIL Label */ ;
                        }
                      } else {
                        goto _L___323;
                      }
                    } else {
                      _L___323: /* CIL Label */ ;
                    }
                    tmp___66 = __result___93;
                  } else {
                    goto _L___327;
                  }
                } else {
                  _L___327: /* CIL Label */ 
                  __s1___30 = (unsigned char const   *)((char const   *)(atom_name));
                  __result___94 = (int )((int const   )(*(__s1___30 + 0)) - (int const   )(*((unsigned char const   *)"stsd" +
                                                                                             0)));
                  if (__s2_len___0 > 0U) {
                    if (__result___94 == 0) {
                      __result___94 = (int )((int const   )(*(__s1___30 + 1)) - (int const   )(*((unsigned char const   *)"stsd" +
                                                                                                 1)));
                      if (__s2_len___0 > 1U) {
                        if (__result___94 == 0) {
                          __result___94 = (int )((int const   )(*(__s1___30 + 2)) -
                                                 (int const   )(*((unsigned char const   *)"stsd" +
                                                                  2)));
                          if (__s2_len___0 > 2U) {
                            if (__result___94 == 0) {
                              __result___94 = (int )((int const   )(*(__s1___30 +
                                                                      3)) - (int const   )(*((unsigned char const   *)"stsd" +
                                                                                             3)));
                            } else {
                              goto _L___324;
                            }
                          } else {
                            _L___324: /* CIL Label */ ;
                          }
                        } else {
                          goto _L___325;
                        }
                      } else {
                        _L___325: /* CIL Label */ ;
                      }
                    } else {
                      goto _L___326;
                    }
                  } else {
                    _L___326: /* CIL Label */ ;
                  }
                  tmp___66 = __result___94;
                }
              } else {
                goto _L___328;
              }
            } else {
              _L___328: /* CIL Label */ 
              tmp___66 = strcmp((char const   *)(atom_name), "stsd");
            }
          }
        }
        if (tmp___66) {
          tmp___43 = __builtin_constant_p(atom_name);
          if (tmp___43) {
            __s1_len = strlen((char const   *)(atom_name));
            __s2_len = strlen("mp4a");
            if (! ((unsigned int )((void const   *)(atom_name + 1)) - (unsigned int )((void const   *)(atom_name)) ==
                   1U)) {
              goto _L___165;
            } else {
              if (__s1_len >= 4U) {
                _L___165: /* CIL Label */ 
                if (! ((unsigned int )((void const   *)("mp4a" + 1)) - (unsigned int )((void const   *)"mp4a") ==
                       1U)) {
                  goto _L___164;
                } else {
                  if (__s2_len >= 4U) {
                    _L___164: /* CIL Label */ 
                    tmp___44 = 1;
                  } else {
                    goto _L___163;
                  }
                }
              } else {
                _L___163: /* CIL Label */ 
                tmp___44 = 0;
              }
            }
            if (tmp___44) {
              if (__s1_len < __s2_len) {
                tmp___26 = __s1_len;
              } else {
                tmp___26 = __s2_len;
              }
              tmp___25 = memcmp((void const   *)((char const   *)(atom_name)), (void const   *)"mp4a",
                                tmp___26 + 1U);
            } else {
              goto _L___167;
            }
          } else {
            _L___167: /* CIL Label */ 
            tmp___42 = __builtin_constant_p(atom_name);
            if (tmp___42) {
              if ((unsigned int )((void const   *)(atom_name + 1)) - (unsigned int )((void const   *)(atom_name)) ==
                  1U) {
                __s1_len = strlen((char const   *)(atom_name));
                if (__s1_len < 4U) {
                  if ((unsigned int )((void const   *)("mp4a" + 1)) - (unsigned int )((void const   *)"mp4a") ==
                      1U) {
                    __result___37 = (int )((int const   )(*((unsigned char const   *)((char const   *)(atom_name)) +
                                                            0)) - (int const   )(*((unsigned char const   *)"mp4a" +
                                                                                   0)));
                    if (__s1_len > 0U) {
                      if (__result___37 == 0) {
                        __result___37 = (int )((int const   )(*((unsigned char const   *)((char const   *)(atom_name)) +
                                                                1)) - (int const   )(*((unsigned char const   *)"mp4a" +
                                                                                       1)));
                        if (__s1_len > 1U) {
                          if (__result___37 == 0) {
                            __result___37 = (int )((int const   )(*((unsigned char const   *)((char const   *)(atom_name)) +
                                                                    2)) - (int const   )(*((unsigned char const   *)"mp4a" +
                                                                                           2)));
                            if (__s1_len > 2U) {
                              if (__result___37 == 0) {
                                __result___37 = (int )((int const   )(*((unsigned char const   *)((char const   *)(atom_name)) +
                                                                        3)) - (int const   )(*((unsigned char const   *)"mp4a" +
                                                                                               3)));
                              } else {
                                goto _L___128;
                              }
                            } else {
                              _L___128: /* CIL Label */ ;
                            }
                          } else {
                            goto _L___129;
                          }
                        } else {
                          _L___129: /* CIL Label */ ;
                        }
                      } else {
                        goto _L___130;
                      }
                    } else {
                      _L___130: /* CIL Label */ ;
                    }
                    tmp___25 = __result___37;
                  } else {
                    __s2___6 = (unsigned char const   *)"mp4a";
                    __result___38 = (int )((int const   )(*((unsigned char const   *)((char const   *)(atom_name)) +
                                                            0)) - (int const   )(*(__s2___6 +
                                                                                   0)));
                    if (__s1_len > 0U) {
                      if (__result___38 == 0) {
                        __result___38 = (int )((int const   )(*((unsigned char const   *)((char const   *)(atom_name)) +
                                                                1)) - (int const   )(*(__s2___6 +
                                                                                       1)));
                        if (__s1_len > 1U) {
                          if (__result___38 == 0) {
                            __result___38 = (int )((int const   )(*((unsigned char const   *)((char const   *)(atom_name)) +
                                                                    2)) - (int const   )(*(__s2___6 +
                                                                                           2)));
                            if (__s1_len > 2U) {
                              if (__result___38 == 0) {
                                __result___38 = (int )((int const   )(*((unsigned char const   *)((char const   *)(atom_name)) +
                                                                        3)) - (int const   )(*(__s2___6 +
                                                                                               3)));
                              } else {
                                goto _L___131;
                              }
                            } else {
                              _L___131: /* CIL Label */ ;
                            }
                          } else {
                            goto _L___132;
                          }
                        } else {
                          _L___132: /* CIL Label */ ;
                        }
                      } else {
                        goto _L___133;
                      }
                    } else {
                      _L___133: /* CIL Label */ ;
                    }
                    tmp___25 = __result___38;
                  }
                } else {
                  goto _L___162;
                }
              } else {
                goto _L___162;
              }
            } else {
              _L___162: /* CIL Label */ 
              if ((unsigned int )((void const   *)("mp4a" + 1)) - (unsigned int )((void const   *)"mp4a") ==
                  1U) {
                __s2_len = strlen("mp4a");
                if (__s2_len < 4U) {
                  tmp___41 = __builtin_constant_p(atom_name);
                  if (tmp___41) {
                    if ((unsigned int )((void const   *)(atom_name + 1)) - (unsigned int )((void const   *)(atom_name)) ==
                        1U) {
                      __result___45 = (int )((int const   )(*((unsigned char const   *)((char const   *)(atom_name)) +
                                                              0)) - (int const   )(*((unsigned char const   *)"mp4a" +
                                                                                     0)));
                      if (__s2_len > 0U) {
                        if (__result___45 == 0) {
                          __result___45 = (int )((int const   )(*((unsigned char const   *)((char const   *)(atom_name)) +
                                                                  1)) - (int const   )(*((unsigned char const   *)"mp4a" +
                                                                                         1)));
                          if (__s2_len > 1U) {
                            if (__result___45 == 0) {
                              __result___45 = (int )((int const   )(*((unsigned char const   *)((char const   *)(atom_name)) +
                                                                      2)) - (int const   )(*((unsigned char const   *)"mp4a" +
                                                                                             2)));
                              if (__s2_len > 2U) {
                                if (__result___45 == 0) {
                                  __result___45 = (int )((int const   )(*((unsigned char const   *)((char const   *)(atom_name)) +
                                                                          3)) - (int const   )(*((unsigned char const   *)"mp4a" +
                                                                                                 3)));
                                } else {
                                  goto _L___153;
                                }
                              } else {
                                _L___153: /* CIL Label */ ;
                              }
                            } else {
                              goto _L___154;
                            }
                          } else {
                            _L___154: /* CIL Label */ ;
                          }
                        } else {
                          goto _L___155;
                        }
                      } else {
                        _L___155: /* CIL Label */ ;
                      }
                      tmp___25 = __result___45;
                    } else {
                      goto _L___159;
                    }
                  } else {
                    _L___159: /* CIL Label */ 
                    __s1___14 = (unsigned char const   *)((char const   *)(atom_name));
                    __result___46 = (int )((int const   )(*(__s1___14 + 0)) - (int const   )(*((unsigned char const   *)"mp4a" +
                                                                                               0)));
                    if (__s2_len > 0U) {
                      if (__result___46 == 0) {
                        __result___46 = (int )((int const   )(*(__s1___14 + 1)) -
                                               (int const   )(*((unsigned char const   *)"mp4a" +
                                                                1)));
                        if (__s2_len > 1U) {
                          if (__result___46 == 0) {
                            __result___46 = (int )((int const   )(*(__s1___14 + 2)) -
                                                   (int const   )(*((unsigned char const   *)"mp4a" +
                                                                    2)));
                            if (__s2_len > 2U) {
                              if (__result___46 == 0) {
                                __result___46 = (int )((int const   )(*(__s1___14 +
                                                                        3)) - (int const   )(*((unsigned char const   *)"mp4a" +
                                                                                               3)));
                              } else {
                                goto _L___156;
                              }
                            } else {
                              _L___156: /* CIL Label */ ;
                            }
                          } else {
                            goto _L___157;
                          }
                        } else {
                          _L___157: /* CIL Label */ ;
                        }
                      } else {
                        goto _L___158;
                      }
                    } else {
                      _L___158: /* CIL Label */ ;
                    }
                    tmp___25 = __result___46;
                  }
                } else {
                  goto _L___160;
                }
              } else {
                _L___160: /* CIL Label */ 
                tmp___25 = strcmp((char const   *)(atom_name), "mp4a");
              }
            }
          }
          if (! tmp___25) {
            fseek(aac_fp, 28L, 1);
          }
        } else {
          fseek(aac_fp, 8L, 1);
        }
      } else {
        fseek(aac_fp, 4L, 1);
      }
    }
  }
  tmp___127 = ftell(aac_fp);
  return (tmp___127 - 8L);
}
}
static int scan_get_urlfileinfo(char *file , MP3FILE *pmp3 ) 
{ FILE *infile ;
  char *head ;
  char *tail ;
  char linebuffer[256] ;
  size_t tmp ;
  size_t tmp___0 ;
  size_t tmp___1 ;
  char *tmp___3 ;
  char *tmp___5 ;
  char *tmp___6 ;
  size_t __len___2 ;
  size_t tmp___23 ;
  char *__retval___2 ;
  char *tmp___24 ;
  int tmp___26 ;
  size_t __len___6 ;
  size_t tmp___43 ;
  char *__retval___6 ;
  char *tmp___44 ;
  int tmp___46 ;

  {
  err_log(9, 8U, (char *)"Getting URL file info\n");
  infile = fopen((char const   * __restrict  )file, (char const   * __restrict  )"rb");
  if (! infile) {
    err_log(2, 8U, (char *)"Could not open %s for reading\n", file);
    return (-1);
  }
  fgets((char * __restrict  )(linebuffer), (int )sizeof(linebuffer), (FILE * __restrict  )infile);
  while (1) {
    tmp___0 = strlen((char const   *)(linebuffer));
    if ((int )linebuffer[tmp___0 - 1U] == 10) {
      goto _L;
    } else {
      tmp___1 = strlen((char const   *)(linebuffer));
      if ((int )linebuffer[tmp___1 - 1U] == 13) {
        _L: /* CIL Label */ ;
      } else {
        break;
      }
    }
    tmp = strlen((char const   *)(linebuffer));
    linebuffer[tmp - 1U] = (char )'\000';
  }
  head = linebuffer;
  tmp___3 = strchr((char const   *)head, ',');
  tail = tmp___3;
  if (! tail) {
    err_log(1, 8U, (char *)"Badly formatted .url file - must be bitrate,descr,url\n");
    fclose(infile);
    return (-1);
  }
  pmp3->bitrate = atoi__extinline((char const   *)head);
  tail ++;
  head = tail;
  tmp___5 = strchr((char const   *)head, ',');
  tail = tmp___5;
  if (! tail) {
    err_log(1, 8U, (char *)"Badly formatted .url file - must be bitrate,descr,url\n");
    fclose(infile);
    return (-1);
  }
  tmp___6 = tail;
  tail ++;
  (*tmp___6) = (char )'\000';
  tmp___26 = __builtin_constant_p(head);
  if (tmp___26) {
    if ((unsigned int )((void const   *)(head + 1)) - (unsigned int )((void const   *)head) ==
        1U) {
      if ((int const   )(*((char const   *)head + 0)) == 0) {
        pmp3->title = (char *)calloc(1U, 1U);
      } else {
        tmp___23 = strlen((char const   *)head);
        __len___2 = tmp___23 + 1U;
        tmp___24 = (char *)malloc(__len___2);
        __retval___2 = tmp___24;
        if ((unsigned int )__retval___2 != (unsigned int )((void *)0)) {
          __retval___2 = (char *)memcpy((void * __restrict  )__retval___2, (void const   * __restrict  )head,
                                        __len___2);
        }
        pmp3->title = __retval___2;
      }
    } else {
      goto _L___0;
    }
  } else {
    _L___0: /* CIL Label */ 
    pmp3->title = __strdup((char const   *)head);
  }
  tmp___46 = __builtin_constant_p(tail);
  if (tmp___46) {
    if ((unsigned int )((void const   *)(tail + 1)) - (unsigned int )((void const   *)tail) ==
        1U) {
      if ((int const   )(*((char const   *)tail + 0)) == 0) {
        pmp3->url = (char *)calloc(1U, 1U);
      } else {
        tmp___43 = strlen((char const   *)tail);
        __len___6 = tmp___43 + 1U;
        tmp___44 = (char *)malloc(__len___6);
        __retval___6 = tmp___44;
        if ((unsigned int )__retval___6 != (unsigned int )((void *)0)) {
          __retval___6 = (char *)memcpy((void * __restrict  )__retval___6, (void const   * __restrict  )tail,
                                        __len___6);
        }
        pmp3->url = __retval___6;
      }
    } else {
      goto _L___1;
    }
  } else {
    _L___1: /* CIL Label */ 
    pmp3->url = __strdup((char const   *)tail);
  }
  fclose(infile);
  err_log(9, 8U, (char *)"  Title:    %s\n", pmp3->title);
  err_log(9, 8U, (char *)"  Bitrate:  %d\n", pmp3->bitrate);
  err_log(9, 8U, (char *)"  URL:      %s\n", pmp3->url);
  return (0);
}
}
static int scan_get_aacfileinfo(char *file , MP3FILE *pmp3 ) 
{ FILE *infile ;
  long atom_offset ;
  int atom_length ;
  int sample_size ;
  int samples ;
  unsigned int bit_rate ;
  off_t file_size ;
  int ms ;
  unsigned char buffer___0[2] ;
  int time___0 ;
  register unsigned int __v ;
  register unsigned int __x ;
  int tmp ;
  register unsigned int __v___0 ;
  register unsigned int __x___0 ;
  int tmp___0 ;
  register unsigned int __v___1 ;
  register unsigned int __x___1 ;
  int tmp___1 ;
  register unsigned int __v___2 ;
  register unsigned int __x___2 ;
  int tmp___2 ;
  long tmp___3 ;
  register unsigned int __v___3 ;
  register unsigned int __x___3 ;
  int tmp___4 ;

  {
  time___0 = 0;
  err_log(9, 8U, (char *)"Getting AAC file info\n");
  infile = fopen((char const   * __restrict  )file, (char const   * __restrict  )"rb");
  if (! infile) {
    err_log(2, 8U, (char *)"Could not open %s for reading\n", file);
    return (-1);
  }
  fseek(infile, 0L, 2);
  file_size = ftell(infile);
  fseek(infile, 0L, 0);
  pmp3->file_size = (int )file_size;
  atom_offset = aac_drilltoatom(infile, (char *)"moov:mvhd", (unsigned int *)(& atom_length));
  if (atom_offset != -1L) {
    fseek(infile, 4L, 1);
    fread((void * __restrict  )((void *)(& time___0)), sizeof(int ), 1U, (FILE * __restrict  )infile);
    __x = (unsigned int )time___0;
    tmp = __builtin_constant_p(__x);
    if (tmp) {
      __v = ((((__x & 4278190080U) >> 24) | ((__x & 16711680U) >> 8)) | ((__x & 65280U) <<
                                                                         8)) | ((__x &
                                                                                 255U) <<
                                                                                24);
    } else {
      __asm__  ("rorw $8, %w0;"
                "rorl $16, %0;"
                "rorw $8, %w0": "=r" (__v): "0" (__x): "cc");
    }
    time___0 = (int )__v;
    pmp3->time_added = (int )mac_to_unix_time(time___0);
    fread((void * __restrict  )((void *)(& time___0)), sizeof(int ), 1U, (FILE * __restrict  )infile);
    __x___0 = (unsigned int )time___0;
    tmp___0 = __builtin_constant_p(__x___0);
    if (tmp___0) {
      __v___0 = ((((__x___0 & 4278190080U) >> 24) | ((__x___0 & 16711680U) >> 8)) |
                 ((__x___0 & 65280U) << 8)) | ((__x___0 & 255U) << 24);
    } else {
      __asm__  ("rorw $8, %w0;"
                "rorl $16, %0;"
                "rorw $8, %w0": "=r" (__v___0): "0" (__x___0): "cc");
    }
    time___0 = (int )__v___0;
    pmp3->time_modified = (int )mac_to_unix_time(time___0);
    fread((void * __restrict  )((void *)(& sample_size)), 1U, sizeof(int ), (FILE * __restrict  )infile);
    fread((void * __restrict  )((void *)(& samples)), 1U, sizeof(int ), (FILE * __restrict  )infile);
    __x___1 = (unsigned int )sample_size;
    tmp___1 = __builtin_constant_p(__x___1);
    if (tmp___1) {
      __v___1 = ((((__x___1 & 4278190080U) >> 24) | ((__x___1 & 16711680U) >> 8)) |
                 ((__x___1 & 65280U) << 8)) | ((__x___1 & 255U) << 24);
    } else {
      __asm__  ("rorw $8, %w0;"
                "rorl $16, %0;"
                "rorw $8, %w0": "=r" (__v___1): "0" (__x___1): "cc");
    }
    sample_size = (int )__v___1;
    __x___2 = (unsigned int )samples;
    tmp___2 = __builtin_constant_p(__x___2);
    if (tmp___2) {
      __v___2 = ((((__x___2 & 4278190080U) >> 24) | ((__x___2 & 16711680U) >> 8)) |
                 ((__x___2 & 65280U) << 8)) | ((__x___2 & 255U) << 24);
    } else {
      __asm__  ("rorw $8, %w0;"
                "rorl $16, %0;"
                "rorw $8, %w0": "=r" (__v___2): "0" (__x___2): "cc");
    }
    samples = (int )__v___2;
    ms = 1000;
    while (1) {
      if (ms > 9) {
        if (! (! (sample_size % 10))) {
          goto _L;
        }
      } else {
        _L: /* CIL Label */ 
        break;
      }
      sample_size /= 10;
      ms /= 10;
    }
    pmp3->song_length = (samples * ms) / sample_size;
    err_log(9, 8U, (char *)"Song length: %d seconds\n", pmp3->song_length / 1000);
  }
  pmp3->bitrate = 0;
  atom_offset = aac_drilltoatom(infile, (char *)"moov:trak:mdia:minf:stbl:stsd:mp4a",
                                (unsigned int *)(& atom_length));
  if (atom_offset != -1L) {
    fseek(infile, atom_offset + 32L, 0);
    fread((void * __restrict  )(buffer___0), sizeof(unsigned char ), 2U, (FILE * __restrict  )infile);
    pmp3->samplerate = ((int )buffer___0[0] << 8) | (int )buffer___0[1];
    fseek(infile, 2L, 1);
    tmp___3 = ftell(infile);
    atom_offset = scan_aac_findatom(infile, (long )atom_length - (tmp___3 - atom_offset),
                                    (char *)"esds", & atom_length);
    if (atom_offset != -1L) {
      fseek(infile, atom_offset + 22L, 1);
      fread((void * __restrict  )((void *)(& bit_rate)), sizeof(unsigned int ), 1U,
            (FILE * __restrict  )infile);
      __x___3 = bit_rate;
      tmp___4 = __builtin_constant_p(__x___3);
      if (tmp___4) {
        __v___3 = ((((__x___3 & 4278190080U) >> 24) | ((__x___3 & 16711680U) >> 8)) |
                   ((__x___3 & 65280U) << 8)) | ((__x___3 & 255U) << 24);
      } else {
        __asm__  ("rorw $8, %w0;"
                  "rorl $16, %0;"
                  "rorw $8, %w0": "=r" (__v___3): "0" (__x___3): "cc");
      }
      pmp3->bitrate = (int )(__v___3 / 1000U);
    } else {
      err_log(9, 8U, (char *)"Could not find \'esds\' atom to determine bit rate.\n");
    }
  } else {
    err_log(9, 8U, (char *)"Could not find \'mp4a\' atom to determine sample rate.\n");
  }
  if (pmp3->bitrate == 0) {
    err_log(9, 8U, (char *)"Could not find \'esds\' atom. Calculating bit rate.\n");
    atom_offset = aac_drilltoatom(infile, (char *)"mdat", (unsigned int *)(& atom_length));
    if (atom_offset != -1L) {
      if (pmp3->song_length) {
        pmp3->bitrate = atom_length / ((pmp3->song_length / 1000) * 128);
      } else {
        goto _L___0;
      }
    } else {
      _L___0: /* CIL Label */ ;
    }
  }
  fclose(infile);
  return (0);
}
}
static int scan_decode_mp3_frame(unsigned char *frame , SCAN_FRAMEINFO *pfi ) 
{ int ver ;
  int layer_index ;
  int sample_index ;
  int bitrate_index ;
  int samplerate_index ;

  {
  if ((int )(*(frame + 0)) != 255) {
    goto _L;
  } else {
    if ((int )(*(frame + 1)) < 224) {
      _L: /* CIL Label */ 
      pfi->is_valid = 0;
      return (-1);
    }
  }
  ver = ((int )(*(frame + 1)) & 24) >> 3;
  pfi->layer = 4 - (((int )(*(frame + 1)) & 6) >> 1);
  layer_index = -1;
  sample_index = -1;
  switch (ver) {
  case 0: 
  pfi->version = 2.5;
  sample_index = 2;
  if (pfi->layer == 1) {
    layer_index = 3;
  }
  if (pfi->layer == 2) {
    goto _L___0;
  } else {
    if (pfi->layer == 3) {
      _L___0: /* CIL Label */ 
      layer_index = 4;
    }
  }
  break;
  case 2: 
  pfi->version = 2.0;
  sample_index = 1;
  if (pfi->layer == 1) {
    layer_index = 3;
  }
  if (pfi->layer == 2) {
    goto _L___1;
  } else {
    if (pfi->layer == 3) {
      _L___1: /* CIL Label */ 
      layer_index = 4;
    }
  }
  break;
  case 3: 
  pfi->version = 1.0;
  sample_index = 0;
  if (pfi->layer == 1) {
    layer_index = 0;
  }
  if (pfi->layer == 2) {
    layer_index = 1;
  }
  if (pfi->layer == 3) {
    layer_index = 2;
  }
  break;
  }
  if (layer_index < 0) {
    goto _L___2;
  } else {
    if (layer_index > 4) {
      _L___2: /* CIL Label */ 
      pfi->is_valid = 0;
      return (-1);
    }
  }
  if (sample_index < 0) {
    goto _L___3;
  } else {
    if (sample_index > 2) {
      _L___3: /* CIL Label */ 
      pfi->is_valid = 0;
      return (-1);
    }
  }
  if (pfi->layer == 1) {
    pfi->samples_per_frame = 384;
  }
  if (pfi->layer == 2) {
    pfi->samples_per_frame = 1152;
  }
  if (pfi->layer == 3) {
    if (pfi->version == 1.0) {
      pfi->samples_per_frame = 1152;
    } else {
      pfi->samples_per_frame = 576;
    }
  }
  bitrate_index = ((int )(*(frame + 2)) & 240) >> 4;
  samplerate_index = ((int )(*(frame + 2)) & 12) >> 2;
  if (bitrate_index == 15) {
    goto _L___4;
  } else {
    if (bitrate_index == 0) {
      _L___4: /* CIL Label */ 
      pfi->is_valid = 0;
      return (-1);
    }
  }
  if (samplerate_index == 3) {
    pfi->is_valid = 0;
    return (-1);
  }
  pfi->bitrate = scan_br_table[layer_index][bitrate_index];
  pfi->samplerate = scan_sample_table[sample_index][samplerate_index];
  if (((int )(*(frame + 3)) & 3) == 3) {
    pfi->stereo = 0;
  } else {
    pfi->stereo = 1;
  }
  if ((int )(*(frame + 2)) & 2) {
    pfi->padding = 1;
  } else {
    pfi->padding = 0;
  }
  if (pfi->version == 1.0) {
    if (pfi->stereo) {
      pfi->xing_offset = 32;
    } else {
      pfi->xing_offset = 17;
    }
  } else {
    if (pfi->stereo) {
      pfi->xing_offset = 17;
    } else {
      pfi->xing_offset = 9;
    }
  }
  pfi->crc_protected = (int )(*(frame + 1)) & 254;
  if (pfi->layer == 1) {
    pfi->frame_length = (((12 * pfi->bitrate) * 1000) / pfi->samplerate + pfi->padding) *
                        4;
  } else {
    pfi->frame_length = ((144 * pfi->bitrate) * 1000) / pfi->samplerate + pfi->padding;
  }
  if (pfi->frame_length > 2880) {
    goto _L___5;
  } else {
    if (pfi->frame_length <= 0) {
      _L___5: /* CIL Label */ 
      pfi->is_valid = 0;
      return (-1);
    }
  }
  pfi->is_valid = 1;
  return (0);
}
}
void scan_get_average_bitrate(FILE *infile , SCAN_FRAMEINFO *pfi ) 
{ off_t file_size ;
  unsigned char frame_buffer[2900] ;
  unsigned char header[4] ;
  int index___0 ;
  int found ;
  off_t pos ;
  SCAN_FRAMEINFO fi ;
  int frame_count ;
  int bitrate_total ;
  size_t tmp ;
  size_t tmp___0 ;
  int tmp___1 ;
  int tmp___2 ;
  size_t tmp___3 ;
  int tmp___4 ;

  {
  index___0 = 0;
  found = 0;
  frame_count = 0;
  bitrate_total = 0;
  err_log(9, 8U, (char *)"Starting averaging bitrate\n");
  fseek(infile, 0L, 2);
  file_size = ftell(infile);
  pos = file_size / 2L;
  fseek(infile, pos, 0);
  tmp = fread((void * __restrict  )(frame_buffer), 1U, sizeof(frame_buffer), (FILE * __restrict  )infile);
  if (tmp != sizeof(frame_buffer)) {
    return;
  }
  while (! found) {
    while (1) {
      if ((int )frame_buffer[index___0] != 255) {
        if (! ((unsigned int )index___0 < sizeof(frame_buffer) - 4U)) {
          goto _L;
        }
      } else {
        _L: /* CIL Label */ 
        break;
      }
      index___0 ++;
    }
    if ((unsigned int )index___0 >= sizeof(frame_buffer) - 4U) {
      err_log(9, 8U, (char *)"Could not find frame... quitting\n");
      return;
    }
    tmp___2 = scan_decode_mp3_frame(& frame_buffer[index___0], & fi);
    if (! tmp___2) {
      fseek(infile, (pos + (off_t )index___0) + (off_t )fi.frame_length, 0);
      tmp___0 = fread((void * __restrict  )(header), 1U, sizeof(header), (FILE * __restrict  )infile);
      if (tmp___0 != sizeof(header)) {
        err_log(9, 8U, (char *)"Could not read frame header\n");
        return;
      }
      tmp___1 = scan_decode_mp3_frame(header, & fi);
      if (! tmp___1) {
        found = 1;
      }
    }
    if (! found) {
      index___0 ++;
    }
  }
  pos += (off_t )index___0;
  while (frame_count < 10) {
    fseek(infile, pos, 0);
    tmp___3 = fread((void * __restrict  )(header), 1U, sizeof(header), (FILE * __restrict  )infile);
    if (tmp___3 != sizeof(header)) {
      err_log(9, 8U, (char *)"Could not read frame header\n");
      return;
    }
    tmp___4 = scan_decode_mp3_frame(header, & fi);
    if (tmp___4) {
      err_log(9, 8U, (char *)"Invalid frame header while averaging\n");
      return;
    }
    bitrate_total += fi.bitrate;
    frame_count ++;
    pos += (off_t )fi.frame_length;
  }
  err_log(9, 8U, (char *)"Old bitrate: %d\n", pfi->bitrate);
  pfi->bitrate = bitrate_total / frame_count;
  err_log(9, 8U, (char *)"New bitrate: %d\n", pfi->bitrate);
  return;
}
}
void scan_get_frame_count(FILE *infile , SCAN_FRAMEINFO *pfi ) 
{ int pos ;
  int frames ;
  unsigned char frame_buffer[4] ;
  SCAN_FRAMEINFO fi ;
  off_t file_size ;
  int err ;
  int cbr ;
  int last_bitrate ;
  int tmp ;
  size_t tmp___0 ;

  {
  frames = 0;
  err = 0;
  cbr = 1;
  last_bitrate = 0;
  err_log(9, 8U, (char *)"Starting frame count\n");
  fseek(infile, 0L, 2);
  file_size = ftell(infile);
  pos = pfi->frame_offset;
  while (1) {
    err = 1;
    err_log(10, 8U, (char *)"Seeking to %d\n", pos);
    fseek(infile, (long )pos, 0);
    tmp___0 = fread((void * __restrict  )(frame_buffer), 1U, sizeof(frame_buffer),
                    (FILE * __restrict  )infile);
    if (tmp___0 == sizeof(frame_buffer)) {
      tmp = scan_decode_mp3_frame(frame_buffer, & fi);
      if (! tmp) {
        frames ++;
        pos += fi.frame_length;
        err = 0;
        if (last_bitrate) {
          if (fi.bitrate != last_bitrate) {
            cbr = 0;
          } else {
            goto _L;
          }
        } else {
          _L: /* CIL Label */ ;
        }
        last_bitrate = fi.bitrate;
        if (cbr) {
          if (frames > 100) {
            err_log(9, 8U, (char *)"File appears to be CBR... quitting frame count\n");
            return;
          } else {
            goto _L___0;
          }
        } else {
          _L___0: /* CIL Label */ ;
        }
      }
    }
    if (err) {
      if ((off_t )pos > file_size - 4096L) {
        pfi->number_of_frames = frames;
        err_log(9, 8U, (char *)"Estimated frame count: %d\n", frames);
        return;
      } else {
        err_log(9, 8U, (char *)"Frame count aborted on error.  Pos=%d, Count=%d\n",
                pos, frames);
        return;
      }
    }
  }
  return;
}
}
static int scan_get_mp3fileinfo(char *file , MP3FILE *pmp3 ) 
{ FILE *infile ;
  SCAN_ID3HEADER *pid3 ;
  SCAN_FRAMEINFO fi ;
  unsigned int size ;
  off_t fp_size ;
  off_t file_size ;
  unsigned char buffer___0[1024] ;
  int index___0 ;
  int xing_flags ;
  int found ;
  int first_check ;
  char frame_buffer[4] ;
  void *__s ;
  void *__s___0 ;
  union __anonunion___u_51 *__u ;
  __uint8_t __c ;
  void *__s___1 ;
  int tmp ;
  int *tmp___0 ;
  char *tmp___1 ;
  int tmp___2 ;
  size_t tmp___3 ;
  int tmp___49 ;
  size_t __s1_len___0 ;
  size_t __s2_len___0 ;
  int tmp___71 ;
  size_t tmp___72 ;
  register int __result___85 ;
  unsigned char const   *__s2___14 ;
  register int __result___86 ;
  register int __result___93 ;
  unsigned char const   *__s1___30 ;
  register int __result___94 ;
  int tmp___87 ;
  int tmp___88 ;
  int tmp___89 ;
  int tmp___90 ;
  int tmp___91 ;
  size_t tmp___92 ;
  size_t tmp___93 ;
  size_t tmp___94 ;
  int tmp___95 ;
  size_t tmp___96 ;
  int tmp___97 ;
  int tmp___98 ;
  int tmp___99 ;
  register unsigned short __v ;
  register unsigned short __x ;
  int tmp___100 ;
  register unsigned short __v___0 ;
  register unsigned short __x___0 ;
  int tmp___101 ;
  int tmp___102 ;

  {
  size = 0U;
  fp_size = (off_t )0;
  infile = fopen((char const   * __restrict  )file, (char const   * __restrict  )"rb");
  if (! infile) {
    err_log(2, 8U, (char *)"Could not open %s for reading\n", file);
    return (-1);
  }
  tmp = __builtin_constant_p(sizeof(fi));
  if (tmp) {
    if (sizeof(fi) <= 16U) {
      if (sizeof(fi) == 1U) {
        __s___1 = (void *)(& fi);
        (*((__uint8_t *)__s___1)) = (unsigned char)0;
      } else {
        __s___0 = (void *)(& fi);
        __u = (union __anonunion___u_51 *)__s___0;
        __c = (unsigned char)0;
        switch ((int )sizeof(fi)) {
        case 15: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_51 *)((void *)__u + 4);
        case 11: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_51 *)((void *)__u + 4);
        case 7: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_51 *)((void *)__u + 4);
        case 3: 
        __u->__usi = (unsigned short )((int )((unsigned short )__c) * 257);
        __u = (union __anonunion___u_51 *)((void *)__u + 2);
        __u->__uc = __c;
        break;
        case 14: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_51 *)((void *)__u + 4);
        case 10: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_51 *)((void *)__u + 4);
        case 6: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_51 *)((void *)__u + 4);
        case 2: 
        __u->__usi = (unsigned short )((int )((unsigned short )__c) * 257);
        break;
        case 13: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_51 *)((void *)__u + 4);
        case 9: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_51 *)((void *)__u + 4);
        case 5: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_51 *)((void *)__u + 4);
        case 1: 
        __u->__uc = __c;
        break;
        case 16: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_51 *)((void *)__u + 4);
        case 12: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_51 *)((void *)__u + 4);
        case 8: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_51 *)((void *)__u + 4);
        case 4: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        case 0: ;
        break;
        }
      }
    } else {
      goto _L;
    }
  } else {
    _L: /* CIL Label */ 
    __s = (void *)(& fi);
    __builtin_memset(__s, '\000', (int )sizeof(fi));
  }
  fseek(infile, 0L, 2);
  file_size = ftell(infile);
  fseek(infile, 0L, 0);
  pmp3->file_size = (int )file_size;
  tmp___3 = fread((void * __restrict  )(buffer___0), 1U, sizeof(buffer___0), (FILE * __restrict  )infile);
  if (tmp___3 != sizeof(buffer___0)) {
    tmp___2 = ferror(infile);
    if (tmp___2) {
      tmp___0 = __errno_location();
      tmp___1 = strerror((*tmp___0));
      err_log(1, 8U, (char *)"Error reading: %s\n", tmp___1);
    } else {
      err_log(1, 8U, (char *)"Short file: %s\n", file);
    }
    fclose(infile);
    return (-1);
  }
  pid3 = (SCAN_ID3HEADER *)(buffer___0);
  found = 0;
  fp_size = 0L;
  tmp___91 = __builtin_constant_p(pid3->id);
  if (tmp___91) {
    tmp___92 = strlen((char const   *)(pid3->id));
    if (tmp___92 < 3U) {
      goto _L___336;
    } else {
      goto _L___337;
    }
  } else {
    _L___337: /* CIL Label */ 
    tmp___93 = strlen("ID3");
    if (tmp___93 < 3U) {
      _L___336: /* CIL Label */ 
      tmp___89 = __builtin_constant_p(pid3->id);
      if (tmp___89) {
        __s1_len___0 = strlen((char const   *)(pid3->id));
        __s2_len___0 = strlen("ID3");
        if (! ((unsigned int )((void const   *)(pid3->id + 1)) - (unsigned int )((void const   *)(pid3->id)) ==
               1U)) {
          goto _L___333;
        } else {
          if (__s1_len___0 >= 4U) {
            _L___333: /* CIL Label */ 
            if (! ((unsigned int )((void const   *)("ID3" + 1)) - (unsigned int )((void const   *)"ID3") ==
                   1U)) {
              goto _L___332;
            } else {
              if (__s2_len___0 >= 4U) {
                _L___332: /* CIL Label */ 
                tmp___90 = 1;
              } else {
                goto _L___331;
              }
            }
          } else {
            _L___331: /* CIL Label */ 
            tmp___90 = 0;
          }
        }
        if (tmp___90) {
          if (__s1_len___0 < __s2_len___0) {
            tmp___72 = __s1_len___0;
          } else {
            tmp___72 = __s2_len___0;
          }
          tmp___71 = memcmp((void const   *)((char const   *)(pid3->id)), (void const   *)"ID3",
                            tmp___72 + 1U);
        } else {
          goto _L___335;
        }
      } else {
        _L___335: /* CIL Label */ 
        tmp___88 = __builtin_constant_p(pid3->id);
        if (tmp___88) {
          if ((unsigned int )((void const   *)(pid3->id + 1)) - (unsigned int )((void const   *)(pid3->id)) ==
              1U) {
            __s1_len___0 = strlen((char const   *)(pid3->id));
            if (__s1_len___0 < 4U) {
              if ((unsigned int )((void const   *)("ID3" + 1)) - (unsigned int )((void const   *)"ID3") ==
                  1U) {
                __result___85 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3->id)) +
                                                        0)) - (int const   )(*((unsigned char const   *)"ID3" +
                                                                               0)));
                if (__s1_len___0 > 0U) {
                  if (__result___85 == 0) {
                    __result___85 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3->id)) +
                                                            1)) - (int const   )(*((unsigned char const   *)"ID3" +
                                                                                   1)));
                    if (__s1_len___0 > 1U) {
                      if (__result___85 == 0) {
                        __result___85 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3->id)) +
                                                                2)) - (int const   )(*((unsigned char const   *)"ID3" +
                                                                                       2)));
                        if (__s1_len___0 > 2U) {
                          if (__result___85 == 0) {
                            __result___85 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3->id)) +
                                                                    3)) - (int const   )(*((unsigned char const   *)"ID3" +
                                                                                           3)));
                          } else {
                            goto _L___296;
                          }
                        } else {
                          _L___296: /* CIL Label */ ;
                        }
                      } else {
                        goto _L___297;
                      }
                    } else {
                      _L___297: /* CIL Label */ ;
                    }
                  } else {
                    goto _L___298;
                  }
                } else {
                  _L___298: /* CIL Label */ ;
                }
                tmp___71 = __result___85;
              } else {
                __s2___14 = (unsigned char const   *)"ID3";
                __result___86 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3->id)) +
                                                        0)) - (int const   )(*(__s2___14 +
                                                                               0)));
                if (__s1_len___0 > 0U) {
                  if (__result___86 == 0) {
                    __result___86 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3->id)) +
                                                            1)) - (int const   )(*(__s2___14 +
                                                                                   1)));
                    if (__s1_len___0 > 1U) {
                      if (__result___86 == 0) {
                        __result___86 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3->id)) +
                                                                2)) - (int const   )(*(__s2___14 +
                                                                                       2)));
                        if (__s1_len___0 > 2U) {
                          if (__result___86 == 0) {
                            __result___86 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3->id)) +
                                                                    3)) - (int const   )(*(__s2___14 +
                                                                                           3)));
                          } else {
                            goto _L___299;
                          }
                        } else {
                          _L___299: /* CIL Label */ ;
                        }
                      } else {
                        goto _L___300;
                      }
                    } else {
                      _L___300: /* CIL Label */ ;
                    }
                  } else {
                    goto _L___301;
                  }
                } else {
                  _L___301: /* CIL Label */ ;
                }
                tmp___71 = __result___86;
              }
            } else {
              goto _L___330;
            }
          } else {
            goto _L___330;
          }
        } else {
          _L___330: /* CIL Label */ 
          if ((unsigned int )((void const   *)("ID3" + 1)) - (unsigned int )((void const   *)"ID3") ==
              1U) {
            __s2_len___0 = strlen("ID3");
            if (__s2_len___0 < 4U) {
              tmp___87 = __builtin_constant_p(pid3->id);
              if (tmp___87) {
                if ((unsigned int )((void const   *)(pid3->id + 1)) - (unsigned int )((void const   *)(pid3->id)) ==
                    1U) {
                  __result___93 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3->id)) +
                                                          0)) - (int const   )(*((unsigned char const   *)"ID3" +
                                                                                 0)));
                  if (__s2_len___0 > 0U) {
                    if (__result___93 == 0) {
                      __result___93 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3->id)) +
                                                              1)) - (int const   )(*((unsigned char const   *)"ID3" +
                                                                                     1)));
                      if (__s2_len___0 > 1U) {
                        if (__result___93 == 0) {
                          __result___93 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3->id)) +
                                                                  2)) - (int const   )(*((unsigned char const   *)"ID3" +
                                                                                         2)));
                          if (__s2_len___0 > 2U) {
                            if (__result___93 == 0) {
                              __result___93 = (int )((int const   )(*((unsigned char const   *)((char const   *)(pid3->id)) +
                                                                      3)) - (int const   )(*((unsigned char const   *)"ID3" +
                                                                                             3)));
                            } else {
                              goto _L___321;
                            }
                          } else {
                            _L___321: /* CIL Label */ ;
                          }
                        } else {
                          goto _L___322;
                        }
                      } else {
                        _L___322: /* CIL Label */ ;
                      }
                    } else {
                      goto _L___323;
                    }
                  } else {
                    _L___323: /* CIL Label */ ;
                  }
                  tmp___71 = __result___93;
                } else {
                  goto _L___327;
                }
              } else {
                _L___327: /* CIL Label */ 
                __s1___30 = (unsigned char const   *)((char const   *)(pid3->id));
                __result___94 = (int )((int const   )(*(__s1___30 + 0)) - (int const   )(*((unsigned char const   *)"ID3" +
                                                                                           0)));
                if (__s2_len___0 > 0U) {
                  if (__result___94 == 0) {
                    __result___94 = (int )((int const   )(*(__s1___30 + 1)) - (int const   )(*((unsigned char const   *)"ID3" +
                                                                                               1)));
                    if (__s2_len___0 > 1U) {
                      if (__result___94 == 0) {
                        __result___94 = (int )((int const   )(*(__s1___30 + 2)) -
                                               (int const   )(*((unsigned char const   *)"ID3" +
                                                                2)));
                        if (__s2_len___0 > 2U) {
                          if (__result___94 == 0) {
                            __result___94 = (int )((int const   )(*(__s1___30 + 3)) -
                                                   (int const   )(*((unsigned char const   *)"ID3" +
                                                                    3)));
                          } else {
                            goto _L___324;
                          }
                        } else {
                          _L___324: /* CIL Label */ ;
                        }
                      } else {
                        goto _L___325;
                      }
                    } else {
                      _L___325: /* CIL Label */ ;
                    }
                  } else {
                    goto _L___326;
                  }
                } else {
                  _L___326: /* CIL Label */ ;
                }
                tmp___71 = __result___94;
              }
            } else {
              goto _L___328;
            }
          } else {
            _L___328: /* CIL Label */ 
            tmp___71 = strcmp((char const   *)(pid3->id), "ID3");
          }
        }
      }
      tmp___49 = tmp___71;
    } else {
      tmp___49 = strncmp((char const   *)(pid3->id), "ID3", 3U);
    }
  }
  if (tmp___49 == 0) {
    err_log(9, 8U, (char *)"Found ID3 header\n");
    size = (unsigned int )(((((int )pid3->size[0] << 21) | ((int )pid3->size[1] <<
                                                            14)) | ((int )pid3->size[2] <<
                                                                    7)) | (int )pid3->size[3]);
    fp_size = (long )(size + sizeof(SCAN_ID3HEADER ));
    first_check = 1;
    err_log(9, 8U, (char *)"Header length: %d\n", size);
  }
  index___0 = 0;
  while (! found) {
    fseek(infile, fp_size, 0);
    err_log(9, 8U, (char *)"Reading in new block at %d\n", (int )fp_size);
    tmp___94 = fread((void * __restrict  )(buffer___0), 1U, sizeof(buffer___0), (FILE * __restrict  )infile);
    if (tmp___94 < sizeof(buffer___0)) {
      err_log(1, 8U, (char *)"Short read: %s\n", file);
      fclose(infile);
      return (0);
    }
    index___0 = 0;
    while (! found) {
      while (1) {
        if ((int )buffer___0[index___0] != 255) {
          if (! ((unsigned int )index___0 < sizeof(buffer___0) - 50U)) {
            goto _L___338;
          }
        } else {
          _L___338: /* CIL Label */ 
          break;
        }
        index___0 ++;
      }
      if (first_check) {
        if (index___0) {
          fp_size = 0L;
          err_log(9, 8U, (char *)"Bad header... dropping back for full frame search\n");
          first_check = 0;
          break;
        } else {
          goto _L___339;
        }
      } else {
        _L___339: /* CIL Label */ ;
      }
      if ((unsigned int )index___0 > sizeof(buffer___0) - 50U) {
        fp_size += (off_t )index___0;
        err_log(9, 8U, (char *)"Block exhausted\n");
        break;
      }
      tmp___98 = scan_decode_mp3_frame(& buffer___0[index___0], & fi);
      if (! tmp___98) {
        err_log(9, 8U, (char *)"valid header at %d\n", index___0);
        tmp___97 = strncasecmp((char const   *)((char *)(& buffer___0[(index___0 +
                                                                       fi.xing_offset) +
                                                                      4])), "XING",
                               4U);
        if (tmp___97 == 0) {
          found = 1;
          fp_size += (off_t )index___0;
        } else {
          err_log(9, 8U, (char *)"Found valid frame at %04x\n", (int )fp_size + index___0);
          err_log(9, 8U, (char *)"Checking at %04x\n", ((int )fp_size + index___0) +
                                                       fi.frame_length);
          fseek(infile, (fp_size + (off_t )index___0) + (off_t )fi.frame_length, 0);
          tmp___96 = fread((void * __restrict  )(frame_buffer), 1U, sizeof(frame_buffer),
                           (FILE * __restrict  )infile);
          if (tmp___96 == sizeof(frame_buffer)) {
            tmp___95 = scan_decode_mp3_frame((unsigned char *)(frame_buffer), & fi);
            if (! tmp___95) {
              found = 1;
              fp_size += (off_t )index___0;
            }
          } else {
            err_log(1, 8U, (char *)"Could not read frame header: %s\n", file);
            fclose(infile);
            return (0);
          }
          if (! found) {
            err_log(9, 8U, (char *)"Didn\'t pan out.\n");
          }
        }
      }
      if (! found) {
        index___0 ++;
        if (first_check) {
          err_log(9, 8U, (char *)"Bad header... dropping back for full frame search\n");
          first_check = 0;
          fp_size = 0L;
          break;
        }
      }
    }
  }
  file_size -= fp_size;
  fi.frame_offset = (int )fp_size;
  tmp___99 = scan_decode_mp3_frame(& buffer___0[index___0], & fi);
  if (tmp___99) {
    fclose(infile);
    err_log(1, 8U, (char *)"Could not find sync frame: %s\n", file);
    err_log(1, 8U, (char *)"If this is a valid mp3 file that plays in other applications, please email me at rpedde@users.sourceforge.net and tell me you got this error.  Thanks");
    return (0);
  }
  err_log(9, 8U, (char *)" MPEG Version: %0.1g\n", fi.version);
  err_log(9, 8U, (char *)" Layer: %d\n", fi.layer);
  err_log(9, 8U, (char *)" Sample Rate: %d\n", fi.samplerate);
  err_log(9, 8U, (char *)" Bit Rate: %d\n", fi.bitrate);
  tmp___102 = strncasecmp((char const   *)((char *)(& buffer___0[(index___0 + fi.xing_offset) +
                                                                 4])), "XING", 4U);
  if (tmp___102 == 0) {
    err_log(9, 8U, (char *)"Found Xing header\n");
    xing_flags = (*((int *)(& buffer___0[((index___0 + fi.xing_offset) + 4) + 4])));
    __x = (unsigned short )xing_flags;
    tmp___100 = __builtin_constant_p(__x);
    if (tmp___100) {
      __v = (unsigned short )((((int )__x >> 8) & 255) | (((int )__x & 255) << 8));
    } else {
      __asm__  ("rorw $8, %w0": "=r" (__v): "0" (__x): "cc");
    }
    xing_flags = (int )__v;
    err_log(9, 8U, (char *)"Xing Flags: %02X\n", xing_flags);
    if (xing_flags & 1) {
      fi.number_of_frames = (*((int *)(& buffer___0[((index___0 + fi.xing_offset) +
                                                     4) + 8])));
      __x___0 = (unsigned short )fi.number_of_frames;
      tmp___101 = __builtin_constant_p(__x___0);
      if (tmp___101) {
        __v___0 = (unsigned short )((((int )__x___0 >> 8) & 255) | (((int )__x___0 &
                                                                     255) << 8));
      } else {
        __asm__  ("rorw $8, %w0": "=r" (__v___0): "0" (__x___0): "cc");
      }
      fi.number_of_frames = (int )__v___0;
    }
  }
  if (config.scan_type != 0) {
    if (fi.number_of_frames == 0) {
      if (! pmp3->song_length) {
        err_log(9, 8U, (char *)"Starting aggressive file length scan\n");
        if (config.scan_type == 1) {
          scan_get_average_bitrate(infile, & fi);
        } else {
          scan_get_frame_count(infile, & fi);
        }
      } else {
        goto _L___341;
      }
    } else {
      goto _L___341;
    }
  } else {
    _L___341: /* CIL Label */ ;
  }
  pmp3->bitrate = fi.bitrate;
  pmp3->samplerate = fi.samplerate;
  if (! pmp3->song_length) {
    if (! fi.number_of_frames) {
      pmp3->song_length = (int )(((double )file_size * 8.) / (double )fi.bitrate);
    } else {
      pmp3->song_length = (int )(((double )(fi.number_of_frames * fi.samples_per_frame) *
                                  1000.) / (double )fi.samplerate);
    }
  }
  err_log(9, 8U, (char *)" Song Length: %d\n", pmp3->song_length);
  fclose(infile);
  return (0);
}
}
void make_composite_tags(MP3FILE *song ) 
{ int len ;
  char fdescr[50] ;
  size_t tmp ;
  size_t tmp___0 ;
  size_t __len___2 ;
  size_t tmp___18 ;
  char *__retval___2 ;
  char *tmp___19 ;
  int tmp___21 ;
  size_t __len___6 ;
  size_t tmp___37 ;
  char *__retval___6 ;
  char *tmp___38 ;
  size_t __len___10 ;
  size_t tmp___55 ;
  char *__retval___10 ;
  char *tmp___56 ;
  size_t __len___14 ;
  size_t tmp___74 ;
  char *__retval___14 ;
  char *tmp___75 ;
  int tmp___77 ;

  {
  len = 0;
  if (! song->artist) {
    if (song->orchestra) {
      goto _L___1;
    } else {
      if (song->conductor) {
        _L___1: /* CIL Label */ 
        if (song->orchestra) {
          tmp = strlen((char const   *)song->orchestra);
          len = (int )((size_t )len + tmp);
        }
        if (song->conductor) {
          tmp___0 = strlen((char const   *)song->conductor);
          len = (int )((size_t )len + tmp___0);
        }
        len += 3;
        song->artist = (char *)calloc((unsigned int )len, 1U);
        if (song->artist) {
          if (song->orchestra) {
            strcat((char * __restrict  )song->artist, (char const   * __restrict  )song->orchestra);
          }
          if (song->orchestra) {
            if (song->conductor) {
              strcat((char * __restrict  )song->artist, (char const   * __restrict  )" - ");
            } else {
              goto _L;
            }
          } else {
            _L: /* CIL Label */ ;
          }
          if (song->conductor) {
            strcat((char * __restrict  )song->artist, (char const   * __restrict  )song->conductor);
          }
        }
      } else {
        goto _L___0;
      }
    }
  } else {
    _L___0: /* CIL Label */ ;
  }
  sprintf((char * __restrict  )(fdescr), (char const   * __restrict  )"%s audio file",
          song->type);
  tmp___21 = __builtin_constant_p(fdescr);
  if (tmp___21) {
    if ((unsigned int )((void const   *)(fdescr + 1)) - (unsigned int )((void const   *)(fdescr)) ==
        1U) {
      if ((int const   )(*((char const   *)(fdescr) + 0)) == 0) {
        song->description = (char *)calloc(1U, 1U);
      } else {
        tmp___18 = strlen((char const   *)(fdescr));
        __len___2 = tmp___18 + 1U;
        tmp___19 = (char *)malloc(__len___2);
        __retval___2 = tmp___19;
        if ((unsigned int )__retval___2 != (unsigned int )((void *)0)) {
          __retval___2 = (char *)memcpy((void * __restrict  )__retval___2, (void const   * __restrict  )(fdescr),
                                        __len___2);
        }
        song->description = __retval___2;
      }
    } else {
      goto _L___2;
    }
  } else {
    _L___2: /* CIL Label */ 
    song->description = __strdup((char const   *)(fdescr));
  }
  if (song->url) {
    if ((unsigned int )((void const   *)("Playlist URL" + 1)) - (unsigned int )((void const   *)"Playlist URL") ==
        1U) {
      if ((int const   )(*("Playlist URL" + 0)) == 0) {
        song->description = (char *)calloc(1U, 1U);
      } else {
        tmp___37 = strlen("Playlist URL");
        __len___6 = tmp___37 + 1U;
        tmp___38 = (char *)malloc(__len___6);
        __retval___6 = tmp___38;
        if ((unsigned int )__retval___6 != (unsigned int )((void *)0)) {
          __retval___6 = (char *)memcpy((void * __restrict  )__retval___6, (void const   * __restrict  )"Playlist URL",
                                        __len___6);
        }
        song->description = __retval___6;
      }
    } else {
      song->description = __strdup("Playlist URL");
    }
    song->data_kind = 1;
    if (song->type) {
      free((void *)song->type);
    }
    if ((unsigned int )((void const   *)("pls" + 1)) - (unsigned int )((void const   *)"pls") ==
        1U) {
      if ((int const   )(*("pls" + 0)) == 0) {
        song->type = (char *)calloc(1U, 1U);
      } else {
        tmp___55 = strlen("pls");
        __len___10 = tmp___55 + 1U;
        tmp___56 = (char *)malloc(__len___10);
        __retval___10 = tmp___56;
        if ((unsigned int )__retval___10 != (unsigned int )((void *)0)) {
          __retval___10 = (char *)memcpy((void * __restrict  )__retval___10, (void const   * __restrict  )"pls",
                                         __len___10);
        }
        song->type = __retval___10;
      }
    } else {
      song->type = __strdup("pls");
    }
  } else {
    song->data_kind = 0;
  }
  if (! song->title) {
    tmp___77 = __builtin_constant_p(song->fname);
    if (tmp___77) {
      if ((unsigned int )((void const   *)(song->fname + 1)) - (unsigned int )((void const   *)song->fname) ==
          1U) {
        if ((int const   )(*((char const   *)song->fname + 0)) == 0) {
          song->title = (char *)calloc(1U, 1U);
        } else {
          tmp___74 = strlen((char const   *)song->fname);
          __len___14 = tmp___74 + 1U;
          tmp___75 = (char *)malloc(__len___14);
          __retval___14 = tmp___75;
          if ((unsigned int )__retval___14 != (unsigned int )((void *)0)) {
            __retval___14 = (char *)memcpy((void * __restrict  )__retval___14, (void const   * __restrict  )song->fname,
                                           __len___14);
          }
          song->title = __retval___14;
        }
      } else {
        goto _L___3;
      }
    } else {
      _L___3: /* CIL Label */ 
      song->title = __strdup((char const   *)song->fname);
    }
  }
  song->item_kind = 2;
  return;
}
}
#pragma merger(0,"/tmp/cil-XJdT3w5W.i","-g -g -O2")
extern struct tm *localtime(time_t const   *__timer ) ;
struct tag_smart_playlist pl_smart ;
int yyparse(void) ;
struct tag_smart_playlist pl_smart  =    {(char *)((void *)0), 0U, (PL_NODE *)((void *)0), (struct tag_smart_playlist *)((void *)0)};
int pl_error  =    0;
void pl_dump_node(PL_NODE *pnode , int indent ) ;
int pl_eval_node(MP3FILE *pmp3 , PL_NODE *pnode ) ;
FILE *yyin ;
void pl_dump(void) 
{ SMART_PLAYLIST *pcurrent ;

  {
  pcurrent = pl_smart.next;
  while (pcurrent) {
    printf((char const   * __restrict  )"Playlist %s:\n", pcurrent->name);
    pl_dump_node(pcurrent->root, 1);
    pcurrent = pcurrent->next;
  }
  return;
}
}
void pl_dump_node(PL_NODE *pnode , int indent ) 
{ int index___0 ;
  int not ;
  unsigned int boolarg ;
  char datebuffer[40] ;
  struct tm *ptm ;
  char const   *tmp ;
  char const   *tmp___0 ;

  {
  not = 0;
  index___0 = 0;
  while (index___0 < indent) {
    printf((char const   * __restrict  )" ");
    index___0 ++;
  }
  if (pnode->op == 258) {
    printf((char const   * __restrict  )"AND\n");
  } else {
    if (pnode->op == 259) {
      printf((char const   * __restrict  )"OR\n");
    }
  }
  if (pnode->op == 258) {
    goto _L;
  } else {
    if (pnode->op == 259) {
      _L: /* CIL Label */ 
      pl_dump_node(pnode->arg1.plval, indent + 1);
      pl_dump_node(pnode->arg2.plval, indent + 1);
      return;
    }
  }
  switch (pnode->arg1.ival) {
  case 260: 
  printf((char const   * __restrict  )"ARTIST ");
  break;
  case 261: 
  printf((char const   * __restrict  )"ALBUM ");
  break;
  case 262: 
  printf((char const   * __restrict  )"GENRE ");
  break;
  case 263: 
  printf((char const   * __restrict  )"PATH ");
  break;
  case 264: 
  printf((char const   * __restrict  )"COMPOSER ");
  break;
  case 265: 
  printf((char const   * __restrict  )"ORCHESTRA ");
  break;
  case 266: 
  printf((char const   * __restrict  )"CONDUCTOR ");
  break;
  case 267: 
  printf((char const   * __restrict  )"GROUPING ");
  break;
  case 268: 
  printf((char const   * __restrict  )"TYPE ");
  break;
  case 269: 
  printf((char const   * __restrict  )"COMMENT ");
  break;
  case 281: 
  printf((char const   * __restrict  )"YEAR ");
  break;
  case 282: 
  printf((char const   * __restrict  )"BPM ");
  break;
  case 283: 
  printf((char const   * __restrict  )"BITRATE ");
  break;
  case 284: 
  printf((char const   * __restrict  )"DATE ");
  break;
  default: 
  printf((char const   * __restrict  )"<unknown tag> ");
  break;
  }
  boolarg = (unsigned int )(pnode->op & 2147483647);
  if ((unsigned int )pnode->op & 2147483648U) {
    not = 1;
  }
  switch ((int )boolarg) {
  case 275: ;
  if (not) {
    tmp = "IS NOT ";
  } else {
    tmp = "IS ";
  }
  printf((char const   * __restrict  )"%s", tmp);
  break;
  case 276: ;
  if (not) {
    tmp___0 = "DOES NOT INCLUDE ";
  } else {
    tmp___0 = "INCLUDES ";
  }
  printf((char const   * __restrict  )"%s", tmp___0);
  break;
  case 270: 
  printf((char const   * __restrict  )"EQUALS ");
  break;
  case 271: 
  printf((char const   * __restrict  )"< ");
  break;
  case 272: 
  printf((char const   * __restrict  )"<= ");
  break;
  case 273: 
  printf((char const   * __restrict  )"> ");
  break;
  case 274: 
  printf((char const   * __restrict  )">= ");
  break;
  case 285: 
  printf((char const   * __restrict  )"BEFORE ");
  break;
  case 286: 
  printf((char const   * __restrict  )"AFTER ");
  break;
  default: 
  printf((char const   * __restrict  )"<unknown boolop> ");
  break;
  }
  switch (pnode->type) {
  case 1: 
  printf((char const   * __restrict  )"%s\n", pnode->arg2.cval);
  break;
  case 0: 
  printf((char const   * __restrict  )"%d\n", pnode->arg2.ival);
  break;
  case 2: 
  ptm = localtime((time_t const   *)((time_t *)(& pnode->arg2.ival)));
  strftime((char * __restrict  )(datebuffer), sizeof(datebuffer), (char const   * __restrict  )"%Y-%m-%d",
           (struct tm  const  * __restrict  )ptm);
  printf((char const   * __restrict  )"%s\n", datebuffer);
  break;
  default: 
  printf((char const   * __restrict  )"<unknown type>\n");
  break;
  }
  return;
}
}
int pl_load(char *file ) 
{ FILE *fin ;
  int result ;

  {
  fin = fopen((char const   * __restrict  )file, (char const   * __restrict  )"r");
  if (! fin) {
    return (-1);
  }
  yyin = fin;
  result = yyparse();
  fclose(fin);
  if (pl_error) {
    return (-1);
  }
  return (0);
}
}
void pl_register(void) 
{ SMART_PLAYLIST *pcurrent ;

  {
  err_log(5, 128U, (char *)"Finished loading smart playlists\n");
  pcurrent = pl_smart.next;
  while (pcurrent) {
    err_log(5, 128U, (char *)"Adding smart playlist %s as %d\n", pcurrent->name, pcurrent->id);
    db_add_playlist((unsigned long )pcurrent->id, pcurrent->name, 0, 1);
    pcurrent = pcurrent->next;
  }
  return;
}
}
void pl_eval(MP3FILE *pmp3 ) 
{ SMART_PLAYLIST *pcurrent ;
  int tmp ;

  {
  pcurrent = pl_smart.next;
  while (pcurrent) {
    tmp = pl_eval_node(pmp3, pcurrent->root);
    if (tmp) {
      err_log(9, 128U, (char *)"Match song to playlist %s (%d)\n", pcurrent->name,
              pcurrent->id);
      db_add_playlist_song((unsigned long )pcurrent->id, pmp3->id);
    }
    pcurrent = pcurrent->next;
  }
  return;
}
}
int pl_eval_node(MP3FILE *pmp3 , PL_NODE *pnode ) 
{ int r_arg ;
  int r_arg2 ;
  char *cval ;
  int ival ;
  int boolarg ;
  int not ;
  int retval ;
  int tmp ;
  int tmp___0 ;
  int tmp___1 ;

  {
  cval = (char *)((void *)0);
  ival = 0;
  not = 0;
  retval = 0;
  r_arg2 = 0;
  r_arg = r_arg2;
  if (pnode->op == 258) {
    goto _L___3;
  } else {
    if (pnode->op == 259) {
      _L___3: /* CIL Label */ 
      r_arg = pl_eval_node(pmp3, pnode->arg1.plval);
      if (pnode->op == 258) {
        if (! r_arg) {
          return (0);
        } else {
          goto _L;
        }
      } else {
        _L: /* CIL Label */ ;
      }
      if (pnode->op == 259) {
        if (r_arg) {
          return (1);
        } else {
          goto _L___0;
        }
      } else {
        _L___0: /* CIL Label */ ;
      }
      r_arg2 = pl_eval_node(pmp3, pnode->arg2.plval);
      if (pnode->op == 258) {
        if (r_arg) {
          if (r_arg2) {
            tmp = 1;
          } else {
            goto _L___1;
          }
        } else {
          _L___1: /* CIL Label */ 
          tmp = 0;
        }
        return (tmp);
      }
      if (r_arg) {
        goto _L___2;
      } else {
        if (r_arg2) {
          _L___2: /* CIL Label */ 
          tmp___0 = 1;
        } else {
          tmp___0 = 0;
        }
      }
      return (tmp___0);
    }
  }
  switch (pnode->arg1.ival) {
  case 261: 
  cval = pmp3->album;
  break;
  case 260: 
  cval = pmp3->artist;
  break;
  case 262: 
  cval = pmp3->genre;
  break;
  case 263: 
  cval = pmp3->path;
  break;
  case 264: 
  cval = pmp3->composer;
  break;
  case 265: 
  cval = pmp3->orchestra;
  break;
  case 266: 
  cval = pmp3->conductor;
  break;
  case 267: 
  cval = pmp3->grouping;
  break;
  case 268: 
  cval = pmp3->description;
  break;
  case 269: 
  cval = pmp3->comment;
  break;
  case 281: 
  ival = pmp3->year;
  break;
  case 282: 
  ival = pmp3->bpm;
  break;
  case 283: 
  ival = pmp3->bitrate / 1024;
  break;
  case 284: 
  ival = pmp3->time_added;
  break;
  default: 
  err_log(0, 128U, (char *)"Unknown token in playlist.  This can\'t happen!\n\n");
  break;
  }
  boolarg = pnode->op & 2147483647;
  if ((unsigned int )pnode->op & 2147483648U) {
    not = 1;
  }
  if (pnode->type == 1) {
    if (! cval) {
      cval = (char *)"";
    }
    err_log(9, 128U, (char *)"Matching %s to %s\n", cval, pnode->arg2.cval);
    switch (boolarg) {
    case 275: 
    r_arg = strcasecmp((char const   *)cval, (char const   *)pnode->arg2.cval);
    if (not) {
      retval = r_arg;
    } else {
      retval = ! r_arg != 0;
    }
    break;
    case 276: 
    tmp___1 = strcasestr(cval, pnode->arg2.cval);
    r_arg = tmp___1;
    if (not) {
      retval = ! r_arg != 0;
    } else {
      retval = r_arg;
    }
    break;
    }
  }
  if (pnode->type == 2) {
    err_log(9, 128U, (char *)"Comparing (datewise) %d to %d\n", ival, pnode->arg2.ival);
    switch (boolarg) {
    case 285: 
    r_arg = ival < pnode->arg2.ival;
    break;
    case 286: 
    r_arg = ival > pnode->arg2.ival;
    break;
    }
    retval = r_arg;
  }
  if (pnode->type == 0) {
    err_log(9, 128U, (char *)"Comparing %d to %d\n", ival, pnode->arg2.ival);
    switch (boolarg) {
    case 270: 
    r_arg = ival == pnode->arg2.ival;
    break;
    case 273: 
    r_arg = ival > pnode->arg2.ival;
    break;
    case 274: 
    r_arg = ival >= pnode->arg2.ival;
    break;
    case 271: 
    r_arg = ival < pnode->arg2.ival;
    break;
    case 272: 
    r_arg = ival <= pnode->arg2.ival;
    break;
    }
    if (not) {
      retval = ! r_arg != 0;
    } else {
      retval = r_arg;
    }
  }
  err_log(9, 128U, (char *)"Returning %d\n", retval);
  return (retval);
}
}
#pragma merger(0,"/tmp/cil-GSXyKUTQ.i","-g -g -O2")
extern int _IO_getc(_IO_FILE *__fp ) ;
extern struct _IO_FILE *stdin ;
extern struct _IO_FILE *stdout ;
int yyleng  ;
FILE *yyout ;
static struct yy_buffer_state *yy_current_buffer  =    (YY_BUFFER_STATE )0;
static char yy_hold_char  ;
static int yy_n_chars  ;
static char *yy_c_buf_p  =    (char *)0;
static int yy_init  =    1;
static int yy_start  =    0;
static int yy_did_buffer_switch_on_eof  ;
void yyrestart(FILE *input_file ) ;
void yy_switch_to_buffer(YY_BUFFER_STATE new_buffer ) ;
void yy_load_buffer_state(void) ;
YY_BUFFER_STATE yy_create_buffer(FILE *file , int size ) ;
void yy_delete_buffer(YY_BUFFER_STATE b ) ;
void yy_init_buffer(YY_BUFFER_STATE b , FILE *file ) ;
void yy_flush_buffer(YY_BUFFER_STATE b ) ;
YY_BUFFER_STATE yy_scan_buffer(char *base , yy_size_t size ) ;
YY_BUFFER_STATE yy_scan_string(char const   *yy_str ) ;
YY_BUFFER_STATE yy_scan_bytes(char const   *bytes , int len ) ;
static void *yy_flex_alloc(yy_size_t size ) ;
static void yy_flex_free(void *ptr ) ;
FILE *yyin  =    (FILE *)0;
FILE *yyout  =    (FILE *)0;
int yylineno ;
int yylineno  =    1;
char *yytext  ;
static yy_state_type yy_get_previous_state(void) ;
static yy_state_type yy_try_NUL_trans(yy_state_type yy_current_state ) ;
static int yy_get_next_buffer(void) ;
static void yy_fatal_error(char const   *msg ) ;
static short const   yy_acclist[107]  = 
  {      (short const   )0,      (short const   )47,      (short const   )45,      (short const   )46, 
        (short const   )1,      (short const   )45,      (short const   )46,      (short const   )1, 
        (short const   )46,      (short const   )38,      (short const   )45,      (short const   )46, 
        (short const   )45,      (short const   )46,      (short const   )45,      (short const   )46, 
        (short const   )45,      (short const   )46,      (short const   )44,      (short const   )45, 
        (short const   )46,      (short const   )40,      (short const   )45,      (short const   )46, 
        (short const   )32,      (short const   )45,      (short const   )46,      (short const   )42, 
        (short const   )45,      (short const   )46,      (short const   )45,      (short const   )46, 
        (short const   )45,      (short const   )46,      (short const   )45,      (short const   )46, 
        (short const   )45,      (short const   )46,      (short const   )45,      (short const   )46, 
        (short const   )45,      (short const   )46,      (short const   )45,      (short const   )46, 
        (short const   )45,      (short const   )46,      (short const   )45,      (short const   )46, 
        (short const   )45,      (short const   )46,      (short const   )45,      (short const   )46, 
        (short const   )45,      (short const   )46,      (short const   )45,      (short const   )46, 
        (short const   )45,      (short const   )46,      (short const   )45,      (short const   )46, 
        (short const   )1,      (short const   )43,      (short const   )2,      (short const   )36, 
        (short const   )44,      (short const   )39,      (short const   )41,      (short const   )30, 
        (short const   )33,      (short const   )34,      (short const   )44,      (short const   )27, 
        (short const   )35,      (short const   )14,      (short const   )23,      (short const   )37, 
        (short const   )44,      (short const   )16,      (short const   )23,      (short const   )6, 
        (short const   )11,      (short const   )24,      (short const   )13,      (short const   )26, 
        (short const   )44,      (short const   )29,      (short const   )4,      (short const   )5, 
        (short const   )25,      (short const   )18,      (short const   )24,      (short const   )26, 
        (short const   )3,      (short const   )28,      (short const   )25,      (short const   )15, 
        (short const   )12,      (short const   )7,      (short const   )10,      (short const   )31, 
        (short const   )9,      (short const   )20,      (short const   )22,      (short const   )8, 
        (short const   )19,      (short const   )17,      (short const   )21};
static short const   yy_accept[180]  = 
  {      (short const   )0,      (short const   )1,      (short const   )1,      (short const   )1, 
        (short const   )2,      (short const   )4,      (short const   )7,      (short const   )9, 
        (short const   )12,      (short const   )14,      (short const   )16,      (short const   )18, 
        (short const   )21,      (short const   )24,      (short const   )27,      (short const   )30, 
        (short const   )32,      (short const   )34,      (short const   )36,      (short const   )38, 
        (short const   )40,      (short const   )42,      (short const   )44,      (short const   )46, 
        (short const   )48,      (short const   )50,      (short const   )52,      (short const   )54, 
        (short const   )56,      (short const   )58,      (short const   )60,      (short const   )61, 
        (short const   )61,      (short const   )62,      (short const   )62,      (short const   )63, 
        (short const   )64,      (short const   )65,      (short const   )66,      (short const   )67, 
        (short const   )67,      (short const   )67,      (short const   )67,      (short const   )67, 
        (short const   )67,      (short const   )67,      (short const   )67,      (short const   )67, 
        (short const   )67,      (short const   )67,      (short const   )67,      (short const   )67, 
        (short const   )67,      (short const   )68,      (short const   )68,      (short const   )68, 
        (short const   )68,      (short const   )69,      (short const   )69,      (short const   )69, 
        (short const   )69,      (short const   )69,      (short const   )69,      (short const   )70, 
        (short const   )71,      (short const   )71,      (short const   )72,      (short const   )72, 
        (short const   )73,      (short const   )73,      (short const   )73,      (short const   )73, 
        (short const   )74,      (short const   )74,      (short const   )74,      (short const   )74, 
        (short const   )75,      (short const   )75,      (short const   )75,      (short const   )75, 
        (short const   )75,      (short const   )75,      (short const   )76,      (short const   )76, 
        (short const   )76,      (short const   )76,      (short const   )76,      (short const   )76, 
        (short const   )76,      (short const   )76,      (short const   )77,      (short const   )77, 
        (short const   )77,      (short const   )77,      (short const   )77,      (short const   )77, 
        (short const   )77,      (short const   )77,      (short const   )77,      (short const   )78, 
        (short const   )79,      (short const   )79,      (short const   )79,      (short const   )79, 
        (short const   )79,      (short const   )79,      (short const   )79,      (short const   )80, 
        (short const   )80,      (short const   )81,      (short const   )82,      (short const   )84, 
        (short const   )84,      (short const   )84,      (short const   )85,      (short const   )86, 
        (short const   )87,      (short const   )87,      (short const   )87,      (short const   )87, 
        (short const   )87,      (short const   )87,      (short const   )87,      (short const   )88, 
        (short const   )88,      (short const   )88,      (short const   )88,      (short const   )89, 
        (short const   )89,      (short const   )90,      (short const   )91,      (short const   )92, 
        (short const   )92,      (short const   )92,      (short const   )93,      (short const   )94, 
        (short const   )94,      (short const   )94,      (short const   )94,      (short const   )94, 
        (short const   )94,      (short const   )94,      (short const   )94,      (short const   )94, 
        (short const   )94,      (short const   )95,      (short const   )95,      (short const   )95, 
        (short const   )95,      (short const   )96,      (short const   )97,      (short const   )97, 
        (short const   )97,      (short const   )97,      (short const   )97,      (short const   )97, 
        (short const   )97,      (short const   )97,      (short const   )97,      (short const   )97, 
        (short const   )97,      (short const   )98,      (short const   )98,      (short const   )99, 
        (short const   )100,      (short const   )100,      (short const   )100,      (short const   )100, 
        (short const   )100,      (short const   )100,      (short const   )100,      (short const   )101, 
        (short const   )101,      (short const   )102,      (short const   )103,      (short const   )104, 
        (short const   )105,      (short const   )106,      (short const   )107,      (short const   )107};
static int const   yy_ec[256]  = 
  {      (int const   )0,      (int const   )1,      (int const   )1,      (int const   )1, 
        (int const   )1,      (int const   )1,      (int const   )1,      (int const   )1, 
        (int const   )1,      (int const   )2,      (int const   )3,      (int const   )1, 
        (int const   )1,      (int const   )1,      (int const   )1,      (int const   )1, 
        (int const   )1,      (int const   )1,      (int const   )1,      (int const   )1, 
        (int const   )1,      (int const   )1,      (int const   )1,      (int const   )1, 
        (int const   )1,      (int const   )1,      (int const   )1,      (int const   )1, 
        (int const   )1,      (int const   )1,      (int const   )1,      (int const   )1, 
        (int const   )4,      (int const   )5,      (int const   )6,      (int const   )7, 
        (int const   )1,      (int const   )1,      (int const   )8,      (int const   )1, 
        (int const   )1,      (int const   )1,      (int const   )1,      (int const   )1, 
        (int const   )1,      (int const   )9,      (int const   )1,      (int const   )1, 
        (int const   )10,      (int const   )10,      (int const   )10,      (int const   )10, 
        (int const   )10,      (int const   )10,      (int const   )10,      (int const   )10, 
        (int const   )10,      (int const   )10,      (int const   )1,      (int const   )1, 
        (int const   )11,      (int const   )12,      (int const   )13,      (int const   )1, 
        (int const   )1,      (int const   )14,      (int const   )15,      (int const   )16, 
        (int const   )17,      (int const   )18,      (int const   )19,      (int const   )20, 
        (int const   )21,      (int const   )22,      (int const   )1,      (int const   )23, 
        (int const   )24,      (int const   )25,      (int const   )26,      (int const   )27, 
        (int const   )28,      (int const   )1,      (int const   )29,      (int const   )30, 
        (int const   )31,      (int const   )32,      (int const   )1,      (int const   )33, 
        (int const   )1,      (int const   )34,      (int const   )1,      (int const   )1, 
        (int const   )1,      (int const   )1,      (int const   )1,      (int const   )1, 
        (int const   )1,      (int const   )14,      (int const   )15,      (int const   )16, 
        (int const   )17,      (int const   )18,      (int const   )19,      (int const   )20, 
        (int const   )21,      (int const   )22,      (int const   )1,      (int const   )23, 
        (int const   )24,      (int const   )25,      (int const   )26,      (int const   )27, 
        (int const   )28,      (int const   )1,      (int const   )29,      (int const   )30, 
        (int const   )31,      (int const   )32,      (int const   )1,      (int const   )33, 
        (int const   )1,      (int const   )34,      (int const   )1,      (int const   )1, 
        (int const   )35,      (int const   )1,      (int const   )1,      (int const   )1, 
        (int const   )1,      (int const   )1,      (int const   )1,      (int const   )1, 
        (int const   )1,      (int const   )1,      (int const   )1,      (int const   )1, 
        (int const   )1,      (int const   )1,      (int const   )1,      (int const   )1, 
        (int const   )1,      (int const   )1,      (int const   )1,      (int const   )1, 
        (int const   )1,      (int const   )1,      (int const   )1,      (int const   )1, 
        (int const   )1,      (int const   )1,      (int const   )1,      (int const   )1, 
        (int const   )1,      (int const   )1,      (int const   )1,      (int const   )1, 
        (int const   )1,      (int const   )1,      (int const   )1,      (int const   )1, 
        (int const   )1,      (int const   )1,      (int const   )1,      (int const   )1, 
        (int const   )1,      (int const   )1,      (int const   )1,      (int const   )1, 
        (int const   )1,      (int const   )1,      (int const   )1,      (int const   )1, 
        (int const   )1,      (int const   )1,      (int const   )1,      (int const   )1, 
        (int const   )1,      (int const   )1,      (int const   )1,      (int const   )1, 
        (int const   )1,      (int const   )1,      (int const   )1,      (int const   )1, 
        (int const   )1,      (int const   )1,      (int const   )1,      (int const   )1, 
        (int const   )1,      (int const   )1,      (int const   )1,      (int const   )1, 
        (int const   )1,      (int const   )1,      (int const   )1,      (int const   )1, 
        (int const   )1,      (int const   )1,      (int const   )1,      (int const   )1, 
        (int const   )1,      (int const   )1,      (int const   )1,      (int const   )1, 
        (int const   )1,      (int const   )1,      (int const   )1,      (int const   )1, 
        (int const   )1,      (int const   )1,      (int const   )1,      (int const   )1, 
        (int const   )1,      (int const   )1,      (int const   )1,      (int const   )1, 
        (int const   )1,      (int const   )1,      (int const   )1,      (int const   )1, 
        (int const   )1,      (int const   )1,      (int const   )1,      (int const   )1, 
        (int const   )1,      (int const   )1,      (int const   )1,      (int const   )1, 
        (int const   )1,      (int const   )1,      (int const   )1,      (int const   )1, 
        (int const   )1,      (int const   )1,      (int const   )1,      (int const   )1, 
        (int const   )1,      (int const   )1,      (int const   )1,      (int const   )1, 
        (int const   )1,      (int const   )1,      (int const   )1,      (int const   )1, 
        (int const   )1,      (int const   )1,      (int const   )1,      (int const   )1, 
        (int const   )1,      (int const   )1,      (int const   )1,      (int const   )1, 
        (int const   )1,      (int const   )1,      (int const   )1,      (int const   )1};
static int const   yy_meta[36]  = 
  {      (int const   )0,      (int const   )1,      (int const   )1,      (int const   )1, 
        (int const   )1,      (int const   )1,      (int const   )1,      (int const   )1, 
        (int const   )1,      (int const   )1,      (int const   )1,      (int const   )1, 
        (int const   )1,      (int const   )1,      (int const   )1,      (int const   )1, 
        (int const   )1,      (int const   )1,      (int const   )1,      (int const   )1, 
        (int const   )1,      (int const   )1,      (int const   )1,      (int const   )1, 
        (int const   )1,      (int const   )1,      (int const   )1,      (int const   )1, 
        (int const   )1,      (int const   )1,      (int const   )1,      (int const   )1, 
        (int const   )1,      (int const   )1,      (int const   )1,      (int const   )1};
static short const   yy_base[181]  = 
  {      (short const   )0,      (short const   )0,      (short const   )0,      (short const   )197, 
        (short const   )198,      (short const   )34,      (short const   )37,      (short const   )198, 
        (short const   )39,      (short const   )193,      (short const   )187,      (short const   )184, 
        (short const   )181,      (short const   )198,      (short const   )180,      (short const   )24, 
        (short const   )29,      (short const   )164,      (short const   )176,      (short const   )31, 
        (short const   )26,      (short const   )175,      (short const   )161,      (short const   )160, 
        (short const   )157,      (short const   )171,      (short const   )27,      (short const   )166, 
        (short const   )165,      (short const   )147,      (short const   )60,      (short const   )52, 
        (short const   )198,      (short const   )178,      (short const   )198,      (short const   )198, 
        (short const   )170,      (short const   )198,      (short const   )198,      (short const   )148, 
        (short const   )151,      (short const   )162,      (short const   )159,      (short const   )144, 
        (short const   )155,      (short const   )142,      (short const   )147,      (short const   )40, 
        (short const   )36,      (short const   )145,      (short const   )143,      (short const   )153, 
        (short const   )198,      (short const   )138,      (short const   )141,      (short const   )135, 
        (short const   )149,      (short const   )133,      (short const   )146,      (short const   )134, 
        (short const   )143,      (short const   )45,      (short const   )198,      (short const   )150, 
        (short const   )141,      (short const   )198,      (short const   )126,      (short const   )198, 
        (short const   )135,      (short const   )129,      (short const   )126,      (short const   )198, 
        (short const   )43,      (short const   )137,      (short const   )135,      (short const   )122, 
        (short const   )122,      (short const   )118,      (short const   )125,      (short const   )117, 
        (short const   )116,      (short const   )198,      (short const   )125,      (short const   )124, 
        (short const   )130,      (short const   )125,      (short const   )119,      (short const   )112, 
        (short const   )109,      (short const   )63,      (short const   )110,      (short const   )113, 
        (short const   )107,      (short const   )107,      (short const   )121,      (short const   )116, 
        (short const   )106,      (short const   )100,      (short const   )198,      (short const   )198, 
        (short const   )113,      (short const   )102,      (short const   )97,      (short const   )124, 
        (short const   )106,      (short const   )108,      (short const   )198,      (short const   )91, 
        (short const   )198,      (short const   )94,      (short const   )93,      (short const   )104, 
        (short const   )111,      (short const   )110,      (short const   )198,      (short const   )198, 
        (short const   )88,      (short const   )100,      (short const   )86,      (short const   )90, 
        (short const   )85,      (short const   )98,      (short const   )198,      (short const   )91, 
        (short const   )95,      (short const   )44,      (short const   )81,      (short const   )80, 
        (short const   )198,      (short const   )198,      (short const   )198,      (short const   )80, 
        (short const   )98,      (short const   )198,      (short const   )198,      (short const   )89, 
        (short const   )75,      (short const   )87,      (short const   )73,      (short const   )77, 
        (short const   )84,      (short const   )74,      (short const   )82,      (short const   )81, 
        (short const   )198,      (short const   )67,      (short const   )80,      (short const   )87, 
        (short const   )198,      (short const   )198,      (short const   )66,      (short const   )67, 
        (short const   )73,      (short const   )62,      (short const   )65,      (short const   )72, 
        (short const   )75,      (short const   )59,      (short const   )73,      (short const   )76, 
        (short const   )198,      (short const   )56,      (short const   )198,      (short const   )198, 
        (short const   )53,      (short const   )60,      (short const   )53,      (short const   )67, 
        (short const   )46,      (short const   )69,      (short const   )198,      (short const   )55, 
        (short const   )198,      (short const   )198,      (short const   )198,      (short const   )198, 
        (short const   )198,      (short const   )198,      (short const   )198,      (short const   )73, 
        (short const   )45};
static short const   yy_def[181]  = 
  {      (short const   )0,      (short const   )178,      (short const   )1,      (short const   )178, 
        (short const   )178,      (short const   )178,      (short const   )178,      (short const   )178, 
        (short const   )179,      (short const   )180,      (short const   )178,      (short const   )178, 
        (short const   )178,      (short const   )178,      (short const   )178,      (short const   )178, 
        (short const   )178,      (short const   )178,      (short const   )178,      (short const   )178, 
        (short const   )178,      (short const   )178,      (short const   )178,      (short const   )178, 
        (short const   )178,      (short const   )178,      (short const   )178,      (short const   )178, 
        (short const   )178,      (short const   )178,      (short const   )178,      (short const   )179, 
        (short const   )178,      (short const   )180,      (short const   )178,      (short const   )178, 
        (short const   )178,      (short const   )178,      (short const   )178,      (short const   )178, 
        (short const   )178,      (short const   )178,      (short const   )178,      (short const   )178, 
        (short const   )178,      (short const   )178,      (short const   )178,      (short const   )178, 
        (short const   )178,      (short const   )178,      (short const   )178,      (short const   )178, 
        (short const   )178,      (short const   )178,      (short const   )178,      (short const   )178, 
        (short const   )178,      (short const   )178,      (short const   )178,      (short const   )178, 
        (short const   )178,      (short const   )178,      (short const   )178,      (short const   )178, 
        (short const   )178,      (short const   )178,      (short const   )178,      (short const   )178, 
        (short const   )178,      (short const   )178,      (short const   )178,      (short const   )178, 
        (short const   )178,      (short const   )178,      (short const   )178,      (short const   )178, 
        (short const   )178,      (short const   )178,      (short const   )178,      (short const   )178, 
        (short const   )178,      (short const   )178,      (short const   )178,      (short const   )178, 
        (short const   )178,      (short const   )178,      (short const   )178,      (short const   )178, 
        (short const   )178,      (short const   )178,      (short const   )178,      (short const   )178, 
        (short const   )178,      (short const   )178,      (short const   )178,      (short const   )178, 
        (short const   )178,      (short const   )178,      (short const   )178,      (short const   )178, 
        (short const   )178,      (short const   )178,      (short const   )178,      (short const   )178, 
        (short const   )178,      (short const   )178,      (short const   )178,      (short const   )178, 
        (short const   )178,      (short const   )178,      (short const   )178,      (short const   )178, 
        (short const   )178,      (short const   )178,      (short const   )178,      (short const   )178, 
        (short const   )178,      (short const   )178,      (short const   )178,      (short const   )178, 
        (short const   )178,      (short const   )178,      (short const   )178,      (short const   )178, 
        (short const   )178,      (short const   )178,      (short const   )178,      (short const   )178, 
        (short const   )178,      (short const   )178,      (short const   )178,      (short const   )178, 
        (short const   )178,      (short const   )178,      (short const   )178,      (short const   )178, 
        (short const   )178,      (short const   )178,      (short const   )178,      (short const   )178, 
        (short const   )178,      (short const   )178,      (short const   )178,      (short const   )178, 
        (short const   )178,      (short const   )178,      (short const   )178,      (short const   )178, 
        (short const   )178,      (short const   )178,      (short const   )178,      (short const   )178, 
        (short const   )178,      (short const   )178,      (short const   )178,      (short const   )178, 
        (short const   )178,      (short const   )178,      (short const   )178,      (short const   )178, 
        (short const   )178,      (short const   )178,      (short const   )178,      (short const   )178, 
        (short const   )178,      (short const   )178,      (short const   )178,      (short const   )178, 
        (short const   )178,      (short const   )178,      (short const   )178,      (short const   )178, 
        (short const   )178,      (short const   )178,      (short const   )178,      (short const   )178, 
        (short const   )178,      (short const   )178,      (short const   )0,      (short const   )178, 
        (short const   )178};
static short const   yy_nxt[234]  = 
  {      (short const   )0,      (short const   )4,      (short const   )5,      (short const   )6, 
        (short const   )5,      (short const   )7,      (short const   )8,      (short const   )9, 
        (short const   )10,      (short const   )4,      (short const   )11,      (short const   )12, 
        (short const   )13,      (short const   )14,      (short const   )15,      (short const   )16, 
        (short const   )17,      (short const   )18,      (short const   )4,      (short const   )4, 
        (short const   )19,      (short const   )4,      (short const   )20,      (short const   )4, 
        (short const   )21,      (short const   )22,      (short const   )23,      (short const   )24, 
        (short const   )25,      (short const   )4,      (short const   )4,      (short const   )26, 
        (short const   )4,      (short const   )27,      (short const   )28,      (short const   )29, 
        (short const   )30,      (short const   )30,      (short const   )30,      (short const   )30, 
        (short const   )30,      (short const   )30,      (short const   )32,      (short const   )39, 
        (short const   )40,      (short const   )32,      (short const   )33,      (short const   )44, 
        (short const   )41,      (short const   )49,      (short const   )42,      (short const   )45, 
        (short const   )51,      (short const   )43,      (short const   )58,      (short const   )32, 
        (short const   )52,      (short const   )46,      (short const   )32,      (short const   )87, 
        (short const   )50,      (short const   )59,      (short const   )30,      (short const   )30, 
        (short const   )30,      (short const   )72,      (short const   )73,      (short const   )74, 
        (short const   )95,      (short const   )141,      (short const   )75,      (short const   )96, 
        (short const   )112,      (short const   )113,      (short const   )31,      (short const   )88, 
        (short const   )177,      (short const   )142,      (short const   )143,      (short const   )176, 
        (short const   )175,      (short const   )174,      (short const   )173,      (short const   )172, 
        (short const   )171,      (short const   )170,      (short const   )169,      (short const   )168, 
        (short const   )167,      (short const   )166,      (short const   )165,      (short const   )164, 
        (short const   )163,      (short const   )162,      (short const   )161,      (short const   )160, 
        (short const   )159,      (short const   )158,      (short const   )157,      (short const   )156, 
        (short const   )155,      (short const   )154,      (short const   )153,      (short const   )152, 
        (short const   )151,      (short const   )150,      (short const   )149,      (short const   )148, 
        (short const   )147,      (short const   )146,      (short const   )145,      (short const   )144, 
        (short const   )140,      (short const   )139,      (short const   )138,      (short const   )137, 
        (short const   )136,      (short const   )135,      (short const   )134,      (short const   )133, 
        (short const   )113,      (short const   )132,      (short const   )131,      (short const   )130, 
        (short const   )129,      (short const   )128,      (short const   )127,      (short const   )126, 
        (short const   )125,      (short const   )124,      (short const   )123,      (short const   )122, 
        (short const   )121,      (short const   )120,      (short const   )119,      (short const   )118, 
        (short const   )117,      (short const   )116,      (short const   )115,      (short const   )114, 
        (short const   )111,      (short const   )110,      (short const   )109,      (short const   )108, 
        (short const   )107,      (short const   )106,      (short const   )105,      (short const   )104, 
        (short const   )103,      (short const   )102,      (short const   )101,      (short const   )100, 
        (short const   )99,      (short const   )98,      (short const   )97,      (short const   )94, 
        (short const   )93,      (short const   )92,      (short const   )91,      (short const   )90, 
        (short const   )89,      (short const   )86,      (short const   )85,      (short const   )84, 
        (short const   )83,      (short const   )82,      (short const   )81,      (short const   )80, 
        (short const   )79,      (short const   )78,      (short const   )77,      (short const   )76, 
        (short const   )71,      (short const   )70,      (short const   )69,      (short const   )68, 
        (short const   )67,      (short const   )66,      (short const   )65,      (short const   )64, 
        (short const   )63,      (short const   )34,      (short const   )62,      (short const   )61, 
        (short const   )60,      (short const   )57,      (short const   )56,      (short const   )55, 
        (short const   )54,      (short const   )53,      (short const   )48,      (short const   )47, 
        (short const   )38,      (short const   )37,      (short const   )36,      (short const   )35, 
        (short const   )34,      (short const   )178,      (short const   )3,      (short const   )178, 
        (short const   )178,      (short const   )178,      (short const   )178,      (short const   )178, 
        (short const   )178,      (short const   )178,      (short const   )178,      (short const   )178, 
        (short const   )178,      (short const   )178,      (short const   )178,      (short const   )178, 
        (short const   )178,      (short const   )178,      (short const   )178,      (short const   )178, 
        (short const   )178,      (short const   )178,      (short const   )178,      (short const   )178, 
        (short const   )178,      (short const   )178,      (short const   )178,      (short const   )178, 
        (short const   )178,      (short const   )178,      (short const   )178,      (short const   )178, 
        (short const   )178,      (short const   )178,      (short const   )178,      (short const   )178, 
        (short const   )178,      (short const   )178};
static short const   yy_chk[234]  = 
  {      (short const   )0,      (short const   )1,      (short const   )1,      (short const   )1, 
        (short const   )1,      (short const   )1,      (short const   )1,      (short const   )1, 
        (short const   )1,      (short const   )1,      (short const   )1,      (short const   )1, 
        (short const   )1,      (short const   )1,      (short const   )1,      (short const   )1, 
        (short const   )1,      (short const   )1,      (short const   )1,      (short const   )1, 
        (short const   )1,      (short const   )1,      (short const   )1,      (short const   )1, 
        (short const   )1,      (short const   )1,      (short const   )1,      (short const   )1, 
        (short const   )1,      (short const   )1,      (short const   )1,      (short const   )1, 
        (short const   )1,      (short const   )1,      (short const   )1,      (short const   )1, 
        (short const   )5,      (short const   )5,      (short const   )5,      (short const   )6, 
        (short const   )6,      (short const   )6,      (short const   )8,      (short const   )15, 
        (short const   )15,      (short const   )8,      (short const   )180,      (short const   )16, 
        (short const   )15,      (short const   )19,      (short const   )15,      (short const   )16, 
        (short const   )20,      (short const   )15,      (short const   )26,      (short const   )31, 
        (short const   )20,      (short const   )16,      (short const   )31,      (short const   )61, 
        (short const   )19,      (short const   )26,      (short const   )30,      (short const   )30, 
        (short const   )30,      (short const   )47,      (short const   )47,      (short const   )48, 
        (short const   )72,      (short const   )125,      (short const   )48,      (short const   )72, 
        (short const   )89,      (short const   )89,      (short const   )179,      (short const   )61, 
        (short const   )171,      (short const   )125,      (short const   )125,      (short const   )169, 
        (short const   )168,      (short const   )167,      (short const   )166,      (short const   )165, 
        (short const   )164,      (short const   )161,      (short const   )159,      (short const   )158, 
        (short const   )157,      (short const   )156,      (short const   )155,      (short const   )154, 
        (short const   )153,      (short const   )152,      (short const   )151,      (short const   )150, 
        (short const   )147,      (short const   )146,      (short const   )145,      (short const   )143, 
        (short const   )142,      (short const   )141,      (short const   )140,      (short const   )139, 
        (short const   )138,      (short const   )137,      (short const   )136,      (short const   )135, 
        (short const   )132,      (short const   )131,      (short const   )127,      (short const   )126, 
        (short const   )124,      (short const   )123,      (short const   )121,      (short const   )120, 
        (short const   )119,      (short const   )118,      (short const   )117,      (short const   )116, 
        (short const   )113,      (short const   )112,      (short const   )111,      (short const   )110, 
        (short const   )109,      (short const   )107,      (short const   )105,      (short const   )104, 
        (short const   )103,      (short const   )102,      (short const   )101,      (short const   )100, 
        (short const   )97,      (short const   )96,      (short const   )95,      (short const   )94, 
        (short const   )93,      (short const   )92,      (short const   )91,      (short const   )90, 
        (short const   )88,      (short const   )87,      (short const   )86,      (short const   )85, 
        (short const   )84,      (short const   )83,      (short const   )82,      (short const   )80, 
        (short const   )79,      (short const   )78,      (short const   )77,      (short const   )76, 
        (short const   )75,      (short const   )74,      (short const   )73,      (short const   )70, 
        (short const   )69,      (short const   )68,      (short const   )66,      (short const   )64, 
        (short const   )63,      (short const   )60,      (short const   )59,      (short const   )58, 
        (short const   )57,      (short const   )56,      (short const   )55,      (short const   )54, 
        (short const   )53,      (short const   )51,      (short const   )50,      (short const   )49, 
        (short const   )46,      (short const   )45,      (short const   )44,      (short const   )43, 
        (short const   )42,      (short const   )41,      (short const   )40,      (short const   )39, 
        (short const   )36,      (short const   )33,      (short const   )29,      (short const   )28, 
        (short const   )27,      (short const   )25,      (short const   )24,      (short const   )23, 
        (short const   )22,      (short const   )21,      (short const   )18,      (short const   )17, 
        (short const   )14,      (short const   )12,      (short const   )11,      (short const   )10, 
        (short const   )9,      (short const   )3,      (short const   )178,      (short const   )178, 
        (short const   )178,      (short const   )178,      (short const   )178,      (short const   )178, 
        (short const   )178,      (short const   )178,      (short const   )178,      (short const   )178, 
        (short const   )178,      (short const   )178,      (short const   )178,      (short const   )178, 
        (short const   )178,      (short const   )178,      (short const   )178,      (short const   )178, 
        (short const   )178,      (short const   )178,      (short const   )178,      (short const   )178, 
        (short const   )178,      (short const   )178,      (short const   )178,      (short const   )178, 
        (short const   )178,      (short const   )178,      (short const   )178,      (short const   )178, 
        (short const   )178,      (short const   )178,      (short const   )178,      (short const   )178, 
        (short const   )178,      (short const   )178};
static yy_state_type yy_state_buf[16386]  ;
static yy_state_type *yy_state_ptr  ;
static char *yy_full_match  ;
static int yy_lp  ;
extern time_t mktime(struct tm *__tp ) ;
YYSTYPE yylval ;
time_t l_converttime(int day , int month , int year ) ;
time_t l_convertyyyymmdd(char *date ) ;
int yywrap(void) ;
int yylex(void) 
{ register yy_state_type yy_current_state ;
  register char *yy_cp ;
  register char *yy_bp ;
  register int yy_act ;
  yy_state_type *tmp ;
  register YY_CHAR yy_c ;
  yy_state_type *tmp___0 ;
  int yyl ;
  time_t tmp___1 ;
  time_t tmp___2 ;
  time_t tmp___3 ;
  time_t tmp___4 ;
  size_t __len___2 ;
  size_t tmp___21 ;
  char *__retval___2 ;
  char *tmp___22 ;
  int tmp___24 ;
  size_t tmp___25 ;
  size_t tmp___26 ;
  int yy_amount_of_matched_text ;
  yy_state_type yy_next_state ;
  int tmp___27 ;
  int tmp___28 ;

  {
  if (yy_init) {
    yy_init = 0;
    if (! yy_start) {
      yy_start = 1;
    }
    if (! yyin) {
      yyin = stdin;
    }
    if (! yyout) {
      yyout = stdout;
    }
    if (! yy_current_buffer) {
      yy_current_buffer = yy_create_buffer(yyin, 16384);
    }
    yy_load_buffer_state();
  }
  while (1) {
    yy_cp = yy_c_buf_p;
    (*yy_cp) = yy_hold_char;
    yy_bp = yy_cp;
    yy_current_state = yy_start;
    yy_state_ptr = yy_state_buf;
    tmp = yy_state_ptr;
    yy_state_ptr ++;
    (*tmp) = yy_current_state;
    yy_match: 
    while (1) {
      yy_c = (YY_CHAR )yy_ec[(unsigned int )((unsigned char )(*yy_cp))];
      while ((int const   )yy_chk[(int const   )yy_base[yy_current_state] + (int const   )yy_c] !=
             (int const   )yy_current_state) {
        yy_current_state = (int )yy_def[yy_current_state];
        if (yy_current_state >= 179) {
          yy_c = (unsigned char )yy_meta[(unsigned int )yy_c];
        }
      }
      yy_current_state = (int )yy_nxt[(unsigned int )yy_base[yy_current_state] + (unsigned int )yy_c];
      tmp___0 = yy_state_ptr;
      yy_state_ptr ++;
      (*tmp___0) = yy_current_state;
      yy_cp ++;
      if (! ((int const   )yy_base[yy_current_state] != 198)) {
        break;
      }
    }
    yy_find_action: 
    yy_state_ptr --;
    yy_current_state = (*yy_state_ptr);
    yy_lp = (int )yy_accept[yy_current_state];
    while (1) {
      if (yy_lp) {
        if (yy_lp < (int )yy_accept[yy_current_state + 1]) {
          yy_act = (int )yy_acclist[yy_lp];
          yy_full_match = yy_cp;
          break;
        } else {
          goto _L;
        }
      } else {
        _L: /* CIL Label */ ;
      }
      yy_cp --;
      yy_state_ptr --;
      yy_current_state = (*yy_state_ptr);
      yy_lp = (int )yy_accept[yy_current_state];
    }
    yytext = yy_bp;
    yyleng = yy_cp - yy_bp;
    yy_hold_char = (*yy_cp);
    (*yy_cp) = (char )'\000';
    yy_c_buf_p = yy_cp;
    if (yy_act != 47) {
      yyl = 0;
      while (yyl < yyleng) {
        if ((int )(*(yytext + yyl)) == 10) {
          yylineno ++;
        }
        yyl ++;
      }
    }
    do_action: 
    switch (yy_act) {
    case 1: ;
    break;
    case 2: ;
    break;
    case 3: 
    yylval.ival = 260U;
    return (260);
    break;
    case 4: 
    yylval.ival = 261U;
    return (261);
    break;
    case 5: 
    yylval.ival = 262U;
    return (262);
    break;
    case 6: 
    yylval.ival = 263U;
    return (263);
    break;
    case 7: 
    yylval.ival = 264U;
    return (264);
    break;
    case 8: 
    yylval.ival = 265U;
    return (265);
    break;
    case 9: 
    yylval.ival = 266U;
    return (266);
    break;
    case 10: 
    yylval.ival = 267U;
    return (267);
    break;
    case 11: 
    yylval.ival = 268U;
    return (268);
    break;
    case 12: 
    yylval.ival = 269U;
    return (269);
    break;
    case 13: 
    yylval.ival = 281U;
    return (281);
    break;
    case 14: 
    yylval.ival = 282U;
    return (282);
    break;
    case 15: 
    yylval.ival = 283U;
    return (283);
    break;
    case 16: 
    yylval.ival = 284U;
    return (284);
    break;
    case 17: 
    yylval.ival = (unsigned int )l_convertyyyymmdd(yytext);
    return (280);
    break;
    case 18: 
    yylval.ival = (unsigned int )time((time_t *)((void *)0));
    return (280);
    break;
    case 19: 
    tmp___1 = time((time_t *)((void *)0));
    yylval.ival = (unsigned int )(tmp___1 - 86400L);
    return (280);
    break;
    case 20: 
    tmp___2 = time((time_t *)((void *)0));
    yylval.ival = (unsigned int )(tmp___2 - 604800L);
    return (280);
    break;
    case 21: 
    tmp___3 = time((time_t *)((void *)0));
    yylval.ival = (unsigned int )(tmp___3 - 2592000L);
    return (280);
    break;
    case 22: 
    tmp___4 = time((time_t *)((void *)0));
    yylval.ival = (unsigned int )(tmp___4 - 31536000L);
    return (280);
    break;
    case 23: 
    yylval.ival = 86400U;
    return (288);
    break;
    case 24: 
    yylval.ival = 604800U;
    return (288);
    break;
    case 25: 
    yylval.ival = 2592000U;
    return (288);
    break;
    case 26: 
    yylval.ival = 31536000U;
    return (288);
    break;
    case 27: 
    yylval.ival = 287U;
    return (287);
    break;
    case 28: 
    yylval.ival = 285U;
    return (285);
    break;
    case 29: 
    yylval.ival = 286U;
    return (286);
    break;
    case 30: 
    yylval.ival = 275U;
    return (275);
    break;
    case 31: 
    yylval.ival = 276U;
    return (276);
    break;
    case 32: 
    yylval.ival = 270U;
    return (270);
    break;
    case 33: ;
    case 34: 
    yylval.ival = 259U;
    return (259);
    break;
    case 35: ;
    case 36: 
    yylval.ival = 258U;
    return (258);
    break;
    case 37: ;
    case 38: 
    yylval.ival = 1U;
    return (277);
    break;
    case 39: 
    yylval.ival = 272U;
    return (272);
    break;
    case 40: 
    yylval.ival = 271U;
    return (271);
    break;
    case 41: 
    yylval.ival = 274U;
    return (274);
    break;
    case 42: 
    yylval.ival = 273U;
    return (273);
    break;
    case 43: 
    tmp___24 = __builtin_constant_p(yytext + 1);
    if (tmp___24) {
      if ((unsigned int )((void const   *)((yytext + 1) + 1)) - (unsigned int )((void const   *)(yytext +
                                                                                                 1)) ==
          1U) {
        if ((int const   )(*((char const   *)(yytext + 1) + 0)) == 0) {
          yylval.cval = (char *)calloc(1U, 1U);
        } else {
          tmp___21 = strlen((char const   *)(yytext + 1));
          __len___2 = tmp___21 + 1U;
          tmp___22 = (char *)malloc(__len___2);
          __retval___2 = tmp___22;
          if ((unsigned int )__retval___2 != (unsigned int )((void *)0)) {
            __retval___2 = (char *)memcpy((void * __restrict  )__retval___2, (void const   * __restrict  )(yytext +
                                                                                                           1),
                                          __len___2);
          }
          yylval.cval = __retval___2;
        }
      } else {
        goto _L___0;
      }
    } else {
      _L___0: /* CIL Label */ 
      yylval.cval = __strdup((char const   *)(yytext + 1));
    }
    tmp___26 = strlen((char const   *)yylval.cval);
    if ((int )(*(yylval.cval + (tmp___26 - 1U))) == 34) {
      tmp___25 = strlen((char const   *)yylval.cval);
      (*(yylval.cval + (tmp___25 - 1U))) = (char )'\000';
    }
    return (278);
    break;
    case 44: 
    yylval.ival = (unsigned int )atoi__extinline((char const   *)yytext);
    return (279);
    break;
    case 45: ;
    return ((int )(*(yytext + 0)));
    break;
    case 46: 
    fwrite((void const   * __restrict  )yytext, (unsigned int )yyleng, 1U, (FILE * __restrict  )yyout);
    break;
    case 48: ;
    return (0);
    case 47: 
    yy_amount_of_matched_text = (yy_cp - yytext) - 1;
    (*yy_cp) = yy_hold_char;
    if (yy_current_buffer->yy_buffer_status == 0) {
      yy_n_chars = yy_current_buffer->yy_n_chars;
      yy_current_buffer->yy_input_file = yyin;
      yy_current_buffer->yy_buffer_status = 1;
    }
    if ((unsigned int )yy_c_buf_p <= (unsigned int )(yy_current_buffer->yy_ch_buf +
                                                     yy_n_chars)) {
      yy_c_buf_p = yytext + yy_amount_of_matched_text;
      yy_current_state = yy_get_previous_state();
      yy_next_state = yy_try_NUL_trans(yy_current_state);
      yy_bp = yytext + 0;
      if (yy_next_state) {
        yy_c_buf_p ++;
        yy_cp = yy_c_buf_p;
        yy_current_state = yy_next_state;
        goto yy_match;
      } else {
        yy_cp = yy_c_buf_p;
        goto yy_find_action;
      }
    } else {
      tmp___27 = yy_get_next_buffer();
      switch (tmp___27) {
      case 1: 
      yy_did_buffer_switch_on_eof = 0;
      tmp___28 = yywrap();
      if (tmp___28) {
        yy_c_buf_p = yytext + 0;
        yy_act = (47 + (yy_start - 1) / 2) + 1;
        goto do_action;
      } else {
        if (! yy_did_buffer_switch_on_eof) {
          yyrestart(yyin);
        }
      }
      break;
      case 0: 
      yy_c_buf_p = yytext + yy_amount_of_matched_text;
      yy_current_state = yy_get_previous_state();
      yy_cp = yy_c_buf_p;
      yy_bp = yytext + 0;
      goto yy_match;
      case 2: 
      yy_c_buf_p = yy_current_buffer->yy_ch_buf + yy_n_chars;
      yy_current_state = yy_get_previous_state();
      yy_cp = yy_c_buf_p;
      yy_bp = yytext + 0;
      goto yy_find_action;
      }
    }
    break;
    default: 
    yy_fatal_error("fatal flex scanner internal error--no action found");
    }
  }
  return (0);
}
}
static int yy_get_next_buffer(void) 
{ register char *dest ;
  register char *source ;
  register int number_to_move ;
  register int i ;
  int ret_val ;
  char *tmp ;
  char *tmp___0 ;
  int num_to_read ;
  int c ;
  int n ;
  int tmp___1 ;
  int tmp___2 ;
  int tmp___3 ;

  {
  dest = yy_current_buffer->yy_ch_buf;
  source = yytext;
  if ((unsigned int )yy_c_buf_p > (unsigned int )(yy_current_buffer->yy_ch_buf + (yy_n_chars +
                                                                                  1))) {
    yy_fatal_error("fatal flex scanner internal error--end of buffer missed");
  }
  if (yy_current_buffer->yy_fill_buffer == 0) {
    if ((yy_c_buf_p - yytext) - 0 == 1) {
      return (1);
    } else {
      return (2);
    }
  }
  number_to_move = (yy_c_buf_p - yytext) - 1;
  i = 0;
  while (i < number_to_move) {
    tmp = dest;
    dest ++;
    tmp___0 = source;
    source ++;
    (*tmp) = (*tmp___0);
    i ++;
  }
  if (yy_current_buffer->yy_buffer_status == 2) {
    yy_n_chars = 0;
    yy_current_buffer->yy_n_chars = yy_n_chars;
  } else {
    num_to_read = (int )((yy_current_buffer->yy_buf_size - (yy_size_t )number_to_move) -
                         1U);
    while (num_to_read <= 0) {
      yy_fatal_error("input buffer overflow, can\'t enlarge buffer because scanner uses REJECT");
    }
    if (num_to_read > 8192) {
      num_to_read = 8192;
    }
    if (yy_current_buffer->yy_is_interactive) {
      c = '*';
      n = 0;
      while (1) {
        if (n < num_to_read) {
          c = _IO_getc(yyin);
          if (c != -1) {
            if (! (c != 10)) {
              goto _L___0;
            }
          } else {
            goto _L___0;
          }
        } else {
          _L___0: /* CIL Label */ 
          break;
        }
        (*((yy_current_buffer->yy_ch_buf + number_to_move) + n)) = (char )c;
        n ++;
      }
      if (c == 10) {
        tmp___1 = n;
        n ++;
        (*((yy_current_buffer->yy_ch_buf + number_to_move) + tmp___1)) = (char )c;
      }
      if (c == -1) {
        tmp___2 = ferror(yyin);
        if (tmp___2) {
          yy_fatal_error("input in flex scanner failed");
        } else {
          goto _L___1;
        }
      } else {
        _L___1: /* CIL Label */ ;
      }
      yy_n_chars = n;
    } else {
      yy_n_chars = (int )fread((void * __restrict  )(yy_current_buffer->yy_ch_buf +
                                                     number_to_move), 1U, (unsigned int )num_to_read,
                               (FILE * __restrict  )yyin);
      if (yy_n_chars == 0) {
        tmp___3 = ferror(yyin);
        if (tmp___3) {
          yy_fatal_error("input in flex scanner failed");
        } else {
          goto _L___2;
        }
      } else {
        _L___2: /* CIL Label */ ;
      }
    }
    yy_current_buffer->yy_n_chars = yy_n_chars;
  }
  if (yy_n_chars == 0) {
    if (number_to_move == 0) {
      ret_val = 1;
      yyrestart(yyin);
    } else {
      ret_val = 2;
      yy_current_buffer->yy_buffer_status = 2;
    }
  } else {
    ret_val = 0;
  }
  yy_n_chars += number_to_move;
  (*(yy_current_buffer->yy_ch_buf + yy_n_chars)) = (char)0;
  (*(yy_current_buffer->yy_ch_buf + (yy_n_chars + 1))) = (char)0;
  yytext = yy_current_buffer->yy_ch_buf + 0;
  return (ret_val);
}
}
static yy_state_type yy_get_previous_state(void) 
{ register yy_state_type yy_current_state ;
  register char *yy_cp ;
  yy_state_type *tmp ;
  register YY_CHAR yy_c ;
  int tmp___0 ;
  yy_state_type *tmp___1 ;

  {
  yy_current_state = yy_start;
  yy_state_ptr = yy_state_buf;
  tmp = yy_state_ptr;
  yy_state_ptr ++;
  (*tmp) = yy_current_state;
  yy_cp = yytext + 0;
  while ((unsigned int )yy_cp < (unsigned int )yy_c_buf_p) {
    if ((*yy_cp)) {
      tmp___0 = yy_ec[(unsigned int )((unsigned char )(*yy_cp))];
    } else {
      tmp___0 = (int const   )1;
    }
    yy_c = (YY_CHAR )tmp___0;
    while ((int const   )yy_chk[(int const   )yy_base[yy_current_state] + (int const   )yy_c] !=
           (int const   )yy_current_state) {
      yy_current_state = (int )yy_def[yy_current_state];
      if (yy_current_state >= 179) {
        yy_c = (unsigned char )yy_meta[(unsigned int )yy_c];
      }
    }
    yy_current_state = (int )yy_nxt[(unsigned int )yy_base[yy_current_state] + (unsigned int )yy_c];
    tmp___1 = yy_state_ptr;
    yy_state_ptr ++;
    (*tmp___1) = yy_current_state;
    yy_cp ++;
  }
  return (yy_current_state);
}
}
static yy_state_type yy_try_NUL_trans(yy_state_type yy_current_state ) 
{ register int yy_is_jam ;
  register YY_CHAR yy_c ;
  yy_state_type *tmp ;
  int tmp___0 ;

  {
  yy_c = (YY_CHAR )1;
  while ((int const   )yy_chk[(int const   )yy_base[yy_current_state] + (int const   )yy_c] !=
         (int const   )yy_current_state) {
    yy_current_state = (int )yy_def[yy_current_state];
    if (yy_current_state >= 179) {
      yy_c = (unsigned char )yy_meta[(unsigned int )yy_c];
    }
  }
  yy_current_state = (int )yy_nxt[(unsigned int )yy_base[yy_current_state] + (unsigned int )yy_c];
  yy_is_jam = yy_current_state == 178;
  if (! yy_is_jam) {
    tmp = yy_state_ptr;
    yy_state_ptr ++;
    (*tmp) = yy_current_state;
  }
  if (yy_is_jam) {
    tmp___0 = 0;
  } else {
    tmp___0 = yy_current_state;
  }
  return (tmp___0);
}
}
void yyrestart(FILE *input_file ) 
{ 

  {
  if (! yy_current_buffer) {
    yy_current_buffer = yy_create_buffer(yyin, 16384);
  }
  yy_init_buffer(yy_current_buffer, input_file);
  yy_load_buffer_state();
  return;
}
}
void yy_switch_to_buffer(YY_BUFFER_STATE new_buffer ) 
{ 

  {
  if ((unsigned int )yy_current_buffer == (unsigned int )new_buffer) {
    return;
  }
  if (yy_current_buffer) {
    (*yy_c_buf_p) = yy_hold_char;
    yy_current_buffer->yy_buf_pos = yy_c_buf_p;
    yy_current_buffer->yy_n_chars = yy_n_chars;
  }
  yy_current_buffer = new_buffer;
  yy_load_buffer_state();
  yy_did_buffer_switch_on_eof = 1;
  return;
}
}
void yy_load_buffer_state(void) 
{ 

  {
  yy_n_chars = yy_current_buffer->yy_n_chars;
  yy_c_buf_p = yy_current_buffer->yy_buf_pos;
  yytext = yy_c_buf_p;
  yyin = yy_current_buffer->yy_input_file;
  yy_hold_char = (*yy_c_buf_p);
  return;
}
}
YY_BUFFER_STATE yy_create_buffer(FILE *file , int size ) 
{ YY_BUFFER_STATE b ;

  {
  b = (YY_BUFFER_STATE )yy_flex_alloc(sizeof(struct yy_buffer_state ));
  if (! b) {
    yy_fatal_error("out of dynamic memory in yy_create_buffer()");
  }
  b->yy_buf_size = (unsigned int )size;
  b->yy_ch_buf = (char *)yy_flex_alloc(b->yy_buf_size + 2U);
  if (! b->yy_ch_buf) {
    yy_fatal_error("out of dynamic memory in yy_create_buffer()");
  }
  b->yy_is_our_buffer = 1;
  yy_init_buffer(b, file);
  return (b);
}
}
void yy_delete_buffer(YY_BUFFER_STATE b ) 
{ 

  {
  if (! b) {
    return;
  }
  if ((unsigned int )b == (unsigned int )yy_current_buffer) {
    yy_current_buffer = (struct yy_buffer_state *)0;
  }
  if (b->yy_is_our_buffer) {
    yy_flex_free((void *)b->yy_ch_buf);
  }
  yy_flex_free((void *)b);
  return;
}
}
extern int isatty(int  ) ;
void yy_init_buffer(YY_BUFFER_STATE b , FILE *file ) 
{ int tmp___1 ;
  int tmp___2 ;

  {
  yy_flush_buffer(b);
  b->yy_input_file = file;
  b->yy_fill_buffer = 1;
  if (file) {
    tmp___1 = fileno(file);
    tmp___2 = isatty(tmp___1);
    b->yy_is_interactive = tmp___2 > 0;
  } else {
    b->yy_is_interactive = 0;
  }
  return;
}
}
void yy_flush_buffer(YY_BUFFER_STATE b ) 
{ 

  {
  if (! b) {
    return;
  }
  b->yy_n_chars = 0;
  (*(b->yy_ch_buf + 0)) = (char)0;
  (*(b->yy_ch_buf + 1)) = (char)0;
  b->yy_buf_pos = b->yy_ch_buf + 0;
  b->yy_at_bol = 1;
  b->yy_buffer_status = 0;
  if ((unsigned int )b == (unsigned int )yy_current_buffer) {
    yy_load_buffer_state();
  }
  return;
}
}
YY_BUFFER_STATE yy_scan_buffer(char *base , yy_size_t size ) 
{ YY_BUFFER_STATE b ;

  {
  if (size < 2U) {
    goto _L___0;
  } else {
    if ((int )(*(base + (size - 2U))) != 0) {
      _L___0: /* CIL Label */ 
      goto _L;
    } else {
      if ((int )(*(base + (size - 1U))) != 0) {
        _L: /* CIL Label */ 
        return ((struct yy_buffer_state *)0);
      }
    }
  }
  b = (YY_BUFFER_STATE )yy_flex_alloc(sizeof(struct yy_buffer_state ));
  if (! b) {
    yy_fatal_error("out of dynamic memory in yy_scan_buffer()");
  }
  b->yy_buf_size = size - 2U;
  b->yy_ch_buf = base;
  b->yy_buf_pos = b->yy_ch_buf;
  b->yy_is_our_buffer = 0;
  b->yy_input_file = (FILE *)0;
  b->yy_n_chars = (int )b->yy_buf_size;
  b->yy_is_interactive = 0;
  b->yy_at_bol = 1;
  b->yy_fill_buffer = 0;
  b->yy_buffer_status = 0;
  yy_switch_to_buffer(b);
  return (b);
}
}
YY_BUFFER_STATE yy_scan_string(char const   *yy_str ) 
{ int len ;
  YY_BUFFER_STATE tmp ;

  {
  len = 0;
  while ((*(yy_str + len))) {
    len ++;
  }
  tmp = yy_scan_bytes(yy_str, len);
  return (tmp);
}
}
YY_BUFFER_STATE yy_scan_bytes(char const   *bytes , int len ) 
{ YY_BUFFER_STATE b ;
  char *buf ;
  yy_size_t n ;
  int i ;

  {
  n = (unsigned int )(len + 2);
  buf = (char *)yy_flex_alloc(n);
  if (! buf) {
    yy_fatal_error("out of dynamic memory in yy_scan_bytes()");
  }
  i = 0;
  while (i < len) {
    (*(buf + i)) = (char )(*(bytes + i));
    i ++;
  }
  (*(buf + (len + 1))) = (char)0;
  (*(buf + len)) = (*(buf + (len + 1)));
  b = yy_scan_buffer(buf, n);
  if (! b) {
    yy_fatal_error("bad buffer in yy_scan_bytes()");
  }
  b->yy_is_our_buffer = 1;
  return (b);
}
}
static void yy_fatal_error(char const   *msg ) 
{ 

  {
  fprintf((FILE * __restrict  )stderr, (char const   * __restrict  )"%s\n", msg);
  exit(2);
}
}
static void *yy_flex_alloc(yy_size_t size ) 
{ void *tmp ;

  {
  tmp = malloc(size);
  return (tmp);
}
}
static void yy_flex_free(void *ptr ) 
{ 

  {
  free(ptr);
  return;
}
}
time_t l_convertyyyymmdd(char *date ) 
{ char year[5] ;
  char month[3] ;
  char day[3] ;
  void *__s ;
  void *__s___0 ;
  union __anonunion___u_20 *__u ;
  __uint8_t __c ;
  void *__s___1 ;
  int tmp ;
  void *__s___2 ;
  void *__s___3 ;
  union __anonunion___u_21___0 *__u___0 ;
  __uint8_t __c___0 ;
  void *__s___4 ;
  int tmp___0 ;
  void *__s___5 ;
  void *__s___6 ;
  union __anonunion___u_22___0 *__u___1 ;
  __uint8_t __c___1 ;
  void *__s___7 ;
  int tmp___1 ;
  size_t tmp___2 ;
  int tmp___3 ;
  size_t tmp___4 ;
  int tmp___5 ;
  size_t tmp___6 ;
  int tmp___7 ;
  int tmp___8 ;
  int tmp___9 ;
  int tmp___10 ;
  int tmp___11 ;
  int tmp___12 ;
  int tmp___13 ;
  time_t tmp___14 ;

  {
  tmp = __builtin_constant_p(sizeof(year));
  if (tmp) {
    if (sizeof(year) <= 16U) {
      if (sizeof(year) == 1U) {
        __s___1 = (void *)(year);
        (*((__uint8_t *)__s___1)) = (unsigned char)0;
      } else {
        __s___0 = (void *)(year);
        __u = (union __anonunion___u_20 *)__s___0;
        __c = (unsigned char)0;
        switch ((int )sizeof(year)) {
        case 15: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_20 *)((void *)__u + 4);
        case 11: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_20 *)((void *)__u + 4);
        case 7: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_20 *)((void *)__u + 4);
        case 3: 
        __u->__usi = (unsigned short )((int )((unsigned short )__c) * 257);
        __u = (union __anonunion___u_20 *)((void *)__u + 2);
        __u->__uc = __c;
        break;
        case 14: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_20 *)((void *)__u + 4);
        case 10: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_20 *)((void *)__u + 4);
        case 6: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_20 *)((void *)__u + 4);
        case 2: 
        __u->__usi = (unsigned short )((int )((unsigned short )__c) * 257);
        break;
        case 13: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_20 *)((void *)__u + 4);
        case 9: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_20 *)((void *)__u + 4);
        case 5: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_20 *)((void *)__u + 4);
        case 1: 
        __u->__uc = __c;
        break;
        case 16: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_20 *)((void *)__u + 4);
        case 12: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_20 *)((void *)__u + 4);
        case 8: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_20 *)((void *)__u + 4);
        case 4: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        case 0: ;
        break;
        }
      }
    } else {
      goto _L;
    }
  } else {
    _L: /* CIL Label */ 
    __s = (void *)(year);
    __builtin_memset(__s, '\000', (int )sizeof(year));
  }
  tmp___0 = __builtin_constant_p(sizeof(month));
  if (tmp___0) {
    if (sizeof(month) <= 16U) {
      if (sizeof(month) == 1U) {
        __s___4 = (void *)(month);
        (*((__uint8_t *)__s___4)) = (unsigned char)0;
      } else {
        __s___3 = (void *)(month);
        __u___0 = (union __anonunion___u_21___0 *)__s___3;
        __c___0 = (unsigned char)0;
        switch ((int )sizeof(month)) {
        case 15: 
        __u___0->__ui = (unsigned int )((int )__c___0 * 16843009);
        __u___0 = (union __anonunion___u_21___0 *)((void *)__u___0 + 4);
        case 11: 
        __u___0->__ui = (unsigned int )((int )__c___0 * 16843009);
        __u___0 = (union __anonunion___u_21___0 *)((void *)__u___0 + 4);
        case 7: 
        __u___0->__ui = (unsigned int )((int )__c___0 * 16843009);
        __u___0 = (union __anonunion___u_21___0 *)((void *)__u___0 + 4);
        case 3: 
        __u___0->__usi = (unsigned short )((int )((unsigned short )__c___0) * 257);
        __u___0 = (union __anonunion___u_21___0 *)((void *)__u___0 + 2);
        __u___0->__uc = __c___0;
        break;
        case 14: 
        __u___0->__ui = (unsigned int )((int )__c___0 * 16843009);
        __u___0 = (union __anonunion___u_21___0 *)((void *)__u___0 + 4);
        case 10: 
        __u___0->__ui = (unsigned int )((int )__c___0 * 16843009);
        __u___0 = (union __anonunion___u_21___0 *)((void *)__u___0 + 4);
        case 6: 
        __u___0->__ui = (unsigned int )((int )__c___0 * 16843009);
        __u___0 = (union __anonunion___u_21___0 *)((void *)__u___0 + 4);
        case 2: 
        __u___0->__usi = (unsigned short )((int )((unsigned short )__c___0) * 257);
        break;
        case 13: 
        __u___0->__ui = (unsigned int )((int )__c___0 * 16843009);
        __u___0 = (union __anonunion___u_21___0 *)((void *)__u___0 + 4);
        case 9: 
        __u___0->__ui = (unsigned int )((int )__c___0 * 16843009);
        __u___0 = (union __anonunion___u_21___0 *)((void *)__u___0 + 4);
        case 5: 
        __u___0->__ui = (unsigned int )((int )__c___0 * 16843009);
        __u___0 = (union __anonunion___u_21___0 *)((void *)__u___0 + 4);
        case 1: 
        __u___0->__uc = __c___0;
        break;
        case 16: 
        __u___0->__ui = (unsigned int )((int )__c___0 * 16843009);
        __u___0 = (union __anonunion___u_21___0 *)((void *)__u___0 + 4);
        case 12: 
        __u___0->__ui = (unsigned int )((int )__c___0 * 16843009);
        __u___0 = (union __anonunion___u_21___0 *)((void *)__u___0 + 4);
        case 8: 
        __u___0->__ui = (unsigned int )((int )__c___0 * 16843009);
        __u___0 = (union __anonunion___u_21___0 *)((void *)__u___0 + 4);
        case 4: 
        __u___0->__ui = (unsigned int )((int )__c___0 * 16843009);
        case 0: ;
        break;
        }
      }
    } else {
      goto _L___0;
    }
  } else {
    _L___0: /* CIL Label */ 
    __s___2 = (void *)(month);
    __builtin_memset(__s___2, '\000', (int )sizeof(month));
  }
  tmp___1 = __builtin_constant_p(sizeof(day));
  if (tmp___1) {
    if (sizeof(day) <= 16U) {
      if (sizeof(day) == 1U) {
        __s___7 = (void *)(day);
        (*((__uint8_t *)__s___7)) = (unsigned char)0;
      } else {
        __s___6 = (void *)(day);
        __u___1 = (union __anonunion___u_22___0 *)__s___6;
        __c___1 = (unsigned char)0;
        switch ((int )sizeof(day)) {
        case 15: 
        __u___1->__ui = (unsigned int )((int )__c___1 * 16843009);
        __u___1 = (union __anonunion___u_22___0 *)((void *)__u___1 + 4);
        case 11: 
        __u___1->__ui = (unsigned int )((int )__c___1 * 16843009);
        __u___1 = (union __anonunion___u_22___0 *)((void *)__u___1 + 4);
        case 7: 
        __u___1->__ui = (unsigned int )((int )__c___1 * 16843009);
        __u___1 = (union __anonunion___u_22___0 *)((void *)__u___1 + 4);
        case 3: 
        __u___1->__usi = (unsigned short )((int )((unsigned short )__c___1) * 257);
        __u___1 = (union __anonunion___u_22___0 *)((void *)__u___1 + 2);
        __u___1->__uc = __c___1;
        break;
        case 14: 
        __u___1->__ui = (unsigned int )((int )__c___1 * 16843009);
        __u___1 = (union __anonunion___u_22___0 *)((void *)__u___1 + 4);
        case 10: 
        __u___1->__ui = (unsigned int )((int )__c___1 * 16843009);
        __u___1 = (union __anonunion___u_22___0 *)((void *)__u___1 + 4);
        case 6: 
        __u___1->__ui = (unsigned int )((int )__c___1 * 16843009);
        __u___1 = (union __anonunion___u_22___0 *)((void *)__u___1 + 4);
        case 2: 
        __u___1->__usi = (unsigned short )((int )((unsigned short )__c___1) * 257);
        break;
        case 13: 
        __u___1->__ui = (unsigned int )((int )__c___1 * 16843009);
        __u___1 = (union __anonunion___u_22___0 *)((void *)__u___1 + 4);
        case 9: 
        __u___1->__ui = (unsigned int )((int )__c___1 * 16843009);
        __u___1 = (union __anonunion___u_22___0 *)((void *)__u___1 + 4);
        case 5: 
        __u___1->__ui = (unsigned int )((int )__c___1 * 16843009);
        __u___1 = (union __anonunion___u_22___0 *)((void *)__u___1 + 4);
        case 1: 
        __u___1->__uc = __c___1;
        break;
        case 16: 
        __u___1->__ui = (unsigned int )((int )__c___1 * 16843009);
        __u___1 = (union __anonunion___u_22___0 *)((void *)__u___1 + 4);
        case 12: 
        __u___1->__ui = (unsigned int )((int )__c___1 * 16843009);
        __u___1 = (union __anonunion___u_22___0 *)((void *)__u___1 + 4);
        case 8: 
        __u___1->__ui = (unsigned int )((int )__c___1 * 16843009);
        __u___1 = (union __anonunion___u_22___0 *)((void *)__u___1 + 4);
        case 4: 
        __u___1->__ui = (unsigned int )((int )__c___1 * 16843009);
        case 0: ;
        break;
        }
      }
    } else {
      goto _L___1;
    }
  } else {
    _L___1: /* CIL Label */ 
    __s___5 = (void *)(day);
    __builtin_memset(__s___5, '\000', (int )sizeof(day));
  }
  tmp___3 = __builtin_constant_p(date);
  if (tmp___3) {
    tmp___2 = strlen((char const   *)date);
    if (tmp___2 + 1U >= 4U) {
      memcpy((void * __restrict  )(year), (void const   * __restrict  )date, 4U);
    } else {
      strncpy((char * __restrict  )(year), (char const   * __restrict  )date, 4U);
    }
  } else {
    strncpy((char * __restrict  )(year), (char const   * __restrict  )date, 4U);
  }
  tmp___5 = __builtin_constant_p(date + 5);
  if (tmp___5) {
    tmp___4 = strlen((char const   *)(date + 5));
    if (tmp___4 + 1U >= 2U) {
      memcpy((void * __restrict  )(month), (void const   * __restrict  )(date + 5),
             2U);
    } else {
      strncpy((char * __restrict  )(month), (char const   * __restrict  )(date + 5),
              2U);
    }
  } else {
    strncpy((char * __restrict  )(month), (char const   * __restrict  )(date + 5),
            2U);
  }
  tmp___7 = __builtin_constant_p(date + 8);
  if (tmp___7) {
    tmp___6 = strlen((char const   *)(date + 8));
    if (tmp___6 + 1U >= 2U) {
      memcpy((void * __restrict  )(day), (void const   * __restrict  )(date + 8),
             2U);
    } else {
      strncpy((char * __restrict  )(day), (char const   * __restrict  )(date + 8),
              2U);
    }
  } else {
    strncpy((char * __restrict  )(day), (char const   * __restrict  )(date + 8), 2U);
  }
  tmp___8 = atoi__extinline((char const   *)(day));
  tmp___9 = atoi__extinline((char const   *)(month));
  tmp___10 = atoi__extinline((char const   *)(year));
  err_log(5, 128U, (char *)"Converting %d-%d-%d\n", tmp___10, tmp___9, tmp___8);
  tmp___11 = atoi__extinline((char const   *)(year));
  tmp___12 = atoi__extinline((char const   *)(month));
  tmp___13 = atoi__extinline((char const   *)(day));
  tmp___14 = l_converttime(tmp___13, tmp___12, tmp___11);
  return (tmp___14);
}
}
time_t l_converttime(int day , int month , int year ) 
{ struct tm tm ;
  void *__s ;
  void *__s___0 ;
  union __anonunion___u_23 *__u ;
  __uint8_t __c ;
  void *__s___1 ;
  int tmp ;
  time_t tmp___0 ;

  {
  tmp = __builtin_constant_p(sizeof(tm));
  if (tmp) {
    if (sizeof(tm) <= 16U) {
      if (sizeof(tm) == 1U) {
        __s___1 = (void *)(& tm);
        (*((__uint8_t *)__s___1)) = (unsigned char)0;
      } else {
        __s___0 = (void *)(& tm);
        __u = (union __anonunion___u_23 *)__s___0;
        __c = (unsigned char)0;
        switch ((int )sizeof(tm)) {
        case 15: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_23 *)((void *)__u + 4);
        case 11: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_23 *)((void *)__u + 4);
        case 7: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_23 *)((void *)__u + 4);
        case 3: 
        __u->__usi = (unsigned short )((int )((unsigned short )__c) * 257);
        __u = (union __anonunion___u_23 *)((void *)__u + 2);
        __u->__uc = __c;
        break;
        case 14: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_23 *)((void *)__u + 4);
        case 10: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_23 *)((void *)__u + 4);
        case 6: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_23 *)((void *)__u + 4);
        case 2: 
        __u->__usi = (unsigned short )((int )((unsigned short )__c) * 257);
        break;
        case 13: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_23 *)((void *)__u + 4);
        case 9: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_23 *)((void *)__u + 4);
        case 5: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_23 *)((void *)__u + 4);
        case 1: 
        __u->__uc = __c;
        break;
        case 16: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_23 *)((void *)__u + 4);
        case 12: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_23 *)((void *)__u + 4);
        case 8: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_23 *)((void *)__u + 4);
        case 4: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        case 0: ;
        break;
        }
      }
    } else {
      goto _L;
    }
  } else {
    _L: /* CIL Label */ 
    __s = (void *)(& tm);
    __builtin_memset(__s, '\000', (int )sizeof(tm));
  }
  tm.tm_year = year - 1900;
  tm.tm_mon = month - 1;
  tm.tm_mday = day;
  tmp___0 = mktime(& tm);
  return (tmp___0);
}
}
int yywrap(void) 
{ 

  {
  return (1);
}
}
void yyerror(char *msg ) 
{ 

  {
  pl_error = 1;
  err_log(1, 128U, (char *)"Playlist error, line %d: %s\n", yylineno, msg);
  return;
}
}
#pragma merger(0,"/tmp/cil-wKqvhLGO.i","-g -g -O2")
PL_NODE *pl_newcharpredicate(int tag , int op , char *value ) ;
PL_NODE *pl_newintpredicate(int tag , int op , int value ) ;
PL_NODE *pl_newdatepredicate(int tag , int op , int value ) ;
PL_NODE *pl_newexpr(PL_NODE *arg1 , int op , PL_NODE *arg2 ) ;
int pl_addplaylist(char *name , PL_NODE *root ) ;
int pl_number  =    2;
static unsigned char const   yytranslate[289]  = 
  {      (unsigned char const   )0,      (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2, 
        (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2, 
        (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2, 
        (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2, 
        (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2, 
        (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2, 
        (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2, 
        (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2, 
        (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2, 
        (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2, 
        (unsigned char const   )36,      (unsigned char const   )37,      (unsigned char const   )2,      (unsigned char const   )2, 
        (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2, 
        (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2, 
        (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2, 
        (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2, 
        (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2, 
        (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2, 
        (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2, 
        (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2, 
        (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2, 
        (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2, 
        (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2, 
        (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2, 
        (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2, 
        (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2, 
        (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2, 
        (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2, 
        (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2, 
        (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2, 
        (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2, 
        (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )34, 
        (unsigned char const   )2,      (unsigned char const   )35,      (unsigned char const   )2,      (unsigned char const   )2, 
        (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2, 
        (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2, 
        (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2, 
        (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2, 
        (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2, 
        (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2, 
        (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2, 
        (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2, 
        (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2, 
        (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2, 
        (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2, 
        (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2, 
        (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2, 
        (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2, 
        (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2, 
        (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2, 
        (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2, 
        (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2, 
        (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2, 
        (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2, 
        (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2, 
        (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2, 
        (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2, 
        (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2, 
        (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2, 
        (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2, 
        (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2, 
        (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2, 
        (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2, 
        (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2, 
        (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2, 
        (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2,      (unsigned char const   )2, 
        (unsigned char const   )1,      (unsigned char const   )2,      (unsigned char const   )3,      (unsigned char const   )4, 
        (unsigned char const   )5,      (unsigned char const   )6,      (unsigned char const   )7,      (unsigned char const   )8, 
        (unsigned char const   )9,      (unsigned char const   )10,      (unsigned char const   )11,      (unsigned char const   )12, 
        (unsigned char const   )13,      (unsigned char const   )14,      (unsigned char const   )15,      (unsigned char const   )16, 
        (unsigned char const   )17,      (unsigned char const   )18,      (unsigned char const   )19,      (unsigned char const   )20, 
        (unsigned char const   )21,      (unsigned char const   )22,      (unsigned char const   )23,      (unsigned char const   )24, 
        (unsigned char const   )25,      (unsigned char const   )26,      (unsigned char const   )27,      (unsigned char const   )28, 
        (unsigned char const   )29,      (unsigned char const   )30,      (unsigned char const   )31,      (unsigned char const   )32, 
        (unsigned char const   )33};
static char const   * const  yytname[52]  = 
  {      (char const   * const  )"$end",      (char const   * const  )"error",      (char const   * const  )"$undefined",      (char const   * const  )"AND", 
        (char const   * const  )"OR",      (char const   * const  )"ARTIST",      (char const   * const  )"ALBUM",      (char const   * const  )"GENRE", 
        (char const   * const  )"PATH",      (char const   * const  )"COMPOSER",      (char const   * const  )"ORCHESTRA",      (char const   * const  )"CONDUCTOR", 
        (char const   * const  )"GROUPING",      (char const   * const  )"TYPE",      (char const   * const  )"COMMENT",      (char const   * const  )"EQUALS", 
        (char const   * const  )"LESS",      (char const   * const  )"LESSEQUAL",      (char const   * const  )"GREATER",      (char const   * const  )"GREATEREQUAL", 
        (char const   * const  )"IS",      (char const   * const  )"INCLUDES",      (char const   * const  )"NOT",      (char const   * const  )"ID", 
        (char const   * const  )"NUM",      (char const   * const  )"DATE",      (char const   * const  )"YEAR",      (char const   * const  )"BPM", 
        (char const   * const  )"BITRATE",      (char const   * const  )"DATEADDED",      (char const   * const  )"BEFORE",      (char const   * const  )"AFTER", 
        (char const   * const  )"AGO",      (char const   * const  )"INTERVAL",      (char const   * const  )"\'{\'",      (char const   * const  )"\'}\'", 
        (char const   * const  )"\'(\'",      (char const   * const  )"\')\'",      (char const   * const  )"$accept",      (char const   * const  )"playlistlist", 
        (char const   * const  )"playlist",      (char const   * const  )"expression",      (char const   * const  )"predicate",      (char const   * const  )"datetag", 
        (char const   * const  )"inttag",      (char const   * const  )"intbool",      (char const   * const  )"datebool",      (char const   * const  )"interval", 
        (char const   * const  )"dateval",      (char const   * const  )"strtag",      (char const   * const  )"strbool",      (char const   * const  )0};
static unsigned char const   yyr1[44]  = 
  {      (unsigned char const   )0,      (unsigned char const   )38,      (unsigned char const   )39,      (unsigned char const   )39, 
        (unsigned char const   )40,      (unsigned char const   )41,      (unsigned char const   )41,      (unsigned char const   )41, 
        (unsigned char const   )41,      (unsigned char const   )42,      (unsigned char const   )42,      (unsigned char const   )42, 
        (unsigned char const   )43,      (unsigned char const   )44,      (unsigned char const   )44,      (unsigned char const   )44, 
        (unsigned char const   )45,      (unsigned char const   )45,      (unsigned char const   )45,      (unsigned char const   )45, 
        (unsigned char const   )45,      (unsigned char const   )45,      (unsigned char const   )46,      (unsigned char const   )46, 
        (unsigned char const   )46,      (unsigned char const   )47,      (unsigned char const   )47,      (unsigned char const   )48, 
        (unsigned char const   )48,      (unsigned char const   )48,      (unsigned char const   )48,      (unsigned char const   )49, 
        (unsigned char const   )49,      (unsigned char const   )49,      (unsigned char const   )49,      (unsigned char const   )49, 
        (unsigned char const   )49,      (unsigned char const   )49,      (unsigned char const   )49,      (unsigned char const   )49, 
        (unsigned char const   )49,      (unsigned char const   )50,      (unsigned char const   )50,      (unsigned char const   )50};
static unsigned char const   yyr2[44]  = 
  {      (unsigned char const   )0,      (unsigned char const   )2,      (unsigned char const   )1,      (unsigned char const   )2, 
        (unsigned char const   )4,      (unsigned char const   )3,      (unsigned char const   )3,      (unsigned char const   )3, 
        (unsigned char const   )1,      (unsigned char const   )3,      (unsigned char const   )3,      (unsigned char const   )3, 
        (unsigned char const   )1,      (unsigned char const   )1,      (unsigned char const   )1,      (unsigned char const   )1, 
        (unsigned char const   )1,      (unsigned char const   )1,      (unsigned char const   )1,      (unsigned char const   )1, 
        (unsigned char const   )1,      (unsigned char const   )2,      (unsigned char const   )1,      (unsigned char const   )1, 
        (unsigned char const   )2,      (unsigned char const   )1,      (unsigned char const   )2,      (unsigned char const   )1, 
        (unsigned char const   )3,      (unsigned char const   )3,      (unsigned char const   )2,      (unsigned char const   )1, 
        (unsigned char const   )1,      (unsigned char const   )1,      (unsigned char const   )1,      (unsigned char const   )1, 
        (unsigned char const   )1,      (unsigned char const   )1,      (unsigned char const   )1,      (unsigned char const   )1, 
        (unsigned char const   )1,      (unsigned char const   )1,      (unsigned char const   )1,      (unsigned char const   )2};
static unsigned char const   yydefact[65]  = 
  {      (unsigned char const   )0,      (unsigned char const   )0,      (unsigned char const   )0,      (unsigned char const   )2, 
        (unsigned char const   )0,      (unsigned char const   )1,      (unsigned char const   )3,      (unsigned char const   )31, 
        (unsigned char const   )32,      (unsigned char const   )33,      (unsigned char const   )34,      (unsigned char const   )35, 
        (unsigned char const   )36,      (unsigned char const   )37,      (unsigned char const   )38,      (unsigned char const   )39, 
        (unsigned char const   )40,      (unsigned char const   )13,      (unsigned char const   )14,      (unsigned char const   )15, 
        (unsigned char const   )12,      (unsigned char const   )0,      (unsigned char const   )0,      (unsigned char const   )8, 
        (unsigned char const   )0,      (unsigned char const   )0,      (unsigned char const   )0,      (unsigned char const   )0, 
        (unsigned char const   )0,      (unsigned char const   )0,      (unsigned char const   )4,      (unsigned char const   )0, 
        (unsigned char const   )22,      (unsigned char const   )23,      (unsigned char const   )0,      (unsigned char const   )16, 
        (unsigned char const   )17,      (unsigned char const   )18,      (unsigned char const   )19,      (unsigned char const   )20, 
        (unsigned char const   )0,      (unsigned char const   )0,      (unsigned char const   )41,      (unsigned char const   )42, 
        (unsigned char const   )0,      (unsigned char const   )0,      (unsigned char const   )7,      (unsigned char const   )5, 
        (unsigned char const   )6,      (unsigned char const   )24,      (unsigned char const   )0,      (unsigned char const   )27, 
        (unsigned char const   )25,      (unsigned char const   )0,      (unsigned char const   )11,      (unsigned char const   )21, 
        (unsigned char const   )10,      (unsigned char const   )43,      (unsigned char const   )9,      (unsigned char const   )26, 
        (unsigned char const   )0,      (unsigned char const   )0,      (unsigned char const   )30,      (unsigned char const   )28, 
        (unsigned char const   )29};
static yysigned_char const   yydefgoto[13]  = 
  {      (yysigned_char const   )-1,      (yysigned_char const   )2,      (yysigned_char const   )3,      (yysigned_char const   )22, 
        (yysigned_char const   )23,      (yysigned_char const   )24,      (yysigned_char const   )25,      (yysigned_char const   )41, 
        (yysigned_char const   )34,      (yysigned_char const   )53,      (yysigned_char const   )54,      (yysigned_char const   )26, 
        (yysigned_char const   )45};
static yysigned_char const   yypact[65]  = 
  {      (yysigned_char const   )-18,      (yysigned_char const   )-12,      (yysigned_char const   )2,      (yysigned_char const   )-29, 
        (yysigned_char const   )1,      (yysigned_char const   )-29,      (yysigned_char const   )-29,      (yysigned_char const   )-29, 
        (yysigned_char const   )-29,      (yysigned_char const   )-29,      (yysigned_char const   )-29,      (yysigned_char const   )-29, 
        (yysigned_char const   )-29,      (yysigned_char const   )-29,      (yysigned_char const   )-29,      (yysigned_char const   )-29, 
        (yysigned_char const   )-29,      (yysigned_char const   )-29,      (yysigned_char const   )-29,      (yysigned_char const   )-29, 
        (yysigned_char const   )-29,      (yysigned_char const   )1,      (yysigned_char const   )0,      (yysigned_char const   )-29, 
        (yysigned_char const   )9,      (yysigned_char const   )26,      (yysigned_char const   )-1,      (yysigned_char const   )-3, 
        (yysigned_char const   )1,      (yysigned_char const   )1,      (yysigned_char const   )-29,      (yysigned_char const   )9, 
        (yysigned_char const   )-29,      (yysigned_char const   )-29,      (yysigned_char const   )-7,      (yysigned_char const   )-29, 
        (yysigned_char const   )-29,      (yysigned_char const   )-29,      (yysigned_char const   )-29,      (yysigned_char const   )-29, 
        (yysigned_char const   )26,      (yysigned_char const   )12,      (yysigned_char const   )-29,      (yysigned_char const   )-29, 
        (yysigned_char const   )-1,      (yysigned_char const   )15,      (yysigned_char const   )-29,      (yysigned_char const   )-29, 
        (yysigned_char const   )-29,      (yysigned_char const   )-29,      (yysigned_char const   )13,      (yysigned_char const   )-29, 
        (yysigned_char const   )-29,      (yysigned_char const   )19,      (yysigned_char const   )-29,      (yysigned_char const   )-29, 
        (yysigned_char const   )-29,      (yysigned_char const   )-29,      (yysigned_char const   )-29,      (yysigned_char const   )-29, 
        (yysigned_char const   )-7,      (yysigned_char const   )-7,      (yysigned_char const   )-29,      (yysigned_char const   )-29, 
        (yysigned_char const   )-29};
static yysigned_char const   yypgoto[13]  = 
  {      (yysigned_char const   )-29,      (yysigned_char const   )-29,      (yysigned_char const   )45,      (yysigned_char const   )-5, 
        (yysigned_char const   )-29,      (yysigned_char const   )-29,      (yysigned_char const   )-29,      (yysigned_char const   )14, 
        (yysigned_char const   )21,      (yysigned_char const   )-29,      (yysigned_char const   )-28,      (yysigned_char const   )-29, 
        (yysigned_char const   )11};
static unsigned char const   yytable[56]  = 
  {      (unsigned char const   )28,      (unsigned char const   )29,      (unsigned char const   )5,      (unsigned char const   )28, 
        (unsigned char const   )29,      (unsigned char const   )1,      (unsigned char const   )7,      (unsigned char const   )8, 
        (unsigned char const   )9,      (unsigned char const   )10,      (unsigned char const   )11,      (unsigned char const   )12, 
        (unsigned char const   )13,      (unsigned char const   )14,      (unsigned char const   )15,      (unsigned char const   )16, 
        (unsigned char const   )27,      (unsigned char const   )50,      (unsigned char const   )51,      (unsigned char const   )42, 
        (unsigned char const   )43,      (unsigned char const   )44,      (unsigned char const   )4,      (unsigned char const   )47, 
        (unsigned char const   )48,      (unsigned char const   )1,      (unsigned char const   )52,      (unsigned char const   )17, 
        (unsigned char const   )18,      (unsigned char const   )19,      (unsigned char const   )20,      (unsigned char const   )31, 
        (unsigned char const   )63,      (unsigned char const   )64,      (unsigned char const   )46,      (unsigned char const   )30, 
        (unsigned char const   )56,      (unsigned char const   )21,      (unsigned char const   )58,      (unsigned char const   )32, 
        (unsigned char const   )33,      (unsigned char const   )35,      (unsigned char const   )36,      (unsigned char const   )37, 
        (unsigned char const   )38,      (unsigned char const   )39,      (unsigned char const   )59,      (unsigned char const   )6, 
        (unsigned char const   )40,      (unsigned char const   )60,      (unsigned char const   )61,      (unsigned char const   )62, 
        (unsigned char const   )49,      (unsigned char const   )0,      (unsigned char const   )55,      (unsigned char const   )57};
static yysigned_char const   yycheck[56]  = 
  {      (yysigned_char const   )3,      (yysigned_char const   )4,      (yysigned_char const   )0,      (yysigned_char const   )3, 
        (yysigned_char const   )4,      (yysigned_char const   )23,      (yysigned_char const   )5,      (yysigned_char const   )6, 
        (yysigned_char const   )7,      (yysigned_char const   )8,      (yysigned_char const   )9,      (yysigned_char const   )10, 
        (yysigned_char const   )11,      (yysigned_char const   )12,      (yysigned_char const   )13,      (yysigned_char const   )14, 
        (yysigned_char const   )21,      (yysigned_char const   )24,      (yysigned_char const   )25,      (yysigned_char const   )20, 
        (yysigned_char const   )21,      (yysigned_char const   )22,      (yysigned_char const   )34,      (yysigned_char const   )28, 
        (yysigned_char const   )29,      (yysigned_char const   )23,      (yysigned_char const   )33,      (yysigned_char const   )26, 
        (yysigned_char const   )27,      (yysigned_char const   )28,      (yysigned_char const   )29,      (yysigned_char const   )22, 
        (yysigned_char const   )60,      (yysigned_char const   )61,      (yysigned_char const   )37,      (yysigned_char const   )35, 
        (yysigned_char const   )24,      (yysigned_char const   )36,      (yysigned_char const   )23,      (yysigned_char const   )30, 
        (yysigned_char const   )31,      (yysigned_char const   )15,      (yysigned_char const   )16,      (yysigned_char const   )17, 
        (yysigned_char const   )18,      (yysigned_char const   )19,      (yysigned_char const   )33,      (yysigned_char const   )2, 
        (yysigned_char const   )22,      (yysigned_char const   )30,      (yysigned_char const   )31,      (yysigned_char const   )32, 
        (yysigned_char const   )31,      (yysigned_char const   )-1,      (yysigned_char const   )40,      (yysigned_char const   )44};
static unsigned char const   yystos[65]  = 
  {      (unsigned char const   )0,      (unsigned char const   )23,      (unsigned char const   )39,      (unsigned char const   )40, 
        (unsigned char const   )34,      (unsigned char const   )0,      (unsigned char const   )40,      (unsigned char const   )5, 
        (unsigned char const   )6,      (unsigned char const   )7,      (unsigned char const   )8,      (unsigned char const   )9, 
        (unsigned char const   )10,      (unsigned char const   )11,      (unsigned char const   )12,      (unsigned char const   )13, 
        (unsigned char const   )14,      (unsigned char const   )26,      (unsigned char const   )27,      (unsigned char const   )28, 
        (unsigned char const   )29,      (unsigned char const   )36,      (unsigned char const   )41,      (unsigned char const   )42, 
        (unsigned char const   )43,      (unsigned char const   )44,      (unsigned char const   )49,      (unsigned char const   )41, 
        (unsigned char const   )3,      (unsigned char const   )4,      (unsigned char const   )35,      (unsigned char const   )22, 
        (unsigned char const   )30,      (unsigned char const   )31,      (unsigned char const   )46,      (unsigned char const   )15, 
        (unsigned char const   )16,      (unsigned char const   )17,      (unsigned char const   )18,      (unsigned char const   )19, 
        (unsigned char const   )22,      (unsigned char const   )45,      (unsigned char const   )20,      (unsigned char const   )21, 
        (unsigned char const   )22,      (unsigned char const   )50,      (unsigned char const   )37,      (unsigned char const   )41, 
        (unsigned char const   )41,      (unsigned char const   )46,      (unsigned char const   )24,      (unsigned char const   )25, 
        (unsigned char const   )33,      (unsigned char const   )47,      (unsigned char const   )48,      (unsigned char const   )45, 
        (unsigned char const   )24,      (unsigned char const   )50,      (unsigned char const   )23,      (unsigned char const   )33, 
        (unsigned char const   )30,      (unsigned char const   )31,      (unsigned char const   )32,      (unsigned char const   )48, 
        (unsigned char const   )48};
static char *yystpcpy(char *yydest , char const   *yysrc ) 
{ register char *yyd ;
  register char const   *yys ;
  char *tmp ;
  char const   *tmp___0 ;

  {
  yyd = yydest;
  yys = yysrc;
  while (1) {
    tmp = yyd;
    yyd ++;
    tmp___0 = yys;
    yys ++;
    (*tmp) = (char )(*tmp___0);
    if (! ((int )(*tmp) != 0)) {
      break;
    }
    continue;
  }
  return (yyd - 1);
}
}
static void yydestruct(int yytype , YYSTYPE *yyvaluep ) 
{ 

  {
  switch (yytype) {
  default: ;
  break;
  }
}
}
int yychar  ;
YYSTYPE yylval  ;
int yynerrs  ;
int yyparse(void) 
{ register int yystate ;
  register int yyn ;
  int yyresult ;
  int yyerrstatus ;
  int yytoken ;
  short yyssa[200] ;
  short *yyss ;
  register short *yyssp ;
  YYSTYPE yyvsa[200] ;
  YYSTYPE *yyvs ;
  register YYSTYPE *yyvsp ;
  unsigned int yystacksize ;
  YYSTYPE yyval ;
  int yylen ;
  unsigned int yysize ;
  short *yyss1 ;
  union yyalloc *yyptr ;
  union yyalloc *tmp ;
  unsigned int yynewbytes ;
  unsigned int yynewbytes___0 ;
  int tmp___0 ;
  unsigned int yysize___0 ;
  int yytype ;
  int tmp___1 ;
  char const   *yyprefix ;
  char *yymsg ;
  int yyx ;
  int yyxbegin ;
  int tmp___2 ;
  int yychecklim ;
  int yyxend ;
  int tmp___3 ;
  int yycount ;
  size_t tmp___4 ;
  size_t tmp___5 ;
  size_t tmp___6 ;
  char *yyp ;
  char *tmp___8 ;

  {
  yytoken = 0;
  yyss = yyssa;
  yyvs = yyvsa;
  yystacksize = 200U;
  yystate = 0;
  yyerrstatus = 0;
  yynerrs = 0;
  yychar = -2;
  yyssp = yyss;
  yyvsp = yyvs;
  goto yysetstate;
  yynewstate: 
  yyssp ++;
  yysetstate: 
  (*yyssp) = (short )yystate;
  if ((unsigned int )((yyss + yystacksize) - 1) <= (unsigned int )yyssp) {
    yysize = (unsigned int )((yyssp - yyss) + 1);
    if (10000U <= yystacksize) {
      goto yyoverflowlab;
    }
    yystacksize *= 2U;
    if (10000U < yystacksize) {
      yystacksize = 10000U;
    }
    yyss1 = yyss;
    tmp = (union yyalloc *)__builtin_alloca(yystacksize * (sizeof(short ) + sizeof(YYSTYPE )) +
                                            (sizeof(union yyalloc ) - 1U));
    yyptr = tmp;
    if (! yyptr) {
      goto yyoverflowlab;
    }
    while (1) {
      __builtin_memcpy((void *)(& yyptr->yyss), (void const   *)yyss, yysize * sizeof((*yyss)));
      yyss = & yyptr->yyss;
      yynewbytes = yystacksize * sizeof((*yyss)) + (sizeof(union yyalloc ) - 1U);
      yyptr += yynewbytes / sizeof((*yyptr));
      break;
    }
    while (1) {
      __builtin_memcpy((void *)(& yyptr->yyvs), (void const   *)yyvs, yysize * sizeof((*yyvs)));
      yyvs = & yyptr->yyvs;
      yynewbytes___0 = yystacksize * sizeof((*yyvs)) + (sizeof(union yyalloc ) - 1U);
      yyptr += yynewbytes___0 / sizeof((*yyptr));
      break;
    }
    if ((unsigned int )yyss1 != (unsigned int )(yyssa)) {
      while (1) {
        break;
      }
    }
    yyssp = (yyss + yysize) - 1;
    yyvsp = (yyvs + yysize) - 1;
    if ((unsigned int )((yyss + yystacksize) - 1) <= (unsigned int )yyssp) {
      goto yyabortlab;
    }
  }
  goto yybackup;
  yybackup: 
  yyn = (int )yypact[yystate];
  if (yyn == -29) {
    goto yydefault;
  }
  if (yychar == -2) {
    yychar = yylex();
  }
  if (yychar <= 0) {
    yytoken = 0;
    yychar = yytoken;
  } else {
    if ((unsigned int )yychar <= 288U) {
      yytoken = (int )yytranslate[yychar];
    } else {
      yytoken = 2;
    }
  }
  yyn += yytoken;
  if (yyn < 0) {
    goto _L___0;
  } else {
    if (55 < yyn) {
      _L___0: /* CIL Label */ 
      goto _L;
    } else {
      if ((int const   )yycheck[yyn] != (int const   )yytoken) {
        _L: /* CIL Label */ 
        goto yydefault;
      }
    }
  }
  yyn = (int )yytable[yyn];
  if (yyn <= 0) {
    if (yyn == 0) {
      goto _L___1;
    } else {
      if (yyn == -1) {
        _L___1: /* CIL Label */ 
        goto yyerrlab;
      }
    }
    yyn = - yyn;
    goto yyreduce;
  }
  if (yyn == 5) {
    goto yyacceptlab;
  }
  if (yychar != 0) {
    yychar = -2;
  }
  yyvsp ++;
  (*yyvsp) = yylval;
  if (yyerrstatus) {
    yyerrstatus --;
  }
  yystate = yyn;
  goto yynewstate;
  yydefault: 
  yyn = (int )yydefact[yystate];
  if (yyn == 0) {
    goto yyerrlab;
  }
  goto yyreduce;
  yyreduce: 
  yylen = (int )yyr2[yyn];
  yyval = (*(yyvsp + (1 - yylen)));
  switch (yyn) {
  case 2: ;
  break;
  case 3: ;
  break;
  case 4: 
  yyval.ival = (unsigned int )pl_addplaylist((yyvsp + -3)->cval, (yyvsp + -1)->plval);
  break;
  case 5: 
  yyval.plval = pl_newexpr((yyvsp + -2)->plval, (int )(yyvsp + -1)->ival, (yyvsp +
                                                                           0)->plval);
  break;
  case 6: 
  yyval.plval = pl_newexpr((yyvsp + -2)->plval, (int )(yyvsp + -1)->ival, (yyvsp +
                                                                           0)->plval);
  break;
  case 7: 
  yyval.plval = (yyvsp + -1)->plval;
  break;
  case 9: 
  yyval.plval = pl_newcharpredicate((int )(yyvsp + -2)->ival, (int )(yyvsp + -1)->ival,
                                    (yyvsp + 0)->cval);
  break;
  case 10: 
  yyval.plval = pl_newintpredicate((int )(yyvsp + -2)->ival, (int )(yyvsp + -1)->ival,
                                   (int )(yyvsp + 0)->ival);
  break;
  case 11: 
  yyval.plval = pl_newdatepredicate((int )(yyvsp + -2)->ival, (int )(yyvsp + -1)->ival,
                                    (int )(yyvsp + 0)->ival);
  break;
  case 12: 
  yyval.ival = (yyvsp + 0)->ival;
  break;
  case 16: 
  yyval.ival = (yyvsp + 0)->ival;
  break;
  case 17: 
  yyval.ival = (yyvsp + 0)->ival;
  break;
  case 18: 
  yyval.ival = (yyvsp + 0)->ival;
  break;
  case 19: 
  yyval.ival = (yyvsp + 0)->ival;
  break;
  case 20: 
  yyval.ival = (yyvsp + 0)->ival;
  break;
  case 21: 
  yyval.ival = (yyvsp + 0)->ival | 2147483648U;
  break;
  case 22: 
  yyval.ival = (yyvsp + 0)->ival;
  break;
  case 23: 
  yyval.ival = (yyvsp + 0)->ival;
  break;
  case 24: 
  yyval.ival = (yyvsp + 0)->ival | 2147483648U;
  break;
  case 25: 
  yyval.ival = (yyvsp + 0)->ival;
  break;
  case 26: 
  yyval.ival = (yyvsp + -1)->ival * (yyvsp + 0)->ival;
  break;
  case 27: 
  yyval.ival = (yyvsp + 0)->ival;
  break;
  case 28: 
  yyval.ival = (yyvsp + 0)->ival - (yyvsp + -2)->ival;
  break;
  case 29: 
  yyval.ival = (yyvsp + 0)->ival + (yyvsp + -2)->ival;
  break;
  case 30: 
  tmp___0 = (int )time((void *)0);
  yyval.ival = (unsigned int )tmp___0 - (yyvsp + -1)->ival;
  break;
  case 41: 
  yyval.ival = (yyvsp + 0)->ival;
  break;
  case 42: 
  yyval.ival = (yyvsp + 0)->ival;
  break;
  case 43: 
  yyval.ival = (yyvsp + 0)->ival | 2147483648U;
  break;
  }
  yyvsp -= yylen;
  yyssp -= yylen;
  yyvsp ++;
  (*yyvsp) = yyval;
  yyn = (int )yyr1[yyn];
  yystate = (int )((int const   )yypgoto[yyn - 38] + (int const   )(*yyssp));
  if (0 <= yystate) {
    if (yystate <= 55) {
      if ((int const   )yycheck[yystate] == (int const   )(*yyssp)) {
        yystate = (int )yytable[yystate];
      } else {
        goto _L___3;
      }
    } else {
      goto _L___3;
    }
  } else {
    _L___3: /* CIL Label */ 
    yystate = (int )yydefgoto[yyn - 38];
  }
  goto yynewstate;
  yyerrlab: 
  if (! yyerrstatus) {
    yynerrs ++;
    yyn = (int )yypact[yystate];
    if (-29 < yyn) {
      if (yyn < 55) {
        yysize___0 = 0U;
        if ((unsigned int )yychar <= 288U) {
          tmp___1 = (int const   )yytranslate[yychar];
        } else {
          tmp___1 = (int const   )2;
        }
        yytype = (int )tmp___1;
        if (yyn < 0) {
          tmp___2 = - yyn;
        } else {
          tmp___2 = 0;
        }
        yyxbegin = tmp___2;
        yychecklim = 55 - yyn;
        if (yychecklim < 38) {
          tmp___3 = yychecklim;
        } else {
          tmp___3 = 38;
        }
        yyxend = tmp___3;
        yycount = 0;
        yyprefix = ", expecting ";
        yyx = yyxbegin;
        while (yyx < yyxend) {
          if ((int const   )yycheck[yyx + yyn] == (int const   )yyx) {
            if (yyx != 1) {
              tmp___4 = strlen(yyprefix);
              tmp___5 = strlen((char const   *)yytname[yyx]);
              yysize___0 += tmp___4 + tmp___5;
              yycount ++;
              if (yycount == 5) {
                yysize___0 = 0U;
                break;
              }
            } else {
              goto _L___4;
            }
          } else {
            _L___4: /* CIL Label */ ;
          }
          yyx ++;
        }
        tmp___6 = strlen((char const   *)yytname[yytype]);
        yysize___0 += sizeof("syntax error, unexpected ") + tmp___6;
        yymsg = (char *)__builtin_alloca(yysize___0);
        if ((unsigned int )yymsg != (unsigned int )((char *)0)) {
          tmp___8 = yystpcpy(yymsg, "syntax error, unexpected ");
          yyp = tmp___8;
          yyp = yystpcpy(yyp, (char const   *)yytname[yytype]);
          if (yycount < 5) {
            yyprefix = ", expecting ";
            yyx = yyxbegin;
            while (yyx < yyxend) {
              if ((int const   )yycheck[yyx + yyn] == (int const   )yyx) {
                if (yyx != 1) {
                  yyp = yystpcpy(yyp, yyprefix);
                  yyp = yystpcpy(yyp, (char const   *)yytname[yyx]);
                  yyprefix = " or ";
                } else {
                  goto _L___5;
                }
              } else {
                _L___5: /* CIL Label */ ;
              }
              yyx ++;
            }
          }
          yyerror(yymsg);
          while (1) {
            break;
          }
        } else {
          yyerror((char *)"syntax error; also virtual memory exhausted");
        }
      } else {
        goto _L___6;
      }
    } else {
      _L___6: /* CIL Label */ 
      yyerror((char *)"syntax error");
    }
  }
  if (yyerrstatus == 3) {
    if (yychar <= 0) {
      if (yychar == 0) {
        while (1) {
          yyvsp --;
          yyssp --;
          if ((unsigned int )yyssp == (unsigned int )yyss) {
            goto yyabortlab;
          }
          yydestruct((int )yystos[(*yyssp)], yyvsp);
        }
      }
    } else {
      yydestruct(yytoken, & yylval);
      yychar = -2;
    }
  }
  goto yyerrlab1;
  yyvsp -= yylen;
  yyssp -= yylen;
  yystate = (int )(*yyssp);
  goto yyerrlab1;
  yyerrlab1: 
  yyerrstatus = 3;
  while (1) {
    yyn = (int )yypact[yystate];
    if (yyn != -29) {
      yyn ++;
      if (0 <= yyn) {
        if (yyn <= 55) {
          if ((int const   )yycheck[yyn] == 1) {
            yyn = (int )yytable[yyn];
            if (0 < yyn) {
              break;
            }
          } else {
            goto _L___8;
          }
        } else {
          goto _L___8;
        }
      } else {
        _L___8: /* CIL Label */ ;
      }
    }
    if ((unsigned int )yyssp == (unsigned int )yyss) {
      goto yyabortlab;
    }
    yydestruct((int )yystos[yystate], yyvsp);
    yyvsp --;
    yyssp --;
    yystate = (int )(*yyssp);
  }
  if (yyn == 5) {
    goto yyacceptlab;
  }
  yyvsp ++;
  (*yyvsp) = yylval;
  yystate = yyn;
  goto yynewstate;
  yyacceptlab: 
  yyresult = 0;
  goto yyreturn;
  yyabortlab: 
  yyresult = 1;
  goto yyreturn;
  yyoverflowlab: 
  yyerror((char *)"parser stack overflow");
  yyresult = 2;
  yyreturn: 
  if ((unsigned int )yyss != (unsigned int )(yyssa)) {
    while (1) {
      break;
    }
  }
  return (yyresult);
}
}
PL_NODE *pl_newintpredicate(int tag , int op , int value ) 
{ PL_NODE *pnew ;

  {
  pnew = (PL_NODE *)malloc(sizeof(PL_NODE ));
  if (! pnew) {
    return ((PL_NODE *)((void *)0));
  }
  pnew->op = op;
  pnew->type = 0;
  pnew->arg1.ival = tag;
  pnew->arg2.ival = value;
  return (pnew);
}
}
PL_NODE *pl_newdatepredicate(int tag , int op , int value ) 
{ PL_NODE *pnew ;

  {
  pnew = (PL_NODE *)malloc(sizeof(PL_NODE ));
  if (! pnew) {
    return ((PL_NODE *)((void *)0));
  }
  pnew->op = op;
  pnew->type = 2;
  pnew->arg1.ival = tag;
  pnew->arg2.ival = value;
  return (pnew);
}
}
PL_NODE *pl_newcharpredicate(int tag , int op , char *value ) 
{ PL_NODE *pnew ;

  {
  pnew = (PL_NODE *)malloc(sizeof(PL_NODE ));
  if (! pnew) {
    return ((PL_NODE *)((void *)0));
  }
  pnew->op = op;
  pnew->type = 1;
  pnew->arg1.ival = tag;
  pnew->arg2.cval = value;
  return (pnew);
}
}
PL_NODE *pl_newexpr(PL_NODE *arg1 , int op , PL_NODE *arg2 ) 
{ PL_NODE *pnew ;

  {
  pnew = (PL_NODE *)malloc(sizeof(PL_NODE ));
  if (! pnew) {
    return ((PL_NODE *)((void *)0));
  }
  pnew->op = op;
  pnew->arg1.plval = arg1;
  pnew->arg2.plval = arg2;
  return (pnew);
}
}
int pl_addplaylist(char *name , PL_NODE *root ) 
{ SMART_PLAYLIST *pnew ;
  int tmp___0 ;

  {
  pnew = (SMART_PLAYLIST *)malloc(sizeof(SMART_PLAYLIST ));
  if (! pnew) {
    return (-1);
  }
  pnew->next = pl_smart.next;
  pnew->name = name;
  pnew->root = root;
  tmp___0 = pl_number;
  pl_number ++;
  pnew->id = (unsigned int )tmp___0;
  pl_smart.next = pnew;
  return (0);
}
}
#pragma merger(0,"/tmp/cil-XkPsL3Bp.i","-g -g -O2")
#pragma merger(0,"/tmp/cil-VsGUOhYE.i","-g -g -O2")
#pragma merger(0,"/tmp/cil-eX8wGDj6.i","-g -g -O2")
static char rcsid[55]  = 
  {      (char )'$',      (char )'I',      (char )'d',      (char )':', 
        (char )' ',      (char )'r',      (char )'e',      (char )'d', 
        (char )'b',      (char )'l',      (char )'a',      (char )'c', 
        (char )'k',      (char )'.',      (char )'c',      (char )',', 
        (char )'v',      (char )' ',      (char )'1',      (char )'.', 
        (char )'1',      (char )' ',      (char )'2',      (char )'0', 
        (char )'0',      (char )'4',      (char )'/',      (char )'0', 
        (char )'3',      (char )'/',      (char )'1',      (char )'3', 
        (char )' ',      (char )'2',      (char )'3',      (char )':', 
        (char )'4',      (char )'3',      (char )':',      (char )'0', 
        (char )'2',      (char )' ',      (char )'r',      (char )'p', 
        (char )'e',      (char )'d',      (char )'d',      (char )'e', 
        (char )' ',      (char )'E',      (char )'x',      (char )'p', 
        (char )' ',      (char )'$',      (char )'\000'};
void const   *rbfind(void const   *key , struct rbtree *rbinfo ) ;
void rbwalk(struct rbtree  const  *rbinfo , void (*action)(void const   * , VISIT  ,
                                                           int  , void * ) , void *arg ) ;
struct rblists *rbopenlist(struct rbtree  const  *rbinfo ) ;
void const   *rbreadlist(struct rblists *rblistp ) ;
void rbcloselist(struct rblists *rblistp ) ;
struct rbnode rb_null  =    {& rb_null, & rb_null, & rb_null, 0, (void const   *)0};
static struct rbnode *rb_alloc(void) 
{ struct rbnode *tmp ;

  {
  tmp = (struct rbnode *)malloc(sizeof(struct rbnode ));
  return (tmp);
}
}
static void rb_free(struct rbnode *x ) 
{ 

  {
  free((void *)x);
  return;
}
}
static void rb_left_rotate(struct rbnode **rootp , struct rbnode *x ) ;
static void rb_right_rotate(struct rbnode **rootp , struct rbnode *y ) ;
static struct rbnode *rb_successor(struct rbnode  const  *x ) ;
static struct rbnode *rb_predecessor(struct rbnode  const  *x ) ;
static struct rbnode *rb_traverse(int insert , void const   *key , struct rbtree *rbinfo ) ;
static struct rbnode *rb_lookup(int mode , void const   *key , struct rbtree *rbinfo ) ;
static void rb_destroy(struct rbnode *x ) ;
static void rb_delete(struct rbnode **rootp , struct rbnode *z ) ;
static void rb_delete_fix(struct rbnode **rootp , struct rbnode *x ) ;
static void rb_walk(struct rbnode  const  *x , void (*action)(void const   * , VISIT  ,
                                                              int  , void * ) , void *arg ,
                    int level ) ;
static struct rblists *rb_openlist(struct rbnode  const  *rootp ) ;
static void const   *rb_readlist(struct rblists *rblistp ) ;
static void rb_closelist(struct rblists *rblistp ) ;
struct rbtree *rbinit(int (*cmp)(void const   * , void const   * , void const   * ) ,
                      void const   *config___0 ) 
{ struct rbtree *retval ;
  char c ;

  {
  c = rcsid[0];
  retval = (struct rbtree *)malloc(sizeof(struct rbtree ));
  if ((unsigned int )retval == (unsigned int )((void *)0)) {
    return ((struct rbtree *)((void *)0));
  }
  retval->rb_cmp = cmp;
  retval->rb_config = config___0;
  retval->rb_root = & rb_null;
  return (retval);
}
}
void rbdestroy(struct rbtree *rbinfo ) 
{ 

  {
  if ((unsigned int )rbinfo == (unsigned int )((void *)0)) {
    return;
  }
  if ((unsigned int )rbinfo->rb_root != (unsigned int )(& rb_null)) {
    rb_destroy(rbinfo->rb_root);
  }
  free((void *)rbinfo);
  return;
}
}
void const   *rbsearch(void const   *key , struct rbtree *rbinfo ) 
{ struct rbnode *x ;
  void *tmp ;

  {
  if ((unsigned int )rbinfo == (unsigned int )((void *)0)) {
    return ((void const   *)((void *)0));
  }
  x = rb_traverse(1, key, rbinfo);
  if ((unsigned int )x == (unsigned int )(& rb_null)) {
    tmp = (void *)0;
  } else {
    tmp = (void *)x->key;
  }
  return ((void const   *)tmp);
}
}
void const   *rbfind(void const   *key , struct rbtree *rbinfo ) 
{ struct rbnode *x ;
  void *tmp ;

  {
  if ((unsigned int )rbinfo == (unsigned int )((void *)0)) {
    return ((void const   *)((void *)0));
  }
  if ((unsigned int )rbinfo->rb_root == (unsigned int )(& rb_null)) {
    return ((void const   *)((void *)0));
  }
  x = rb_traverse(0, key, rbinfo);
  if ((unsigned int )x == (unsigned int )(& rb_null)) {
    tmp = (void *)0;
  } else {
    tmp = (void *)x->key;
  }
  return ((void const   *)tmp);
}
}
void const   *rbdelete(void const   *key , struct rbtree *rbinfo ) 
{ struct rbnode *x ;
  void const   *y ;

  {
  if ((unsigned int )rbinfo == (unsigned int )((void *)0)) {
    return ((void const   *)((void *)0));
  }
  x = rb_traverse(0, key, rbinfo);
  if ((unsigned int )x == (unsigned int )(& rb_null)) {
    return ((void const   *)((void *)0));
  } else {
    y = x->key;
    rb_delete(& rbinfo->rb_root, x);
    return (y);
  }
}
}
void rbwalk(struct rbtree  const  *rbinfo , void (*action)(void const   * , VISIT  ,
                                                           int  , void * ) , void *arg ) 
{ 

  {
  if ((unsigned int )rbinfo == (unsigned int )((void *)0)) {
    return;
  }
  rb_walk((struct rbnode  const  *)rbinfo->rb_root, action, arg, 0);
  return;
}
}
struct rblists *rbopenlist(struct rbtree  const  *rbinfo ) 
{ struct rblists *tmp ;

  {
  if ((unsigned int )rbinfo == (unsigned int )((void *)0)) {
    return ((struct rblists *)((void *)0));
  }
  tmp = rb_openlist((struct rbnode  const  *)rbinfo->rb_root);
  return (tmp);
}
}
void const   *rbreadlist(struct rblists *rblistp ) 
{ void const   *tmp ;

  {
  if ((unsigned int )rblistp == (unsigned int )((void *)0)) {
    return ((void const   *)((void *)0));
  }
  tmp = rb_readlist(rblistp);
  return (tmp);
}
}
void rbcloselist(struct rblists *rblistp ) 
{ 

  {
  if ((unsigned int )rblistp == (unsigned int )((void *)0)) {
    return;
  }
  rb_closelist(rblistp);
  return;
}
}
void const   *rblookup(int mode , void const   *key , struct rbtree *rbinfo ) 
{ struct rbnode *x ;
  void *tmp ;

  {
  if ((unsigned int )rbinfo == (unsigned int )((void *)0)) {
    goto _L;
  } else {
    if ((unsigned int )rbinfo->rb_root == (unsigned int )((void *)0)) {
      _L: /* CIL Label */ 
      return ((void const   *)((void *)0));
    }
  }
  x = rb_lookup(mode, key, rbinfo);
  if ((unsigned int )x == (unsigned int )(& rb_null)) {
    tmp = (void *)0;
  } else {
    tmp = (void *)x->key;
  }
  return ((void const   *)tmp);
}
}
static struct rbnode *rb_traverse(int insert , void const   *key , struct rbtree *rbinfo ) 
{ struct rbnode *x ;
  struct rbnode *y ;
  struct rbnode *z ;
  int cmp ;
  int found ;

  {
  found = 0;
  y = & rb_null;
  x = rbinfo->rb_root;
  while (1) {
    if ((unsigned int )x != (unsigned int )(& rb_null)) {
      if (! (found == 0)) {
        goto _L;
      }
    } else {
      _L: /* CIL Label */ 
      break;
    }
    y = x;
    cmp = ((*(rbinfo->rb_cmp)))(key, x->key, rbinfo->rb_config);
    if (cmp < 0) {
      x = x->left;
    } else {
      if (cmp > 0) {
        x = x->right;
      } else {
        found = 1;
      }
    }
  }
  if (found) {
    goto _L___0;
  } else {
    if (! insert) {
      _L___0: /* CIL Label */ 
      return (x);
    }
  }
  z = rb_alloc();
  if ((unsigned int )z == (unsigned int )((void *)0)) {
    return (& rb_null);
  }
  z->key = key;
  z->up = y;
  if ((unsigned int )y == (unsigned int )(& rb_null)) {
    rbinfo->rb_root = z;
  } else {
    cmp = ((*(rbinfo->rb_cmp)))(z->key, y->key, rbinfo->rb_config);
    if (cmp < 0) {
      y->left = z;
    } else {
      y->right = z;
    }
  }
  z->left = & rb_null;
  z->right = & rb_null;
  z->colour = 1;
  x = z;
  while (1) {
    if ((unsigned int )x != (unsigned int )rbinfo->rb_root) {
      if (! ((int )(x->up)->colour == 1)) {
        goto _L___1;
      }
    } else {
      _L___1: /* CIL Label */ 
      break;
    }
    if ((unsigned int )x->up == (unsigned int )((x->up)->up)->left) {
      y = ((x->up)->up)->right;
      if ((int )y->colour == 1) {
        (x->up)->colour = 0;
        y->colour = 0;
        ((x->up)->up)->colour = 1;
        x = (x->up)->up;
      } else {
        if ((unsigned int )x == (unsigned int )(x->up)->right) {
          x = x->up;
          rb_left_rotate(& rbinfo->rb_root, x);
        }
        (x->up)->colour = 0;
        ((x->up)->up)->colour = 1;
        rb_right_rotate(& rbinfo->rb_root, (x->up)->up);
      }
    } else {
      y = ((x->up)->up)->left;
      if ((int )y->colour == 1) {
        (x->up)->colour = 0;
        y->colour = 0;
        ((x->up)->up)->colour = 1;
        x = (x->up)->up;
      } else {
        if ((unsigned int )x == (unsigned int )(x->up)->left) {
          x = x->up;
          rb_right_rotate(& rbinfo->rb_root, x);
        }
        (x->up)->colour = 0;
        ((x->up)->up)->colour = 1;
        rb_left_rotate(& rbinfo->rb_root, (x->up)->up);
      }
    }
  }
  (rbinfo->rb_root)->colour = 0;
  return (z);
}
}
static struct rbnode *rb_lookup(int mode , void const   *key , struct rbtree *rbinfo ) 
{ struct rbnode *x ;
  struct rbnode *y ;
  int cmp ;
  int found ;
  struct rbnode *tmp ;
  struct rbnode *tmp___0 ;
  struct rbnode *tmp___1 ;
  struct rbnode *tmp___2 ;

  {
  found = 0;
  y = & rb_null;
  x = rbinfo->rb_root;
  if (mode == 7) {
    while ((unsigned int )x != (unsigned int )(& rb_null)) {
      y = x;
      x = x->left;
    }
    return (y);
  } else {
    if (mode == 8) {
      while ((unsigned int )x != (unsigned int )(& rb_null)) {
        y = x;
        x = x->right;
      }
      return (y);
    }
  }
  while (1) {
    if ((unsigned int )x != (unsigned int )(& rb_null)) {
      if (! (found == 0)) {
        goto _L;
      }
    } else {
      _L: /* CIL Label */ 
      break;
    }
    y = x;
    cmp = ((*(rbinfo->rb_cmp)))(key, x->key, rbinfo->rb_config);
    if (cmp < 0) {
      x = x->left;
    } else {
      if (cmp > 0) {
        x = x->right;
      } else {
        found = 1;
      }
    }
  }
  if (found) {
    if (mode == 0) {
      goto _L___2;
    } else {
      if (mode == 1) {
        _L___2: /* CIL Label */ 
        goto _L___1;
      } else {
        if (mode == 2) {
          _L___1: /* CIL Label */ 
          return (x);
        } else {
          goto _L___0;
        }
      }
    }
  } else {
    _L___0: /* CIL Label */ ;
  }
  if (! found) {
    if (mode == 0) {
      goto _L___5;
    } else {
      if (mode == 5) {
        _L___5: /* CIL Label */ 
        goto _L___4;
      } else {
        if (mode == 6) {
          _L___4: /* CIL Label */ 
          return (& rb_null);
        } else {
          goto _L___3;
        }
      }
    }
  } else {
    _L___3: /* CIL Label */ ;
  }
  if (mode == 1) {
    goto _L___6;
  } else {
    if (! found) {
      if (mode == 4) {
        _L___6: /* CIL Label */ 
        if (cmp > 0) {
          tmp = rb_successor((struct rbnode  const  *)y);
          return (tmp);
        } else {
          return (y);
        }
      } else {
        goto _L___7;
      }
    } else {
      _L___7: /* CIL Label */ ;
    }
  }
  if (mode == 2) {
    goto _L___8;
  } else {
    if (! found) {
      if (mode == 3) {
        _L___8: /* CIL Label */ 
        if (cmp < 0) {
          tmp___0 = rb_predecessor((struct rbnode  const  *)y);
          return (tmp___0);
        } else {
          return (y);
        }
      } else {
        goto _L___9;
      }
    } else {
      _L___9: /* CIL Label */ ;
    }
  }
  if (mode == 5) {
    goto _L___10;
  } else {
    if (found) {
      if (mode == 4) {
        _L___10: /* CIL Label */ 
        tmp___1 = rb_successor((struct rbnode  const  *)x);
        return (tmp___1);
      } else {
        goto _L___11;
      }
    } else {
      _L___11: /* CIL Label */ ;
    }
  }
  if (mode == 6) {
    goto _L___12;
  } else {
    if (found) {
      if (mode == 3) {
        _L___12: /* CIL Label */ 
        tmp___2 = rb_predecessor((struct rbnode  const  *)x);
        return (tmp___2);
      } else {
        goto _L___13;
      }
    } else {
      _L___13: /* CIL Label */ ;
    }
  }
  return (& rb_null);
}
}
static void rb_destroy(struct rbnode *x ) 
{ 

  {
  if ((unsigned int )x != (unsigned int )(& rb_null)) {
    if ((unsigned int )x->left != (unsigned int )(& rb_null)) {
      rb_destroy(x->left);
    }
    if ((unsigned int )x->right != (unsigned int )(& rb_null)) {
      rb_destroy(x->right);
    }
    rb_free(x);
  }
  return;
}
}
static void rb_left_rotate(struct rbnode **rootp , struct rbnode *x ) 
{ struct rbnode *y ;

  {
  y = x->right;
  x->right = y->left;
  if ((unsigned int )y->left != (unsigned int )(& rb_null)) {
    (y->left)->up = x;
  }
  y->up = x->up;
  if ((unsigned int )x->up == (unsigned int )(& rb_null)) {
    (*rootp) = y;
  } else {
    if ((unsigned int )x == (unsigned int )(x->up)->left) {
      (x->up)->left = y;
    } else {
      (x->up)->right = y;
    }
  }
  y->left = x;
  x->up = y;
  return;
}
}
static void rb_right_rotate(struct rbnode **rootp , struct rbnode *y ) 
{ struct rbnode *x ;

  {
  x = y->left;
  y->left = x->right;
  if ((unsigned int )x->right != (unsigned int )(& rb_null)) {
    (x->right)->up = y;
  }
  x->up = y->up;
  if ((unsigned int )y->up == (unsigned int )(& rb_null)) {
    (*rootp) = x;
  } else {
    if ((unsigned int )y == (unsigned int )(y->up)->left) {
      (y->up)->left = x;
    } else {
      (y->up)->right = x;
    }
  }
  x->right = y;
  y->up = x;
  return;
}
}
static struct rbnode *rb_successor(struct rbnode  const  *x ) 
{ struct rbnode *y ;

  {
  if ((unsigned int )x->right != (unsigned int )(& rb_null)) {
    y = x->right;
    while ((unsigned int )y->left != (unsigned int )(& rb_null)) {
      y = y->left;
    }
  } else {
    y = x->up;
    while (1) {
      if ((unsigned int )y != (unsigned int )(& rb_null)) {
        if (! ((unsigned int )x == (unsigned int )y->right)) {
          goto _L;
        }
      } else {
        _L: /* CIL Label */ 
        break;
      }
      x = (struct rbnode  const  *)y;
      y = y->up;
    }
  }
  return (y);
}
}
static struct rbnode *rb_predecessor(struct rbnode  const  *x ) 
{ struct rbnode *y ;

  {
  if ((unsigned int )x->left != (unsigned int )(& rb_null)) {
    y = x->left;
    while ((unsigned int )y->right != (unsigned int )(& rb_null)) {
      y = y->right;
    }
  } else {
    y = x->up;
    while (1) {
      if ((unsigned int )y != (unsigned int )(& rb_null)) {
        if (! ((unsigned int )x == (unsigned int )y->left)) {
          goto _L;
        }
      } else {
        _L: /* CIL Label */ 
        break;
      }
      x = (struct rbnode  const  *)y;
      y = y->up;
    }
  }
  return (y);
}
}
static void rb_delete(struct rbnode **rootp , struct rbnode *z ) 
{ struct rbnode *x ;
  struct rbnode *y ;

  {
  if ((unsigned int )z->left == (unsigned int )(& rb_null)) {
    goto _L;
  } else {
    if ((unsigned int )z->right == (unsigned int )(& rb_null)) {
      _L: /* CIL Label */ 
      y = z;
    } else {
      y = rb_successor((struct rbnode  const  *)z);
    }
  }
  if ((unsigned int )y->left != (unsigned int )(& rb_null)) {
    x = y->left;
  } else {
    x = y->right;
  }
  x->up = y->up;
  if ((unsigned int )y->up == (unsigned int )(& rb_null)) {
    (*rootp) = x;
  } else {
    if ((unsigned int )y == (unsigned int )(y->up)->left) {
      (y->up)->left = x;
    } else {
      (y->up)->right = x;
    }
  }
  if ((unsigned int )y != (unsigned int )z) {
    z->key = y->key;
  }
  if ((int )y->colour == 0) {
    rb_delete_fix(rootp, x);
  }
  rb_free(y);
  return;
}
}
static void rb_delete_fix(struct rbnode **rootp , struct rbnode *x ) 
{ struct rbnode *w ;

  {
  while (1) {
    if ((unsigned int )x != (unsigned int )(*rootp)) {
      if (! ((int )x->colour == 0)) {
        goto _L___1;
      }
    } else {
      _L___1: /* CIL Label */ 
      break;
    }
    if ((unsigned int )x == (unsigned int )(x->up)->left) {
      w = (x->up)->right;
      if ((int )w->colour == 1) {
        w->colour = 0;
        (x->up)->colour = 1;
        rb_left_rotate(rootp, x->up);
        w = (x->up)->right;
      }
      if ((int )(w->left)->colour == 0) {
        if ((int )(w->right)->colour == 0) {
          w->colour = 1;
          x = x->up;
        } else {
          goto _L;
        }
      } else {
        _L: /* CIL Label */ 
        if ((int )(w->right)->colour == 0) {
          (w->left)->colour = 0;
          w->colour = 1;
          rb_right_rotate(rootp, w);
          w = (x->up)->right;
        }
        w->colour = (x->up)->colour;
        (x->up)->colour = 0;
        (w->right)->colour = 0;
        rb_left_rotate(rootp, x->up);
        x = (*rootp);
      }
    } else {
      w = (x->up)->left;
      if ((int )w->colour == 1) {
        w->colour = 0;
        (x->up)->colour = 1;
        rb_right_rotate(rootp, x->up);
        w = (x->up)->left;
      }
      if ((int )(w->right)->colour == 0) {
        if ((int )(w->left)->colour == 0) {
          w->colour = 1;
          x = x->up;
        } else {
          goto _L___0;
        }
      } else {
        _L___0: /* CIL Label */ 
        if ((int )(w->left)->colour == 0) {
          (w->right)->colour = 0;
          w->colour = 1;
          rb_left_rotate(rootp, w);
          w = (x->up)->left;
        }
        w->colour = (x->up)->colour;
        (x->up)->colour = 0;
        (w->left)->colour = 0;
        rb_right_rotate(rootp, x->up);
        x = (*rootp);
      }
    }
  }
  x->colour = 0;
  return;
}
}
static void rb_walk(struct rbnode  const  *x , void (*action)(void const   * , VISIT  ,
                                                              int  , void * ) , void *arg ,
                    int level ) 
{ 

  {
  if ((unsigned int )x == (unsigned int )(& rb_null)) {
    return;
  }
  if ((unsigned int )x->left == (unsigned int )(& rb_null)) {
    if ((unsigned int )x->right == (unsigned int )(& rb_null)) {
      ((*action))(x->key, 3, level, arg);
    } else {
      goto _L;
    }
  } else {
    _L: /* CIL Label */ 
    ((*action))(x->key, 0, level, arg);
    rb_walk((struct rbnode  const  *)x->left, action, arg, level + 1);
    ((*action))(x->key, 1, level, arg);
    rb_walk((struct rbnode  const  *)x->right, action, arg, level + 1);
    ((*action))(x->key, 2, level, arg);
  }
  return;
}
}
static struct rblists *rb_openlist(struct rbnode  const  *rootp ) 
{ struct rblists *rblistp ;

  {
  rblistp = (struct rblists *)malloc(sizeof(struct rblists ));
  if (! rblistp) {
    return ((struct rblists *)((void *)0));
  }
  rblistp->rootp = rootp;
  rblistp->nextp = rootp;
  if ((unsigned int )rootp != (unsigned int )(& rb_null)) {
    while ((unsigned int )(rblistp->nextp)->left != (unsigned int )(& rb_null)) {
      rblistp->nextp = (struct rbnode  const  *)(rblistp->nextp)->left;
    }
  }
  return (rblistp);
}
}
static void const   *rb_readlist(struct rblists *rblistp ) 
{ void const   *key ;

  {
  key = (void const   *)((void *)0);
  if ((unsigned int )rblistp != (unsigned int )((void *)0)) {
    if ((unsigned int )rblistp->nextp != (unsigned int )(& rb_null)) {
      key = (rblistp->nextp)->key;
      rblistp->nextp = rb_successor(rblistp->nextp);
    } else {
      goto _L;
    }
  } else {
    _L: /* CIL Label */ ;
  }
  return (key);
}
}
static void rb_closelist(struct rblists *rblistp ) 
{ 

  {
  if (rblistp) {
    free((void *)rblistp);
  }
  return;
}
}
#pragma merger(0,"/tmp/cil-yVTQBTQ8.i","-g -g -O2")
extern int feof(FILE *__stream ) ;
int *da_get_current_tag_info(int file_fd ) ;
int da_get_image_fd(char *filename ) 
{ unsigned char buffer___0[255] ;
  char *path_end ;
  int fd ;
  size_t tmp ;
  int tmp___0 ;

  {
  tmp___0 = __builtin_constant_p(filename);
  if (tmp___0) {
    tmp = strlen((char const   *)filename);
    if (tmp + 1U >= 255U) {
      memcpy((void * __restrict  )(buffer___0), (void const   * __restrict  )filename,
             255U);
    } else {
      strncpy((char * __restrict  )(buffer___0), (char const   * __restrict  )filename,
              255U);
    }
  } else {
    strncpy((char * __restrict  )(buffer___0), (char const   * __restrict  )filename,
            255U);
  }
  path_end = strrchr((char const   *)(buffer___0), '/');
  strcpy((char * __restrict  )(path_end + 1), (char const   * __restrict  )config.artfilename);
  fd = open((char const   *)(buffer___0), 0);
  if (fd != -1) {
    err_log(5, 256U, (char *)"Found image file %s (fd %d)\n", buffer___0, fd);
  }
  return (fd);
}
}
int *da_get_current_tag_info(int file_fd ) 
{ unsigned char buffer___0[10] ;
  int *tag_info ;
  int tmp___45 ;
  size_t __s1_len___0 ;
  size_t __s2_len___0 ;
  int tmp___67 ;
  size_t tmp___68 ;
  register int __result___85 ;
  unsigned char const   *__s2___14 ;
  register int __result___86 ;
  register int __result___93 ;
  unsigned char const   *__s1___30 ;
  register int __result___94 ;
  int tmp___83 ;
  int tmp___84 ;
  int tmp___85 ;
  int tmp___86 ;
  int tmp___87 ;
  size_t tmp___88 ;
  size_t tmp___89 ;

  {
  tag_info = (int *)calloc(2U, sizeof(int ));
  r_read(file_fd, (void *)(buffer___0), 10U);
  tmp___87 = __builtin_constant_p(buffer___0);
  if (tmp___87) {
    tmp___88 = strlen((char const   *)(buffer___0));
    if (tmp___88 < 3U) {
      goto _L___335;
    } else {
      goto _L___336;
    }
  } else {
    _L___336: /* CIL Label */ 
    tmp___89 = strlen("ID3");
    if (tmp___89 < 3U) {
      _L___335: /* CIL Label */ 
      tmp___85 = __builtin_constant_p(buffer___0);
      if (tmp___85) {
        __s1_len___0 = strlen((char const   *)(buffer___0));
        __s2_len___0 = strlen("ID3");
        if (! ((unsigned int )((void const   *)(buffer___0 + 1)) - (unsigned int )((void const   *)(buffer___0)) ==
               1U)) {
          goto _L___332;
        } else {
          if (__s1_len___0 >= 4U) {
            _L___332: /* CIL Label */ 
            if (! ((unsigned int )((void const   *)("ID3" + 1)) - (unsigned int )((void const   *)"ID3") ==
                   1U)) {
              goto _L___331;
            } else {
              if (__s2_len___0 >= 4U) {
                _L___331: /* CIL Label */ 
                tmp___86 = 1;
              } else {
                goto _L___330;
              }
            }
          } else {
            _L___330: /* CIL Label */ 
            tmp___86 = 0;
          }
        }
        if (tmp___86) {
          if (__s1_len___0 < __s2_len___0) {
            tmp___68 = __s1_len___0;
          } else {
            tmp___68 = __s2_len___0;
          }
          tmp___67 = memcmp((void const   *)((char const   *)(buffer___0)), (void const   *)"ID3",
                            tmp___68 + 1U);
        } else {
          goto _L___334;
        }
      } else {
        _L___334: /* CIL Label */ 
        tmp___84 = __builtin_constant_p(buffer___0);
        if (tmp___84) {
          if ((unsigned int )((void const   *)(buffer___0 + 1)) - (unsigned int )((void const   *)(buffer___0)) ==
              1U) {
            __s1_len___0 = strlen((char const   *)(buffer___0));
            if (__s1_len___0 < 4U) {
              if ((unsigned int )((void const   *)("ID3" + 1)) - (unsigned int )((void const   *)"ID3") ==
                  1U) {
                __result___85 = (int )((int const   )(*((unsigned char const   *)((char const   *)(buffer___0)) +
                                                        0)) - (int const   )(*((unsigned char const   *)"ID3" +
                                                                               0)));
                if (__s1_len___0 > 0U) {
                  if (__result___85 == 0) {
                    __result___85 = (int )((int const   )(*((unsigned char const   *)((char const   *)(buffer___0)) +
                                                            1)) - (int const   )(*((unsigned char const   *)"ID3" +
                                                                                   1)));
                    if (__s1_len___0 > 1U) {
                      if (__result___85 == 0) {
                        __result___85 = (int )((int const   )(*((unsigned char const   *)((char const   *)(buffer___0)) +
                                                                2)) - (int const   )(*((unsigned char const   *)"ID3" +
                                                                                       2)));
                        if (__s1_len___0 > 2U) {
                          if (__result___85 == 0) {
                            __result___85 = (int )((int const   )(*((unsigned char const   *)((char const   *)(buffer___0)) +
                                                                    3)) - (int const   )(*((unsigned char const   *)"ID3" +
                                                                                           3)));
                          } else {
                            goto _L___295;
                          }
                        } else {
                          _L___295: /* CIL Label */ ;
                        }
                      } else {
                        goto _L___296;
                      }
                    } else {
                      _L___296: /* CIL Label */ ;
                    }
                  } else {
                    goto _L___297;
                  }
                } else {
                  _L___297: /* CIL Label */ ;
                }
                tmp___67 = __result___85;
              } else {
                __s2___14 = (unsigned char const   *)"ID3";
                __result___86 = (int )((int const   )(*((unsigned char const   *)((char const   *)(buffer___0)) +
                                                        0)) - (int const   )(*(__s2___14 +
                                                                               0)));
                if (__s1_len___0 > 0U) {
                  if (__result___86 == 0) {
                    __result___86 = (int )((int const   )(*((unsigned char const   *)((char const   *)(buffer___0)) +
                                                            1)) - (int const   )(*(__s2___14 +
                                                                                   1)));
                    if (__s1_len___0 > 1U) {
                      if (__result___86 == 0) {
                        __result___86 = (int )((int const   )(*((unsigned char const   *)((char const   *)(buffer___0)) +
                                                                2)) - (int const   )(*(__s2___14 +
                                                                                       2)));
                        if (__s1_len___0 > 2U) {
                          if (__result___86 == 0) {
                            __result___86 = (int )((int const   )(*((unsigned char const   *)((char const   *)(buffer___0)) +
                                                                    3)) - (int const   )(*(__s2___14 +
                                                                                           3)));
                          } else {
                            goto _L___298;
                          }
                        } else {
                          _L___298: /* CIL Label */ ;
                        }
                      } else {
                        goto _L___299;
                      }
                    } else {
                      _L___299: /* CIL Label */ ;
                    }
                  } else {
                    goto _L___300;
                  }
                } else {
                  _L___300: /* CIL Label */ ;
                }
                tmp___67 = __result___86;
              }
            } else {
              goto _L___329;
            }
          } else {
            goto _L___329;
          }
        } else {
          _L___329: /* CIL Label */ 
          if ((unsigned int )((void const   *)("ID3" + 1)) - (unsigned int )((void const   *)"ID3") ==
              1U) {
            __s2_len___0 = strlen("ID3");
            if (__s2_len___0 < 4U) {
              tmp___83 = __builtin_constant_p(buffer___0);
              if (tmp___83) {
                if ((unsigned int )((void const   *)(buffer___0 + 1)) - (unsigned int )((void const   *)(buffer___0)) ==
                    1U) {
                  __result___93 = (int )((int const   )(*((unsigned char const   *)((char const   *)(buffer___0)) +
                                                          0)) - (int const   )(*((unsigned char const   *)"ID3" +
                                                                                 0)));
                  if (__s2_len___0 > 0U) {
                    if (__result___93 == 0) {
                      __result___93 = (int )((int const   )(*((unsigned char const   *)((char const   *)(buffer___0)) +
                                                              1)) - (int const   )(*((unsigned char const   *)"ID3" +
                                                                                     1)));
                      if (__s2_len___0 > 1U) {
                        if (__result___93 == 0) {
                          __result___93 = (int )((int const   )(*((unsigned char const   *)((char const   *)(buffer___0)) +
                                                                  2)) - (int const   )(*((unsigned char const   *)"ID3" +
                                                                                         2)));
                          if (__s2_len___0 > 2U) {
                            if (__result___93 == 0) {
                              __result___93 = (int )((int const   )(*((unsigned char const   *)((char const   *)(buffer___0)) +
                                                                      3)) - (int const   )(*((unsigned char const   *)"ID3" +
                                                                                             3)));
                            } else {
                              goto _L___320;
                            }
                          } else {
                            _L___320: /* CIL Label */ ;
                          }
                        } else {
                          goto _L___321;
                        }
                      } else {
                        _L___321: /* CIL Label */ ;
                      }
                    } else {
                      goto _L___322;
                    }
                  } else {
                    _L___322: /* CIL Label */ ;
                  }
                  tmp___67 = __result___93;
                } else {
                  goto _L___326;
                }
              } else {
                _L___326: /* CIL Label */ 
                __s1___30 = (unsigned char const   *)((char const   *)(buffer___0));
                __result___94 = (int )((int const   )(*(__s1___30 + 0)) - (int const   )(*((unsigned char const   *)"ID3" +
                                                                                           0)));
                if (__s2_len___0 > 0U) {
                  if (__result___94 == 0) {
                    __result___94 = (int )((int const   )(*(__s1___30 + 1)) - (int const   )(*((unsigned char const   *)"ID3" +
                                                                                               1)));
                    if (__s2_len___0 > 1U) {
                      if (__result___94 == 0) {
                        __result___94 = (int )((int const   )(*(__s1___30 + 2)) -
                                               (int const   )(*((unsigned char const   *)"ID3" +
                                                                2)));
                        if (__s2_len___0 > 2U) {
                          if (__result___94 == 0) {
                            __result___94 = (int )((int const   )(*(__s1___30 + 3)) -
                                                   (int const   )(*((unsigned char const   *)"ID3" +
                                                                    3)));
                          } else {
                            goto _L___323;
                          }
                        } else {
                          _L___323: /* CIL Label */ ;
                        }
                      } else {
                        goto _L___324;
                      }
                    } else {
                      _L___324: /* CIL Label */ ;
                    }
                  } else {
                    goto _L___325;
                  }
                } else {
                  _L___325: /* CIL Label */ ;
                }
                tmp___67 = __result___94;
              }
            } else {
              goto _L___327;
            }
          } else {
            _L___327: /* CIL Label */ 
            tmp___67 = strcmp((char const   *)(buffer___0), "ID3");
          }
        }
      }
      tmp___45 = tmp___67;
    } else {
      tmp___45 = strncmp((char const   *)(buffer___0), "ID3", 3U);
    }
  }
  if (tmp___45 == 0) {
    (*(tag_info + 0)) = (int )buffer___0[3];
    (*(tag_info + 1)) = ((((int )buffer___0[6] << 21) + ((int )buffer___0[7] << 14)) +
                         ((int )buffer___0[8] << 7)) + (int )buffer___0[9];
    return (tag_info);
  } else {
    lseek(file_fd, 0L, 0);
    (*(tag_info + 0)) = 2;
    (*(tag_info + 1)) = 0;
    return (tag_info);
  }
}
}
int da_attach_image(int img_fd , int out_fd , int mp3_fd , int offset ) 
{ long img_size ;
  int tag_size ;
  int *tag_info ;
  unsigned char buffer___0[4] ;
  struct stat sb ;

  {
  fstat__extinline(img_fd, & sb);
  img_size = sb.st_size;
  err_log(5, 256U, (char *)"Image appears to be %ld bytes\n", img_size);
  if (img_size < 1L) {
    r_close(img_fd);
    return (0);
  }
  if ((long )offset > img_size + 24L) {
    lseek(mp3_fd, ((long )offset - img_size) - 24L, 0);
    r_close(img_fd);
    return (0);
  }
  tag_info = da_get_current_tag_info(mp3_fd);
  tag_size = (*(tag_info + 1));
  err_log(5, 256U, (char *)"Current tag size is %d bytes\n", tag_size);
  if ((*(tag_info + 0)) == 3) {
    r_write(out_fd, (void *)"ID3\003\000\000", 6U);
    tag_size = (int )((long )tag_size + ((img_size + 14L) + 8L));
  } else {
    r_write(out_fd, (void *)"ID3\002\000\000", 6U);
    tag_size = (int )((long )tag_size + ((img_size + 6L) + 6L));
  }
  buffer___0[3] = (unsigned char )(tag_size & 127);
  buffer___0[2] = (unsigned char )((tag_size & 16256) >> 7);
  buffer___0[1] = (unsigned char )((tag_size & 2080768) >> 14);
  buffer___0[0] = (unsigned char )((tag_size & 266338304) >> 21);
  r_write(out_fd, (void *)(buffer___0), 4U);
  if ((*(tag_info + 0)) == 3) {
    r_write(out_fd, (void *)"APIC\000", 5U);
    img_size = img_size + 14L;
  } else {
    r_write(out_fd, (void *)"PIC", 3U);
    img_size = img_size + 6L;
  }
  buffer___0[0] = (unsigned char )((img_size & 16711680L) >> 16);
  buffer___0[1] = (unsigned char )((img_size & 65280L) >> 8);
  buffer___0[2] = (unsigned char )(img_size & 255L);
  r_write(out_fd, (void *)(buffer___0), 3U);
  if ((*(tag_info + 0)) == 3) {
    r_write(out_fd, (void *)"\000\000\000image/jpeg\000\000\000", 16U);
  } else {
    r_write(out_fd, (void *)"\000JPG\000\000", 6U);
  }
  lseek(img_fd, 0L, 0);
  copyfile(img_fd, out_fd);
  err_log(5, 256U, (char *)"Done copying IMG %ld\n", img_size);
  r_close(img_fd);
  free((void *)tag_info);
  return (0);
}
}
int fcopyblock(FILE *fromfp , int tofd , size_t size ) ;
off_t da_aac_rewrite_stco_atom(off_t extra_size , int out_fd , FILE *aac_fp , off_t last_pos ) 
{ int aac_fd ;
  struct stat sb ;
  unsigned char buffer___0[4] ;
  off_t file_size ;
  int atom_offset ;
  int atom_length ;
  off_t cur_pos ;
  off_t old_pos ;
  int i ;
  unsigned int num_entries ;
  unsigned int offset_entry ;
  off_t tmp ;

  {
  aac_fd = fileno(aac_fp);
  fstat__extinline(aac_fd, & sb);
  file_size = sb.st_size;
  atom_offset = (int )aac_drilltoatom(aac_fp, (char *)"moov:trak:mdia:minf:stbl:stco",
                                      (unsigned int *)(& atom_length));
  if (atom_offset != -1) {
    fseek(aac_fp, 4L, 1);
    old_pos = last_pos;
    cur_pos = ftell(aac_fp);
    fseek(aac_fp, old_pos, 0);
    fcopyblock(aac_fp, out_fd, cur_pos - old_pos);
    fread((void * __restrict  )(buffer___0), 1U, 4U, (FILE * __restrict  )aac_fp);
    r_write(out_fd, (void *)(buffer___0), 4U);
    num_entries = (unsigned int )(((((int )buffer___0[0] << 24) | ((int )buffer___0[1] <<
                                                                   16)) | ((int )buffer___0[2] <<
                                                                           8)) | (int )buffer___0[3]);
    err_log(9, 256U, (char *)"Readjusting %d \'stco\' table offsets.\n", num_entries);
    i = 0;
    while ((unsigned int )i < num_entries) {
      fread((void * __restrict  )(buffer___0), 1U, 4U, (FILE * __restrict  )aac_fp);
      offset_entry = (unsigned int )(((((int )buffer___0[0] << 24) | ((int )buffer___0[1] <<
                                                                      16)) | ((int )buffer___0[2] <<
                                                                              8)) |
                                     (int )buffer___0[3]);
      offset_entry = (unsigned int )((unsigned long )offset_entry + (unsigned long )extra_size);
      buffer___0[3] = (unsigned char )(offset_entry & 255U);
      buffer___0[2] = (unsigned char )((offset_entry >> 8) & 255U);
      buffer___0[1] = (unsigned char )((offset_entry >> 16) & 255U);
      buffer___0[0] = (unsigned char )((offset_entry >> 24) & 255U);
      r_write(out_fd, (void *)(buffer___0), 4U);
      offset_entry = 0U;
      i ++;
    }
    tmp = ftell(aac_fp);
    return (tmp);
  } else {
    err_log(1, 256U, (char *)"No \'stco\' atom found.\n");
  }
  return (last_pos);
}
}
off_t da_aac_insert_covr_atom(off_t extra_size , int out_fd , FILE *aac_fp , off_t last_pos ,
                              off_t file_size , int img_fd ) 
{ int aac_fd ;
  struct stat sb ;
  off_t old_pos ;
  unsigned char buffer___0[4] ;
  int atom_offset ;
  int atom_length ;
  off_t cur_pos ;
  char *cp ;
  unsigned char img_type_flag ;
  int tmp ;
  int tmp___0 ;
  int tmp___1 ;
  long tmp___2 ;
  long tmp___3 ;
  long tmp___4 ;

  {
  img_type_flag = (unsigned char)0;
  cp = strrchr((char const   *)config.artfilename, '.');
  if (cp) {
    tmp___0 = strcasecmp((char const   *)cp, ".jpeg");
    if (tmp___0) {
      tmp___1 = strcasecmp((char const   *)cp, ".jpg");
      if (tmp___1) {
        tmp = strcasecmp((char const   *)cp, ".png");
        if (tmp) {
          err_log(1, 256U, (char *)"Image type \'%s\' not supported.\n", cp);
          return (0L);
        } else {
          img_type_flag = (unsigned char)14;
        }
      } else {
        _L: /* CIL Label */ 
        img_type_flag = (unsigned char)13;
      }
    } else {
      goto _L;
    }
  } else {
    err_log(1, 256U, (char *)"No file extension for image file.\n");
  }
  aac_fd = fileno(aac_fp);
  fstat__extinline(aac_fd, & sb);
  file_size = sb.st_size;
  rewind(aac_fp);
  atom_offset = (int )scan_aac_findatom(aac_fp, file_size, "moov", & atom_length);
  if (atom_offset != -1) {
    atom_offset = (int )scan_aac_findatom(aac_fp, atom_length - 8, "udta", & atom_length);
    if (atom_offset != -1) {
      old_pos = last_pos;
      tmp___2 = ftell(aac_fp);
      cur_pos = tmp___2 - 8L;
      err_log(5, 256U, (char *)"Found udta atom at %ld.\n", cur_pos);
      fseek(aac_fp, old_pos, 0);
      fcopyblock(aac_fp, out_fd, cur_pos - old_pos);
      atom_length = (int )((off_t )atom_length + extra_size);
      buffer___0[3] = (unsigned char )(atom_length & 255);
      buffer___0[2] = (unsigned char )((atom_length >> 8) & 255);
      buffer___0[1] = (unsigned char )((atom_length >> 16) & 255);
      buffer___0[0] = (unsigned char )((atom_length >> 24) & 255);
      r_write(out_fd, (void *)(buffer___0), 4U);
      cur_pos += 4L;
      fseek(aac_fp, 8L, 1);
      atom_offset = (int )scan_aac_findatom(aac_fp, atom_length - 8, "meta", & atom_length);
      if (atom_offset != -1) {
        old_pos = cur_pos;
        tmp___3 = ftell(aac_fp);
        cur_pos = tmp___3 - 8L;
        err_log(5, 256U, (char *)"Found meta atom at %ld.\n", cur_pos);
        fseek(aac_fp, old_pos, 0);
        fcopyblock(aac_fp, out_fd, cur_pos - old_pos);
        atom_length = (int )((off_t )atom_length + extra_size);
        buffer___0[3] = (unsigned char )(atom_length & 255);
        buffer___0[2] = (unsigned char )((atom_length >> 8) & 255);
        buffer___0[1] = (unsigned char )((atom_length >> 16) & 255);
        buffer___0[0] = (unsigned char )((atom_length >> 24) & 255);
        r_write(out_fd, (void *)(buffer___0), 4U);
        cur_pos += 4L;
        fseek(aac_fp, 12L, 1);
        atom_offset = (int )scan_aac_findatom(aac_fp, atom_length - 8, "ilst", & atom_length);
        if (atom_offset != -1) {
          old_pos = cur_pos;
          tmp___4 = ftell(aac_fp);
          cur_pos = tmp___4 - 8L;
          err_log(5, 256U, (char *)"Found ilst atom at %ld.\n", cur_pos);
          fseek(aac_fp, old_pos, 0);
          fcopyblock(aac_fp, out_fd, cur_pos - old_pos);
          old_pos = cur_pos + 4L;
          cur_pos += (off_t )atom_length;
          atom_length = (int )((off_t )atom_length + extra_size);
          buffer___0[3] = (unsigned char )(atom_length & 255);
          buffer___0[2] = (unsigned char )((atom_length >> 8) & 255);
          buffer___0[1] = (unsigned char )((atom_length >> 16) & 255);
          buffer___0[0] = (unsigned char )((atom_length >> 24) & 255);
          r_write(out_fd, (void *)(buffer___0), 4U);
          fseek(aac_fp, old_pos, 0);
          fcopyblock(aac_fp, out_fd, cur_pos - old_pos);
          cur_pos = ftell(aac_fp);
          atom_length = (int )extra_size;
          buffer___0[3] = (unsigned char )(atom_length & 255);
          buffer___0[2] = (unsigned char )((atom_length >> 8) & 255);
          buffer___0[1] = (unsigned char )((atom_length >> 16) & 255);
          buffer___0[0] = (unsigned char )((atom_length >> 24) & 255);
          r_write(out_fd, (void *)(buffer___0), 4U);
          r_write(out_fd, (void *)"covr", 4U);
          atom_length = (int )(extra_size - 8L);
          buffer___0[3] = (unsigned char )(atom_length & 255);
          buffer___0[2] = (unsigned char )((atom_length >> 8) & 255);
          buffer___0[1] = (unsigned char )((atom_length >> 16) & 255);
          buffer___0[0] = (unsigned char )((atom_length >> 24) & 255);
          r_write(out_fd, (void *)(buffer___0), 4U);
          r_write(out_fd, (void *)"data", 4U);
          buffer___0[3] = img_type_flag;
          buffer___0[2] = (unsigned char)0;
          buffer___0[1] = (unsigned char)0;
          buffer___0[0] = (unsigned char)0;
          r_write(out_fd, (void *)(buffer___0), 4U);
          buffer___0[3] = (unsigned char)0;
          buffer___0[2] = (unsigned char)0;
          buffer___0[1] = (unsigned char)0;
          buffer___0[0] = (unsigned char)0;
          r_write(out_fd, (void *)(buffer___0), 4U);
          lseek(img_fd, 0L, 0);
          copyfile(img_fd, out_fd);
          last_pos = cur_pos;
        } else {
          err_log(1, 256U, (char *)"No \'ilst\' atom found.\n");
        }
      } else {
        err_log(1, 256U, (char *)"No \'meta\' atom found.\n");
      }
    } else {
      err_log(1, 256U, (char *)"No \'udta\' atom found.\n");
    }
  } else {
    err_log(1, 256U, (char *)"No \'moov\' atom found.\n");
  }
  lseek(aac_fd, last_pos, 0);
  return (last_pos);
}
}
off_t da_aac_attach_image(int img_fd , int out_fd , int aac_fd , int offset ) 
{ off_t img_size ;
  int atom_length ;
  unsigned int extra_size ;
  off_t file_size ;
  unsigned char buffer___0[4] ;
  struct stat sb ;
  FILE *aac_fp ;
  off_t stco_atom_pos ;
  off_t ilst_atom_pos ;
  off_t last_pos ;
  int tmp ;

  {
  fstat__extinline(img_fd, & sb);
  img_size = sb.st_size;
  err_log(5, 256U, (char *)"Image size (in bytes): %ld.\n", img_size);
  if (img_size < 1L) {
    r_close(img_fd);
    return (0L);
  }
  extra_size = (unsigned int )(img_size + 24L);
  fstat__extinline(aac_fd, & sb);
  file_size = sb.st_size;
  tmp = dup(aac_fd);
  aac_fp = fdopen(tmp, "r");
  stco_atom_pos = aac_drilltoatom(aac_fp, (char *)"moov:trak:mdia:minf:stbl:stco",
                                  (unsigned int *)(& atom_length));
  ilst_atom_pos = aac_drilltoatom(aac_fp, (char *)"moov:udta:meta:ilst", (unsigned int *)(& atom_length));
  last_pos = aac_drilltoatom(aac_fp, (char *)"mdat", (unsigned int *)(& atom_length));
  if (last_pos != -1L) {
    if ((off_t )offset >= last_pos) {
      return (0L);
    }
  } else {
    err_log(1, 256U, (char *)"No \'mdat\' atom.\n");
    return (0L);
  }
  rewind(aac_fp);
  last_pos = scan_aac_findatom(aac_fp, file_size, "moov", & atom_length);
  if (last_pos != -1L) {
    rewind(aac_fp);
    fcopyblock(aac_fp, out_fd, last_pos);
    atom_length = (int )((unsigned int )atom_length + extra_size);
    buffer___0[3] = (unsigned char )(atom_length & 255);
    buffer___0[2] = (unsigned char )((atom_length >> 8) & 255);
    buffer___0[1] = (unsigned char )((atom_length >> 16) & 255);
    buffer___0[0] = (unsigned char )((atom_length >> 24) & 255);
    r_write(out_fd, (void *)(buffer___0), 4U);
    last_pos += 4L;
  } else {
    err_log(1, 256U, (char *)"Could not find \'moov\' atom.\n");
    return (0L);
  }
  if (stco_atom_pos < ilst_atom_pos) {
    last_pos = da_aac_rewrite_stco_atom((long )extra_size, out_fd, aac_fp, last_pos);
    last_pos = da_aac_insert_covr_atom((long )extra_size, out_fd, aac_fp, last_pos,
                                       file_size, img_fd);
  } else {
    last_pos = da_aac_insert_covr_atom((long )extra_size, out_fd, aac_fp, last_pos,
                                       file_size, img_fd);
    last_pos = da_aac_rewrite_stco_atom((long )extra_size, out_fd, aac_fp, last_pos);
  }
  lseek(aac_fd, last_pos, 0);
  r_close(img_fd);
  fclose(aac_fp);
  return (last_pos);
}
}
int copyblock(int fromfd , int tofd , size_t size ) 
{ char buf[4096] ;
  int bytesread ;
  int totalbytes ;
  int blocksize ;
  int bytesleft ;
  ssize_t tmp ;

  {
  totalbytes = 0;
  blocksize = 4096;
  while ((size_t )totalbytes < size) {
    bytesleft = (int )(size - (size_t )totalbytes);
    if (bytesleft < 4096) {
      blocksize = bytesleft;
    } else {
      blocksize = 4096;
    }
    bytesread = r_read(fromfd, (void *)(buf), (unsigned int )blocksize);
    if (bytesread < 0) {
      return (-1);
    }
    if (bytesread == 0) {
      return (totalbytes);
    }
    tmp = r_write(tofd, (void *)(buf), (unsigned int )bytesread);
    if (tmp < 0) {
      return (-1);
    }
    totalbytes += bytesread;
  }
  return (totalbytes);
}
}
int fcopyblock(FILE *fromfp , int tofd , size_t size ) 
{ char buf[4096] ;
  int bytesread ;
  int totalbytes ;
  int blocksize ;
  int bytesleft ;
  int tmp ;
  ssize_t tmp___0 ;
  int tmp___1 ;

  {
  totalbytes = 0;
  blocksize = 4096;
  while ((size_t )totalbytes < size) {
    bytesleft = (int )(size - (size_t )totalbytes);
    if (bytesleft < 4096) {
      blocksize = bytesleft;
    } else {
      blocksize = 4096;
    }
    bytesread = (int )fread((void * __restrict  )(buf), 1U, (unsigned int )blocksize,
                            (FILE * __restrict  )fromfp);
    if (bytesread < blocksize) {
      tmp = ferror(fromfp);
      if (tmp) {
        return (-1);
      }
    }
    tmp___0 = r_write(tofd, (void *)(buf), (unsigned int )bytesread);
    if (tmp___0 < 0) {
      return (-1);
    }
    tmp___1 = feof(fromfp);
    if (tmp___1) {
      return (0);
    }
    totalbytes += bytesread;
  }
  return (totalbytes);
}
}
#pragma merger(0,"/tmp/cil-DTsKz6xq.i","-g -g -O2")
static query_field_t const   *find_field(char const   *name , query_field_t const   *fields ) ;
static int arith_query(query_node_t *query , void *target ) ;
static int string_query(query_node_t *query , void *target ) ;
static query_node_t *match_specifier(char const   *query , char const   **cursor ,
                                     query_field_t const   *fields ) ;
static query_node_t *group_match(char const   *query , char const   **pcursor , query_field_t const   *fields ) ;
static query_node_t *single_match(char const   *query , char const   **pcursor , query_field_t const   *fields ) ;
static int get_field_name(char const   **pcursor , char const   *query , char *name ,
                          int len ) ;
static query_node_t *match_number(query_field_t const   *field , char not , char opcode ,
                                  char const   **pcursor , char const   *query ) ;
static query_node_t *match_string(query_field_t const   *field , char not , char opcode ,
                                  char const   **pcursor , char const   *query ) ;
char *query_unescape(char const   *src ) ;
query_node_t *query_build(char const   *query , query_field_t const   *fields ) 
{ query_node_t *left ;
  char *raw ;
  char *tmp ;
  char const   *cursor ;
  query_node_t *right ;
  query_type_t join ;
  query_node_t *con ;

  {
  left = (query_node_t *)0;
  tmp = query_unescape(query);
  raw = tmp;
  cursor = (char const   *)raw;
  right = (query_node_t *)0;
  left = match_specifier(query, & cursor, fields);
  if ((unsigned int )((query_node_t *)0) == (unsigned int )left) {
    goto error;
  }
  while ((*cursor)) {
    switch ((int )(*cursor)) {
    case 43: ;
    case 32: 
    join = 1;
    break;
    case 44: 
    join = 2;
    break;
    default: 
    err_log(1, 16U, (char *)"Illegal character \'%c\' (0%o) at index %d: %s\n", (*cursor),
            (*cursor), cursor - (char const   *)raw, raw);
    goto error;
    }
    cursor ++;
    right = match_specifier((char const   *)raw, & cursor, fields);
    if ((unsigned int )((query_node_t *)0) == (unsigned int )right) {
      goto error;
    }
    con = (query_node_t *)calloc(1U, sizeof((*con)));
    con->type = join;
    con->left.node = left;
    con->right.node = right;
    left = con;
  }
  if ((unsigned int )query != (unsigned int )raw) {
    free((void *)raw);
  }
  return (left);
  error: 
  if ((unsigned int )left != (unsigned int )((query_node_t *)0)) {
    query_free(left);
  }
  if ((unsigned int )raw != (unsigned int )query) {
    free((void *)raw);
  }
  return ((query_node_t *)((void *)0));
}
}
static query_node_t *match_specifier(char const   *query , char const   **cursor ,
                                     query_field_t const   *fields ) 
{ query_node_t *tmp ;
  query_node_t *tmp___0 ;

  {
  switch ((int )(*((*cursor)))) {
  case 39: 
  tmp = single_match(query, cursor, fields);
  return (tmp);
  case 40: 
  tmp___0 = group_match(query, cursor, fields);
  return (tmp___0);
  }
  err_log(1, 16U, (char *)"Illegal character \'%c\' (0%o) at index %d: %s\n", (*((*cursor))),
          (*((*cursor))), (*cursor) - query, query);
  return ((query_node_t *)((void *)0));
}
}
static query_node_t *group_match(char const   *query , char const   **pcursor , query_field_t const   *fields ) 
{ query_node_t *left ;
  query_node_t *right ;
  query_node_t *join ;
  query_type_t opcode ;
  char const   *cursor ;

  {
  left = (query_node_t *)0;
  right = (query_node_t *)0;
  join = (query_node_t *)0;
  cursor = (*pcursor);
  cursor ++;
  left = single_match(query, & cursor, fields);
  if ((unsigned int )((query_node_t *)0) == (unsigned int )left) {
    return ((query_node_t *)((void *)0));
  }
  switch ((int )(*cursor)) {
  case 43: ;
  case 32: 
  opcode = 1;
  break;
  case 44: 
  opcode = 2;
  break;
  default: 
  err_log(1, 16U, (char *)"Illegal character \'%c\' (0%o) at index %d: %s\n", (*cursor),
          (*cursor), cursor - query, query);
  goto error;
  }
  right = single_match(query, & cursor, fields);
  if ((unsigned int )((query_node_t *)0) == (unsigned int )right) {
    goto error;
  }
  if ((int const   )(*cursor) != 41) {
    err_log(1, 16U, (char *)"Illegal character \'%c\' (0%o) at index %d: %s\n", (*cursor),
            (*cursor), cursor - query, query);
    goto error;
  }
  (*pcursor) = cursor + 1;
  join = (query_node_t *)calloc(1U, sizeof((*join)));
  join->type = opcode;
  join->left.node = left;
  join->right.node = right;
  return (join);
  error: 
  if ((unsigned int )((query_node_t *)0) != (unsigned int )left) {
    query_free(left);
  }
  if ((unsigned int )((query_node_t *)0) != (unsigned int )right) {
    query_free(right);
  }
  return ((query_node_t *)0);
}
}
static query_node_t *single_match(char const   *query , char const   **pcursor , query_field_t const   *fields ) 
{ char fname[64] ;
  query_field_t const   *field ;
  char not ;
  char op ;
  query_node_t *node ;
  int tmp ;
  char *tmp___3 ;
  int tmp___5 ;

  {
  not = (char)0;
  op = (char)0;
  node = (query_node_t *)0;
  (*pcursor) ++;
  tmp = get_field_name(pcursor, query, fname, (int )sizeof(fname));
  if (! tmp) {
    return ((query_node_t *)((void *)0));
  }
  if ((int const   )(*((*pcursor))) == 33) {
    not = (char )'!';
    (*pcursor) ++;
  }
  tmp___5 = __builtin_constant_p((*((*pcursor))));
  if (tmp___5) {
    if ((int const   )(*((*pcursor))) == 0) {
      tmp___3 = (char *)__rawmemchr((void const   *)":+-", (int )(*((*pcursor))));
    } else {
      goto _L;
    }
  } else {
    _L: /* CIL Label */ 
    tmp___3 = strchr(":+-", (int )(*((*pcursor))));
  }
  if (tmp___3) {
    op = (char )(*((*pcursor)));
    (*pcursor) ++;
  } else {
    err_log(1, 16U, (char *)"Illegal Operator: %c (0%o) at index %d: %s\n", (*((*pcursor))),
            (*((*pcursor))), (*pcursor) - query, query);
    return ((query_node_t *)((void *)0));
  }
  field = find_field((char const   *)(fname), fields);
  if ((unsigned int )((query_field_t const   *)0) == (unsigned int )field) {
    err_log(1, 16U, (char *)"Unknown field: %s\n", fname);
    return ((query_node_t *)((void *)0));
  }
  switch ((int )field->type) {
  case 15: ;
  case 16: 
  node = match_number(field, not, op, pcursor, query);
  break;
  case 17: 
  node = match_string(field, not, op, pcursor, query);
  break;
  default: 
  err_log(1, 16U, (char *)"Invalid field type: %d\n", field->type);
  break;
  }
  if ((int const   )(*((*pcursor))) != 39) {
    err_log(1, 16U, (char *)"Illegal Character: %c (0%o) index %d: %s\n", (*((*pcursor))),
            (*((*pcursor))), (*pcursor) - query, query);
    query_free(node);
    node = (query_node_t *)0;
  } else {
    (*pcursor) ++;
  }
  return (node);
}
}
extern int ( /* missing proto */  isalpha)() ;
static int get_field_name(char const   **pcursor , char const   *query , char *name ,
                          int len ) 
{ char const   *cursor ;
  int tmp ;
  char *tmp___0 ;
  char const   *tmp___1 ;
  int tmp___2 ;

  {
  cursor = (*pcursor);
  tmp = isalpha((*cursor));
  if (! tmp) {
    return (0);
  }
  while (1) {
    tmp___2 = isalpha((*cursor));
    if (tmp___2) {
      goto _L;
    } else {
      if ((int const   )(*cursor) == 46) {
        _L: /* CIL Label */ ;
      } else {
        break;
      }
    }
    len --;
    if (len <= 0) {
      err_log(1, 16U, (char *)"token length exceeded at offset %d: %s\n", cursor -
                                                                          query, query);
      return (0);
    }
    tmp___0 = name;
    name ++;
    tmp___1 = cursor;
    cursor ++;
    (*tmp___0) = (char )(*tmp___1);
  }
  (*pcursor) = cursor;
  (*name) = (char)0;
  return (1);
}
}
static query_node_t *match_number(query_field_t const   *field , char not , char opcode ,
                                  char const   **pcursor , char const   *query ) 
{ query_node_t *node ;
  query_node_t *tmp ;

  {
  tmp = (query_node_t *)calloc(1U, sizeof((*node)));
  node = tmp;
  switch ((int )opcode) {
  case 58: ;
  if (not) {
    node->type = 5;
  } else {
    node->type = 4;
  }
  break;
  case 43: ;
  case 32: ;
  if (not) {
    node->type = 6;
  } else {
    node->type = 9;
  }
  break;
  case 45: ;
  if (not) {
    node->type = 8;
  } else {
    node->type = 7;
  }
  break;
  }
  node->left.field = field;
  switch ((int )field->type) {
  case 15: 
  node->right.i32 = (int )strtol__extinline((char const   * __restrict  )(*pcursor),
                                            (char ** __restrict  )((char **)pcursor),
                                            10);
  break;
  case 16: 
  node->right.i64 = strtoll__extinline((char const   * __restrict  )(*pcursor), (char ** __restrict  )((char **)pcursor),
                                       10);
  break;
  }
  if ((int const   )(*((*pcursor))) != 39) {
    err_log(1, 16U, (char *)"Illegal char in number \'%c\' (0%o) at index %d: %s\n",
            (*((*pcursor))), (*((*pcursor))), (*pcursor) - query, query);
    free((void *)node);
    return ((query_node_t *)0);
  }
  return (node);
}
}
static query_node_t *match_string(query_field_t const   *field , char not , char opcode ,
                                  char const   **pcursor , char const   *query ) 
{ char match[64] ;
  char *dst ;
  int left ;
  char const   *cursor ;
  query_type_t op ;
  query_node_t *node ;
  char *tmp ;
  char const   *tmp___0 ;
  char *tmp___1 ;
  char const   *tmp___2 ;
  size_t __len___2 ;
  size_t tmp___20 ;
  char *__retval___2 ;
  char *tmp___21 ;
  int tmp___23 ;

  {
  dst = match;
  left = (int )sizeof(match);
  cursor = (*pcursor);
  op = 10;
  if ((int )opcode != 58) {
    err_log(1, 16U, (char *)"Illegal operation on string: %c at index %d: %s\n", opcode,
            (cursor - query) - 1);
    return ((query_node_t *)((void *)0));
  }
  if ((int const   )(*cursor) == 42) {
    op = 12;
    cursor ++;
  }
  while (1) {
    if ((*cursor)) {
      if (! ((int const   )(*cursor) != 39)) {
        goto _L;
      }
    } else {
      _L: /* CIL Label */ 
      break;
    }
    left --;
    if (left == 0) {
      err_log(1, 16U, (char *)"string too long at index %d: %s\n", cursor - query,
              query);
      return ((query_node_t *)((void *)0));
    }
    if ((int const   )(*cursor) == 92) {
      cursor ++;
      switch ((int )(*cursor)) {
      case 42: ;
      case 39: ;
      case 92: 
      tmp = dst;
      dst ++;
      tmp___0 = cursor;
      cursor ++;
      (*tmp) = (char )(*tmp___0);
      break;
      default: 
      err_log(1, 16U, (char *)"Illegal escape: %c (0%o) at index %d: %s\n", (*cursor),
              (*cursor), cursor - query, query);
      return ((query_node_t *)((void *)0));
      }
    } else {
      tmp___1 = dst;
      dst ++;
      tmp___2 = cursor;
      cursor ++;
      (*tmp___1) = (char )(*tmp___2);
    }
  }
  if ((int )(*(dst + -1)) == 42) {
    if ((int )op == 10) {
      op = 11;
    } else {
      op = 13;
    }
    dst --;
  }
  (*dst) = (char)0;
  node = (query_node_t *)calloc(1U, sizeof((*node)));
  node->type = op;
  node->left.field = field;
  tmp___23 = __builtin_constant_p(match);
  if (tmp___23) {
    if ((unsigned int )((void const   *)(match + 1)) - (unsigned int )((void const   *)(match)) ==
        1U) {
      if ((int const   )(*((char const   *)(match) + 0)) == 0) {
        node->right.str = (char *)calloc(1U, 1U);
      } else {
        tmp___20 = strlen((char const   *)(match));
        __len___2 = tmp___20 + 1U;
        tmp___21 = (char *)malloc(__len___2);
        __retval___2 = tmp___21;
        if ((unsigned int )__retval___2 != (unsigned int )((void *)0)) {
          __retval___2 = (char *)memcpy((void * __restrict  )__retval___2, (void const   * __restrict  )(match),
                                        __len___2);
        }
        node->right.str = __retval___2;
      }
    } else {
      goto _L___0;
    }
  } else {
    _L___0: /* CIL Label */ 
    node->right.str = __strdup((char const   *)(match));
  }
  (*pcursor) = cursor;
  return (node);
}
}
int query_test(query_node_t *query , void *target ) 
{ int tmp ;
  int tmp___0 ;
  int tmp___1 ;
  int tmp___2 ;
  int tmp___3 ;
  int tmp___4 ;
  int tmp___5 ;
  int tmp___6 ;
  int tmp___7 ;
  int tmp___8 ;

  {
  switch ((int )query->type) {
  case 1: 
  tmp = query_test(query->left.node, target);
  if (tmp) {
    tmp___0 = query_test(query->right.node, target);
    if (tmp___0) {
      tmp___1 = 1;
    } else {
      goto _L;
    }
  } else {
    _L: /* CIL Label */ 
    tmp___1 = 0;
  }
  return (tmp___1);
  case 2: 
  tmp___2 = query_test(query->left.node, target);
  if (tmp___2) {
    goto _L___0;
  } else {
    tmp___3 = query_test(query->right.node, target);
    if (tmp___3) {
      _L___0: /* CIL Label */ 
      tmp___4 = 1;
    } else {
      tmp___4 = 0;
    }
  }
  return (tmp___4);
  case 3: 
  tmp___5 = query_test(query->left.node, target);
  if (tmp___5) {
    tmp___6 = 0;
  } else {
    tmp___6 = 1;
  }
  return (tmp___6);
  case 4: ;
  case 5: ;
  case 6: ;
  case 7: ;
  case 8: ;
  case 9: 
  tmp___7 = arith_query(query, target);
  return (tmp___7);
  case 10: ;
  case 11: ;
  case 12: ;
  case 13: 
  tmp___8 = string_query(query, target);
  return (tmp___8);
  break;
  case 14: ;
  return (query->left.constant);
  }
  return (0);
}
}
void query_free(query_node_t *query ) 
{ 

  {
  if ((unsigned int )((query_node_t *)0) != (unsigned int )query) {
    switch ((int )query->type) {
    case 1: ;
    case 2: 
    query_free(query->left.node);
    query_free(query->right.node);
    break;
    case 3: 
    query_free(query->left.node);
    break;
    case 4: ;
    case 5: ;
    case 6: ;
    case 7: ;
    case 8: ;
    case 9: ;
    break;
    case 10: ;
    case 11: ;
    case 12: ;
    case 13: 
    free((void *)query->right.str);
    break;
    case 14: ;
    break;
    default: 
    err_log(1, 16U, (char *)"Illegal query type: %d\n", query->type);
    break;
    }
    free((void *)query);
  }
  return;
}
}
static query_field_t const   *find_field(char const   *name , query_field_t const   *fields ) 
{ int tmp ;

  {
  while (1) {
    if (fields->name) {
      tmp = strcasecmp(fields->name, name);
      if (! tmp) {
        goto _L;
      }
    } else {
      _L: /* CIL Label */ 
      break;
    }
    fields ++;
  }
  if ((unsigned int )fields->name == (unsigned int )((char const   *)0)) {
    err_log(1, 16U, (char *)"Illegal query field: %s\n", name);
    return ((query_field_t const   *)((void *)0));
  }
  return (fields);
}
}
static int arith_query(query_node_t *query , void *target ) 
{ query_field_t const   *field ;
  int tv ;
  long long tv___0 ;

  {
  field = query->left.field;
  switch ((int )field->type) {
  case 15: 
  tv = (*((int *)((unsigned int )target + (unsigned int )field->offset)));
  tv -= query->right.i32;
  switch ((int )query->type) {
  case 4: ;
  return (tv == 0);
  case 5: ;
  return (tv != 0);
  case 6: ;
  return (tv <= 0);
  case 7: ;
  return (tv < 0);
  case 8: ;
  return (tv >= 0);
  case 9: ;
  return (tv > 0);
  default: 
  err_log(1, 16U, (char *)"illegal query type: %d\n", query->type);
  break;
  }
  break;
  case 16: 
  tv___0 = (*((long long *)((unsigned int )target + (unsigned int )field->offset)));
  tv___0 -= (long long )query->right.i32;
  switch ((int )query->type) {
  case 4: ;
  return (tv___0 == 0LL);
  case 5: ;
  return (tv___0 != 0LL);
  case 6: ;
  return (tv___0 <= 0LL);
  case 7: ;
  return (tv___0 < 0LL);
  case 8: ;
  return (tv___0 >= 0LL);
  case 9: ;
  return (tv___0 > 0LL);
  default: 
  err_log(1, 16U, (char *)"illegal query type: %d\n", query->type);
  break;
  }
  break;
  default: 
  err_log(1, 16U, (char *)"illegal field type: %d\n", field->type);
  break;
  }
  return (0);
}
}
static int string_query(query_node_t *query , void *target ) 
{ query_field_t const   *field ;
  char const   *ts ;
  size_t tmp ;
  int tmp___0 ;
  int tmp___1 ;
  size_t tmp___2 ;
  int tmp___3 ;
  int tmp___4 ;
  int start ;
  size_t tmp___5 ;
  size_t tmp___6 ;
  int tmp___7 ;
  int tmp___8 ;
  int tmp___9 ;

  {
  field = query->left.field;
  if ((int )field->type != 17) {
    err_log(1, 16U, (char *)"illegal field type: %d\n", field->type);
    return (0);
  }
  ts = (*((char const   **)((unsigned int )target + (unsigned int )field->offset)));
  if ((unsigned int )((char const   *)0) == (unsigned int )ts) {
    tmp = strlen((char const   *)query->right.str);
    return (tmp == 0U);
  }
  switch ((int )query->type) {
  case 10: 
  tmp___0 = strcasecmp((char const   *)query->right.str, ts);
  if (tmp___0) {
    tmp___1 = 0;
  } else {
    tmp___1 = 1;
  }
  return (tmp___1);
  case 11: 
  tmp___2 = strlen((char const   *)query->right.str);
  tmp___3 = strncasecmp((char const   *)query->right.str, ts, tmp___2);
  if (tmp___3) {
    tmp___4 = 0;
  } else {
    tmp___4 = 1;
  }
  return (tmp___4);
  case 12: 
  tmp___5 = strlen(ts);
  tmp___6 = strlen((char const   *)query->right.str);
  start = (int )(tmp___5 - tmp___6);
  if (start < 0) {
    return (0);
  }
  tmp___7 = strcasecmp((char const   *)query->right.str, ts + start);
  if (tmp___7) {
    tmp___8 = 0;
  } else {
    tmp___8 = 1;
  }
  return (tmp___8);
  case 13: 
  tmp___9 = strcasestr(ts, query->right.str);
  return (tmp___9);
  default: 
  err_log(1, 16U, (char *)"Illegal query type: %d\n", query->type);
  break;
  }
  return (0);
}
}
static char const   *labels[15]  = 
  {      "NOP",      "and",      "or",      "not", 
        "==",      "!=",      "<=",      "<", 
        ">=",      ">",      "eq",      "beginswith", 
        "endwith",      "contains",      "constant"};
void query_dump(FILE *fp , query_node_t *query , int depth ) 
{ char const   *tmp ;

  {
  return;
  switch ((int )query->type) {
  case 1: ;
  case 2: 
  fprintf((FILE * __restrict  )fp, (char const   * __restrict  )"%*s(%s\n", depth,
          "", labels[query->type]);
  query_dump(fp, query->left.node, depth + 4);
  query_dump(fp, query->right.node, depth + 4);
  fprintf((FILE * __restrict  )fp, (char const   * __restrict  )"%*s)\n", depth, "");
  break;
  case 3: 
  fprintf((FILE * __restrict  )fp, (char const   * __restrict  )"%*s(not\n", depth,
          "");
  query_dump(fp, query->left.node, depth + 4);
  fprintf((FILE * __restrict  )fp, (char const   * __restrict  )"%*s)\n", depth, "");
  break;
  case 4: ;
  case 5: ;
  case 6: ;
  case 7: ;
  case 8: ;
  case 9: ;
  if ((int )(query->left.field)->type == 15) {
    fprintf((FILE * __restrict  )fp, (char const   * __restrict  )"%*s(%s %s %d)\n",
            depth, "", labels[query->type], (query->left.field)->name, query->right.i32);
  } else {
    fprintf((FILE * __restrict  )fp, (char const   * __restrict  )"%*s(%s %s %q)\n",
            depth, "", labels[query->type], (query->left.field)->name, query->right.i64);
  }
  break;
  case 10: ;
  case 11: ;
  case 12: ;
  case 13: 
  fprintf((FILE * __restrict  )fp, (char const   * __restrict  )"%*s(%s %s \"%s\")\n",
          depth, "", labels[query->type], (query->left.field)->name, query->right.str);
  break;
  case 14: ;
  if (query->left.constant) {
    tmp = "true";
  } else {
    tmp = "false";
  }
  fprintf((FILE * __restrict  )fp, (char const   * __restrict  )"%*s(%s)\n", depth,
          "", tmp);
  break;
  }
}
}
extern int ( /* missing proto */  tolower)() ;
extern int ( /* missing proto */  isdigit)() ;
char *query_unescape(char const   *src ) 
{ char *copy ;
  size_t tmp ;
  char *tmp___0 ;
  char *dst ;
  int val ;
  int tmp___1 ;
  int tmp___2 ;
  int tmp___3 ;
  int tmp___4 ;
  char *tmp___5 ;
  char *tmp___6 ;
  char const   *tmp___7 ;
  char *tmp___8 ;

  {
  tmp = strlen(src);
  tmp___0 = (char *)malloc(tmp + 1U);
  copy = tmp___0;
  dst = copy;
  while ((*src)) {
    if ((int const   )(*src) == 37) {
      val = 0;
      src ++;
      if ((*src)) {
        tmp___2 = isdigit((*src));
        if (tmp___2) {
          val = (val * 16 + (int )(*src)) - 48;
        } else {
          tmp___1 = tolower((*src));
          val = ((val * 16 + tmp___1) - 97) + 10;
        }
      }
      src ++;
      if ((*src)) {
        tmp___4 = isdigit((*src));
        if (tmp___4) {
          val = (val * 16 + (int )(*src)) - 48;
        } else {
          tmp___3 = tolower((*src));
          val = ((val * 16 + tmp___3) - 97) + 10;
        }
      }
      src ++;
      tmp___5 = dst;
      dst ++;
      (*tmp___5) = (char )val;
    } else {
      tmp___6 = dst;
      dst ++;
      tmp___7 = src;
      src ++;
      (*tmp___6) = (char )(*tmp___7);
    }
  }
  tmp___8 = dst;
  dst ++;
  (*tmp___8) = (char)0;
  return (copy);
}
}
#pragma merger(0,"/tmp/cil-DhpSO6q2.i","-g -g -O2")
void LogMsg(char const   *format  , ...) ;
union __anonunion_mDNSOpaque16_10  const  zeroIPPort ;
union __anonunion_mDNSOpaque32_11  const  zeroIPAddr ;
union __anonunion_mDNSOpaque128_12  const  zerov6Addr ;
union __anonunion_mDNSOpaque32_11  const  onesIPv4Addr ;
union __anonunion_mDNSOpaque128_12  const  onesIPv6Addr ;
struct mDNSInterfaceID_dummystruct * const  mDNSInterface_Any ;
union __anonunion_mDNSOpaque16_10  const  UnicastDNSPort ;
union __anonunion_mDNSOpaque16_10  const  MulticastDNSPort ;
union __anonunion_mDNSOpaque32_11  const  AllDNSAdminGroup ;
union __anonunion_mDNSOpaque32_11  const  AllDNSLinkGroup ;
union __anonunion_mDNSOpaque128_12  const  AllDNSLinkGroupv6 ;
struct __anonstruct_mDNSAddr_14  const  AllDNSLinkGroup_v4 ;
struct __anonstruct_mDNSAddr_14  const  AllDNSLinkGroup_v6 ;
mStatus mDNS_Init(mDNS *m , mDNS_PlatformSupport *p , CacheRecord *rrcachestorage ,
                  mDNSu32 rrcachesize , mDNSBool AdvertiseLocalAddresses , mDNSCallback *Callback ,
                  void *Context ) ;
void mDNS_GrowCache(mDNS *m , CacheRecord *storage , mDNSu32 numrecords ) ;
void mDNS_Close(mDNS *m ) ;
mDNSs32 mDNS_Execute(mDNS *m ) ;
mStatus mDNS_Register(mDNS *m , AuthRecord *rr ) ;
mStatus mDNS_Update(mDNS *m , AuthRecord *rr , mDNSu32 newttl , mDNSu16 newrdlength ,
                    RData *newrdata , mDNSRecordUpdateCallback *Callback ) ;
mStatus mDNS_Deregister(mDNS *m , AuthRecord *rr ) ;
mStatus mDNS_StartQuery(mDNS *m , DNSQuestion *question ) ;
mStatus mDNS_StopQuery(mDNS *m , DNSQuestion *question ) ;
mStatus mDNS_Reconfirm(mDNS *m , CacheRecord *rr ) ;
mStatus mDNS_ReconfirmByValue(mDNS *m , ResourceRecord *rr ) ;
int mDNSPlatformOneSecond ;
mDNSs32 mDNSPlatformTimeNow(void) ;
void mDNS_SetupResourceRecord(AuthRecord *rr , RData *RDataStorage , mDNSInterfaceID InterfaceID ,
                              mDNSu16 rrtype , mDNSu32 ttl , mDNSu8 RecordType , mDNSRecordCallback *Callback ,
                              void *Context ) ;
mStatus mDNS_RegisterService(mDNS *m , ServiceRecordSet *sr , domainlabel const   *name ,
                             domainname const   *type , domainname const   *domain ,
                             domainname const   *host , mDNSIPPort port , mDNSu8 const   *txtinfo ,
                             mDNSu16 txtlen , AuthRecord *SubTypes , mDNSu32 NumSubTypes ,
                             mDNSInterfaceID InterfaceID , mDNSServiceCallback *Callback ,
                             void *Context ) ;
mStatus mDNS_AddRecordToService(mDNS *m , ServiceRecordSet *sr , ExtraResourceRecord *extra ,
                                RData *rdata , mDNSu32 ttl ) ;
mStatus mDNS_RemoveRecordFromService(mDNS *m , ServiceRecordSet *sr , ExtraResourceRecord *extra ) ;
mStatus mDNS_RenameAndReregisterService(mDNS *m , ServiceRecordSet *sr , domainlabel const   *newname ) ;
mStatus mDNS_DeregisterService(mDNS *m , ServiceRecordSet *sr ) ;
mStatus mDNS_RegisterNoSuchService(mDNS *m , AuthRecord *rr , domainlabel const   *name ,
                                   domainname const   *type , domainname const   *domain ,
                                   domainname const   *host , mDNSInterfaceID InterfaceID ,
                                   mDNSRecordCallback *Callback , void *Context ) ;
mStatus mDNS_StartBrowse(mDNS *m , DNSQuestion *question , domainname const   *srv ,
                         domainname const   *domain , mDNSInterfaceID InterfaceID ,
                         mDNSQuestionCallback *Callback , void *Context ) ;
mStatus mDNS_StartResolveService(mDNS *m , ServiceInfoQuery *query , ServiceInfo *info ,
                                 mDNSServiceInfoQueryCallback *Callback , void *Context ) ;
void mDNS_StopResolveService(mDNS *m , ServiceInfoQuery *query ) ;
mStatus mDNS_GetDomains(mDNS *m , DNSQuestion *question , mDNS_DomainType DomainType ,
                        mDNSInterfaceID InterfaceID , mDNSQuestionCallback *Callback ,
                        void *Context ) ;
mStatus mDNS_AdvertiseDomains(mDNS *m , AuthRecord *rr , mDNS_DomainType DomainType ,
                              mDNSInterfaceID InterfaceID , char *domname ) ;
mDNSBool SameDomainLabel(mDNSu8 const   *a , mDNSu8 const   *b ) ;
mDNSBool SameDomainName(domainname const   *d1 , domainname const   *d2 ) ;
mDNSu16 DomainNameLength(domainname const   *name ) ;
mDNSu8 *AppendLiteralLabelString(domainname *name , char const   *cstr ) ;
mDNSu8 *AppendDNSNameString(domainname *name , char const   *cstr ) ;
mDNSu8 *AppendDomainLabel(domainname *name , domainlabel const   *label ) ;
mDNSu8 *AppendDomainName(domainname *name , domainname const   *append ) ;
mDNSBool MakeDomainLabelFromLiteralString(domainlabel *label , char const   *cstr ) ;
mDNSu8 *MakeDomainNameFromDNSNameString(domainname *name , char const   *cstr ) ;
char *ConvertDomainLabelToCString_withescape(domainlabel const   *label , char *ptr ,
                                             char esc ) ;
char *ConvertDomainNameToCString_withescape(domainname const   *name , char *ptr ,
                                            char esc ) ;
void ConvertUTF8PstringToRFC1034HostLabel(mDNSu8 const   *UTF8Name , domainlabel *hostlabel ) ;
mDNSu8 *ConstructServiceName(domainname *fqdn , domainlabel const   *name , domainname const   *type ,
                             domainname const   *domain ) ;
mDNSBool DeconstructServiceName(domainname const   *fqdn , domainlabel *name , domainname *type ,
                                domainname *domain ) ;
mDNSu32 mDNS_vsnprintf(char *sbuffer , mDNSu32 buflen , char const   *fmt , va_list arg ) ;
mDNSu32 mDNS_snprintf(char *sbuffer , mDNSu32 buflen , char const   *fmt  , ...) ;
char *DNSTypeName(mDNSu16 rrtype ) ;
char *GetRRDisplayString_rdb(mDNS *m , ResourceRecord const   *rr , RDataBody *rd ) ;
mDNSBool mDNSSameAddress(mDNSAddr const   *ip1 , mDNSAddr const   *ip2 ) ;
void IncrementLabelSuffix(domainlabel *name , mDNSBool RichText ) ;
mStatus mDNSPlatformInit(mDNS *m ) ;
void mDNSPlatformClose(mDNS *m ) ;
mStatus mDNSPlatformSendUDP(mDNS const   *m , DNSMessage const   *msg , mDNSu8 const   *end ,
                            mDNSInterfaceID InterfaceID , mDNSIPPort srcPort , mDNSAddr const   *dst ,
                            mDNSIPPort dstPort ) ;
void mDNSPlatformLock(mDNS const   *m ) ;
void mDNSPlatformUnlock(mDNS const   *m ) ;
void mDNSPlatformMemCopy(void const   *src , void *dst , mDNSu32 len ) ;
mDNSBool mDNSPlatformMemSame(void const   *src , void const   *dst , mDNSu32 len ) ;
void mDNSPlatformMemZero(void *dst , mDNSu32 len ) ;
void *mDNSPlatformMemAllocate(mDNSu32 len ) ;
void mDNSPlatformMemFree(void *mem ) ;
mStatus mDNSPlatformTimeInit(mDNSs32 *timenow ) ;
void mDNS_GenerateFQDN(mDNS *m ) ;
mStatus mDNS_RegisterInterface(mDNS *m , NetworkInterfaceInfo *set ) ;
void mDNS_DeregisterInterface(mDNS *m , NetworkInterfaceInfo *set ) ;
void mDNSCoreInitComplete(mDNS *m , mStatus result ) ;
void mDNSCoreReceive(mDNS *m , DNSMessage *msg , mDNSu8 const   *end , mDNSAddr const   *srcaddr ,
                     mDNSIPPort srcport , mDNSAddr const   *dstaddr , mDNSIPPort dstport ,
                     mDNSInterfaceID InterfaceID , mDNSu8 ttl ) ;
void mDNSCoreMachineSleep(mDNS *m , mDNSBool sleepstate ) ;
ResourceRecord const   zeroRR  ;
union __anonunion_mDNSOpaque16_10  const  zeroIPPort  =    {.b = {(mDNSu8 )0, (unsigned char)0}};
union __anonunion_mDNSOpaque32_11  const  zeroIPAddr  =    {.b = {(mDNSu8 )0, (unsigned char)0, (unsigned char)0, (unsigned char)0}};
union __anonunion_mDNSOpaque128_12  const  zerov6Addr  =    {.b = {(mDNSu8 )0, (unsigned char)0, (unsigned char)0, (unsigned char)0, (unsigned char)0,
          (unsigned char)0, (unsigned char)0, (unsigned char)0, (unsigned char)0,
          (unsigned char)0, (unsigned char)0, (unsigned char)0, (unsigned char)0,
          (unsigned char)0, (unsigned char)0, (unsigned char)0}};
union __anonunion_mDNSOpaque32_11  const  onesIPv4Addr  =    {.b = {(mDNSu8 )255, (mDNSu8 )255, (mDNSu8 )255, (mDNSu8 )255}};
union __anonunion_mDNSOpaque128_12  const  onesIPv6Addr  =    {.b = {(mDNSu8 )255, (mDNSu8 )255, (mDNSu8 )255, (mDNSu8 )255, (mDNSu8 )255, (mDNSu8 )255,
          (mDNSu8 )255, (mDNSu8 )255, (mDNSu8 )255, (mDNSu8 )255, (mDNSu8 )255, (mDNSu8 )255,
          (mDNSu8 )255, (mDNSu8 )255, (mDNSu8 )255, (mDNSu8 )255}};
static struct __anonstruct_mDNSAddr_14  const  zeroAddr  =    {(mDNSs32 )0, {.v6 = {.b = {(mDNSu8 )0, (unsigned char)0, (unsigned char)0, (unsigned char)0,
                               (unsigned char)0, (unsigned char)0, (unsigned char)0,
                               (unsigned char)0, (unsigned char)0, (unsigned char)0,
                               (unsigned char)0, (unsigned char)0, (unsigned char)0,
                               (unsigned char)0, (unsigned char)0, (unsigned char)0}}}};
struct mDNSInterfaceID_dummystruct * const  mDNSInterface_Any  =    (mDNSInterfaceID const   )0;
static struct mDNSInterfaceID_dummystruct * const  mDNSInterfaceMark  =    (mDNSInterfaceID const   )((struct mDNSInterfaceID_dummystruct *)(~ 0));
union __anonunion_mDNSOpaque16_10  const  UnicastDNSPort  =    {.b = {(mDNSu8 )0, (mDNSu8 )53}};
union __anonunion_mDNSOpaque16_10  const  MulticastDNSPort  =    {.b = {(mDNSu8 )20, (mDNSu8 )233}};
union __anonunion_mDNSOpaque32_11  const  AllDNSAdminGroup  =    {.b = {(mDNSu8 )239, (mDNSu8 )255, (mDNSu8 )255, (mDNSu8 )251}};
union __anonunion_mDNSOpaque32_11  const  AllDNSLinkGroup  =    {.b = {(mDNSu8 )224, (mDNSu8 )0, (mDNSu8 )0, (mDNSu8 )251}};
union __anonunion_mDNSOpaque128_12  const  AllDNSLinkGroupv6  =    {.b = {(mDNSu8 )255, (mDNSu8 )2, (mDNSu8 )0, (mDNSu8 )0, (mDNSu8 )0, (mDNSu8 )0,
          (mDNSu8 )0, (mDNSu8 )0, (mDNSu8 )0, (mDNSu8 )0, (mDNSu8 )0, (mDNSu8 )0,
          (mDNSu8 )0, (mDNSu8 )0, (mDNSu8 )0, (mDNSu8 )251}};
struct __anonstruct_mDNSAddr_14  const  AllDNSLinkGroup_v4  =    {(mDNSs32 )4, {.v6 = {.b = {(mDNSu8 )224, (mDNSu8 )0, (mDNSu8 )0, (mDNSu8 )251,
                               (unsigned char)0, (unsigned char)0, (unsigned char)0,
                               (unsigned char)0, (unsigned char)0, (unsigned char)0,
                               (unsigned char)0, (unsigned char)0, (unsigned char)0,
                               (unsigned char)0, (unsigned char)0, (unsigned char)0}}}};
struct __anonstruct_mDNSAddr_14  const  AllDNSLinkGroup_v6  =    {(mDNSs32 )6, {.v6 = {.b = {(mDNSu8 )255, (mDNSu8 )2, (mDNSu8 )0, (mDNSu8 )0, (mDNSu8 )0,
                               (mDNSu8 )0, (mDNSu8 )0, (mDNSu8 )0, (mDNSu8 )0, (mDNSu8 )0,
                               (mDNSu8 )0, (mDNSu8 )0, (mDNSu8 )0, (mDNSu8 )0, (mDNSu8 )0,
                               (mDNSu8 )251}}}};
static union __anonunion_mDNSOpaque16_10  const  zeroID  =    {.b = {(mDNSu8 )0, (mDNSu8 )0}};
static union __anonunion_mDNSOpaque16_10  const  QueryFlags  =    {.b = {(mDNSu8 )0, (mDNSu8 )0}};
static union __anonunion_mDNSOpaque16_10  const  ResponseFlags  =    {.b = {(mDNSu8 )132, (mDNSu8 )0}};
static char const   * const  mDNS_DomainTypeNames[4]  = {      (char const   * const  )"_browse._dns-sd._udp.local.",      (char const   * const  )"_default._browse._dns-sd._udp.local.",      (char const   * const  )"_register._dns-sd._udp.local.",      (char const   * const  )"_default._register._dns-sd._udp.local."};
static struct mDNSprintf_format  const  mDNSprintf_format_default  ;
static char emsg[9]  = 
  {      (char )'<',      (char )'<',      (char )'N',      (char )'U', 
        (char )'L',      (char )'L',      (char )'>',      (char )'>', 
        (char )'\000'};
static char emsg___0[9]  = 
  {      (char )'<',      (char )'<',      (char )'N',      (char )'U', 
        (char )'L',      (char )'L',      (char )'>',      (char )'>', 
        (char )'\000'};
mDNSu32 mDNS_vsnprintf(char *sbuffer , mDNSu32 buflen , char const   *fmt , va_list arg ) 
{ mDNSu32 nwritten ;
  int c ;
  char *tmp ;
  unsigned int i ;
  unsigned int j ;
  char mDNS_VACB[300] ;
  char *s ;
  char *digits ;
  struct mDNSprintf_format F ;
  int f ;
  int tmp___0 ;
  unsigned long n ;
  long tmp___1 ;
  int tmp___2 ;
  unsigned char *a ;
  unsigned char *tmp___3 ;
  unsigned short *w ;
  mDNSAddr *ip ;
  int tmp___4 ;
  char *a___0 ;
  char *tmp___5 ;
  char *tmp___6 ;
  unsigned char *a___1 ;
  char *tmp___7 ;
  mDNSu32 tmp___8 ;
  mDNSu32 tmp___9 ;
  mDNSu32 tmp___10 ;
  char *tmp___11 ;
  char *tmp___12 ;
  char *tmp___13 ;
  char *tmp___14 ;
  char *tmp___15 ;
  char *tmp___16 ;

  {
  nwritten = (mDNSu32 )0;
  buflen --;
  c = (int )(*fmt);
  while (c != 0) {
    if (c != 37) {
      tmp = sbuffer;
      sbuffer ++;
      (*tmp) = (char )c;
      nwritten ++;
      if (nwritten >= buflen) {
        goto exit;
      }
    } else {
      i = 0U;
      s = & mDNS_VACB[300];
      F = mDNSprintf_format_default;
      while (1) {
        fmt ++;
        c = (int )(*fmt);
        if (c == 45) {
          F.leftJustify = 1U;
        } else {
          if (c == 43) {
            F.forceSign = 1U;
          } else {
            if (c == 32) {
              F.sign = (char )' ';
            } else {
              if (c == 35) {
                F.altForm = (char )((int )F.altForm + 1);
              } else {
                if (c == 48) {
                  F.zeroPad = 1U;
                } else {
                  break;
                }
              }
            }
          }
        }
      }
      if (c == 42) {
        tmp___0 = __builtin_va_arg(arg, int );
        f = tmp___0;
        if (f < 0) {
          f = - f;
          F.leftJustify = 1U;
        }
        F.fieldWidth = (unsigned int )f;
        fmt ++;
        c = (int )(*fmt);
      } else {
        while (1) {
          if (c >= 48) {
            if (! (c <= 57)) {
              goto _L;
            }
          } else {
            _L: /* CIL Label */ 
            break;
          }
          F.fieldWidth = 10U * F.fieldWidth + (unsigned int )(c - 48);
          fmt ++;
          c = (int )(*fmt);
        }
      }
      if (c == 46) {
        fmt ++;
        c = (int )(*fmt);
        if (c == 42) {
          F.precision = __builtin_va_arg(arg, unsigned int );
          fmt ++;
          c = (int )(*fmt);
        } else {
          while (1) {
            if (c >= 48) {
              if (! (c <= 57)) {
                goto _L___0;
              }
            } else {
              _L___0: /* CIL Label */ 
              break;
            }
            F.precision = 10U * F.precision + (unsigned int )(c - 48);
            fmt ++;
            c = (int )(*fmt);
          }
        }
        F.havePrecision = 1U;
      }
      if (F.leftJustify) {
        F.zeroPad = 0U;
      }
      conv: 
      switch (c) {
      case 104: 
      F.hSize = 1U;
      fmt ++;
      c = (int )(*fmt);
      goto conv;
      case 108: ;
      case 76: 
      F.lSize = 1U;
      fmt ++;
      c = (int )(*fmt);
      goto conv;
      case 100: ;
      case 105: ;
      if (F.lSize) {
        tmp___1 = __builtin_va_arg(arg, long );
        n = (unsigned long )tmp___1;
      } else {
        tmp___2 = __builtin_va_arg(arg, int );
        n = (unsigned long )tmp___2;
      }
      if (F.hSize) {
        n = (unsigned long )((short )n);
      }
      if ((long )n < 0L) {
        n = (unsigned long )(- ((long )n));
        F.sign = (char )'-';
      } else {
        if (F.forceSign) {
          F.sign = (char )'+';
        }
      }
      goto decimal;
      case 117: ;
      if (F.lSize) {
        n = __builtin_va_arg(arg, unsigned long );
      } else {
        n = __builtin_va_arg(arg, unsigned int );
      }
      if (F.hSize) {
        n = (unsigned long )((unsigned short )n);
      }
      F.sign = (char)0;
      goto decimal;
      decimal: 
      if (! F.havePrecision) {
        if (F.zeroPad) {
          F.precision = F.fieldWidth;
          if (F.sign) {
            F.precision --;
          }
        }
        if (F.precision < 1U) {
          F.precision = 1U;
        }
      }
      if (F.precision > 299U) {
        F.precision = 299U;
      }
      i = 0U;
      while (n) {
        s --;
        (*s) = (char )(n % 10UL + 48UL);
        n /= 10UL;
        i ++;
      }
      while (i < F.precision) {
        s --;
        (*s) = (char )'0';
        i ++;
      }
      if (F.sign) {
        s --;
        (*s) = F.sign;
        i ++;
      }
      break;
      case 111: ;
      if (F.lSize) {
        n = __builtin_va_arg(arg, unsigned long );
      } else {
        n = __builtin_va_arg(arg, unsigned int );
      }
      if (F.hSize) {
        n = (unsigned long )((unsigned short )n);
      }
      if (! F.havePrecision) {
        if (F.zeroPad) {
          F.precision = F.fieldWidth;
        }
        if (F.precision < 1U) {
          F.precision = 1U;
        }
      }
      if (F.precision > 299U) {
        F.precision = 299U;
      }
      i = 0U;
      while (n) {
        s --;
        (*s) = (char )(n % 8UL + 48UL);
        n /= 8UL;
        i ++;
      }
      if (F.altForm) {
        if (i) {
          if ((int )(*s) != 48) {
            s --;
            (*s) = (char )'0';
            i ++;
          } else {
            goto _L___2;
          }
        } else {
          goto _L___2;
        }
      } else {
        _L___2: /* CIL Label */ ;
      }
      while (i < F.precision) {
        s --;
        (*s) = (char )'0';
        i ++;
      }
      break;
      case 97: 
      tmp___3 = __builtin_va_arg(arg, unsigned char *);
      a = tmp___3;
      if (! a) {
        s = emsg;
        i = sizeof(emsg) - 1U;
      } else {
        w = (unsigned short *)a;
        s = mDNS_VACB;
        if (F.altForm) {
          ip = (mDNSAddr *)a;
          a = (unsigned char *)(& ip->ip.v4);
          w = (unsigned short *)(& ip->ip.v6);
          switch (ip->type) {
          case 4: 
          F.precision = 4U;
          break;
          case 6: 
          F.precision = 16U;
          break;
          default: 
          F.precision = 0U;
          break;
          }
        }
        switch ((int )F.precision) {
        case 4: 
        i = mDNS_snprintf(mDNS_VACB, sizeof(mDNS_VACB), "%d.%d.%d.%d", (*(a + 0)),
                          (*(a + 1)), (*(a + 2)), (*(a + 3)));
        break;
        case 6: 
        i = mDNS_snprintf(mDNS_VACB, sizeof(mDNS_VACB), "%02X:%02X:%02X:%02X:%02X:%02X",
                          (*(a + 0)), (*(a + 1)), (*(a + 2)), (*(a + 3)), (*(a + 4)),
                          (*(a + 5)));
        break;
        case 16: 
        i = mDNS_snprintf(mDNS_VACB, sizeof(mDNS_VACB), "%04X:%04X:%04X:%04X:%04X:%04X:%04X:%04X",
                          (*(w + 0)), (*(w + 1)), (*(w + 2)), (*(w + 3)), (*(w + 4)),
                          (*(w + 5)), (*(w + 6)), (*(w + 7)));
        break;
        default: 
        i = mDNS_snprintf(mDNS_VACB, sizeof(mDNS_VACB), "%s", "<< ERROR: Must specify address size (i.e. %.4a=IPv4, %.6a=Ethernet, %.16a=IPv6) >>");
        break;
        }
      }
      break;
      case 112: 
      F.lSize = 1U;
      F.havePrecision = F.lSize;
      F.precision = 8U;
      case 88: 
      digits = (char *)"0123456789ABCDEF";
      goto hexadecimal;
      case 120: 
      digits = (char *)"0123456789abcdef";
      hexadecimal: 
      if (F.lSize) {
        n = __builtin_va_arg(arg, unsigned long );
      } else {
        n = __builtin_va_arg(arg, unsigned int );
      }
      if (F.hSize) {
        n = (unsigned long )((unsigned short )n);
      }
      if (! F.havePrecision) {
        if (F.zeroPad) {
          F.precision = F.fieldWidth;
          if (F.altForm) {
            F.precision -= 2U;
          }
        }
        if (F.precision < 1U) {
          F.precision = 1U;
        }
      }
      if (F.precision > 299U) {
        F.precision = 299U;
      }
      i = 0U;
      while (n) {
        s --;
        (*s) = (*(digits + n % 16UL));
        n /= 16UL;
        i ++;
      }
      while (i < F.precision) {
        s --;
        (*s) = (char )'0';
        i ++;
      }
      if (F.altForm) {
        s --;
        (*s) = (char )c;
        s --;
        (*s) = (char )'0';
        i += 2U;
      }
      break;
      case 99: 
      s --;
      tmp___4 = __builtin_va_arg(arg, int );
      (*s) = (char )tmp___4;
      i = 1U;
      break;
      case 115: 
      s = __builtin_va_arg(arg, char *);
      if (! s) {
        s = emsg___0;
        i = sizeof(emsg___0) - 1U;
      } else {
        switch ((int )F.altForm) {
        case 0: 
        a___0 = s;
        i = 0U;
        while (1) {
          tmp___5 = a___0;
          a___0 ++;
          if (! (*tmp___5)) {
            break;
          }
          i ++;
        }
        break;
        case 1: 
        tmp___6 = s;
        s ++;
        i = (unsigned int )((unsigned char )(*tmp___6));
        break;
        case 2: 
        a___1 = (unsigned char *)s;
        s = mDNS_VACB;
        if ((int )(*a___1) == 0) {
          tmp___7 = s;
          s ++;
          (*tmp___7) = (char )'.';
        }
        while ((*a___1)) {
          if ((int )(*a___1) > 63) {
            tmp___8 = mDNS_snprintf(s, (unsigned int )(& mDNS_VACB[300] - s), "<<INVALID LABEL LENGTH %u>>",
                                    (*a___1));
            s += tmp___8;
            break;
          }
          if ((unsigned int )(s + (int )(*a___1)) >= (unsigned int )(& mDNS_VACB[254])) {
            tmp___9 = mDNS_snprintf(s, (unsigned int )(& mDNS_VACB[300] - s), "<<NAME TOO LONG>>");
            s += tmp___9;
            break;
          }
          tmp___10 = mDNS_snprintf(s, (unsigned int )(& mDNS_VACB[300] - s), "%#s.",
                                   a___1);
          s += tmp___10;
          a___1 += 1 + (int )(*a___1);
        }
        i = (unsigned int )(s - mDNS_VACB);
        s = mDNS_VACB;
        break;
        }
      }
      if (F.havePrecision) {
        if (i > F.precision) {
          i = F.precision;
          while (1) {
            if (i > 0U) {
              if (! (((int )(*(s + i)) & 192) == 128)) {
                goto _L___3;
              }
            } else {
              _L___3: /* CIL Label */ 
              break;
            }
            i --;
          }
        } else {
          goto _L___4;
        }
      } else {
        _L___4: /* CIL Label */ ;
      }
      break;
      case 110: 
      s = __builtin_va_arg(arg, char *);
      if (F.hSize) {
        (*((short *)s)) = (short )nwritten;
      } else {
        if (F.lSize) {
          (*((long *)s)) = (long )nwritten;
        } else {
          (*((int *)s)) = (int )nwritten;
        }
      }
      goto __Cont;
      default: 
      s = mDNS_VACB;
      i = mDNS_snprintf(mDNS_VACB, sizeof(mDNS_VACB), "<<UNKNOWN FORMAT CONVERSION CODE %%%c>>",
                        c);
      case 37: 
      tmp___11 = sbuffer;
      sbuffer ++;
      (*tmp___11) = (char )c;
      nwritten ++;
      if (nwritten >= buflen) {
        goto exit;
      }
      break;
      }
      if (i < F.fieldWidth) {
        if (! F.leftJustify) {
          while (1) {
            tmp___12 = sbuffer;
            sbuffer ++;
            (*tmp___12) = (char )' ';
            nwritten ++;
            if (nwritten >= buflen) {
              goto exit;
            }
            F.fieldWidth --;
            if (! (i < F.fieldWidth)) {
              break;
            }
          }
        } else {
          goto _L___5;
        }
      } else {
        _L___5: /* CIL Label */ ;
      }
      if (i > buflen - nwritten) {
        i = buflen - nwritten;
        while (1) {
          if (i > 0U) {
            if (! (((int )(*(s + i)) & 192) == 128)) {
              goto _L___6;
            }
          } else {
            _L___6: /* CIL Label */ 
            break;
          }
          i --;
        }
      }
      j = 0U;
      while (j < i) {
        tmp___13 = sbuffer;
        sbuffer ++;
        tmp___14 = s;
        s ++;
        (*tmp___13) = (*tmp___14);
        j ++;
      }
      nwritten += i;
      if (nwritten >= buflen) {
        goto exit;
      }
      while (i < F.fieldWidth) {
        tmp___15 = sbuffer;
        sbuffer ++;
        (*tmp___15) = (char )' ';
        nwritten ++;
        if (nwritten >= buflen) {
          goto exit;
        }
        i ++;
      }
    }
    __Cont: /* CIL Label */ 
    fmt ++;
    c = (int )(*fmt);
  }
  exit: 
  tmp___16 = sbuffer;
  sbuffer ++;
  (*tmp___16) = (char)0;
  return (nwritten);
}
}
mDNSu32 mDNS_snprintf(char *sbuffer , mDNSu32 buflen , char const   *fmt  , ...) 
{ mDNSu32 length ;
  va_list ptr ;

  {
  __builtin_stdarg_start(ptr, fmt);
  length = mDNS_vsnprintf(sbuffer, buflen, fmt, ptr);
  __builtin_va_end(ptr);
  return (length);
}
}
static char buffer[16]  ;
char *DNSTypeName(mDNSu16 rrtype ) 
{ 

  {
  switch ((int )rrtype) {
  case 1: ;
  return ((char *)"Addr");
  case 5: ;
  return ((char *)"CNAME");
  case 10: ;
  return ((char *)"NULL");
  case 12: ;
  return ((char *)"PTR");
  case 13: ;
  return ((char *)"HINFO");
  case 16: ;
  return ((char *)"TXT");
  case 28: ;
  return ((char *)"AAAA");
  case 33: ;
  return ((char *)"SRV");
  case 255: ;
  return ((char *)"ANY");
  default: 
  mDNS_snprintf(buffer, sizeof(buffer), "(%d)", rrtype);
  return (buffer);
  }
}
}
char *GetRRDisplayString_rdb(mDNS *m , ResourceRecord const   *rr , RDataBody *rd ) 
{ char *ptr ;
  mDNSu32 length ;
  char *tmp ;
  mDNSu32 tmp___0 ;

  {
  ptr = m->MsgBuffer;
  tmp = DNSTypeName(rr->rrtype);
  tmp___0 = mDNS_snprintf(m->MsgBuffer, 79U, "%4d %##s %s ", rr->rdlength, rr->name.c,
                          tmp);
  length = tmp___0;
  switch ((int )rr->rrtype) {
  case 1: 
  mDNS_snprintf(m->MsgBuffer + length, 79U - length, "%.4a", & rd->ip);
  break;
  case 5: ;
  case 12: 
  mDNS_snprintf(m->MsgBuffer + length, 79U - length, "%##s", & rd->name);
  break;
  case 13: ;
  case 16: 
  mDNS_snprintf(m->MsgBuffer + length, 79U - length, "%#s", rd->txt.c);
  break;
  case 28: 
  mDNS_snprintf(m->MsgBuffer + length, 79U - length, "%.16a", & rd->ipv6);
  break;
  case 33: 
  mDNS_snprintf(m->MsgBuffer + length, 79U - length, "%##s", & rd->srv.target);
  break;
  default: 
  mDNS_snprintf(m->MsgBuffer + length, 79U - length, "RDLen %d: %s", rr->rdlength,
                rd->data);
  break;
  }
  ptr = m->MsgBuffer;
  while ((*ptr)) {
    if ((int )(*ptr) < 32) {
      (*ptr) = (char )'.';
    }
    ptr ++;
  }
  return (m->MsgBuffer);
}
}
static mDNSu32 mDNSRandom(mDNSu32 max ) ;
static unsigned int seed  =    (mDNSu32 )0;
static mDNSu32 mDNSRandom(mDNSu32 max ) 
{ mDNSu32 mask ;

  {
  mask = (mDNSu32 )1;
  if (! seed) {
    seed = (unsigned int )mDNSPlatformTimeNow();
  }
  while (mask < max) {
    mask = (mask << 1) | 1U;
  }
  while (1) {
    seed = seed * 21U + 1U;
    if (! ((seed & mask) > max)) {
      break;
    }
  }
  return (seed & mask);
}
}
mDNSBool mDNSSameAddress(mDNSAddr const   *ip1 , mDNSAddr const   *ip2 ) 
{ int tmp ;

  {
  if (ip1->type == ip2->type) {
    switch (ip1->type) {
    case 4: ;
    return (ip1->ip.v4.NotAnInteger == ip2->ip.v4.NotAnInteger);
    case 6: ;
    if (ip1->ip.v6.l[0] == ip2->ip.v6.l[0]) {
      if (ip1->ip.v6.l[1] == ip2->ip.v6.l[1]) {
        if (ip1->ip.v6.l[2] == ip2->ip.v6.l[2]) {
          if (ip1->ip.v6.l[3] == ip2->ip.v6.l[3]) {
            tmp = 1;
          } else {
            goto _L___1;
          }
        } else {
          goto _L___1;
        }
      } else {
        goto _L___1;
      }
    } else {
      _L___1: /* CIL Label */ 
      tmp = 0;
    }
    return (tmp);
    }
  }
  return (0);
}
}
static mDNSBool mDNSAddrIsDNSMulticast(mDNSAddr const   *ip ) 
{ int tmp ;

  {
  switch (ip->type) {
  case 4: ;
  return (ip->ip.v4.NotAnInteger == AllDNSLinkGroup.NotAnInteger);
  case 6: ;
  if (ip->ip.v6.l[0] == AllDNSLinkGroupv6.l[0]) {
    if (ip->ip.v6.l[1] == AllDNSLinkGroupv6.l[1]) {
      if (ip->ip.v6.l[2] == AllDNSLinkGroupv6.l[2]) {
        if (ip->ip.v6.l[3] == AllDNSLinkGroupv6.l[3]) {
          tmp = 1;
        } else {
          goto _L___1;
        }
      } else {
        goto _L___1;
      }
    } else {
      goto _L___1;
    }
  } else {
    _L___1: /* CIL Label */ 
    tmp = 0;
  }
  return (tmp);
  default: ;
  return (0);
  }
}
}
static NetworkInterfaceInfo const   *GetFirstActiveInterface(NetworkInterfaceInfo const   *intf ) 
{ 

  {
  while (1) {
    if (intf) {
      if (! (! intf->InterfaceActive)) {
        goto _L;
      }
    } else {
      _L: /* CIL Label */ 
      break;
    }
    intf = (NetworkInterfaceInfo const   *)intf->next;
  }
  return (intf);
}
}
static mDNSInterfaceID GetNextActiveInterfaceID(NetworkInterfaceInfo const   *intf ) 
{ NetworkInterfaceInfo const   *next ;
  NetworkInterfaceInfo const   *tmp ;

  {
  tmp = GetFirstActiveInterface((NetworkInterfaceInfo const   *)intf->next);
  next = tmp;
  if (next) {
    return (next->InterfaceID);
  } else {
    return ((struct mDNSInterfaceID_dummystruct *)0L);
  }
}
}
static void SetNextQueryTime(mDNS *m , DNSQuestion const   *q ) 
{ 

  {
  if (q->ThisQInterval > 0) {
    if (! q->DuplicateOf) {
      if (m->NextScheduledQuery - (q->LastQTime + q->ThisQInterval) > 0) {
        m->NextScheduledQuery = q->LastQTime + q->ThisQInterval;
      }
    } else {
      goto _L;
    }
  } else {
    _L: /* CIL Label */ ;
  }
  return;
}
}
mDNSBool SameDomainLabel(mDNSu8 const   *a , mDNSu8 const   *b ) 
{ int i ;
  int len ;
  mDNSu8 const   *tmp ;
  mDNSu8 const   *tmp___0 ;
  mDNSu8 ac ;
  mDNSu8 const   *tmp___1 ;
  mDNSu8 bc ;
  mDNSu8 const   *tmp___2 ;

  {
  tmp = a;
  a ++;
  len = (int )(*tmp);
  if (len > 63) {
    return (0);
  }
  tmp___0 = b;
  b ++;
  if (len != (int )(*tmp___0)) {
    return (0);
  }
  i = 0;
  while (i < len) {
    tmp___1 = a;
    a ++;
    ac = (mDNSu8 )(*tmp___1);
    tmp___2 = b;
    b ++;
    bc = (mDNSu8 )(*tmp___2);
    if ((int )ac >= 65) {
      if ((int )ac <= 90) {
        ac = (unsigned char )((int )ac + 32);
      } else {
        goto _L;
      }
    } else {
      _L: /* CIL Label */ ;
    }
    if ((int )bc >= 65) {
      if ((int )bc <= 90) {
        bc = (unsigned char )((int )bc + 32);
      } else {
        goto _L___0;
      }
    } else {
      _L___0: /* CIL Label */ ;
    }
    if ((int )ac != (int )bc) {
      return (0);
    }
    i ++;
  }
  return (1);
}
}
mDNSBool SameDomainName(domainname const   *d1 , domainname const   *d2 ) 
{ mDNSu8 const   *a ;
  mDNSu8 const   *b ;
  mDNSu8 const   *max ;
  mDNSBool tmp ;

  {
  a = (mDNSu8 const   *)(d1->c);
  b = (mDNSu8 const   *)(d2->c);
  max = (mDNSu8 const   *)(d1->c + 255);
  while (1) {
    if ((*a)) {
      goto _L;
    } else {
      if ((*b)) {
        _L: /* CIL Label */ ;
      } else {
        break;
      }
    }
    if ((unsigned int )((a + 1) + (int const   )(*a)) >= (unsigned int )max) {
      return (0);
    }
    tmp = SameDomainLabel(a, b);
    if (! tmp) {
      return (0);
    }
    a += 1 + (int )(*a);
    b += 1 + (int )(*b);
  }
  return (1);
}
}
mDNSu16 DomainNameLength(domainname const   *name ) 
{ mDNSu8 const   *src ;

  {
  src = (mDNSu8 const   *)(name->c);
  while ((*src)) {
    if ((int const   )(*src) > 63) {
      return ((unsigned short)256);
    }
    src += 1 + (int )(*src);
    if (src - (mDNSu8 const   *)(name->c) >= 255) {
      return ((unsigned short)256);
    }
  }
  return ((unsigned short )((src - (mDNSu8 const   *)(name->c)) + 1));
}
}
static mDNSu16 CompressedDomainNameLength(domainname const   *name , domainname const   *parent ) 
{ mDNSu8 const   *src ;
  mDNSBool tmp ;

  {
  src = (mDNSu8 const   *)(name->c);
  if (parent) {
    if ((int )parent->c[0] == 0) {
      parent = (domainname const   *)0L;
    } else {
      goto _L;
    }
  } else {
    _L: /* CIL Label */ ;
  }
  while ((*src)) {
    if ((int const   )(*src) > 63) {
      return ((unsigned short)256);
    }
    if (parent) {
      tmp = SameDomainName((domainname const   *)((domainname *)src), parent);
      if (tmp) {
        return ((unsigned short )((src - (mDNSu8 const   *)(name->c)) + 2));
      } else {
        goto _L___0;
      }
    } else {
      _L___0: /* CIL Label */ ;
    }
    src += 1 + (int )(*src);
    if (src - (mDNSu8 const   *)(name->c) >= 255) {
      return ((unsigned short)256);
    }
  }
  return ((unsigned short )((src - (mDNSu8 const   *)(name->c)) + 1));
}
}
mDNSu8 *AppendLiteralLabelString(domainname *name , char const   *cstr ) 
{ mDNSu8 *ptr ;
  mDNSu16 tmp ;
  mDNSu8 const   *lim1 ;
  mDNSu8 const   *lim2 ;
  mDNSu8 const   *lim ;
  mDNSu8 const   *tmp___0 ;
  mDNSu8 *lengthbyte ;
  mDNSu8 *tmp___1 ;
  mDNSu8 *tmp___2 ;
  char const   *tmp___3 ;
  mDNSu8 *tmp___4 ;

  {
  tmp = DomainNameLength((domainname const   *)name);
  ptr = (name->c + (int )tmp) - 1;
  lim1 = (mDNSu8 const   *)((name->c + 255) - 1);
  lim2 = (mDNSu8 const   *)((ptr + 1) + 63);
  if ((unsigned int )lim1 < (unsigned int )lim2) {
    tmp___0 = lim1;
  } else {
    tmp___0 = lim2;
  }
  lim = tmp___0;
  tmp___1 = ptr;
  ptr ++;
  lengthbyte = tmp___1;
  while (1) {
    if ((*cstr)) {
      if (! ((unsigned int )ptr < (unsigned int )lim)) {
        goto _L;
      }
    } else {
      _L: /* CIL Label */ 
      break;
    }
    tmp___2 = ptr;
    ptr ++;
    tmp___3 = cstr;
    cstr ++;
    (*tmp___2) = (unsigned char )(*tmp___3);
  }
  (*lengthbyte) = (unsigned char )((ptr - lengthbyte) - 1);
  tmp___4 = ptr;
  ptr ++;
  (*tmp___4) = (unsigned char)0;
  if ((*cstr)) {
    return ((mDNSu8 *)0L);
  } else {
    return (ptr);
  }
}
}
mDNSu8 *AppendDNSNameString(domainname *name , char const   *cstr ) 
{ mDNSu8 *ptr ;
  mDNSu16 tmp ;
  mDNSu8 const   *lim ;
  mDNSu8 *lengthbyte ;
  mDNSu8 *tmp___0 ;
  mDNSu8 c ;
  char const   *tmp___1 ;
  char const   *tmp___2 ;
  int v0 ;
  int v1 ;
  int v2 ;
  int val ;
  mDNSu8 *tmp___3 ;
  mDNSu8 *tmp___4 ;

  {
  tmp = DomainNameLength((domainname const   *)name);
  ptr = (name->c + (int )tmp) - 1;
  lim = (mDNSu8 const   *)((name->c + 255) - 1);
  while (1) {
    if ((*cstr)) {
      if (! ((unsigned int )ptr < (unsigned int )lim)) {
        goto _L___7;
      }
    } else {
      _L___7: /* CIL Label */ 
      break;
    }
    tmp___0 = ptr;
    ptr ++;
    lengthbyte = tmp___0;
    while (1) {
      if ((*cstr)) {
        if ((int const   )(*cstr) != 46) {
          if (! ((unsigned int )ptr < (unsigned int )lim)) {
            goto _L___6;
          }
        } else {
          goto _L___6;
        }
      } else {
        _L___6: /* CIL Label */ 
        break;
      }
      tmp___1 = cstr;
      cstr ++;
      c = (unsigned char )(*tmp___1);
      if ((int )c == 92) {
        if ((int const   )(*cstr) == 92) {
          goto _L___4;
        } else {
          if ((int const   )(*cstr) == 46) {
            _L___4: /* CIL Label */ 
            tmp___2 = cstr;
            cstr ++;
            c = (unsigned char )(*tmp___2);
          } else {
            if ((int const   )(*(cstr + 0)) >= 48) {
              if ((int const   )(*(cstr + 0)) <= 57) {
                if ((int const   )(*(cstr + 1)) >= 48) {
                  if ((int const   )(*(cstr + 1)) <= 57) {
                    if ((int const   )(*(cstr + 2)) >= 48) {
                      if ((int const   )(*(cstr + 2)) <= 57) {
                        v0 = (int )((int const   )(*(cstr + 0)) - 48);
                        v1 = (int )((int const   )(*(cstr + 1)) - 48);
                        v2 = (int )((int const   )(*(cstr + 2)) - 48);
                        val = (v0 * 100 + v1 * 10) + v2;
                        if (val <= 255) {
                          c = (unsigned char )val;
                          cstr += 3;
                        }
                      } else {
                        goto _L___0;
                      }
                    } else {
                      _L___0: /* CIL Label */ 
                      goto _L___3;
                    }
                  } else {
                    goto _L___2;
                  }
                } else {
                  _L___2: /* CIL Label */ 
                  goto _L___3;
                }
              } else {
                goto _L___3;
              }
            } else {
              _L___3: /* CIL Label */ ;
            }
          }
        }
      }
      tmp___3 = ptr;
      ptr ++;
      (*tmp___3) = c;
    }
    if ((*cstr)) {
      cstr ++;
    }
    if ((ptr - lengthbyte) - 1 > 63) {
      return ((mDNSu8 *)0L);
    }
    (*lengthbyte) = (unsigned char )((ptr - lengthbyte) - 1);
  }
  tmp___4 = ptr;
  ptr ++;
  (*tmp___4) = (unsigned char)0;
  if ((*cstr)) {
    return ((mDNSu8 *)0L);
  } else {
    return (ptr);
  }
}
}
mDNSu8 *AppendDomainLabel(domainname *name , domainlabel const   *label ) 
{ int i ;
  mDNSu8 *ptr ;
  mDNSu16 tmp ;
  mDNSu8 *tmp___0 ;
  mDNSu8 *tmp___1 ;

  {
  tmp = DomainNameLength((domainname const   *)name);
  ptr = (name->c + (int )tmp) - 1;
  if ((int )label->c[0] > 63) {
    return ((mDNSu8 *)0L);
  }
  if ((unsigned int )(((ptr + 1) + (int )label->c[0]) + 1) > (unsigned int )(name->c +
                                                                             255)) {
    return ((mDNSu8 *)0L);
  }
  i = 0;
  while (i <= (int )label->c[0]) {
    tmp___0 = ptr;
    ptr ++;
    (*tmp___0) = label->c[i];
    i ++;
  }
  tmp___1 = ptr;
  ptr ++;
  (*tmp___1) = (unsigned char)0;
  return (ptr);
}
}
mDNSu8 *AppendDomainName(domainname *name , domainname const   *append ) 
{ mDNSu8 *ptr ;
  mDNSu16 tmp ;
  mDNSu8 const   *lim ;
  mDNSu8 const   *src ;
  int i ;
  mDNSu8 *tmp___0 ;

  {
  tmp = DomainNameLength((domainname const   *)name);
  ptr = (name->c + (int )tmp) - 1;
  lim = (mDNSu8 const   *)((name->c + 255) - 1);
  src = (mDNSu8 const   *)(append->c);
  while ((*(src + 0))) {
    if ((unsigned int )((ptr + 1) + (int const   )(*(src + 0))) > (unsigned int )lim) {
      return ((mDNSu8 *)0L);
    }
    i = 0;
    while (i <= (int )(*(src + 0))) {
      tmp___0 = ptr;
      ptr ++;
      (*tmp___0) = (*(src + i));
      i ++;
    }
    (*ptr) = (unsigned char)0;
    src += i;
  }
  return (ptr);
}
}
mDNSBool MakeDomainLabelFromLiteralString(domainlabel *label , char const   *cstr ) 
{ mDNSu8 *ptr ;
  mDNSu8 const   *limit ;
  mDNSu8 *tmp ;
  char const   *tmp___0 ;

  {
  ptr = label->c + 1;
  limit = (mDNSu8 const   *)((label->c + 1) + 63);
  while (1) {
    if ((*cstr)) {
      if (! ((unsigned int )ptr < (unsigned int )limit)) {
        goto _L;
      }
    } else {
      _L: /* CIL Label */ 
      break;
    }
    tmp = ptr;
    ptr ++;
    tmp___0 = cstr;
    cstr ++;
    (*tmp) = (unsigned char )(*tmp___0);
  }
  label->c[0] = (unsigned char )((ptr - label->c) - 1);
  return ((int const   )(*cstr) == 0);
}
}
mDNSu8 *MakeDomainNameFromDNSNameString(domainname *name , char const   *cstr ) 
{ mDNSu8 *tmp ;

  {
  name->c[0] = (unsigned char)0;
  tmp = AppendDNSNameString(name, cstr);
  return (tmp);
}
}
char *ConvertDomainLabelToCString_withescape(domainlabel const   *label , char *ptr ,
                                             char esc ) 
{ mDNSu8 const   *src ;
  mDNSu8 len ;
  mDNSu8 const   *tmp ;
  mDNSu8 const   *end ;
  mDNSu8 c ;
  mDNSu8 const   *tmp___0 ;
  char *tmp___1 ;
  char *tmp___2 ;
  char *tmp___3 ;
  char *tmp___4 ;
  char *tmp___5 ;

  {
  src = (mDNSu8 const   *)(label->c);
  tmp = src;
  src ++;
  len = (mDNSu8 )(*tmp);
  end = src + (int )len;
  if ((int )len > 63) {
    return ((char *)0L);
  }
  while ((unsigned int )src < (unsigned int )end) {
    tmp___0 = src;
    src ++;
    c = (mDNSu8 )(*tmp___0);
    if (esc) {
      if ((int )c == 46) {
        goto _L;
      } else {
        if ((int )c == (int )esc) {
          _L: /* CIL Label */ 
          tmp___1 = ptr;
          ptr ++;
          (*tmp___1) = esc;
        } else {
          if ((int )c <= 32) {
            tmp___2 = ptr;
            ptr ++;
            (*tmp___2) = esc;
            tmp___3 = ptr;
            ptr ++;
            (*tmp___3) = (char )(48 + (int )c / 100);
            tmp___4 = ptr;
            ptr ++;
            (*tmp___4) = (char )(48 + ((int )c / 10) % 10);
            c = (unsigned char )(48 + (int )c % 10);
          }
        }
      }
    }
    tmp___5 = ptr;
    ptr ++;
    (*tmp___5) = (char )c;
  }
  (*ptr) = (char)0;
  return (ptr);
}
}
char *ConvertDomainNameToCString_withescape(domainname const   *name , char *ptr ,
                                            char esc ) 
{ mDNSu8 const   *src ;
  mDNSu8 const   *max ;
  char *tmp ;
  char *tmp___0 ;
  char *tmp___1 ;

  {
  src = (mDNSu8 const   *)(name->c);
  max = (mDNSu8 const   *)(name->c + 255);
  if ((int const   )(*src) == 0) {
    tmp = ptr;
    ptr ++;
    (*tmp) = (char )'.';
  }
  while ((*src)) {
    if ((unsigned int )((src + 1) + (int const   )(*src)) >= (unsigned int )max) {
      return ((char *)0L);
    }
    ptr = ConvertDomainLabelToCString_withescape((domainlabel const   *)src, ptr,
                                                 esc);
    if (! ptr) {
      return ((char *)0L);
    }
    src += 1 + (int )(*src);
    tmp___0 = ptr;
    ptr ++;
    (*tmp___0) = (char )'.';
  }
  tmp___1 = ptr;
  ptr ++;
  (*tmp___1) = (char)0;
  return (ptr);
}
}
void ConvertUTF8PstringToRFC1034HostLabel(mDNSu8 const   *UTF8Name , domainlabel *hostlabel ) 
{ mDNSu8 const   *src ;
  mDNSu8 const   *end ;
  mDNSu8 *ptr ;
  mDNSu8 const   *lim ;
  mDNSu8 *tmp ;
  mDNSu8 *tmp___0 ;

  {
  src = UTF8Name + 1;
  end = (UTF8Name + 1) + (int const   )(*(UTF8Name + 0));
  ptr = & hostlabel->c[1];
  lim = (mDNSu8 const   *)(& hostlabel->c[1] + 63);
  while ((unsigned int )src < (unsigned int )end) {
    if ((int const   )(*(src + 0)) == 39) {
      src ++;
      continue;
    }
    if ((unsigned int )(src + 2) < (unsigned int )end) {
      if ((int const   )(*(src + 0)) == 226) {
        if ((int const   )(*(src + 1)) == 128) {
          if ((int const   )(*(src + 2)) == 153) {
            src += 3;
            continue;
          } else {
            goto _L___1;
          }
        } else {
          goto _L___1;
        }
      } else {
        goto _L___1;
      }
    } else {
      _L___1: /* CIL Label */ ;
    }
    if ((unsigned int )ptr < (unsigned int )lim) {
      if ((int const   )(*src) >= 65) {
        if ((int const   )(*src) <= 90) {
          goto _L___8;
        } else {
          goto _L___10;
        }
      } else {
        _L___10: /* CIL Label */ 
        if ((int const   )(*src) >= 97) {
          if ((int const   )(*src) <= 122) {
            _L___8: /* CIL Label */ 
            goto _L___6;
          } else {
            goto _L___9;
          }
        } else {
          _L___9: /* CIL Label */ 
          if ((int const   )(*src) >= 48) {
            if ((int const   )(*src) <= 57) {
              _L___6: /* CIL Label */ 
              goto _L___3;
            } else {
              goto _L___7;
            }
          } else {
            _L___7: /* CIL Label */ 
            if ((unsigned int )ptr > (unsigned int )(& hostlabel->c[1])) {
              if ((unsigned int )src < (unsigned int )(end - 1)) {
                if ((int const   )(*src) == 45) {
                  _L___3: /* CIL Label */ 
                  tmp = ptr;
                  ptr ++;
                  (*tmp) = (*src);
                } else {
                  goto _L___5;
                }
              } else {
                goto _L___5;
              }
            } else {
              _L___5: /* CIL Label */ 
              if ((unsigned int )ptr > (unsigned int )(& hostlabel->c[1])) {
                if ((int )(*(ptr + -1)) != 45) {
                  tmp___0 = ptr;
                  ptr ++;
                  (*tmp___0) = (unsigned char )'-';
                } else {
                  goto _L___2;
                }
              } else {
                _L___2: /* CIL Label */ ;
              }
            }
          }
        }
      }
    }
    src ++;
  }
  while (1) {
    if ((unsigned int )ptr > (unsigned int )(& hostlabel->c[1])) {
      if (! ((int )(*(ptr + -1)) == 45)) {
        goto _L___11;
      }
    } else {
      _L___11: /* CIL Label */ 
      break;
    }
    ptr --;
  }
  hostlabel->c[0] = (unsigned char )(ptr - & hostlabel->c[1]);
  return;
}
}
mDNSu8 *ConstructServiceName(domainname *fqdn , domainlabel const   *name , domainname const   *type ,
                             domainname const   *domain ) 
{ int i ;
  int len ;
  mDNSu8 *dst ;
  mDNSu8 const   *src ;
  char const   *errormsg ;
  mDNSu8 const   *s2 ;
  mDNSu8 *tmp ;
  mDNSu8 const   *tmp___0 ;
  mDNSu8 *tmp___1 ;
  mDNSu8 const   *tmp___2 ;
  mDNSu8 *tmp___3 ;
  mDNSu8 const   *tmp___4 ;

  {
  dst = fqdn->c;
  if (! name) {
    s2 = (mDNSu8 const   *)((type->c + 1) + (int )type->c[0]);
    if ((int )type->c[0] > 0) {
      if ((int )type->c[0] < 64) {
        if ((int const   )(*(s2 + 0)) > 0) {
          if ((int const   )(*(s2 + 0)) < 64) {
            if ((int const   )(*(s2 + (1 + (int )(*(s2 + 0))))) > 0) {
              if ((int const   )(*(s2 + (1 + (int )(*(s2 + 0))))) < 64) {
                name = (domainlabel const   *)((domainlabel *)type);
                type = (domainname const   *)((domainname *)s2);
              } else {
                goto _L___3;
              }
            } else {
              goto _L___3;
            }
          } else {
            goto _L___3;
          }
        } else {
          goto _L___3;
        }
      } else {
        goto _L___3;
      }
    } else {
      _L___3: /* CIL Label */ ;
    }
  }
  if (name) {
    if (name->c[0]) {
      src = (mDNSu8 const   *)(name->c);
      len = (int )(*src);
      if (len >= 64) {
        errormsg = "Service instance name too long";
        goto fail;
      }
      i = 0;
      while (i <= len) {
        tmp = dst;
        dst ++;
        tmp___0 = src;
        src ++;
        (*tmp) = (*tmp___0);
        i ++;
      }
    } else {
      goto _L___4;
    }
  } else {
    _L___4: /* CIL Label */ 
    name = (domainlabel const   *)((domainlabel *)"");
  }
  src = (mDNSu8 const   *)(type->c);
  len = (int )(*src);
  if (len < 2) {
    goto _L___5;
  } else {
    if (len >= 64) {
      _L___5: /* CIL Label */ 
      errormsg = "Invalid service application protocol name";
      goto fail;
    }
  }
  if ((int const   )(*(src + 1)) != 95) {
    errormsg = "Service application protocol name must begin with underscore";
    goto fail;
  }
  i = 2;
  while (i <= len) {
    if ((int const   )(*(src + i)) >= 65) {
      if ((int const   )(*(src + i)) <= 90) {
        goto _L___10;
      } else {
        goto _L___12;
      }
    } else {
      _L___12: /* CIL Label */ 
      if ((int const   )(*(src + i)) >= 97) {
        if ((int const   )(*(src + i)) <= 122) {
          _L___10: /* CIL Label */ ;
        } else {
          goto _L___11;
        }
      } else {
        _L___11: /* CIL Label */ 
        if ((int const   )(*(src + i)) >= 48) {
          if ((int const   )(*(src + i)) <= 57) {
            goto _L___10;
          } else {
            goto _L___9;
          }
        } else {
          _L___9: /* CIL Label */ 
          if ((int const   )(*(src + i)) != 45) {
            if ((int const   )(*(src + i)) != 95) {
              errormsg = "Service application protocol name must contain only letters, digits, and hyphens";
              goto fail;
            } else {
              goto _L___10;
            }
          } else {
            goto _L___10;
          }
        }
      }
    }
    i ++;
  }
  i = 0;
  while (i <= len) {
    tmp___1 = dst;
    dst ++;
    tmp___2 = src;
    src ++;
    (*tmp___1) = (*tmp___2);
    i ++;
  }
  len = (int )(*src);
  if (len == 4) {
    if ((int const   )(*(src + 1)) == 95) {
      if (((int const   )(*(src + 2)) | 32) == 117) {
        if (((int const   )(*(src + 3)) | 32) == 100) {
          goto _L___15;
        } else {
          goto _L___17;
        }
      } else {
        _L___17: /* CIL Label */ 
        if (((int const   )(*(src + 2)) | 32) == 116) {
          if (((int const   )(*(src + 3)) | 32) == 99) {
            _L___15: /* CIL Label */ 
            if (! (((int const   )(*(src + 4)) | 32) == 112)) {
              goto _L___18;
            }
          } else {
            goto _L___16;
          }
        } else {
          _L___16: /* CIL Label */ 
          goto _L___18;
        }
      }
    } else {
      goto _L___18;
    }
  } else {
    _L___18: /* CIL Label */ 
    errormsg = "Service transport protocol name must be _udp or _tcp";
    goto fail;
  }
  i = 0;
  while (i <= len) {
    tmp___3 = dst;
    dst ++;
    tmp___4 = src;
    src ++;
    (*tmp___3) = (*tmp___4);
    i ++;
  }
  if ((*src)) {
    errormsg = "Service type must have only two labels";
    goto fail;
  }
  (*dst) = (unsigned char)0;
  dst = AppendDomainName(fqdn, domain);
  if (! dst) {
    errormsg = "Service domain too long";
    goto fail;
  }
  return (dst);
  fail: 
  LogMsg("ConstructServiceName: %s: %#s.%##s%##s", errormsg, name->c, type->c, domain->c);
  return ((mDNSu8 *)0L);
}
}
mDNSBool DeconstructServiceName(domainname const   *fqdn , domainlabel *name , domainname *type ,
                                domainname *domain ) 
{ int i ;
  int len ;
  mDNSu8 const   *src ;
  mDNSu8 const   *max ;
  mDNSu8 *dst ;
  mDNSu8 *tmp ;
  mDNSu8 const   *tmp___0 ;
  mDNSu8 *tmp___1 ;
  mDNSu8 const   *tmp___2 ;
  mDNSu8 *tmp___3 ;
  mDNSu8 const   *tmp___4 ;
  mDNSu8 *tmp___5 ;
  mDNSu8 *tmp___6 ;
  mDNSu8 const   *tmp___7 ;
  mDNSu8 *tmp___8 ;

  {
  src = (mDNSu8 const   *)(fqdn->c);
  max = (mDNSu8 const   *)(fqdn->c + 255);
  dst = name->c;
  len = (int )(*src);
  if (len >= 64) {
    return (0);
  }
  i = 0;
  while (i <= len) {
    tmp = dst;
    dst ++;
    tmp___0 = src;
    src ++;
    (*tmp) = (*tmp___0);
    i ++;
  }
  dst = type->c;
  len = (int )(*src);
  if (len >= 64) {
    return (0);
  }
  i = 0;
  while (i <= len) {
    tmp___1 = dst;
    dst ++;
    tmp___2 = src;
    src ++;
    (*tmp___1) = (*tmp___2);
    i ++;
  }
  len = (int )(*src);
  if (len >= 64) {
    return (0);
  }
  i = 0;
  while (i <= len) {
    tmp___3 = dst;
    dst ++;
    tmp___4 = src;
    src ++;
    (*tmp___3) = (*tmp___4);
    i ++;
  }
  tmp___5 = dst;
  dst ++;
  (*tmp___5) = (unsigned char)0;
  dst = domain->c;
  while ((*src)) {
    len = (int )(*src);
    if (len >= 64) {
      return (0);
    }
    if ((unsigned int )(((src + 1) + len) + 1) >= (unsigned int )max) {
      return (0);
    }
    i = 0;
    while (i <= len) {
      tmp___6 = dst;
      dst ++;
      tmp___7 = src;
      src ++;
      (*tmp___6) = (*tmp___7);
      i ++;
    }
  }
  tmp___8 = dst;
  dst ++;
  (*tmp___8) = (unsigned char)0;
  return (1);
}
}
static mDNSBool LabelContainsSuffix(domainlabel const   *name , mDNSBool RichText ) 
{ mDNSu16 l ;
  mDNSu16 tmp ;
  int tmp___0 ;

  {
  l = (mDNSu16 )name->c[0];
  if (RichText) {
    if ((int )l < 4) {
      return (0);
    }
    tmp = l;
    l = (mDNSu16 )((int )l - 1);
    if ((int )name->c[tmp] != 41) {
      return (0);
    }
    if ((int )name->c[l] >= 48) {
      if (! ((int )name->c[l] <= 57)) {
        goto _L;
      }
    } else {
      _L: /* CIL Label */ 
      return (0);
    }
    l = (mDNSu16 )((int )l - 1);
    while (1) {
      if ((int )l > 2) {
        if ((int )name->c[l] >= 48) {
          if (! ((int )name->c[l] <= 57)) {
            goto _L___1;
          }
        } else {
          _L___1: /* CIL Label */ 
          goto _L___0;
        }
      } else {
        _L___0: /* CIL Label */ 
        break;
      }
      l = (mDNSu16 )((int )l - 1);
    }
    if ((int )name->c[l] == 40) {
      if ((int )name->c[(int )l - 1] == 32) {
        tmp___0 = 1;
      } else {
        goto _L___2;
      }
    } else {
      _L___2: /* CIL Label */ 
      tmp___0 = 0;
    }
    return (tmp___0);
  } else {
    if ((int )l < 2) {
      return (0);
    }
    if ((int )name->c[l] >= 48) {
      if (! ((int )name->c[l] <= 57)) {
        goto _L___3;
      }
    } else {
      _L___3: /* CIL Label */ 
      return (0);
    }
    l = (mDNSu16 )((int )l - 1);
    while (1) {
      if ((int )l > 2) {
        if ((int )name->c[l] >= 48) {
          if (! ((int )name->c[l] <= 57)) {
            goto _L___5;
          }
        } else {
          _L___5: /* CIL Label */ 
          goto _L___4;
        }
      } else {
        _L___4: /* CIL Label */ 
        break;
      }
      l = (mDNSu16 )((int )l - 1);
    }
    return ((int )name->c[l] == 45);
  }
}
}
static mDNSu32 RemoveLabelSuffix(domainlabel *name , mDNSBool RichText ) 
{ mDNSu32 val ;
  mDNSu32 multiplier ;

  {
  val = (mDNSu32 )0;
  multiplier = (mDNSu32 )1;
  if (RichText) {
    if ((int )name->c[0] >= 1) {
      if ((int )name->c[name->c[0]] == 41) {
        name->c[0] = (mDNSu8 )((int )name->c[0] - 1);
      } else {
        goto _L___0;
      }
    } else {
      goto _L___0;
    }
  } else {
    _L___0: /* CIL Label */ ;
  }
  while (1) {
    if ((int )name->c[name->c[0]] >= 48) {
      if (! ((int )name->c[name->c[0]] <= 57)) {
        goto _L___1;
      }
    } else {
      _L___1: /* CIL Label */ 
      break;
    }
    val += (mDNSu32 )((int )name->c[name->c[0]] - 48) * multiplier;
    multiplier *= 10U;
    name->c[0] = (mDNSu8 )((int )name->c[0] - 1);
  }
  if (RichText) {
    if ((int )name->c[0] >= 2) {
      if ((int )name->c[name->c[0]] == 40) {
        if ((int )name->c[(int )name->c[0] - 1] == 32) {
          name->c[0] = (unsigned char )((int )name->c[0] - 2);
        } else {
          goto _L___3;
        }
      } else {
        goto _L___3;
      }
    } else {
      _L___3: /* CIL Label */ ;
    }
  } else {
    if ((int )name->c[0] >= 1) {
      if ((int )name->c[name->c[0]] == 45) {
        name->c[0] = (unsigned char )((int )name->c[0] - 1);
      } else {
        goto _L___4;
      }
    } else {
      _L___4: /* CIL Label */ ;
    }
  }
  return (val);
}
}
static void AppendLabelSuffix(domainlabel *name , mDNSu32 val , mDNSBool RichText ) 
{ mDNSu32 divisor ;
  mDNSu32 chars ;

  {
  divisor = (mDNSu32 )1;
  chars = (mDNSu32 )2;
  if (RichText) {
    chars = 4U;
  }
  if (RichText) {
    while ((int )name->c[name->c[0]] == 32) {
      name->c[0] = (mDNSu8 )((int )name->c[0] - 1);
    }
  }
  while (val >= divisor * 10U) {
    divisor *= 10U;
    chars ++;
  }
  if ((int )name->c[0] > (int )((unsigned char )(63U - chars))) {
    name->c[0] = (unsigned char )(63U - chars);
    while (1) {
      if ((int )name->c[0] > 0) {
        if (! (((int )name->c[(int )name->c[0] + 1] & 192) == 128)) {
          goto _L;
        }
      } else {
        _L: /* CIL Label */ 
        break;
      }
      name->c[0] = (mDNSu8 )((int )name->c[0] - 1);
    }
  }
  if (RichText) {
    name->c[0] = (mDNSu8 )((int )name->c[0] + 1);
    name->c[name->c[0]] = (unsigned char )' ';
    name->c[0] = (mDNSu8 )((int )name->c[0] + 1);
    name->c[name->c[0]] = (unsigned char )'(';
  } else {
    name->c[0] = (mDNSu8 )((int )name->c[0] + 1);
    name->c[name->c[0]] = (unsigned char )'-';
  }
  while (divisor) {
    name->c[0] = (mDNSu8 )((int )name->c[0] + 1);
    name->c[name->c[0]] = (unsigned char )(48U + val / divisor);
    val %= divisor;
    divisor /= 10U;
  }
  if (RichText) {
    name->c[0] = (mDNSu8 )((int )name->c[0] + 1);
    name->c[name->c[0]] = (unsigned char )')';
  }
  return;
}
}
void IncrementLabelSuffix(domainlabel *name , mDNSBool RichText ) 
{ mDNSu32 val ;
  mDNSBool tmp ;
  mDNSu32 tmp___0 ;

  {
  val = (mDNSu32 )0;
  tmp = LabelContainsSuffix((domainlabel const   *)name, RichText);
  if (tmp) {
    val = RemoveLabelSuffix(name, RichText);
  }
  if (val == 0U) {
    val = 2U;
  } else {
    if (val < 10U) {
      val ++;
    } else {
      tmp___0 = mDNSRandom(99U);
      val += 1U + tmp___0;
    }
  }
  AppendLabelSuffix(name, val, RichText);
  return;
}
}
static mDNSBool SameRData(ResourceRecord const   *r1 , ResourceRecord const   *r2 ) 
{ mDNSBool tmp ;
  mDNSBool tmp___0 ;
  int tmp___1 ;
  mDNSBool tmp___2 ;

  {
  if ((int )r1->rrtype != (int )r2->rrtype) {
    return (0);
  }
  if ((int )r1->rdlength != (int )r2->rdlength) {
    return (0);
  }
  if (r1->rdatahash != r2->rdatahash) {
    return (0);
  }
  if (r1->rdnamehash != r2->rdnamehash) {
    return (0);
  }
  switch ((int )r1->rrtype) {
  case 5: ;
  case 12: 
  tmp = SameDomainName((domainname const   *)(& (r1->rdata)->u.name), (domainname const   *)(& (r2->rdata)->u.name));
  return (tmp);
  case 33: ;
  if ((int )(r1->rdata)->u.srv.priority == (int )(r2->rdata)->u.srv.priority) {
    if ((int )(r1->rdata)->u.srv.weight == (int )(r2->rdata)->u.srv.weight) {
      if ((int )(r1->rdata)->u.srv.port.NotAnInteger == (int )(r2->rdata)->u.srv.port.NotAnInteger) {
        tmp___0 = SameDomainName((domainname const   *)(& (r1->rdata)->u.srv.target),
                                 (domainname const   *)(& (r2->rdata)->u.srv.target));
        if (tmp___0) {
          tmp___1 = 1;
        } else {
          goto _L___1;
        }
      } else {
        goto _L___1;
      }
    } else {
      goto _L___1;
    }
  } else {
    _L___1: /* CIL Label */ 
    tmp___1 = 0;
  }
  return (tmp___1);
  default: 
  tmp___2 = mDNSPlatformMemSame((void const   *)((r1->rdata)->u.data), (void const   *)((r2->rdata)->u.data),
                                (unsigned int )r1->rdlength);
  return (tmp___2);
  }
}
}
static mDNSBool ResourceRecordAnswersQuestion(ResourceRecord const   *rr , DNSQuestion const   *q ) 
{ mDNSBool tmp ;
  int tmp___0 ;

  {
  if (rr->InterfaceID) {
    if (q->InterfaceID) {
      if ((unsigned int )rr->InterfaceID != (unsigned int )q->InterfaceID) {
        return (0);
      } else {
        goto _L___0;
      }
    } else {
      goto _L___0;
    }
  } else {
    _L___0: /* CIL Label */ ;
  }
  if ((int )rr->rrtype != 5) {
    if ((int )rr->rrtype != (int )q->qtype) {
      if ((int )q->qtype != 255) {
        return (0);
      } else {
        goto _L___2;
      }
    } else {
      goto _L___2;
    }
  } else {
    _L___2: /* CIL Label */ ;
  }
  if ((int )rr->rrclass != (int )q->qclass) {
    if ((int )q->qclass != 255) {
      return (0);
    } else {
      goto _L___3;
    }
  } else {
    _L___3: /* CIL Label */ ;
  }
  if (rr->namehash == q->qnamehash) {
    tmp = SameDomainName((domainname const   *)(& rr->name), (domainname const   *)(& q->qname));
    if (tmp) {
      tmp___0 = 1;
    } else {
      goto _L___4;
    }
  } else {
    _L___4: /* CIL Label */ 
    tmp___0 = 0;
  }
  return (tmp___0);
}
}
static mDNSu32 DomainNameHashValue(domainname const   *name ) 
{ mDNSu32 sum ;
  mDNSu8 const   *c ;
  int tmp ;
  int tmp___0 ;
  int tmp___1 ;

  {
  sum = (mDNSu32 )0;
  c = (mDNSu8 const   *)(name->c);
  while (1) {
    if ((int const   )(*(c + 0)) != 0) {
      if (! ((int const   )(*(c + 1)) != 0)) {
        goto _L___1;
      }
    } else {
      _L___1: /* CIL Label */ 
      break;
    }
    if ((int const   )(*(c + 0)) >= 65) {
      if ((int const   )(*(c + 0)) <= 90) {
        tmp = ((int const   )(*(c + 0)) + 97) - 65;
      } else {
        goto _L;
      }
    } else {
      _L: /* CIL Label */ 
      tmp = (int const   )(*(c + 0));
    }
    if ((int const   )(*(c + 1)) >= 65) {
      if ((int const   )(*(c + 1)) <= 90) {
        tmp___0 = ((int const   )(*(c + 1)) + 97) - 65;
      } else {
        goto _L___0;
      }
    } else {
      _L___0: /* CIL Label */ 
      tmp___0 = (int const   )(*(c + 1));
    }
    sum += (mDNSu32 )((tmp << 8) | tmp___0);
    sum = (sum << 3) | (sum >> 29);
    c += 2;
  }
  if ((*(c + 0))) {
    if ((int const   )(*(c + 0)) >= 65) {
      if ((int const   )(*(c + 0)) <= 90) {
        tmp___1 = ((int const   )(*(c + 0)) + 97) - 65;
      } else {
        goto _L___2;
      }
    } else {
      _L___2: /* CIL Label */ 
      tmp___1 = (int const   )(*(c + 0));
    }
    sum += (mDNSu32 )(tmp___1 << 8);
  }
  return (sum);
}
}
static mDNSu32 RDataHashValue(mDNSu16 rdlength , RDataBody const   *rdb ) 
{ mDNSu32 sum ;
  int i ;

  {
  sum = (mDNSu32 )0;
  i = 0;
  while (i + 1 < (int )rdlength) {
    sum += ((unsigned int )rdb->data[i] << 8) | (unsigned int )rdb->data[i + 1];
    sum = (sum << 3) | (sum >> 29);
    i += 2;
  }
  if (i < (int )rdlength) {
    sum += (unsigned int )rdb->data[i] << 8;
  }
  return (sum);
}
}
static mDNSBool SameResourceRecordSignature(ResourceRecord const   *r1 , ResourceRecord const   *r2 ) 
{ mDNSBool tmp ;
  int tmp___0 ;

  {
  if (! r1) {
    LogMsg("SameResourceRecordSignature ERROR: r1 is NULL");
    return (0);
  }
  if (! r2) {
    LogMsg("SameResourceRecordSignature ERROR: r2 is NULL");
    return (0);
  }
  if (r1->InterfaceID) {
    if (r2->InterfaceID) {
      if ((unsigned int )r1->InterfaceID != (unsigned int )r2->InterfaceID) {
        return (0);
      } else {
        goto _L___0;
      }
    } else {
      goto _L___0;
    }
  } else {
    _L___0: /* CIL Label */ ;
  }
  if ((int )r1->rrtype == (int )r2->rrtype) {
    if ((int )r1->rrclass == (int )r2->rrclass) {
      if (r1->namehash == r2->namehash) {
        tmp = SameDomainName((domainname const   *)(& r1->name), (domainname const   *)(& r2->name));
        if (tmp) {
          tmp___0 = 1;
        } else {
          goto _L___3;
        }
      } else {
        goto _L___3;
      }
    } else {
      goto _L___3;
    }
  } else {
    _L___3: /* CIL Label */ 
    tmp___0 = 0;
  }
  return (tmp___0);
}
}
static mDNSBool PacketRRMatchesSignature(CacheRecord const   *pktrr , AuthRecord const   *authrr ) 
{ mDNSBool tmp ;
  int tmp___0 ;

  {
  if (! pktrr) {
    LogMsg("PacketRRMatchesSignature ERROR: pktrr is NULL");
    return (0);
  }
  if (! authrr) {
    LogMsg("PacketRRMatchesSignature ERROR: authrr is NULL");
    return (0);
  }
  if (pktrr->resrec.InterfaceID) {
    if (authrr->resrec.InterfaceID) {
      if ((unsigned int )pktrr->resrec.InterfaceID != (unsigned int )authrr->resrec.InterfaceID) {
        return (0);
      } else {
        goto _L___0;
      }
    } else {
      goto _L___0;
    }
  } else {
    _L___0: /* CIL Label */ ;
  }
  if ((int )authrr->resrec.RecordType != 2) {
    if ((int )pktrr->resrec.rrtype != (int )authrr->resrec.rrtype) {
      return (0);
    } else {
      goto _L___1;
    }
  } else {
    _L___1: /* CIL Label */ ;
  }
  if ((int )pktrr->resrec.rrclass == (int )authrr->resrec.rrclass) {
    if (pktrr->resrec.namehash == authrr->resrec.namehash) {
      tmp = SameDomainName((domainname const   *)(& pktrr->resrec.name), (domainname const   *)(& authrr->resrec.name));
      if (tmp) {
        tmp___0 = 1;
      } else {
        goto _L___3;
      }
    } else {
      goto _L___3;
    }
  } else {
    _L___3: /* CIL Label */ 
    tmp___0 = 0;
  }
  return (tmp___0);
}
}
static mDNSBool IdenticalResourceRecord(ResourceRecord const   *r1 , ResourceRecord const   *r2 ) 
{ mDNSBool tmp ;
  mDNSBool tmp___0 ;

  {
  if (! r1) {
    LogMsg("IdenticalResourceRecord ERROR: r1 is NULL");
    return (0);
  }
  if (! r2) {
    LogMsg("IdenticalResourceRecord ERROR: r2 is NULL");
    return (0);
  }
  if ((int )r1->rrtype != (int )r2->rrtype) {
    goto _L___1;
  } else {
    if ((int )r1->rrclass != (int )r2->rrclass) {
      _L___1: /* CIL Label */ 
      goto _L___0;
    } else {
      if (r1->namehash != r2->namehash) {
        _L___0: /* CIL Label */ 
        goto _L;
      } else {
        tmp = SameDomainName((domainname const   *)(& r1->name), (domainname const   *)(& r2->name));
        if (! tmp) {
          _L: /* CIL Label */ 
          return (0);
        }
      }
    }
  }
  tmp___0 = SameRData(r1, r2);
  return (tmp___0);
}
}
static mDNSBool ShouldSuppressKnownAnswer(CacheRecord const   *ka , AuthRecord const   *rr ) 
{ mDNSBool tmp ;

  {
  tmp = IdenticalResourceRecord((ResourceRecord const   *)(& ka->resrec), (ResourceRecord const   *)(& rr->resrec));
  if (! tmp) {
    return (0);
  }
  return (ka->resrec.rroriginalttl >= rr->resrec.rroriginalttl / 2U);
}
}
static mDNSu16 GetRDLength(ResourceRecord const   *rr , mDNSBool estimate ) 
{ RDataBody *rd ;
  domainname const   *name ;
  domainname *tmp ;
  mDNSu16 tmp___0 ;
  mDNSu16 tmp___1 ;

  {
  rd = & (rr->rdata)->u;
  if (estimate) {
    tmp = & rr->name;
  } else {
    tmp = (domainname *)0L;
  }
  name = (domainname const   *)tmp;
  switch ((int )rr->rrtype) {
  case 1: ;
  return ((unsigned short )sizeof(rd->ip));
  case 5: ;
  case 12: 
  tmp___0 = CompressedDomainNameLength((domainname const   *)(& rd->name), name);
  return (tmp___0);
  case 13: ;
  return ((unsigned short )((2 + (int )rd->data[0]) + (int )rd->data[1 + (int )rd->data[0]]));
  case 10: ;
  case 16: ;
  return (rr->rdlength);
  case 28: ;
  return ((unsigned short )sizeof(rd->ipv6));
  case 33: 
  tmp___1 = CompressedDomainNameLength((domainname const   *)(& rd->srv.target), name);
  return ((unsigned short )(6 + (int )tmp___1));
  default: ;
  return (rr->rdlength);
  }
}
}
static void SetNextAnnounceProbeTime(mDNS *m , AuthRecord const   *rr ) 
{ 

  {
  if ((int )rr->resrec.RecordType == 2) {
    if (m->NextScheduledProbe - (rr->LastAPTime + rr->ThisAPInterval) >= 0) {
      m->NextScheduledProbe = rr->LastAPTime + rr->ThisAPInterval;
    }
  } else {
    if (rr->AnnounceCount) {
      if ((int )rr->resrec.RecordType & 60) {
        if ((unsigned int )rr->Additional1 == (unsigned int )((AuthRecord *)0)) {
          goto _L___5;
        } else {
          if ((int )(rr->Additional1)->resrec.RecordType & 60) {
            _L___5: /* CIL Label */ 
            if ((unsigned int )rr->Additional2 == (unsigned int )((AuthRecord *)0)) {
              goto _L___3;
            } else {
              if ((int )(rr->Additional2)->resrec.RecordType & 60) {
                _L___3: /* CIL Label */ 
                if ((unsigned int )rr->DependentOn == (unsigned int )((AuthRecord *)0)) {
                  goto _L___1;
                } else {
                  if ((int )(rr->DependentOn)->resrec.RecordType & 60) {
                    _L___1: /* CIL Label */ 
                    if (m->NextScheduledResponse - (rr->LastAPTime + rr->ThisAPInterval) >=
                        0) {
                      m->NextScheduledResponse = rr->LastAPTime + rr->ThisAPInterval;
                    }
                  } else {
                    goto _L___4;
                  }
                }
              } else {
                goto _L___4;
              }
            }
          } else {
            goto _L___4;
          }
        }
      } else {
        _L___4: /* CIL Label */ 
        goto _L;
      }
    } else {
      _L: /* CIL Label */ ;
    }
  }
  return;
}
}
static void InitializeLastAPTime(mDNS *m , AuthRecord *rr ) 
{ 

  {
  if (m->SuppressProbes == 0) {
    goto _L;
  } else {
    if (m->SuppressProbes - m->timenow < 0) {
      _L: /* CIL Label */ 
      m->SuppressProbes = (m->timenow + mDNSPlatformOneSecond / 4) | 1;
      if (m->SuppressProbes - m->NextScheduledProbe >= 0) {
        m->SuppressProbes = m->NextScheduledProbe;
      }
      if (m->SuppressProbes - m->NextScheduledQuery >= 0) {
        m->SuppressProbes = m->NextScheduledQuery;
      }
    }
  }
  rr->AnnounceUntil = m->timenow + (int )rr->resrec.rroriginalttl * mDNSPlatformOneSecond;
  rr->LastAPTime = m->SuppressProbes - rr->ThisAPInterval;
  rr->LastMCTime = m->timenow;
  rr->LastMCInterface = (struct mDNSInterfaceID_dummystruct *)mDNSInterfaceMark;
  if ((int )rr->resrec.RecordType != 2) {
    rr->LastAPTime += (mDNSPlatformOneSecond / 4) * 3 + rr->ThisAPInterval / 2;
  }
  SetNextAnnounceProbeTime(m, (AuthRecord const   *)rr);
  return;
}
}
static void SetNewRData(ResourceRecord *rr , RData *NewRData , mDNSu16 rdlength ) 
{ domainname *target ;

  {
  if (NewRData) {
    rr->rdata = NewRData;
    rr->rdlength = rdlength;
  }
  if ((int )rr->rrtype == 5) {
    goto _L;
  } else {
    if ((int )rr->rrtype == 12) {
      _L: /* CIL Label */ 
      target = & (rr->rdata)->u.name;
    } else {
      if ((int )rr->rrtype == 33) {
        target = & (rr->rdata)->u.srv.target;
      } else {
        target = (domainname *)0L;
      }
    }
  }
  rr->rdlength = GetRDLength((ResourceRecord const   *)rr, 0);
  rr->rdestimate = GetRDLength((ResourceRecord const   *)rr, 1);
  rr->rdatahash = RDataHashValue(rr->rdlength, (RDataBody const   *)(& (rr->rdata)->u));
  if (target) {
    rr->rdnamehash = DomainNameHashValue((domainname const   *)target);
  } else {
    rr->rdnamehash = 0U;
  }
  return;
}
}
static void SetTargetToHostName(mDNS *m , AuthRecord *rr ) 
{ domainname *target ;
  domainname *tmp___0 ;
  mDNSBool tmp___1 ;
  mDNSu32 tmp___2 ;
  mDNSBool tmp___6 ;

  {
  if ((int )rr->resrec.rrtype == 5) {
    goto _L;
  } else {
    if ((int )rr->resrec.rrtype == 12) {
      _L: /* CIL Label */ 
      tmp___0 = & (rr->resrec.rdata)->u.name;
    } else {
      if ((int )rr->resrec.rrtype == 33) {
        tmp___0 = & (rr->resrec.rdata)->u.srv.target;
      } else {
        tmp___0 = (domainname *)0L;
      }
    }
  }
  target = tmp___0;
  if (! target) {

  }
  if (target) {
    tmp___1 = SameDomainName((domainname const   *)target, (domainname const   *)(& m->hostname));
    if (! tmp___1) {
      goto _L___0;
    }
  } else {
    _L___0: /* CIL Label */ ;
  }
  if (target) {
    tmp___6 = SameDomainName((domainname const   *)target, (domainname const   *)(& m->hostname));
    if (tmp___6) {
      goto _L___2;
    } else {
      tmp___2 = (mDNSu32 )DomainNameLength((domainname const   *)(& m->hostname));
      mDNSPlatformMemCopy((void const   *)(m->hostname.c), (void *)(target->c), tmp___2);
      SetNewRData(& rr->resrec, (RData *)0L, (unsigned short)0);
      if ((int )rr->resrec.RecordType == 2) {
        rr->ProbeCount = (unsigned char)3;
      } else {
        rr->ProbeCount = (unsigned char)0;
      }
      if ((int )rr->AnnounceCount < 10) {
        if (! ((int )rr->resrec.RecordType == 8)) {
          goto _L___1;
        }
      } else {
        _L___1: /* CIL Label */ ;
      }
      if ((int )rr->AnnounceCount < 9) {
        rr->AnnounceCount = (unsigned char)9;
      }
      if ((int )rr->resrec.RecordType & 12) {
        rr->ThisAPInterval = mDNSPlatformOneSecond / 2;
      } else {
        if ((int )rr->resrec.RecordType & 2) {
          rr->ThisAPInterval = mDNSPlatformOneSecond / 4;
        } else {
          if ((int )rr->resrec.RecordType & 48) {
            rr->ThisAPInterval = mDNSPlatformOneSecond / 2;
          } else {
            rr->ThisAPInterval = 0;
          }
        }
      }
      InitializeLastAPTime(m, rr);
    }
  } else {
    _L___2: /* CIL Label */ ;
  }
  return;
}
}
static void CompleteProbing(mDNS *m , AuthRecord *rr ) 
{ 

  {
  if (! rr->Acknowledged) {
    if (rr->RecordCallback) {
      rr->Acknowledged = (unsigned char)1;
      m->mDNS_reentrancy ++;
      ((*(rr->RecordCallback)))(m, rr, 0);
      m->mDNS_reentrancy --;
    } else {
      goto _L;
    }
  } else {
    _L: /* CIL Label */ ;
  }
  return;
}
}
static mDNSBool ValidateRData(mDNSu16 rrtype , mDNSu16 rdlength , RData const   *rd ) 
{ mDNSu16 len ;
  int tmp ;
  mDNSu8 const   *ptr ;
  mDNSu8 const   *end ;
  int tmp___0 ;
  int tmp___1 ;

  {
  switch ((int )rrtype) {
  case 1: ;
  return ((unsigned int )rdlength == sizeof(mDNSv4Addr ));
  case 2: ;
  case 3: ;
  case 4: ;
  case 5: ;
  case 7: ;
  case 8: ;
  case 9: ;
  case 12: 
  len = DomainNameLength((domainname const   *)(& rd->u.name));
  if ((int )len <= 255) {
    if ((int )rdlength == (int )len) {
      tmp = 1;
    } else {
      goto _L;
    }
  } else {
    _L: /* CIL Label */ 
    tmp = 0;
  }
  return (tmp);
  case 13: ;
  case 14: ;
  case 16: 
  ptr = (mDNSu8 const   *)(rd->u.txt.c);
  end = (mDNSu8 const   *)(rd->u.txt.c + (int )rdlength);
  while ((unsigned int )ptr < (unsigned int )end) {
    ptr += 1 + (int )(*(ptr + 0));
  }
  return ((unsigned int )ptr == (unsigned int )end);
  case 28: ;
  return ((unsigned int )rdlength == sizeof(mDNSv6Addr ));
  case 15: 
  len = DomainNameLength((domainname const   *)(& rd->u.mx.exchange));
  if ((int )len <= 255) {
    if ((int )rdlength == 2 + (int )len) {
      tmp___0 = 1;
    } else {
      goto _L___0;
    }
  } else {
    _L___0: /* CIL Label */ 
    tmp___0 = 0;
  }
  return (tmp___0);
  case 33: 
  len = DomainNameLength((domainname const   *)(& rd->u.srv.target));
  if ((int )len <= 255) {
    if ((int )rdlength == 6 + (int )len) {
      tmp___1 = 1;
    } else {
      goto _L___1;
    }
  } else {
    _L___1: /* CIL Label */ 
    tmp___1 = 0;
  }
  return (tmp___1);
  default: ;
  return (1);
  }
}
}
static mStatus mDNS_Register_internal(mDNS *m , AuthRecord *rr ) 
{ domainname *target ;
  domainname *tmp___0 ;
  AuthRecord *r ;
  AuthRecord **p ;
  AuthRecord **d ;
  AuthRecord **l ;
  char *tmp___1 ;
  char *tmp___2 ;
  char *tmp___3 ;
  NetworkInterfaceInfo *intf ;
  char *tmp___7 ;
  mDNSu16 tmp___8 ;
  char *tmp___9 ;
  mDNSBool tmp___10 ;
  AuthRecord const   *s1 ;
  AuthRecord *tmp___12 ;
  AuthRecord const   *s2 ;
  AuthRecord *tmp___13 ;
  mDNSBool tmp___14 ;
  mDNSBool tmp___15 ;
  mDNSBool tmp___16 ;

  {
  if ((int )rr->resrec.rrtype == 5) {
    goto _L;
  } else {
    if ((int )rr->resrec.rrtype == 12) {
      _L: /* CIL Label */ 
      tmp___0 = & (rr->resrec.rdata)->u.name;
    } else {
      if ((int )rr->resrec.rrtype == 33) {
        tmp___0 = & (rr->resrec.rdata)->u.srv.target;
      } else {
        tmp___0 = (domainname *)0L;
      }
    }
  }
  target = tmp___0;
  p = & m->ResourceRecords;
  d = & m->DuplicateRecords;
  l = & m->LocalOnlyRecords;
  while (1) {
    if ((*p)) {
      if (! ((unsigned int )(*p) != (unsigned int )rr)) {
        goto _L___0;
      }
    } else {
      _L___0: /* CIL Label */ 
      break;
    }
    p = & ((*p))->next;
  }
  while (1) {
    if ((*d)) {
      if (! ((unsigned int )(*d) != (unsigned int )rr)) {
        goto _L___1;
      }
    } else {
      _L___1: /* CIL Label */ 
      break;
    }
    d = & ((*d))->next;
  }
  while (1) {
    if ((*l)) {
      if (! ((unsigned int )(*l) != (unsigned int )rr)) {
        goto _L___2;
      }
    } else {
      _L___2: /* CIL Label */ 
      break;
    }
    l = & ((*l))->next;
  }
  if ((*d)) {
    goto _L___4;
  } else {
    if ((*p)) {
      _L___4: /* CIL Label */ 
      goto _L___3;
    } else {
      if ((*l)) {
        _L___3: /* CIL Label */ 
        tmp___1 = DNSTypeName(rr->resrec.rrtype);
        LogMsg("Error! Tried to register a AuthRecord %p %##s (%s) that\'s already in the list",
               rr, rr->resrec.name.c, tmp___1);
        return (-65547);
      }
    }
  }
  if (rr->DependentOn) {
    if ((int )rr->resrec.RecordType == 2) {
      rr->resrec.RecordType = (unsigned char)16;
    } else {
      tmp___2 = DNSTypeName(rr->resrec.rrtype);
      LogMsg("mDNS_Register_internal: ERROR! %##s (%s): rr->DependentOn && RecordType != kDNSRecordTypeUnique",
             rr->resrec.name.c, tmp___2);
      return (-65549);
    }
    if (! ((int )(rr->DependentOn)->resrec.RecordType & 18)) {
      tmp___3 = DNSTypeName(rr->resrec.rrtype);
      LogMsg("mDNS_Register_internal: ERROR! %##s (%s): rr->DependentOn->RecordType bad type %X",
             rr->resrec.name.c, tmp___3, (rr->DependentOn)->resrec.RecordType);
      return (-65549);
    }
  }
  if (rr->resrec.InterfaceID) {
    if ((unsigned int )rr->resrec.InterfaceID != (unsigned int )((struct mDNSInterfaceID_dummystruct *)-1)) {
      intf = m->HostInterfaces;
      while (intf) {
        if ((unsigned int )intf->InterfaceID == (unsigned int )rr->resrec.InterfaceID) {
          break;
        }
        intf = intf->next;
      }
      if (! intf) {
        return (-65541);
      }
    } else {
      goto _L___5;
    }
  } else {
    _L___5: /* CIL Label */ ;
  }
  rr->next = (AuthRecord *)0L;
  rr->Acknowledged = (unsigned char)0;
  if ((int )rr->resrec.RecordType == 2) {
    rr->ProbeCount = (unsigned char)3;
  } else {
    rr->ProbeCount = (unsigned char)0;
  }
  rr->AnnounceCount = (unsigned char)10;
  rr->IncludeInProbe = (unsigned char)0;
  rr->ImmedAnswer = (struct mDNSInterfaceID_dummystruct *)0L;
  rr->ImmedAdditional = (struct mDNSInterfaceID_dummystruct *)0L;
  rr->SendRNow = (struct mDNSInterfaceID_dummystruct *)0L;
  rr->v4Requester = zeroIPAddr;
  rr->v6Requester = zerov6Addr;
  rr->NextResponse = (AuthRecord *)0L;
  rr->NR_AnswerTo = (mDNSu8 const   *)0L;
  rr->NR_AdditionalTo = (AuthRecord *)0L;
  if ((int )rr->resrec.RecordType & 12) {
    rr->ThisAPInterval = mDNSPlatformOneSecond / 2;
  } else {
    if ((int )rr->resrec.RecordType & 2) {
      rr->ThisAPInterval = mDNSPlatformOneSecond / 4;
    } else {
      if ((int )rr->resrec.RecordType & 48) {
        rr->ThisAPInterval = mDNSPlatformOneSecond / 2;
      } else {
        rr->ThisAPInterval = 0;
      }
    }
  }
  InitializeLastAPTime(m, rr);
  rr->NewRData = (RData *)0L;
  rr->newrdlength = (unsigned short)0;
  rr->UpdateCallback = (mDNSRecordUpdateCallback *)0L;
  rr->UpdateCredits = 10U;
  rr->NextUpdateCredit = 0;
  rr->UpdateBlocked = 0;
  if (rr->HostTarget) {
    if (target) {
      target->c[0] = (unsigned char)0;
    }
    SetTargetToHostName(m, rr);
  } else {
    rr->resrec.rdlength = GetRDLength((ResourceRecord const   *)(& rr->resrec), 0);
    rr->resrec.rdestimate = GetRDLength((ResourceRecord const   *)(& rr->resrec),
                                        1);
  }
  tmp___8 = DomainNameLength((domainname const   *)(& rr->resrec.name));
  if (! ((int )tmp___8 <= 255)) {
    tmp___7 = GetRRDisplayString_rdb(m, (ResourceRecord const   *)(& rr->resrec),
                                     & (rr->resrec.rdata)->u);
    LogMsg("Attempt to register record with invalid name: %s", tmp___7);
    return (-65549);
  }
  tmp___10 = ValidateRData(rr->resrec.rrtype, rr->resrec.rdlength, (RData const   *)rr->resrec.rdata);
  if (! tmp___10) {
    tmp___9 = GetRRDisplayString_rdb(m, (ResourceRecord const   *)(& rr->resrec),
                                     & (rr->resrec.rdata)->u);
    LogMsg("Attempt to register record with invalid rdata: %s", tmp___9);
    return (-65549);
  }
  rr->resrec.namehash = DomainNameHashValue((domainname const   *)(& rr->resrec.name));
  rr->resrec.rdatahash = RDataHashValue(rr->resrec.rdlength, (RDataBody const   *)(& (rr->resrec.rdata)->u));
  if (target) {
    rr->resrec.rdnamehash = DomainNameHashValue((domainname const   *)target);
  } else {
    rr->resrec.rdnamehash = 0U;
  }
  if ((unsigned int )rr->resrec.InterfaceID == (unsigned int )((struct mDNSInterfaceID_dummystruct *)-1)) {
    (*l) = rr;
    if (! m->NewLocalOnlyRecords) {
      m->NewLocalOnlyRecords = rr;
    }
    if ((int )rr->resrec.RecordType & 50) {
      if (rr->RRSet) {
        tmp___12 = rr->RRSet;
      } else {
        tmp___12 = rr;
      }
      s1 = (AuthRecord const   *)tmp___12;
      r = m->LocalOnlyRecords;
      while (r) {
        if (r->RRSet) {
          tmp___13 = r->RRSet;
        } else {
          tmp___13 = r;
        }
        s2 = (AuthRecord const   *)tmp___13;
        if ((unsigned int )s1 != (unsigned int )s2) {
          tmp___14 = SameResourceRecordSignature((ResourceRecord const   *)(& r->resrec),
                                                 (ResourceRecord const   *)(& rr->resrec));
          if (tmp___14) {
            tmp___15 = SameRData((ResourceRecord const   *)(& r->resrec), (ResourceRecord const   *)(& rr->resrec));
            if (tmp___15) {
              goto _L___7;
            } else {
              break;
            }
          } else {
            goto _L___7;
          }
        } else {
          _L___7: /* CIL Label */ ;
        }
        r = r->next;
      }
      if (r) {
        m->DiscardLocalOnlyRecords = 1;
      } else {
        rr->ProbeCount = (unsigned char)0;
        if ((int )rr->resrec.RecordType == 2) {
          rr->resrec.RecordType = (unsigned char)16;
        }
      }
    }
  } else {
    r = m->ResourceRecords;
    while (r) {
      if ((unsigned int )r->resrec.InterfaceID == (unsigned int )rr->resrec.InterfaceID) {
        if ((int )r->resrec.RecordType == (int )rr->resrec.RecordType) {
          goto _L___10;
        } else {
          if (((int )r->resrec.RecordType | (int )rr->resrec.RecordType) == 18) {
            _L___10: /* CIL Label */ 
            tmp___16 = IdenticalResourceRecord((ResourceRecord const   *)(& r->resrec),
                                               (ResourceRecord const   *)(& rr->resrec));
            if (tmp___16) {
              break;
            } else {
              goto _L___9;
            }
          } else {
            goto _L___9;
          }
        }
      } else {
        _L___9: /* CIL Label */ ;
      }
      r = r->next;
    }
    if (r) {
      (*d) = rr;
      if ((int )rr->resrec.RecordType == 2) {
        if ((int )r->resrec.RecordType == 16) {
          rr->ProbeCount = (unsigned char)0;
        } else {
          goto _L___11;
        }
      } else {
        _L___11: /* CIL Label */ ;
      }
    } else {
      (*p) = rr;
    }
  }
  return (0);
}
}
static void RecordProbeFailure(mDNS *m , AuthRecord const   *rr ) 
{ char *tmp ;

  {
  m->ProbeFailTime = m->timenow;
  m->NumFailedProbes ++;
  if (m->NumFailedProbes >= 10) {
    m->SuppressProbes = (m->timenow + mDNSPlatformOneSecond * 5) | 1;
  }
  if (m->NumFailedProbes >= 16) {
    tmp = DNSTypeName(rr->resrec.rrtype);
    LogMsg("Name in use: %##s (%s); need to choose another (%d)", rr->resrec.name.c,
           tmp, m->NumFailedProbes);
  }
  return;
}
}
static mStatus mDNS_Deregister_internal(mDNS *m , AuthRecord *rr , mDNS_Dereg_type drt ) 
{ mDNSu8 RecordType ;
  AuthRecord **p ;
  AuthRecord *r2 ;
  mDNSBool tmp ;
  AuthRecord **d ;
  mDNSBool tmp___0 ;
  AuthRecord *dup___0 ;
  RData *OldRData ;

  {
  RecordType = rr->resrec.RecordType;
  p = & m->ResourceRecords;
  if ((unsigned int )rr->resrec.InterfaceID == (unsigned int )((struct mDNSInterfaceID_dummystruct *)-1)) {
    p = & m->LocalOnlyRecords;
  }
  while (1) {
    if ((*p)) {
      if (! ((unsigned int )(*p) != (unsigned int )rr)) {
        goto _L;
      }
    } else {
      _L: /* CIL Label */ 
      break;
    }
    p = & ((*p))->next;
  }
  if ((*p)) {
    if ((int )drt == 1) {
      r2 = m->DuplicateRecords;
      while (r2) {
        if ((unsigned int )r2->resrec.InterfaceID == (unsigned int )rr->resrec.InterfaceID) {
          if ((int )r2->resrec.RecordType == (int )rr->resrec.RecordType) {
            goto _L___2;
          } else {
            if (((int )r2->resrec.RecordType | (int )rr->resrec.RecordType) == 18) {
              _L___2: /* CIL Label */ 
              tmp = IdenticalResourceRecord((ResourceRecord const   *)(& r2->resrec),
                                            (ResourceRecord const   *)(& rr->resrec));
              if (tmp) {
                mDNS_Deregister_internal(m, r2, drt);
                r2 = m->DuplicateRecords;
              } else {
                goto _L___1;
              }
            } else {
              goto _L___1;
            }
          }
        } else {
          _L___1: /* CIL Label */ 
          r2 = r2->next;
        }
      }
    } else {
      d = & m->DuplicateRecords;
      while (1) {
        if ((*d)) {
          if ((unsigned int )((*d))->resrec.InterfaceID == (unsigned int )rr->resrec.InterfaceID) {
            if ((int )((*d))->resrec.RecordType == (int )rr->resrec.RecordType) {
              goto _L___6;
            } else {
              if (((int )((*d))->resrec.RecordType | (int )rr->resrec.RecordType) ==
                  18) {
                _L___6: /* CIL Label */ 
                tmp___0 = IdenticalResourceRecord((ResourceRecord const   *)(& ((*d))->resrec),
                                                  (ResourceRecord const   *)(& rr->resrec));
                if (tmp___0) {
                  goto _L___3;
                } else {
                  goto _L___5;
                }
              } else {
                goto _L___5;
              }
            }
          } else {
            _L___5: /* CIL Label */ ;
          }
        } else {
          _L___3: /* CIL Label */ 
          break;
        }
        d = & ((*d))->next;
      }
      if ((*d)) {
        dup___0 = (*d);
        (*d) = dup___0->next;
        dup___0->next = rr->next;
        rr->next = dup___0;
        dup___0->resrec.RecordType = rr->resrec.RecordType;
        dup___0->ProbeCount = rr->ProbeCount;
        dup___0->AnnounceCount = rr->AnnounceCount;
        dup___0->ImmedAnswer = rr->ImmedAnswer;
        dup___0->ImmedAdditional = rr->ImmedAdditional;
        dup___0->v4Requester = rr->v4Requester;
        dup___0->v6Requester = rr->v6Requester;
        dup___0->ThisAPInterval = rr->ThisAPInterval;
        dup___0->AnnounceUntil = rr->AnnounceUntil;
        dup___0->LastAPTime = rr->LastAPTime;
        dup___0->LastMCTime = rr->LastMCTime;
        dup___0->LastMCInterface = rr->LastMCInterface;
        if ((int )RecordType == 8) {
          rr->AnnounceCount = (unsigned char)10;
        }
      }
    }
  } else {
    p = & m->DuplicateRecords;
    while (1) {
      if ((*p)) {
        if (! ((unsigned int )(*p) != (unsigned int )rr)) {
          goto _L___7;
        }
      } else {
        _L___7: /* CIL Label */ 
        break;
      }
      p = & ((*p))->next;
    }
    if ((*p)) {
      if ((int )RecordType == 8) {
        rr->AnnounceCount = (unsigned char)10;
      } else {
        goto _L___8;
      }
    } else {
      _L___8: /* CIL Label */ ;
    }
    if ((*p)) {

    }
  }
  if (! (*p)) {
    if ((int )drt != 2) {

    }
    return (-65541);
  }
  if ((int )RecordType == 8) {
    if ((int )rr->AnnounceCount < 10) {
      rr->resrec.RecordType = (unsigned char)1;
      rr->resrec.rroriginalttl = 0U;
      rr->ImmedAnswer = (struct mDNSInterfaceID_dummystruct *)mDNSInterfaceMark;
      if ((unsigned int )rr->resrec.InterfaceID == (unsigned int )((struct mDNSInterfaceID_dummystruct *)-1)) {
        m->DiscardLocalOnlyRecords = 1;
      } else {
        if (m->NextScheduledResponse - (m->timenow + mDNSPlatformOneSecond / 10) >=
            0) {
          m->NextScheduledResponse = m->timenow + mDNSPlatformOneSecond / 10;
        }
      }
    } else {
      goto _L___11;
    }
  } else {
    _L___11: /* CIL Label */ 
    (*p) = rr->next;
    if ((unsigned int )m->CurrentRecord == (unsigned int )rr) {
      m->CurrentRecord = rr->next;
    }
    if ((unsigned int )m->NewLocalOnlyRecords == (unsigned int )rr) {
      m->NewLocalOnlyRecords = rr->next;
    }
    rr->next = (AuthRecord *)0L;
    if (! ((int )RecordType == 0)) {
      if (! ((int )RecordType == 1)) {
        rr->resrec.RecordType = (unsigned char)0;
      }
    }
    if ((int )drt == 1) {
      goto _L___10;
    } else {
      if ((int )drt == 2) {
        _L___10: /* CIL Label */ 
        if (! ((int )RecordType == 8)) {
          goto _L___9;
        }
      } else {
        _L___9: /* CIL Label */ ;
      }
    }
    if (rr->NewRData) {
      OldRData = rr->resrec.rdata;
      SetNewRData(& rr->resrec, rr->NewRData, rr->newrdlength);
      rr->NewRData = (RData *)0L;
      if (rr->UpdateCallback) {
        ((*(rr->UpdateCallback)))(m, rr, OldRData);
      }
    }
    m->mDNS_reentrancy ++;
    if ((int )RecordType == 8) {
      if (rr->RecordCallback) {
        ((*(rr->RecordCallback)))(m, rr, -65792);
      }
    } else {
      if ((int )drt == 1) {
        RecordProbeFailure(m, (AuthRecord const   *)rr);
        if (rr->RecordCallback) {
          ((*(rr->RecordCallback)))(m, rr, -65548);
        }
      }
    }
    m->mDNS_reentrancy --;
  }
  return (0);
}
}
static void InitializeDNSMessage(DNSMessageHeader *h , mDNSOpaque16 id , mDNSOpaque16 flags ) 
{ 

  {
  h->id = id;
  h->flags = flags;
  h->numQuestions = (unsigned short)0;
  h->numAnswers = (unsigned short)0;
  h->numAuthorities = (unsigned short)0;
  h->numAdditionals = (unsigned short)0;
  return;
}
}
static mDNSu8 const   *FindCompressionPointer(mDNSu8 const   *base , mDNSu8 const   *end ,
                                              mDNSu8 const   *domname ) 
{ mDNSu8 const   *result ;
  mDNSu8 const   *name ;
  mDNSu8 const   *targ ;
  int i ;
  mDNSu8 const   *pointertarget ;

  {
  result = (end - (int const   )(*domname)) - 1;
  if ((int const   )(*domname) == 0) {
    return ((mDNSu8 const   *)0L);
  }
  while ((unsigned int )result >= (unsigned int )base) {
    if ((int const   )(*(result + 0)) == (int const   )(*(domname + 0))) {
      if ((int const   )(*(result + 1)) == (int const   )(*(domname + 1))) {
        name = domname;
        targ = result;
        while ((unsigned int )(targ + (int const   )(*name)) < (unsigned int )end) {
          i = 0;
          while (i <= (int )(*name)) {
            if ((int const   )(*(targ + i)) != (int const   )(*(name + i))) {
              break;
            }
            i ++;
          }
          if (i <= (int )(*name)) {
            break;
          }
          targ += 1 + (int )(*name);
          name += 1 + (int )(*name);
          if ((int const   )(*name) == 0) {
            if ((int const   )(*targ) == 0) {
              return (result);
            } else {
              goto _L;
            }
          } else {
            _L: /* CIL Label */ ;
          }
          if ((int const   )(*name) == 0) {
            break;
          }
          if ((int const   )(*(targ + 0)) < 64) {
            continue;
          }
          if ((int const   )(*(targ + 0)) < 192) {
            break;
          }
          if ((unsigned int )(targ + 1) >= (unsigned int )end) {
            break;
          }
          pointertarget = (base + ((int )((unsigned short )((int const   )(*(targ +
                                                                             0)) &
                                                            63)) << 8)) + (int const   )(*(targ +
                                                                                           1));
          if ((unsigned int )targ < (unsigned int )pointertarget) {
            break;
          }
          if ((int const   )(*(pointertarget + 0)) >= 64) {
            break;
          }
          targ = pointertarget;
        }
      } else {
        goto _L___0;
      }
    } else {
      _L___0: /* CIL Label */ ;
    }
    result --;
  }
  return ((mDNSu8 const   *)0L);
}
}
static mDNSu8 *putDomainNameAsLabels(DNSMessage const   *msg , mDNSu8 *ptr , mDNSu8 const   *limit ,
                                     domainname const   *name ) 
{ mDNSu8 const   *base ;
  mDNSu8 const   *np ;
  mDNSu8 const   *max ;
  mDNSu8 const   *pointer ;
  mDNSu8 const   *searchlimit ;
  mDNSu16 offset ;
  mDNSu8 *tmp ;
  mDNSu8 *tmp___0 ;
  int i ;
  mDNSu8 len ;
  mDNSu8 const   *tmp___1 ;
  mDNSu8 *tmp___2 ;
  mDNSu8 *tmp___3 ;
  mDNSu8 const   *tmp___4 ;
  mDNSu8 *tmp___5 ;

  {
  base = (mDNSu8 const   *)msg;
  np = (mDNSu8 const   *)(name->c);
  max = (mDNSu8 const   *)(name->c + 255);
  pointer = (mDNSu8 const   *)0L;
  searchlimit = (mDNSu8 const   *)ptr;
  while (1) {
    if ((*np)) {
      if (! ((unsigned int )ptr < (unsigned int )(limit - 1))) {
        goto _L;
      }
    } else {
      _L: /* CIL Label */ 
      break;
    }
    if ((int const   )(*np) > 63) {
      LogMsg("Malformed domain name %##s (label more than 63 bytes)", name->c);
      return ((mDNSu8 *)0L);
    }
    if ((unsigned int )((np + 1) + (int const   )(*np)) >= (unsigned int )max) {
      LogMsg("Malformed domain name %##s (more than 255 bytes)", name->c);
      return ((mDNSu8 *)0L);
    }
    if (base) {
      pointer = FindCompressionPointer(base, searchlimit, np);
    }
    if (pointer) {
      offset = (unsigned short )(pointer - base);
      tmp = ptr;
      ptr ++;
      (*tmp) = (unsigned char )(192 | ((int )offset >> 8));
      tmp___0 = ptr;
      ptr ++;
      (*tmp___0) = (unsigned char )offset;
      return (ptr);
    } else {
      tmp___1 = np;
      np ++;
      len = (mDNSu8 )(*tmp___1);
      if ((unsigned int )((ptr + 1) + (int )len) >= (unsigned int )limit) {
        return ((mDNSu8 *)0L);
      }
      tmp___2 = ptr;
      ptr ++;
      (*tmp___2) = len;
      i = 0;
      while (i < (int )len) {
        tmp___3 = ptr;
        ptr ++;
        tmp___4 = np;
        np ++;
        (*tmp___3) = (*tmp___4);
        i ++;
      }
    }
  }
  if ((unsigned int )ptr < (unsigned int )limit) {
    tmp___5 = ptr;
    ptr ++;
    (*tmp___5) = (unsigned char)0;
    return (ptr);
  }
  return ((mDNSu8 *)0L);
}
}
static mDNSu8 *putRData(DNSMessage const   *msg , mDNSu8 *ptr , mDNSu8 const   *limit ,
                        ResourceRecord *rr ) 
{ mDNSu8 *tmp ;
  mDNSu8 *tmp___0 ;
  mDNSu8 *tmp___1 ;
  mDNSu8 *tmp___2 ;
  mDNSu8 *tmp___3 ;
  mDNSu8 *tmp___4 ;
  mDNSu8 *tmp___5 ;
  mDNSu8 *tmp___6 ;
  mDNSu8 *tmp___7 ;
  mDNSu8 *tmp___8 ;
  mDNSu8 *tmp___9 ;
  mDNSu8 *tmp___10 ;

  {
  switch ((int )rr->rrtype) {
  case 1: ;
  if ((int )rr->rdlength != 4) {
    return ((mDNSu8 *)0L);
  }
  if ((unsigned int )(ptr + 4) > (unsigned int )limit) {
    return ((mDNSu8 *)0L);
  }
  tmp = ptr;
  ptr ++;
  (*tmp) = (rr->rdata)->u.ip.b[0];
  tmp___0 = ptr;
  ptr ++;
  (*tmp___0) = (rr->rdata)->u.ip.b[1];
  tmp___1 = ptr;
  ptr ++;
  (*tmp___1) = (rr->rdata)->u.ip.b[2];
  tmp___2 = ptr;
  ptr ++;
  (*tmp___2) = (rr->rdata)->u.ip.b[3];
  return (ptr);
  case 5: ;
  case 12: 
  tmp___3 = putDomainNameAsLabels(msg, ptr, limit, (domainname const   *)(& (rr->rdata)->u.name));
  return (tmp___3);
  case 13: ;
  case 16: ;
  if ((unsigned int )(ptr + (int )rr->rdlength) > (unsigned int )limit) {
    return ((mDNSu8 *)0L);
  }
  mDNSPlatformMemCopy((void const   *)((rr->rdata)->u.data), (void *)ptr, (unsigned int )rr->rdlength);
  return (ptr + (int )rr->rdlength);
  case 28: ;
  if ((unsigned int )rr->rdlength != sizeof((rr->rdata)->u.ipv6)) {
    return ((mDNSu8 *)0L);
  }
  if ((unsigned int )(ptr + sizeof((rr->rdata)->u.ipv6)) > (unsigned int )limit) {
    return ((mDNSu8 *)0L);
  }
  mDNSPlatformMemCopy((void const   *)(& (rr->rdata)->u.ipv6), (void *)ptr, sizeof((rr->rdata)->u.ipv6));
  return (ptr + sizeof((rr->rdata)->u.ipv6));
  case 33: ;
  if ((unsigned int )(ptr + 6) > (unsigned int )limit) {
    return ((mDNSu8 *)0L);
  }
  tmp___4 = ptr;
  ptr ++;
  (*tmp___4) = (unsigned char )((int )(rr->rdata)->u.srv.priority >> 8);
  tmp___5 = ptr;
  ptr ++;
  (*tmp___5) = (unsigned char )(rr->rdata)->u.srv.priority;
  tmp___6 = ptr;
  ptr ++;
  (*tmp___6) = (unsigned char )((int )(rr->rdata)->u.srv.weight >> 8);
  tmp___7 = ptr;
  ptr ++;
  (*tmp___7) = (unsigned char )(rr->rdata)->u.srv.weight;
  tmp___8 = ptr;
  ptr ++;
  (*tmp___8) = (rr->rdata)->u.srv.port.b[0];
  tmp___9 = ptr;
  ptr ++;
  (*tmp___9) = (rr->rdata)->u.srv.port.b[1];
  tmp___10 = putDomainNameAsLabels(msg, ptr, limit, (domainname const   *)(& (rr->rdata)->u.srv.target));
  return (tmp___10);
  default: ;
  if ((unsigned int )(ptr + (int )rr->rdlength) > (unsigned int )limit) {
    return ((mDNSu8 *)0L);
  }
  mDNSPlatformMemCopy((void const   *)((rr->rdata)->u.data), (void *)ptr, (unsigned int )rr->rdlength);
  return (ptr + (int )rr->rdlength);
  }
}
}
static mDNSu8 *PutResourceRecordTTL(DNSMessage *msg , mDNSu8 *ptr , mDNSu16 *count ,
                                    ResourceRecord *rr , mDNSu32 ttl ) 
{ mDNSu8 *endofrdata ;
  mDNSu16 actualLength ;
  mDNSu8 const   *limit ;
  char *tmp ;

  {
  limit = (mDNSu8 const   *)(msg->data + 8940);
  if (msg->h.numAnswers) {
    goto _L___0;
  } else {
    if (msg->h.numAuthorities) {
      _L___0: /* CIL Label */ 
      goto _L;
    } else {
      if (msg->h.numAdditionals) {
        _L: /* CIL Label */ 
        limit = (mDNSu8 const   *)(msg->data + 1440);
      }
    }
  }
  if ((int )rr->RecordType == 0) {
    tmp = DNSTypeName(rr->rrtype);
    LogMsg("PutResourceRecord ERROR! Attempt to put kDNSRecordTypeUnregistered %##s (%s)",
           rr->name.c, tmp);
    return (ptr);
  }
  ptr = putDomainNameAsLabels((DNSMessage const   *)msg, ptr, limit, (domainname const   *)(& rr->name));
  if (! ptr) {
    goto _L___1;
  } else {
    if ((unsigned int )(ptr + 10) >= (unsigned int )limit) {
      _L___1: /* CIL Label */ 
      return ((mDNSu8 *)0L);
    }
  }
  (*(ptr + 0)) = (unsigned char )((int )rr->rrtype >> 8);
  (*(ptr + 1)) = (unsigned char )rr->rrtype;
  (*(ptr + 2)) = (unsigned char )((int )rr->rrclass >> 8);
  (*(ptr + 3)) = (unsigned char )rr->rrclass;
  (*(ptr + 4)) = (unsigned char )(ttl >> 24);
  (*(ptr + 5)) = (unsigned char )(ttl >> 16);
  (*(ptr + 6)) = (unsigned char )(ttl >> 8);
  (*(ptr + 7)) = (unsigned char )ttl;
  endofrdata = putRData((DNSMessage const   *)msg, ptr + 10, limit, rr);
  if (! endofrdata) {
    return ((mDNSu8 *)0L);
  }
  actualLength = (unsigned short )((endofrdata - ptr) - 10);
  (*(ptr + 8)) = (unsigned char )((int )actualLength >> 8);
  (*(ptr + 9)) = (unsigned char )actualLength;
  (*count) = (mDNSu16 )((int )(*count) + 1);
  return (endofrdata);
}
}
static mDNSu8 *PutResourceRecordCappedTTL(DNSMessage *msg , mDNSu8 *ptr , mDNSu16 *count ,
                                          ResourceRecord *rr , mDNSu32 maxttl ) 
{ mDNSu8 *tmp ;

  {
  if (maxttl > rr->rroriginalttl) {
    maxttl = rr->rroriginalttl;
  }
  tmp = PutResourceRecordTTL(msg, ptr, count, rr, maxttl);
  return (tmp);
}
}
static mDNSu8 *putQuestion(DNSMessage *msg , mDNSu8 *ptr , mDNSu8 const   *limit ,
                           domainname const   *name , mDNSu16 rrtype , mDNSu16 rrclass ) 
{ 

  {
  ptr = putDomainNameAsLabels((DNSMessage const   *)msg, ptr, limit, name);
  if (! ptr) {
    goto _L;
  } else {
    if ((unsigned int )(ptr + 4) >= (unsigned int )limit) {
      _L: /* CIL Label */ 
      return ((mDNSu8 *)0L);
    }
  }
  (*(ptr + 0)) = (unsigned char )((int )rrtype >> 8);
  (*(ptr + 1)) = (unsigned char )rrtype;
  (*(ptr + 2)) = (unsigned char )((int )rrclass >> 8);
  (*(ptr + 3)) = (unsigned char )rrclass;
  msg->h.numQuestions = (mDNSu16 )((int )msg->h.numQuestions + 1);
  return (ptr + 4);
}
}
static mDNSu8 const   *skipDomainName(DNSMessage const   *msg , mDNSu8 const   *ptr ,
                                      mDNSu8 const   *end ) 
{ mDNSu16 total ;
  mDNSu8 len ;
  mDNSu8 const   *tmp ;

  {
  total = (mDNSu16 )0;
  if ((unsigned int )ptr < (unsigned int )((mDNSu8 *)msg)) {
    goto _L;
  } else {
    if ((unsigned int )ptr >= (unsigned int )end) {
      _L: /* CIL Label */ 
      return ((mDNSu8 const   *)0L);
    }
  }
  while (1) {
    tmp = ptr;
    ptr ++;
    len = (mDNSu8 )(*tmp);
    if ((int )len == 0) {
      return (ptr);
    }
    switch ((int )len & 192) {
    case 0: ;
    if ((unsigned int )(ptr + (int )len) >= (unsigned int )end) {
      return ((mDNSu8 const   *)0L);
    }
    if (((int )total + 1) + (int )len >= 255) {
      return ((mDNSu8 const   *)0L);
    }
    ptr += (int )len;
    total = (unsigned short )((int )total + (1 + (int )len));
    break;
    case 64: ;
    return ((mDNSu8 const   *)0L);
    case 128: ;
    return ((mDNSu8 const   *)0L);
    case 192: ;
    return (ptr + 1);
    }
  }
  return ((mDNSu8 const   *)0);
}
}
static mDNSu8 const   *getDomainName(DNSMessage const   *msg , mDNSu8 const   *ptr ,
                                     mDNSu8 const   *end , domainname *name ) 
{ mDNSu8 const   *nextbyte ;
  mDNSu8 *np ;
  mDNSu8 const   *limit ;
  mDNSu8 len ;
  mDNSu8 const   *tmp ;
  int i ;
  mDNSu16 offset ;
  mDNSu8 *tmp___0 ;
  mDNSu8 *tmp___1 ;
  mDNSu8 const   *tmp___2 ;
  mDNSu8 const   *tmp___3 ;

  {
  nextbyte = (mDNSu8 const   *)0L;
  np = name->c;
  limit = (mDNSu8 const   *)(np + 255);
  if ((unsigned int )ptr < (unsigned int )((mDNSu8 *)msg)) {
    goto _L;
  } else {
    if ((unsigned int )ptr >= (unsigned int )end) {
      _L: /* CIL Label */ 
      return ((mDNSu8 const   *)0L);
    }
  }
  (*np) = (unsigned char)0;
  while (1) {
    tmp = ptr;
    ptr ++;
    len = (mDNSu8 )(*tmp);
    if ((int )len == 0) {
      break;
    }
    switch ((int )len & 192) {
    case 0: ;
    if ((unsigned int )(ptr + (int )len) >= (unsigned int )end) {
      return ((mDNSu8 const   *)0L);
    }
    if ((unsigned int )((np + 1) + (int )len) >= (unsigned int )limit) {
      return ((mDNSu8 const   *)0L);
    }
    tmp___0 = np;
    np ++;
    (*tmp___0) = len;
    i = 0;
    while (i < (int )len) {
      tmp___1 = np;
      np ++;
      tmp___2 = ptr;
      ptr ++;
      (*tmp___1) = (*tmp___2);
      i ++;
    }
    (*np) = (unsigned char)0;
    break;
    case 64: ;
    return ((mDNSu8 const   *)0L);
    case 128: ;
    return ((mDNSu8 const   *)0L);
    case 192: 
    tmp___3 = ptr;
    ptr ++;
    offset = (unsigned short )(((int )((unsigned short )((int )len & 63)) << 8) |
                               (int )(*tmp___3));
    if (! nextbyte) {
      nextbyte = ptr;
    }
    ptr = (mDNSu8 const   *)((mDNSu8 *)msg + (int )offset);
    if ((unsigned int )ptr < (unsigned int )((mDNSu8 *)msg)) {
      goto _L___0;
    } else {
      if ((unsigned int )ptr >= (unsigned int )end) {
        _L___0: /* CIL Label */ 
        return ((mDNSu8 const   *)0L);
      }
    }
    if ((int const   )(*ptr) & 192) {
      return ((mDNSu8 const   *)0L);
    }
    break;
    }
  }
  if (nextbyte) {
    return (nextbyte);
  } else {
    return (ptr);
  }
}
}
static mDNSu8 const   *skipResourceRecord(DNSMessage const   *msg , mDNSu8 const   *ptr ,
                                          mDNSu8 const   *end ) 
{ mDNSu16 pktrdlength ;

  {
  ptr = skipDomainName(msg, ptr, end);
  if (! ptr) {
    return ((mDNSu8 const   *)0L);
  }
  if ((unsigned int )(ptr + 10) > (unsigned int )end) {
    return ((mDNSu8 const   *)0L);
  }
  pktrdlength = (unsigned short )(((int )((unsigned short )(*(ptr + 8))) << 8) | (int )(*(ptr +
                                                                                          9)));
  ptr += 10;
  if ((unsigned int )(ptr + (int )pktrdlength) > (unsigned int )end) {
    return ((mDNSu8 const   *)0L);
  }
  return (ptr + (int )pktrdlength);
}
}
static mDNSu8 const   *GetResourceRecord(mDNS *m , DNSMessage const   *msg , mDNSu8 const   *ptr ,
                                         mDNSu8 const   *end , mDNSInterfaceID InterfaceID ,
                                         mDNSu8 RecordType , CacheRecord *rr , RData *RDataStorage ) 
{ mDNSu16 pktrdlength ;
  mDNSu8 const   *tmp ;
  mDNSu8 const   *tmp___0 ;

  {
  rr->next = (CacheRecord *)0L;
  rr->resrec.RecordType = RecordType;
  rr->NextInKAList = (CacheRecord *)0L;
  rr->TimeRcvd = m->timenow;
  rr->NextRequiredQuery = m->timenow;
  rr->LastUsed = m->timenow;
  rr->UseCount = 0U;
  rr->CRActiveQuestion = (DNSQuestion *)0L;
  rr->UnansweredQueries = 0U;
  rr->LastUnansweredTime = 0;
  rr->MPUnansweredQ = 0U;
  rr->MPLastUnansweredQT = 0;
  rr->MPUnansweredKA = 0U;
  rr->MPExpectingKA = 0;
  rr->NextInCFList = (CacheRecord *)0L;
  rr->resrec.InterfaceID = InterfaceID;
  ptr = getDomainName(msg, ptr, end, & rr->resrec.name);
  if (! ptr) {
    return ((mDNSu8 const   *)0L);
  }
  if ((unsigned int )(ptr + 10) > (unsigned int )end) {
    return ((mDNSu8 const   *)0L);
  }
  rr->resrec.rrtype = (unsigned short )(((int )((unsigned short )(*(ptr + 0))) <<
                                         8) | (int )(*(ptr + 1)));
  rr->resrec.rrclass = (unsigned short )((((int )((unsigned short )(*(ptr + 2))) <<
                                           8) | (int )(*(ptr + 3))) & 32767);
  rr->resrec.rroriginalttl = ((((unsigned int )(*(ptr + 4)) << 24) | ((unsigned int )(*(ptr +
                                                                                        5)) <<
                                                                      16)) | ((unsigned int )(*(ptr +
                                                                                                6)) <<
                                                                              8)) |
                             (unsigned int )(*(ptr + 7));
  if ((unsigned long )rr->resrec.rroriginalttl > 1879048192UL / (unsigned long )mDNSPlatformOneSecond) {
    rr->resrec.rroriginalttl = (unsigned int )(1879048192UL / (unsigned long )mDNSPlatformOneSecond);
  }
  pktrdlength = (unsigned short )(((int )((unsigned short )(*(ptr + 8))) << 8) | (int )(*(ptr +
                                                                                          9)));
  if ((int const   )(*(ptr + 2)) & 128) {
    rr->resrec.RecordType = (unsigned char )((int )rr->resrec.RecordType | 32);
  }
  ptr += 10;
  if ((unsigned int )(ptr + (int )pktrdlength) > (unsigned int )end) {
    return ((mDNSu8 const   *)0L);
  }
  if (RDataStorage) {
    rr->resrec.rdata = RDataStorage;
  } else {
    rr->resrec.rdata = (RData *)(& rr->rdatastorage);
    (rr->resrec.rdata)->MaxRDLength = (unsigned short )sizeof(RDataBody );
  }
  switch ((int )rr->resrec.rrtype) {
  case 1: 
  (rr->resrec.rdata)->u.ip.b[0] = (*(ptr + 0));
  (rr->resrec.rdata)->u.ip.b[1] = (*(ptr + 1));
  (rr->resrec.rdata)->u.ip.b[2] = (*(ptr + 2));
  (rr->resrec.rdata)->u.ip.b[3] = (*(ptr + 3));
  break;
  case 5: ;
  case 12: 
  tmp = getDomainName(msg, ptr, end, & (rr->resrec.rdata)->u.name);
  if (! tmp) {
    return ((mDNSu8 const   *)0L);
  }
  break;
  case 10: ;
  case 13: ;
  case 16: ;
  if ((int )pktrdlength > (int )(rr->resrec.rdata)->MaxRDLength) {
    return ((mDNSu8 const   *)0L);
  }
  rr->resrec.rdlength = pktrdlength;
  mDNSPlatformMemCopy((void const   *)ptr, (void *)((rr->resrec.rdata)->u.data), (unsigned int )pktrdlength);
  break;
  case 28: 
  mDNSPlatformMemCopy((void const   *)ptr, (void *)(& (rr->resrec.rdata)->u.ipv6),
                      sizeof((rr->resrec.rdata)->u.ipv6));
  break;
  case 33: 
  (rr->resrec.rdata)->u.srv.priority = (unsigned short )(((int )((unsigned short )(*(ptr +
                                                                                     0))) <<
                                                          8) | (int )(*(ptr + 1)));
  (rr->resrec.rdata)->u.srv.weight = (unsigned short )(((int )((unsigned short )(*(ptr +
                                                                                   2))) <<
                                                        8) | (int )(*(ptr + 3)));
  (rr->resrec.rdata)->u.srv.port.b[0] = (*(ptr + 4));
  (rr->resrec.rdata)->u.srv.port.b[1] = (*(ptr + 5));
  tmp___0 = getDomainName(msg, ptr + 6, end, & (rr->resrec.rdata)->u.srv.target);
  if (! tmp___0) {
    return ((mDNSu8 const   *)0L);
  }
  break;
  default: ;
  if ((int )pktrdlength > (int )(rr->resrec.rdata)->MaxRDLength) {
    return ((mDNSu8 const   *)0L);
  }
  rr->resrec.rdlength = pktrdlength;
  mDNSPlatformMemCopy((void const   *)ptr, (void *)((rr->resrec.rdata)->u.data), (unsigned int )pktrdlength);
  break;
  }
  rr->resrec.namehash = DomainNameHashValue((domainname const   *)(& rr->resrec.name));
  SetNewRData(& rr->resrec, (RData *)0L, (unsigned short)0);
  return (ptr + (int )pktrdlength);
}
}
static mDNSu8 const   *skipQuestion(DNSMessage const   *msg , mDNSu8 const   *ptr ,
                                    mDNSu8 const   *end ) 
{ 

  {
  ptr = skipDomainName(msg, ptr, end);
  if (! ptr) {
    return ((mDNSu8 const   *)0L);
  }
  if ((unsigned int )(ptr + 4) > (unsigned int )end) {
    return ((mDNSu8 const   *)0L);
  }
  return (ptr + 4);
}
}
static mDNSu8 const   *getQuestion(DNSMessage const   *msg , mDNSu8 const   *ptr ,
                                   mDNSu8 const   *end , mDNSInterfaceID InterfaceID ,
                                   DNSQuestion *question ) 
{ 

  {
  question->InterfaceID = InterfaceID;
  ptr = getDomainName(msg, ptr, end, & question->qname);
  if (! ptr) {
    return ((mDNSu8 const   *)0L);
  }
  if ((unsigned int )(ptr + 4) > (unsigned int )end) {
    return ((mDNSu8 const   *)0L);
  }
  question->qnamehash = DomainNameHashValue((domainname const   *)(& question->qname));
  question->qtype = (unsigned short )(((int )((unsigned short )(*(ptr + 0))) << 8) |
                                      (int )(*(ptr + 1)));
  question->qclass = (unsigned short )(((int )((unsigned short )(*(ptr + 2))) << 8) |
                                       (int )(*(ptr + 3)));
  return (ptr + 4);
}
}
static mDNSu8 const   *LocateAnswers(DNSMessage const   *msg , mDNSu8 const   *end ) 
{ int i ;
  mDNSu8 const   *ptr ;

  {
  ptr = (mDNSu8 const   *)(msg->data);
  i = 0;
  while (1) {
    if (i < (int )msg->h.numQuestions) {
      if (! ptr) {
        goto _L;
      }
    } else {
      _L: /* CIL Label */ 
      break;
    }
    ptr = skipQuestion(msg, ptr, end);
    i ++;
  }
  return (ptr);
}
}
static mDNSu8 const   *LocateAuthorities(DNSMessage const   *msg , mDNSu8 const   *end ) 
{ int i ;
  mDNSu8 const   *ptr ;
  mDNSu8 const   *tmp ;

  {
  tmp = LocateAnswers(msg, end);
  ptr = tmp;
  i = 0;
  while (1) {
    if (i < (int )msg->h.numAnswers) {
      if (! ptr) {
        goto _L;
      }
    } else {
      _L: /* CIL Label */ 
      break;
    }
    ptr = skipResourceRecord(msg, ptr, end);
    i ++;
  }
  return (ptr);
}
}
static mStatus mDNSSendDNSMessage(mDNS const   *m , DNSMessage *msg , mDNSu8 const   *end ,
                                  mDNSInterfaceID InterfaceID , mDNSIPPort srcport ,
                                  mDNSAddr const   *dst , mDNSIPPort dstport ) 
{ mStatus status ;
  mDNSu16 numQuestions ;
  mDNSu16 numAnswers ;
  mDNSu16 numAuthorities ;
  mDNSu16 numAdditionals ;
  mDNSu8 *ptr ;
  mDNSu8 *tmp ;
  mDNSu8 *tmp___0 ;
  mDNSu8 *tmp___1 ;
  mDNSu8 *tmp___2 ;
  mDNSu8 *tmp___3 ;
  mDNSu8 *tmp___4 ;
  mDNSu8 *tmp___5 ;
  mDNSu8 *tmp___6 ;

  {
  numQuestions = msg->h.numQuestions;
  numAnswers = msg->h.numAnswers;
  numAuthorities = msg->h.numAuthorities;
  numAdditionals = msg->h.numAdditionals;
  ptr = (mDNSu8 *)(& msg->h.numQuestions);
  tmp = ptr;
  ptr ++;
  (*tmp) = (unsigned char )((int )numQuestions >> 8);
  tmp___0 = ptr;
  ptr ++;
  (*tmp___0) = (unsigned char )numQuestions;
  tmp___1 = ptr;
  ptr ++;
  (*tmp___1) = (unsigned char )((int )numAnswers >> 8);
  tmp___2 = ptr;
  ptr ++;
  (*tmp___2) = (unsigned char )numAnswers;
  tmp___3 = ptr;
  ptr ++;
  (*tmp___3) = (unsigned char )((int )numAuthorities >> 8);
  tmp___4 = ptr;
  ptr ++;
  (*tmp___4) = (unsigned char )numAuthorities;
  tmp___5 = ptr;
  ptr ++;
  (*tmp___5) = (unsigned char )((int )numAdditionals >> 8);
  tmp___6 = ptr;
  ptr ++;
  (*tmp___6) = (unsigned char )numAdditionals;
  status = mDNSPlatformSendUDP(m, (DNSMessage const   *)msg, end, InterfaceID, srcport,
                               dst, dstport);
  msg->h.numQuestions = numQuestions;
  msg->h.numAnswers = numAnswers;
  msg->h.numAuthorities = numAuthorities;
  msg->h.numAdditionals = numAdditionals;
  return (status);
}
}
static void CompleteDeregistration(mDNS *m , AuthRecord *rr ) 
{ 

  {
  rr->resrec.RecordType = (unsigned char)8;
  rr->AnnounceCount = (unsigned char)10;
  mDNS_Deregister_internal(m, rr, 0);
  return;
}
}
static void DiscardDeregistrations(mDNS *m ) 
{ AuthRecord *rr ;

  {
  if (m->CurrentRecord) {
    LogMsg("DiscardDeregistrations ERROR m->CurrentRecord already set");
  }
  m->CurrentRecord = m->ResourceRecords;
  while (m->CurrentRecord) {
    rr = m->CurrentRecord;
    m->CurrentRecord = rr->next;
    if ((int )rr->resrec.RecordType == 1) {
      CompleteDeregistration(m, rr);
    }
  }
  return;
}
}
static mDNSBool HaveSentEntireRRSet(mDNS const   *m , AuthRecord const   *rr , mDNSInterfaceID InterfaceID ) 
{ AuthRecord const   *a ;
  mDNSBool tmp ;

  {
  a = (AuthRecord const   *)m->ResourceRecords;
  while (a) {
    if ((unsigned int )a->SendRNow == (unsigned int )InterfaceID) {
      if ((unsigned int )a != (unsigned int )rr) {
        tmp = SameResourceRecordSignature((ResourceRecord const   *)(& a->resrec),
                                          (ResourceRecord const   *)(& rr->resrec));
        if (tmp) {
          break;
        } else {
          goto _L___0;
        }
      } else {
        goto _L___0;
      }
    } else {
      _L___0: /* CIL Label */ ;
    }
    a = (AuthRecord const   *)a->next;
  }
  return ((unsigned int )a == (unsigned int )((AuthRecord const   *)0));
}
}
static void SendResponses(mDNS *m ) 
{ int pktcount ;
  AuthRecord *rr ;
  AuthRecord *r2 ;
  mDNSs32 maxExistingAnnounceInterval ;
  NetworkInterfaceInfo const   *intf ;
  NetworkInterfaceInfo const   *tmp ;
  mDNSBool tmp___0 ;
  mDNSBool tmp___1 ;
  mDNSBool tmp___2 ;
  int numDereg ;
  int numAnnounce ;
  int numAnswer ;
  DNSMessage response ;
  mDNSu8 *responseptr ;
  mDNSu8 *newptr ;
  RData *OldRData ;
  mDNSu16 oldrdlength ;
  mDNSBool tmp___4 ;
  mDNSBool tmp___5 ;
  mDNSu32 tmp___6 ;
  AuthRecord const   *a ;
  mDNSBool tmp___7 ;
  NetworkInterfaceInfo const   *next ;
  NetworkInterfaceInfo const   *tmp___8 ;
  RData *OldRData___0 ;

  {
  pktcount = 0;
  maxExistingAnnounceInterval = 0;
  tmp = GetFirstActiveInterface((NetworkInterfaceInfo const   *)m->HostInterfaces);
  intf = tmp;
  m->NextScheduledResponse = m->timenow + 2013265920;
  rr = m->ResourceRecords;
  while (rr) {
    if (rr->NextUpdateCredit) {
      if (m->timenow - rr->NextUpdateCredit >= 0) {
        rr->UpdateCredits ++;
        if (rr->UpdateCredits >= 10U) {
          rr->NextUpdateCredit = 0;
        } else {
          rr->NextUpdateCredit = (m->timenow + mDNSPlatformOneSecond * 60) | 1;
        }
      } else {
        goto _L;
      }
    } else {
      _L: /* CIL Label */ ;
    }
    if (rr->AnnounceCount) {
      if (m->timenow - (rr->LastAPTime + rr->ThisAPInterval) >= 0) {
        if ((int )rr->resrec.RecordType & 60) {
          if ((unsigned int )rr->Additional1 == (unsigned int )((AuthRecord *)0)) {
            goto _L___6;
          } else {
            if ((int )(rr->Additional1)->resrec.RecordType & 60) {
              _L___6: /* CIL Label */ 
              if ((unsigned int )rr->Additional2 == (unsigned int )((AuthRecord *)0)) {
                goto _L___4;
              } else {
                if ((int )(rr->Additional2)->resrec.RecordType & 60) {
                  _L___4: /* CIL Label */ 
                  if ((unsigned int )rr->DependentOn == (unsigned int )((AuthRecord *)0)) {
                    goto _L___2;
                  } else {
                    if ((int )(rr->DependentOn)->resrec.RecordType & 60) {
                      _L___2: /* CIL Label */ 
                      rr->ImmedAnswer = (struct mDNSInterfaceID_dummystruct *)mDNSInterfaceMark;
                      if (maxExistingAnnounceInterval < rr->ThisAPInterval) {
                        maxExistingAnnounceInterval = rr->ThisAPInterval;
                      }
                      if (rr->UpdateBlocked) {
                        rr->UpdateBlocked = 0;
                      }
                    } else {
                      goto _L___5;
                    }
                  }
                } else {
                  goto _L___5;
                }
              }
            } else {
              goto _L___5;
            }
          }
        } else {
          _L___5: /* CIL Label */ 
          goto _L___7;
        }
      } else {
        goto _L___7;
      }
    } else {
      _L___7: /* CIL Label */ ;
    }
    rr = rr->next;
  }
  rr = m->ResourceRecords;
  while (rr) {
    if (rr->resrec.InterfaceID) {
      if (rr->ImmedAnswer) {
        goto _L___11;
      } else {
        goto _L___18;
      }
    } else {
      _L___18: /* CIL Label */ 
      if (rr->ThisAPInterval <= maxExistingAnnounceInterval) {
        if (rr->AnnounceCount) {
          if ((m->timenow + rr->ThisAPInterval / 2) - (rr->LastAPTime + rr->ThisAPInterval) >=
              0) {
            if ((int )rr->resrec.RecordType & 60) {
              if ((unsigned int )rr->Additional1 == (unsigned int )((AuthRecord *)0)) {
                goto _L___15;
              } else {
                if ((int )(rr->Additional1)->resrec.RecordType & 60) {
                  _L___15: /* CIL Label */ 
                  if ((unsigned int )rr->Additional2 == (unsigned int )((AuthRecord *)0)) {
                    goto _L___13;
                  } else {
                    if ((int )(rr->Additional2)->resrec.RecordType & 60) {
                      _L___13: /* CIL Label */ 
                      if ((unsigned int )rr->DependentOn == (unsigned int )((AuthRecord *)0)) {
                        goto _L___11;
                      } else {
                        if ((int )(rr->DependentOn)->resrec.RecordType & 60) {
                          _L___11: /* CIL Label */ 
                          rr->ImmedAnswer = (struct mDNSInterfaceID_dummystruct *)mDNSInterfaceMark;
                        } else {
                          goto _L___14;
                        }
                      }
                    } else {
                      goto _L___14;
                    }
                  }
                } else {
                  goto _L___14;
                }
              }
            } else {
              _L___14: /* CIL Label */ 
              goto _L___16;
            }
          } else {
            goto _L___17;
          }
        } else {
          _L___17: /* CIL Label */ 
          goto _L___16;
        }
      } else {
        _L___16: /* CIL Label */ ;
      }
    }
    rr = rr->next;
  }
  rr = m->ResourceRecords;
  while (rr) {
    if (rr->ImmedAnswer) {
      if ((int )rr->resrec.rrtype == 33) {
        r2 = m->ResourceRecords;
        while (r2) {
          if ((int )r2->resrec.rrtype == 1) {
            goto _L___31;
          } else {
            if ((int )r2->resrec.rrtype == 28) {
              _L___31: /* CIL Label */ 
              if ((int )r2->resrec.RecordType & 60) {
                if ((unsigned int )r2->Additional1 == (unsigned int )((AuthRecord *)0)) {
                  goto _L___30;
                } else {
                  if ((int )(r2->Additional1)->resrec.RecordType & 60) {
                    _L___30: /* CIL Label */ 
                    if ((unsigned int )r2->Additional2 == (unsigned int )((AuthRecord *)0)) {
                      goto _L___28;
                    } else {
                      if ((int )(r2->Additional2)->resrec.RecordType & 60) {
                        _L___28: /* CIL Label */ 
                        if ((unsigned int )r2->DependentOn == (unsigned int )((AuthRecord *)0)) {
                          goto _L___26;
                        } else {
                          if ((int )(r2->DependentOn)->resrec.RecordType & 60) {
                            _L___26: /* CIL Label */ 
                            if (rr->LastMCTime - r2->LastMCTime >= 0) {
                              if (rr->resrec.rdnamehash == r2->resrec.namehash) {
                                tmp___0 = SameDomainName((domainname const   *)(& (rr->resrec.rdata)->u.srv.target),
                                                         (domainname const   *)(& r2->resrec.name));
                                if (tmp___0) {
                                  if ((unsigned int )rr->ImmedAnswer == (unsigned int )mDNSInterfaceMark) {
                                    goto _L___20;
                                  } else {
                                    if ((unsigned int )rr->ImmedAnswer == (unsigned int )r2->resrec.InterfaceID) {
                                      _L___20: /* CIL Label */ 
                                      r2->ImmedAnswer = (struct mDNSInterfaceID_dummystruct *)mDNSInterfaceMark;
                                    } else {
                                      goto _L___24;
                                    }
                                  }
                                } else {
                                  goto _L___24;
                                }
                              } else {
                                goto _L___24;
                              }
                            } else {
                              goto _L___24;
                            }
                          } else {
                            goto _L___29;
                          }
                        }
                      } else {
                        goto _L___29;
                      }
                    }
                  } else {
                    goto _L___29;
                  }
                }
              } else {
                _L___29: /* CIL Label */ 
                goto _L___24;
              }
            } else {
              _L___24: /* CIL Label */ ;
            }
          }
          r2 = r2->next;
        }
      } else {
        goto _L___32;
      }
    } else {
      _L___32: /* CIL Label */ ;
    }
    rr = rr->next;
  }
  rr = m->ResourceRecords;
  while (rr) {
    if ((int )rr->resrec.RecordType & 50) {
      if (rr->ImmedAnswer) {
        r2 = m->ResourceRecords;
        while (r2) {
          if ((int )r2->resrec.RecordType & 60) {
            if ((unsigned int )r2->Additional1 == (unsigned int )((AuthRecord *)0)) {
              goto _L___40;
            } else {
              if ((int )(r2->Additional1)->resrec.RecordType & 60) {
                _L___40: /* CIL Label */ 
                if ((unsigned int )r2->Additional2 == (unsigned int )((AuthRecord *)0)) {
                  goto _L___38;
                } else {
                  if ((int )(r2->Additional2)->resrec.RecordType & 60) {
                    _L___38: /* CIL Label */ 
                    if ((unsigned int )r2->DependentOn == (unsigned int )((AuthRecord *)0)) {
                      goto _L___36;
                    } else {
                      if ((int )(r2->DependentOn)->resrec.RecordType & 60) {
                        _L___36: /* CIL Label */ 
                        if ((unsigned int )r2->ImmedAnswer != (unsigned int )mDNSInterfaceMark) {
                          if ((unsigned int )r2->ImmedAnswer != (unsigned int )rr->ImmedAnswer) {
                            tmp___1 = SameResourceRecordSignature((ResourceRecord const   *)(& r2->resrec),
                                                                  (ResourceRecord const   *)(& rr->resrec));
                            if (tmp___1) {
                              r2->ImmedAnswer = rr->ImmedAnswer;
                            } else {
                              goto _L___34;
                            }
                          } else {
                            goto _L___34;
                          }
                        } else {
                          _L___34: /* CIL Label */ ;
                        }
                      } else {
                        goto _L___39;
                      }
                    }
                  } else {
                    goto _L___39;
                  }
                }
              } else {
                goto _L___39;
              }
            }
          } else {
            _L___39: /* CIL Label */ ;
          }
          r2 = r2->next;
        }
      } else {
        if (rr->ImmedAdditional) {
          r2 = m->ResourceRecords;
          while (r2) {
            if ((int )r2->resrec.RecordType & 60) {
              if ((unsigned int )r2->Additional1 == (unsigned int )((AuthRecord *)0)) {
                goto _L___47;
              } else {
                if ((int )(r2->Additional1)->resrec.RecordType & 60) {
                  _L___47: /* CIL Label */ 
                  if ((unsigned int )r2->Additional2 == (unsigned int )((AuthRecord *)0)) {
                    goto _L___45;
                  } else {
                    if ((int )(r2->Additional2)->resrec.RecordType & 60) {
                      _L___45: /* CIL Label */ 
                      if ((unsigned int )r2->DependentOn == (unsigned int )((AuthRecord *)0)) {
                        goto _L___43;
                      } else {
                        if ((int )(r2->DependentOn)->resrec.RecordType & 60) {
                          _L___43: /* CIL Label */ 
                          if ((unsigned int )r2->ImmedAdditional != (unsigned int )rr->ImmedAdditional) {
                            tmp___2 = SameResourceRecordSignature((ResourceRecord const   *)(& r2->resrec),
                                                                  (ResourceRecord const   *)(& rr->resrec));
                            if (tmp___2) {
                              r2->ImmedAdditional = rr->ImmedAdditional;
                            } else {
                              goto _L___41;
                            }
                          } else {
                            _L___41: /* CIL Label */ ;
                          }
                        } else {
                          goto _L___46;
                        }
                      }
                    } else {
                      goto _L___46;
                    }
                  }
                } else {
                  goto _L___46;
                }
              }
            } else {
              _L___46: /* CIL Label */ ;
            }
            r2 = r2->next;
          }
        }
      }
    }
    rr = rr->next;
  }
  rr = m->ResourceRecords;
  while (rr) {
    if ((unsigned int )rr->ImmedAnswer == (unsigned int )mDNSInterfaceMark) {
      if (! intf) {
        rr->SendRNow = (struct mDNSInterfaceID_dummystruct *)0L;
      } else {
        if (rr->resrec.InterfaceID) {
          rr->SendRNow = rr->resrec.InterfaceID;
        } else {
          rr->SendRNow = intf->InterfaceID;
        }
      }
      rr->ImmedAdditional = (struct mDNSInterfaceID_dummystruct *)0L;
      rr->LastMCTime = m->timenow;
      rr->LastMCInterface = rr->ImmedAnswer;
      if (rr->AnnounceCount) {
        if ((m->timenow + rr->ThisAPInterval / 2) - (rr->LastAPTime + rr->ThisAPInterval) >=
            0) {
          rr->AnnounceCount = (mDNSu8 )((int )rr->AnnounceCount - 1);
          rr->ThisAPInterval *= 2;
          rr->LastAPTime = m->timenow;
          if ((rr->LastAPTime + rr->ThisAPInterval) - rr->AnnounceUntil >= 0) {
            rr->AnnounceCount = (unsigned char)0;
          }
        } else {
          goto _L___48;
        }
      } else {
        _L___48: /* CIL Label */ ;
      }
    } else {
      if (rr->ImmedAnswer) {
        rr->SendRNow = rr->ImmedAnswer;
        rr->ImmedAdditional = (struct mDNSInterfaceID_dummystruct *)0L;
        rr->LastMCTime = m->timenow;
        rr->LastMCInterface = rr->ImmedAnswer;
      }
    }
    SetNextAnnounceProbeTime(m, (AuthRecord const   *)rr);
    rr = rr->next;
  }
  while (intf) {
    numDereg = 0;
    numAnnounce = 0;
    numAnswer = 0;
    responseptr = response.data;
    InitializeDNSMessage(& response.h, zeroID, ResponseFlags);
    rr = m->ResourceRecords;
    while (rr) {
      if ((unsigned int )rr->SendRNow == (unsigned int )intf->InterfaceID) {
        if ((int )rr->resrec.RecordType == 1) {
          newptr = PutResourceRecordTTL(& response, responseptr, & response.h.numAnswers,
                                        & rr->resrec, 0U);
          if (! newptr) {
            if (response.h.numAnswers) {
              break;
            } else {
              goto _L___49;
            }
          } else {
            _L___49: /* CIL Label */ ;
          }
          numDereg ++;
          responseptr = newptr;
        } else {
          if (rr->NewRData) {
            OldRData = rr->resrec.rdata;
            oldrdlength = rr->resrec.rdlength;
            if ((int )rr->resrec.RecordType & 60) {
              if ((unsigned int )rr->Additional1 == (unsigned int )((AuthRecord *)0)) {
                goto _L___57;
              } else {
                if ((int )(rr->Additional1)->resrec.RecordType & 60) {
                  _L___57: /* CIL Label */ 
                  if ((unsigned int )rr->Additional2 == (unsigned int )((AuthRecord *)0)) {
                    goto _L___55;
                  } else {
                    if ((int )(rr->Additional2)->resrec.RecordType & 60) {
                      _L___55: /* CIL Label */ 
                      if ((unsigned int )rr->DependentOn == (unsigned int )((AuthRecord *)0)) {
                        goto _L___53;
                      } else {
                        if ((int )(rr->DependentOn)->resrec.RecordType & 60) {
                          _L___53: /* CIL Label */ 
                          if ((int )rr->AnnounceCount < 9) {
                            newptr = PutResourceRecordTTL(& response, responseptr,
                                                          & response.h.numAnswers,
                                                          & rr->resrec, 0U);
                            if (! newptr) {
                              if (response.h.numAnswers) {
                                break;
                              } else {
                                goto _L___50;
                              }
                            } else {
                              _L___50: /* CIL Label */ ;
                            }
                            numDereg ++;
                            responseptr = newptr;
                          } else {
                            goto _L___56;
                          }
                        } else {
                          goto _L___56;
                        }
                      }
                    } else {
                      goto _L___56;
                    }
                  }
                } else {
                  goto _L___56;
                }
              }
            } else {
              _L___56: /* CIL Label */ ;
            }
            SetNewRData(& rr->resrec, rr->NewRData, rr->newrdlength);
            if ((int )rr->resrec.RecordType & 50) {
              tmp___4 = HaveSentEntireRRSet((mDNS const   *)m, (AuthRecord const   *)rr,
                                            intf->InterfaceID);
              if (tmp___4) {
                rr->resrec.rrclass = (unsigned short )((int )rr->resrec.rrclass |
                                                       32768);
              } else {
                goto _L___58;
              }
            } else {
              _L___58: /* CIL Label */ ;
            }
            newptr = PutResourceRecordTTL(& response, responseptr, & response.h.numAnswers,
                                          & rr->resrec, rr->resrec.rroriginalttl);
            rr->resrec.rrclass = (unsigned short )((int )rr->resrec.rrclass & -32769);
            if (newptr) {
              responseptr = newptr;
            }
            SetNewRData(& rr->resrec, OldRData, oldrdlength);
          } else {
            if ((int )rr->resrec.RecordType & 50) {
              tmp___5 = HaveSentEntireRRSet((mDNS const   *)m, (AuthRecord const   *)rr,
                                            intf->InterfaceID);
              if (tmp___5) {
                rr->resrec.rrclass = (unsigned short )((int )rr->resrec.rrclass |
                                                       32768);
              } else {
                goto _L___59;
              }
            } else {
              _L___59: /* CIL Label */ ;
            }
            if (m->SleepState) {
              tmp___6 = 0U;
            } else {
              tmp___6 = rr->resrec.rroriginalttl;
            }
            newptr = PutResourceRecordTTL(& response, responseptr, & response.h.numAnswers,
                                          & rr->resrec, tmp___6);
            rr->resrec.rrclass = (unsigned short )((int )rr->resrec.rrclass & -32769);
            if (! newptr) {
              if (response.h.numAnswers) {
                break;
              } else {
                goto _L___60;
              }
            } else {
              _L___60: /* CIL Label */ ;
            }
            if (rr->LastAPTime == m->timenow) {
              numAnnounce ++;
            } else {
              numAnswer ++;
            }
            responseptr = newptr;
          }
        }
        if ((unsigned int )rr->ImmedAnswer == (unsigned int )mDNSInterfaceMark) {
          if ((unsigned int )rr->resrec.InterfaceID == (unsigned int )mDNSInterface_Any) {
            rr->SendRNow = GetNextActiveInterfaceID(intf);
          } else {
            goto _L___61;
          }
        } else {
          _L___61: /* CIL Label */ 
          rr->SendRNow = (struct mDNSInterfaceID_dummystruct *)0L;
        }
      }
      rr = rr->next;
    }
    newptr = responseptr;
    rr = m->ResourceRecords;
    while (rr) {
      if ((unsigned int )rr->ImmedAdditional == (unsigned int )intf->InterfaceID) {
        rr->ImmedAdditional = (struct mDNSInterfaceID_dummystruct *)0L;
        if (newptr) {
          if ((int )rr->resrec.RecordType & 60) {
            if ((unsigned int )rr->Additional1 == (unsigned int )((AuthRecord *)0)) {
              goto _L___69;
            } else {
              if ((int )(rr->Additional1)->resrec.RecordType & 60) {
                _L___69: /* CIL Label */ 
                if ((unsigned int )rr->Additional2 == (unsigned int )((AuthRecord *)0)) {
                  goto _L___67;
                } else {
                  if ((int )(rr->Additional2)->resrec.RecordType & 60) {
                    _L___67: /* CIL Label */ 
                    if ((unsigned int )rr->DependentOn == (unsigned int )((AuthRecord *)0)) {
                      goto _L___65;
                    } else {
                      if ((int )(rr->DependentOn)->resrec.RecordType & 60) {
                        _L___65: /* CIL Label */ 
                        if ((int )rr->resrec.RecordType & 50) {
                          a = (AuthRecord const   *)m->ResourceRecords;
                          while (a) {
                            if ((unsigned int )a->ImmedAdditional == (unsigned int )intf->InterfaceID) {
                              tmp___7 = SameResourceRecordSignature((ResourceRecord const   *)(& a->resrec),
                                                                    (ResourceRecord const   *)(& rr->resrec));
                              if (tmp___7) {
                                break;
                              } else {
                                goto _L___62;
                              }
                            } else {
                              _L___62: /* CIL Label */ ;
                            }
                            a = (AuthRecord const   *)a->next;
                          }
                          if ((unsigned int )a == (unsigned int )((AuthRecord const   *)0)) {
                            rr->resrec.rrclass = (unsigned short )((int )rr->resrec.rrclass |
                                                                   32768);
                          }
                        }
                        newptr = PutResourceRecordTTL(& response, newptr, & response.h.numAdditionals,
                                                      & rr->resrec, rr->resrec.rroriginalttl);
                        if (newptr) {
                          responseptr = newptr;
                        }
                        rr->resrec.rrclass = (unsigned short )((int )rr->resrec.rrclass &
                                                               -32769);
                      } else {
                        goto _L___68;
                      }
                    }
                  } else {
                    goto _L___68;
                  }
                }
              } else {
                goto _L___68;
              }
            }
          } else {
            _L___68: /* CIL Label */ 
            goto _L___63;
          }
        } else {
          _L___63: /* CIL Label */ ;
        }
      }
      rr = rr->next;
    }
    if ((int )response.h.numAnswers > 0) {
      mDNSSendDNSMessage((mDNS const   *)m, & response, (mDNSu8 const   *)responseptr,
                         intf->InterfaceID, MulticastDNSPort, & AllDNSLinkGroup_v4,
                         MulticastDNSPort);
      mDNSSendDNSMessage((mDNS const   *)m, & response, (mDNSu8 const   *)responseptr,
                         intf->InterfaceID, MulticastDNSPort, & AllDNSLinkGroup_v6,
                         MulticastDNSPort);
      if (! m->SuppressSending) {
        m->SuppressSending = (m->timenow + mDNSPlatformOneSecond / 10) | 1;
      }
      pktcount ++;
      if (pktcount >= 1000) {
        LogMsg("SendResponses exceeded loop limit %d: giving up", pktcount);
        break;
      }
    } else {
      tmp___8 = GetFirstActiveInterface((NetworkInterfaceInfo const   *)intf->next);
      next = tmp___8;
      intf = next;
    }
  }
  if (m->CurrentRecord) {
    LogMsg("SendResponses: ERROR m->CurrentRecord already set");
  }
  m->CurrentRecord = m->ResourceRecords;
  while (m->CurrentRecord) {
    rr = m->CurrentRecord;
    m->CurrentRecord = rr->next;
    if (rr->NewRData) {
      OldRData___0 = rr->resrec.rdata;
      SetNewRData(& rr->resrec, rr->NewRData, rr->newrdlength);
      rr->NewRData = (RData *)0L;
      if (rr->UpdateCallback) {
        ((*(rr->UpdateCallback)))(m, rr, OldRData___0);
      }
    }
    if ((int )rr->resrec.RecordType == 1) {
      CompleteDeregistration(m, rr);
    } else {
      rr->ImmedAnswer = (struct mDNSInterfaceID_dummystruct *)0L;
      rr->v4Requester = zeroIPAddr;
      rr->v6Requester = zerov6Addr;
    }
  }
  return;
}
}
static void SetNextCacheCheckTime(mDNS *m , CacheRecord *rr ) 
{ mDNSu32 tmp ;
  int tmp___2 ;
  int tmp___6 ;

  {
  rr->NextRequiredQuery = rr->TimeRcvd + (int )rr->resrec.rroriginalttl * mDNSPlatformOneSecond;
  if (rr->CRActiveQuestion) {
    if (rr->UnansweredQueries < 4U) {
      rr->NextRequiredQuery = (int )((mDNSu32 )rr->NextRequiredQuery - (mDNSu32 )(((int )rr->resrec.rroriginalttl *
                                                                                   mDNSPlatformOneSecond) /
                                                                                  20) *
                                                                       (4U - rr->UnansweredQueries));
      tmp = mDNSRandom((unsigned int )((int )rr->resrec.rroriginalttl * mDNSPlatformOneSecond) /
                       50U);
      rr->NextRequiredQuery = (int )((mDNSu32 )rr->NextRequiredQuery + tmp);
    } else {
      goto _L;
    }
  } else {
    _L: /* CIL Label */ ;
  }
  if ((unsigned int )rr->CRActiveQuestion == (unsigned int )((DNSQuestion *)0)) {
    tmp___6 = 60 * mDNSPlatformOneSecond;
  } else {
    if (rr->UnansweredQueries < 4U) {
      tmp___6 = ((int )rr->resrec.rroriginalttl * mDNSPlatformOneSecond) / 50;
    } else {
      if (rr->resrec.rroriginalttl > 10U) {
        tmp___6 = mDNSPlatformOneSecond;
      } else {
        tmp___6 = mDNSPlatformOneSecond / 10;
      }
    }
  }
  if (m->NextCacheCheck - (rr->NextRequiredQuery + tmp___6) > 0) {
    if ((unsigned int )rr->CRActiveQuestion == (unsigned int )((DNSQuestion *)0)) {
      tmp___2 = 60 * mDNSPlatformOneSecond;
    } else {
      if (rr->UnansweredQueries < 4U) {
        tmp___2 = ((int )rr->resrec.rroriginalttl * mDNSPlatformOneSecond) / 50;
      } else {
        if (rr->resrec.rroriginalttl > 10U) {
          tmp___2 = mDNSPlatformOneSecond;
        } else {
          tmp___2 = mDNSPlatformOneSecond / 10;
        }
      }
    }
    m->NextCacheCheck = rr->NextRequiredQuery + tmp___2;
  }
  return;
}
}
static mStatus mDNS_Reconfirm_internal(mDNS *m , CacheRecord *rr , mDNSu32 interval ) 
{ mDNSu32 tmp ;

  {
  if (interval < (unsigned int )mDNSPlatformOneSecond * 5U) {
    interval = (unsigned int )mDNSPlatformOneSecond * 5U;
  }
  if (interval > 268435456U) {
    interval = 268435456U;
  }
  if ((rr->TimeRcvd + (int )rr->resrec.rroriginalttl * mDNSPlatformOneSecond) - m->timenow >
      (int )((interval * 4U) / 3U)) {
    tmp = mDNSRandom(interval / 3U);
    interval += tmp;
    rr->TimeRcvd = m->timenow - (int )interval * 3;
    rr->resrec.rroriginalttl = (interval * 4U) / (mDNSu32 )mDNSPlatformOneSecond;
    SetNextCacheCheckTime(m, rr);
  }
  return (0);
}
}
static mDNSBool BuildQuestion(mDNS *m , DNSMessage *query , mDNSu8 **queryptr , DNSQuestion *q ,
                              CacheRecord ***kalistptrptr , mDNSu32 *answerforecast ) 
{ mDNSBool ucast ;
  int tmp ;
  mDNSu16 ucbit ;
  int tmp___0 ;
  mDNSu8 const   *limit ;
  mDNSu8 *newptr ;
  mDNSu8 *tmp___1 ;
  mDNSu32 forecast ;
  CacheRecord *rr ;
  CacheRecord **ka ;
  mDNSu32 tmp___2 ;
  CacheRecord *rr___0 ;
  mDNSBool tmp___3 ;
  CacheRecord *rr___1 ;
  mDNSu32 tmp___4 ;
  mDNSBool tmp___5 ;

  {
  if (q->LargeAnswers) {
    goto _L;
  } else {
    if (q->ThisQInterval <= (mDNSPlatformOneSecond / 2) * 2) {
      _L: /* CIL Label */ 
      tmp = 1;
    } else {
      tmp = 0;
    }
  }
  ucast = tmp;
  if (ucast) {
    tmp___0 = 32768;
  } else {
    tmp___0 = 0;
  }
  ucbit = (unsigned short )tmp___0;
  limit = (mDNSu8 const   *)(query->data + 1440);
  tmp___1 = putQuestion(query, (*queryptr), limit, (domainname const   *)(& q->qname),
                        q->qtype, (unsigned short )((int )q->qclass | (int )ucbit));
  newptr = tmp___1;
  if (! newptr) {
    return (0);
  } else {
    if ((unsigned int )(newptr + (*answerforecast)) >= (unsigned int )limit) {
      query->h.numQuestions = (mDNSu16 )((int )query->h.numQuestions - 1);
      return (0);
    } else {
      forecast = (*answerforecast);
      ka = (*kalistptrptr);
      tmp___2 = DomainNameHashValue((domainname const   *)(& q->qname));
      rr = m->rrcache_hash[tmp___2 % 499U];
      while (rr) {
        if ((unsigned int )rr->resrec.InterfaceID == (unsigned int )q->SendQNow) {
          if ((unsigned int )rr->NextInKAList == (unsigned int )((CacheRecord *)0)) {
            if ((unsigned int )ka != (unsigned int )(& rr->NextInKAList)) {
              if ((int )rr->resrec.rdlength <= 1024) {
                tmp___3 = ResourceRecordAnswersQuestion((ResourceRecord const   *)(& rr->resrec),
                                                        (DNSQuestion const   *)q);
                if (tmp___3) {
                  if ((rr->TimeRcvd + ((int )rr->resrec.rroriginalttl * mDNSPlatformOneSecond) /
                                      2) - m->timenow >= 0) {
                    if (rr->NextRequiredQuery - (m->timenow + q->ThisQInterval) >
                        0) {
                      (*ka) = rr;
                      ka = & rr->NextInKAList;
                      forecast += (mDNSu32 )(12 + (int )rr->resrec.rdestimate);
                      if ((int )query->h.numQuestions > 1) {
                        if ((unsigned int )(newptr + forecast) >= (unsigned int )limit) {
                          query->h.numQuestions = (mDNSu16 )((int )query->h.numQuestions -
                                                             1);
                          ka = (*kalistptrptr);
                          while ((*ka)) {
                            rr___0 = (*ka);
                            (*ka) = (CacheRecord *)0L;
                            ka = & rr___0->NextInKAList;
                          }
                          return (0);
                        } else {
                          goto _L___0;
                        }
                      } else {
                        _L___0: /* CIL Label */ ;
                      }
                    } else {
                      goto _L___6;
                    }
                  } else {
                    goto _L___6;
                  }
                } else {
                  goto _L___6;
                }
              } else {
                goto _L___6;
              }
            } else {
              goto _L___6;
            }
          } else {
            goto _L___6;
          }
        } else {
          _L___6: /* CIL Label */ ;
        }
        rr = rr->next;
      }
      if (q->UniqueAnswers) {
        goto _L___8;
      } else {
        if ((unsigned int )(newptr + forecast) >= (unsigned int )limit) {
          _L___8: /* CIL Label */ 
          if (q->ThisQInterval == (mDNSPlatformOneSecond / 2) * 8) {
            goto _L___7;
          } else {
            if (q->ThisQInterval == (mDNSPlatformOneSecond / 2) * 32) {
              _L___7: /* CIL Label */ 
              query->h.numQuestions = (mDNSu16 )((int )query->h.numQuestions - 1);
              ka = (*kalistptrptr);
              while ((*ka)) {
                rr___1 = (*ka);
                (*ka) = (CacheRecord *)0L;
                ka = & rr___1->NextInKAList;
              }
              return (1);
            }
          }
        }
      }
      (*queryptr) = newptr;
      (*answerforecast) = forecast;
      (*kalistptrptr) = ka;
      if (ucast) {
        m->ExpectUnicastResponse = m->timenow;
      }
      tmp___4 = DomainNameHashValue((domainname const   *)(& q->qname));
      rr = m->rrcache_hash[tmp___4 % 499U];
      while (rr) {
        if ((unsigned int )rr->resrec.InterfaceID == (unsigned int )q->SendQNow) {
          if ((unsigned int )rr->NextInKAList == (unsigned int )((CacheRecord *)0)) {
            if ((unsigned int )ka != (unsigned int )(& rr->NextInKAList)) {
              tmp___5 = ResourceRecordAnswersQuestion((ResourceRecord const   *)(& rr->resrec),
                                                      (DNSQuestion const   *)q);
              if (tmp___5) {
                rr->UnansweredQueries ++;
                rr->LastUnansweredTime = m->timenow;
                SetNextCacheCheckTime(m, rr);
              } else {
                goto _L___11;
              }
            } else {
              goto _L___11;
            }
          } else {
            goto _L___11;
          }
        } else {
          _L___11: /* CIL Label */ ;
        }
        rr = rr->next;
      }
      return (1);
    }
  }
}
}
static void ReconfirmAntecedents(mDNS *m , DNSQuestion *q ) 
{ mDNSu32 slot ;
  CacheRecord *rr ;
  domainname *target ;
  mDNSBool tmp___0 ;

  {
  slot = 0U;
  while (slot < 499U) {
    rr = m->rrcache_hash[slot];
    while (rr) {
      if ((int )rr->resrec.rrtype == 5) {
        goto _L;
      } else {
        if ((int )rr->resrec.rrtype == 12) {
          _L: /* CIL Label */ 
          target = & (rr->resrec.rdata)->u.name;
        } else {
          if ((int )rr->resrec.rrtype == 33) {
            target = & (rr->resrec.rdata)->u.srv.target;
          } else {
            target = (domainname *)0L;
          }
        }
      }
      if (target) {
        if (rr->resrec.rdnamehash == q->qnamehash) {
          tmp___0 = SameDomainName((domainname const   *)target, (domainname const   *)(& q->qname));
          if (tmp___0) {
            mDNS_Reconfirm_internal(m, rr, (unsigned int )mDNSPlatformOneSecond *
                                           45U);
          } else {
            goto _L___1;
          }
        } else {
          goto _L___1;
        }
      } else {
        _L___1: /* CIL Label */ ;
      }
      rr = rr->next;
    }
    slot ++;
  }
  return;
}
}
static void ExpireDupSuppressInfo(DupSuppressInfo *ds , mDNSs32 time___0 ) 
{ int i ;

  {
  i = 0;
  while (i < 8) {
    if ((ds + i)->Time - time___0 < 0) {
      (ds + i)->InterfaceID = (struct mDNSInterfaceID_dummystruct *)0L;
    }
    i ++;
  }
  return;
}
}
static void ExpireDupSuppressInfoOnInterface(DupSuppressInfo *ds , mDNSs32 time___0 ,
                                             mDNSInterfaceID InterfaceID ) 
{ int i ;

  {
  i = 0;
  while (i < 8) {
    if ((unsigned int )(ds + i)->InterfaceID == (unsigned int )InterfaceID) {
      if ((ds + i)->Time - time___0 < 0) {
        (ds + i)->InterfaceID = (struct mDNSInterfaceID_dummystruct *)0L;
      } else {
        goto _L;
      }
    } else {
      _L: /* CIL Label */ ;
    }
    i ++;
  }
  return;
}
}
static mDNSBool SuppressOnThisInterface(DupSuppressInfo const   *ds , NetworkInterfaceInfo const   *intf ) 
{ int i ;
  mDNSBool v4 ;
  mDNSBool v6 ;

  {
  v4 = ! intf->IPv4Available != 0;
  v6 = ! intf->IPv6Available != 0;
  i = 0;
  while (i < 8) {
    if ((unsigned int )(ds + i)->InterfaceID == (unsigned int )intf->InterfaceID) {
      if ((ds + i)->Type == 4) {
        v4 = 1;
      } else {
        if ((ds + i)->Type == 6) {
          v6 = 1;
        }
      }
      if (v4) {
        if (v6) {
          return (1);
        } else {
          goto _L;
        }
      } else {
        _L: /* CIL Label */ ;
      }
    }
    i ++;
  }
  return (0);
}
}
static int RecordDupSuppressInfo(DupSuppressInfo *ds , mDNSs32 Time , mDNSInterfaceID InterfaceID ,
                                 mDNSs32 Type ) 
{ int i ;
  int j ;

  {
  i = 0;
  while (i < 8) {
    if ((unsigned int )(ds + i)->InterfaceID == (unsigned int )InterfaceID) {
      if ((ds + i)->Type == Type) {
        break;
      } else {
        goto _L;
      }
    } else {
      _L: /* CIL Label */ ;
    }
    i ++;
  }
  if (i >= 8) {
    i = 0;
    j = 1;
    while (1) {
      if (j < 8) {
        if (! (ds + i)->InterfaceID) {
          goto _L___1;
        }
      } else {
        _L___1: /* CIL Label */ 
        break;
      }
      if (! (ds + j)->InterfaceID) {
        goto _L___0;
      } else {
        if ((ds + j)->Time - (ds + i)->Time < 0) {
          _L___0: /* CIL Label */ 
          i = j;
        }
      }
      j ++;
    }
  }
  (ds + i)->Time = Time;
  (ds + i)->InterfaceID = InterfaceID;
  (ds + i)->Type = Type;
  return (i);
}
}
static mDNSBool AccelerateThisQuery(mDNS *m , DNSQuestion *q ) 
{ mDNSu32 forecast ;
  mDNSu16 tmp ;
  CacheRecord *rr ;
  mDNSu32 tmp___0 ;
  mDNSBool tmp___1 ;

  {
  if (q->ThisQInterval > 0) {
    if (! q->DuplicateOf) {
      if ((m->timenow + q->ThisQInterval / 10) - (q->LastQTime + q->ThisQInterval) >=
          0) {
        return (1);
      } else {
        goto _L___0;
      }
    } else {
      goto _L___0;
    }
  } else {
    _L___0: /* CIL Label */ ;
  }
  if (q->ThisQInterval > 0) {
    if (! q->DuplicateOf) {
      if ((m->timenow + q->ThisQInterval / 2) - (q->LastQTime + q->ThisQInterval) >=
          0) {
        tmp = DomainNameLength((domainname const   *)(& q->qname));
        forecast = (unsigned int )tmp + 4U;
        tmp___0 = DomainNameHashValue((domainname const   *)(& q->qname));
        rr = m->rrcache_hash[tmp___0 % 499U];
        while (rr) {
          if ((int )rr->resrec.rdlength <= 1024) {
            tmp___1 = ResourceRecordAnswersQuestion((ResourceRecord const   *)(& rr->resrec),
                                                    (DNSQuestion const   *)q);
            if (tmp___1) {
              if ((rr->TimeRcvd + ((int )rr->resrec.rroriginalttl * mDNSPlatformOneSecond) /
                                  2) - m->timenow >= 0) {
                if (rr->NextRequiredQuery - (m->timenow + q->ThisQInterval) > 0) {
                  forecast += (mDNSu32 )(12 + (int )rr->resrec.rdestimate);
                  if (forecast >= 512U) {
                    return (0);
                  }
                } else {
                  goto _L___3;
                }
              } else {
                goto _L___3;
              }
            } else {
              goto _L___3;
            }
          } else {
            _L___3: /* CIL Label */ ;
          }
          rr = rr->next;
        }
        return (1);
      } else {
        goto _L___5;
      }
    } else {
      goto _L___5;
    }
  } else {
    _L___5: /* CIL Label */ ;
  }
  return (0);
}
}
static void SendQueries(mDNS *m ) 
{ int pktcount ;
  DNSQuestion *q ;
  mDNSs32 maxExistingQuestionInterval ;
  NetworkInterfaceInfo const   *intf ;
  NetworkInterfaceInfo const   *tmp ;
  CacheRecord *KnownAnswerList ;
  mDNSu32 slot ;
  CacheRecord *rr ;
  mDNSBool tmp___1 ;
  AuthRecord *rr___0 ;
  AuthRecord *r2 ;
  mDNSBool tmp___3 ;
  AuthRecord *rr___1 ;
  AuthRecord *rr___2 ;
  DNSMessage query ;
  mDNSu8 *queryptr ;
  CacheRecord **kalistptr ;
  mDNSu32 answerforecast ;
  mDNSBool tmp___5 ;
  mDNSBool tmp___6 ;
  mDNSBool ucast ;
  mDNSu16 ucbit ;
  int tmp___7 ;
  mDNSu8 const   *limit ;
  int tmp___8 ;
  mDNSu8 *newptr ;
  mDNSu8 *tmp___9 ;
  mDNSu32 forecast ;
  CacheRecord *rr___3 ;
  mDNSu32 SecsSinceRcvd ;
  mDNSu8 *newptr___0 ;
  mDNSu8 *tmp___11 ;
  mDNSu8 *newptr___1 ;
  mDNSu8 *tmp___12 ;
  char *tmp___13 ;
  NetworkInterfaceInfo const   *next ;
  NetworkInterfaceInfo const   *tmp___14 ;

  {
  pktcount = 0;
  maxExistingQuestionInterval = 0;
  tmp = GetFirstActiveInterface((NetworkInterfaceInfo const   *)m->HostInterfaces);
  intf = tmp;
  KnownAnswerList = (CacheRecord *)0L;
  if (m->timenow - m->NextScheduledQuery >= 0) {
    m->NextScheduledQuery = m->timenow + 2013265920;
    slot = 0U;
    while (slot < 499U) {
      rr = m->rrcache_hash[slot];
      while (rr) {
        if (rr->CRActiveQuestion) {
          if (rr->UnansweredQueries < 4U) {
            if ((m->timenow + ((int )rr->resrec.rroriginalttl * mDNSPlatformOneSecond) /
                              50) - rr->NextRequiredQuery >= 0) {
              q = rr->CRActiveQuestion;
              ExpireDupSuppressInfoOnInterface(q->DupSuppress, m->timenow - ((int )rr->resrec.rroriginalttl *
                                                                             mDNSPlatformOneSecond) /
                                                                            20, rr->resrec.InterfaceID);
              if ((unsigned int )q->SendQNow == (unsigned int )((mDNSInterfaceID )0)) {
                q->SendQNow = rr->resrec.InterfaceID;
              } else {
                if ((unsigned int )q->SendQNow != (unsigned int )rr->resrec.InterfaceID) {
                  q->SendQNow = (struct mDNSInterfaceID_dummystruct *)mDNSInterfaceMark;
                }
              }
            }
          } else {
            goto _L;
          }
        } else {
          _L: /* CIL Label */ ;
        }
        rr = rr->next;
      }
      slot ++;
    }
    q = m->Questions;
    while (q) {
      if (q->ThisQInterval > 0) {
        if (! q->DuplicateOf) {
          if (m->timenow - (q->LastQTime + q->ThisQInterval) >= 0) {
            q->SendQNow = (struct mDNSInterfaceID_dummystruct *)mDNSInterfaceMark;
            if (maxExistingQuestionInterval < q->ThisQInterval) {
              maxExistingQuestionInterval = q->ThisQInterval;
            }
          } else {
            goto _L___1;
          }
        } else {
          goto _L___1;
        }
      } else {
        _L___1: /* CIL Label */ ;
      }
      q = q->next;
    }
    q = m->Questions;
    while (q) {
      if (q->SendQNow) {
        goto _L___3;
      } else {
        if (q->ThisQInterval > 0) {
          if (! q->DuplicateOf) {
            if (q->ThisQInterval <= maxExistingQuestionInterval) {
              tmp___1 = AccelerateThisQuery(m, q);
              if (tmp___1) {
                _L___3: /* CIL Label */ 
                if (m->timenow - (q->LastQTime + q->ThisQInterval / 2) >= 0) {
                  q->SendQNow = (struct mDNSInterfaceID_dummystruct *)mDNSInterfaceMark;
                  q->ThisQInterval *= 2;
                  if (q->ThisQInterval > 3600 * mDNSPlatformOneSecond) {
                    q->ThisQInterval = 3600 * mDNSPlatformOneSecond;
                  } else {
                    if (q->CurrentAnswers == 0U) {
                      if (q->ThisQInterval == (mDNSPlatformOneSecond / 2) * 8) {
                        ReconfirmAntecedents(m, q);
                      } else {
                        goto _L___2;
                      }
                    } else {
                      _L___2: /* CIL Label */ ;
                    }
                  }
                }
                q->SendOnAll = (unsigned int )q->SendQNow == (unsigned int )mDNSInterfaceMark;
                if (q->SendOnAll) {
                  if (! intf) {
                    q->SendQNow = (struct mDNSInterfaceID_dummystruct *)0L;
                  } else {
                    if (q->InterfaceID) {
                      q->SendQNow = q->InterfaceID;
                    } else {
                      q->SendQNow = intf->InterfaceID;
                    }
                  }
                  q->LastQTime = m->timenow;
                }
                ExpireDupSuppressInfo(q->DupSuppress, m->timenow - q->ThisQInterval /
                                                                   2);
                q->LastQTxTime = m->timenow;
                q->RecentAnswers = 0U;
              } else {
                goto _L___6;
              }
            } else {
              goto _L___6;
            }
          } else {
            goto _L___6;
          }
        } else {
          _L___6: /* CIL Label */ ;
        }
      }
      SetNextQueryTime(m, (DNSQuestion const   *)q);
      q = q->next;
    }
  }
  if (m->timenow - m->NextScheduledProbe >= 0) {
    m->NextScheduledProbe = m->timenow + 2013265920;
    if (m->CurrentRecord) {
      LogMsg("SendQueries:   ERROR m->CurrentRecord already set");
    }
    m->CurrentRecord = m->ResourceRecords;
    while (m->CurrentRecord) {
      rr___0 = m->CurrentRecord;
      m->CurrentRecord = rr___0->next;
      if ((int )rr___0->resrec.RecordType == 2) {
        if (m->timenow - (rr___0->LastAPTime + rr___0->ThisAPInterval) < 0) {
          SetNextAnnounceProbeTime(m, (AuthRecord const   *)rr___0);
        } else {
          if (rr___0->ProbeCount) {
            if (! intf) {
              rr___0->SendRNow = (struct mDNSInterfaceID_dummystruct *)0L;
            } else {
              if (rr___0->resrec.InterfaceID) {
                rr___0->SendRNow = rr___0->resrec.InterfaceID;
              } else {
                rr___0->SendRNow = intf->InterfaceID;
              }
            }
            rr___0->LastAPTime = m->timenow;
            rr___0->ProbeCount = (mDNSu8 )((int )rr___0->ProbeCount - 1);
            SetNextAnnounceProbeTime(m, (AuthRecord const   *)rr___0);
          } else {
            rr___0->resrec.RecordType = (unsigned char)16;
            rr___0->ThisAPInterval = mDNSPlatformOneSecond / 2;
            rr___0->LastAPTime = m->timenow - mDNSPlatformOneSecond / 2;
            SetNextAnnounceProbeTime(m, (AuthRecord const   *)rr___0);
            r2 = m->DuplicateRecords;
            while (r2) {
              if ((int )r2->resrec.RecordType == 2) {
                if ((unsigned int )r2->resrec.InterfaceID == (unsigned int )rr___0->resrec.InterfaceID) {
                  if ((int )r2->resrec.RecordType == (int )rr___0->resrec.RecordType) {
                    goto _L___10;
                  } else {
                    if (((int )r2->resrec.RecordType | (int )rr___0->resrec.RecordType) ==
                        18) {
                      _L___10: /* CIL Label */ 
                      tmp___3 = IdenticalResourceRecord((ResourceRecord const   *)(& r2->resrec),
                                                        (ResourceRecord const   *)(& rr___0->resrec));
                      if (tmp___3) {
                        r2->ProbeCount = (unsigned char)0;
                      } else {
                        goto _L___9;
                      }
                    } else {
                      goto _L___9;
                    }
                  }
                } else {
                  _L___9: /* CIL Label */ 
                  goto _L___7;
                }
              } else {
                _L___7: /* CIL Label */ ;
              }
              r2 = r2->next;
            }
            CompleteProbing(m, rr___0);
          }
        }
      }
    }
    m->CurrentRecord = m->DuplicateRecords;
    while (m->CurrentRecord) {
      rr___1 = m->CurrentRecord;
      m->CurrentRecord = rr___1->next;
      if ((int )rr___1->resrec.RecordType == 2) {
        if ((int )rr___1->ProbeCount == 0) {
          CompleteProbing(m, rr___1);
        } else {
          goto _L___11;
        }
      } else {
        _L___11: /* CIL Label */ ;
      }
    }
  }
  while (intf) {
    queryptr = query.data;
    InitializeDNSMessage(& query.h, zeroID, QueryFlags);
    if (KnownAnswerList) {

    }
    if (! KnownAnswerList) {
      kalistptr = & KnownAnswerList;
      answerforecast = (mDNSu32 )0;
      q = m->Questions;
      while (q) {
        if ((unsigned int )q->SendQNow == (unsigned int )intf->InterfaceID) {
          tmp___5 = SuppressOnThisInterface((DupSuppressInfo const   *)(q->DupSuppress),
                                            intf);
          if (tmp___5) {
            goto _L___13;
          } else {
            tmp___6 = BuildQuestion(m, & query, & queryptr, q, & kalistptr, & answerforecast);
            if (tmp___6) {
              _L___13: /* CIL Label */ 
              if (q->InterfaceID) {
                goto _L___12;
              } else {
                if (! q->SendOnAll) {
                  _L___12: /* CIL Label */ 
                  q->SendQNow = (struct mDNSInterfaceID_dummystruct *)0L;
                } else {
                  q->SendQNow = GetNextActiveInterfaceID(intf);
                }
              }
            }
          }
        }
        q = q->next;
      }
      rr___2 = m->ResourceRecords;
      while (rr___2) {
        if ((unsigned int )rr___2->SendRNow == (unsigned int )intf->InterfaceID) {
          ucast = (int )rr___2->ProbeCount >= 2;
          if (ucast) {
            tmp___7 = 32768;
          } else {
            tmp___7 = 0;
          }
          ucbit = (unsigned short )tmp___7;
          if (query.h.numQuestions) {
            tmp___8 = 1440;
          } else {
            tmp___8 = 8940;
          }
          limit = (mDNSu8 const   *)(query.data + tmp___8);
          tmp___9 = putQuestion(& query, queryptr, limit, (domainname const   *)(& rr___2->resrec.name),
                                (unsigned short)255, (unsigned short )((int )rr___2->resrec.rrclass |
                                                                       (int )ucbit));
          newptr = tmp___9;
          forecast = (answerforecast + 12U) + (mDNSu32 )rr___2->resrec.rdestimate;
          if (newptr) {
            if ((unsigned int )(newptr + forecast) < (unsigned int )limit) {
              queryptr = newptr;
              answerforecast = forecast;
              if (rr___2->resrec.InterfaceID) {
                rr___2->SendRNow = (struct mDNSInterfaceID_dummystruct *)0L;
              } else {
                rr___2->SendRNow = GetNextActiveInterfaceID(intf);
              }
              rr___2->IncludeInProbe = (unsigned char)1;
            } else {
              goto _L___14;
            }
          } else {
            _L___14: /* CIL Label */ 
            query.h.numQuestions = (mDNSu16 )((int )query.h.numQuestions - 1);
          }
        }
        rr___2 = rr___2->next;
      }
    }
    while (KnownAnswerList) {
      rr___3 = KnownAnswerList;
      SecsSinceRcvd = (unsigned int )(m->timenow - rr___3->TimeRcvd) / (unsigned int )mDNSPlatformOneSecond;
      tmp___11 = PutResourceRecordTTL(& query, queryptr, & query.h.numAnswers, & rr___3->resrec,
                                      rr___3->resrec.rroriginalttl - SecsSinceRcvd);
      newptr___0 = tmp___11;
      if (newptr___0) {
        queryptr = newptr___0;
        KnownAnswerList = rr___3->NextInKAList;
        rr___3->NextInKAList = (CacheRecord *)0L;
      } else {
        if ((int )query.h.numQuestions > 1) {
          LogMsg("SendQueries:   Put %d answers; No more space for known answers",
                 query.h.numAnswers);
        }
        query.h.flags.b[0] = (unsigned char )((int )query.h.flags.b[0] | 2);
        break;
      }
    }
    rr___2 = m->ResourceRecords;
    while (rr___2) {
      if (rr___2->IncludeInProbe) {
        tmp___12 = PutResourceRecordTTL(& query, queryptr, & query.h.numAuthorities,
                                        & rr___2->resrec, rr___2->resrec.rroriginalttl);
        newptr___1 = tmp___12;
        rr___2->IncludeInProbe = (unsigned char)0;
        if (newptr___1) {
          queryptr = newptr___1;
        } else {
          tmp___13 = DNSTypeName(rr___2->resrec.rrtype);
          LogMsg("SendQueries:   How did we fail to have space for the Update record %##s (%s)?",
                 rr___2->resrec.name.c, tmp___13);
        }
      }
      rr___2 = rr___2->next;
    }
    if ((unsigned int )queryptr > (unsigned int )(query.data)) {
      if ((int )query.h.flags.b[0] & 2) {
        if ((int )query.h.numQuestions > 1) {
          LogMsg("SendQueries: Should not have more than one question (%d) in a truncated packet\n",
                 query.h.numQuestions);
        } else {
          goto _L___15;
        }
      } else {
        _L___15: /* CIL Label */ ;
      }
      mDNSSendDNSMessage((mDNS const   *)m, & query, (mDNSu8 const   *)queryptr, intf->InterfaceID,
                         MulticastDNSPort, & AllDNSLinkGroup_v4, MulticastDNSPort);
      mDNSSendDNSMessage((mDNS const   *)m, & query, (mDNSu8 const   *)queryptr, intf->InterfaceID,
                         MulticastDNSPort, & AllDNSLinkGroup_v6, MulticastDNSPort);
      if (! m->SuppressSending) {
        m->SuppressSending = (m->timenow + mDNSPlatformOneSecond / 10) | 1;
      }
      pktcount ++;
      if (pktcount >= 1000) {
        LogMsg("SendQueries exceeded loop limit %d: giving up", pktcount);
        break;
      }
    } else {
      tmp___14 = GetFirstActiveInterface((NetworkInterfaceInfo const   *)intf->next);
      next = tmp___14;
      intf = next;
    }
  }
  return;
}
}
static void AnswerQuestionWithResourceRecord(mDNS *m , DNSQuestion *q , CacheRecord *rr ,
                                             mDNSBool AddRecord ) 
{ 

  {
  rr->LastUsed = m->timenow;
  rr->UseCount ++;
  if (q->ThisQInterval > 0) {
    if (! q->DuplicateOf) {
      if ((unsigned int )rr->CRActiveQuestion != (unsigned int )q) {
        if (! rr->CRActiveQuestion) {
          m->rrcache_active ++;
        }
        rr->CRActiveQuestion = q;
        SetNextCacheCheckTime(m, rr);
      } else {
        goto _L___0;
      }
    } else {
      goto _L___0;
    }
  } else {
    _L___0: /* CIL Label */ ;
  }
  m->mDNS_reentrancy ++;
  if (q->QuestionCallback) {
    ((*(q->QuestionCallback)))(m, q, (ResourceRecord const   *)(& rr->resrec), AddRecord);
  }
  m->mDNS_reentrancy --;
  return;
}
}
static void CacheRecordAdd(mDNS *m , CacheRecord *rr ) 
{ DNSQuestion *q ;
  char *tmp ;
  mDNSu32 tmp___0 ;
  mDNSBool tmp___1 ;

  {
  if (m->CurrentQuestion) {
    LogMsg("CacheRecordAdd ERROR m->CurrentQuestion already set");
  }
  m->CurrentQuestion = m->Questions;
  while (1) {
    if (m->CurrentQuestion) {
      if (! ((unsigned int )m->CurrentQuestion != (unsigned int )m->NewQuestions)) {
        goto _L___3;
      }
    } else {
      _L___3: /* CIL Label */ 
      break;
    }
    q = m->CurrentQuestion;
    m->CurrentQuestion = q->next;
    tmp___1 = ResourceRecordAnswersQuestion((ResourceRecord const   *)(& rr->resrec),
                                            (DNSQuestion const   *)q);
    if (tmp___1) {
      if (q->ThisQInterval > 0) {
        if (! q->DuplicateOf) {
          q->RecentAnswers ++;
          if (q->RecentAnswers >= 10U) {
            if (q->ThisQInterval > (mDNSPlatformOneSecond / 2) * 16) {
              if (m->timenow - q->LastQTxTime < mDNSPlatformOneSecond) {
                tmp = DNSTypeName(q->qtype);
                LogMsg("CacheRecordAdd: %##s (%s) got immediate answer burst; restarting exponential backoff sequence",
                       q->qname.c, tmp);
                tmp___0 = mDNSRandom((unsigned int )mDNSPlatformOneSecond * 4U);
                q->LastQTime = (m->timenow - mDNSPlatformOneSecond / 2) + (int )tmp___0;
                q->ThisQInterval = mDNSPlatformOneSecond / 2;
                SetNextQueryTime(m, (DNSQuestion const   *)q);
              } else {
                goto _L___2;
              }
            } else {
              goto _L___2;
            }
          } else {
            goto _L___2;
          }
        } else {
          goto _L___2;
        }
      } else {
        _L___2: /* CIL Label */ ;
      }
      q->CurrentAnswers ++;
      if ((int )rr->resrec.rdlength > 1024) {
        q->LargeAnswers ++;
      }
      if ((int )rr->resrec.RecordType & 32) {
        q->UniqueAnswers ++;
      }
      AnswerQuestionWithResourceRecord(m, q, rr, 1);
    }
  }
  m->CurrentQuestion = (DNSQuestion *)0L;
  return;
}
}
static void CacheRecordRmv(mDNS *m , CacheRecord *rr ) 
{ DNSQuestion *q ;
  char *tmp ;
  mDNSBool tmp___0 ;

  {
  if (m->CurrentQuestion) {
    LogMsg("CacheRecordRmv ERROR m->CurrentQuestion already set");
  }
  m->CurrentQuestion = m->Questions;
  while (1) {
    if (m->CurrentQuestion) {
      if (! ((unsigned int )m->CurrentQuestion != (unsigned int )m->NewQuestions)) {
        goto _L;
      }
    } else {
      _L: /* CIL Label */ 
      break;
    }
    q = m->CurrentQuestion;
    m->CurrentQuestion = q->next;
    tmp___0 = ResourceRecordAnswersQuestion((ResourceRecord const   *)(& rr->resrec),
                                            (DNSQuestion const   *)q);
    if (tmp___0) {
      if (q->CurrentAnswers == 0U) {
        tmp = DNSTypeName(q->qtype);
        LogMsg("CacheRecordRmv ERROR: How can CurrentAnswers already be zero for %p %##s (%s)?",
               q, q->qname.c, tmp);
      } else {
        q->CurrentAnswers --;
        if ((int )rr->resrec.rdlength > 1024) {
          q->LargeAnswers --;
        }
        if ((int )rr->resrec.RecordType & 32) {
          q->UniqueAnswers --;
        }
      }
      if (q->CurrentAnswers == 0U) {
        ReconfirmAntecedents(m, q);
      }
      AnswerQuestionWithResourceRecord(m, q, rr, 0);
    }
  }
  m->CurrentQuestion = (DNSQuestion *)0L;
  return;
}
}
static void ReleaseCacheRR(mDNS *m , CacheRecord *r ) 
{ 

  {
  if (r->resrec.rdata) {
    if ((unsigned int )r->resrec.rdata != (unsigned int )((RData *)(& r->rdatastorage))) {
      mDNSPlatformMemFree((void *)r->resrec.rdata);
    } else {
      goto _L;
    }
  } else {
    _L: /* CIL Label */ ;
  }
  r->resrec.rdata = (RData *)0L;
  r->next = m->rrcache_free;
  m->rrcache_free = r;
  m->rrcache_totalused --;
  return;
}
}
static void CheckCacheExpiration(mDNS *m , mDNSu32 slot ) 
{ CacheRecord **rp ;
  CacheRecord *rr ;
  mDNSs32 event ;
  int tmp___1 ;
  int tmp___5 ;

  {
  rp = & m->rrcache_hash[slot];
  if (m->lock_rrcache) {
    LogMsg("CheckCacheExpiration ERROR! Cache already locked!");
    return;
  }
  m->lock_rrcache = (unsigned char)1;
  while ((*rp)) {
    rr = (*rp);
    event = rr->TimeRcvd + (int )rr->resrec.rroriginalttl * mDNSPlatformOneSecond;
    if (m->timenow - event >= 0) {
      (*rp) = rr->next;
      if (rr->CRActiveQuestion) {
        CacheRecordRmv(m, rr);
        m->rrcache_active --;
      }
      m->rrcache_used[slot] --;
      ReleaseCacheRR(m, rr);
    } else {
      if (rr->CRActiveQuestion) {
        if (rr->UnansweredQueries < 4U) {
          if (m->timenow - rr->NextRequiredQuery < 0) {
            event = rr->NextRequiredQuery;
          } else {
            m->NextScheduledQuery = m->timenow;
            event = m->timenow + 1073741823;
          }
        } else {
          goto _L;
        }
      } else {
        _L: /* CIL Label */ ;
      }
      if ((unsigned int )rr->CRActiveQuestion == (unsigned int )((DNSQuestion *)0)) {
        tmp___5 = 60 * mDNSPlatformOneSecond;
      } else {
        if (rr->UnansweredQueries < 4U) {
          tmp___5 = ((int )rr->resrec.rroriginalttl * mDNSPlatformOneSecond) / 50;
        } else {
          if (rr->resrec.rroriginalttl > 10U) {
            tmp___5 = mDNSPlatformOneSecond;
          } else {
            tmp___5 = mDNSPlatformOneSecond / 10;
          }
        }
      }
      if (m->NextCacheCheck - (event + tmp___5) > 0) {
        if ((unsigned int )rr->CRActiveQuestion == (unsigned int )((DNSQuestion *)0)) {
          tmp___1 = 60 * mDNSPlatformOneSecond;
        } else {
          if (rr->UnansweredQueries < 4U) {
            tmp___1 = ((int )rr->resrec.rroriginalttl * mDNSPlatformOneSecond) / 50;
          } else {
            if (rr->resrec.rroriginalttl > 10U) {
              tmp___1 = mDNSPlatformOneSecond;
            } else {
              tmp___1 = mDNSPlatformOneSecond / 10;
            }
          }
        }
        m->NextCacheCheck = event + tmp___1;
      }
      rp = & rr->next;
    }
  }
  if ((unsigned int )m->rrcache_tail[slot] != (unsigned int )rp) {

  }
  m->rrcache_tail[slot] = rp;
  m->lock_rrcache = (unsigned char)0;
  return;
}
}
static void AnswerNewQuestion(mDNS *m ) 
{ mDNSBool ShouldQueryImmediately ;
  CacheRecord *rr ;
  DNSQuestion *q ;
  mDNSu32 slot ;
  mDNSu32 tmp ;
  mDNSu32 SecsSinceRcvd ;
  char *tmp___0 ;
  mDNSBool tmp___1 ;
  mDNSBool tmp___2 ;

  {
  ShouldQueryImmediately = (mDNSBool )1;
  q = m->NewQuestions;
  tmp = DomainNameHashValue((domainname const   *)(& q->qname));
  slot = tmp % 499U;
  CheckCacheExpiration(m, slot);
  m->NewQuestions = q->next;
  if (m->lock_rrcache) {
    LogMsg("AnswerNewQuestion ERROR! Cache already locked!");
  }
  m->lock_rrcache = (unsigned char)1;
  if (m->CurrentQuestion) {
    LogMsg("AnswerNewQuestion ERROR m->CurrentQuestion already set");
  }
  m->CurrentQuestion = q;
  rr = m->rrcache_hash[slot];
  while (rr) {
    tmp___2 = ResourceRecordAnswersQuestion((ResourceRecord const   *)(& rr->resrec),
                                            (DNSQuestion const   *)q);
    if (tmp___2) {
      SecsSinceRcvd = (unsigned int )(m->timenow - rr->TimeRcvd) / (unsigned int )mDNSPlatformOneSecond;
      if (rr->resrec.rroriginalttl <= SecsSinceRcvd) {
        tmp___0 = DNSTypeName(rr->resrec.rrtype);
        LogMsg("AnswerNewQuestion: How is rr->resrec.rroriginalttl %lu <= SecsSinceRcvd %lu for %##s (%s)",
               rr->resrec.rroriginalttl, SecsSinceRcvd, rr->resrec.name.c, tmp___0);
        goto __Cont;
      }
      if ((int )rr->resrec.RecordType & 32) {
        ShouldQueryImmediately = 0;
      }
      q->CurrentAnswers ++;
      if ((int )rr->resrec.rdlength > 1024) {
        q->LargeAnswers ++;
      }
      if ((int )rr->resrec.RecordType & 32) {
        q->UniqueAnswers ++;
      }
      AnswerQuestionWithResourceRecord(m, q, rr, 1);
      if ((unsigned int )m->CurrentQuestion != (unsigned int )q) {
        break;
      }
    } else {
      if ((int )rr->resrec.rrtype == 1) {
        goto _L___2;
      } else {
        if ((int )rr->resrec.rrtype == 28) {
          _L___2: /* CIL Label */ 
          if ((int )q->qtype == 1) {
            goto _L___1;
          } else {
            if ((int )q->qtype == 28) {
              _L___1: /* CIL Label */ 
              if (rr->resrec.namehash == q->qnamehash) {
                tmp___1 = SameDomainName((domainname const   *)(& rr->resrec.name),
                                         (domainname const   *)(& q->qname));
                if (tmp___1) {
                  ShouldQueryImmediately = 0;
                } else {
                  goto _L;
                }
              } else {
                _L: /* CIL Label */ ;
              }
            } else {
              goto _L___0;
            }
          }
        } else {
          _L___0: /* CIL Label */ ;
        }
      }
    }
    __Cont: /* CIL Label */ 
    rr = rr->next;
  }
  if (ShouldQueryImmediately) {
    if ((unsigned int )m->CurrentQuestion == (unsigned int )q) {
      q->ThisQInterval = mDNSPlatformOneSecond / 2;
      q->LastQTime = m->timenow - q->ThisQInterval;
      m->NextScheduledQuery = m->timenow;
    } else {
      goto _L___3;
    }
  } else {
    _L___3: /* CIL Label */ ;
  }
  m->CurrentQuestion = (DNSQuestion *)0L;
  m->lock_rrcache = (unsigned char)0;
  return;
}
}
static void AnswerLocalOnlyQuestionWithResourceRecord(mDNS *m , DNSQuestion *q , AuthRecord *rr ,
                                                      mDNSBool AddRecord ) 
{ 

  {
  if (AddRecord) {
    rr->AnnounceCount = (unsigned char)9;
  }
  m->mDNS_reentrancy ++;
  if (q->QuestionCallback) {
    ((*(q->QuestionCallback)))(m, q, (ResourceRecord const   *)(& rr->resrec), AddRecord);
  }
  m->mDNS_reentrancy --;
  return;
}
}
static void AnswerNewLocalOnlyQuestion(mDNS *m ) 
{ DNSQuestion *q ;
  AuthRecord *rr ;
  mDNSBool tmp ;

  {
  q = m->NewLocalOnlyQuestions;
  m->NewLocalOnlyQuestions = q->next;
  if (m->CurrentQuestion) {
    LogMsg("AnswerNewQuestion ERROR m->CurrentQuestion already set");
  }
  m->CurrentQuestion = q;
  m->CurrentRecord = m->LocalOnlyRecords;
  while (1) {
    if (m->CurrentRecord) {
      if (! ((unsigned int )m->CurrentRecord != (unsigned int )m->NewLocalOnlyRecords)) {
        goto _L;
      }
    } else {
      _L: /* CIL Label */ 
      break;
    }
    rr = m->CurrentRecord;
    m->CurrentRecord = rr->next;
    tmp = ResourceRecordAnswersQuestion((ResourceRecord const   *)(& rr->resrec),
                                        (DNSQuestion const   *)q);
    if (tmp) {
      AnswerLocalOnlyQuestionWithResourceRecord(m, q, rr, 1);
      if ((unsigned int )m->CurrentQuestion != (unsigned int )q) {
        break;
      }
    }
  }
  m->CurrentQuestion = (DNSQuestion *)0L;
  return;
}
}
static void AnswerLocalOnlyQuestions(mDNS *m , AuthRecord *rr , mDNSBool AddRecord ) 
{ DNSQuestion *q ;
  mDNSBool tmp ;

  {
  if (m->CurrentQuestion) {
    LogMsg("AnswerLocalOnlyQuestions ERROR m->CurrentQuestion already set");
  }
  m->CurrentQuestion = m->LocalOnlyQuestions;
  while (1) {
    if (m->CurrentQuestion) {
      if (! ((unsigned int )m->CurrentQuestion != (unsigned int )m->NewLocalOnlyQuestions)) {
        goto _L;
      }
    } else {
      _L: /* CIL Label */ 
      break;
    }
    q = m->CurrentQuestion;
    m->CurrentQuestion = q->next;
    tmp = ResourceRecordAnswersQuestion((ResourceRecord const   *)(& rr->resrec),
                                        (DNSQuestion const   *)q);
    if (tmp) {
      AnswerLocalOnlyQuestionWithResourceRecord(m, q, rr, AddRecord);
    }
  }
  m->CurrentQuestion = (DNSQuestion *)0L;
  return;
}
}
static void DiscardLocalOnlyRecords(mDNS *m ) 
{ AuthRecord *rr ;

  {
  rr = m->LocalOnlyRecords;
  while (rr) {
    if ((int )rr->resrec.RecordType == 1) {
      AnswerLocalOnlyQuestions(m, rr, 0);
      CompleteDeregistration(m, rr);
      return;
    }
    if (rr->ProbeCount) {
      mDNS_Deregister_internal(m, rr, 1);
      return;
    }
    rr = rr->next;
  }
  m->DiscardLocalOnlyRecords = 0;
  return;
}
}
static void AnswerForNewLocalOnlyRecords(mDNS *m ) 
{ AuthRecord *rr ;

  {
  rr = m->NewLocalOnlyRecords;
  m->NewLocalOnlyRecords = (m->NewLocalOnlyRecords)->next;
  AnswerLocalOnlyQuestions(m, rr, 1);
  return;
}
}
static CacheRecord *GetFreeCacheRR(mDNS *m , mDNSu16 RDLength ) 
{ CacheRecord *r ;
  mDNSu32 slot ;
  CacheRecord **rp ;
  CacheRecord *rr ;

  {
  r = (CacheRecord *)0L;
  if (m->lock_rrcache) {
    LogMsg("GetFreeCacheRR ERROR! Cache already locked!");
    return ((CacheRecord *)0L);
  }
  m->lock_rrcache = (unsigned char)1;
  if (! m->rrcache_free) {
    if (m->MainCallback) {
      if (m->rrcache_totalused != m->rrcache_size) {
        LogMsg("GetFreeCacheRR: count mismatch: m->rrcache_totalused %lu != m->rrcache_size %lu",
               m->rrcache_totalused, m->rrcache_size);
      }
      if (m->rrcache_size >= 512U) {
        if (! (m->rrcache_size / 32U > m->rrcache_active)) {
          goto _L;
        }
      } else {
        _L: /* CIL Label */ 
        ((*(m->MainCallback)))(m, -65790);
      }
    } else {
      goto _L___0;
    }
  } else {
    _L___0: /* CIL Label */ ;
  }
  if (! m->rrcache_free) {
    slot = 0U;
    while (slot < 499U) {
      rp = & m->rrcache_hash[slot];
      while ((*rp)) {
        if (((*rp))->CRActiveQuestion) {
          rp = & ((*rp))->next;
        } else {
          rr = (*rp);
          (*rp) = ((*rp))->next;
          m->rrcache_used[slot] --;
          ReleaseCacheRR(m, rr);
        }
      }
      if ((unsigned int )m->rrcache_tail[slot] != (unsigned int )rp) {

      }
      m->rrcache_tail[slot] = rp;
      slot ++;
    }
  }
  if (m->rrcache_free) {
    r = m->rrcache_free;
    m->rrcache_free = r->next;
  }
  if (r) {
    m->rrcache_totalused ++;
    if (m->rrcache_totalused >= m->rrcache_report) {
      if (m->rrcache_report < 100U) {
        m->rrcache_report += 10U;
      } else {
        m->rrcache_report += 100U;
      }
    }
    mDNSPlatformMemZero((void *)r, sizeof((*r)));
    r->resrec.rdata = (RData *)(& r->rdatastorage);
    if ((int )RDLength > 64) {
      r->resrec.rdata = (RData *)mDNSPlatformMemAllocate((sizeof(RData ) - sizeof(RDataBody )) +
                                                         (unsigned int )RDLength);
      if (r->resrec.rdata) {
        r->resrec.rdlength = RDLength;
        (r->resrec.rdata)->MaxRDLength = r->resrec.rdlength;
      } else {
        ReleaseCacheRR(m, r);
        r = (CacheRecord *)0L;
      }
    }
  }
  m->lock_rrcache = (unsigned char)0;
  return (r);
}
}
static void PurgeCacheResourceRecord(mDNS *m , CacheRecord *rr ) 
{ 

  {
  rr->TimeRcvd = m->timenow - mDNSPlatformOneSecond * 60;
  rr->UnansweredQueries = 4U;
  rr->resrec.rroriginalttl = 0U;
  SetNextCacheCheckTime(m, rr);
  return;
}
}
static void mDNS_Lock(mDNS *m ) 
{ mDNSs32 tmp ;
  mDNSs32 tmp___0 ;
  mDNSs32 tmp___1 ;

  {
  mDNSPlatformLock((mDNS const   *)m);
  if (m->mDNS_busy != m->mDNS_reentrancy) {
    LogMsg("mDNS_Lock: Locking failure! mDNS_busy (%ld) != mDNS_reentrancy (%ld)",
           m->mDNS_busy, m->mDNS_reentrancy);
  }
  if (m->mDNS_busy == 0U) {
    if (m->timenow) {
      tmp = mDNSPlatformTimeNow();
      LogMsg("mDNS_Lock: m->timenow already set (%ld/%ld)", m->timenow, tmp + m->timenow_adjust);
    }
    tmp___0 = mDNSPlatformTimeNow();
    m->timenow = tmp___0 + m->timenow_adjust;
    if (m->timenow == 0) {
      m->timenow = 1;
    }
  } else {
    if (m->timenow == 0) {
      LogMsg("mDNS_Lock: m->mDNS_busy is %ld but m->timenow not set", m->mDNS_busy);
      tmp___1 = mDNSPlatformTimeNow();
      m->timenow = tmp___1 + m->timenow_adjust;
      if (m->timenow == 0) {
        m->timenow = 1;
      }
    }
  }
  if (m->timenow_last - m->timenow > 0) {
    m->timenow_adjust += m->timenow_last - m->timenow;
    LogMsg("mDNSPlatformTimeNow went backwards by %ld ticks; setting correction factor to %ld",
           m->timenow_last - m->timenow, m->timenow_adjust);
    m->timenow = m->timenow_last;
  }
  m->timenow_last = m->timenow;
  m->mDNS_busy ++;
  return;
}
}
static mDNSs32 GetNextScheduledEvent(mDNS const   *m ) 
{ mDNSs32 e ;

  {
  e = m->timenow + 2013265920;
  if (m->mDNSPlatformStatus != 0) {
    goto _L;
  } else {
    if (m->SleepState) {
      _L: /* CIL Label */ 
      return (e);
    }
  }
  if (m->NewQuestions) {
    return (m->timenow);
  }
  if (m->NewLocalOnlyQuestions) {
    return (m->timenow);
  }
  if (m->NewLocalOnlyRecords) {
    return (m->timenow);
  }
  if (m->DiscardLocalOnlyRecords) {
    return (m->timenow);
  }
  if (m->SuppressSending) {
    return (m->SuppressSending);
  }
  if (e - m->NextCacheCheck > 0) {
    e = m->NextCacheCheck;
  }
  if (e - m->NextScheduledQuery > 0) {
    e = m->NextScheduledQuery;
  }
  if (e - m->NextScheduledProbe > 0) {
    e = m->NextScheduledProbe;
  }
  if (e - m->NextScheduledResponse > 0) {
    e = m->NextScheduledResponse;
  }
  return (e);
}
}
static void mDNS_Unlock(mDNS *m ) 
{ 

  {
  m->mDNS_busy --;
  if (m->mDNS_busy != m->mDNS_reentrancy) {
    LogMsg("mDNS_Unlock: Locking failure! mDNS_busy (%ld) != mDNS_reentrancy (%ld)",
           m->mDNS_busy, m->mDNS_reentrancy);
  }
  if (m->mDNS_busy == 0U) {
    m->NextScheduledEvent = GetNextScheduledEvent((mDNS const   *)m);
    if (m->timenow == 0) {
      LogMsg("mDNS_Unlock: ERROR! m->timenow aready zero");
    }
    m->timenow = 0;
  }
  mDNSPlatformUnlock((mDNS const   *)m);
  return;
}
}
mDNSs32 mDNS_Execute(mDNS *m ) 
{ int i ;
  mDNSu32 slot ;

  {
  mDNS_Lock(m);
  if (m->timenow - m->NextScheduledEvent >= 0) {
    if (m->CurrentQuestion) {
      LogMsg("mDNS_Execute: ERROR! m->CurrentQuestion already set");
    }
    if (m->SuppressProbes) {
      if (m->timenow - m->SuppressProbes >= 0) {
        m->SuppressProbes = 0;
      } else {
        goto _L;
      }
    } else {
      _L: /* CIL Label */ ;
    }
    if (m->NumFailedProbes) {
      if (m->timenow - m->ProbeFailTime >= mDNSPlatformOneSecond * 10) {
        m->NumFailedProbes = 0;
      } else {
        goto _L___0;
      }
    } else {
      _L___0: /* CIL Label */ ;
    }
    if (m->rrcache_size) {
      if (m->timenow - m->NextCacheCheck >= 0) {
        m->NextCacheCheck = m->timenow + 1073741823;
        slot = 0U;
        while (slot < 499U) {
          CheckCacheExpiration(m, slot);
          slot ++;
        }
      } else {
        goto _L___1;
      }
    } else {
      _L___1: /* CIL Label */ ;
    }
    i = 0;
    while (1) {
      if (m->NewQuestions) {
        if (! (i < 1000)) {
          goto _L___2;
        }
      } else {
        _L___2: /* CIL Label */ 
        break;
      }
      AnswerNewQuestion(m);
      i ++;
    }
    if (i >= 1000) {

    }
    i = 0;
    while (1) {
      if (m->DiscardLocalOnlyRecords) {
        if (! (i < 1000)) {
          goto _L___3;
        }
      } else {
        _L___3: /* CIL Label */ 
        break;
      }
      DiscardLocalOnlyRecords(m);
      i ++;
    }
    if (i >= 1000) {

    }
    i = 0;
    while (1) {
      if (m->NewLocalOnlyQuestions) {
        if (! (i < 1000)) {
          goto _L___4;
        }
      } else {
        _L___4: /* CIL Label */ 
        break;
      }
      AnswerNewLocalOnlyQuestion(m);
      i ++;
    }
    if (i >= 1000) {

    }
    i = 0;
    while (1) {
      if (m->NewLocalOnlyRecords) {
        if (! (i < 1000)) {
          goto _L___5;
        }
      } else {
        _L___5: /* CIL Label */ 
        break;
      }
      AnswerForNewLocalOnlyRecords(m);
      i ++;
    }
    if (i >= 1000) {

    }
    if (m->mDNSPlatformStatus != 0) {
      goto _L___8;
    } else {
      if (m->SleepState) {
        _L___8: /* CIL Label */ 
        DiscardDeregistrations(m);
      } else {
        if (m->SuppressSending == 0) {
          goto _L___7;
        } else {
          if (m->timenow - m->SuppressSending >= 0) {
            _L___7: /* CIL Label */ 
            m->SuppressSending = 0;
            if (m->timenow - m->NextScheduledQuery >= 0) {
              goto _L___6;
            } else {
              if (m->timenow - m->NextScheduledProbe >= 0) {
                _L___6: /* CIL Label */ 
                SendQueries(m);
              }
            }
            if (m->timenow - m->NextScheduledQuery >= 0) {
              LogMsg("mDNS_Execute: SendQueries didn\'t send all its queries; will try again in one second");
              m->NextScheduledQuery = m->timenow + mDNSPlatformOneSecond;
            }
            if (m->timenow - m->NextScheduledProbe >= 0) {
              LogMsg("mDNS_Execute: SendQueries didn\'t send all its probes; will try again in one second");
              m->NextScheduledProbe = m->timenow + mDNSPlatformOneSecond;
            }
            if (m->timenow - m->NextScheduledResponse >= 0) {
              SendResponses(m);
            }
            if (m->timenow - m->NextScheduledResponse >= 0) {
              LogMsg("mDNS_Execute: SendResponses didn\'t send all its responses; will try again in one second");
              m->NextScheduledResponse = m->timenow + mDNSPlatformOneSecond;
            }
          }
        }
      }
    }
    m->RandomQueryDelay = 0;
  }
  mDNS_Unlock(m);
  return (m->NextScheduledEvent);
}
}
void mDNSCoreMachineSleep(mDNS *m , mDNSBool sleepstate ) 
{ AuthRecord *rr ;
  char const   *tmp ;
  DNSQuestion *q ;
  mDNSu32 slot ;
  CacheRecord *cr ;

  {
  mDNS_Lock(m);
  m->SleepState = sleepstate;
  if (sleepstate) {
    tmp = "Sleeping";
  } else {
    tmp = "Waking";
  }
  LogMsg("mDNSResponder %s at %ld", tmp, m->timenow);
  if (sleepstate) {
    rr = m->ResourceRecords;
    while (rr) {
      if ((int )rr->resrec.RecordType == 8) {
        if ((int )rr->AnnounceCount < 10) {
          rr->ImmedAnswer = (struct mDNSInterfaceID_dummystruct *)mDNSInterfaceMark;
        } else {
          goto _L;
        }
      } else {
        _L: /* CIL Label */ ;
      }
      rr = rr->next;
    }
    SendResponses(m);
  } else {
    q = m->Questions;
    while (q) {
      if (q->ThisQInterval > 0) {
        if (! q->DuplicateOf) {
          q->ThisQInterval = mDNSPlatformOneSecond / 2;
          q->LastQTime = m->timenow - q->ThisQInterval;
          q->RecentAnswers = 0U;
          ExpireDupSuppressInfo(q->DupSuppress, m->timenow);
          m->NextScheduledQuery = m->timenow;
        } else {
          goto _L___0;
        }
      } else {
        _L___0: /* CIL Label */ ;
      }
      q = q->next;
    }
    m->NextCacheCheck = m->timenow;
    slot = 0U;
    while (slot < 499U) {
      cr = m->rrcache_hash[slot];
      while (cr) {
        mDNS_Reconfirm_internal(m, cr, (unsigned int )mDNSPlatformOneSecond * 5U);
        cr = cr->next;
      }
      slot ++;
    }
    rr = m->ResourceRecords;
    while (rr) {
      if ((int )rr->resrec.RecordType == 16) {
        if (! rr->DependentOn) {
          rr->resrec.RecordType = (unsigned char)2;
        } else {
          goto _L___1;
        }
      } else {
        _L___1: /* CIL Label */ ;
      }
      if ((int )rr->resrec.RecordType == 2) {
        rr->ProbeCount = (unsigned char)3;
      } else {
        rr->ProbeCount = (unsigned char)0;
      }
      if ((int )rr->AnnounceCount < 9) {
        rr->AnnounceCount = (unsigned char)9;
      }
      if ((int )rr->resrec.RecordType & 12) {
        rr->ThisAPInterval = mDNSPlatformOneSecond / 2;
      } else {
        if ((int )rr->resrec.RecordType & 2) {
          rr->ThisAPInterval = mDNSPlatformOneSecond / 4;
        } else {
          if ((int )rr->resrec.RecordType & 48) {
            rr->ThisAPInterval = mDNSPlatformOneSecond / 2;
          } else {
            rr->ThisAPInterval = 0;
          }
        }
      }
      InitializeLastAPTime(m, rr);
      rr = rr->next;
    }
  }
  mDNS_Unlock(m);
  return;
}
}
static void AddRecordToResponseList(AuthRecord ***nrpp , AuthRecord *rr , AuthRecord *add ) 
{ 

  {
  if ((unsigned int )rr->NextResponse == (unsigned int )((AuthRecord *)0)) {
    if ((unsigned int )(*nrpp) != (unsigned int )(& rr->NextResponse)) {
      (*((*nrpp))) = rr;
      if (add) {
        if (add->NR_AdditionalTo) {
          add = add->NR_AdditionalTo;
        } else {
          goto _L;
        }
      } else {
        _L: /* CIL Label */ ;
      }
      rr->NR_AdditionalTo = add;
      (*nrpp) = & rr->NextResponse;
    } else {
      goto _L___0;
    }
  } else {
    _L___0: /* CIL Label */ ;
  }
  return;
}
}
static mDNSu8 *GenerateUnicastResponse(DNSMessage const   *query , mDNSu8 const   *end ,
                                       mDNSInterfaceID InterfaceID , mDNSBool LegacyQuery ,
                                       DNSMessage *response , AuthRecord *ResponseRecords ) 
{ mDNSu8 *responseptr ;
  mDNSu8 const   *limit ;
  mDNSu8 const   *ptr ;
  AuthRecord *rr ;
  mDNSu32 maxttl ;
  int i ;
  DNSQuestion q ;
  mDNSu8 *p ;
  mDNSu8 *tmp ;
  mDNSu8 *p___0 ;
  mDNSu8 *tmp___0 ;

  {
  responseptr = response->data;
  limit = (mDNSu8 const   *)(response->data + sizeof(response->data));
  ptr = (mDNSu8 const   *)(query->data);
  maxttl = (mDNSu32 )1879048192;
  InitializeDNSMessage(& response->h, query->h.id, ResponseFlags);
  if (LegacyQuery) {
    maxttl = 10U;
    i = 0;
    while (i < (int )query->h.numQuestions) {
      ptr = getQuestion(query, ptr, end, InterfaceID, & q);
      if (! ptr) {
        return ((mDNSu8 *)0L);
      }
      rr = ResponseRecords;
      while (rr) {
        if ((unsigned int )rr->NR_AnswerTo == (unsigned int )ptr) {
          responseptr = putQuestion(response, responseptr, limit, (domainname const   *)(& q.qname),
                                    q.qtype, q.qclass);
          if (! responseptr) {
            return ((mDNSu8 *)0L);
          }
          break;
        }
        rr = rr->NextResponse;
      }
      i ++;
    }
    if ((int )response->h.numQuestions == 0) {
      LogMsg("GenerateUnicastResponse: ERROR! Why no questions?");
      return ((mDNSu8 *)0L);
    }
  }
  rr = ResponseRecords;
  while (rr) {
    if (rr->NR_AnswerTo) {
      tmp = PutResourceRecordCappedTTL(response, responseptr, & response->h.numAnswers,
                                       & rr->resrec, maxttl);
      p = tmp;
      if (p) {
        responseptr = p;
      } else {
        response->h.flags.b[0] = (unsigned char )((int )response->h.flags.b[0] | 2);
      }
    }
    rr = rr->NextResponse;
  }
  rr = ResponseRecords;
  while (rr) {
    if (rr->NR_AdditionalTo) {
      if (! rr->NR_AnswerTo) {
        tmp___0 = PutResourceRecordCappedTTL(response, responseptr, & response->h.numAdditionals,
                                             & rr->resrec, maxttl);
        p___0 = tmp___0;
        if (p___0) {
          responseptr = p___0;
        }
      } else {
        goto _L;
      }
    } else {
      _L: /* CIL Label */ ;
    }
    rr = rr->NextResponse;
  }
  return (responseptr);
}
}
static int CompareRData(AuthRecord *our , CacheRecord *pkt ) 
{ mDNSu8 ourdata[256] ;
  mDNSu8 *ourptr ;
  mDNSu8 *ourend ;
  mDNSu8 pktdata[256] ;
  mDNSu8 *pktptr ;
  mDNSu8 *pktend ;

  {
  ourptr = ourdata;
  pktptr = pktdata;
  if (! our) {
    LogMsg("CompareRData ERROR: our is NULL");
    return (1);
  }
  if (! pkt) {
    LogMsg("CompareRData ERROR: pkt is NULL");
    return (1);
  }
  ourend = putRData((DNSMessage const   *)0L, ourdata, (mDNSu8 const   *)(ourdata +
                                                                          sizeof(ourdata)),
                    & our->resrec);
  pktend = putRData((DNSMessage const   *)0L, pktdata, (mDNSu8 const   *)(pktdata +
                                                                          sizeof(pktdata)),
                    & pkt->resrec);
  while (1) {
    if ((unsigned int )ourptr < (unsigned int )ourend) {
      if ((unsigned int )pktptr < (unsigned int )pktend) {
        if (! ((int )(*ourptr) == (int )(*pktptr))) {
          goto _L___0;
        }
      } else {
        goto _L___0;
      }
    } else {
      _L___0: /* CIL Label */ 
      break;
    }
    ourptr ++;
    pktptr ++;
  }
  if ((unsigned int )ourptr >= (unsigned int )ourend) {
    if ((unsigned int )pktptr >= (unsigned int )pktend) {
      return (0);
    } else {
      goto _L___1;
    }
  } else {
    _L___1: /* CIL Label */ ;
  }
  if ((unsigned int )ourptr >= (unsigned int )ourend) {
    return (-1);
  }
  if ((unsigned int )pktptr >= (unsigned int )pktend) {
    return (1);
  }
  if ((int )(*pktptr) > (int )(*ourptr)) {
    return (-1);
  }
  if ((int )(*pktptr) < (int )(*ourptr)) {
    return (1);
  }
  return (-1);
}
}
static mDNSBool MatchDependentOn(mDNS const   *m , CacheRecord const   *pktrr , AuthRecord const   *master ) 
{ AuthRecord const   *r1 ;
  AuthRecord const   *r2 ;
  mDNSBool tmp ;
  AuthRecord const   *r2___0 ;
  mDNSBool tmp___0 ;

  {
  r1 = (AuthRecord const   *)m->ResourceRecords;
  while (r1) {
    tmp = IdenticalResourceRecord((ResourceRecord const   *)(& r1->resrec), (ResourceRecord const   *)(& pktrr->resrec));
    if (tmp) {
      r2 = r1;
      while (r2->DependentOn) {
        r2 = (AuthRecord const   *)r2->DependentOn;
      }
      if ((unsigned int )r2 == (unsigned int )master) {
        return (1);
      }
    }
    r1 = (AuthRecord const   *)r1->next;
  }
  r1 = (AuthRecord const   *)m->DuplicateRecords;
  while (r1) {
    tmp___0 = IdenticalResourceRecord((ResourceRecord const   *)(& r1->resrec), (ResourceRecord const   *)(& pktrr->resrec));
    if (tmp___0) {
      r2___0 = r1;
      while (r2___0->DependentOn) {
        r2___0 = (AuthRecord const   *)r2___0->DependentOn;
      }
      if ((unsigned int )r2___0 == (unsigned int )master) {
        return (1);
      }
    }
    r1 = (AuthRecord const   *)r1->next;
  }
  return (0);
}
}
static AuthRecord const   *FindRRSet(mDNS const   *m , CacheRecord const   *pktrr ) 
{ AuthRecord const   *rr ;
  mDNSBool tmp ;

  {
  rr = (AuthRecord const   *)m->ResourceRecords;
  while (rr) {
    tmp = IdenticalResourceRecord((ResourceRecord const   *)(& rr->resrec), (ResourceRecord const   *)(& pktrr->resrec));
    if (tmp) {
      while (1) {
        if (rr->RRSet) {
          if (! ((unsigned int )rr != (unsigned int )rr->RRSet)) {
            goto _L;
          }
        } else {
          _L: /* CIL Label */ 
          break;
        }
        rr = (AuthRecord const   *)rr->RRSet;
      }
      return (rr);
    }
    rr = (AuthRecord const   *)rr->next;
  }
  return ((AuthRecord const   *)0L);
}
}
static mDNSBool PacketRRConflict(mDNS const   *m , AuthRecord const   *our , CacheRecord const   *pktrr ) 
{ AuthRecord const   *ourset ;
  AuthRecord const   *tmp ;
  mDNSBool tmp___0 ;
  AuthRecord const   *tmp___1 ;

  {
  if (our->RRSet) {
    tmp = (AuthRecord const   *)our->RRSet;
  } else {
    tmp = our;
  }
  ourset = tmp;
  if (! ((int )our->resrec.RecordType & 50)) {
    return (0);
  }
  if (our->DependentOn) {
    goto _L;
  } else {
    tmp___0 = MatchDependentOn(m, pktrr, our);
    if (tmp___0) {
      _L: /* CIL Label */ 
      return (0);
    }
  }
  tmp___1 = FindRRSet(m, pktrr);
  if ((unsigned int )tmp___1 == (unsigned int )ourset) {
    return (0);
  }
  return (1);
}
}
static void ResolveSimultaneousProbe(mDNS *m , DNSMessage const   *query , mDNSu8 const   *end ,
                                     DNSQuestion *q , AuthRecord *our ) 
{ int i ;
  mDNSu8 const   *ptr ;
  mDNSu8 const   *tmp ;
  mDNSBool FoundUpdate ;
  LargeCacheRecord pkt ;
  int result ;
  mDNSBool tmp___0 ;
  mDNSBool tmp___1 ;

  {
  tmp = LocateAuthorities(query, end);
  ptr = tmp;
  FoundUpdate = (mDNSBool )0;
  i = 0;
  while (i < (int )query->h.numAuthorities) {
    pkt.r.rdatastorage.MaxRDLength = (unsigned short)8192;
    ptr = GetResourceRecord(m, query, ptr, end, q->InterfaceID, (unsigned char)0,
                            & pkt.r, (RData *)(& pkt.r.rdatastorage));
    if (! ptr) {
      break;
    }
    tmp___1 = ResourceRecordAnswersQuestion((ResourceRecord const   *)(& pkt.r.resrec),
                                            (DNSQuestion const   *)q);
    if (tmp___1) {
      FoundUpdate = 1;
      tmp___0 = PacketRRConflict((mDNS const   *)m, (AuthRecord const   *)our, (CacheRecord const   *)(& pkt.r));
      if (tmp___0) {
        result = (int )our->resrec.rrclass - (int )pkt.r.resrec.rrclass;
        if (! result) {
          result = (int )our->resrec.rrtype - (int )pkt.r.resrec.rrtype;
        }
        if (! result) {
          result = CompareRData(our, & pkt.r);
        }
        switch (result) {
        case 1: ;
        break;
        case 0: ;
        break;
        case -1: 
        mDNS_Deregister_internal(m, our, 1);
        return;
        }
      }
    }
    i ++;
  }
  if (! FoundUpdate) {

  }
  return;
}
}
static CacheRecord *FindIdenticalRecordInCache(mDNS const   *m , ResourceRecord *pktrr ) 
{ CacheRecord *rr ;
  mDNSu32 tmp ;
  mDNSBool tmp___0 ;

  {
  tmp = DomainNameHashValue((domainname const   *)(& pktrr->name));
  rr = m->rrcache_hash[tmp % 499U];
  while (rr) {
    if ((unsigned int )pktrr->InterfaceID == (unsigned int )rr->resrec.InterfaceID) {
      tmp___0 = IdenticalResourceRecord((ResourceRecord const   *)pktrr, (ResourceRecord const   *)(& rr->resrec));
      if (tmp___0) {
        break;
      } else {
        goto _L;
      }
    } else {
      _L: /* CIL Label */ ;
    }
    rr = rr->next;
  }
  return (rr);
}
}
static mDNSu8 *ProcessQuery(mDNS *m , DNSMessage const   *query , mDNSu8 const   *end ,
                            mDNSAddr const   *srcaddr , mDNSInterfaceID InterfaceID ,
                            mDNSBool LegacyQuery , mDNSBool QueryWasMulticast , DNSMessage *response ) 
{ AuthRecord *ResponseRecords ;
  AuthRecord **nrp ;
  CacheRecord *ExpectedAnswers ;
  CacheRecord **eap ;
  DNSQuestion *DupQuestions ;
  DNSQuestion **dqp ;
  mDNSs32 delayresponse ;
  mDNSBool HaveUnicastAnswer ;
  mDNSu8 const   *ptr ;
  mDNSu8 *responseptr ;
  AuthRecord *rr ;
  AuthRecord *rr2 ;
  int i ;
  mDNSBool QuestionNeedsMulticastResponse ;
  int NumAnswersForThisQuestion ;
  DNSQuestion pktq ;
  DNSQuestion *q ;
  int tmp ;
  mDNSBool tmp___0 ;
  CacheRecord *rr___0 ;
  mDNSu32 tmp___1 ;
  mDNSBool tmp___2 ;
  mDNSBool tmp___3 ;
  mDNSBool tmp___4 ;
  LargeCacheRecord pkt ;
  AuthRecord *rr___1 ;
  CacheRecord *ourcacherr ;
  mDNSBool tmp___5 ;
  mDNSBool tmp___6 ;
  CacheRecord *rr___2 ;
  mDNSBool tmp___7 ;
  DNSQuestion *q___0 ;
  mDNSBool tmp___8 ;
  mDNSBool SendMulticastResponse ;
  mDNSu32 tmp___9 ;
  CacheRecord *rr___3 ;
  mDNSu32 remain ;
  int i___0 ;
  DNSQuestion *q___1 ;

  {
  ResponseRecords = (AuthRecord *)0L;
  nrp = & ResponseRecords;
  ExpectedAnswers = (CacheRecord *)0L;
  eap = & ExpectedAnswers;
  DupQuestions = (DNSQuestion *)0L;
  dqp = & DupQuestions;
  delayresponse = 0;
  HaveUnicastAnswer = (mDNSBool )0;
  ptr = (mDNSu8 const   *)(query->data);
  responseptr = (mDNSu8 *)0L;
  if ((int )query->h.flags.b[0] & 2) {
    delayresponse = mDNSPlatformOneSecond;
  }
  i = 0;
  while (i < (int )query->h.numQuestions) {
    NumAnswersForThisQuestion = 0;
    ptr = getQuestion(query, ptr, end, InterfaceID, & pktq);
    if (! ptr) {
      goto exit;
    }
    if (QueryWasMulticast) {
      if (! LegacyQuery) {
        if (! ((int )pktq.qclass & 32768)) {
          tmp = 1;
        } else {
          goto _L___0;
        }
      } else {
        goto _L___0;
      }
    } else {
      _L___0: /* CIL Label */ 
      tmp = 0;
    }
    QuestionNeedsMulticastResponse = tmp;
    pktq.qclass = (unsigned short )((int )pktq.qclass & -32769);
    if (m->CurrentRecord) {
      LogMsg("ProcessQuery ERROR m->CurrentRecord already set");
    }
    m->CurrentRecord = m->ResourceRecords;
    while (m->CurrentRecord) {
      rr = m->CurrentRecord;
      m->CurrentRecord = rr->next;
      tmp___0 = ResourceRecordAnswersQuestion((ResourceRecord const   *)(& rr->resrec),
                                              (DNSQuestion const   *)(& pktq));
      if (tmp___0) {
        if ((int )rr->resrec.RecordType == 2) {
          ResolveSimultaneousProbe(m, query, end, & pktq, rr);
        } else {
          if ((int )rr->resrec.RecordType & 60) {
            if ((unsigned int )rr->Additional1 == (unsigned int )((AuthRecord *)0)) {
              goto _L___8;
            } else {
              if ((int )(rr->Additional1)->resrec.RecordType & 60) {
                _L___8: /* CIL Label */ 
                if ((unsigned int )rr->Additional2 == (unsigned int )((AuthRecord *)0)) {
                  goto _L___6;
                } else {
                  if ((int )(rr->Additional2)->resrec.RecordType & 60) {
                    _L___6: /* CIL Label */ 
                    if ((unsigned int )rr->DependentOn == (unsigned int )((AuthRecord *)0)) {
                      goto _L___4;
                    } else {
                      if ((int )(rr->DependentOn)->resrec.RecordType & 60) {
                        _L___4: /* CIL Label */ 
                        NumAnswersForThisQuestion ++;
                        if (QuestionNeedsMulticastResponse) {
                          if (m->timenow - (rr->LastMCTime + mDNSPlatformOneSecond) >=
                              0) {
                            goto _L___1;
                          } else {
                            if ((unsigned int )rr->LastMCInterface != (unsigned int )mDNSInterfaceMark) {
                              if ((unsigned int )rr->LastMCInterface != (unsigned int )InterfaceID) {
                                _L___1: /* CIL Label */ 
                                rr->NR_AnswerTo = (mDNSu8 const   *)((mDNSu8 *)(~ 0));
                              } else {
                                goto _L___2;
                              }
                            } else {
                              _L___2: /* CIL Label */ ;
                            }
                          }
                        } else {
                          if (! rr->NR_AnswerTo) {
                            rr->NR_AnswerTo = ptr;
                          }
                        }
                      } else {
                        goto _L___7;
                      }
                    }
                  } else {
                    goto _L___7;
                  }
                }
              } else {
                goto _L___7;
              }
            }
          } else {
            _L___7: /* CIL Label */ ;
          }
        }
      }
    }
    if (QuestionNeedsMulticastResponse) {
      if (NumAnswersForThisQuestion == 0) {
        delayresponse = mDNSPlatformOneSecond;
      }
      tmp___1 = DomainNameHashValue((domainname const   *)(& pktq.qname));
      rr___0 = m->rrcache_hash[tmp___1 % 499U];
      while (rr___0) {
        tmp___2 = ResourceRecordAnswersQuestion((ResourceRecord const   *)(& rr___0->resrec),
                                                (DNSQuestion const   *)(& pktq));
        if (tmp___2) {
          if ((int )rr___0->resrec.rdlength <= 1024) {
            if (! rr___0->NextInKAList) {
              if ((unsigned int )eap != (unsigned int )(& rr___0->NextInKAList)) {
                (*eap) = rr___0;
                eap = & rr___0->NextInKAList;
                if (rr___0->MPUnansweredQ == 0U) {
                  goto _L___9;
                } else {
                  if (m->timenow - rr___0->MPLastUnansweredQT >= mDNSPlatformOneSecond) {
                    _L___9: /* CIL Label */ 
                    rr___0->MPUnansweredQ ++;
                    rr___0->MPLastUnansweredQT = m->timenow;
                    rr___0->MPExpectingKA = 1;
                  }
                }
              } else {
                goto _L___10;
              }
            } else {
              _L___10: /* CIL Label */ ;
            }
          } else {
            goto _L___11;
          }
        } else {
          _L___11: /* CIL Label */ ;
        }
        rr___0 = rr___0->next;
      }
      if (! ((int )query->h.flags.b[0] & 2)) {
        q = m->Questions;
        while (q) {
          if (q->ThisQInterval > 0) {
            if (! q->DuplicateOf) {
              if (m->timenow - q->LastQTxTime > mDNSPlatformOneSecond / 4) {
                if (! q->InterfaceID) {
                  goto _L___16;
                } else {
                  if ((unsigned int )q->InterfaceID == (unsigned int )InterfaceID) {
                    _L___16: /* CIL Label */ 
                    if ((unsigned int )q->NextInDQList == (unsigned int )((DNSQuestion *)0)) {
                      if ((unsigned int )dqp != (unsigned int )(& q->NextInDQList)) {
                        if ((int )q->qtype == (int )pktq.qtype) {
                          if ((int )q->qclass == (int )pktq.qclass) {
                            if (q->qnamehash == pktq.qnamehash) {
                              tmp___3 = SameDomainName((domainname const   *)(& q->qname),
                                                       (domainname const   *)(& pktq.qname));
                              if (tmp___3) {
                                (*dqp) = q;
                                dqp = & q->NextInDQList;
                              } else {
                                goto _L___14;
                              }
                            } else {
                              goto _L___14;
                            }
                          } else {
                            goto _L___14;
                          }
                        } else {
                          _L___14: /* CIL Label */ ;
                        }
                      } else {
                        goto _L___15;
                      }
                    } else {
                      _L___15: /* CIL Label */ ;
                    }
                  }
                }
              } else {
                goto _L___18;
              }
            } else {
              goto _L___18;
            }
          } else {
            _L___18: /* CIL Label */ ;
          }
          q = q->next;
        }
      }
    }
    i ++;
  }
  rr = m->ResourceRecords;
  while (rr) {
    if (rr->NR_AnswerTo) {
      AddRecordToResponseList(& nrp, rr, (AuthRecord *)0L);
    }
    rr = rr->next;
  }
  rr = ResponseRecords;
  while (rr) {
    if (rr->Additional1) {
      if ((int )(rr->Additional1)->resrec.RecordType & 60) {
        if ((unsigned int )(rr->Additional1)->Additional1 == (unsigned int )((AuthRecord *)0)) {
          goto _L___27;
        } else {
          if ((int )((rr->Additional1)->Additional1)->resrec.RecordType & 60) {
            _L___27: /* CIL Label */ 
            if ((unsigned int )(rr->Additional1)->Additional2 == (unsigned int )((AuthRecord *)0)) {
              goto _L___25;
            } else {
              if ((int )((rr->Additional1)->Additional2)->resrec.RecordType & 60) {
                _L___25: /* CIL Label */ 
                if ((unsigned int )(rr->Additional1)->DependentOn == (unsigned int )((AuthRecord *)0)) {
                  goto _L___23;
                } else {
                  if ((int )((rr->Additional1)->DependentOn)->resrec.RecordType &
                      60) {
                    _L___23: /* CIL Label */ 
                    if ((unsigned int )(rr->Additional1)->resrec.InterfaceID == (unsigned int )mDNSInterface_Any) {
                      goto _L___21;
                    } else {
                      if ((unsigned int )(rr->Additional1)->resrec.InterfaceID ==
                          (unsigned int )InterfaceID) {
                        _L___21: /* CIL Label */ 
                        AddRecordToResponseList(& nrp, rr->Additional1, rr);
                      } else {
                        goto _L___26;
                      }
                    }
                  } else {
                    goto _L___26;
                  }
                }
              } else {
                goto _L___26;
              }
            }
          } else {
            goto _L___26;
          }
        }
      } else {
        _L___26: /* CIL Label */ 
        goto _L___19;
      }
    } else {
      _L___19: /* CIL Label */ ;
    }
    if (rr->Additional2) {
      if ((int )(rr->Additional2)->resrec.RecordType & 60) {
        if ((unsigned int )(rr->Additional2)->Additional1 == (unsigned int )((AuthRecord *)0)) {
          goto _L___36;
        } else {
          if ((int )((rr->Additional2)->Additional1)->resrec.RecordType & 60) {
            _L___36: /* CIL Label */ 
            if ((unsigned int )(rr->Additional2)->Additional2 == (unsigned int )((AuthRecord *)0)) {
              goto _L___34;
            } else {
              if ((int )((rr->Additional2)->Additional2)->resrec.RecordType & 60) {
                _L___34: /* CIL Label */ 
                if ((unsigned int )(rr->Additional2)->DependentOn == (unsigned int )((AuthRecord *)0)) {
                  goto _L___32;
                } else {
                  if ((int )((rr->Additional2)->DependentOn)->resrec.RecordType &
                      60) {
                    _L___32: /* CIL Label */ 
                    if ((unsigned int )(rr->Additional2)->resrec.InterfaceID == (unsigned int )mDNSInterface_Any) {
                      goto _L___30;
                    } else {
                      if ((unsigned int )(rr->Additional2)->resrec.InterfaceID ==
                          (unsigned int )InterfaceID) {
                        _L___30: /* CIL Label */ 
                        AddRecordToResponseList(& nrp, rr->Additional2, rr);
                      } else {
                        goto _L___35;
                      }
                    }
                  } else {
                    goto _L___35;
                  }
                }
              } else {
                goto _L___35;
              }
            }
          } else {
            goto _L___35;
          }
        }
      } else {
        _L___35: /* CIL Label */ 
        goto _L___28;
      }
    } else {
      _L___28: /* CIL Label */ ;
    }
    if ((int )rr->resrec.rrtype == 33) {
      rr2 = m->ResourceRecords;
      while (rr2) {
        if ((int )rr2->resrec.rrtype == 1) {
          goto _L___48;
        } else {
          if ((int )rr2->resrec.rrtype == 28) {
            _L___48: /* CIL Label */ 
            if ((int )rr2->resrec.RecordType & 60) {
              if ((unsigned int )rr2->Additional1 == (unsigned int )((AuthRecord *)0)) {
                goto _L___47;
              } else {
                if ((int )(rr2->Additional1)->resrec.RecordType & 60) {
                  _L___47: /* CIL Label */ 
                  if ((unsigned int )rr2->Additional2 == (unsigned int )((AuthRecord *)0)) {
                    goto _L___45;
                  } else {
                    if ((int )(rr2->Additional2)->resrec.RecordType & 60) {
                      _L___45: /* CIL Label */ 
                      if ((unsigned int )rr2->DependentOn == (unsigned int )((AuthRecord *)0)) {
                        goto _L___43;
                      } else {
                        if ((int )(rr2->DependentOn)->resrec.RecordType & 60) {
                          _L___43: /* CIL Label */ 
                          if ((unsigned int )rr2->resrec.InterfaceID == (unsigned int )mDNSInterface_Any) {
                            goto _L___41;
                          } else {
                            if ((unsigned int )rr2->resrec.InterfaceID == (unsigned int )InterfaceID) {
                              _L___41: /* CIL Label */ 
                              if (rr->resrec.rdnamehash == rr2->resrec.namehash) {
                                tmp___4 = SameDomainName((domainname const   *)(& (rr->resrec.rdata)->u.srv.target),
                                                         (domainname const   *)(& rr2->resrec.name));
                                if (tmp___4) {
                                  AddRecordToResponseList(& nrp, rr2, rr);
                                } else {
                                  goto _L___39;
                                }
                              } else {
                                goto _L___39;
                              }
                            } else {
                              goto _L___46;
                            }
                          }
                        } else {
                          goto _L___46;
                        }
                      }
                    } else {
                      goto _L___46;
                    }
                  }
                } else {
                  goto _L___46;
                }
              }
            } else {
              _L___46: /* CIL Label */ 
              goto _L___39;
            }
          } else {
            _L___39: /* CIL Label */ ;
          }
        }
        rr2 = rr2->next;
      }
    }
    rr = rr->NextResponse;
  }
  i = 0;
  while (i < (int )query->h.numAnswers) {
    pkt.r.rdatastorage.MaxRDLength = (unsigned short)8192;
    ptr = GetResourceRecord(m, query, ptr, end, InterfaceID, (unsigned char)192, & pkt.r,
                            (RData *)(& pkt.r.rdatastorage));
    if (! ptr) {
      goto exit;
    }
    rr___1 = ResponseRecords;
    while (rr___1) {
      if (rr___1->NR_AnswerTo) {
        goto _L___50;
      } else {
        if (rr___1->NR_AdditionalTo) {
          _L___50: /* CIL Label */ 
          tmp___5 = ShouldSuppressKnownAnswer((CacheRecord const   *)(& pkt.r), (AuthRecord const   *)rr___1);
          if (tmp___5) {
            rr___1->NR_AnswerTo = (mDNSu8 const   *)0L;
            rr___1->NR_AdditionalTo = (AuthRecord *)0L;
          } else {
            goto _L___49;
          }
        } else {
          _L___49: /* CIL Label */ ;
        }
      }
      rr___1 = rr___1->NextResponse;
    }
    rr___1 = m->ResourceRecords;
    while (rr___1) {
      if ((unsigned int )rr___1->ImmedAnswer == (unsigned int )InterfaceID) {
        tmp___6 = ShouldSuppressKnownAnswer((CacheRecord const   *)(& pkt.r), (AuthRecord const   *)rr___1);
        if (tmp___6) {
          if (srcaddr->type == 4) {
            if (rr___1->v4Requester.NotAnInteger == srcaddr->ip.v4.NotAnInteger) {
              rr___1->v4Requester = zeroIPAddr;
            }
          } else {
            if (srcaddr->type == 6) {
              if (rr___1->v6Requester.l[0] == srcaddr->ip.v6.l[0]) {
                if (rr___1->v6Requester.l[1] == srcaddr->ip.v6.l[1]) {
                  if (rr___1->v6Requester.l[2] == srcaddr->ip.v6.l[2]) {
                    if (rr___1->v6Requester.l[3] == srcaddr->ip.v6.l[3]) {
                      rr___1->v6Requester = zerov6Addr;
                    } else {
                      goto _L___53;
                    }
                  } else {
                    goto _L___53;
                  }
                } else {
                  goto _L___53;
                }
              } else {
                _L___53: /* CIL Label */ ;
              }
            }
          }
          if (rr___1->v4Requester.NotAnInteger == zeroIPAddr.NotAnInteger) {
            if (rr___1->v6Requester.l[0] == zerov6Addr.l[0]) {
              if (rr___1->v6Requester.l[1] == zerov6Addr.l[1]) {
                if (rr___1->v6Requester.l[2] == zerov6Addr.l[2]) {
                  if (rr___1->v6Requester.l[3] == zerov6Addr.l[3]) {
                    rr___1->ImmedAnswer = (struct mDNSInterfaceID_dummystruct *)0L;
                  } else {
                    goto _L___57;
                  }
                } else {
                  goto _L___57;
                }
              } else {
                goto _L___57;
              }
            } else {
              _L___57: /* CIL Label */ 
              goto _L___54;
            }
          } else {
            _L___54: /* CIL Label */ ;
          }
        } else {
          goto _L___58;
        }
      } else {
        _L___58: /* CIL Label */ ;
      }
      rr___1 = rr___1->next;
    }
    ourcacherr = FindIdenticalRecordInCache((mDNS const   *)m, & pkt.r.resrec);
    if (ourcacherr) {
      if (ourcacherr->MPExpectingKA) {
        if (m->timenow - ourcacherr->MPLastUnansweredQT < mDNSPlatformOneSecond) {
          ourcacherr->MPUnansweredKA ++;
          ourcacherr->MPExpectingKA = 0;
        } else {
          goto _L___60;
        }
      } else {
        goto _L___60;
      }
    } else {
      _L___60: /* CIL Label */ ;
    }
    eap = & ExpectedAnswers;
    while ((*eap)) {
      rr___2 = (*eap);
      if ((unsigned int )rr___2->resrec.InterfaceID == (unsigned int )InterfaceID) {
        tmp___7 = IdenticalResourceRecord((ResourceRecord const   *)(& pkt.r.resrec),
                                          (ResourceRecord const   *)(& rr___2->resrec));
        if (tmp___7) {
          (*eap) = rr___2->NextInKAList;
          rr___2->NextInKAList = (CacheRecord *)0L;
        } else {
          goto _L___61;
        }
      } else {
        _L___61: /* CIL Label */ 
        eap = & rr___2->NextInKAList;
      }
    }
    if (! ourcacherr) {
      dqp = & DupQuestions;
      while ((*dqp)) {
        q___0 = (*dqp);
        tmp___8 = ResourceRecordAnswersQuestion((ResourceRecord const   *)(& pkt.r.resrec),
                                                (DNSQuestion const   *)q___0);
        if (tmp___8) {
          (*dqp) = q___0->NextInDQList;
          q___0->NextInDQList = (DNSQuestion *)0L;
        } else {
          dqp = & q___0->NextInDQList;
        }
      }
    }
    i ++;
  }
  rr = ResponseRecords;
  while (rr) {
    if (rr->NR_AdditionalTo) {
      if ((rr->NR_AdditionalTo)->NR_AnswerTo) {
        goto _L___63;
      } else {
        if ((rr->NR_AdditionalTo)->NR_AdditionalTo) {
          _L___63: /* CIL Label */ 
          goto _L___62;
        } else {
          rr->NR_AnswerTo = (mDNSu8 const   *)0L;
          rr->NR_AdditionalTo = (AuthRecord *)0L;
        }
      }
    } else {
      _L___62: /* CIL Label */ ;
    }
    rr = rr->NextResponse;
  }
  rr = ResponseRecords;
  while (rr) {
    if (rr->NR_AnswerTo) {
      SendMulticastResponse = (mDNSBool )0;
      if (m->timenow - (rr->LastMCTime + ((int )rr->resrec.rroriginalttl * mDNSPlatformOneSecond) /
                                         4) >= 0) {
        SendMulticastResponse = 1;
      }
      if ((unsigned int )rr->NR_AnswerTo == (unsigned int )((mDNSu8 *)-1)) {
        SendMulticastResponse = 1;
      } else {
        if (rr->NR_AnswerTo) {
          HaveUnicastAnswer = 1;
        }
      }
      if (SendMulticastResponse) {
        if (rr->ImmedAnswer) {
          if ((unsigned int )rr->ImmedAnswer != (unsigned int )InterfaceID) {
            rr->ImmedAnswer = (struct mDNSInterfaceID_dummystruct *)mDNSInterfaceMark;
            m->NextScheduledResponse = m->timenow;
          } else {
            goto _L___70;
          }
        } else {
          _L___70: /* CIL Label */ 
          rr->ImmedAnswer = InterfaceID;
          m->NextScheduledResponse = m->timenow;
          if (srcaddr->type == 4) {
            if (rr->v4Requester.NotAnInteger == zeroIPAddr.NotAnInteger) {
              rr->v4Requester = srcaddr->ip.v4;
            } else {
              if (! (rr->v4Requester.NotAnInteger == srcaddr->ip.v4.NotAnInteger)) {
                rr->v4Requester = onesIPv4Addr;
              }
            }
          } else {
            if (srcaddr->type == 6) {
              if (rr->v6Requester.l[0] == zerov6Addr.l[0]) {
                if (rr->v6Requester.l[1] == zerov6Addr.l[1]) {
                  if (rr->v6Requester.l[2] == zerov6Addr.l[2]) {
                    if (rr->v6Requester.l[3] == zerov6Addr.l[3]) {
                      rr->v6Requester = srcaddr->ip.v6;
                    } else {
                      goto _L___69;
                    }
                  } else {
                    goto _L___69;
                  }
                } else {
                  goto _L___69;
                }
              } else {
                _L___69: /* CIL Label */ 
                if (rr->v6Requester.l[0] == srcaddr->ip.v6.l[0]) {
                  if (rr->v6Requester.l[1] == srcaddr->ip.v6.l[1]) {
                    if (rr->v6Requester.l[2] == srcaddr->ip.v6.l[2]) {
                      if (! (rr->v6Requester.l[3] == srcaddr->ip.v6.l[3])) {
                        goto _L___66;
                      }
                    } else {
                      goto _L___66;
                    }
                  } else {
                    goto _L___66;
                  }
                } else {
                  _L___66: /* CIL Label */ 
                  rr->v6Requester = onesIPv6Addr;
                }
              }
            }
          }
        }
      }
      if ((int )rr->resrec.RecordType == 8) {
        if ((int )query->h.flags.b[0] & 2) {
          delayresponse = mDNSPlatformOneSecond * 20;
        } else {
          delayresponse = mDNSPlatformOneSecond;
        }
      }
    } else {
      if (rr->NR_AdditionalTo) {
        if ((unsigned int )(rr->NR_AdditionalTo)->NR_AnswerTo == (unsigned int )((mDNSu8 *)-1)) {
          rr->ImmedAdditional = InterfaceID;
        } else {
          goto _L___71;
        }
      } else {
        _L___71: /* CIL Label */ ;
      }
    }
    rr = rr->NextResponse;
  }
  if (delayresponse) {
    if (! m->SuppressSending) {
      goto _L___73;
    } else {
      if (m->SuppressSending - m->timenow < (delayresponse + 49) / 50) {
        _L___73: /* CIL Label */ 
        tmp___9 = mDNSRandom((unsigned int )mDNSPlatformOneSecond * 5U);
        m->SuppressSending = m->timenow + ((delayresponse + (int )tmp___9) + 49) /
                                          50;
        if (m->SuppressSending == 0) {
          m->SuppressSending = 1;
        }
      } else {
        goto _L___72;
      }
    }
  } else {
    _L___72: /* CIL Label */ ;
  }
  if (HaveUnicastAnswer) {
    responseptr = GenerateUnicastResponse(query, end, InterfaceID, LegacyQuery, response,
                                          ResponseRecords);
  }
  exit: 
  while (ResponseRecords) {
    rr = ResponseRecords;
    ResponseRecords = rr->NextResponse;
    rr->NextResponse = (AuthRecord *)0L;
    rr->NR_AnswerTo = (mDNSu8 const   *)0L;
    rr->NR_AdditionalTo = (AuthRecord *)0L;
  }
  while (ExpectedAnswers) {
    rr___3 = ExpectedAnswers;
    ExpectedAnswers = rr___3->NextInKAList;
    rr___3->NextInKAList = (CacheRecord *)0L;
    if (! ((int )query->h.flags.b[0] & 2)) {
      if (rr___3->UnansweredQueries == 0U) {
        goto _L___74;
      } else {
        if (m->timenow - rr___3->LastUnansweredTime >= mDNSPlatformOneSecond) {
          _L___74: /* CIL Label */ 
          rr___3->UnansweredQueries ++;
          rr___3->LastUnansweredTime = m->timenow;
          if (rr___3->UnansweredQueries > 1U) {

          }
          SetNextCacheCheckTime(m, rr___3);
        }
      }
    }
    if (rr___3->UnansweredQueries >= 4U) {
      if ((rr___3->TimeRcvd + (int )rr___3->resrec.rroriginalttl * mDNSPlatformOneSecond) -
          m->timenow > 4 * mDNSPlatformOneSecond) {

      }
      mDNS_Reconfirm_internal(m, rr___3, (unsigned int )mDNSPlatformOneSecond * 45U);
    } else {
      if (rr___3->MPUnansweredQ * 4U > rr___3->MPUnansweredKA * 5U + 8U) {
        remain = (unsigned int )((rr___3->TimeRcvd + (int )rr___3->resrec.rroriginalttl *
                                                     mDNSPlatformOneSecond) - m->timenow) /
                 4U;
        if (remain > 240U * (unsigned int )mDNSPlatformOneSecond) {
          remain = 240U * (unsigned int )mDNSPlatformOneSecond;
        }
        if ((rr___3->TimeRcvd + (int )rr___3->resrec.rroriginalttl * mDNSPlatformOneSecond) -
            m->timenow > 4 * mDNSPlatformOneSecond) {

        }
        if (remain <= 60U * (unsigned int )mDNSPlatformOneSecond) {
          rr___3->UnansweredQueries ++;
        }
        rr___3->MPUnansweredQ = 0U;
        rr___3->MPUnansweredKA = 0U;
        rr___3->MPExpectingKA = 0;
        if (remain < (unsigned int )mDNSPlatformOneSecond * 45U) {
          remain = (unsigned int )mDNSPlatformOneSecond * 45U;
        }
        mDNS_Reconfirm_internal(m, rr___3, remain);
      }
    }
  }
  while (DupQuestions) {
    q___1 = DupQuestions;
    DupQuestions = q___1->NextInDQList;
    q___1->NextInDQList = (DNSQuestion *)0L;
    i___0 = RecordDupSuppressInfo(q___1->DupSuppress, m->timenow, InterfaceID, srcaddr->type);
  }
  return (responseptr);
}
}
static void mDNSCoreReceiveQuery(mDNS *m , DNSMessage const   *msg , mDNSu8 const   *end ,
                                 mDNSAddr const   *srcaddr , mDNSIPPort srcport ,
                                 mDNSAddr const   *dstaddr , mDNSIPPort dstport ,
                                 mDNSInterfaceID InterfaceID ) 
{ DNSMessage response ;
  mDNSu8 const   *responseend ;
  mDNSBool tmp ;

  {
  responseend = (mDNSu8 const   *)0L;
  tmp = mDNSAddrIsDNSMulticast(dstaddr);
  responseend = ProcessQuery(m, msg, end, srcaddr, InterfaceID, (int )srcport.NotAnInteger !=
                                                                (int )MulticastDNSPort.NotAnInteger,
                             tmp, & response);
  if (responseend) {
    mDNSSendDNSMessage((mDNS const   *)m, & response, responseend, InterfaceID, dstport,
                       srcaddr, srcport);
  }
  return;
}
}
static void mDNSCoreReceiveResponse(mDNS *m , DNSMessage const   *response , mDNSu8 const   *end ,
                                    mDNSAddr const   *srcaddr , mDNSAddr const   *dstaddr ,
                                    mDNSInterfaceID InterfaceID , mDNSu8 ttl ) 
{ int i ;
  mDNSu8 const   *ptr ;
  mDNSu8 const   *tmp ;
  CacheRecord *CacheFlushRecords ;
  CacheRecord **cfp ;
  int totalrecords ;
  mDNSBool tmp___0 ;
  LargeCacheRecord pkt ;
  mDNSu8 RecordType ;
  int tmp___1 ;
  AuthRecord *rr ;
  mDNSBool tmp___2 ;
  mDNSBool tmp___3 ;
  mDNSBool tmp___4 ;
  mDNSu32 slot ;
  mDNSu32 tmp___5 ;
  CacheRecord *rr___0 ;
  DNSQuestion *q ;
  mDNSBool tmp___6 ;
  mDNSBool tmp___7 ;
  RData *saveptr ;
  CacheRecord *r1 ;
  CacheRecord *r2 ;
  mDNSu32 tmp___8 ;
  mDNSBool tmp___9 ;

  {
  tmp = LocateAnswers(response, end);
  ptr = tmp;
  CacheFlushRecords = (CacheRecord *)0L;
  cfp = & CacheFlushRecords;
  totalrecords = ((int )response->h.numAnswers + (int )response->h.numAuthorities) +
                 (int )response->h.numAdditionals;
  if ((int )ttl < 254) {
    goto _L;
  } else {
    tmp___0 = mDNSAddrIsDNSMulticast(dstaddr);
    if (tmp___0) {
      _L___0: /* CIL Label */ ;
    } else {
      if ((unsigned int )(m->timenow - m->ExpectUnicastResponse) > (unsigned int )mDNSPlatformOneSecond) {
        _L: /* CIL Label */ 
        return;
      } else {
        goto _L___0;
      }
    }
  }
  i = 0;
  while (1) {
    if (i < totalrecords) {
      if (ptr) {
        if (! ((unsigned int )ptr < (unsigned int )end)) {
          goto _L___8;
        }
      } else {
        goto _L___8;
      }
    } else {
      _L___8: /* CIL Label */ 
      break;
    }
    if (i < (int )response->h.numAnswers) {
      tmp___1 = 192;
    } else {
      tmp___1 = 128;
    }
    RecordType = (unsigned char )tmp___1;
    pkt.r.rdatastorage.MaxRDLength = (unsigned short)8192;
    ptr = GetResourceRecord(m, response, ptr, end, InterfaceID, RecordType, & pkt.r,
                            (RData *)(& pkt.r.rdatastorage));
    if (! ptr) {
      break;
    }
    if (m->CurrentRecord) {
      LogMsg("mDNSCoreReceiveResponse ERROR m->CurrentRecord already set");
    }
    m->CurrentRecord = m->ResourceRecords;
    while (m->CurrentRecord) {
      rr = m->CurrentRecord;
      m->CurrentRecord = rr->next;
      tmp___4 = PacketRRMatchesSignature((CacheRecord const   *)(& pkt.r), (AuthRecord const   *)rr);
      if (tmp___4) {
        tmp___3 = SameRData((ResourceRecord const   *)(& pkt.r.resrec), (ResourceRecord const   *)(& rr->resrec));
        if (tmp___3) {
          if (pkt.r.resrec.rroriginalttl >= rr->resrec.rroriginalttl / 2U) {
            goto _L___1;
          } else {
            if (m->SleepState) {
              _L___1: /* CIL Label */ 
              if ((unsigned int )rr->ImmedAnswer == (unsigned int )InterfaceID) {
                rr->ImmedAnswer = (struct mDNSInterfaceID_dummystruct *)0L;
              }
            } else {
              if ((unsigned int )rr->ImmedAnswer == (unsigned int )((mDNSInterfaceID )0)) {
                rr->ImmedAnswer = InterfaceID;
                m->NextScheduledResponse = m->timenow;
              } else {
                if ((unsigned int )rr->ImmedAnswer != (unsigned int )InterfaceID) {
                  rr->ImmedAnswer = (struct mDNSInterfaceID_dummystruct *)mDNSInterfaceMark;
                  m->NextScheduledResponse = m->timenow;
                }
              }
            }
          }
        } else {
          if (pkt.r.resrec.rroriginalttl > 0U) {
            tmp___2 = PacketRRConflict((mDNS const   *)m, (AuthRecord const   *)rr,
                                       (CacheRecord const   *)(& pkt.r));
            if (tmp___2) {
              while (rr->DependentOn) {
                rr = rr->DependentOn;
              }
              if ((int )rr->ProbeCount <= 3) {
                if ((int )rr->resrec.RecordType == 16) {
                  rr->resrec.RecordType = (unsigned char)2;
                  rr->ProbeCount = (unsigned char)4;
                  rr->ThisAPInterval = mDNSPlatformOneSecond / 4;
                  InitializeLastAPTime(m, rr);
                  RecordProbeFailure(m, (AuthRecord const   *)rr);
                } else {
                  if ((int )rr->resrec.RecordType == 2) {
                    mDNS_Deregister_internal(m, rr, 1);
                  } else {
                    if ((int )rr->resrec.RecordType == 32) {
                      mDNS_Deregister_internal(m, rr, 1);
                    }
                  }
                }
              }
            } else {
              goto _L___3;
            }
          } else {
            _L___3: /* CIL Label */ 
            if ((int )pkt.r.resrec.RecordType & 32) {
              if (m->timenow - rr->LastMCTime > mDNSPlatformOneSecond / 2) {
                rr->ImmedAnswer = (struct mDNSInterfaceID_dummystruct *)mDNSInterfaceMark;
                m->NextScheduledResponse = m->timenow;
              } else {
                goto _L___2;
              }
            } else {
              _L___2: /* CIL Label */ ;
            }
          }
        }
      }
    }
    if (m->rrcache_size) {
      tmp___5 = DomainNameHashValue((domainname const   *)(& pkt.r.resrec.name));
      slot = tmp___5 % 499U;
      rr___0 = m->rrcache_hash[slot];
      while (rr___0) {
        if ((unsigned int )rr___0->resrec.InterfaceID == (unsigned int )InterfaceID) {
          tmp___7 = IdenticalResourceRecord((ResourceRecord const   *)(& pkt.r.resrec),
                                            (ResourceRecord const   *)(& rr___0->resrec));
          if (tmp___7) {
            if ((int )pkt.r.resrec.rdlength > 64) {

            }
            rr___0->TimeRcvd = m->timenow;
            if ((int )pkt.r.resrec.RecordType & 32) {
              if ((unsigned int )rr___0->NextInCFList == (unsigned int )((CacheRecord *)0)) {
                if ((unsigned int )cfp != (unsigned int )(& rr___0->NextInCFList)) {
                  (*cfp) = rr___0;
                  cfp = & rr___0->NextInCFList;
                } else {
                  goto _L___4;
                }
              } else {
                _L___4: /* CIL Label */ ;
              }
              if (! ((int )rr___0->resrec.RecordType & 32)) {
                q = m->Questions;
                while (q) {
                  tmp___6 = ResourceRecordAnswersQuestion((ResourceRecord const   *)(& rr___0->resrec),
                                                          (DNSQuestion const   *)q);
                  if (tmp___6) {
                    q->UniqueAnswers ++;
                  }
                  q = q->next;
                }
                rr___0->resrec.RecordType = pkt.r.resrec.RecordType;
              }
            }
            if (pkt.r.resrec.rroriginalttl > 0U) {
              rr___0->resrec.rroriginalttl = pkt.r.resrec.rroriginalttl;
              rr___0->UnansweredQueries = 0U;
              rr___0->MPUnansweredQ = 0U;
              rr___0->MPUnansweredKA = 0U;
              rr___0->MPExpectingKA = 0;
            } else {
              rr___0->resrec.rroriginalttl = 1U;
              rr___0->UnansweredQueries = 4U;
            }
            SetNextCacheCheckTime(m, rr___0);
            break;
          } else {
            goto _L___5;
          }
        } else {
          _L___5: /* CIL Label */ ;
        }
        rr___0 = rr___0->next;
      }
      if (! rr___0) {
        if (pkt.r.resrec.rroriginalttl > 0U) {
          rr___0 = GetFreeCacheRR(m, pkt.r.resrec.rdlength);
          if (! (! rr___0)) {
            saveptr = rr___0->resrec.rdata;
            (*rr___0) = pkt.r;
            rr___0->resrec.rdata = saveptr;
            if ((int )rr___0->resrec.RecordType & 32) {
              (*cfp) = rr___0;
              cfp = & rr___0->NextInCFList;
            }
            if ((int )pkt.r.resrec.rdlength > 64) {
              mDNSPlatformMemCopy((void const   *)pkt.r.resrec.rdata, (void *)rr___0->resrec.rdata,
                                  (sizeof(RData ) - sizeof(RDataBody )) + (unsigned int )pkt.r.resrec.rdlength);
            }
            rr___0->next = (CacheRecord *)0L;
            (*(m->rrcache_tail[slot])) = rr___0;
            m->rrcache_tail[slot] = & rr___0->next;
            m->rrcache_used[slot] ++;
            CacheRecordAdd(m, rr___0);
            SetNextCacheCheckTime(m, rr___0);
          }
        } else {
          goto _L___6;
        }
      } else {
        _L___6: /* CIL Label */ ;
      }
    }
    i ++;
  }
  while (CacheFlushRecords) {
    r1 = CacheFlushRecords;
    CacheFlushRecords = CacheFlushRecords->NextInCFList;
    r1->NextInCFList = (CacheRecord *)0L;
    tmp___8 = DomainNameHashValue((domainname const   *)(& r1->resrec.name));
    r2 = m->rrcache_hash[tmp___8 % 499U];
    while (r2) {
      tmp___9 = SameResourceRecordSignature((ResourceRecord const   *)(& r1->resrec),
                                            (ResourceRecord const   *)(& r2->resrec));
      if (tmp___9) {
        if (m->timenow - r2->TimeRcvd > mDNSPlatformOneSecond) {
          r2->resrec.rroriginalttl = 1U;
          r2->TimeRcvd = m->timenow;
          r2->UnansweredQueries = 4U;
          SetNextCacheCheckTime(m, r2);
        } else {
          goto _L___9;
        }
      } else {
        _L___9: /* CIL Label */ ;
      }
      r2 = r2->next;
    }
  }
  return;
}
}
void mDNSCoreReceive(mDNS *m , DNSMessage *msg , mDNSu8 const   *end , mDNSAddr const   *srcaddr ,
                     mDNSIPPort srcport , mDNSAddr const   *dstaddr , mDNSIPPort dstport ,
                     mDNSInterfaceID InterfaceID , mDNSu8 ttl ) 
{ mDNSu8 StdQ ;
  mDNSu8 StdR ;
  mDNSu8 QR_OP ;
  mDNSu8 *ptr ;
  int tmp___3 ;
  int tmp___4 ;
  int tmp___6 ;

  {
  StdQ = (mDNSu8 )0;
  StdR = (mDNSu8 )128;
  QR_OP = (unsigned char )((int )msg->h.flags.b[0] & 248);
  ptr = (mDNSu8 *)(& msg->h.numQuestions);
  msg->h.numQuestions = (unsigned short )(((int )((unsigned short )(*(ptr + 0))) <<
                                           8) | (int )(*(ptr + 1)));
  msg->h.numAnswers = (unsigned short )(((int )((unsigned short )(*(ptr + 2))) <<
                                         8) | (int )(*(ptr + 3)));
  msg->h.numAuthorities = (unsigned short )(((int )((unsigned short )(*(ptr + 4))) <<
                                             8) | (int )(*(ptr + 5)));
  msg->h.numAdditionals = (unsigned short )(((int )((unsigned short )(*(ptr + 6))) <<
                                             8) | (int )(*(ptr + 7)));
  if (! m) {
    LogMsg("mDNSCoreReceive ERROR m is NULL");
    return;
  }
  if (srcaddr->type == 4) {
    if (srcaddr->ip.v4.NotAnInteger == zeroIPAddr.NotAnInteger) {
      goto _L___14;
    } else {
      if (srcaddr->ip.v4.NotAnInteger == onesIPv4Addr.NotAnInteger) {
        _L___14: /* CIL Label */ 
        tmp___4 = 0;
      } else {
        tmp___4 = 1;
      }
    }
    tmp___3 = tmp___4;
  } else {
    if (srcaddr->type == 6) {
      if (srcaddr->ip.v6.l[0] == zerov6Addr.l[0]) {
        if (srcaddr->ip.v6.l[1] == zerov6Addr.l[1]) {
          if (srcaddr->ip.v6.l[2] == zerov6Addr.l[2]) {
            if (srcaddr->ip.v6.l[3] == zerov6Addr.l[3]) {
              goto _L___22;
            } else {
              goto _L___28;
            }
          } else {
            goto _L___28;
          }
        } else {
          goto _L___28;
        }
      } else {
        _L___28: /* CIL Label */ 
        if (srcaddr->ip.v6.l[0] == onesIPv6Addr.l[0]) {
          if (srcaddr->ip.v6.l[1] == onesIPv6Addr.l[1]) {
            if (srcaddr->ip.v6.l[2] == onesIPv6Addr.l[2]) {
              if (srcaddr->ip.v6.l[3] == onesIPv6Addr.l[3]) {
                _L___22: /* CIL Label */ 
                tmp___6 = 0;
              } else {
                goto _L___25;
              }
            } else {
              goto _L___25;
            }
          } else {
            goto _L___25;
          }
        } else {
          _L___25: /* CIL Label */ 
          tmp___6 = 1;
        }
      }
      tmp___3 = tmp___6;
    } else {
      tmp___3 = 0;
    }
  }
  if (! tmp___3) {
    return;
  }
  mDNS_Lock(m);
  if ((int )QR_OP == (int )StdQ) {
    mDNSCoreReceiveQuery(m, (DNSMessage const   *)msg, end, srcaddr, srcport, dstaddr,
                         dstport, InterfaceID);
  } else {
    if ((int )QR_OP == (int )StdR) {
      mDNSCoreReceiveResponse(m, (DNSMessage const   *)msg, end, srcaddr, dstaddr,
                              InterfaceID, ttl);
    }
  }
  mDNS_Unlock(m);
  return;
}
}
static DNSQuestion *FindDuplicateQuestion(mDNS const   *m , DNSQuestion const   *question ) 
{ DNSQuestion *q ;
  mDNSBool tmp ;

  {
  q = m->Questions;
  while (1) {
    if (q) {
      if (! ((unsigned int )q != (unsigned int )question)) {
        goto _L___3;
      }
    } else {
      _L___3: /* CIL Label */ 
      break;
    }
    if ((unsigned int )q->InterfaceID == (unsigned int )question->InterfaceID) {
      if ((int )q->qtype == (int )question->qtype) {
        if ((int )q->qclass == (int )question->qclass) {
          if (q->qnamehash == question->qnamehash) {
            tmp = SameDomainName((domainname const   *)(& q->qname), (domainname const   *)(& question->qname));
            if (tmp) {
              return (q);
            } else {
              goto _L___2;
            }
          } else {
            goto _L___2;
          }
        } else {
          goto _L___2;
        }
      } else {
        goto _L___2;
      }
    } else {
      _L___2: /* CIL Label */ ;
    }
    q = q->next;
  }
  return ((DNSQuestion *)0L);
}
}
static void UpdateQuestionDuplicates(mDNS *m , DNSQuestion const   *question ) 
{ DNSQuestion *q ;

  {
  q = m->Questions;
  while (q) {
    if ((unsigned int )q->DuplicateOf == (unsigned int )question) {
      q->ThisQInterval = question->ThisQInterval;
      q->LastQTime = question->LastQTime;
      q->RecentAnswers = 0U;
      q->DuplicateOf = FindDuplicateQuestion((mDNS const   *)m, (DNSQuestion const   *)q);
      q->LastQTxTime = question->LastQTxTime;
      SetNextQueryTime(m, (DNSQuestion const   *)q);
    }
    q = q->next;
  }
  return;
}
}
static mStatus mDNS_StartQuery_internal(mDNS *m , DNSQuestion *question ) 
{ int i ;
  DNSQuestion **q ;
  char *tmp ;
  NetworkInterfaceInfo *intf ;
  char *tmp___0 ;
  mDNSu16 tmp___1 ;
  mDNSu32 tmp___2 ;

  {
  if (m->rrcache_size == 0U) {
    return (-65546);
  } else {
    q = & m->Questions;
    if ((unsigned int )question->InterfaceID == (unsigned int )((struct mDNSInterfaceID_dummystruct *)-1)) {
      q = & m->LocalOnlyQuestions;
    }
    while (1) {
      if ((*q)) {
        if (! ((unsigned int )(*q) != (unsigned int )question)) {
          goto _L;
        }
      } else {
        _L: /* CIL Label */ 
        break;
      }
      q = & ((*q))->next;
    }
    if ((*q)) {
      tmp = DNSTypeName(question->qtype);
      LogMsg("Error! Tried to add a question %##s (%s) that\'s already in the active list",
             question->qname.c, tmp);
      return (-65547);
    }
    if (question->InterfaceID) {
      if ((unsigned int )question->InterfaceID != (unsigned int )((struct mDNSInterfaceID_dummystruct *)-1)) {
        intf = m->HostInterfaces;
        while (intf) {
          if ((unsigned int )intf->InterfaceID == (unsigned int )question->InterfaceID) {
            break;
          }
          intf = intf->next;
        }
        if (! intf) {
          return (-65541);
        }
      } else {
        goto _L___0;
      }
    } else {
      _L___0: /* CIL Label */ ;
    }
    tmp___1 = DomainNameLength((domainname const   *)(& question->qname));
    if (! ((int )tmp___1 <= 255)) {
      tmp___0 = DNSTypeName(question->qtype);
      LogMsg("Attempt to start query with invalid qname %##s %s", question->qname.c,
             tmp___0);
      return (-65549);
    }
    if (! m->RandomQueryDelay) {
      tmp___2 = mDNSRandom((unsigned int )(mDNSPlatformOneSecond / 2));
      m->RandomQueryDelay = 1 + (int )tmp___2;
    }
    question->next = (DNSQuestion *)0L;
    question->qnamehash = DomainNameHashValue((domainname const   *)(& question->qname));
    question->ThisQInterval = (mDNSPlatformOneSecond / 2) * 2;
    question->LastQTime = m->timenow - m->RandomQueryDelay;
    question->RecentAnswers = 0U;
    question->CurrentAnswers = 0U;
    question->LargeAnswers = 0U;
    question->UniqueAnswers = 0U;
    question->DuplicateOf = FindDuplicateQuestion((mDNS const   *)m, (DNSQuestion const   *)question);
    question->NextInDQList = (DNSQuestion *)0L;
    i = 0;
    while (i < 8) {
      question->DupSuppress[i].InterfaceID = (struct mDNSInterfaceID_dummystruct *)0L;
      i ++;
    }
    question->SendQNow = (struct mDNSInterfaceID_dummystruct *)0L;
    question->SendOnAll = 0;
    question->LastQTxTime = m->timenow;
    if (! question->DuplicateOf) {

    }
    (*q) = question;
    if ((unsigned int )question->InterfaceID == (unsigned int )((struct mDNSInterfaceID_dummystruct *)-1)) {
      if (! m->NewLocalOnlyQuestions) {
        m->NewLocalOnlyQuestions = question;
      }
    } else {
      if (! m->NewQuestions) {
        m->NewQuestions = question;
      }
      SetNextQueryTime(m, (DNSQuestion const   *)question);
    }
    return (0);
  }
}
}
static mStatus mDNS_StopQuery_internal(mDNS *m , DNSQuestion *question ) 
{ CacheRecord *rr ;
  DNSQuestion **q ;
  char *tmp ;
  mDNSu32 tmp___0 ;
  DNSQuestion *q___0 ;
  mDNSBool tmp___1 ;

  {
  q = & m->Questions;
  if ((unsigned int )question->InterfaceID == (unsigned int )((struct mDNSInterfaceID_dummystruct *)-1)) {
    q = & m->LocalOnlyQuestions;
  }
  while (1) {
    if ((*q)) {
      if (! ((unsigned int )(*q) != (unsigned int )question)) {
        goto _L;
      }
    } else {
      _L: /* CIL Label */ 
      break;
    }
    q = & ((*q))->next;
  }
  if ((*q)) {
    (*q) = ((*q))->next;
  } else {
    if (question->ThisQInterval >= 0) {
      tmp = DNSTypeName(question->qtype);
      LogMsg("mDNS_StopQuery_internal: Question %##s (%s) not found in active list",
             question->qname.c, tmp);
    }
    return (-65541);
  }
  UpdateQuestionDuplicates(m, (DNSQuestion const   *)question);
  question->ThisQInterval = -1;
  tmp___0 = DomainNameHashValue((domainname const   *)(& question->qname));
  rr = m->rrcache_hash[tmp___0 % 499U];
  while (rr) {
    if ((unsigned int )rr->CRActiveQuestion == (unsigned int )question) {
      q___0 = m->Questions;
      while (q___0) {
        if (q___0->ThisQInterval > 0) {
          if (! q___0->DuplicateOf) {
            tmp___1 = ResourceRecordAnswersQuestion((ResourceRecord const   *)(& rr->resrec),
                                                    (DNSQuestion const   *)q___0);
            if (tmp___1) {
              break;
            } else {
              goto _L___1;
            }
          } else {
            goto _L___1;
          }
        } else {
          _L___1: /* CIL Label */ ;
        }
        q___0 = q___0->next;
      }
      rr->CRActiveQuestion = q___0;
      if (! q___0) {
        m->rrcache_active --;
      }
    }
    rr = rr->next;
  }
  if ((unsigned int )m->CurrentQuestion == (unsigned int )question) {
    m->CurrentQuestion = question->next;
  }
  if ((unsigned int )m->NewQuestions == (unsigned int )question) {
    m->NewQuestions = question->next;
  }
  if ((unsigned int )m->NewLocalOnlyQuestions == (unsigned int )question) {
    m->NewLocalOnlyQuestions = question->next;
  }
  question->next = (DNSQuestion *)0L;
  return (0);
}
}
mStatus mDNS_StartQuery(mDNS *m , DNSQuestion *question ) 
{ mStatus status ;

  {
  mDNS_Lock(m);
  status = mDNS_StartQuery_internal(m, question);
  mDNS_Unlock(m);
  return (status);
}
}
mStatus mDNS_StopQuery(mDNS *m , DNSQuestion *question ) 
{ mStatus status ;

  {
  mDNS_Lock(m);
  status = mDNS_StopQuery_internal(m, question);
  mDNS_Unlock(m);
  return (status);
}
}
mStatus mDNS_Reconfirm(mDNS *m , CacheRecord *rr ) 
{ mStatus status ;

  {
  mDNS_Lock(m);
  status = mDNS_Reconfirm_internal(m, rr, (unsigned int )mDNSPlatformOneSecond * 45U);
  mDNS_Unlock(m);
  return (status);
}
}
mStatus mDNS_ReconfirmByValue(mDNS *m , ResourceRecord *rr ) 
{ mStatus status ;
  CacheRecord *cr ;

  {
  status = (mStatus )-65541;
  mDNS_Lock(m);
  cr = FindIdenticalRecordInCache((mDNS const   *)m, rr);
  if (cr) {
    status = mDNS_Reconfirm_internal(m, cr, (unsigned int )mDNSPlatformOneSecond *
                                            45U);
  }
  mDNS_Unlock(m);
  return (status);
}
}
mStatus mDNS_StartBrowse(mDNS *m , DNSQuestion *question , domainname const   *srv ,
                         domainname const   *domain , mDNSInterfaceID InterfaceID ,
                         mDNSQuestionCallback *Callback , void *Context ) 
{ mDNSu8 *tmp ;
  mStatus tmp___0 ;

  {
  question->ThisQInterval = -1;
  question->InterfaceID = InterfaceID;
  question->qtype = (unsigned short)12;
  question->qclass = (unsigned short)1;
  question->QuestionCallback = Callback;
  question->QuestionContext = Context;
  tmp = ConstructServiceName(& question->qname, (domainlabel const   *)0L, srv, domain);
  if (! tmp) {
    return (-65540);
  }
  tmp___0 = mDNS_StartQuery(m, question);
  return (tmp___0);
}
}
static void FoundServiceInfoSRV(mDNS *m , DNSQuestion *question , ResourceRecord const   *answer ,
                                mDNSBool AddRecord ) 
{ ServiceInfoQuery *query ;
  mDNSBool PortChanged ;
  mDNSu32 tmp ;
  mDNSu32 tmp___0 ;
  mDNSu32 tmp___1 ;
  mDNSu32 tmp___2 ;
  mDNSBool tmp___3 ;
  mDNSBool tmp___4 ;

  {
  query = (ServiceInfoQuery *)question->QuestionContext;
  PortChanged = (int )(query->info)->port.NotAnInteger != (int )(answer->rdata)->u.srv.port.NotAnInteger;
  if (! AddRecord) {
    return;
  }
  if ((int )answer->rrtype != 33) {
    return;
  }
  (query->info)->port = (answer->rdata)->u.srv.port;
  if (! query->GotSRV) {
    query->GotSRV = (unsigned char)1;
    query->qAv4.InterfaceID = answer->InterfaceID;
    tmp = (mDNSu32 )DomainNameLength((domainname const   *)(& (answer->rdata)->u.srv.target));
    mDNSPlatformMemCopy((void const   *)((answer->rdata)->u.srv.target.c), (void *)(query->qAv4.qname.c),
                        tmp);
    query->qAv6.InterfaceID = answer->InterfaceID;
    tmp___0 = (mDNSu32 )DomainNameLength((domainname const   *)(& (answer->rdata)->u.srv.target));
    mDNSPlatformMemCopy((void const   *)((answer->rdata)->u.srv.target.c), (void *)(query->qAv6.qname.c),
                        tmp___0);
    mDNS_StartQuery_internal(m, & query->qAv4);
    mDNS_StartQuery_internal(m, & query->qAv6);
  } else {
    if ((unsigned int )query->qAv4.InterfaceID != (unsigned int )query->qSRV.InterfaceID) {
      if ((unsigned int )query->qAv4.InterfaceID != (unsigned int )answer->InterfaceID) {
        goto _L___3;
      } else {
        goto _L___4;
      }
    } else {
      _L___4: /* CIL Label */ 
      tmp___4 = SameDomainName((domainname const   *)(& query->qAv4.qname), (domainname const   *)(& (answer->rdata)->u.srv.target));
      if (tmp___4) {
        if (query->ServiceInfoQueryCallback) {
          if (query->GotADD) {
            if (query->GotTXT) {
              if (PortChanged) {
                query->Answers ++;
                if (query->Answers >= 100U) {

                }
                ((*(query->ServiceInfoQueryCallback)))(m, query);
              } else {
                goto _L___2;
              }
            } else {
              goto _L___2;
            }
          } else {
            goto _L___2;
          }
        } else {
          _L___2: /* CIL Label */ ;
        }
      } else {
        _L___3: /* CIL Label */ 
        mDNS_StopQuery_internal(m, & query->qAv4);
        mDNS_StopQuery_internal(m, & query->qAv6);
        tmp___3 = SameDomainName((domainname const   *)(& query->qAv4.qname), (domainname const   *)(& (answer->rdata)->u.srv.target));
        if (tmp___3) {
          if (! PortChanged) {
            query->qAv4.InterfaceID = query->qSRV.InterfaceID;
            query->qAv6.InterfaceID = query->qSRV.InterfaceID;
          } else {
            goto _L;
          }
        } else {
          _L: /* CIL Label */ 
          query->qAv4.InterfaceID = answer->InterfaceID;
          tmp___1 = (mDNSu32 )DomainNameLength((domainname const   *)(& (answer->rdata)->u.srv.target));
          mDNSPlatformMemCopy((void const   *)((answer->rdata)->u.srv.target.c), (void *)(query->qAv4.qname.c),
                              tmp___1);
          query->qAv6.InterfaceID = answer->InterfaceID;
          tmp___2 = (mDNSu32 )DomainNameLength((domainname const   *)(& (answer->rdata)->u.srv.target));
          mDNSPlatformMemCopy((void const   *)((answer->rdata)->u.srv.target.c), (void *)(query->qAv6.qname.c),
                              tmp___2);
        }
        mDNS_StartQuery_internal(m, & query->qAv4);
        mDNS_StartQuery_internal(m, & query->qAv6);
      }
    }
  }
  return;
}
}
static void FoundServiceInfoTXT(mDNS *m , DNSQuestion *question , ResourceRecord const   *answer ,
                                mDNSBool AddRecord ) 
{ ServiceInfoQuery *query ;

  {
  query = (ServiceInfoQuery *)question->QuestionContext;
  if (! AddRecord) {
    return;
  }
  if ((int )answer->rrtype != 16) {
    return;
  }
  if ((unsigned int )answer->rdlength > sizeof((query->info)->TXTinfo)) {
    return;
  }
  query->GotTXT = (unsigned char)1;
  (query->info)->TXTlen = answer->rdlength;
  mDNSPlatformMemCopy((void const   *)((answer->rdata)->u.txt.c), (void *)((query->info)->TXTinfo),
                      (unsigned int )answer->rdlength);
  if (query->ServiceInfoQueryCallback) {
    if (query->GotADD) {
      query->Answers ++;
      if (query->Answers >= 100U) {

      }
      ((*(query->ServiceInfoQueryCallback)))(m, query);
    } else {
      goto _L;
    }
  } else {
    _L: /* CIL Label */ ;
  }
  return;
}
}
static void FoundServiceInfo(mDNS *m , DNSQuestion *question , ResourceRecord const   *answer ,
                             mDNSBool AddRecord ) 
{ ServiceInfoQuery *query ;

  {
  query = (ServiceInfoQuery *)question->QuestionContext;
  if (! AddRecord) {
    return;
  }
  if ((int )answer->rrtype == 1) {
    (query->info)->ip.type = 4;
    (query->info)->ip.ip.v4 = (answer->rdata)->u.ip;
  } else {
    if ((int )answer->rrtype == 28) {
      (query->info)->ip.type = 6;
      (query->info)->ip.ip.v6 = (answer->rdata)->u.ipv6;
    } else {
      return;
    }
  }
  query->GotADD = (unsigned char)1;
  (query->info)->InterfaceID = answer->InterfaceID;
  if (query->ServiceInfoQueryCallback) {
    if (query->GotTXT) {
      query->Answers ++;
      if (query->Answers >= 100U) {
        if ((int )answer->rrtype == 1) {

        }
      }
      ((*(query->ServiceInfoQueryCallback)))(m, query);
    } else {
      goto _L;
    }
  } else {
    _L: /* CIL Label */ ;
  }
  return;
}
}
mStatus mDNS_StartResolveService(mDNS *m , ServiceInfoQuery *query , ServiceInfo *info ,
                                 mDNSServiceInfoQueryCallback *Callback , void *Context ) 
{ mStatus status ;
  mDNSu32 tmp ;
  mDNSu32 tmp___0 ;

  {
  mDNS_Lock(m);
  query->qSRV.ThisQInterval = -1;
  query->qSRV.InterfaceID = info->InterfaceID;
  tmp = (mDNSu32 )DomainNameLength((domainname const   *)(& info->name));
  mDNSPlatformMemCopy((void const   *)(info->name.c), (void *)(query->qSRV.qname.c),
                      tmp);
  query->qSRV.qtype = (unsigned short)33;
  query->qSRV.qclass = (unsigned short)1;
  query->qSRV.QuestionCallback = & FoundServiceInfoSRV;
  query->qSRV.QuestionContext = (void *)query;
  query->qTXT.ThisQInterval = -1;
  query->qTXT.InterfaceID = info->InterfaceID;
  tmp___0 = (mDNSu32 )DomainNameLength((domainname const   *)(& info->name));
  mDNSPlatformMemCopy((void const   *)(info->name.c), (void *)(query->qTXT.qname.c),
                      tmp___0);
  query->qTXT.qtype = (unsigned short)16;
  query->qTXT.qclass = (unsigned short)1;
  query->qTXT.QuestionCallback = & FoundServiceInfoTXT;
  query->qTXT.QuestionContext = (void *)query;
  query->qAv4.ThisQInterval = -1;
  query->qAv4.InterfaceID = info->InterfaceID;
  query->qAv4.qname.c[0] = (unsigned char)0;
  query->qAv4.qtype = (unsigned short)1;
  query->qAv4.qclass = (unsigned short)1;
  query->qAv4.QuestionCallback = & FoundServiceInfo;
  query->qAv4.QuestionContext = (void *)query;
  query->qAv6.ThisQInterval = -1;
  query->qAv6.InterfaceID = info->InterfaceID;
  query->qAv6.qname.c[0] = (unsigned char)0;
  query->qAv6.qtype = (unsigned short)28;
  query->qAv6.qclass = (unsigned short)1;
  query->qAv6.QuestionCallback = & FoundServiceInfo;
  query->qAv6.QuestionContext = (void *)query;
  query->GotSRV = (unsigned char)0;
  query->GotTXT = (unsigned char)0;
  query->GotADD = (unsigned char)0;
  query->Answers = 0U;
  query->info = info;
  query->ServiceInfoQueryCallback = Callback;
  query->ServiceInfoQueryContext = Context;
  info->ip = zeroAddr;
  info->port = zeroIPPort;
  info->TXTlen = (unsigned short)0;
  status = mDNS_StartQuery_internal(m, & query->qSRV);
  if (status == 0) {
    status = mDNS_StartQuery_internal(m, & query->qTXT);
  }
  if (status != 0) {
    mDNS_StopResolveService(m, query);
  }
  mDNS_Unlock(m);
  return (status);
}
}
void mDNS_StopResolveService(mDNS *m , ServiceInfoQuery *query ) 
{ 

  {
  mDNS_Lock(m);
  if (query->qSRV.ThisQInterval >= 0) {
    mDNS_StopQuery_internal(m, & query->qSRV);
  }
  if (query->qTXT.ThisQInterval >= 0) {
    mDNS_StopQuery_internal(m, & query->qTXT);
  }
  if (query->qAv4.ThisQInterval >= 0) {
    mDNS_StopQuery_internal(m, & query->qAv4);
  }
  if (query->qAv6.ThisQInterval >= 0) {
    mDNS_StopQuery_internal(m, & query->qAv6);
  }
  mDNS_Unlock(m);
  return;
}
}
mStatus mDNS_GetDomains(mDNS *m , DNSQuestion *question , mDNS_DomainType DomainType ,
                        mDNSInterfaceID InterfaceID , mDNSQuestionCallback *Callback ,
                        void *Context ) 
{ 

  {
  MakeDomainNameFromDNSNameString(& question->qname, (char const   *)mDNS_DomainTypeNames[DomainType]);
  question->InterfaceID = InterfaceID;
  question->qtype = (unsigned short)12;
  question->qclass = (unsigned short)1;
  question->QuestionCallback = Callback;
  question->QuestionContext = Context;
  return (0);
}
}
void mDNS_SetupResourceRecord(AuthRecord *rr , RData *RDataStorage , mDNSInterfaceID InterfaceID ,
                              mDNSu16 rrtype , mDNSu32 ttl , mDNSu8 RecordType , mDNSRecordCallback *Callback ,
                              void *Context ) 
{ 

  {
  if ((unsigned long )ttl > 2147483647UL / (unsigned long )mDNSPlatformOneSecond) {
    ttl = (unsigned int )(2147483647UL / (unsigned long )mDNSPlatformOneSecond);
  } else {
    if (ttl == 0U) {
      ttl = 7200U;
    }
  }
  rr->Additional1 = (AuthRecord *)0L;
  rr->Additional2 = (AuthRecord *)0L;
  rr->DependentOn = (AuthRecord *)0L;
  rr->RRSet = (AuthRecord *)0L;
  rr->RecordCallback = Callback;
  rr->RecordContext = Context;
  rr->resrec.RecordType = RecordType;
  rr->HostTarget = (unsigned char)0;
  rr->resrec.InterfaceID = InterfaceID;
  rr->resrec.name.c[0] = (unsigned char)0;
  rr->resrec.rrtype = rrtype;
  rr->resrec.rrclass = (unsigned short)1;
  rr->resrec.rroriginalttl = ttl;
  if (RDataStorage) {
    rr->resrec.rdata = RDataStorage;
  } else {
    rr->resrec.rdata = & rr->rdatastorage;
    (rr->resrec.rdata)->MaxRDLength = (unsigned short )sizeof(RDataBody );
  }
  return;
}
}
mStatus mDNS_Register(mDNS *m , AuthRecord *rr ) 
{ mStatus status ;

  {
  mDNS_Lock(m);
  status = mDNS_Register_internal(m, rr);
  mDNS_Unlock(m);
  return (status);
}
}
mStatus mDNS_Update(mDNS *m , AuthRecord *rr , mDNSu32 newttl , mDNSu16 newrdlength ,
                    RData *newrdata , mDNSRecordUpdateCallback *Callback ) 
{ char *tmp ;
  mDNSBool tmp___0 ;
  RData *n ;
  mDNSs32 delay ;

  {
  tmp___0 = ValidateRData(rr->resrec.rrtype, newrdlength, (RData const   *)newrdata);
  if (! tmp___0) {
    tmp = GetRRDisplayString_rdb(m, (ResourceRecord const   *)(& rr->resrec), & newrdata->u);
    LogMsg("Attempt to update record with invalid rdata: %s", tmp);
    return (-65549);
  }
  mDNS_Lock(m);
  if (newttl == 0U) {
    newttl = rr->resrec.rroriginalttl;
  }
  if (rr->NewRData) {
    n = rr->NewRData;
    rr->NewRData = (RData *)0L;
    if (rr->UpdateCallback) {
      ((*(rr->UpdateCallback)))(m, rr, n);
    }
  }
  if ((int )rr->AnnounceCount < 9) {
    rr->AnnounceCount = (unsigned char)9;
  }
  if ((int )rr->resrec.RecordType & 12) {
    rr->ThisAPInterval = mDNSPlatformOneSecond / 2;
  } else {
    if ((int )rr->resrec.RecordType & 2) {
      rr->ThisAPInterval = mDNSPlatformOneSecond / 4;
    } else {
      if ((int )rr->resrec.RecordType & 48) {
        rr->ThisAPInterval = mDNSPlatformOneSecond / 2;
      } else {
        rr->ThisAPInterval = 0;
      }
    }
  }
  InitializeLastAPTime(m, rr);
  rr->NewRData = newrdata;
  rr->newrdlength = newrdlength;
  rr->UpdateCallback = Callback;
  if (! rr->UpdateBlocked) {
    if (rr->UpdateCredits) {
      rr->UpdateCredits --;
    } else {
      goto _L;
    }
  } else {
    _L: /* CIL Label */ ;
  }
  if (! rr->NextUpdateCredit) {
    rr->NextUpdateCredit = (m->timenow + mDNSPlatformOneSecond * 60) | 1;
  }
  if ((mDNSu32 )rr->AnnounceCount > rr->UpdateCredits + 1U) {
    rr->AnnounceCount = (unsigned char )(rr->UpdateCredits + 1U);
  }
  if (rr->UpdateCredits <= 5U) {
    delay = 1 << (5U - rr->UpdateCredits);
    if (! rr->UpdateBlocked) {
      rr->UpdateBlocked = (m->timenow + delay * mDNSPlatformOneSecond) | 1;
    }
    rr->LastAPTime = rr->UpdateBlocked;
    rr->ThisAPInterval *= 4;
    LogMsg("Excessive update rate for %##s; delaying announcement by %d seconds",
           rr->resrec.name.c, delay);
  }
  rr->resrec.rroriginalttl = newttl;
  mDNS_Unlock(m);
  return (0);
}
}
mStatus mDNS_Deregister(mDNS *m , AuthRecord *rr ) 
{ mStatus status ;

  {
  mDNS_Lock(m);
  status = mDNS_Deregister_internal(m, rr, 0);
  mDNS_Unlock(m);
  return (status);
}
}
static void HostNameCallback(mDNS *m , AuthRecord *rr , mStatus result ) ;
static NetworkInterfaceInfo *FindFirstAdvertisedInterface(mDNS *m ) 
{ NetworkInterfaceInfo *intf ;

  {
  intf = m->HostInterfaces;
  while (intf) {
    if (intf->Advertise) {
      break;
    }
    intf = intf->next;
  }
  return (intf);
}
}
static void mDNS_AdvertiseInterface(mDNS *m , NetworkInterfaceInfo *set ) ;
static char const   hexValues[17]  = 
  {      (char const   )'0',      (char const   )'1',      (char const   )'2',      (char const   )'3', 
        (char const   )'4',      (char const   )'5',      (char const   )'6',      (char const   )'7', 
        (char const   )'8',      (char const   )'9',      (char const   )'A',      (char const   )'B', 
        (char const   )'C',      (char const   )'D',      (char const   )'E',      (char const   )'F', 
        (char const   )'\000'};
static void mDNS_AdvertiseInterface(mDNS *m , NetworkInterfaceInfo *set ) 
{ char buffer___0[256] ;
  NetworkInterfaceInfo *primary ;
  NetworkInterfaceInfo *tmp ;
  mDNSu32 tmp___0 ;
  int i ;
  mDNSu8 *p ;
  mDNSu32 tmp___1 ;

  {
  tmp = FindFirstAdvertisedInterface(m);
  primary = tmp;
  if (! primary) {
    primary = set;
  }
  mDNS_SetupResourceRecord(& set->RR_A, (RData *)0L, set->InterfaceID, (unsigned short)1,
                           240U, (unsigned char)2, & HostNameCallback, (void *)set);
  mDNS_SetupResourceRecord(& set->RR_PTR, (RData *)0L, set->InterfaceID, (unsigned short)12,
                           240U, (unsigned char)32, (mDNSRecordCallback *)0L, (void *)0L);
  mDNS_SetupResourceRecord(& set->RR_HINFO, (RData *)0L, set->InterfaceID, (unsigned short)13,
                           240U, (unsigned char)2, (mDNSRecordCallback *)0L, (void *)0L);
  tmp___0 = (mDNSu32 )DomainNameLength((domainname const   *)(& m->hostname));
  mDNSPlatformMemCopy((void const   *)(m->hostname.c), (void *)(set->RR_A.resrec.name.c),
                      tmp___0);
  if (set->ip.type == 4) {
    set->RR_A.resrec.rrtype = (unsigned short)1;
    (set->RR_A.resrec.rdata)->u.ip = set->ip.ip.v4;
    mDNS_snprintf(buffer___0, sizeof(buffer___0), "%d.%d.%d.%d.in-addr.arpa.", set->ip.ip.v4.b[3],
                  set->ip.ip.v4.b[2], set->ip.ip.v4.b[1], set->ip.ip.v4.b[0]);
  } else {
    if (set->ip.type == 6) {
      set->RR_A.resrec.rrtype = (unsigned short)28;
      (set->RR_A.resrec.rdata)->u.ipv6 = set->ip.ip.v6;
      i = 0;
      while (i < 16) {
        buffer___0[i * 4] = (char )hexValues[(int )set->ip.ip.v6.b[15 - i] & 15];
        buffer___0[i * 4 + 1] = (char )'.';
        buffer___0[i * 4 + 2] = (char )hexValues[(int )set->ip.ip.v6.b[15 - i] >>
                                                 4];
        buffer___0[i * 4 + 3] = (char )'.';
        i ++;
      }
      mDNS_snprintf(& buffer___0[64], sizeof(buffer___0) - 64U, "ip6.arpa.");
    }
  }
  MakeDomainNameFromDNSNameString(& set->RR_PTR.resrec.name, (char const   *)(buffer___0));
  set->RR_PTR.HostTarget = (unsigned char)1;
  set->RR_A.RRSet = & primary->RR_A;
  mDNS_Register_internal(m, & set->RR_A);
  mDNS_Register_internal(m, & set->RR_PTR);
  if ((int )m->HIHardware.c[0] > 0) {
    if ((int )m->HISoftware.c[0] > 0) {
      if ((int )m->HIHardware.c[0] + (int )m->HISoftware.c[0] <= 254) {
        p = (set->RR_HINFO.resrec.rdata)->u.data;
        tmp___1 = (mDNSu32 )DomainNameLength((domainname const   *)(& m->hostname));
        mDNSPlatformMemCopy((void const   *)(m->hostname.c), (void *)(set->RR_HINFO.resrec.name.c),
                            tmp___1);
        set->RR_HINFO.DependentOn = & set->RR_A;
        mDNSPlatformMemCopy((void const   *)(& m->HIHardware), (void *)p, 1U + (unsigned int )m->HIHardware.c[0]);
        p += 1 + (int )(*(p + 0));
        mDNSPlatformMemCopy((void const   *)(& m->HISoftware), (void *)p, 1U + (unsigned int )m->HISoftware.c[0]);
        mDNS_Register_internal(m, & set->RR_HINFO);
      } else {
        goto _L___0;
      }
    } else {
      goto _L___0;
    }
  } else {
    _L___0: /* CIL Label */ 
    set->RR_HINFO.resrec.RecordType = (unsigned char)0;
  }
  return;
}
}
static void mDNS_DeadvertiseInterface(mDNS *m , NetworkInterfaceInfo *set ) 
{ NetworkInterfaceInfo *intf ;
  NetworkInterfaceInfo *primary ;
  NetworkInterfaceInfo *tmp ;
  AuthRecord *A ;
  AuthRecord *tmp___0 ;

  {
  tmp = FindFirstAdvertisedInterface(m);
  primary = tmp;
  if (primary) {
    tmp___0 = & primary->RR_A;
  } else {
    tmp___0 = (AuthRecord *)0L;
  }
  A = tmp___0;
  intf = m->HostInterfaces;
  while (intf) {
    if ((unsigned int )intf->RR_A.RRSet == (unsigned int )(& set->RR_A)) {
      intf->RR_A.RRSet = A;
    }
    intf = intf->next;
  }
  if (set->RR_A.resrec.RecordType) {
    mDNS_Deregister_internal(m, & set->RR_A, 0);
  }
  if (set->RR_PTR.resrec.RecordType) {
    mDNS_Deregister_internal(m, & set->RR_PTR, 0);
  }
  if (set->RR_HINFO.resrec.RecordType) {
    mDNS_Deregister_internal(m, & set->RR_HINFO, 0);
  }
  return;
}
}
void mDNS_GenerateFQDN(mDNS *m ) 
{ domainname newname ;
  mDNSu8 *tmp ;
  mDNSu8 *tmp___0 ;
  NetworkInterfaceInfo *intf ;
  AuthRecord *rr ;
  mDNSBool tmp___1 ;

  {
  mDNS_Lock(m);
  newname.c[0] = (unsigned char)0;
  tmp = AppendDomainLabel(& newname, (domainlabel const   *)(& m->hostlabel));
  if (! tmp) {
    LogMsg("ERROR! Cannot create dot-local hostname");
  }
  tmp___0 = AppendLiteralLabelString(& newname, "local");
  if (! tmp___0) {
    LogMsg("ERROR! Cannot create dot-local hostname");
  }
  tmp___1 = SameDomainName((domainname const   *)(& m->hostname), (domainname const   *)(& newname));
  if (! tmp___1) {
    m->hostname = newname;
    intf = m->HostInterfaces;
    while (intf) {
      if (intf->Advertise) {
        mDNS_DeadvertiseInterface(m, intf);
      }
      intf = intf->next;
    }
    intf = m->HostInterfaces;
    while (intf) {
      if (intf->Advertise) {
        mDNS_AdvertiseInterface(m, intf);
      }
      intf = intf->next;
    }
    rr = m->ResourceRecords;
    while (rr) {
      if (rr->HostTarget) {
        SetTargetToHostName(m, rr);
      }
      rr = rr->next;
    }
    rr = m->DuplicateRecords;
    while (rr) {
      if (rr->HostTarget) {
        SetTargetToHostName(m, rr);
      }
      rr = rr->next;
    }
  }
  mDNS_Unlock(m);
  return;
}
}
static void HostNameCallback(mDNS *m , AuthRecord *rr , mStatus result ) 
{ domainlabel oldlabel ;
  mDNSBool tmp ;

  {
  if (result == 0) {
    if (m->MainCallback) {
      ((*(m->MainCallback)))(m, result);
    }
  } else {
    if (result == -65548) {
      oldlabel = m->hostlabel;
      if (m->MainCallback) {
        ((*(m->MainCallback)))(m, -65548);
      }
      tmp = SameDomainLabel((mDNSu8 const   *)(m->hostlabel.c), (mDNSu8 const   *)(oldlabel.c));
      if (tmp) {
        IncrementLabelSuffix(& m->hostlabel, 0);
      }
      mDNS_GenerateFQDN(m);
    }
  }
  return;
}
}
static void UpdateInterfaceProtocols(mDNS *m , NetworkInterfaceInfo *active ) 
{ NetworkInterfaceInfo *intf ;

  {
  active->IPv4Available = 0;
  active->IPv6Available = 0;
  intf = m->HostInterfaces;
  while (intf) {
    if ((unsigned int )intf->InterfaceID == (unsigned int )active->InterfaceID) {
      if (intf->ip.type == 4) {
        if (intf->TxAndRx) {
          active->IPv4Available = 1;
        } else {
          goto _L;
        }
      } else {
        _L: /* CIL Label */ ;
      }
      if (intf->ip.type == 6) {
        if (intf->TxAndRx) {
          active->IPv6Available = 1;
        } else {
          goto _L___0;
        }
      } else {
        _L___0: /* CIL Label */ ;
      }
    }
    intf = intf->next;
  }
  return;
}
}
mStatus mDNS_RegisterInterface(mDNS *m , NetworkInterfaceInfo *set ) 
{ mDNSBool FirstOfType ;
  NetworkInterfaceInfo **p ;
  int tmp ;
  int tmp___0 ;
  DNSQuestion *q ;
  AuthRecord *rr ;
  mDNSu32 tmp___1 ;

  {
  FirstOfType = (mDNSBool )1;
  p = & m->HostInterfaces;
  mDNS_Lock(m);
  set->InterfaceActive = 1;
  if (set->ip.type == 4) {
    if (set->TxAndRx) {
      tmp = 1;
    } else {
      goto _L;
    }
  } else {
    _L: /* CIL Label */ 
    tmp = 0;
  }
  set->IPv4Available = tmp;
  if (set->ip.type == 6) {
    if (set->TxAndRx) {
      tmp___0 = 1;
    } else {
      goto _L___0;
    }
  } else {
    _L___0: /* CIL Label */ 
    tmp___0 = 0;
  }
  set->IPv6Available = tmp___0;
  while ((*p)) {
    if ((unsigned int )(*p) == (unsigned int )set) {
      LogMsg("Error! Tried to register a NetworkInterfaceInfo that\'s already in the list");
      mDNS_Unlock(m);
      return (-65547);
    }
    if ((unsigned int )((*p))->InterfaceID == (unsigned int )set->InterfaceID) {
      set->InterfaceActive = 0;
      if (set->ip.type == ((*p))->ip.type) {
        FirstOfType = 0;
      }
      if (set->ip.type == 4) {
        if (set->TxAndRx) {
          ((*p))->IPv4Available = 1;
        } else {
          goto _L___1;
        }
      } else {
        _L___1: /* CIL Label */ ;
      }
      if (set->ip.type == 6) {
        if (set->TxAndRx) {
          ((*p))->IPv6Available = 1;
        } else {
          goto _L___2;
        }
      } else {
        _L___2: /* CIL Label */ ;
      }
    }
    p = & ((*p))->next;
  }
  set->next = (NetworkInterfaceInfo *)0L;
  (*p) = set;
  if (m->KnownBugs & 1U) {
    goto _L___8;
  } else {
    if (FirstOfType) {
      _L___8: /* CIL Label */ 
      goto _L___7;
    } else {
      if (set->InterfaceActive) {
        _L___7: /* CIL Label */ 
        if (! m->SuppressSending) {
          tmp___1 = mDNSRandom((unsigned int )(mDNSPlatformOneSecond / 2));
          m->SuppressSending = m->timenow + (int )tmp___1;
        }
        q = m->Questions;
        while (q) {
          if (! q->InterfaceID) {
            goto _L___4;
          } else {
            if ((unsigned int )q->InterfaceID == (unsigned int )set->InterfaceID) {
              _L___4: /* CIL Label */ 
              q->ThisQInterval = mDNSPlatformOneSecond / 2;
              q->LastQTime = m->timenow - q->ThisQInterval;
              q->RecentAnswers = 0U;
              if (q->ThisQInterval > 0) {
                if (! q->DuplicateOf) {
                  m->NextScheduledQuery = m->timenow;
                } else {
                  goto _L___3;
                }
              } else {
                _L___3: /* CIL Label */ ;
              }
            }
          }
          q = q->next;
        }
        rr = m->ResourceRecords;
        while (rr) {
          if (! rr->resrec.InterfaceID) {
            goto _L___6;
          } else {
            if ((unsigned int )rr->resrec.InterfaceID == (unsigned int )set->InterfaceID) {
              _L___6: /* CIL Label */ 
              if ((int )rr->resrec.RecordType == 16) {
                if (! rr->DependentOn) {
                  rr->resrec.RecordType = (unsigned char)2;
                } else {
                  goto _L___5;
                }
              } else {
                _L___5: /* CIL Label */ ;
              }
              if ((int )rr->resrec.RecordType == 2) {
                rr->ProbeCount = (unsigned char)3;
              } else {
                rr->ProbeCount = (unsigned char)0;
              }
              if ((int )rr->AnnounceCount < 9) {
                rr->AnnounceCount = (unsigned char)9;
              }
              if ((int )rr->resrec.RecordType & 12) {
                rr->ThisAPInterval = mDNSPlatformOneSecond / 2;
              } else {
                if ((int )rr->resrec.RecordType & 2) {
                  rr->ThisAPInterval = mDNSPlatformOneSecond / 4;
                } else {
                  if ((int )rr->resrec.RecordType & 48) {
                    rr->ThisAPInterval = mDNSPlatformOneSecond / 2;
                  } else {
                    rr->ThisAPInterval = 0;
                  }
                }
              }
              InitializeLastAPTime(m, rr);
            }
          }
          rr = rr->next;
        }
      }
    }
  }
  if (set->Advertise) {
    mDNS_AdvertiseInterface(m, set);
  }
  mDNS_Unlock(m);
  return (0);
}
}
void mDNS_DeregisterInterface(mDNS *m , NetworkInterfaceInfo *set ) 
{ NetworkInterfaceInfo **p ;
  mDNSBool revalidate ;
  NetworkInterfaceInfo *intf ;
  NetworkInterfaceInfo *intf___0 ;
  CacheRecord *rr ;
  DNSQuestion *q ;
  mDNSu32 slot ;
  mDNSu32 slot___0 ;
  CacheRecord *rr___0 ;

  {
  p = & m->HostInterfaces;
  revalidate = (mDNSBool )0;
  if (m->KnownBugs & 1U) {
    revalidate = 1;
  }
  mDNS_Lock(m);
  while (1) {
    if ((*p)) {
      if (! ((unsigned int )(*p) != (unsigned int )set)) {
        goto _L;
      }
    } else {
      _L: /* CIL Label */ 
      break;
    }
    p = & ((*p))->next;
  }
  if (! (*p)) {
    mDNS_Unlock(m);
    return;
  }
  (*p) = ((*p))->next;
  set->next = (NetworkInterfaceInfo *)0L;
  if (! set->InterfaceActive) {
    intf = m->HostInterfaces;
    while (intf) {
      if (intf->InterfaceActive) {
        if ((unsigned int )intf->InterfaceID == (unsigned int )set->InterfaceID) {
          UpdateInterfaceProtocols(m, intf);
        } else {
          goto _L___0;
        }
      } else {
        _L___0: /* CIL Label */ ;
      }
      intf = intf->next;
    }
  } else {
    intf___0 = m->HostInterfaces;
    while (intf___0) {
      if ((unsigned int )intf___0->InterfaceID == (unsigned int )set->InterfaceID) {
        break;
      }
      intf___0 = intf___0->next;
    }
    if (intf___0) {
      intf___0->InterfaceActive = 1;
      UpdateInterfaceProtocols(m, intf___0);
      intf___0 = m->HostInterfaces;
      while (intf___0) {
        if ((unsigned int )intf___0->InterfaceID == (unsigned int )set->InterfaceID) {
          if (intf___0->ip.type == set->ip.type) {
            break;
          } else {
            goto _L___1;
          }
        } else {
          _L___1: /* CIL Label */ ;
        }
        intf___0 = intf___0->next;
      }
      if (! intf___0) {
        revalidate = 1;
      }
    } else {
      q = m->Questions;
      while (q) {
        if ((unsigned int )q->InterfaceID == (unsigned int )set->InterfaceID) {
          q->ThisQInterval = 0;
        }
        q = q->next;
      }
      revalidate = 0;
      slot = 0U;
      while (slot < 499U) {
        rr = m->rrcache_hash[slot];
        while (rr) {
          if ((unsigned int )rr->resrec.InterfaceID == (unsigned int )set->InterfaceID) {
            PurgeCacheResourceRecord(m, rr);
          }
          rr = rr->next;
        }
        slot ++;
      }
    }
  }
  if (set->Advertise) {
    mDNS_DeadvertiseInterface(m, set);
  }
  if (revalidate) {
    if (! m->mDNS_shutdown) {
      m->NextCacheCheck = m->timenow;
      slot___0 = 0U;
      while (slot___0 < 499U) {
        rr___0 = m->rrcache_hash[slot___0];
        while (rr___0) {
          if ((unsigned int )rr___0->resrec.InterfaceID == (unsigned int )set->InterfaceID) {
            mDNS_Reconfirm_internal(m, rr___0, (unsigned int )mDNSPlatformOneSecond *
                                               5U);
          }
          rr___0 = rr___0->next;
        }
        slot___0 ++;
      }
    } else {
      goto _L___2;
    }
  } else {
    _L___2: /* CIL Label */ ;
  }
  mDNS_Unlock(m);
  return;
}
}
static void ServiceCallback(mDNS *m , AuthRecord *rr , mStatus result ) 
{ ServiceRecordSet *sr ;
  mDNSu32 i ;

  {
  sr = (ServiceRecordSet *)rr->RecordContext;
  if (result == -65548) {
    sr->Conflict = 1;
    sr->RR_PTR.AnnounceCount = (unsigned char)10;
    mDNS_DeregisterService(m, sr);
    return;
  }
  if (result == -65792) {
    if ((int )sr->RR_PTR.resrec.RecordType != 0) {
      return;
    }
    i = 0U;
    while (i < sr->NumSubTypes) {
      if ((int )(sr->SubTypes + i)->resrec.RecordType != 0) {
        return;
      }
      i ++;
    }
    if (sr->Conflict) {
      result = -65548;
    }
  }
  if (sr->ServiceCallback) {
    ((*(sr->ServiceCallback)))(m, sr, result);
  }
  return;
}
}
mStatus mDNS_RegisterService(mDNS *m , ServiceRecordSet *sr , domainlabel const   *name ,
                             domainname const   *type , domainname const   *domain ,
                             domainname const   *host , mDNSIPPort port , mDNSu8 const   *txtinfo ,
                             mDNSu16 txtlen , AuthRecord *SubTypes , mDNSu32 NumSubTypes ,
                             mDNSInterfaceID InterfaceID , mDNSServiceCallback *Callback ,
                             void *Context ) 
{ mStatus err ;
  mDNSu32 i ;
  mDNSu8 *tmp ;
  mDNSu8 *tmp___0 ;
  mDNSu8 *tmp___1 ;
  mDNSu32 tmp___2 ;
  mDNSu32 tmp___3 ;
  mDNSu32 tmp___4 ;
  domainlabel s ;
  mDNSu8 *tmp___5 ;
  mDNSu32 tmp___6 ;
  mDNSu32 tmp___7 ;

  {
  sr->ServiceCallback = Callback;
  sr->ServiceContext = Context;
  sr->Extras = (ExtraResourceRecord *)0L;
  sr->NumSubTypes = NumSubTypes;
  sr->SubTypes = SubTypes;
  sr->Conflict = 0;
  if (host) {
    if (host->c[0]) {
      sr->Host = (*host);
    } else {
      goto _L;
    }
  } else {
    _L: /* CIL Label */ 
    sr->Host.c[0] = (unsigned char)0;
  }
  mDNS_SetupResourceRecord(& sr->RR_ADV, (RData *)0L, InterfaceID, (unsigned short)12,
                           7200U, (unsigned char)4, & ServiceCallback, (void *)sr);
  mDNS_SetupResourceRecord(& sr->RR_PTR, (RData *)0L, InterfaceID, (unsigned short)12,
                           7200U, (unsigned char)8, & ServiceCallback, (void *)sr);
  mDNS_SetupResourceRecord(& sr->RR_SRV, (RData *)0L, InterfaceID, (unsigned short)33,
                           240U, (unsigned char)2, & ServiceCallback, (void *)sr);
  mDNS_SetupResourceRecord(& sr->RR_TXT, (RData *)0L, InterfaceID, (unsigned short)16,
                           240U, (unsigned char)2, & ServiceCallback, (void *)sr);
  if ((int )(sr->RR_TXT.resrec.rdata)->MaxRDLength < (int )txtlen) {
    (sr->RR_TXT.resrec.rdata)->MaxRDLength = txtlen;
  }
  tmp = ConstructServiceName(& sr->RR_ADV.resrec.name, (domainlabel const   *)((domainlabel *)"\t_services"),
                             (domainname const   *)((domainname *)"\a_dns-sd\004_udp"),
                             domain);
  if ((unsigned int )tmp == (unsigned int )((mDNSu8 *)0)) {
    return (-65540);
  }
  tmp___0 = ConstructServiceName(& sr->RR_PTR.resrec.name, (domainlabel const   *)0L,
                                 type, domain);
  if ((unsigned int )tmp___0 == (unsigned int )((mDNSu8 *)0)) {
    return (-65540);
  }
  tmp___1 = ConstructServiceName(& sr->RR_SRV.resrec.name, name, type, domain);
  if ((unsigned int )tmp___1 == (unsigned int )((mDNSu8 *)0)) {
    return (-65540);
  }
  tmp___2 = (mDNSu32 )DomainNameLength((domainname const   *)(& sr->RR_SRV.resrec.name));
  mDNSPlatformMemCopy((void const   *)(sr->RR_SRV.resrec.name.c), (void *)(sr->RR_TXT.resrec.name.c),
                      tmp___2);
  tmp___3 = (mDNSu32 )DomainNameLength((domainname const   *)(& sr->RR_PTR.resrec.name));
  mDNSPlatformMemCopy((void const   *)(sr->RR_PTR.resrec.name.c), (void *)((sr->RR_ADV.resrec.rdata)->u.name.c),
                      tmp___3);
  tmp___4 = (mDNSu32 )DomainNameLength((domainname const   *)(& sr->RR_SRV.resrec.name));
  mDNSPlatformMemCopy((void const   *)(sr->RR_SRV.resrec.name.c), (void *)((sr->RR_PTR.resrec.rdata)->u.name.c),
                      tmp___4);
  sr->RR_PTR.Additional1 = & sr->RR_SRV;
  sr->RR_PTR.Additional2 = & sr->RR_TXT;
  i = 0U;
  while (i < NumSubTypes) {
    s = (*((domainlabel *)(& (sr->SubTypes + i)->resrec.name)));
    mDNS_SetupResourceRecord(sr->SubTypes + i, (RData *)0L, InterfaceID, (unsigned short)12,
                             7200U, (unsigned char)8, & ServiceCallback, (void *)sr);
    tmp___5 = ConstructServiceName(& (sr->SubTypes + i)->resrec.name, (domainlabel const   *)(& s),
                                   type, domain);
    if ((unsigned int )tmp___5 == (unsigned int )((mDNSu8 *)0)) {
      return (-65540);
    }
    tmp___6 = (mDNSu32 )DomainNameLength((domainname const   *)(& sr->RR_SRV.resrec.name));
    mDNSPlatformMemCopy((void const   *)(sr->RR_SRV.resrec.name.c), (void *)(((sr->SubTypes +
                                                                               i)->resrec.rdata)->u.name.c),
                        tmp___6);
    (sr->SubTypes + i)->Additional1 = & sr->RR_SRV;
    (sr->SubTypes + i)->Additional2 = & sr->RR_TXT;
    i ++;
  }
  (sr->RR_SRV.resrec.rdata)->u.srv.priority = (unsigned short)0;
  (sr->RR_SRV.resrec.rdata)->u.srv.weight = (unsigned short)0;
  (sr->RR_SRV.resrec.rdata)->u.srv.port = port;
  if (sr->Host.c[0]) {
    tmp___7 = (mDNSu32 )DomainNameLength((domainname const   *)(& sr->Host));
    mDNSPlatformMemCopy((void const   *)(sr->Host.c), (void *)((sr->RR_SRV.resrec.rdata)->u.srv.target.c),
                        tmp___7);
  } else {
    sr->RR_SRV.HostTarget = (unsigned char)1;
  }
  if ((unsigned int )txtinfo == (unsigned int )((mDNSu8 const   *)0)) {
    sr->RR_TXT.resrec.rdlength = (unsigned short)0;
  } else {
    if ((unsigned int )txtinfo != (unsigned int )((sr->RR_TXT.resrec.rdata)->u.txt.c)) {
      sr->RR_TXT.resrec.rdlength = txtlen;
      if ((int )sr->RR_TXT.resrec.rdlength > (int )(sr->RR_TXT.resrec.rdata)->MaxRDLength) {
        return (-65540);
      }
      mDNSPlatformMemCopy((void const   *)txtinfo, (void *)((sr->RR_TXT.resrec.rdata)->u.txt.c),
                          (unsigned int )txtlen);
    }
  }
  sr->RR_TXT.DependentOn = & sr->RR_SRV;
  mDNS_Lock(m);
  err = mDNS_Register_internal(m, & sr->RR_SRV);
  if (! err) {
    err = mDNS_Register_internal(m, & sr->RR_TXT);
  }
  if (! err) {
    err = mDNS_Register_internal(m, & sr->RR_ADV);
  }
  i = 0U;
  while (i < NumSubTypes) {
    if (! err) {
      err = mDNS_Register_internal(m, sr->SubTypes + i);
    }
    i ++;
  }
  if (! err) {
    err = mDNS_Register_internal(m, & sr->RR_PTR);
  }
  mDNS_Unlock(m);
  if (err) {
    mDNS_DeregisterService(m, sr);
  }
  return (err);
}
}
mStatus mDNS_AddRecordToService(mDNS *m , ServiceRecordSet *sr , ExtraResourceRecord *extra ,
                                RData *rdata , mDNSu32 ttl ) 
{ mStatus result ;
  ExtraResourceRecord **e ;
  mDNSu32 tmp ;

  {
  result = (mStatus )-65537;
  e = & sr->Extras;
  while ((*e)) {
    e = & ((*e))->next;
  }
  if (ttl == 0U) {
    ttl = 240U;
  }
  extra->next = (ExtraResourceRecord *)0L;
  mDNS_SetupResourceRecord(& extra->r, rdata, sr->RR_PTR.resrec.InterfaceID, extra->r.resrec.rrtype,
                           ttl, (unsigned char)2, & ServiceCallback, (void *)sr);
  tmp = (mDNSu32 )DomainNameLength((domainname const   *)(& sr->RR_SRV.resrec.name));
  mDNSPlatformMemCopy((void const   *)(sr->RR_SRV.resrec.name.c), (void *)(extra->r.resrec.name.c),
                      tmp);
  extra->r.DependentOn = & sr->RR_SRV;
  result = mDNS_Register(m, & extra->r);
  if (! result) {
    (*e) = extra;
  }
  return (result);
}
}
mStatus mDNS_RemoveRecordFromService(mDNS *m , ServiceRecordSet *sr , ExtraResourceRecord *extra ) 
{ ExtraResourceRecord **e ;
  mStatus tmp ;

  {
  e = & sr->Extras;
  while (1) {
    if ((*e)) {
      if (! ((unsigned int )(*e) != (unsigned int )extra)) {
        goto _L;
      }
    } else {
      _L: /* CIL Label */ 
      break;
    }
    e = & ((*e))->next;
  }
  if (! (*e)) {
    return (-65541);
  }
  (*e) = ((*e))->next;
  tmp = mDNS_Deregister(m, & extra->r);
  return (tmp);
}
}
mStatus mDNS_RenameAndReregisterService(mDNS *m , ServiceRecordSet *sr , domainlabel const   *newname ) 
{ domainlabel name ;
  domainname type ;
  domainname domain ;
  domainname *host ;
  ExtraResourceRecord *extras ;
  mStatus err ;
  ExtraResourceRecord *e ;

  {
  host = (domainname *)0L;
  extras = sr->Extras;
  DeconstructServiceName((domainname const   *)(& sr->RR_SRV.resrec.name), & name,
                         & type, & domain);
  if (! newname) {
    IncrementLabelSuffix(& name, 1);
    newname = (domainlabel const   *)(& name);
  }
  if ((int )sr->RR_SRV.HostTarget == 0) {
    if (sr->Host.c[0]) {
      host = & sr->Host;
    } else {
      goto _L;
    }
  } else {
    _L: /* CIL Label */ ;
  }
  err = mDNS_RegisterService(m, sr, newname, (domainname const   *)(& type), (domainname const   *)(& domain),
                             (domainname const   *)host, (sr->RR_SRV.resrec.rdata)->u.srv.port,
                             (mDNSu8 const   *)((sr->RR_TXT.resrec.rdata)->u.txt.c),
                             sr->RR_TXT.resrec.rdlength, sr->SubTypes, sr->NumSubTypes,
                             sr->RR_PTR.resrec.InterfaceID, sr->ServiceCallback, sr->ServiceContext);
  while (1) {
    if (! err) {
      if (! extras) {
        goto _L___0;
      }
    } else {
      _L___0: /* CIL Label */ 
      break;
    }
    e = extras;
    extras = extras->next;
    err = mDNS_AddRecordToService(m, sr, e, e->r.resrec.rdata, e->r.resrec.rroriginalttl);
  }
  return (err);
}
}
mStatus mDNS_DeregisterService(mDNS *m , ServiceRecordSet *sr ) 
{ mDNSu32 i ;
  mStatus status ;
  ExtraResourceRecord *e ;

  {
  if ((int )sr->RR_PTR.resrec.RecordType == 0) {
    return (-65541);
  } else {
    if ((int )sr->RR_PTR.resrec.RecordType == 1) {
      return (0);
    } else {
      mDNS_Lock(m);
      e = sr->Extras;
      mDNS_Deregister_internal(m, & sr->RR_SRV, 2);
      mDNS_Deregister_internal(m, & sr->RR_TXT, 2);
      mDNS_Deregister_internal(m, & sr->RR_ADV, 0);
      while (e) {
        mDNS_Deregister_internal(m, & e->r, 2);
        e = e->next;
      }
      i = 0U;
      while (i < sr->NumSubTypes) {
        mDNS_Deregister_internal(m, sr->SubTypes + i, 0);
        i ++;
      }
      status = mDNS_Deregister_internal(m, & sr->RR_PTR, 0);
      mDNS_Unlock(m);
      return (status);
    }
  }
}
}
mStatus mDNS_RegisterNoSuchService(mDNS *m , AuthRecord *rr , domainlabel const   *name ,
                                   domainname const   *type , domainname const   *domain ,
                                   domainname const   *host , mDNSInterfaceID InterfaceID ,
                                   mDNSRecordCallback *Callback , void *Context ) 
{ mDNSu8 *tmp ;
  mDNSu32 tmp___0 ;
  mStatus tmp___1 ;

  {
  mDNS_SetupResourceRecord(rr, (RData *)0L, InterfaceID, (unsigned short)33, 240U,
                           (unsigned char)2, Callback, Context);
  tmp = ConstructServiceName(& rr->resrec.name, name, type, domain);
  if ((unsigned int )tmp == (unsigned int )((mDNSu8 *)0)) {
    return (-65540);
  }
  (rr->resrec.rdata)->u.srv.priority = (unsigned short)0;
  (rr->resrec.rdata)->u.srv.weight = (unsigned short)0;
  (rr->resrec.rdata)->u.srv.port = zeroIPPort;
  if (host) {
    if (host->c[0]) {
      tmp___0 = (mDNSu32 )DomainNameLength(host);
      mDNSPlatformMemCopy((void const   *)(host->c), (void *)((rr->resrec.rdata)->u.srv.target.c),
                          tmp___0);
    } else {
      goto _L;
    }
  } else {
    _L: /* CIL Label */ 
    rr->HostTarget = (unsigned char)1;
  }
  tmp___1 = mDNS_Register(m, rr);
  return (tmp___1);
}
}
mStatus mDNS_AdvertiseDomains(mDNS *m , AuthRecord *rr , mDNS_DomainType DomainType ,
                              mDNSInterfaceID InterfaceID , char *domname ) 
{ mDNSu8 *tmp ;
  mDNSu8 *tmp___0 ;
  mStatus tmp___1 ;

  {
  mDNS_SetupResourceRecord(rr, (RData *)0L, InterfaceID, (unsigned short)12, 7200U,
                           (unsigned char)8, (mDNSRecordCallback *)0L, (void *)0L);
  tmp = MakeDomainNameFromDNSNameString(& rr->resrec.name, (char const   *)mDNS_DomainTypeNames[DomainType]);
  if (! tmp) {
    return (-65540);
  }
  tmp___0 = MakeDomainNameFromDNSNameString(& (rr->resrec.rdata)->u.name, (char const   *)domname);
  if (! tmp___0) {
    return (-65540);
  }
  tmp___1 = mDNS_Register(m, rr);
  return (tmp___1);
}
}
void mDNS_GrowCache(mDNS *m , CacheRecord *storage , mDNSu32 numrecords ) 
{ mDNSu32 i ;

  {
  if (storage) {
    if (numrecords) {
      i = 0U;
      while (i < numrecords) {
        (storage + i)->next = storage + (i + 1U);
        i ++;
      }
      (storage + (numrecords - 1U))->next = m->rrcache_free;
      m->rrcache_free = storage;
      m->rrcache_size += numrecords;
    } else {
      goto _L;
    }
  } else {
    _L: /* CIL Label */ ;
  }
  return;
}
}
mStatus mDNS_Init(mDNS *m , mDNS_PlatformSupport *p , CacheRecord *rrcachestorage ,
                  mDNSu32 rrcachesize , mDNSBool AdvertiseLocalAddresses , mDNSCallback *Callback ,
                  void *Context ) 
{ mDNSu32 slot ;
  mDNSs32 timenow ;
  mStatus result ;
  mStatus tmp ;

  {
  tmp = mDNSPlatformTimeInit(& timenow);
  result = tmp;
  if (result != 0) {
    return (result);
  }
  if (! rrcachestorage) {
    rrcachesize = 0U;
  }
  m->p = p;
  m->KnownBugs = 0U;
  m->AdvertiseLocalAddresses = AdvertiseLocalAddresses;
  m->mDNSPlatformStatus = 1;
  m->MainCallback = Callback;
  m->MainContext = Context;
  m->mDNS_busy = 0U;
  m->mDNS_reentrancy = 0U;
  m->mDNS_shutdown = (unsigned char)0;
  m->lock_rrcache = (unsigned char)0;
  m->lock_Questions = (unsigned char)0;
  m->lock_Records = (unsigned char)0;
  m->timenow = 0;
  m->timenow_last = timenow;
  m->timenow_adjust = 0;
  m->NextScheduledEvent = timenow;
  m->SuppressSending = timenow;
  m->NextCacheCheck = timenow + 2013265920;
  m->NextScheduledQuery = timenow + 2013265920;
  m->NextScheduledProbe = timenow + 2013265920;
  m->NextScheduledResponse = timenow + 2013265920;
  m->ExpectUnicastResponse = timenow + 2013265920;
  m->RandomQueryDelay = 0;
  m->SendDeregistrations = 0;
  m->SendImmediateAnswers = 0;
  m->SleepState = 0;
  m->Questions = (DNSQuestion *)0L;
  m->NewQuestions = (DNSQuestion *)0L;
  m->CurrentQuestion = (DNSQuestion *)0L;
  m->LocalOnlyQuestions = (DNSQuestion *)0L;
  m->NewLocalOnlyQuestions = (DNSQuestion *)0L;
  m->rrcache_size = 0U;
  m->rrcache_totalused = 0U;
  m->rrcache_active = 0U;
  m->rrcache_report = 10U;
  m->rrcache_free = (CacheRecord *)0L;
  slot = 0U;
  while (slot < 499U) {
    m->rrcache_hash[slot] = (CacheRecord *)0L;
    m->rrcache_tail[slot] = & m->rrcache_hash[slot];
    m->rrcache_used[slot] = 0U;
    slot ++;
  }
  mDNS_GrowCache(m, rrcachestorage, rrcachesize);
  m->hostlabel.c[0] = (unsigned char)0;
  m->nicelabel.c[0] = (unsigned char)0;
  m->hostname.c[0] = (unsigned char)0;
  m->HIHardware.c[0] = (unsigned char)0;
  m->HISoftware.c[0] = (unsigned char)0;
  m->ResourceRecords = (AuthRecord *)0L;
  m->DuplicateRecords = (AuthRecord *)0L;
  m->LocalOnlyRecords = (AuthRecord *)0L;
  m->NewLocalOnlyRecords = (AuthRecord *)0L;
  m->DiscardLocalOnlyRecords = 0;
  m->CurrentRecord = (AuthRecord *)0L;
  m->HostInterfaces = (NetworkInterfaceInfo *)0L;
  m->ProbeFailTime = 0;
  m->NumFailedProbes = 0;
  m->SuppressProbes = 0;
  result = mDNSPlatformInit(m);
  return (result);
}
}
void mDNSCoreInitComplete(mDNS *m , mStatus result ) 
{ 

  {
  m->mDNSPlatformStatus = result;
  if (m->MainCallback) {
    ((*(m->MainCallback)))(m, 0);
  }
  return;
}
}
void mDNS_Close(mDNS *m ) 
{ mDNSu32 rrcache_active ;
  mDNSu32 rrcache_totalused ;
  mDNSu32 slot ;
  NetworkInterfaceInfo *intf ;
  CacheRecord *rr ;
  AuthRecord *rr___0 ;

  {
  rrcache_active = (mDNSu32 )0;
  rrcache_totalused = (mDNSu32 )0;
  mDNS_Lock(m);
  m->mDNS_shutdown = (unsigned char)1;
  rrcache_totalused = m->rrcache_totalused;
  slot = 0U;
  while (slot < 499U) {
    while (m->rrcache_hash[slot]) {
      rr = m->rrcache_hash[slot];
      m->rrcache_hash[slot] = rr->next;
      if (rr->CRActiveQuestion) {
        rrcache_active ++;
      }
      m->rrcache_used[slot] --;
      ReleaseCacheRR(m, rr);
    }
    m->rrcache_tail[slot] = & m->rrcache_hash[slot];
    slot ++;
  }
  if (rrcache_active != m->rrcache_active) {
    LogMsg("*** ERROR *** rrcache_active %lu != m->rrcache_active %lu", rrcache_active,
           m->rrcache_active);
  }
  m->Questions = (DNSQuestion *)0L;
  intf = m->HostInterfaces;
  while (intf) {
    if (intf->Advertise) {
      mDNS_DeadvertiseInterface(m, intf);
    }
    intf = intf->next;
  }
  if (m->CurrentRecord) {
    LogMsg("mDNS_Close ERROR m->CurrentRecord already set");
  }
  m->CurrentRecord = m->ResourceRecords;
  while (m->CurrentRecord) {
    rr___0 = m->CurrentRecord;
    m->CurrentRecord = rr___0->next;
    if ((int )rr___0->resrec.RecordType != 1) {
      mDNS_Deregister_internal(m, rr___0, 0);
    }
  }
  if (m->ResourceRecords) {

  }
  if (m->mDNSPlatformStatus != 0) {
    DiscardDeregistrations(m);
  } else {
    while (m->ResourceRecords) {
      SendResponses(m);
    }
  }
  mDNS_Unlock(m);
  mDNSPlatformClose(m);
  return;
}
}
#pragma merger(0,"/tmp/cil-V9KGyOrD.i","-g -g -O2")
void mDNSPlatformStrCopy(void const   *src , void *dst ) ;
mDNSu32 mDNSPlatformStrLen(void const   *src ) ;
int gMDNSPlatformPosixVerboseLevel ;
extern mStatus mDNSPlatformPosixRefreshInterfaceList(mDNS *m ) ;
void mDNSPosixGetFDSet(mDNS *m , int *nfds , fd_set *readfds , struct timeval *timeout ) ;
void mDNSPosixProcessFDSet(mDNS *m , fd_set *readfds ) ;
extern void perror(char const   *__s ) ;
extern int gethostname(char *__name , size_t __len ) ;
extern int fcntl(int __fd , int __cmd  , ...) ;
extern ssize_t sendto(int __fd , void const   *__buf , size_t __n , int __flags ,
                      struct sockaddr  const  *__addr , socklen_t __addr_len ) ;
extern unsigned int if_nametoindex(char const   *__ifname ) ;
ssize_t recvfrom_flags(int fd , void *ptr , size_t nbytes , int *flagsp , struct sockaddr *sa ,
                       socklen_t *salenptr , struct my_in_pktinfo *pktp ) ;
struct ifi_info *get_ifi_info(int family , int doaliases ) ;
void free_ifi_info(struct ifi_info *ifihead ) ;
static int num_registered_interfaces  =    0;
static int num_pkts_accepted  =    0;
static int num_pkts_rejected  =    0;
int gMDNSPlatformPosixVerboseLevel  =    0;
void debugf_(char const   *format  , ...) 
{ unsigned char buffer___0[512] ;
  va_list ptr ;
  mDNSu32 tmp ;

  {
  __builtin_stdarg_start(ptr, format);
  tmp = mDNS_vsnprintf((char *)(buffer___0), sizeof(buffer___0), format, ptr);
  buffer___0[tmp] = (unsigned char)0;
  __builtin_va_end(ptr);
  err_log(5, 2048U, (char *)"%s\n", buffer___0);
  return;
}
}
void verbosedebugf_(char const   *format  , ...) 
{ unsigned char buffer___0[512] ;
  va_list ptr ;
  mDNSu32 tmp ;

  {
  __builtin_stdarg_start(ptr, format);
  tmp = mDNS_vsnprintf((char *)(buffer___0), sizeof(buffer___0), format, ptr);
  buffer___0[tmp] = (unsigned char)0;
  __builtin_va_end(ptr);
  err_log(9, 2048U, (char *)"%s\n", buffer___0);
  return;
}
}
void LogMsg(char const   *format  , ...) 
{ unsigned char buffer___0[512] ;
  va_list ptr ;
  mDNSu32 tmp ;

  {
  __builtin_stdarg_start(ptr, format);
  tmp = mDNS_vsnprintf((char *)(buffer___0), sizeof(buffer___0), format, ptr);
  buffer___0[tmp] = (unsigned char)0;
  __builtin_va_end(ptr);
  err_log(2, 2048U, (char *)"%s\n", buffer___0);
  return;
}
}
static void SockAddrTomDNSAddr(struct sockaddr  const  *sa , mDNSAddr *ipAddr , mDNSIPPort *ipPort ) 
{ struct sockaddr_in *sin ;

  {
  switch ((int )sa->sa_family) {
  case 2: 
  sin = (struct sockaddr_in *)sa;
  ipAddr->type = 4;
  ipAddr->ip.v4.NotAnInteger = sin->sin_addr.s_addr;
  if (ipPort) {
    ipPort->NotAnInteger = sin->sin_port;
  }
  break;
  default: 
  ipAddr->type = 0;
  if (ipPort) {
    ipPort->NotAnInteger = (unsigned short)0;
  }
  break;
  }
}
}
mStatus mDNSPlatformSendUDP(mDNS const   *m , DNSMessage const   *msg , mDNSu8 const   *end ,
                            mDNSInterfaceID InterfaceID , mDNSIPPort srcPort , mDNSAddr const   *dst ,
                            mDNSIPPort dstPort ) 
{ int err ;
  struct sockaddr to ;
  PosixNetworkInterface *thisIntf ;
  struct sockaddr_in *sin ;
  unsigned int tmp ;
  int tmp___0 ;

  {
  if (! ((unsigned int )m != (unsigned int )((void *)0))) {
    __assert_fail("m != ((void *)0)", "mDNSPosix.c", 259U, "mDNSPlatformSendUDP");
  }
  if (! ((unsigned int )msg != (unsigned int )((void *)0))) {
    __assert_fail("msg != ((void *)0)", "mDNSPosix.c", 260U, "mDNSPlatformSendUDP");
  }
  if (! ((unsigned int )end != (unsigned int )((void *)0))) {
    __assert_fail("end != ((void *)0)", "mDNSPosix.c", 261U, "mDNSPlatformSendUDP");
  }
  if (! ((char *)end - (char *)msg > 0)) {
    __assert_fail("(((char *) end) - ((char *) msg)) > 0", "mDNSPosix.c", 262U, "mDNSPlatformSendUDP");
  }
  if (! ((unsigned int )InterfaceID != (unsigned int )((mDNSInterfaceID )0))) {
    __assert_fail("InterfaceID != 0", "mDNSPosix.c", 263U, "mDNSPlatformSendUDP");
  }
  if (! ((int )srcPort.NotAnInteger != 0)) {
    __assert_fail("srcPort.NotAnInteger != 0", "mDNSPosix.c", 264U, "mDNSPlatformSendUDP");
  }
  if (! ((int )dstPort.NotAnInteger != 0)) {
    __assert_fail("dstPort.NotAnInteger != 0", "mDNSPosix.c", 265U, "mDNSPlatformSendUDP");
  }
  if (dst->type == 4) {
    sin = (struct sockaddr_in *)(& to);
    sin->sin_family = (unsigned short)2;
    sin->sin_port = dstPort.NotAnInteger;
    sin->sin_addr.s_addr = dst->ip.v4.NotAnInteger;
  }
  err = 0;
  thisIntf = (PosixNetworkInterface *)InterfaceID;
  if (dst->type == 4) {
    if ((int )to.sa_family == 2) {
      tmp = sizeof(struct sockaddr_in );
    } else {
      tmp = sizeof(struct sockaddr );
    }
    err = sendto(thisIntf->multicastSocket, (void const   *)msg, (unsigned int )((char *)end -
                                                                                 (char *)msg),
                 0, (struct sockaddr  const  *)(& to), tmp);
  }
  if (err > 0) {
    err = 0;
  } else {
    if (err < 0) {

    }
  }
  if (err == 0) {
    tmp___0 = 0;
  } else {
    tmp___0 = -65537;
  }
  return (tmp___0);
}
}
static void SocketDataReady(mDNS *m , PosixNetworkInterface *intf , int skt ) 
{ mDNSAddr senderAddr ;
  mDNSAddr destAddr ;
  mDNSIPPort senderPort ;
  ssize_t packetLen ;
  DNSMessage packet ;
  struct my_in_pktinfo packetInfo ;
  struct sockaddr from ;
  socklen_t fromLen ;
  int flags ;
  mDNSBool reject ;
  size_t __s1_len ;
  size_t __s2_len ;
  int tmp___29 ;
  size_t tmp___30 ;
  register int __result___37 ;
  unsigned char const   *__s2___6 ;
  register int __result___38 ;
  int tmp___45 ;
  register int __result___45 ;
  unsigned char const   *__s1___14 ;
  register int __result___46 ;
  int tmp___52 ;
  int tmp___53 ;
  int tmp___54 ;
  int tmp___55 ;
  int tmp___56 ;
  int tmp___57 ;

  {
  if (! ((unsigned int )m != (unsigned int )((void *)0))) {
    __assert_fail("m != ((void *)0)", "mDNSPosix.c", 321U, "SocketDataReady");
  }
  if (! ((unsigned int )intf != (unsigned int )((void *)0))) {
    __assert_fail("intf != ((void *)0)", "mDNSPosix.c", 322U, "SocketDataReady");
  }
  if (! (skt >= 0)) {
    __assert_fail("skt >= 0", "mDNSPosix.c", 323U, "SocketDataReady");
  }
  fromLen = sizeof(from);
  flags = 0;
  packetLen = recvfrom_flags(skt, (void *)(& packet), sizeof(packet), & flags, & from,
                             & fromLen, & packetInfo);
  if (packetLen >= 0) {
    SockAddrTomDNSAddr((struct sockaddr  const  *)(& from), & senderAddr, & senderPort);
    SockAddrTomDNSAddr((struct sockaddr  const  *)(& packetInfo.ipi_addr), & destAddr,
                       (mDNSIPPort *)((void *)0));
    reject = 0;
    if ((int )packetInfo.ipi_ifname[0] != 0) {
      tmp___55 = __builtin_constant_p(packetInfo.ipi_ifname);
      if (tmp___55) {
        tmp___56 = __builtin_constant_p(intf->intfName);
        if (tmp___56) {
          __s1_len = strlen((char const   *)(packetInfo.ipi_ifname));
          __s2_len = strlen(intf->intfName);
          if (! ((unsigned int )((void const   *)(packetInfo.ipi_ifname + 1)) - (unsigned int )((void const   *)(packetInfo.ipi_ifname)) ==
                 1U)) {
            goto _L___172;
          } else {
            if (__s1_len >= 4U) {
              _L___172: /* CIL Label */ 
              if (! ((unsigned int )((void const   *)(intf->intfName + 1)) - (unsigned int )((void const   *)intf->intfName) ==
                     1U)) {
                goto _L___171;
              } else {
                if (__s2_len >= 4U) {
                  _L___171: /* CIL Label */ 
                  tmp___57 = 1;
                } else {
                  goto _L___170;
                }
              }
            } else {
              _L___170: /* CIL Label */ 
              tmp___57 = 0;
            }
          }
          if (tmp___57) {
            if (__s1_len < __s2_len) {
              tmp___30 = __s1_len;
            } else {
              tmp___30 = __s2_len;
            }
            tmp___29 = memcmp((void const   *)((char const   *)(packetInfo.ipi_ifname)),
                              (void const   *)intf->intfName, tmp___30 + 1U);
          } else {
            goto _L___174;
          }
        } else {
          goto _L___174;
        }
      } else {
        _L___174: /* CIL Label */ 
        tmp___54 = __builtin_constant_p(packetInfo.ipi_ifname);
        if (tmp___54) {
          if ((unsigned int )((void const   *)(packetInfo.ipi_ifname + 1)) - (unsigned int )((void const   *)(packetInfo.ipi_ifname)) ==
              1U) {
            __s1_len = strlen((char const   *)(packetInfo.ipi_ifname));
            if (__s1_len < 4U) {
              tmp___45 = __builtin_constant_p(intf->intfName);
              if (tmp___45) {
                if ((unsigned int )((void const   *)(intf->intfName + 1)) - (unsigned int )((void const   *)intf->intfName) ==
                    1U) {
                  __result___37 = (int )((int const   )(*((unsigned char const   *)((char const   *)(packetInfo.ipi_ifname)) +
                                                          0)) - (int const   )(*((unsigned char const   *)intf->intfName +
                                                                                 0)));
                  if (__s1_len > 0U) {
                    if (__result___37 == 0) {
                      __result___37 = (int )((int const   )(*((unsigned char const   *)((char const   *)(packetInfo.ipi_ifname)) +
                                                              1)) - (int const   )(*((unsigned char const   *)intf->intfName +
                                                                                     1)));
                      if (__s1_len > 1U) {
                        if (__result___37 == 0) {
                          __result___37 = (int )((int const   )(*((unsigned char const   *)((char const   *)(packetInfo.ipi_ifname)) +
                                                                  2)) - (int const   )(*((unsigned char const   *)intf->intfName +
                                                                                         2)));
                          if (__s1_len > 2U) {
                            if (__result___37 == 0) {
                              __result___37 = (int )((int const   )(*((unsigned char const   *)((char const   *)(packetInfo.ipi_ifname)) +
                                                                      3)) - (int const   )(*((unsigned char const   *)intf->intfName +
                                                                                             3)));
                            } else {
                              goto _L___133;
                            }
                          } else {
                            _L___133: /* CIL Label */ ;
                          }
                        } else {
                          goto _L___134;
                        }
                      } else {
                        _L___134: /* CIL Label */ ;
                      }
                    } else {
                      goto _L___135;
                    }
                  } else {
                    _L___135: /* CIL Label */ ;
                  }
                  tmp___29 = __result___37;
                } else {
                  goto _L___139;
                }
              } else {
                _L___139: /* CIL Label */ 
                __s2___6 = (unsigned char const   *)intf->intfName;
                __result___38 = (int )((int const   )(*((unsigned char const   *)((char const   *)(packetInfo.ipi_ifname)) +
                                                        0)) - (int const   )(*(__s2___6 +
                                                                               0)));
                if (__s1_len > 0U) {
                  if (__result___38 == 0) {
                    __result___38 = (int )((int const   )(*((unsigned char const   *)((char const   *)(packetInfo.ipi_ifname)) +
                                                            1)) - (int const   )(*(__s2___6 +
                                                                                   1)));
                    if (__s1_len > 1U) {
                      if (__result___38 == 0) {
                        __result___38 = (int )((int const   )(*((unsigned char const   *)((char const   *)(packetInfo.ipi_ifname)) +
                                                                2)) - (int const   )(*(__s2___6 +
                                                                                       2)));
                        if (__s1_len > 2U) {
                          if (__result___38 == 0) {
                            __result___38 = (int )((int const   )(*((unsigned char const   *)((char const   *)(packetInfo.ipi_ifname)) +
                                                                    3)) - (int const   )(*(__s2___6 +
                                                                                           3)));
                          } else {
                            goto _L___136;
                          }
                        } else {
                          _L___136: /* CIL Label */ ;
                        }
                      } else {
                        goto _L___137;
                      }
                    } else {
                      _L___137: /* CIL Label */ ;
                    }
                  } else {
                    goto _L___138;
                  }
                } else {
                  _L___138: /* CIL Label */ ;
                }
                tmp___29 = __result___38;
              }
            } else {
              goto _L___169;
            }
          } else {
            goto _L___169;
          }
        } else {
          _L___169: /* CIL Label */ 
          tmp___53 = __builtin_constant_p(intf->intfName);
          if (tmp___53) {
            if ((unsigned int )((void const   *)(intf->intfName + 1)) - (unsigned int )((void const   *)intf->intfName) ==
                1U) {
              __s2_len = strlen(intf->intfName);
              if (__s2_len < 4U) {
                tmp___52 = __builtin_constant_p(packetInfo.ipi_ifname);
                if (tmp___52) {
                  if ((unsigned int )((void const   *)(packetInfo.ipi_ifname + 1)) -
                      (unsigned int )((void const   *)(packetInfo.ipi_ifname)) ==
                      1U) {
                    __result___45 = (int )((int const   )(*((unsigned char const   *)((char const   *)(packetInfo.ipi_ifname)) +
                                                            0)) - (int const   )(*((unsigned char const   *)intf->intfName +
                                                                                   0)));
                    if (__s2_len > 0U) {
                      if (__result___45 == 0) {
                        __result___45 = (int )((int const   )(*((unsigned char const   *)((char const   *)(packetInfo.ipi_ifname)) +
                                                                1)) - (int const   )(*((unsigned char const   *)intf->intfName +
                                                                                       1)));
                        if (__s2_len > 1U) {
                          if (__result___45 == 0) {
                            __result___45 = (int )((int const   )(*((unsigned char const   *)((char const   *)(packetInfo.ipi_ifname)) +
                                                                    2)) - (int const   )(*((unsigned char const   *)intf->intfName +
                                                                                           2)));
                            if (__s2_len > 2U) {
                              if (__result___45 == 0) {
                                __result___45 = (int )((int const   )(*((unsigned char const   *)((char const   *)(packetInfo.ipi_ifname)) +
                                                                        3)) - (int const   )(*((unsigned char const   *)intf->intfName +
                                                                                               3)));
                              } else {
                                goto _L___159;
                              }
                            } else {
                              _L___159: /* CIL Label */ ;
                            }
                          } else {
                            goto _L___160;
                          }
                        } else {
                          _L___160: /* CIL Label */ ;
                        }
                      } else {
                        goto _L___161;
                      }
                    } else {
                      _L___161: /* CIL Label */ ;
                    }
                    tmp___29 = __result___45;
                  } else {
                    goto _L___165;
                  }
                } else {
                  _L___165: /* CIL Label */ 
                  __s1___14 = (unsigned char const   *)((char const   *)(packetInfo.ipi_ifname));
                  __result___46 = (int )((int const   )(*(__s1___14 + 0)) - (int const   )(*((unsigned char const   *)intf->intfName +
                                                                                             0)));
                  if (__s2_len > 0U) {
                    if (__result___46 == 0) {
                      __result___46 = (int )((int const   )(*(__s1___14 + 1)) - (int const   )(*((unsigned char const   *)intf->intfName +
                                                                                                 1)));
                      if (__s2_len > 1U) {
                        if (__result___46 == 0) {
                          __result___46 = (int )((int const   )(*(__s1___14 + 2)) -
                                                 (int const   )(*((unsigned char const   *)intf->intfName +
                                                                  2)));
                          if (__s2_len > 2U) {
                            if (__result___46 == 0) {
                              __result___46 = (int )((int const   )(*(__s1___14 +
                                                                      3)) - (int const   )(*((unsigned char const   *)intf->intfName +
                                                                                             3)));
                            } else {
                              goto _L___162;
                            }
                          } else {
                            _L___162: /* CIL Label */ ;
                          }
                        } else {
                          goto _L___163;
                        }
                      } else {
                        _L___163: /* CIL Label */ ;
                      }
                    } else {
                      goto _L___164;
                    }
                  } else {
                    _L___164: /* CIL Label */ ;
                  }
                  tmp___29 = __result___46;
                }
              } else {
                goto _L___167;
              }
            } else {
              goto _L___167;
            }
          } else {
            _L___167: /* CIL Label */ 
            tmp___29 = strcmp((char const   *)(packetInfo.ipi_ifname), intf->intfName);
          }
        }
      }
      reject = tmp___29 != 0;
    } else {
      if (packetInfo.ipi_ifindex != -1) {
        reject = packetInfo.ipi_ifindex != intf->index;
      }
    }
    if (reject) {
      packetLen = -1;
      num_pkts_rejected ++;
      if (num_pkts_rejected > ((num_pkts_accepted + 1) * (num_registered_interfaces +
                                                          1)) * 2) {
        err_log(1, 2048U, (char *)"*** WARNING: Received %d packets; Accepted %d packets; Rejected %d packets because of interface mismatch\n",
                num_pkts_accepted + num_pkts_rejected, num_pkts_accepted, num_pkts_rejected);
        num_pkts_accepted = 0;
        num_pkts_rejected = 0;
      }
    } else {
      num_pkts_accepted ++;
    }
  }
  if (packetLen >= 0) {
    if (packetLen < (int )sizeof(DNSMessageHeader )) {
      packetLen = -1;
    } else {
      goto _L___175;
    }
  } else {
    _L___175: /* CIL Label */ ;
  }
  if (packetLen >= 0) {
    mDNSCoreReceive(m, & packet, (mDNSu8 const   *)((mDNSu8 *)(& packet) + packetLen),
                    (mDNSAddr const   *)(& senderAddr), senderPort, (mDNSAddr const   *)(& destAddr),
                    MulticastDNSPort, intf->coreIntf.InterfaceID, (unsigned char)255);
  }
  return;
}
}
static void GetUserSpecifiedFriendlyComputerName(domainlabel *namelabel ) 
{ 

  {
  MakeDomainLabelFromLiteralString(namelabel, "Fill in Default Service Name Here");
  return;
}
}
static void GetUserSpecifiedRFC1034ComputerName(domainlabel *namelabel ) 
{ int len ;

  {
  len = 0;
  gethostname((char *)(& namelabel->c[1]), 63U);
  while (1) {
    if (len < 63) {
      if (namelabel->c[len + 1]) {
        if (! ((int )namelabel->c[len + 1] != 46)) {
          goto _L___0;
        }
      } else {
        goto _L___0;
      }
    } else {
      _L___0: /* CIL Label */ 
      break;
    }
    len ++;
  }
  namelabel->c[0] = (unsigned char )len;
  return;
}
}
static PosixNetworkInterface *SearchForInterfaceByName(mDNS *m , char const   *intfName ) 
{ PosixNetworkInterface *intf ;
  size_t __s1_len ;
  size_t __s2_len ;
  int tmp___29 ;
  size_t tmp___30 ;
  register int __result___37 ;
  unsigned char const   *__s2___6 ;
  register int __result___38 ;
  int tmp___45 ;
  register int __result___45 ;
  unsigned char const   *__s1___14 ;
  register int __result___46 ;
  int tmp___52 ;
  int tmp___53 ;
  int tmp___54 ;
  int tmp___55 ;
  int tmp___56 ;
  int tmp___57 ;

  {
  if (! ((unsigned int )m != (unsigned int )((void *)0))) {
    __assert_fail("m != ((void *)0)", "mDNSPosix.c", 432U, "SearchForInterfaceByName");
  }
  if (! ((unsigned int )intfName != (unsigned int )((void *)0))) {
    __assert_fail("intfName != ((void *)0)", "mDNSPosix.c", 433U, "SearchForInterfaceByName");
  }
  intf = (PosixNetworkInterface *)m->HostInterfaces;
  while (1) {
    if ((unsigned int )intf != (unsigned int )((void *)0)) {
      tmp___55 = __builtin_constant_p(intf->intfName);
      if (tmp___55) {
        tmp___56 = __builtin_constant_p(intfName);
        if (tmp___56) {
          __s1_len = strlen(intf->intfName);
          __s2_len = strlen(intfName);
          if (! ((unsigned int )((void const   *)(intf->intfName + 1)) - (unsigned int )((void const   *)intf->intfName) ==
                 1U)) {
            goto _L___172;
          } else {
            if (__s1_len >= 4U) {
              _L___172: /* CIL Label */ 
              if (! ((unsigned int )((void const   *)(intfName + 1)) - (unsigned int )((void const   *)intfName) ==
                     1U)) {
                goto _L___171;
              } else {
                if (__s2_len >= 4U) {
                  _L___171: /* CIL Label */ 
                  tmp___57 = 1;
                } else {
                  goto _L___170;
                }
              }
            } else {
              _L___170: /* CIL Label */ 
              tmp___57 = 0;
            }
          }
          if (tmp___57) {
            if (__s1_len < __s2_len) {
              tmp___30 = __s1_len;
            } else {
              tmp___30 = __s2_len;
            }
            tmp___29 = memcmp((void const   *)intf->intfName, (void const   *)intfName,
                              tmp___30 + 1U);
          } else {
            goto _L___174;
          }
        } else {
          goto _L___174;
        }
      } else {
        _L___174: /* CIL Label */ 
        tmp___54 = __builtin_constant_p(intf->intfName);
        if (tmp___54) {
          if ((unsigned int )((void const   *)(intf->intfName + 1)) - (unsigned int )((void const   *)intf->intfName) ==
              1U) {
            __s1_len = strlen(intf->intfName);
            if (__s1_len < 4U) {
              tmp___45 = __builtin_constant_p(intfName);
              if (tmp___45) {
                if ((unsigned int )((void const   *)(intfName + 1)) - (unsigned int )((void const   *)intfName) ==
                    1U) {
                  __result___37 = (int )((int const   )(*((unsigned char const   *)intf->intfName +
                                                          0)) - (int const   )(*((unsigned char const   *)intfName +
                                                                                 0)));
                  if (__s1_len > 0U) {
                    if (__result___37 == 0) {
                      __result___37 = (int )((int const   )(*((unsigned char const   *)intf->intfName +
                                                              1)) - (int const   )(*((unsigned char const   *)intfName +
                                                                                     1)));
                      if (__s1_len > 1U) {
                        if (__result___37 == 0) {
                          __result___37 = (int )((int const   )(*((unsigned char const   *)intf->intfName +
                                                                  2)) - (int const   )(*((unsigned char const   *)intfName +
                                                                                         2)));
                          if (__s1_len > 2U) {
                            if (__result___37 == 0) {
                              __result___37 = (int )((int const   )(*((unsigned char const   *)intf->intfName +
                                                                      3)) - (int const   )(*((unsigned char const   *)intfName +
                                                                                             3)));
                            } else {
                              goto _L___133;
                            }
                          } else {
                            _L___133: /* CIL Label */ ;
                          }
                        } else {
                          goto _L___134;
                        }
                      } else {
                        _L___134: /* CIL Label */ ;
                      }
                    } else {
                      goto _L___135;
                    }
                  } else {
                    _L___135: /* CIL Label */ ;
                  }
                  tmp___29 = __result___37;
                } else {
                  goto _L___139;
                }
              } else {
                _L___139: /* CIL Label */ 
                __s2___6 = (unsigned char const   *)intfName;
                __result___38 = (int )((int const   )(*((unsigned char const   *)intf->intfName +
                                                        0)) - (int const   )(*(__s2___6 +
                                                                               0)));
                if (__s1_len > 0U) {
                  if (__result___38 == 0) {
                    __result___38 = (int )((int const   )(*((unsigned char const   *)intf->intfName +
                                                            1)) - (int const   )(*(__s2___6 +
                                                                                   1)));
                    if (__s1_len > 1U) {
                      if (__result___38 == 0) {
                        __result___38 = (int )((int const   )(*((unsigned char const   *)intf->intfName +
                                                                2)) - (int const   )(*(__s2___6 +
                                                                                       2)));
                        if (__s1_len > 2U) {
                          if (__result___38 == 0) {
                            __result___38 = (int )((int const   )(*((unsigned char const   *)intf->intfName +
                                                                    3)) - (int const   )(*(__s2___6 +
                                                                                           3)));
                          } else {
                            goto _L___136;
                          }
                        } else {
                          _L___136: /* CIL Label */ ;
                        }
                      } else {
                        goto _L___137;
                      }
                    } else {
                      _L___137: /* CIL Label */ ;
                    }
                  } else {
                    goto _L___138;
                  }
                } else {
                  _L___138: /* CIL Label */ ;
                }
                tmp___29 = __result___38;
              }
            } else {
              goto _L___169;
            }
          } else {
            goto _L___169;
          }
        } else {
          _L___169: /* CIL Label */ 
          tmp___53 = __builtin_constant_p(intfName);
          if (tmp___53) {
            if ((unsigned int )((void const   *)(intfName + 1)) - (unsigned int )((void const   *)intfName) ==
                1U) {
              __s2_len = strlen(intfName);
              if (__s2_len < 4U) {
                tmp___52 = __builtin_constant_p(intf->intfName);
                if (tmp___52) {
                  if ((unsigned int )((void const   *)(intf->intfName + 1)) - (unsigned int )((void const   *)intf->intfName) ==
                      1U) {
                    __result___45 = (int )((int const   )(*((unsigned char const   *)intf->intfName +
                                                            0)) - (int const   )(*((unsigned char const   *)intfName +
                                                                                   0)));
                    if (__s2_len > 0U) {
                      if (__result___45 == 0) {
                        __result___45 = (int )((int const   )(*((unsigned char const   *)intf->intfName +
                                                                1)) - (int const   )(*((unsigned char const   *)intfName +
                                                                                       1)));
                        if (__s2_len > 1U) {
                          if (__result___45 == 0) {
                            __result___45 = (int )((int const   )(*((unsigned char const   *)intf->intfName +
                                                                    2)) - (int const   )(*((unsigned char const   *)intfName +
                                                                                           2)));
                            if (__s2_len > 2U) {
                              if (__result___45 == 0) {
                                __result___45 = (int )((int const   )(*((unsigned char const   *)intf->intfName +
                                                                        3)) - (int const   )(*((unsigned char const   *)intfName +
                                                                                               3)));
                              } else {
                                goto _L___159;
                              }
                            } else {
                              _L___159: /* CIL Label */ ;
                            }
                          } else {
                            goto _L___160;
                          }
                        } else {
                          _L___160: /* CIL Label */ ;
                        }
                      } else {
                        goto _L___161;
                      }
                    } else {
                      _L___161: /* CIL Label */ ;
                    }
                    tmp___29 = __result___45;
                  } else {
                    goto _L___165;
                  }
                } else {
                  _L___165: /* CIL Label */ 
                  __s1___14 = (unsigned char const   *)intf->intfName;
                  __result___46 = (int )((int const   )(*(__s1___14 + 0)) - (int const   )(*((unsigned char const   *)intfName +
                                                                                             0)));
                  if (__s2_len > 0U) {
                    if (__result___46 == 0) {
                      __result___46 = (int )((int const   )(*(__s1___14 + 1)) - (int const   )(*((unsigned char const   *)intfName +
                                                                                                 1)));
                      if (__s2_len > 1U) {
                        if (__result___46 == 0) {
                          __result___46 = (int )((int const   )(*(__s1___14 + 2)) -
                                                 (int const   )(*((unsigned char const   *)intfName +
                                                                  2)));
                          if (__s2_len > 2U) {
                            if (__result___46 == 0) {
                              __result___46 = (int )((int const   )(*(__s1___14 +
                                                                      3)) - (int const   )(*((unsigned char const   *)intfName +
                                                                                             3)));
                            } else {
                              goto _L___162;
                            }
                          } else {
                            _L___162: /* CIL Label */ ;
                          }
                        } else {
                          goto _L___163;
                        }
                      } else {
                        _L___163: /* CIL Label */ ;
                      }
                    } else {
                      goto _L___164;
                    }
                  } else {
                    _L___164: /* CIL Label */ ;
                  }
                  tmp___29 = __result___46;
                }
              } else {
                goto _L___167;
              }
            } else {
              goto _L___167;
            }
          } else {
            _L___167: /* CIL Label */ 
            tmp___29 = strcmp(intf->intfName, intfName);
          }
        }
      }
      if (! (tmp___29 != 0)) {
        goto _L___175;
      }
    } else {
      _L___175: /* CIL Label */ 
      break;
    }
    intf = (PosixNetworkInterface *)intf->coreIntf.next;
  }
  return (intf);
}
}
static void FreePosixNetworkInterface(PosixNetworkInterface *intf ) 
{ int tmp ;
  int tmp___0 ;

  {
  if (! ((unsigned int )intf != (unsigned int )((void *)0))) {
    __assert_fail("intf != ((void *)0)", "mDNSPosix.c", 446U, "FreePosixNetworkInterface");
  }
  if ((unsigned int )intf->intfName != (unsigned int )((void *)0)) {
    free((void *)intf->intfName);
  }
  if (intf->multicastSocket != -1) {
    tmp = close(intf->multicastSocket);
    if (! (tmp == 0)) {
      __assert_fail("close(intf->multicastSocket) == 0", "mDNSPosix.c", 448U, "FreePosixNetworkInterface");
    }
  }
  if (intf->multicastSocketv6 != -1) {
    tmp___0 = close(intf->multicastSocketv6);
    if (! (tmp___0 == 0)) {
      __assert_fail("close(intf->multicastSocketv6) == 0", "mDNSPosix.c", 449U, "FreePosixNetworkInterface");
    }
  }
  free((void *)intf);
  return;
}
}
static void ClearInterfaceList(mDNS *m ) 
{ PosixNetworkInterface *intf ;

  {
  if (! ((unsigned int )m != (unsigned int )((void *)0))) {
    __assert_fail("m != ((void *)0)", "mDNSPosix.c", 456U, "ClearInterfaceList");
  }
  while (m->HostInterfaces) {
    intf = (PosixNetworkInterface *)m->HostInterfaces;
    mDNS_DeregisterInterface(m, & intf->coreIntf);
    if (gMDNSPlatformPosixVerboseLevel > 0) {
      err_log(1, 2048U, (char *)"Deregistered interface %s\n", intf->intfName);
    }
    FreePosixNetworkInterface(intf);
  }
  num_registered_interfaces = 0;
  num_pkts_accepted = 0;
  num_pkts_rejected = 0;
  return;
}
}
static int SetupSocket(struct sockaddr *intfAddr , mDNSIPPort port , int interfaceIndex ,
                       int *sktPtr ) ;
static int const   kOn  =    (int const   )1;
static int const   kIntTwoFiveFive  =    (int const   )255;
static unsigned char const   kByteTwoFiveFive  =    (unsigned char const   )255;
static int SetupSocket(struct sockaddr *intfAddr , mDNSIPPort port , int interfaceIndex ,
                       int *sktPtr ) 
{ int err ;
  int *tmp ;
  int *tmp___0 ;
  struct ip_mreq imr ;
  struct sockaddr_in bindAddr ;
  int *tmp___1 ;
  int *tmp___2 ;
  int *tmp___3 ;
  int *tmp___4 ;
  int *tmp___5 ;
  int *tmp___6 ;
  int *tmp___7 ;
  int *tmp___8 ;
  char *tmp___9 ;
  int *tmp___10 ;
  int *tmp___11 ;
  int tmp___12 ;

  {
  err = 0;
  if (! ((unsigned int )intfAddr != (unsigned int )((void *)0))) {
    __assert_fail("intfAddr != ((void *)0)", "mDNSPosix.c", 480U, "SetupSocket");
  }
  if (! ((unsigned int )sktPtr != (unsigned int )((void *)0))) {
    __assert_fail("sktPtr != ((void *)0)", "mDNSPosix.c", 481U, "SetupSocket");
  }
  if (! ((*sktPtr) == -1)) {
    __assert_fail("*sktPtr == -1", "mDNSPosix.c", 482U, "SetupSocket");
  }
  if ((int )intfAddr->sa_family == 2) {
    (*sktPtr) = socket(2, 2, 17);
  } else {
    return (22);
  }
  if ((*sktPtr) < 0) {
    tmp = __errno_location();
    err = (*tmp);
    perror("socket");
  }
  if (err == 0) {
    err = setsockopt((*sktPtr), 1, 2, (void const   *)(& kOn), sizeof(kOn));
    if (err < 0) {
      tmp___0 = __errno_location();
      err = (*tmp___0);
      perror("setsockopt - SO_REUSExxxx");
    }
  }
  if ((int )intfAddr->sa_family == 2) {
    if (err == 0) {
      err = setsockopt((*sktPtr), 0, 8, (void const   *)(& kOn), sizeof(kOn));
      if (err < 0) {
        tmp___1 = __errno_location();
        err = (*tmp___1);
        perror("setsockopt - IP_PKTINFO");
      }
    }
    if (err == 0) {
      imr.imr_multiaddr.s_addr = AllDNSLinkGroup.NotAnInteger;
      imr.imr_interface = ((struct sockaddr_in *)intfAddr)->sin_addr;
      err = setsockopt((*sktPtr), 0, 35, (void const   *)(& imr), sizeof(imr));
      if (err < 0) {
        tmp___2 = __errno_location();
        err = (*tmp___2);
        perror("setsockopt - IP_ADD_MEMBERSHIP");
      }
    }
    if (err == 0) {
      err = setsockopt((*sktPtr), 0, 32, (void const   *)(& ((struct sockaddr_in *)intfAddr)->sin_addr),
                       sizeof(struct in_addr ));
      if (err < 0) {
        tmp___3 = __errno_location();
        err = (*tmp___3);
        perror("setsockopt - IP_MULTICAST_IF");
      }
    }
    if (err == 0) {
      err = setsockopt((*sktPtr), 0, 2, (void const   *)(& kIntTwoFiveFive), sizeof(kIntTwoFiveFive));
      if (err < 0) {
        tmp___4 = __errno_location();
        err = (*tmp___4);
        perror("setsockopt - IP_TTL");
      }
    }
    if (err == 0) {
      err = setsockopt((*sktPtr), 0, 33, (void const   *)(& kByteTwoFiveFive), sizeof(kByteTwoFiveFive));
      if (err < 0) {
        tmp___5 = __errno_location();
        if ((*tmp___5) == 22) {
          err = setsockopt((*sktPtr), 0, 33, (void const   *)(& kIntTwoFiveFive),
                           sizeof(kIntTwoFiveFive));
        } else {
          goto _L;
        }
      } else {
        _L: /* CIL Label */ ;
      }
      if (err < 0) {
        tmp___6 = __errno_location();
        err = (*tmp___6);
        perror("setsockopt - IP_MULTICAST_TTL");
      }
    }
    if (err == 0) {
      bindAddr.sin_family = (unsigned short)2;
      bindAddr.sin_port = port.NotAnInteger;
      bindAddr.sin_addr.s_addr = 0U;
      err = bind((*sktPtr), (struct sockaddr  const  *)((struct sockaddr *)(& bindAddr)),
                 sizeof(bindAddr));
      if (err < 0) {
        tmp___7 = __errno_location();
        err = (*tmp___7);
        tmp___8 = __errno_location();
        tmp___9 = strerror((*tmp___8));
        err_log(1, 2048U, (char *)"bind: %s\n", tmp___9);
      }
    }
  }
  if (err == 0) {
    err = fcntl((*sktPtr), 3, 0);
    if (err < 0) {
      tmp___10 = __errno_location();
      err = (*tmp___10);
    } else {
      err = fcntl((*sktPtr), 4, err | 2048);
      if (err < 0) {
        tmp___11 = __errno_location();
        err = (*tmp___11);
      }
    }
  }
  if (err != 0) {
    if ((*sktPtr) != -1) {
      tmp___12 = close((*sktPtr));
      if (! (tmp___12 == 0)) {
        __assert_fail("close(*sktPtr) == 0", "mDNSPosix.c", 671U, "SetupSocket");
      }
      (*sktPtr) = -1;
    } else {
      goto _L___0;
    }
  } else {
    _L___0: /* CIL Label */ ;
  }
  if (! ((err == 0) == ((*sktPtr) != -1))) {
    __assert_fail("(err == 0) == (*sktPtr != -1)", "mDNSPosix.c", 672U, "SetupSocket");
  }
  return (err);
}
}
static int SetupOneInterface(mDNS *m , struct sockaddr *intfAddr , char const   *intfName ) 
{ int err ;
  PosixNetworkInterface *intf ;
  PosixNetworkInterface *alias ;
  void *tmp___14 ;
  size_t __len___2 ;
  size_t tmp___15 ;
  char *__retval___2 ;
  char *tmp___16 ;
  int tmp___18 ;

  {
  err = 0;
  alias = (PosixNetworkInterface *)((void *)0);
  if (! ((unsigned int )m != (unsigned int )((void *)0))) {
    __assert_fail("m != ((void *)0)", "mDNSPosix.c", 684U, "SetupOneInterface");
  }
  if (! ((unsigned int )intfAddr != (unsigned int )((void *)0))) {
    __assert_fail("intfAddr != ((void *)0)", "mDNSPosix.c", 685U, "SetupOneInterface");
  }
  if (! ((unsigned int )intfName != (unsigned int )((void *)0))) {
    __assert_fail("intfName != ((void *)0)", "mDNSPosix.c", 686U, "SetupOneInterface");
  }
  intf = (PosixNetworkInterface *)malloc(sizeof((*intf)));
  if ((unsigned int )intf == (unsigned int )((void *)0)) {
    __assert_fail("0", "mDNSPosix.c", 690U, "SetupOneInterface");
    err = 12;
  }
  if (err == 0) {
    tmp___18 = __builtin_constant_p(intfName);
    if (tmp___18) {
      if ((unsigned int )((void const   *)(intfName + 1)) - (unsigned int )((void const   *)intfName) ==
          1U) {
        if ((int const   )(*(intfName + 0)) == 0) {
          tmp___14 = calloc(1U, 1U);
          intf->intfName = (char const   *)((char *)tmp___14);
        } else {
          tmp___15 = strlen(intfName);
          __len___2 = tmp___15 + 1U;
          tmp___16 = (char *)malloc(__len___2);
          __retval___2 = tmp___16;
          if ((unsigned int )__retval___2 != (unsigned int )((void *)0)) {
            __retval___2 = (char *)memcpy((void * __restrict  )__retval___2, (void const   * __restrict  )intfName,
                                          __len___2);
          }
          intf->intfName = (char const   *)__retval___2;
        }
      } else {
        goto _L;
      }
    } else {
      _L: /* CIL Label */ 
      intf->intfName = __strdup(intfName);
    }
    if ((unsigned int )intf->intfName == (unsigned int )((void *)0)) {
      __assert_fail("0", "mDNSPosix.c", 696U, "SetupOneInterface");
      err = 12;
    }
  }
  if (err == 0) {
    SockAddrTomDNSAddr((struct sockaddr  const  *)intfAddr, & intf->coreIntf.ip, (mDNSIPPort *)((void *)0));
    intf->coreIntf.Advertise = m->AdvertiseLocalAddresses;
    intf->coreIntf.TxAndRx = 1;
    if (! ((unsigned int )intf->intfName != (unsigned int )((void *)0))) {
      __assert_fail("intf->intfName != ((void *)0)", "mDNSPosix.c", 707U, "SetupOneInterface");
    }
    intf->index = (int )if_nametoindex(intf->intfName);
    intf->multicastSocket = -1;
    intf->multicastSocketv6 = -1;
    alias = SearchForInterfaceByName(m, intf->intfName);
    if ((unsigned int )alias == (unsigned int )((void *)0)) {
      alias = intf;
    }
    intf->coreIntf.InterfaceID = (struct mDNSInterfaceID_dummystruct *)alias;
    if ((unsigned int )alias != (unsigned int )intf) {

    }
  }
  if (err == 0) {
    if (alias->multicastSocket == -1) {
      if ((int )intfAddr->sa_family == 2) {
        err = SetupSocket(intfAddr, MulticastDNSPort, intf->index, & alias->multicastSocket);
      } else {
        goto _L___0;
      }
    } else {
      _L___0: /* CIL Label */ ;
    }
  }
  if (err == 0) {
    err = mDNS_RegisterInterface(m, & intf->coreIntf);
  }
  if (err == 0) {
    num_registered_interfaces ++;
    if (gMDNSPlatformPosixVerboseLevel > 0) {
      err_log(1, 2048U, (char *)"Registered interface %s\n", intf->intfName);
    }
  } else {
    if (intf) {
      FreePosixNetworkInterface(intf);
      intf = (PosixNetworkInterface *)((void *)0);
    }
  }
  if (! ((err == 0) == ((unsigned int )intf != (unsigned int )((void *)0)))) {
    __assert_fail("(err == 0) == (intf != ((void *)0))", "mDNSPosix.c", 749U, "SetupOneInterface");
  }
  return (err);
}
}
static int SetupInterfaceList(mDNS *m ) 
{ mDNSBool foundav4 ;
  int err ;
  struct ifi_info *intfList ;
  struct ifi_info *tmp ;
  struct ifi_info *firstLoopback ;
  struct ifi_info *i ;
  int tmp___0 ;

  {
  foundav4 = (mDNSBool )0;
  err = 0;
  tmp = get_ifi_info(2, 1);
  intfList = tmp;
  firstLoopback = (struct ifi_info *)((void *)0);
  if (! ((unsigned int )m != (unsigned int )((void *)0))) {
    __assert_fail("m != ((void *)0)", "mDNSPosix.c", 761U, "SetupInterfaceList");
  }
  if ((unsigned int )intfList == (unsigned int )((void *)0)) {
    err = 2;
  }
  if (err == 0) {
    i = intfList;
    while (i) {
      if ((int )(i->ifi_addr)->sa_family == 2) {
        if ((int )i->ifi_flags & 1) {
          if (! ((int )i->ifi_flags & 16)) {
            if ((int )i->ifi_flags & 8) {
              if ((unsigned int )firstLoopback == (unsigned int )((void *)0)) {
                firstLoopback = i;
              }
            } else {
              tmp___0 = SetupOneInterface(m, i->ifi_addr, (char const   *)(i->ifi_name));
              if (tmp___0 == 0) {
                if ((int )(i->ifi_addr)->sa_family == 2) {
                  foundav4 = 1;
                }
              }
            }
          } else {
            goto _L___0;
          }
        } else {
          goto _L___0;
        }
      } else {
        _L___0: /* CIL Label */ ;
      }
      i = i->ifi_next;
    }
    if (! foundav4) {
      if (firstLoopback) {
        SetupOneInterface(m, firstLoopback->ifi_addr, (char const   *)(firstLoopback->ifi_name));
      } else {
        goto _L___1;
      }
    } else {
      _L___1: /* CIL Label */ ;
    }
  }
  if ((unsigned int )intfList != (unsigned int )((void *)0)) {
    free_ifi_info(intfList);
  }
  return (err);
}
}
mStatus mDNSPlatformInit(mDNS *m ) 
{ int err ;
  int tmp ;

  {
  if (! ((unsigned int )m != (unsigned int )((void *)0))) {
    __assert_fail("m != ((void *)0)", "mDNSPosix.c", 819U, "mDNSPlatformInit");
  }
  m->nicelabel.c[0] = (unsigned char)0;
  GetUserSpecifiedFriendlyComputerName(& m->nicelabel);
  if ((int )m->nicelabel.c[0] == 0) {
    MakeDomainLabelFromLiteralString(& m->nicelabel, "Macintosh");
  }
  m->hostlabel.c[0] = (unsigned char)0;
  GetUserSpecifiedRFC1034ComputerName(& m->hostlabel);
  if ((int )m->hostlabel.c[0] == 0) {
    MakeDomainLabelFromLiteralString(& m->hostlabel, "Macintosh");
  }
  mDNS_GenerateFQDN(m);
  err = SetupInterfaceList(m);
  if (err == 0) {
    mDNSCoreInitComplete(m, 0);
  }
  if (err == 0) {
    tmp = 0;
  } else {
    tmp = -65537;
  }
  return (tmp);
}
}
void mDNSPlatformClose(mDNS *m ) 
{ 

  {
  if (! ((unsigned int )m != (unsigned int )((void *)0))) {
    __assert_fail("m != ((void *)0)", "mDNSPosix.c", 851U, "mDNSPlatformClose");
  }
  ClearInterfaceList(m);
  return;
}
}
extern mStatus mDNSPlatformPosixRefreshInterfaceList(mDNS *m ) 
{ int err ;
  int tmp ;

  {
  ClearInterfaceList(m);
  err = SetupInterfaceList(m);
  if (err == 0) {
    tmp = 0;
  } else {
    tmp = -65537;
  }
  return (tmp);
}
}
void mDNSPlatformLock(mDNS const   *m ) 
{ 

  {
  return;
}
}
void mDNSPlatformUnlock(mDNS const   *m ) 
{ 

  {
  return;
}
}
void mDNSPlatformStrCopy(void const   *src , void *dst ) 
{ 

  {
  strcpy((char * __restrict  )((char *)dst), (char const   * __restrict  )((char *)src));
  return;
}
}
mDNSu32 mDNSPlatformStrLen(void const   *src ) 
{ mDNSu32 tmp ;

  {
  tmp = strlen((char const   *)((char *)src));
  return (tmp);
}
}
void mDNSPlatformMemCopy(void const   *src , void *dst , mDNSu32 len ) 
{ 

  {
  memcpy((void * __restrict  )dst, (void const   * __restrict  )src, len);
  return;
}
}
mDNSBool mDNSPlatformMemSame(void const   *src , void const   *dst , mDNSu32 len ) 
{ int tmp ;

  {
  tmp = memcmp(dst, src, len);
  return (tmp == 0);
}
}
void mDNSPlatformMemZero(void *dst , mDNSu32 len ) 
{ void *__s ;
  void *__s___0 ;
  union __anonunion___u_58 *__u ;
  __uint8_t __c ;
  void *__s___1 ;
  int tmp ;

  {
  tmp = __builtin_constant_p(len);
  if (tmp) {
    if (len <= 16U) {
      if (len == 1U) {
        __s___1 = dst;
        (*((__uint8_t *)__s___1)) = (unsigned char)0;
      } else {
        __s___0 = dst;
        __u = (union __anonunion___u_58 *)__s___0;
        __c = (unsigned char)0;
        switch ((int )len) {
        case 15: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_58 *)((void *)__u + 4);
        case 11: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_58 *)((void *)__u + 4);
        case 7: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_58 *)((void *)__u + 4);
        case 3: 
        __u->__usi = (unsigned short )((int )((unsigned short )__c) * 257);
        __u = (union __anonunion___u_58 *)((void *)__u + 2);
        __u->__uc = __c;
        break;
        case 14: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_58 *)((void *)__u + 4);
        case 10: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_58 *)((void *)__u + 4);
        case 6: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_58 *)((void *)__u + 4);
        case 2: 
        __u->__usi = (unsigned short )((int )((unsigned short )__c) * 257);
        break;
        case 13: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_58 *)((void *)__u + 4);
        case 9: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_58 *)((void *)__u + 4);
        case 5: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_58 *)((void *)__u + 4);
        case 1: 
        __u->__uc = __c;
        break;
        case 16: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_58 *)((void *)__u + 4);
        case 12: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_58 *)((void *)__u + 4);
        case 8: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_58 *)((void *)__u + 4);
        case 4: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        case 0: ;
        break;
        }
      }
    } else {
      goto _L;
    }
  } else {
    _L: /* CIL Label */ 
    __s = dst;
    __builtin_memset(__s, '\000', (int )len);
  }
  return;
}
}
void *mDNSPlatformMemAllocate(mDNSu32 len ) 
{ void *tmp ;

  {
  tmp = malloc(len);
  return (tmp);
}
}
void mDNSPlatformMemFree(void *mem ) 
{ 

  {
  free(mem);
  return;
}
}
int mDNSPlatformOneSecond  =    1024;
mStatus mDNSPlatformTimeInit(mDNSs32 *timenow ) 
{ 

  {
  (*timenow) = mDNSPlatformTimeNow();
  return (0);
}
}
mDNSs32 mDNSPlatformTimeNow(void) 
{ struct timeval tv ;

  {
  gettimeofday((struct timeval * __restrict  )(& tv), (struct timezone * __restrict  )((void *)0));
  return ((int )((tv.tv_sec << 10) | (tv.tv_usec * 16L) / 15625L));
}
}
void mDNSPosixGetFDSet(mDNS *m , int *nfds , fd_set *readfds , struct timeval *timeout ) 
{ mDNSs32 ticks ;
  struct timeval interval ;
  mDNSs32 nextevent ;
  mDNSs32 tmp ;
  PosixNetworkInterface *info ;
  mDNSs32 tmp___0 ;

  {
  tmp = mDNS_Execute(m);
  nextevent = tmp;
  info = (PosixNetworkInterface *)m->HostInterfaces;
  while (info) {
    if (info->multicastSocket != -1) {
      if ((*nfds) < info->multicastSocket + 1) {
        (*nfds) = info->multicastSocket + 1;
      }
      __asm__  volatile   ("btsl %1,%0": "=m" (readfds->__fds_bits[(unsigned int )info->multicastSocket /
                                                                   (8U * sizeof(__fd_mask ))]): "r" ((unsigned int )info->multicastSocket %
                                                                                                     (8U *
                                                                                                      sizeof(__fd_mask ))): "cc",
                           "memory");
    }
    if (info->multicastSocketv6 != -1) {
      if ((*nfds) < info->multicastSocketv6 + 1) {
        (*nfds) = info->multicastSocketv6 + 1;
      }
      __asm__  volatile   ("btsl %1,%0": "=m" (readfds->__fds_bits[(unsigned int )info->multicastSocketv6 /
                                                                   (8U * sizeof(__fd_mask ))]): "r" ((unsigned int )info->multicastSocketv6 %
                                                                                                     (8U *
                                                                                                      sizeof(__fd_mask ))): "cc",
                           "memory");
    }
    info = (PosixNetworkInterface *)info->coreIntf.next;
  }
  tmp___0 = mDNSPlatformTimeNow();
  ticks = nextevent - tmp___0;
  if (ticks < 1) {
    ticks = 1;
  }
  interval.tv_sec = (long )(ticks >> 10);
  interval.tv_usec = (long )(((ticks & 1023) * 15625) / 16);
  if (timeout->tv_sec > interval.tv_sec) {
    goto _L;
  } else {
    if (timeout->tv_sec == interval.tv_sec) {
      if (timeout->tv_usec > interval.tv_usec) {
        _L: /* CIL Label */ 
        (*timeout) = interval;
      } else {
        goto _L___0;
      }
    } else {
      _L___0: /* CIL Label */ ;
    }
  }
  return;
}
}
void mDNSPosixProcessFDSet(mDNS *m , fd_set *readfds ) 
{ PosixNetworkInterface *info ;
  register char __result ;
  register char __result___0 ;

  {
  if (! ((unsigned int )m != (unsigned int )((void *)0))) {
    __assert_fail("m != ((void *)0)", "mDNSPosix.c", 992U, "mDNSPosixProcessFDSet");
  }
  if (! ((unsigned int )readfds != (unsigned int )((void *)0))) {
    __assert_fail("readfds != ((void *)0)", "mDNSPosix.c", 993U, "mDNSPosixProcessFDSet");
  }
  info = (PosixNetworkInterface *)m->HostInterfaces;
  while (info) {
    if (info->multicastSocket != -1) {
      __asm__  volatile   ("btl %1,%2 ; setcb %b0": "=q" (__result): "r" ((unsigned int )info->multicastSocket %
                                                                          (8U * sizeof(__fd_mask ))),
                           "m" (readfds->__fds_bits[(unsigned int )info->multicastSocket /
                                                    (8U * sizeof(__fd_mask ))]): "cc");
      if (__result) {
        __asm__  volatile   ("btrl %1,%0": "=m" (readfds->__fds_bits[(unsigned int )info->multicastSocket /
                                                                     (8U * sizeof(__fd_mask ))]): "r" ((unsigned int )info->multicastSocket %
                                                                                                       (8U *
                                                                                                        sizeof(__fd_mask ))): "cc",
                             "memory");
        SocketDataReady(m, info, info->multicastSocket);
      } else {
        goto _L;
      }
    } else {
      _L: /* CIL Label */ ;
    }
    if (info->multicastSocketv6 != -1) {
      __asm__  volatile   ("btl %1,%2 ; setcb %b0": "=q" (__result___0): "r" ((unsigned int )info->multicastSocketv6 %
                                                                              (8U *
                                                                               sizeof(__fd_mask ))),
                           "m" (readfds->__fds_bits[(unsigned int )info->multicastSocketv6 /
                                                    (8U * sizeof(__fd_mask ))]): "cc");
      if (__result___0) {
        __asm__  volatile   ("btrl %1,%0": "=m" (readfds->__fds_bits[(unsigned int )info->multicastSocketv6 /
                                                                     (8U * sizeof(__fd_mask ))]): "r" ((unsigned int )info->multicastSocketv6 %
                                                                                                       (8U *
                                                                                                        sizeof(__fd_mask ))): "cc",
                             "memory");
        SocketDataReady(m, info, info->multicastSocketv6);
      } else {
        goto _L___0;
      }
    } else {
      _L___0: /* CIL Label */ ;
    }
    info = (PosixNetworkInterface *)info->coreIntf.next;
  }
  return;
}
}
#pragma merger(0,"/tmp/cil-dlIG6kzh.i","-g -g -O2")
__inline static struct cmsghdr *__cmsg_nxthdr__extinline(struct msghdr *__mhdr , struct cmsghdr *__cmsg ) 
{ 

  {
  if (__cmsg->cmsg_len < sizeof(struct cmsghdr )) {
    return ((struct cmsghdr *)0);
  }
  __cmsg = (struct cmsghdr *)((unsigned char *)__cmsg + (((__cmsg->cmsg_len + sizeof(size_t )) -
                                                          1U) & ~ (sizeof(size_t ) -
                                                                   1U)));
  if ((unsigned int )((unsigned char *)(__cmsg + 1)) > (unsigned int )((unsigned char *)__mhdr->msg_control +
                                                                       __mhdr->msg_controllen)) {
    goto _L;
  } else {
    if ((unsigned int )((unsigned char *)__cmsg + (((__cmsg->cmsg_len + sizeof(size_t )) -
                                                    1U) & ~ (sizeof(size_t ) - 1U))) >
        (unsigned int )((unsigned char *)__mhdr->msg_control + __mhdr->msg_controllen)) {
      _L: /* CIL Label */ 
      return ((struct cmsghdr *)0);
    }
  }
  return (__cmsg);
}
}
extern ssize_t recvmsg(int __fd , struct msghdr *__message , int __flags ) ;
extern int ioctl(int __fd , unsigned long __request  , ...) ;
struct ifi_info *get_ifi_info(int family , int doaliases ) 
{ int junk ;
  struct ifi_info *ifi ;
  struct ifi_info *ifihead ;
  struct ifi_info **ifipnext ;
  int sockfd ;
  int len ;
  int lastlen ;
  int flags ;
  int myflags ;
  char *ptr ;
  char *buf ;
  char lastname[16] ;
  char *cptr ;
  struct ifconf ifc ;
  struct ifreq *ifr ;
  struct ifreq ifrcopy ;
  struct sockaddr_in *sinptr ;
  int *tmp ;
  int tmp___0 ;
  char *tmp___2 ;
  int tmp___67 ;
  size_t __s1_len___0 ;
  size_t __s2_len___0 ;
  int tmp___98 ;
  size_t tmp___99 ;
  register int __result___85 ;
  unsigned char const   *__s2___14 ;
  register int __result___86 ;
  int tmp___114 ;
  register int __result___93 ;
  unsigned char const   *__s1___30 ;
  register int __result___94 ;
  int tmp___121 ;
  int tmp___122 ;
  int tmp___123 ;
  int tmp___124 ;
  int tmp___125 ;
  int tmp___126 ;
  int tmp___127 ;
  size_t tmp___128 ;
  int tmp___129 ;
  size_t tmp___130 ;
  int tmp___131 ;
  int tmp___132 ;
  int tmp___133 ;

  {
  sockfd = -1;
  buf = (char *)((void *)0);
  ifihead = (struct ifi_info *)((void *)0);
  sockfd = socket(2, 2, 0);
  if (sockfd < 0) {
    goto gotError;
  }
  lastlen = 0;
  len = (int )(100U * sizeof(struct ifreq ));
  while (1) {
    buf = (char *)malloc((unsigned int )len);
    if ((unsigned int )buf == (unsigned int )((void *)0)) {
      goto gotError;
    }
    ifc.ifc_len = len;
    ifc.ifc_ifcu.ifcu_buf = buf;
    tmp___0 = ioctl(sockfd, 35090UL, & ifc);
    if (tmp___0 < 0) {
      tmp = __errno_location();
      if ((*tmp) != 22) {
        goto _L;
      } else {
        if (lastlen != 0) {
          _L: /* CIL Label */ 
          goto gotError;
        }
      }
    } else {
      if (ifc.ifc_len == lastlen) {
        break;
      }
      lastlen = ifc.ifc_len;
    }
    len = (int )((unsigned int )len + 10U * sizeof(struct ifreq ));
    free((void *)buf);
  }
  ifihead = (struct ifi_info *)((void *)0);
  ifipnext = & ifihead;
  lastname[0] = (char)0;
  ptr = buf;
  while ((unsigned int )ptr < (unsigned int )(buf + ifc.ifc_len)) {
    ifr = (struct ifreq *)ptr;
    if ((int )ifr->ifr_ifru.ifru_addr.sa_family == 2) {
      len = (int )sizeof(struct sockaddr_in );
    } else {
      len = (int )sizeof(struct sockaddr );
    }
    ptr += sizeof(struct ifreq );
    if ((int )ifr->ifr_ifru.ifru_addr.sa_family != family) {
      goto __Cont;
    }
    myflags = 0;
    tmp___2 = strchr((char const   *)(ifr->ifr_ifrn.ifrn_name), ':');
    cptr = tmp___2;
    if ((unsigned int )cptr != (unsigned int )((void *)0)) {
      (*cptr) = (char)0;
    }
    tmp___127 = __builtin_constant_p(lastname);
    if (tmp___127) {
      tmp___128 = strlen((char const   *)(lastname));
      if (tmp___128 < 16U) {
        goto _L___352;
      } else {
        goto _L___354;
      }
    } else {
      _L___354: /* CIL Label */ 
      tmp___129 = __builtin_constant_p(ifr->ifr_ifrn.ifrn_name);
      if (tmp___129) {
        tmp___130 = strlen((char const   *)(ifr->ifr_ifrn.ifrn_name));
        if (tmp___130 < 16U) {
          _L___352: /* CIL Label */ 
          tmp___124 = __builtin_constant_p(lastname);
          if (tmp___124) {
            tmp___125 = __builtin_constant_p(ifr->ifr_ifrn.ifrn_name);
            if (tmp___125) {
              __s1_len___0 = strlen((char const   *)(lastname));
              __s2_len___0 = strlen((char const   *)(ifr->ifr_ifrn.ifrn_name));
              if (! ((unsigned int )((void const   *)(lastname + 1)) - (unsigned int )((void const   *)(lastname)) ==
                     1U)) {
                goto _L___349;
              } else {
                if (__s1_len___0 >= 4U) {
                  _L___349: /* CIL Label */ 
                  if (! ((unsigned int )((void const   *)(ifr->ifr_ifrn.ifrn_name +
                                                          1)) - (unsigned int )((void const   *)(ifr->ifr_ifrn.ifrn_name)) ==
                         1U)) {
                    goto _L___348;
                  } else {
                    if (__s2_len___0 >= 4U) {
                      _L___348: /* CIL Label */ 
                      tmp___126 = 1;
                    } else {
                      goto _L___347;
                    }
                  }
                } else {
                  _L___347: /* CIL Label */ 
                  tmp___126 = 0;
                }
              }
              if (tmp___126) {
                if (__s1_len___0 < __s2_len___0) {
                  tmp___99 = __s1_len___0;
                } else {
                  tmp___99 = __s2_len___0;
                }
                tmp___98 = memcmp((void const   *)((char const   *)(lastname)), (void const   *)((char const   *)(ifr->ifr_ifrn.ifrn_name)),
                                  tmp___99 + 1U);
              } else {
                goto _L___351;
              }
            } else {
              goto _L___351;
            }
          } else {
            _L___351: /* CIL Label */ 
            tmp___123 = __builtin_constant_p(lastname);
            if (tmp___123) {
              if ((unsigned int )((void const   *)(lastname + 1)) - (unsigned int )((void const   *)(lastname)) ==
                  1U) {
                __s1_len___0 = strlen((char const   *)(lastname));
                if (__s1_len___0 < 4U) {
                  tmp___114 = __builtin_constant_p(ifr->ifr_ifrn.ifrn_name);
                  if (tmp___114) {
                    if ((unsigned int )((void const   *)(ifr->ifr_ifrn.ifrn_name +
                                                         1)) - (unsigned int )((void const   *)(ifr->ifr_ifrn.ifrn_name)) ==
                        1U) {
                      __result___85 = (int )((int const   )(*((unsigned char const   *)((char const   *)(lastname)) +
                                                              0)) - (int const   )(*((unsigned char const   *)((char const   *)(ifr->ifr_ifrn.ifrn_name)) +
                                                                                     0)));
                      if (__s1_len___0 > 0U) {
                        if (__result___85 == 0) {
                          __result___85 = (int )((int const   )(*((unsigned char const   *)((char const   *)(lastname)) +
                                                                  1)) - (int const   )(*((unsigned char const   *)((char const   *)(ifr->ifr_ifrn.ifrn_name)) +
                                                                                         1)));
                          if (__s1_len___0 > 1U) {
                            if (__result___85 == 0) {
                              __result___85 = (int )((int const   )(*((unsigned char const   *)((char const   *)(lastname)) +
                                                                      2)) - (int const   )(*((unsigned char const   *)((char const   *)(ifr->ifr_ifrn.ifrn_name)) +
                                                                                             2)));
                              if (__s1_len___0 > 2U) {
                                if (__result___85 == 0) {
                                  __result___85 = (int )((int const   )(*((unsigned char const   *)((char const   *)(lastname)) +
                                                                          3)) - (int const   )(*((unsigned char const   *)((char const   *)(ifr->ifr_ifrn.ifrn_name)) +
                                                                                                 3)));
                                } else {
                                  goto _L___310;
                                }
                              } else {
                                _L___310: /* CIL Label */ ;
                              }
                            } else {
                              goto _L___311;
                            }
                          } else {
                            _L___311: /* CIL Label */ ;
                          }
                        } else {
                          goto _L___312;
                        }
                      } else {
                        _L___312: /* CIL Label */ ;
                      }
                      tmp___98 = __result___85;
                    } else {
                      goto _L___316;
                    }
                  } else {
                    _L___316: /* CIL Label */ 
                    __s2___14 = (unsigned char const   *)((char const   *)(ifr->ifr_ifrn.ifrn_name));
                    __result___86 = (int )((int const   )(*((unsigned char const   *)((char const   *)(lastname)) +
                                                            0)) - (int const   )(*(__s2___14 +
                                                                                   0)));
                    if (__s1_len___0 > 0U) {
                      if (__result___86 == 0) {
                        __result___86 = (int )((int const   )(*((unsigned char const   *)((char const   *)(lastname)) +
                                                                1)) - (int const   )(*(__s2___14 +
                                                                                       1)));
                        if (__s1_len___0 > 1U) {
                          if (__result___86 == 0) {
                            __result___86 = (int )((int const   )(*((unsigned char const   *)((char const   *)(lastname)) +
                                                                    2)) - (int const   )(*(__s2___14 +
                                                                                           2)));
                            if (__s1_len___0 > 2U) {
                              if (__result___86 == 0) {
                                __result___86 = (int )((int const   )(*((unsigned char const   *)((char const   *)(lastname)) +
                                                                        3)) - (int const   )(*(__s2___14 +
                                                                                               3)));
                              } else {
                                goto _L___313;
                              }
                            } else {
                              _L___313: /* CIL Label */ ;
                            }
                          } else {
                            goto _L___314;
                          }
                        } else {
                          _L___314: /* CIL Label */ ;
                        }
                      } else {
                        goto _L___315;
                      }
                    } else {
                      _L___315: /* CIL Label */ ;
                    }
                    tmp___98 = __result___86;
                  }
                } else {
                  goto _L___346;
                }
              } else {
                goto _L___346;
              }
            } else {
              _L___346: /* CIL Label */ 
              tmp___122 = __builtin_constant_p(ifr->ifr_ifrn.ifrn_name);
              if (tmp___122) {
                if ((unsigned int )((void const   *)(ifr->ifr_ifrn.ifrn_name + 1)) -
                    (unsigned int )((void const   *)(ifr->ifr_ifrn.ifrn_name)) ==
                    1U) {
                  __s2_len___0 = strlen((char const   *)(ifr->ifr_ifrn.ifrn_name));
                  if (__s2_len___0 < 4U) {
                    tmp___121 = __builtin_constant_p(lastname);
                    if (tmp___121) {
                      if ((unsigned int )((void const   *)(lastname + 1)) - (unsigned int )((void const   *)(lastname)) ==
                          1U) {
                        __result___93 = (int )((int const   )(*((unsigned char const   *)((char const   *)(lastname)) +
                                                                0)) - (int const   )(*((unsigned char const   *)((char const   *)(ifr->ifr_ifrn.ifrn_name)) +
                                                                                       0)));
                        if (__s2_len___0 > 0U) {
                          if (__result___93 == 0) {
                            __result___93 = (int )((int const   )(*((unsigned char const   *)((char const   *)(lastname)) +
                                                                    1)) - (int const   )(*((unsigned char const   *)((char const   *)(ifr->ifr_ifrn.ifrn_name)) +
                                                                                           1)));
                            if (__s2_len___0 > 1U) {
                              if (__result___93 == 0) {
                                __result___93 = (int )((int const   )(*((unsigned char const   *)((char const   *)(lastname)) +
                                                                        2)) - (int const   )(*((unsigned char const   *)((char const   *)(ifr->ifr_ifrn.ifrn_name)) +
                                                                                               2)));
                                if (__s2_len___0 > 2U) {
                                  if (__result___93 == 0) {
                                    __result___93 = (int )((int const   )(*((unsigned char const   *)((char const   *)(lastname)) +
                                                                            3)) -
                                                           (int const   )(*((unsigned char const   *)((char const   *)(ifr->ifr_ifrn.ifrn_name)) +
                                                                            3)));
                                  } else {
                                    goto _L___336;
                                  }
                                } else {
                                  _L___336: /* CIL Label */ ;
                                }
                              } else {
                                goto _L___337;
                              }
                            } else {
                              _L___337: /* CIL Label */ ;
                            }
                          } else {
                            goto _L___338;
                          }
                        } else {
                          _L___338: /* CIL Label */ ;
                        }
                        tmp___98 = __result___93;
                      } else {
                        goto _L___342;
                      }
                    } else {
                      _L___342: /* CIL Label */ 
                      __s1___30 = (unsigned char const   *)((char const   *)(lastname));
                      __result___94 = (int )((int const   )(*(__s1___30 + 0)) - (int const   )(*((unsigned char const   *)((char const   *)(ifr->ifr_ifrn.ifrn_name)) +
                                                                                                 0)));
                      if (__s2_len___0 > 0U) {
                        if (__result___94 == 0) {
                          __result___94 = (int )((int const   )(*(__s1___30 + 1)) -
                                                 (int const   )(*((unsigned char const   *)((char const   *)(ifr->ifr_ifrn.ifrn_name)) +
                                                                  1)));
                          if (__s2_len___0 > 1U) {
                            if (__result___94 == 0) {
                              __result___94 = (int )((int const   )(*(__s1___30 +
                                                                      2)) - (int const   )(*((unsigned char const   *)((char const   *)(ifr->ifr_ifrn.ifrn_name)) +
                                                                                             2)));
                              if (__s2_len___0 > 2U) {
                                if (__result___94 == 0) {
                                  __result___94 = (int )((int const   )(*(__s1___30 +
                                                                          3)) - (int const   )(*((unsigned char const   *)((char const   *)(ifr->ifr_ifrn.ifrn_name)) +
                                                                                                 3)));
                                } else {
                                  goto _L___339;
                                }
                              } else {
                                _L___339: /* CIL Label */ ;
                              }
                            } else {
                              goto _L___340;
                            }
                          } else {
                            _L___340: /* CIL Label */ ;
                          }
                        } else {
                          goto _L___341;
                        }
                      } else {
                        _L___341: /* CIL Label */ ;
                      }
                      tmp___98 = __result___94;
                    }
                  } else {
                    goto _L___344;
                  }
                } else {
                  goto _L___344;
                }
              } else {
                _L___344: /* CIL Label */ 
                tmp___98 = strcmp((char const   *)(lastname), (char const   *)(ifr->ifr_ifrn.ifrn_name));
              }
            }
          }
          tmp___67 = tmp___98;
        } else {
          goto _L___353;
        }
      } else {
        _L___353: /* CIL Label */ 
        tmp___67 = strncmp((char const   *)(lastname), (char const   *)(ifr->ifr_ifrn.ifrn_name),
                           16U);
      }
    }
    if (tmp___67 == 0) {
      if (doaliases == 0) {
        goto __Cont;
      }
      myflags = 1;
    }
    memcpy((void * __restrict  )(lastname), (void const   * __restrict  )(ifr->ifr_ifrn.ifrn_name),
           16U);
    ifrcopy = (*ifr);
    tmp___131 = ioctl(sockfd, 35091UL, & ifrcopy);
    if (tmp___131 < 0) {
      goto gotError;
    }
    flags = (int )ifrcopy.ifr_ifru.ifru_flags;
    if ((flags & 1) == 0) {
      goto __Cont;
    }
    ifi = (struct ifi_info *)calloc(1U, sizeof(struct ifi_info ));
    if ((unsigned int )ifi == (unsigned int )((void *)0)) {
      goto gotError;
    }
    (*ifipnext) = ifi;
    ifipnext = & ifi->ifi_next;
    ifi->ifi_flags = (short )flags;
    ifi->ifi_myflags = (short )myflags;
    ifi->ifi_index = (int )if_nametoindex((char const   *)(ifr->ifr_ifrn.ifrn_name));
    memcpy((void * __restrict  )(ifi->ifi_name), (void const   * __restrict  )(ifr->ifr_ifrn.ifrn_name),
           16U);
    ifi->ifi_name[15] = (char )'\000';
    switch ((int )ifr->ifr_ifru.ifru_addr.sa_family) {
    case 2: 
    sinptr = (struct sockaddr_in *)(& ifr->ifr_ifru.ifru_addr);
    if ((unsigned int )ifi->ifi_addr == (unsigned int )((void *)0)) {
      ifi->ifi_addr = (struct sockaddr *)calloc(1U, sizeof(struct sockaddr_in ));
      if ((unsigned int )ifi->ifi_addr == (unsigned int )((void *)0)) {
        goto gotError;
      }
      memcpy((void * __restrict  )ifi->ifi_addr, (void const   * __restrict  )sinptr,
             sizeof(struct sockaddr_in ));
      if (flags & 2) {
        tmp___132 = ioctl(sockfd, 35097UL, & ifrcopy);
        if (tmp___132 < 0) {
          goto gotError;
        }
        sinptr = (struct sockaddr_in *)(& ifrcopy.ifr_ifru.ifru_broadaddr);
        ifi->ifi_brdaddr = (struct sockaddr *)calloc(1U, sizeof(struct sockaddr_in ));
        if ((unsigned int )ifi->ifi_brdaddr == (unsigned int )((void *)0)) {
          goto gotError;
        }
        memcpy((void * __restrict  )ifi->ifi_brdaddr, (void const   * __restrict  )sinptr,
               sizeof(struct sockaddr_in ));
      }
      if (flags & 16) {
        tmp___133 = ioctl(sockfd, 35095UL, & ifrcopy);
        if (tmp___133 < 0) {
          goto gotError;
        }
        sinptr = (struct sockaddr_in *)(& ifrcopy.ifr_ifru.ifru_dstaddr);
        ifi->ifi_dstaddr = (struct sockaddr *)calloc(1U, sizeof(struct sockaddr_in ));
        if ((unsigned int )ifi->ifi_dstaddr == (unsigned int )((void *)0)) {
          goto gotError;
        }
        memcpy((void * __restrict  )ifi->ifi_dstaddr, (void const   * __restrict  )sinptr,
               sizeof(struct sockaddr_in ));
      }
    }
    break;
    default: ;
    break;
    }
    __Cont: /* CIL Label */ ;
  }
  goto done;
  gotError: 
  if ((unsigned int )ifihead != (unsigned int )((void *)0)) {
    free_ifi_info(ifihead);
    ifihead = (struct ifi_info *)((void *)0);
  }
  done: 
  if ((unsigned int )buf != (unsigned int )((void *)0)) {
    free((void *)buf);
  }
  if (sockfd != -1) {
    junk = close(sockfd);
    if (! (junk == 0)) {
      __assert_fail("junk == 0", "mDNSUNP.c", 293U, "get_ifi_info");
    }
  }
  return (ifihead);
}
}
void free_ifi_info(struct ifi_info *ifihead ) 
{ struct ifi_info *ifi ;
  struct ifi_info *ifinext ;

  {
  ifi = ifihead;
  while ((unsigned int )ifi != (unsigned int )((void *)0)) {
    if ((unsigned int )ifi->ifi_addr != (unsigned int )((void *)0)) {
      free((void *)ifi->ifi_addr);
    }
    if ((unsigned int )ifi->ifi_brdaddr != (unsigned int )((void *)0)) {
      free((void *)ifi->ifi_brdaddr);
    }
    if ((unsigned int )ifi->ifi_dstaddr != (unsigned int )((void *)0)) {
      free((void *)ifi->ifi_dstaddr);
    }
    ifinext = ifi->ifi_next;
    free((void *)ifi);
    ifi = ifinext;
  }
  return;
}
}
ssize_t recvfrom_flags(int fd , void *ptr , size_t nbytes , int *flagsp , struct sockaddr *sa ,
                       socklen_t *salenptr , struct my_in_pktinfo *pktp ) 
{ struct msghdr msg ;
  struct iovec iov[1] ;
  ssize_t n ;
  struct cmsghdr *cmptr ;
  union __anonunion_control_un_32 control_un ;
  void *__s ;
  void *__s___0 ;
  union __anonunion___u_33 *__u ;
  __uint8_t __c ;
  void *__s___1 ;
  int tmp ;
  struct in_pktinfo *tmp___0 ;
  struct sockaddr_in *sin ;

  {
  msg.msg_control = (void *)(control_un.control);
  msg.msg_controllen = sizeof(control_un.control);
  msg.msg_flags = 0;
  msg.msg_name = (void *)sa;
  msg.msg_namelen = (*salenptr);
  iov[0].iov_base = ptr;
  iov[0].iov_len = nbytes;
  msg.msg_iov = iov;
  msg.msg_iovlen = 1U;
  n = recvmsg(fd, & msg, (*flagsp));
  if (n < 0) {
    return (n);
  }
  (*salenptr) = msg.msg_namelen;
  if (pktp) {
    tmp = __builtin_constant_p(sizeof(struct my_in_pktinfo ));
    if (tmp) {
      if (sizeof(struct my_in_pktinfo ) <= 16U) {
        if (sizeof(struct my_in_pktinfo ) == 1U) {
          __s___1 = (void *)pktp;
          (*((__uint8_t *)__s___1)) = (unsigned char)0;
        } else {
          __s___0 = (void *)pktp;
          __u = (union __anonunion___u_33 *)__s___0;
          __c = (unsigned char)0;
          switch ((int )sizeof(struct my_in_pktinfo )) {
          case 15: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          __u = (union __anonunion___u_33 *)((void *)__u + 4);
          case 11: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          __u = (union __anonunion___u_33 *)((void *)__u + 4);
          case 7: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          __u = (union __anonunion___u_33 *)((void *)__u + 4);
          case 3: 
          __u->__usi = (unsigned short )((int )((unsigned short )__c) * 257);
          __u = (union __anonunion___u_33 *)((void *)__u + 2);
          __u->__uc = __c;
          break;
          case 14: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          __u = (union __anonunion___u_33 *)((void *)__u + 4);
          case 10: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          __u = (union __anonunion___u_33 *)((void *)__u + 4);
          case 6: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          __u = (union __anonunion___u_33 *)((void *)__u + 4);
          case 2: 
          __u->__usi = (unsigned short )((int )((unsigned short )__c) * 257);
          break;
          case 13: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          __u = (union __anonunion___u_33 *)((void *)__u + 4);
          case 9: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          __u = (union __anonunion___u_33 *)((void *)__u + 4);
          case 5: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          __u = (union __anonunion___u_33 *)((void *)__u + 4);
          case 1: 
          __u->__uc = __c;
          break;
          case 16: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          __u = (union __anonunion___u_33 *)((void *)__u + 4);
          case 12: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          __u = (union __anonunion___u_33 *)((void *)__u + 4);
          case 8: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          __u = (union __anonunion___u_33 *)((void *)__u + 4);
          case 4: 
          __u->__ui = (unsigned int )((int )__c * 16843009);
          case 0: ;
          break;
          }
        }
      } else {
        goto _L;
      }
    } else {
      _L: /* CIL Label */ 
      __s = (void *)pktp;
      __builtin_memset(__s, '\000', (int )sizeof(struct my_in_pktinfo ));
    }
    pktp->ipi_ifindex = -1;
  }
  (*flagsp) = msg.msg_flags;
  if (msg.msg_controllen < sizeof(struct cmsghdr )) {
    goto _L___1;
  } else {
    if (msg.msg_flags & 8) {
      _L___1: /* CIL Label */ 
      goto _L___0;
    } else {
      if ((unsigned int )pktp == (unsigned int )((void *)0)) {
        _L___0: /* CIL Label */ 
        return (n);
      }
    }
  }
  if (msg.msg_controllen >= sizeof(struct cmsghdr )) {
    cmptr = (struct cmsghdr *)msg.msg_control;
  } else {
    cmptr = (struct cmsghdr *)((void *)0);
  }
  while ((unsigned int )cmptr != (unsigned int )((void *)0)) {
    if (cmptr->cmsg_level == 0) {
      if (cmptr->cmsg_type == 8) {
        sin = (struct sockaddr_in *)(& pktp->ipi_addr);
        tmp___0 = (struct in_pktinfo *)(cmptr->__cmsg_data);
        sin->sin_family = (unsigned short)2;
        sin->sin_addr = tmp___0->ipi_addr;
        sin->sin_port = (unsigned short)0;
        pktp->ipi_ifindex = tmp___0->ipi_ifindex;
        goto __Cont;
      } else {
        goto _L___2;
      }
    } else {
      _L___2: /* CIL Label */ ;
    }
    __assert_fail("0", "mDNSUNP.c", 445U, "recvfrom_flags");
    __Cont: /* CIL Label */ 
    cmptr = __cmsg_nxthdr__extinline(& msg, cmptr);
  }
  return (n);
}
}
#pragma merger(0,"/tmp/cil-yR4qcOGL.i","-g -g -O2")
int rend_pipe_to[2] ;
int rend_send_response(int value ) ;
int rend_private_init(char *user ) ;
int rend_read_message(REND_MESSAGE *pmsg ) ;
static mDNS mDNSStorage  ;
static mDNS_PlatformSupport PlatformStorage  ;
static mDNSBool volatile   gStopNow  ;
static void HandleSigInt(int sigraised ) 
{ 

  {
  if (! (sigraised == 2)) {
    __assert_fail("sigraised == 2", "rend-posix.c", 219U, "HandleSigInt");
  }
  err_log(5, 2048U, (char *)"SIGINT\n");
  gStopNow = 1;
  return;
}
}
static void HandleSigQuit(int sigraised ) 
{ 

  {
  if (! (sigraised == 3)) {
    __assert_fail("sigraised == 3", "rend-posix.c", 232U, "HandleSigQuit");
  }
  err_log(5, 2048U, (char *)"SIGQUIT\n");
  mDNS_Close(& mDNSStorage);
  exit(0);
}
}
static PosixService *gServiceList  =    (PosixService *)((void *)0);
static void RegistrationCallback(mDNS *m , ServiceRecordSet *thisRegistration , mStatus status ) 
{ 

  {
  switch (status) {
  case 0: 
  err_log(9, 2048U, (char *)"Callback: Name Registered\n");
  break;
  case -65548: 
  err_log(2, 2048U, (char *)"Callback: Name Conflict\n");
  status = mDNS_RenameAndReregisterService(m, thisRegistration, (domainlabel const   *)0L);
  if (! (status == 0)) {
    __assert_fail("status == mStatus_NoError", "rend-posix.c", 287U, "RegistrationCallback");
  }
  break;
  case -65792: 
  err_log(2, 2048U, (char *)"Callback: Memory Free\n");
  free((void *)thisRegistration);
  break;
  default: 
  err_log(2, 2048U, (char *)"Callback: Unknown Status %d\n", status);
  break;
  }
}
}
static int gServiceID  =    0;
static mStatus RegisterOneService(char const   *richTextHostName , char const   *serviceType ,
                                  char const   *serviceDomain , mDNSu8 const   *text ,
                                  mDNSu16 textLen , long portNumber ) 
{ mStatus status ;
  PosixService *thisServ ;
  mDNSOpaque16 port ;
  domainlabel name ;
  domainname type ;
  domainname domain ;

  {
  status = 0;
  thisServ = (PosixService *)malloc(sizeof((*thisServ)));
  if ((unsigned int )thisServ == (unsigned int )((void *)0)) {
    status = -65539;
  }
  if (status == 0) {
    MakeDomainLabelFromLiteralString(& name, richTextHostName);
    MakeDomainNameFromDNSNameString(& type, serviceType);
    MakeDomainNameFromDNSNameString(& domain, serviceDomain);
    port.b[0] = (unsigned char )((portNumber >> 8) & 255L);
    port.b[1] = (unsigned char )((portNumber >> 0) & 255L);
    status = mDNS_RegisterService(& mDNSStorage, & thisServ->coreServ, (domainlabel const   *)(& name),
                                  (domainname const   *)(& type), (domainname const   *)(& domain),
                                  (domainname const   *)((void *)0), port, text, textLen,
                                  (AuthRecord *)((void *)0), 0U, mDNSInterface_Any,
                                  & RegistrationCallback, (void *)thisServ);
  }
  if (status == 0) {
    thisServ->serviceID = gServiceID;
    gServiceID ++;
    thisServ->next = gServiceList;
    gServiceList = thisServ;
    err_log(9, 2048U, (char *)"Registered service %d, name \'%s\', type \'%s\', domain \'%s\', port %ld\n",
            thisServ->serviceID, richTextHostName, serviceType, serviceDomain, portNumber);
  } else {
    if ((unsigned int )thisServ != (unsigned int )((void *)0)) {
      free((void *)thisServ);
    }
  }
  return (status);
}
}
static void DeregisterOurServices(void) 
{ PosixService *thisServ ;
  int thisServID ;

  {
  while ((unsigned int )gServiceList != (unsigned int )((void *)0)) {
    thisServ = gServiceList;
    gServiceList = thisServ->next;
    thisServID = thisServ->serviceID;
    mDNS_DeregisterService(& mDNSStorage, & thisServ->coreServ);
    err_log(9, 2048U, (char *)"Deregistered service %d\n", thisServ->serviceID);
  }
  return;
}
}
void rend_callback(void) 
{ REND_MESSAGE msg ;
  int result ;
  int err ;
  int *tmp ;

  {
  err_log(9, 2048U, (char *)"Processing rendezvous message\n");
  result = rend_read_message(& msg);
  if ((unsigned int )result != sizeof(msg)) {
    tmp = __errno_location();
    err = (*tmp);
    err_log(0, 2048U, (char *)"Rendezvous socket closed (daap server crashed?) Aborting.\n");
    gStopNow = 1;
    return;
  }
  switch (msg.cmd) {
  case 0: 
  err_log(9, 2048U, (char *)"Registering %s.%s (%d)\n", msg.name, msg.type, msg.port);
  RegisterOneService((char const   *)(msg.name), (char const   *)(msg.type), "local.",
                     (mDNSu8 const   *)"\034Database ID=beddab1edeadbea7", (unsigned short)29,
                     (long )msg.port);
  rend_send_response(0);
  break;
  case 1: 
  rend_send_response(1);
  break;
  case 2: 
  err_log(5, 2048U, (char *)"Stopping mDNS\n");
  gStopNow = 1;
  rend_send_response(0);
  break;
  case 3: 
  rend_send_response(1);
  break;
  default: ;
  break;
  }
}
}
int rend_private_init(char *user ) 
{ mStatus status ;
  mDNSBool result ;
  int tmp ;
  int nfds ;
  fd_set readfds ;
  struct timeval timeout ;
  int result___0 ;
  int __d0 ;
  int __d1 ;
  int *tmp___0 ;
  int *tmp___1 ;
  register char __result ;

  {
  status = mDNS_Init(& mDNSStorage, & PlatformStorage, (CacheRecord *)0L, 0U, 1, (mDNSCallback *)0L,
                     (void *)0L);
  if (status != 0) {
    err_log(0, 2048U, (char *)"mDNS Error %d\n", status);
    return (-1);
  }
  tmp = drop_privs(user);
  if (tmp) {
    return (-1);
  }
  signal(2, & HandleSigInt);
  signal(3, & HandleSigQuit);
  signal(1, (void (*)(int  ))1);
  while (! gStopNow) {
    nfds = 1;
    while (1) {
      __asm__  volatile   ("cld; rep; stosl": "=c" (__d0), "=D" (__d1): "a" (0), "0" (sizeof(fd_set ) /
                                                                                      sizeof(__fd_mask )),
                           "1" (& readfds.__fds_bits[0]): "memory");
      break;
    }
    __asm__  volatile   ("btsl %1,%0": "=m" (readfds.__fds_bits[(unsigned int )rend_pipe_to[0] /
                                                                (8U * sizeof(__fd_mask ))]): "r" ((unsigned int )rend_pipe_to[0] %
                                                                                                  (8U *
                                                                                                   sizeof(__fd_mask ))): "cc",
                         "memory");
    timeout.tv_sec = 1073741823L;
    timeout.tv_usec = 0L;
    mDNSPosixGetFDSet(& mDNSStorage, & nfds, & readfds, & timeout);
    err_log(9, 2048U, (char *)"select(%d, %d.%06d)\n", nfds, timeout.tv_sec, timeout.tv_usec);
    result___0 = select(nfds, (fd_set * __restrict  )(& readfds), (fd_set * __restrict  )((void *)0),
                        (fd_set * __restrict  )((void *)0), (struct timeval * __restrict  )(& timeout));
    if (result___0 < 0) {
      tmp___0 = __errno_location();
      if ((*tmp___0) != 4) {
        gStopNow = 1;
      }
      tmp___1 = __errno_location();
      err_log(2, 2048U, (char *)"select() returned %d errno %d\n", result___0, (*tmp___1));
    } else {
      mDNSPosixProcessFDSet(& mDNSStorage, & readfds);
      __asm__  volatile   ("btl %1,%2 ; setcb %b0": "=q" (__result): "r" ((unsigned int )rend_pipe_to[0] %
                                                                          (8U * sizeof(__fd_mask ))),
                           "m" (readfds.__fds_bits[(unsigned int )rend_pipe_to[0] /
                                                   (8U * sizeof(__fd_mask ))]): "cc");
      if (__result) {
        rend_callback();
      }
    }
  }
  err_log(9, 2048U, (char *)"Exiting\n");
  DeregisterOurServices();
  mDNS_Close(& mDNSStorage);
  if (status == 0) {
    result = 0;
  } else {
    result = 2;
  }
  err_log(9, 2048U, (char *)"Finished with status %ld, result %d\n", status, result);
  exit(result);
}
}
#pragma merger(0,"/tmp/cil-VpuD4wlB.i","-g -g -O2")
extern int pipe(int *__pipedes ) ;
int rend_pipe_to[2]  ;
int rend_pipe_from[2]  ;
int rend_send_message(REND_MESSAGE *pmsg ) ;
int rend_pid  ;
int rend_init(char *user ) 
{ int err ;
  int fd ;
  int tmp ;
  int *tmp___0 ;
  int *tmp___1 ;
  int tmp___2 ;
  int *tmp___3 ;
  int *tmp___4 ;
  int *tmp___5 ;

  {
  tmp = pipe((int *)(& rend_pipe_to));
  if (tmp == -1) {
    return (-1);
  }
  tmp___2 = pipe((int *)(& rend_pipe_from));
  if (tmp___2 == -1) {
    tmp___0 = __errno_location();
    err = (*tmp___0);
    close(rend_pipe_to[0]);
    close(rend_pipe_to[1]);
    tmp___1 = __errno_location();
    (*tmp___1) = err;
    return (-1);
  }
  rend_pid = fork();
  if (rend_pid == -1) {
    tmp___3 = __errno_location();
    err = (*tmp___3);
    close(rend_pipe_to[0]);
    close(rend_pipe_to[1]);
    close(rend_pipe_from[0]);
    close(rend_pipe_from[1]);
    tmp___4 = __errno_location();
    (*tmp___4) = err;
    return (-1);
  }
  if (rend_pid) {
    close(rend_pipe_to[0]);
    close(rend_pipe_from[1]);
    return (0);
  }
  close(rend_pipe_to[1]);
  close(rend_pipe_from[0]);
  signal(22, (void (*)(int  ))1);
  signal(21, (void (*)(int  ))1);
  signal(20, (void (*)(int  ))1);
  setpgrp();
  fd = open("/dev/null", 2, 0);
  if (fd != -1) {
    dup2(fd, 0);
    dup2(fd, 1);
    dup2(fd, 2);
    if (fd > 2) {
      close(fd);
    }
  }
  tmp___5 = __errno_location();
  (*tmp___5) = 0;
  chdir("/");
  umask(0);
  rend_private_init(user);
  exit(0);
}
}
int rend_running(void) 
{ REND_MESSAGE msg ;
  int result ;
  void *__s ;
  void *__s___0 ;
  union __anonunion___u_41 *__u ;
  __uint8_t __c ;
  void *__s___1 ;
  int tmp ;

  {
  err_log(9, 2048U, (char *)"Status inquiry\n");
  tmp = __builtin_constant_p(sizeof(msg));
  if (tmp) {
    if (sizeof(msg) <= 16U) {
      if (sizeof(msg) == 1U) {
        __s___1 = (void *)(& msg);
        (*((__uint8_t *)__s___1)) = (unsigned char)0;
      } else {
        __s___0 = (void *)(& msg);
        __u = (union __anonunion___u_41 *)__s___0;
        __c = (unsigned char)0;
        switch ((int )sizeof(msg)) {
        case 15: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_41 *)((void *)__u + 4);
        case 11: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_41 *)((void *)__u + 4);
        case 7: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_41 *)((void *)__u + 4);
        case 3: 
        __u->__usi = (unsigned short )((int )((unsigned short )__c) * 257);
        __u = (union __anonunion___u_41 *)((void *)__u + 2);
        __u->__uc = __c;
        break;
        case 14: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_41 *)((void *)__u + 4);
        case 10: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_41 *)((void *)__u + 4);
        case 6: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_41 *)((void *)__u + 4);
        case 2: 
        __u->__usi = (unsigned short )((int )((unsigned short )__c) * 257);
        break;
        case 13: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_41 *)((void *)__u + 4);
        case 9: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_41 *)((void *)__u + 4);
        case 5: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_41 *)((void *)__u + 4);
        case 1: 
        __u->__uc = __c;
        break;
        case 16: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_41 *)((void *)__u + 4);
        case 12: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_41 *)((void *)__u + 4);
        case 8: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_41 *)((void *)__u + 4);
        case 4: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        case 0: ;
        break;
        }
      }
    } else {
      goto _L;
    }
  } else {
    _L: /* CIL Label */ 
    __s = (void *)(& msg);
    __builtin_memset(__s, '\000', (int )sizeof(msg));
  }
  msg.cmd = 3;
  result = rend_send_message(& msg);
  err_log(9, 2048U, (char *)"Returning status %d\n", result);
  return (result);
}
}
int rend_stop(void) 
{ REND_MESSAGE msg ;
  int tmp ;

  {
  msg.cmd = 2;
  tmp = rend_send_message(& msg);
  return (tmp);
}
}
int rend_register(char *name , char *type , int port ) 
{ REND_MESSAGE msg ;
  size_t tmp ;
  size_t tmp___0 ;
  void *__s ;
  void *__s___0 ;
  union __anonunion___u_42 *__u ;
  __uint8_t __c ;
  void *__s___1 ;
  int tmp___1 ;
  int tmp___2 ;

  {
  tmp = strlen((char const   *)name);
  if (tmp + 1U > 256U) {
    goto _L;
  } else {
    tmp___0 = strlen((char const   *)type);
    if (tmp___0 + 1U > 256U) {
      _L: /* CIL Label */ 
      err_log(0, 2048U, (char *)"Registration failed: name or type too long\n");
      return (-1);
    }
  }
  tmp___1 = __builtin_constant_p(sizeof(msg));
  if (tmp___1) {
    if (sizeof(msg) <= 16U) {
      if (sizeof(msg) == 1U) {
        __s___1 = (void *)(& msg);
        (*((__uint8_t *)__s___1)) = (unsigned char)0;
      } else {
        __s___0 = (void *)(& msg);
        __u = (union __anonunion___u_42 *)__s___0;
        __c = (unsigned char)0;
        switch ((int )sizeof(msg)) {
        case 15: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_42 *)((void *)__u + 4);
        case 11: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_42 *)((void *)__u + 4);
        case 7: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_42 *)((void *)__u + 4);
        case 3: 
        __u->__usi = (unsigned short )((int )((unsigned short )__c) * 257);
        __u = (union __anonunion___u_42 *)((void *)__u + 2);
        __u->__uc = __c;
        break;
        case 14: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_42 *)((void *)__u + 4);
        case 10: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_42 *)((void *)__u + 4);
        case 6: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_42 *)((void *)__u + 4);
        case 2: 
        __u->__usi = (unsigned short )((int )((unsigned short )__c) * 257);
        break;
        case 13: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_42 *)((void *)__u + 4);
        case 9: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_42 *)((void *)__u + 4);
        case 5: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_42 *)((void *)__u + 4);
        case 1: 
        __u->__uc = __c;
        break;
        case 16: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_42 *)((void *)__u + 4);
        case 12: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_42 *)((void *)__u + 4);
        case 8: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        __u = (union __anonunion___u_42 *)((void *)__u + 4);
        case 4: 
        __u->__ui = (unsigned int )((int )__c * 16843009);
        case 0: ;
        break;
        }
      }
    } else {
      goto _L___0;
    }
  } else {
    _L___0: /* CIL Label */ 
    __s = (void *)(& msg);
    __builtin_memset(__s, '\000', (int )sizeof(msg));
  }
  msg.cmd = 0;
  strcpy((char * __restrict  )(msg.name), (char const   * __restrict  )name);
  strcpy((char * __restrict  )(msg.type), (char const   * __restrict  )type);
  msg.port = port;
  tmp___2 = rend_send_message(& msg);
  return (tmp___2);
}
}
int rend_unregister(char *name , char *type , int port ) 
{ 

  {
  return (-1);
}
}
int rend_send_message(REND_MESSAGE *pmsg ) 
{ int retval ;
  ssize_t tmp ;
  ssize_t tmp___0 ;

  {
  tmp = r_write(rend_pipe_to[1], (void *)pmsg, sizeof(REND_MESSAGE ));
  if (tmp == -1) {
    return (-1);
  }
  tmp___0 = r_read(rend_pipe_from[0], (void *)(& retval), sizeof(int ));
  retval = tmp___0 == -1;
  if (retval) {
    return (-1);
  }
  return (retval);
}
}
int rend_read_message(REND_MESSAGE *pmsg ) 
{ int tmp ;

  {
  tmp = r_read(rend_pipe_to[0], (void *)pmsg, sizeof(REND_MESSAGE ));
  return (tmp);
}
}
int rend_send_response(int value ) 
{ int tmp ;

  {
  tmp = r_write(rend_pipe_from[1], (void *)(& value), sizeof(int ));
  return (tmp);
}
}
