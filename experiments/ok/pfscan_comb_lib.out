../cil/bin/cilly  pfscan_comb_lib.c > out/pfscan_comb_lib.out 2>&1
gcc -D_GNUCC -E -DCIL=1 pfscan_comb_lib.c -o /tmp/cil-Z9K4EzGJ.i
/export/home/mwh/src/tmp/locksmith/cil/obj/x86_LINUX/cilly.asm.exe --out /tmp/cil-Y5Ga5eVS.cil.c --list-guardedby --list-shared --locksmith-version /tmp/cil-Z9K4EzGJ.i

************************* STARTING *************************


pfscan_comb.c:796: Warning: assigning number to pointer

lib.c:143: Warning: subtyping incompatible types:
int
(void)

lib.c:173: Warning: subtyping incompatible types:
int
(void)

lib.c:211: Warning: subtyping incompatible types:
int
(void)

lib.c:217: Warning: subtyping incompatible types:
(void)
int

lib.c:254: Warning: subtyping incompatible types:
int
(void)

lib.c:259: Warning: subtyping incompatible types:
(void)
int

lib.c:282: Warning: subtyping incompatible types:
int
(void)

lib.c:299: Warning: subtyping incompatible types:
int
(void)

lib.c:306: Warning: subtyping incompatible types:
int
(void)
functions declared but not defined:
  pthread_cond_broadcast
  pthread_cond_destroy
  pthread_cond_init
  tolower
  pthread_cond_wait
  pthread_cond_signal
  pthread_attr_setscope
  pthread_attr_init
  setrlimit
  getrlimit
  munmap
  mmap
  setlocale
  __fxstat
  signal
  toupper
  __ctype_b_loc
  fputs
  sscanf
shared: &aworkers:pfscan_comb.c:217
        &n_matches:pfscan_comb.c:223
        alloc:pfscan_comb.c:1204
        alloc:lib.c:180
        alloc.nextout:pfscan_comb.c:227
        alloc.occupied:pfscan_comb.c:227
        alloc.closed:pfscan_comb.c:227
&aworkers:pfscan_comb.c:217 is protected by:
  aworker_lock:pfscan_comb.c:218
  concrete aworker_lock:pfscan_comb.c:799
  *pthread_cond_wait.__mutex:pfscan_comb.c:954

Warning: Possible data race: &n_matches:pfscan_comb.c:223 is not protected!
 references:
  dereference at pfscan_comb.c:582
    locations possibly dereferenced: 
      &n_matches:pfscan_comb.c:223
    locks acquired at dereference: 
      matches_lock:pfscan_comb.c:226
      concrete matches_lock:pfscan_comb.c:800
    in: FORK at pfscan_comb.c:926 -> worker pfscan_comb.c:926 -> scan_file pfscan_comb.c:739 -> matchfun pfscan_comb.c:669

  dereference at pfscan_comb.c:958
    locations possibly dereferenced: 
      &n_matches:pfscan_comb.c:223
    locks acquired at dereference: 
      <empty>
    in: main at pfscan_comb.c:958

  dereference at pfscan_comb.c:961
    locations possibly dereferenced: 
      &n_matches:pfscan_comb.c:223
    locks acquired at dereference: 
      <empty>
    in: main at pfscan_comb.c:958

  dereference at pfscan_comb.c:582
    locations possibly dereferenced: 
      &n_matches:pfscan_comb.c:223
    locks acquired at dereference: 
      matches_lock:pfscan_comb.c:226
      concrete matches_lock:pfscan_comb.c:800
    in: main at pfscan_comb.c:958 -> worker pfscan_comb.c:926 -> scan_file pfscan_comb.c:739 -> matchfun pfscan_comb.c:669

alloc:pfscan_comb.c:1204 is protected by:
  (gqb, **pqb, *pqueue_put.qp, *pqueue_get.qp, *pqueue_init.qp, *pqueue_close.qp).mtx:pfscan_comb.c:227
  concrete qp->mtx::-1 -> pqueue_init pfscan_comb.c:920

Warning: Possible data race: alloc:lib.c:180 is not protected!
 references:
  dereference at pfscan_comb.c:740
    locations possibly dereferenced: 
      tmp:pfscan_comb.c:683
      strdup.return:pfscan_comb.c:690
      pqueue_put.item:pfscan_comb.c:691
      path:pfscan_comb.c:730
      *pqueue_get.item:pfscan_comb.c:735
      *(*qp).buf:pfscan_comb.c:200
      alloc:lib.c:180
      *(gqb, **pqb, *pqueue_put.qp, *pqueue_get.qp, *pqueue_init.qp, *pqueue_close.qp).buf:pfscan_comb.c:227
    locks acquired at dereference: 
      <empty>
    in: FORK at pfscan_comb.c:926 -> worker pfscan_comb.c:926

  dereference at lib.c:158
    locations possibly dereferenced: 
      tmp:pfscan_comb.c:683
      strdup.return:pfscan_comb.c:690
      pqueue_put.item:pfscan_comb.c:691
      path:pfscan_comb.c:730
      *pqueue_get.item:pfscan_comb.c:735
      *(*qp).buf:pfscan_comb.c:200
      alloc:lib.c:180
      *(gqb, **pqb, *pqueue_put.qp, *pqueue_get.qp, *pqueue_init.qp, *pqueue_close.qp).buf:pfscan_comb.c:227
    locks acquired at dereference: 
      <empty>
    in: FORK at pfscan_comb.c:926 -> worker pfscan_comb.c:926 -> scan_file pfscan_comb.c:739 -> open pfscan_comb.c:625

  dereference at pfscan_comb.c:391
    locations possibly dereferenced: 
      rstr:pfscan_comb.c:212
      strdup.return:pfscan_comb.c:907
      deslash.str:pfscan_comb.c:908
      alloc:lib.c:180
    locks acquired at dereference: 
      <empty>
    in: main at pfscan_comb.c:958 -> deslash pfscan_comb.c:908

  dereference at pfscan_comb.c:397
    locations possibly dereferenced: 
      rstr:pfscan_comb.c:212
      strdup.return:pfscan_comb.c:907
      deslash.str:pfscan_comb.c:908
      alloc:lib.c:180
    locks acquired at dereference: 
      <empty>
    in: main at pfscan_comb.c:958 -> deslash pfscan_comb.c:908

  dereference at pfscan_comb.c:397
    locations possibly dereferenced: 
      rstr:pfscan_comb.c:212
      strdup.return:pfscan_comb.c:907
      deslash.str:pfscan_comb.c:908
      alloc:lib.c:180
    locks acquired at dereference: 
      <empty>
    in: main at pfscan_comb.c:958 -> deslash pfscan_comb.c:908

  dereference at pfscan_comb.c:404
    locations possibly dereferenced: 
      rstr:pfscan_comb.c:212
      strdup.return:pfscan_comb.c:907
      deslash.str:pfscan_comb.c:908
      alloc:lib.c:180
    locks acquired at dereference: 
      <empty>
    in: main at pfscan_comb.c:958 -> deslash pfscan_comb.c:908

  dereference at pfscan_comb.c:410
    locations possibly dereferenced: 
      rstr:pfscan_comb.c:212
      strdup.return:pfscan_comb.c:907
      deslash.str:pfscan_comb.c:908
      alloc:lib.c:180
    locks acquired at dereference: 
      <empty>
    in: main at pfscan_comb.c:958 -> deslash pfscan_comb.c:908

  dereference at pfscan_comb.c:416
    locations possibly dereferenced: 
      rstr:pfscan_comb.c:212
      strdup.return:pfscan_comb.c:907
      deslash.str:pfscan_comb.c:908
      alloc:lib.c:180
    locks acquired at dereference: 
      <empty>
    in: main at pfscan_comb.c:958 -> deslash pfscan_comb.c:908

  dereference at pfscan_comb.c:422
    locations possibly dereferenced: 
      rstr:pfscan_comb.c:212
      strdup.return:pfscan_comb.c:907
      deslash.str:pfscan_comb.c:908
      alloc:lib.c:180
    locks acquired at dereference: 
      <empty>
    in: main at pfscan_comb.c:958 -> deslash pfscan_comb.c:908

  dereference at pfscan_comb.c:459
    locations possibly dereferenced: 
      rstr:pfscan_comb.c:212
      strdup.return:pfscan_comb.c:907
      deslash.str:pfscan_comb.c:908
      alloc:lib.c:180
    locks acquired at dereference: 
      <empty>
    in: main at pfscan_comb.c:958 -> deslash pfscan_comb.c:908

  dereference at pfscan_comb.c:740
    locations possibly dereferenced: 
      tmp:pfscan_comb.c:683
      strdup.return:pfscan_comb.c:690
      pqueue_put.item:pfscan_comb.c:691
      path:pfscan_comb.c:730
      *pqueue_get.item:pfscan_comb.c:735
      *(*qp).buf:pfscan_comb.c:200
      alloc:lib.c:180
      *(gqb, **pqb, *pqueue_put.qp, *pqueue_get.qp, *pqueue_init.qp, *pqueue_close.qp).buf:pfscan_comb.c:227
    locks acquired at dereference: 
      <empty>
    in: main at pfscan_comb.c:958 -> worker pfscan_comb.c:926

  dereference at pfscan_comb.c:429
    locations possibly dereferenced: 
      rstr:pfscan_comb.c:212
      strdup.return:pfscan_comb.c:907
      deslash.str:pfscan_comb.c:908
      alloc:lib.c:180
    locks acquired at dereference: 
      <empty>
    in: main at pfscan_comb.c:958 -> deslash pfscan_comb.c:908

  dereference at pfscan_comb.c:434
    locations possibly dereferenced: 
      rstr:pfscan_comb.c:212
      strdup.return:pfscan_comb.c:907
      deslash.str:pfscan_comb.c:908
      alloc:lib.c:180
    locks acquired at dereference: 
      <empty>
    in: main at pfscan_comb.c:958 -> deslash pfscan_comb.c:908

  dereference at pfscan_comb.c:1092
    locations possibly dereferenced: 
      rstr:pfscan_comb.c:212
      strdup.return:pfscan_comb.c:907
      bm_init.x:pfscan_comb.c:909
      alloc:lib.c:180
    locks acquired at dereference: 
      <empty>
    in: main at pfscan_comb.c:958 -> bm_init pfscan_comb.c:909

  dereference at lib.c:158
    locations possibly dereferenced: 
      tmp:pfscan_comb.c:683
      strdup.return:pfscan_comb.c:690
      pqueue_put.item:pfscan_comb.c:691
      path:pfscan_comb.c:730
      *pqueue_get.item:pfscan_comb.c:735
      *(*qp).buf:pfscan_comb.c:200
      alloc:lib.c:180
      *(gqb, **pqb, *pqueue_put.qp, *pqueue_get.qp, *pqueue_init.qp, *pqueue_close.qp).buf:pfscan_comb.c:227
    locks acquired at dereference: 
      <empty>
    in: main at pfscan_comb.c:958 -> worker pfscan_comb.c:926 -> scan_file pfscan_comb.c:739 -> open pfscan_comb.c:625

  dereference at pfscan_comb.c:447
    locations possibly dereferenced: 
      rstr:pfscan_comb.c:212
      strdup.return:pfscan_comb.c:907
      deslash.str:pfscan_comb.c:908
      alloc:lib.c:180
    locks acquired at dereference: 
      <empty>
    in: main at pfscan_comb.c:958 -> deslash pfscan_comb.c:908

  dereference at pfscan_comb.c:454
    locations possibly dereferenced: 
      rstr:pfscan_comb.c:212
      strdup.return:pfscan_comb.c:907
      deslash.str:pfscan_comb.c:908
      alloc:lib.c:180
    locks acquired at dereference: 
      <empty>
    in: main at pfscan_comb.c:958 -> deslash pfscan_comb.c:908

  dereference at pfscan_comb.c:454
    locations possibly dereferenced: 
      rstr:pfscan_comb.c:212
      strdup.return:pfscan_comb.c:907
      deslash.str:pfscan_comb.c:908
      alloc:lib.c:180
    locks acquired at dereference: 
      <empty>
    in: main at pfscan_comb.c:958 -> deslash pfscan_comb.c:908


Warning: Possible data race: alloc.nextout:pfscan_comb.c:227 is not protected!
 references:
  dereference at pfscan_comb.c:1275
    locations possibly dereferenced: 
      (gqb, **pqb, *pqueue_put.qp, *pqueue_get.qp, *pqueue_init.qp, *pqueue_close.qp).nextout:pfscan_comb.c:227
      alloc.nextout:pfscan_comb.c:227
    locks acquired at dereference: 
      (gqb, **pqb, *pqueue_put.qp, *pqueue_get.qp, *pqueue_init.qp, *pqueue_close.qp).mtx:pfscan_comb.c:227
      concrete qp->mtx::-1 -> pqueue_init pfscan_comb.c:920
    in: FORK at pfscan_comb.c:926 -> worker pfscan_comb.c:926 -> pqueue_get pfscan_comb.c:735

  dereference at pfscan_comb.c:1211
    locations possibly dereferenced: 
      (gqb, **pqb, *pqueue_put.qp, *pqueue_get.qp, *pqueue_init.qp, *pqueue_close.qp).nextout:pfscan_comb.c:227
      alloc.nextout:pfscan_comb.c:227
    locks acquired at dereference: 
      <empty>
    in: main at pfscan_comb.c:958 -> pqueue_init pfscan_comb.c:920

  dereference at pfscan_comb.c:1275
    locations possibly dereferenced: 
      (gqb, **pqb, *pqueue_put.qp, *pqueue_get.qp, *pqueue_init.qp, *pqueue_close.qp).nextout:pfscan_comb.c:227
      alloc.nextout:pfscan_comb.c:227
    locks acquired at dereference: 
      (gqb, **pqb, *pqueue_put.qp, *pqueue_get.qp, *pqueue_init.qp, *pqueue_close.qp).mtx:pfscan_comb.c:227
      concrete qp->mtx::-1 -> pqueue_init pfscan_comb.c:920
    in: main at pfscan_comb.c:958 -> worker pfscan_comb.c:926 -> pqueue_get pfscan_comb.c:735


Warning: Possible data race: alloc.occupied:pfscan_comb.c:227 is not protected!
 references:
  dereference at pfscan_comb.c:1264
    locations possibly dereferenced: 
      (gqb, **pqb, *pqueue_put.qp, *pqueue_get.qp, *pqueue_init.qp, *pqueue_close.qp).occupied:pfscan_comb.c:227
      alloc.occupied:pfscan_comb.c:227
    locks acquired at dereference: 
      (gqb, **pqb, *pqueue_put.qp, *pqueue_get.qp, *pqueue_init.qp, *pqueue_close.qp).mtx:pfscan_comb.c:227
      concrete qp->mtx::-1 -> pqueue_init pfscan_comb.c:920
    in: FORK at pfscan_comb.c:926 -> worker pfscan_comb.c:926 -> pqueue_get pfscan_comb.c:735

  dereference at pfscan_comb.c:1209
    locations possibly dereferenced: 
      (gqb, **pqb, *pqueue_put.qp, *pqueue_get.qp, *pqueue_init.qp, *pqueue_close.qp).occupied:pfscan_comb.c:227
      alloc.occupied:pfscan_comb.c:227
    locks acquired at dereference: 
      <empty>
    in: main at pfscan_comb.c:958 -> pqueue_init pfscan_comb.c:920

  dereference at pfscan_comb.c:1264
    locations possibly dereferenced: 
      (gqb, **pqb, *pqueue_put.qp, *pqueue_get.qp, *pqueue_init.qp, *pqueue_close.qp).occupied:pfscan_comb.c:227
      alloc.occupied:pfscan_comb.c:227
    locks acquired at dereference: 
      (gqb, **pqb, *pqueue_put.qp, *pqueue_get.qp, *pqueue_init.qp, *pqueue_close.qp).mtx:pfscan_comb.c:227
      concrete qp->mtx::-1 -> pqueue_init pfscan_comb.c:920
    in: main at pfscan_comb.c:958 -> worker pfscan_comb.c:926 -> pqueue_get pfscan_comb.c:735

  dereference at pfscan_comb.c:1241
    locations possibly dereferenced: 
      (gqb, **pqb, *pqueue_put.qp, *pqueue_get.qp, *pqueue_init.qp, *pqueue_close.qp).occupied:pfscan_comb.c:227
      alloc.occupied:pfscan_comb.c:227
    locks acquired at dereference: 
      (gqb, **pqb, *pqueue_put.qp, *pqueue_get.qp, *pqueue_init.qp, *pqueue_close.qp).mtx:pfscan_comb.c:227
      concrete qp->mtx::-1 -> pqueue_init pfscan_comb.c:920
    in: main at pfscan_comb.c:958 -> do_ftw pfscan_comb.c:939 -> foreach_path pfscan_comb.c:717 -> pqueue_put pfscan_comb.c:691


Warning: Possible data race: alloc.closed:pfscan_comb.c:227 is not protected!
 references:
  dereference at pfscan_comb.c:1265
    locations possibly dereferenced: 
      (gqb, **pqb, *pqueue_put.qp, *pqueue_get.qp, *pqueue_init.qp, *pqueue_close.qp).closed:pfscan_comb.c:227
      alloc.closed:pfscan_comb.c:227
    locks acquired at dereference: 
      (gqb, **pqb, *pqueue_put.qp, *pqueue_get.qp, *pqueue_init.qp, *pqueue_close.qp).mtx:pfscan_comb.c:227
      concrete qp->mtx::-1 -> pqueue_init pfscan_comb.c:920
    in: FORK at pfscan_comb.c:926 -> worker pfscan_comb.c:926 -> pqueue_get pfscan_comb.c:735

  dereference at pfscan_comb.c:1225
    locations possibly dereferenced: 
      (gqb, **pqb, *pqueue_put.qp, *pqueue_get.qp, *pqueue_init.qp, *pqueue_close.qp).closed:pfscan_comb.c:227
      alloc.closed:pfscan_comb.c:227
    locks acquired at dereference: 
      (gqb, **pqb, *pqueue_put.qp, *pqueue_get.qp, *pqueue_init.qp, *pqueue_close.qp).mtx:pfscan_comb.c:227
      concrete qp->mtx::-1 -> pqueue_init pfscan_comb.c:920
    in: main at pfscan_comb.c:958 -> pqueue_close pfscan_comb.c:948

  dereference at pfscan_comb.c:1212
    locations possibly dereferenced: 
      (gqb, **pqb, *pqueue_put.qp, *pqueue_get.qp, *pqueue_init.qp, *pqueue_close.qp).closed:pfscan_comb.c:227
      alloc.closed:pfscan_comb.c:227
    locks acquired at dereference: 
      <empty>
    in: main at pfscan_comb.c:958 -> pqueue_init pfscan_comb.c:920

  dereference at pfscan_comb.c:1265
    locations possibly dereferenced: 
      (gqb, **pqb, *pqueue_put.qp, *pqueue_get.qp, *pqueue_init.qp, *pqueue_close.qp).closed:pfscan_comb.c:227
      alloc.closed:pfscan_comb.c:227
    locks acquired at dereference: 
      (gqb, **pqb, *pqueue_put.qp, *pqueue_get.qp, *pqueue_init.qp, *pqueue_close.qp).mtx:pfscan_comb.c:227
      concrete qp->mtx::-1 -> pqueue_init pfscan_comb.c:920
    in: main at pfscan_comb.c:958 -> worker pfscan_comb.c:926 -> pqueue_get pfscan_comb.c:735

  dereference at pfscan_comb.c:1238
    locations possibly dereferenced: 
      (gqb, **pqb, *pqueue_put.qp, *pqueue_get.qp, *pqueue_init.qp, *pqueue_close.qp).closed:pfscan_comb.c:227
      alloc.closed:pfscan_comb.c:227
    locks acquired at dereference: 
      (gqb, **pqb, *pqueue_put.qp, *pqueue_get.qp, *pqueue_init.qp, *pqueue_close.qp).mtx:pfscan_comb.c:227
      concrete qp->mtx::-1 -> pqueue_init pfscan_comb.c:920
    in: main at pfscan_comb.c:958 -> do_ftw pfscan_comb.c:939 -> foreach_path pfscan_comb.c:717 -> pqueue_put pfscan_comb.c:691

*************************** DONE ***************************

LockSmith run for: 0.380000 seconds

LockSmith build #$Rev: 1737 $gcc -D_GNUCC -E /tmp/cil-Y5Ga5eVS.cil.c -o /tmp/cil-rkD1dmGE.cil.i
gcc -D_GNUCC -c -o ./pfscan_comb_lib.o /tmp/cil-rkD1dmGE.cil.i
pfscan_comb.c:965: warning: `__unique__' attribute directive ignored
pfscan_comb.c:966: warning: `__unique__' attribute directive ignored
